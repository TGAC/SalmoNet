!function(a,b){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){"use strict";function c(a,b){b=b||_;var c=b.createElement("script");c.text=a,b.head.appendChild(c).parentNode.removeChild(c)}function d(a){var b=!!a&&"length"in a&&a.length,c=ma.type(a);return"function"!==c&&!ma.isWindow(a)&&("array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a)}function e(a,b,c){if(ma.isFunction(b))return ma.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return ma.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(wa.test(b))return ma.filter(b,a,c);b=ma.filter(b,a)}return ma.grep(a,function(a){return ea.call(b,a)>-1!==c&&1===a.nodeType})}function f(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}function g(a){var b={};return ma.each(a.match(Ca)||[],function(a,c){b[c]=!0}),b}function h(a){return a}function i(a){throw a}function j(a,b,c){var d;try{a&&ma.isFunction(d=a.promise)?d.call(a).done(b).fail(c):a&&ma.isFunction(d=a.then)?d.call(a,b,c):b.call(void 0,a)}catch(a){c.call(void 0,a)}}function k(){_.removeEventListener("DOMContentLoaded",k),a.removeEventListener("load",k),ma.ready()}function l(){this.expando=ma.expando+l.uid++}function m(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(Ka,"-$&").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c||"false"!==c&&("null"===c?null:+c+""===c?+c:Ja.test(c)?JSON.parse(c):c)}catch(e){}Ia.set(a,b,c)}else c=void 0;return c}function n(a,b,c,d){var e,f=1,g=20,h=d?function(){return d.cur()}:function(){return ma.css(a,b,"")},i=h(),j=c&&c[3]||(ma.cssNumber[b]?"":"px"),k=(ma.cssNumber[b]||"px"!==j&&+i)&&Ma.exec(ma.css(a,b));if(k&&k[3]!==j){j=j||k[3],c=c||[],k=+i||1;do f=f||".5",k/=f,ma.style(a,b,k+j);while(f!==(f=h()/i)&&1!==f&&--g)}return c&&(k=+k||+i||0,e=c[1]?k+(c[1]+1)*c[2]:+c[2],d&&(d.unit=j,d.start=k,d.end=e)),e}function o(a){var b,c=a.ownerDocument,d=a.nodeName,e=Qa[d];return e?e:(b=c.body.appendChild(c.createElement(d)),e=ma.css(b,"display"),b.parentNode.removeChild(b),"none"===e&&(e="block"),Qa[d]=e,e)}function p(a,b){for(var c,d,e=[],f=0,g=a.length;f<g;f++)d=a[f],d.style&&(c=d.style.display,b?("none"===c&&(e[f]=Ha.get(d,"display")||null,e[f]||(d.style.display="")),""===d.style.display&&Oa(d)&&(e[f]=o(d))):"none"!==c&&(e[f]="none",Ha.set(d,"display",c)));for(f=0;f<g;f++)null!=e[f]&&(a[f].style.display=e[f]);return a}function q(a,b){var c="undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName(b||"*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&ma.nodeName(a,b)?ma.merge([a],c):c}function r(a,b){for(var c=0,d=a.length;c<d;c++)Ha.set(a[c],"globalEval",!b||Ha.get(b[c],"globalEval"))}function s(a,b,c,d,e){for(var f,g,h,i,j,k,l=b.createDocumentFragment(),m=[],n=0,o=a.length;n<o;n++)if(f=a[n],f||0===f)if("object"===ma.type(f))ma.merge(m,f.nodeType?[f]:f);else if(Va.test(f)){for(g=g||l.appendChild(b.createElement("div")),h=(Sa.exec(f)||["",""])[1].toLowerCase(),i=Ua[h]||Ua._default,g.innerHTML=i[1]+ma.htmlPrefilter(f)+i[2],k=i[0];k--;)g=g.lastChild;ma.merge(m,g.childNodes),g=l.firstChild,g.textContent=""}else m.push(b.createTextNode(f));for(l.textContent="",n=0;f=m[n++];)if(d&&ma.inArray(f,d)>-1)e&&e.push(f);else if(j=ma.contains(f.ownerDocument,f),g=q(l.appendChild(f),"script"),j&&r(g),c)for(k=0;f=g[k++];)Ta.test(f.type||"")&&c.push(f);return l}function t(){return!0}function u(){return!1}function v(){try{return _.activeElement}catch(a){}}function w(a,b,c,d,e,f){var g,h;if("object"==typeof b){"string"!=typeof c&&(d=d||c,c=void 0);for(h in b)w(a,h,c,d,b[h],f);return a}if(null==d&&null==e?(e=c,d=c=void 0):null==e&&("string"==typeof c?(e=d,d=void 0):(e=d,d=c,c=void 0)),e===!1)e=u;else if(!e)return a;return 1===f&&(g=e,e=function(a){return ma().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=ma.guid++)),a.each(function(){ma.event.add(this,b,e,d,c)})}function x(a,b){return ma.nodeName(a,"table")&&ma.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a:a}function y(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function z(a){var b=bb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function A(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(Ha.hasData(a)&&(f=Ha.access(a),g=Ha.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;c<d;c++)ma.event.add(b,e,j[e][c])}Ia.hasData(a)&&(h=Ia.access(a),i=ma.extend({},h),Ia.set(b,i))}}function B(a,b){var c=b.nodeName.toLowerCase();"input"===c&&Ra.test(a.type)?b.checked=a.checked:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue)}function C(a,b,d,e){b=ca.apply([],b);var f,g,h,i,j,k,l=0,m=a.length,n=m-1,o=b[0],p=ma.isFunction(o);if(p||m>1&&"string"==typeof o&&!ka.checkClone&&ab.test(o))return a.each(function(c){var f=a.eq(c);p&&(b[0]=o.call(this,c,f.html())),C(f,b,d,e)});if(m&&(f=s(b,a[0].ownerDocument,!1,a,e),g=f.firstChild,1===f.childNodes.length&&(f=g),g||e)){for(h=ma.map(q(f,"script"),y),i=h.length;l<m;l++)j=f,l!==n&&(j=ma.clone(j,!0,!0),i&&ma.merge(h,q(j,"script"))),d.call(a[l],j,l);if(i)for(k=h[h.length-1].ownerDocument,ma.map(h,z),l=0;l<i;l++)j=h[l],Ta.test(j.type||"")&&!Ha.access(j,"globalEval")&&ma.contains(k,j)&&(j.src?ma._evalUrl&&ma._evalUrl(j.src):c(j.textContent.replace(cb,""),k))}return a}function D(a,b,c){for(var d,e=b?ma.filter(b,a):a,f=0;null!=(d=e[f]);f++)c||1!==d.nodeType||ma.cleanData(q(d)),d.parentNode&&(c&&ma.contains(d.ownerDocument,d)&&r(q(d,"script")),d.parentNode.removeChild(d));return a}function E(a,b,c){var d,e,f,g,h=a.style;return c=c||fb(a),c&&(g=c.getPropertyValue(b)||c[b],""!==g||ma.contains(a.ownerDocument,a)||(g=ma.style(a,b)),!ka.pixelMarginRight()&&eb.test(g)&&db.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function F(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}function G(a){if(a in kb)return a;for(var b=a[0].toUpperCase()+a.slice(1),c=jb.length;c--;)if(a=jb[c]+b,a in kb)return a}function H(a,b,c){var d=Ma.exec(b);return d?Math.max(0,d[2]-(c||0))+(d[3]||"px"):b}function I(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;f<4;f+=2)"margin"===c&&(g+=ma.css(a,c+Na[f],!0,e)),d?("content"===c&&(g-=ma.css(a,"padding"+Na[f],!0,e)),"margin"!==c&&(g-=ma.css(a,"border"+Na[f]+"Width",!0,e))):(g+=ma.css(a,"padding"+Na[f],!0,e),"padding"!==c&&(g+=ma.css(a,"border"+Na[f]+"Width",!0,e)));return g}function J(a,b,c){var d,e=!0,f=fb(a),g="border-box"===ma.css(a,"boxSizing",!1,f);if(a.getClientRects().length&&(d=a.getBoundingClientRect()[b]),d<=0||null==d){if(d=E(a,b,f),(d<0||null==d)&&(d=a.style[b]),eb.test(d))return d;e=g&&(ka.boxSizingReliable()||d===a.style[b]),d=parseFloat(d)||0}return d+I(a,b,c||(g?"border":"content"),e,f)+"px"}function K(a,b,c,d,e){return new K.prototype.init(a,b,c,d,e)}function L(){mb&&(a.requestAnimationFrame(L),ma.fx.tick())}function M(){return a.setTimeout(function(){lb=void 0}),lb=ma.now()}function N(a,b){var c,d=0,e={height:a};for(b=b?1:0;d<4;d+=2-b)c=Na[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function O(a,b,c){for(var d,e=(R.tweeners[b]||[]).concat(R.tweeners["*"]),f=0,g=e.length;f<g;f++)if(d=e[f].call(c,b,a))return d}function P(a,b,c){var d,e,f,g,h,i,j,k,l="width"in b||"height"in b,m=this,n={},o=a.style,q=a.nodeType&&Oa(a),r=Ha.get(a,"fxshow");c.queue||(g=ma._queueHooks(a,"fx"),null==g.unqueued&&(g.unqueued=0,h=g.empty.fire,g.empty.fire=function(){g.unqueued||h()}),g.unqueued++,m.always(function(){m.always(function(){g.unqueued--,ma.queue(a,"fx").length||g.empty.fire()})}));for(d in b)if(e=b[d],nb.test(e)){if(delete b[d],f=f||"toggle"===e,e===(q?"hide":"show")){if("show"!==e||!r||void 0===r[d])continue;q=!0}n[d]=r&&r[d]||ma.style(a,d)}if(i=!ma.isEmptyObject(b),i||!ma.isEmptyObject(n)){l&&1===a.nodeType&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=r&&r.display,null==j&&(j=Ha.get(a,"display")),k=ma.css(a,"display"),"none"===k&&(j?k=j:(p([a],!0),j=a.style.display||j,k=ma.css(a,"display"),p([a]))),("inline"===k||"inline-block"===k&&null!=j)&&"none"===ma.css(a,"float")&&(i||(m.done(function(){o.display=j}),null==j&&(k=o.display,j="none"===k?"":k)),o.display="inline-block")),c.overflow&&(o.overflow="hidden",m.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]})),i=!1;for(d in n)i||(r?"hidden"in r&&(q=r.hidden):r=Ha.access(a,"fxshow",{display:j}),f&&(r.hidden=!q),q&&p([a],!0),m.done(function(){q||p([a]),Ha.remove(a,"fxshow");for(d in n)ma.style(a,d,n[d])})),i=O(q?r[d]:0,d,m),d in r||(r[d]=i.start,q&&(i.end=i.start,i.start=0))}}function Q(a,b){var c,d,e,f,g;for(c in a)if(d=ma.camelCase(c),e=b[d],f=a[c],ma.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=ma.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function R(a,b,c){var d,e,f=0,g=R.prefilters.length,h=ma.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=lb||M(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;g<i;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),f<1&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:ma.extend({},b),opts:ma.extend(!0,{specialEasing:{},easing:ma.easing._default},c),originalProperties:b,originalOptions:c,startTime:lb||M(),duration:c.duration,tweens:[],createTween:function(b,c){var d=ma.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;c<d;c++)j.tweens[c].run(1);return b?(h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j,b])):h.rejectWith(a,[j,b]),this}}),k=j.props;for(Q(k,j.opts.specialEasing);f<g;f++)if(d=R.prefilters[f].call(j,a,k,j.opts))return ma.isFunction(d.stop)&&(ma._queueHooks(j.elem,j.opts.queue).stop=ma.proxy(d.stop,d)),d;return ma.map(k,O,j),ma.isFunction(j.opts.start)&&j.opts.start.call(a,j),ma.fx.timer(ma.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function S(a){return a.getAttribute&&a.getAttribute("class")||""}function T(a,b,c,d){var e;if(ma.isArray(b))ma.each(b,function(b,e){c||Ab.test(a)?d(a,e):T(a+"["+("object"==typeof e&&null!=e?b:"")+"]",e,c,d)});else if(c||"object"!==ma.type(b))d(a,b);else for(e in b)T(a+"["+e+"]",b[e],c,d)}function U(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(Ca)||[];if(ma.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function V(a,b,c,d){function e(h){var i;return f[h]=!0,ma.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||g||f[j]?g?!(i=j):void 0:(b.dataTypes.unshift(j),e(j),!1)}),i}var f={},g=a===Mb;return e(b.dataTypes[0])||!f["*"]&&e("*")}function W(a,b){var c,d,e=ma.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&ma.extend(!0,a,d),a}function X(a,b,c){for(var d,e,f,g,h=a.contents,i=a.dataTypes;"*"===i[0];)i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}if(f)return f!==i[0]&&i.unshift(f),c[f]}function Y(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}function Z(a){return ma.isWindow(a)?a:9===a.nodeType&&a.defaultView}var $=[],_=a.document,aa=Object.getPrototypeOf,ba=$.slice,ca=$.concat,da=$.push,ea=$.indexOf,fa={},ga=fa.toString,ha=fa.hasOwnProperty,ia=ha.toString,ja=ia.call(Object),ka={},la="3.0.0",ma=function(a,b){return new ma.fn.init(a,b)},na=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,oa=/^-ms-/,pa=/-([a-z])/g,qa=function(a,b){return b.toUpperCase()};ma.fn=ma.prototype={jquery:la,constructor:ma,length:0,toArray:function(){return ba.call(this)},get:function(a){return null!=a?a<0?this[a+this.length]:this[a]:ba.call(this)},pushStack:function(a){var b=ma.merge(this.constructor(),a);return b.prevObject=this,b},each:function(a){return ma.each(this,a)},map:function(a){return this.pushStack(ma.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(ba.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(a<0?b:0);return this.pushStack(c>=0&&c<b?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:da,sort:$.sort,splice:$.splice},ma.extend=ma.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||ma.isFunction(g)||(g={}),h===i&&(g=this,h--);h<i;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(ma.isPlainObject(d)||(e=ma.isArray(d)))?(e?(e=!1,f=c&&ma.isArray(c)?c:[]):f=c&&ma.isPlainObject(c)?c:{},g[b]=ma.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},ma.extend({expando:"jQuery"+(la+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===ma.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){var b=ma.type(a);return("number"===b||"string"===b)&&!isNaN(a-parseFloat(a))},isPlainObject:function(a){var b,c;return!(!a||"[object Object]"!==ga.call(a))&&(!(b=aa(a))||(c=ha.call(b,"constructor")&&b.constructor,"function"==typeof c&&ia.call(c)===ja))},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?fa[ga.call(a)]||"object":typeof a},globalEval:function(a){c(a)},camelCase:function(a){return a.replace(oa,"ms-").replace(pa,qa)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b){var c,e=0;if(d(a))for(c=a.length;e<c&&b.call(a[e],e,a[e])!==!1;e++);else for(e in a)if(b.call(a[e],e,a[e])===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(na,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(d(Object(a))?ma.merge(c,"string"==typeof a?[a]:a):da.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:ea.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;d<c;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;f<g;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var e,f,g=0,h=[];if(d(a))for(e=a.length;g<e;g++)f=b(a[g],g,c),null!=f&&h.push(f);else for(g in a)f=b(a[g],g,c),null!=f&&h.push(f);return ca.apply([],h)},guid:1,proxy:function(a,b){var c,d,e;if("string"==typeof b&&(c=a[b],b=a,a=c),ma.isFunction(a))return d=ba.call(arguments,2),e=function(){return a.apply(b||this,d.concat(ba.call(arguments)))},e.guid=a.guid=a.guid||ma.guid++,e},now:Date.now,support:ka}),"function"==typeof Symbol&&(ma.fn[Symbol.iterator]=$[Symbol.iterator]),ma.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){fa["[object "+b+"]"]=b.toLowerCase()});var ra=function(a){function b(a,b,c,d){var e,f,g,h,i,j,k,m=b&&b.ownerDocument,o=b?b.nodeType:9;if(c=c||[],"string"!=typeof a||!a||1!==o&&9!==o&&11!==o)return c;if(!d&&((b?b.ownerDocument||b:P)!==H&&G(b),b=b||H,J)){if(11!==o&&(i=ra.exec(a)))if(e=i[1]){if(9===o){if(!(g=b.getElementById(e)))return c;if(g.id===e)return c.push(g),c}else if(m&&(g=m.getElementById(e))&&N(b,g)&&g.id===e)return c.push(g),c}else{if(i[2])return $.apply(c,b.getElementsByTagName(a)),c;if((e=i[3])&&w.getElementsByClassName&&b.getElementsByClassName)return $.apply(c,b.getElementsByClassName(e)),c}if(w.qsa&&!U[a+" "]&&(!K||!K.test(a))){if(1!==o)m=b,k=a;else if("object"!==b.nodeName.toLowerCase()){for((h=b.getAttribute("id"))?h=h.replace(va,wa):b.setAttribute("id",h=O),j=A(a),f=j.length;f--;)j[f]="#"+h+" "+n(j[f]);k=j.join(","),m=sa.test(a)&&l(b.parentNode)||b}if(k)try{return $.apply(c,m.querySelectorAll(k)),c}catch(p){}finally{h===O&&b.removeAttribute("id")}}}return C(a.replace(ha,"$1"),b,c,d)}function c(){function a(c,d){return b.push(c+" ")>x.cacheLength&&delete a[b.shift()],a[c+" "]=d}var b=[];return a}function d(a){return a[O]=!0,a}function e(a){var b=H.createElement("fieldset");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function f(a,b){for(var c=a.split("|"),d=c.length;d--;)x.attrHandle[c[d]]=b}function g(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&a.sourceIndex-b.sourceIndex;if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function h(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function i(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function j(a){return function(b){return"label"in b&&b.disabled===a||"form"in b&&b.disabled===a||"form"in b&&b.disabled===!1&&(b.isDisabled===a||b.isDisabled!==!a&&("label"in b||!ya(b))!==a)}}function k(a){return d(function(b){return b=+b,d(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function l(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}function m(){}function n(a){for(var b=0,c=a.length,d="";b<c;b++)d+=a[b].value;return d}function o(a,b,c){var d=b.dir,e=b.next,f=e||d,g=c&&"parentNode"===f,h=R++;return b.first?function(b,c,e){for(;b=b[d];)if(1===b.nodeType||g)return a(b,c,e)}:function(b,c,i){var j,k,l,m=[Q,h];if(i){for(;b=b[d];)if((1===b.nodeType||g)&&a(b,c,i))return!0}else for(;b=b[d];)if(1===b.nodeType||g)if(l=b[O]||(b[O]={}),k=l[b.uniqueID]||(l[b.uniqueID]={}),e&&e===b.nodeName.toLowerCase())b=b[d]||b;else{if((j=k[f])&&j[0]===Q&&j[1]===h)return m[2]=j[2];if(k[f]=m,m[2]=a(b,c,i))return!0}}}function p(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function q(a,c,d){for(var e=0,f=c.length;e<f;e++)b(a,c[e],d);return d}function r(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;h<i;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function s(a,b,c,e,f,g){return e&&!e[O]&&(e=s(e)),f&&!f[O]&&(f=s(f,g)),d(function(d,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=d||q(b||"*",h.nodeType?[h]:h,[]),s=!a||!d&&b?p:r(p,m,a,h,i),t=c?f||(d?a:o||e)?[]:g:s;if(c&&c(s,t,h,i),e)for(j=r(t,n),e(j,[],h,i),k=j.length;k--;)(l=j[k])&&(t[n[k]]=!(s[n[k]]=l));if(d){if(f||a){if(f){for(j=[],k=t.length;k--;)(l=t[k])&&j.push(s[k]=l);f(null,t=[],j,i)}for(k=t.length;k--;)(l=t[k])&&(j=f?aa(d,l):m[k])>-1&&(d[j]=!(g[j]=l))}}else t=r(t===g?t.splice(o,t.length):t),f?f(null,g,t,i):$.apply(g,t)})}function t(a){for(var b,c,d,e=a.length,f=x.relative[a[0].type],g=f||x.relative[" "],h=f?1:0,i=o(function(a){return a===b},g,!0),j=o(function(a){return aa(b,a)>-1},g,!0),k=[function(a,c,d){var e=!f&&(d||c!==D)||((b=c).nodeType?i(a,c,d):j(a,c,d));return b=null,e}];h<e;h++)if(c=x.relative[a[h].type])k=[o(p(k),c)];else{if(c=x.filter[a[h].type].apply(null,a[h].matches),c[O]){for(d=++h;d<e&&!x.relative[a[d].type];d++);return s(h>1&&p(k),h>1&&n(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(ha,"$1"),c,h<d&&t(a.slice(h,d)),d<e&&t(a=a.slice(d)),d<e&&n(a))}k.push(c)}return p(k)}function u(a,c){var e=c.length>0,f=a.length>0,g=function(d,g,h,i,j){var k,l,m,n=0,o="0",p=d&&[],q=[],s=D,t=d||f&&x.find.TAG("*",j),u=Q+=null==s?1:Math.random()||.1,v=t.length;for(j&&(D=g===H||g||j);o!==v&&null!=(k=t[o]);o++){if(f&&k){for(l=0,g||k.ownerDocument===H||(G(k),h=!J);m=a[l++];)if(m(k,g||H,h)){i.push(k);break}j&&(Q=u)}e&&((k=!m&&k)&&n--,d&&p.push(k))}if(n+=o,e&&o!==n){for(l=0;m=c[l++];)m(p,q,g,h);if(d){if(n>0)for(;o--;)p[o]||q[o]||(q[o]=Y.call(i));q=r(q)}$.apply(i,q),j&&!d&&q.length>0&&n+c.length>1&&b.uniqueSort(i)}return j&&(Q=u,D=s),p};return e?d(g):g}var v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O="sizzle"+1*new Date,P=a.document,Q=0,R=0,S=c(),T=c(),U=c(),V=function(a,b){return a===b&&(F=!0),0},W={}.hasOwnProperty,X=[],Y=X.pop,Z=X.push,$=X.push,_=X.slice,aa=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},ba="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ca="[\\x20\\t\\r\\n\\f]",da="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",ea="\\["+ca+"*("+da+")(?:"+ca+"*([*^$|!~]?=)"+ca+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+da+"))|)"+ca+"*\\]",fa=":("+da+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ea+")*)|.*)\\)|)",ga=new RegExp(ca+"+","g"),ha=new RegExp("^"+ca+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ca+"+$","g"),ia=new RegExp("^"+ca+"*,"+ca+"*"),ja=new RegExp("^"+ca+"*([>+~]|"+ca+")"+ca+"*"),ka=new RegExp("="+ca+"*([^\\]'\"]*?)"+ca+"*\\]","g"),la=new RegExp(fa),ma=new RegExp("^"+da+"$"),na={ID:new RegExp("^#("+da+")"),CLASS:new RegExp("^\\.("+da+")"),TAG:new RegExp("^("+da+"|[*])"),ATTR:new RegExp("^"+ea),PSEUDO:new RegExp("^"+fa),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ca+"*(even|odd|(([+-]|)(\\d*)n|)"+ca+"*(?:([+-]|)"+ca+"*(\\d+)|))"+ca+"*\\)|)","i"),bool:new RegExp("^(?:"+ba+")$","i"),needsContext:new RegExp("^"+ca+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ca+"*((?:-\\d)?\\d*)"+ca+"*\\)|)(?=[^-]|$)","i")},oa=/^(?:input|select|textarea|button)$/i,pa=/^h\d$/i,qa=/^[^{]+\{\s*\[native \w/,ra=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,sa=/[+~]/,ta=new RegExp("\\\\([\\da-f]{1,6}"+ca+"?|("+ca+")|.)","ig"),ua=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:d<0?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},va=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,wa=function(a,b){return b?"\0"===a?"ï¿½":a.slice(0,-1)+"\\"+a.charCodeAt(a.length-1).toString(16)+" ":"\\"+a},xa=function(){G()},ya=o(function(a){return a.disabled===!0},{dir:"parentNode",next:"legend"});try{$.apply(X=_.call(P.childNodes),P.childNodes),X[P.childNodes.length].nodeType}catch(za){$={apply:X.length?function(a,b){Z.apply(a,_.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}w=b.support={},z=b.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return!!b&&"HTML"!==b.nodeName},G=b.setDocument=function(a){var b,c,d=a?a.ownerDocument||a:P;return d!==H&&9===d.nodeType&&d.documentElement?(H=d,I=H.documentElement,J=!z(H),P!==H&&(c=H.defaultView)&&c.top!==c&&(c.addEventListener?c.addEventListener("unload",xa,!1):c.attachEvent&&c.attachEvent("onunload",xa)),w.attributes=e(function(a){return a.className="i",!a.getAttribute("className")}),w.getElementsByTagName=e(function(a){return a.appendChild(H.createComment("")),!a.getElementsByTagName("*").length}),w.getElementsByClassName=qa.test(H.getElementsByClassName),w.getById=e(function(a){return I.appendChild(a).id=O,!H.getElementsByName||!H.getElementsByName(O).length}),w.getById?(x.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&J){var c=b.getElementById(a);return c?[c]:[]}},x.filter.ID=function(a){var b=a.replace(ta,ua);return function(a){return a.getAttribute("id")===b}}):(delete x.find.ID,x.filter.ID=function(a){var b=a.replace(ta,ua);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),x.find.TAG=w.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):w.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},x.find.CLASS=w.getElementsByClassName&&function(a,b){if("undefined"!=typeof b.getElementsByClassName&&J)return b.getElementsByClassName(a)},L=[],K=[],(w.qsa=qa.test(H.querySelectorAll))&&(e(function(a){I.appendChild(a).innerHTML="<a id='"+O+"'></a><select id='"+O+"-\r\\' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&K.push("[*^$]="+ca+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||K.push("\\["+ca+"*(?:value|"+ba+")"),a.querySelectorAll("[id~="+O+"-]").length||K.push("~="),a.querySelectorAll(":checked").length||K.push(":checked"),a.querySelectorAll("a#"+O+"+*").length||K.push(".#.+[+~]")}),e(function(a){a.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var b=H.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&K.push("name"+ca+"*[*^$|!~]?="),2!==a.querySelectorAll(":enabled").length&&K.push(":enabled",":disabled"),I.appendChild(a).disabled=!0,2!==a.querySelectorAll(":disabled").length&&K.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),K.push(",.*:")})),(w.matchesSelector=qa.test(M=I.matches||I.webkitMatchesSelector||I.mozMatchesSelector||I.oMatchesSelector||I.msMatchesSelector))&&e(function(a){w.disconnectedMatch=M.call(a,"*"),M.call(a,"[s!='']:x"),L.push("!=",fa)}),K=K.length&&new RegExp(K.join("|")),L=L.length&&new RegExp(L.join("|")),b=qa.test(I.compareDocumentPosition),N=b||qa.test(I.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},V=b?function(a,b){if(a===b)return F=!0,0;var c=!a.compareDocumentPosition-!b.compareDocumentPosition;return c?c:(c=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&c||!w.sortDetached&&b.compareDocumentPosition(a)===c?a===H||a.ownerDocument===P&&N(P,a)?-1:b===H||b.ownerDocument===P&&N(P,b)?1:E?aa(E,a)-aa(E,b):0:4&c?-1:1)}:function(a,b){if(a===b)return F=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,h=[a],i=[b];if(!e||!f)return a===H?-1:b===H?1:e?-1:f?1:E?aa(E,a)-aa(E,b):0;if(e===f)return g(a,b);for(c=a;c=c.parentNode;)h.unshift(c);for(c=b;c=c.parentNode;)i.unshift(c);for(;h[d]===i[d];)d++;return d?g(h[d],i[d]):h[d]===P?-1:i[d]===P?1:0},H):H},b.matches=function(a,c){return b(a,null,null,c)},b.matchesSelector=function(a,c){if((a.ownerDocument||a)!==H&&G(a),c=c.replace(ka,"='$1']"),w.matchesSelector&&J&&!U[c+" "]&&(!L||!L.test(c))&&(!K||!K.test(c)))try{var d=M.call(a,c);if(d||w.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return b(c,H,null,[a]).length>0},b.contains=function(a,b){return(a.ownerDocument||a)!==H&&G(a),N(a,b)},b.attr=function(a,b){(a.ownerDocument||a)!==H&&G(a);var c=x.attrHandle[b.toLowerCase()],d=c&&W.call(x.attrHandle,b.toLowerCase())?c(a,b,!J):void 0;return void 0!==d?d:w.attributes||!J?a.getAttribute(b):(d=a.getAttributeNode(b))&&d.specified?d.value:null},b.escape=function(a){return(a+"").replace(va,wa)},b.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},b.uniqueSort=function(a){var b,c=[],d=0,e=0;if(F=!w.detectDuplicates,E=!w.sortStable&&a.slice(0),a.sort(V),F){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return E=null,a},y=b.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=y(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d++];)c+=y(b);return c},x=b.selectors={cacheLength:50,createPseudo:d,match:na,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ta,ua),a[3]=(a[3]||a[4]||a[5]||"").replace(ta,ua),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return na.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&la.test(c)&&(b=A(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ta,ua).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=S[a+" "];return b||(b=new RegExp("(^|"+ca+")"+a+"("+ca+"|$)"))&&S(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,c,d){return function(e){var f=b.attr(e,a);return null==f?"!="===c:!c||(f+="","="===c?f===d:"!="===c?f!==d:"^="===c?d&&0===f.indexOf(d):"*="===c?d&&f.indexOf(d)>-1:"$="===c?d&&f.slice(-d.length)===d:"~="===c?(" "+f.replace(ga," ")+" ").indexOf(d)>-1:"|="===c&&(f===d||f.slice(0,d.length+1)===d+"-"))}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h,t=!1;if(q){if(f){for(;p;){for(m=b;m=m[p];)if(h?m.nodeName.toLowerCase()===r:1===m.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(m=q,l=m[O]||(m[O]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===Q&&j[1],t=n&&j[2],m=n&&q.childNodes[n];m=++n&&m&&m[p]||(t=n=0)||o.pop();)if(1===m.nodeType&&++t&&m===b){k[a]=[Q,n,t];break}}else if(s&&(m=b,l=m[O]||(m[O]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===Q&&j[1],t=n),t===!1)for(;(m=++n&&m&&m[p]||(t=n=0)||o.pop())&&((h?m.nodeName.toLowerCase()!==r:1!==m.nodeType)||!++t||(s&&(l=m[O]||(m[O]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),k[a]=[Q,t]),m!==b)););return t-=e,t===d||t%d===0&&t/d>=0}}},PSEUDO:function(a,c){var e,f=x.pseudos[a]||x.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return f[O]?f(c):f.length>1?(e=[a,a,"",c],x.setFilters.hasOwnProperty(a.toLowerCase())?d(function(a,b){for(var d,e=f(a,c),g=e.length;g--;)d=aa(a,e[g]),a[d]=!(b[d]=e[g])}):function(a){return f(a,0,e)}):f}},pseudos:{not:d(function(a){var b=[],c=[],e=B(a.replace(ha,"$1"));return e[O]?d(function(a,b,c,d){for(var f,g=e(a,null,d,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,d,f){return b[0]=a,e(b,null,f,c),b[0]=null,!c.pop()}}),has:d(function(a){return function(c){return b(a,c).length>0}}),contains:d(function(a){return a=a.replace(ta,ua),function(b){return(b.textContent||b.innerText||y(b)).indexOf(a)>-1}}),lang:d(function(a){return ma.test(a||"")||b.error("unsupported lang: "+a),a=a.replace(ta,ua).toLowerCase(),function(b){var c;do if(c=J?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===I},focus:function(a){return a===H.activeElement&&(!H.hasFocus||H.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:j(!1),disabled:j(!0),checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){
for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!x.pseudos.empty(a)},header:function(a){return pa.test(a.nodeName)},input:function(a){return oa.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:k(function(){return[0]}),last:k(function(a,b){return[b-1]}),eq:k(function(a,b,c){return[c<0?c+b:c]}),even:k(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:k(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:k(function(a,b,c){for(var d=c<0?c+b:c;--d>=0;)a.push(d);return a}),gt:k(function(a,b,c){for(var d=c<0?c+b:c;++d<b;)a.push(d);return a})}},x.pseudos.nth=x.pseudos.eq;for(v in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[v]=h(v);for(v in{submit:!0,reset:!0})x.pseudos[v]=i(v);return m.prototype=x.filters=x.pseudos,x.setFilters=new m,A=b.tokenize=function(a,c){var d,e,f,g,h,i,j,k=T[a+" "];if(k)return c?0:k.slice(0);for(h=a,i=[],j=x.preFilter;h;){d&&!(e=ia.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),d=!1,(e=ja.exec(h))&&(d=e.shift(),f.push({value:d,type:e[0].replace(ha," ")}),h=h.slice(d.length));for(g in x.filter)!(e=na[g].exec(h))||j[g]&&!(e=j[g](e))||(d=e.shift(),f.push({value:d,type:g,matches:e}),h=h.slice(d.length));if(!d)break}return c?h.length:h?b.error(a):T(a,i).slice(0)},B=b.compile=function(a,b){var c,d=[],e=[],f=U[a+" "];if(!f){for(b||(b=A(a)),c=b.length;c--;)f=t(b[c]),f[O]?d.push(f):e.push(f);f=U(a,u(e,d)),f.selector=a}return f},C=b.select=function(a,b,c,d){var e,f,g,h,i,j="function"==typeof a&&a,k=!d&&A(a=j.selector||a);if(c=c||[],1===k.length){if(f=k[0]=k[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&w.getById&&9===b.nodeType&&J&&x.relative[f[1].type]){if(b=(x.find.ID(g.matches[0].replace(ta,ua),b)||[])[0],!b)return c;j&&(b=b.parentNode),a=a.slice(f.shift().value.length)}for(e=na.needsContext.test(a)?0:f.length;e--&&(g=f[e],!x.relative[h=g.type]);)if((i=x.find[h])&&(d=i(g.matches[0].replace(ta,ua),sa.test(f[0].type)&&l(b.parentNode)||b))){if(f.splice(e,1),a=d.length&&n(f),!a)return $.apply(c,d),c;break}}return(j||B(a,k))(d,b,!J,c,!b||sa.test(a)&&l(b.parentNode)||b),c},w.sortStable=O.split("").sort(V).join("")===O,w.detectDuplicates=!!F,G(),w.sortDetached=e(function(a){return 1&a.compareDocumentPosition(H.createElement("fieldset"))}),e(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||f("type|href|height|width",function(a,b,c){if(!c)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),w.attributes&&e(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||f("value",function(a,b,c){if(!c&&"input"===a.nodeName.toLowerCase())return a.defaultValue}),e(function(a){return null==a.getAttribute("disabled")})||f(ba,function(a,b,c){var d;if(!c)return a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),b}(a);ma.find=ra,ma.expr=ra.selectors,ma.expr[":"]=ma.expr.pseudos,ma.uniqueSort=ma.unique=ra.uniqueSort,ma.text=ra.getText,ma.isXMLDoc=ra.isXML,ma.contains=ra.contains,ma.escapeSelector=ra.escape;var sa=function(a,b,c){for(var d=[],e=void 0!==c;(a=a[b])&&9!==a.nodeType;)if(1===a.nodeType){if(e&&ma(a).is(c))break;d.push(a)}return d},ta=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},ua=ma.expr.match.needsContext,va=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,wa=/^.[^:#\[\.,]*$/;ma.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?ma.find.matchesSelector(d,a)?[d]:[]:ma.find.matches(a,ma.grep(b,function(a){return 1===a.nodeType}))},ma.fn.extend({find:function(a){var b,c,d=this.length,e=this;if("string"!=typeof a)return this.pushStack(ma(a).filter(function(){for(b=0;b<d;b++)if(ma.contains(e[b],this))return!0}));for(c=this.pushStack([]),b=0;b<d;b++)ma.find(a,e[b],c);return d>1?ma.uniqueSort(c):c},filter:function(a){return this.pushStack(e(this,a||[],!1))},not:function(a){return this.pushStack(e(this,a||[],!0))},is:function(a){return!!e(this,"string"==typeof a&&ua.test(a)?ma(a):a||[],!1).length}});var xa,ya=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,za=ma.fn.init=function(a,b,c){var d,e;if(!a)return this;if(c=c||xa,"string"==typeof a){if(d="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:ya.exec(a),!d||!d[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(d[1]){if(b=b instanceof ma?b[0]:b,ma.merge(this,ma.parseHTML(d[1],b&&b.nodeType?b.ownerDocument||b:_,!0)),va.test(d[1])&&ma.isPlainObject(b))for(d in b)ma.isFunction(this[d])?this[d](b[d]):this.attr(d,b[d]);return this}return e=_.getElementById(d[2]),e&&(this[0]=e,this.length=1),this}return a.nodeType?(this[0]=a,this.length=1,this):ma.isFunction(a)?void 0!==c.ready?c.ready(a):a(ma):ma.makeArray(a,this)};za.prototype=ma.fn,xa=ma(_);var Aa=/^(?:parents|prev(?:Until|All))/,Ba={children:!0,contents:!0,next:!0,prev:!0};ma.fn.extend({has:function(a){var b=ma(a,this),c=b.length;return this.filter(function(){for(var a=0;a<c;a++)if(ma.contains(this,b[a]))return!0})},closest:function(a,b){var c,d=0,e=this.length,f=[],g="string"!=typeof a&&ma(a);if(!ua.test(a))for(;d<e;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&ma.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?ma.uniqueSort(f):f)},index:function(a){return a?"string"==typeof a?ea.call(ma(a),this[0]):ea.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(ma.uniqueSort(ma.merge(this.get(),ma(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),ma.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return sa(a,"parentNode")},parentsUntil:function(a,b,c){return sa(a,"parentNode",c)},next:function(a){return f(a,"nextSibling")},prev:function(a){return f(a,"previousSibling")},nextAll:function(a){return sa(a,"nextSibling")},prevAll:function(a){return sa(a,"previousSibling")},nextUntil:function(a,b,c){return sa(a,"nextSibling",c)},prevUntil:function(a,b,c){return sa(a,"previousSibling",c)},siblings:function(a){return ta((a.parentNode||{}).firstChild,a)},children:function(a){return ta(a.firstChild)},contents:function(a){return a.contentDocument||ma.merge([],a.childNodes)}},function(a,b){ma.fn[a]=function(c,d){var e=ma.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=ma.filter(d,e)),this.length>1&&(Ba[a]||ma.uniqueSort(e),Aa.test(a)&&e.reverse()),this.pushStack(e)}});var Ca=/\S+/g;ma.Callbacks=function(a){a="string"==typeof a?g(a):ma.extend({},a);var b,c,d,e,f=[],h=[],i=-1,j=function(){for(e=a.once,d=b=!0;h.length;i=-1)for(c=h.shift();++i<f.length;)f[i].apply(c[0],c[1])===!1&&a.stopOnFalse&&(i=f.length,c=!1);a.memory||(c=!1),b=!1,e&&(f=c?[]:"")},k={add:function(){return f&&(c&&!b&&(i=f.length-1,h.push(c)),function d(b){ma.each(b,function(b,c){ma.isFunction(c)?a.unique&&k.has(c)||f.push(c):c&&c.length&&"string"!==ma.type(c)&&d(c)})}(arguments),c&&!b&&j()),this},remove:function(){return ma.each(arguments,function(a,b){for(var c;(c=ma.inArray(b,f,c))>-1;)f.splice(c,1),c<=i&&i--}),this},has:function(a){return a?ma.inArray(a,f)>-1:f.length>0},empty:function(){return f&&(f=[]),this},disable:function(){return e=h=[],f=c="",this},disabled:function(){return!f},lock:function(){return e=h=[],c||b||(f=c=""),this},locked:function(){return!!e},fireWith:function(a,c){return e||(c=c||[],c=[a,c.slice?c.slice():c],h.push(c),b||j()),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!d}};return k},ma.extend({Deferred:function(b){var c=[["notify","progress",ma.Callbacks("memory"),ma.Callbacks("memory"),2],["resolve","done",ma.Callbacks("once memory"),ma.Callbacks("once memory"),0,"resolved"],["reject","fail",ma.Callbacks("once memory"),ma.Callbacks("once memory"),1,"rejected"]],d="pending",e={state:function(){return d},always:function(){return f.done(arguments).fail(arguments),this},"catch":function(a){return e.then(null,a)},pipe:function(){var a=arguments;return ma.Deferred(function(b){ma.each(c,function(c,d){var e=ma.isFunction(a[d[4]])&&a[d[4]];f[d[1]](function(){var a=e&&e.apply(this,arguments);a&&ma.isFunction(a.promise)?a.promise().progress(b.notify).done(b.resolve).fail(b.reject):b[d[0]+"With"](this,e?[a]:arguments)})}),a=null}).promise()},then:function(b,d,e){function f(b,c,d,e){return function(){var j=this,k=arguments,l=function(){var a,l;if(!(b<g)){if(a=d.apply(j,k),a===c.promise())throw new TypeError("Thenable self-resolution");l=a&&("object"==typeof a||"function"==typeof a)&&a.then,ma.isFunction(l)?e?l.call(a,f(g,c,h,e),f(g,c,i,e)):(g++,l.call(a,f(g,c,h,e),f(g,c,i,e),f(g,c,h,c.notifyWith))):(d!==h&&(j=void 0,k=[a]),(e||c.resolveWith)(j,k))}},m=e?l:function(){try{l()}catch(a){ma.Deferred.exceptionHook&&ma.Deferred.exceptionHook(a,m.stackTrace),b+1>=g&&(d!==i&&(j=void 0,k=[a]),c.rejectWith(j,k))}};b?m():(ma.Deferred.getStackHook&&(m.stackTrace=ma.Deferred.getStackHook()),a.setTimeout(m))}}var g=0;return ma.Deferred(function(a){c[0][3].add(f(0,a,ma.isFunction(e)?e:h,a.notifyWith)),c[1][3].add(f(0,a,ma.isFunction(b)?b:h)),c[2][3].add(f(0,a,ma.isFunction(d)?d:i))}).promise()},promise:function(a){return null!=a?ma.extend(a,e):e}},f={};return ma.each(c,function(a,b){var g=b[2],h=b[5];e[b[1]]=g.add,h&&g.add(function(){d=h},c[3-a][2].disable,c[0][2].lock),g.add(b[3].fire),f[b[0]]=function(){return f[b[0]+"With"](this===f?void 0:this,arguments),this},f[b[0]+"With"]=g.fireWith}),e.promise(f),b&&b.call(f,f),f},when:function(a){var b=arguments.length,c=b,d=Array(c),e=ba.call(arguments),f=ma.Deferred(),g=function(a){return function(c){d[a]=this,e[a]=arguments.length>1?ba.call(arguments):c,--b||f.resolveWith(d,e)}};if(b<=1&&(j(a,f.done(g(c)).resolve,f.reject),"pending"===f.state()||ma.isFunction(e[c]&&e[c].then)))return f.then();for(;c--;)j(e[c],g(c),f.reject);return f.promise()}});var Da=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;ma.Deferred.exceptionHook=function(b,c){a.console&&a.console.warn&&b&&Da.test(b.name)&&a.console.warn("jQuery.Deferred exception: "+b.message,b.stack,c)};var Ea=ma.Deferred();ma.fn.ready=function(a){return Ea.then(a),this},ma.extend({isReady:!1,readyWait:1,holdReady:function(a){a?ma.readyWait++:ma.ready(!0)},ready:function(a){(a===!0?--ma.readyWait:ma.isReady)||(ma.isReady=!0,a!==!0&&--ma.readyWait>0||Ea.resolveWith(_,[ma]))}}),ma.ready.then=Ea.then,"complete"===_.readyState||"loading"!==_.readyState&&!_.documentElement.doScroll?a.setTimeout(ma.ready):(_.addEventListener("DOMContentLoaded",k),a.addEventListener("load",k));var Fa=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===ma.type(c)){e=!0;for(h in c)Fa(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,ma.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(ma(a),c)})),b))for(;h<i;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},Ga=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};l.uid=1,l.prototype={cache:function(a){var b=a[this.expando];return b||(b={},Ga(a)&&(a.nodeType?a[this.expando]=b:Object.defineProperty(a,this.expando,{value:b,configurable:!0}))),b},set:function(a,b,c){var d,e=this.cache(a);if("string"==typeof b)e[ma.camelCase(b)]=c;else for(d in b)e[ma.camelCase(d)]=b[d];return e},get:function(a,b){return void 0===b?this.cache(a):a[this.expando]&&a[this.expando][ma.camelCase(b)]},access:function(a,b,c){return void 0===b||b&&"string"==typeof b&&void 0===c?this.get(a,b):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d=a[this.expando];if(void 0!==d){if(void 0!==b){ma.isArray(b)?b=b.map(ma.camelCase):(b=ma.camelCase(b),b=b in d?[b]:b.match(Ca)||[]),c=b.length;for(;c--;)delete d[b[c]]}(void 0===b||ma.isEmptyObject(d))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){var b=a[this.expando];return void 0!==b&&!ma.isEmptyObject(b)}};var Ha=new l,Ia=new l,Ja=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ka=/[A-Z]/g;ma.extend({hasData:function(a){return Ia.hasData(a)||Ha.hasData(a)},data:function(a,b,c){return Ia.access(a,b,c)},removeData:function(a,b){Ia.remove(a,b)},_data:function(a,b,c){return Ha.access(a,b,c)},_removeData:function(a,b){Ha.remove(a,b)}}),ma.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=Ia.get(f),1===f.nodeType&&!Ha.get(f,"hasDataAttrs"))){for(c=g.length;c--;)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=ma.camelCase(d.slice(5)),m(f,d,e[d])));Ha.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){Ia.set(this,a)}):Fa(this,function(b){var c;if(f&&void 0===b){if(c=Ia.get(f,a),void 0!==c)return c;if(c=m(f,a),void 0!==c)return c}else this.each(function(){Ia.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){Ia.remove(this,a)})}}),ma.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=Ha.get(a,b),c&&(!d||ma.isArray(c)?d=Ha.access(a,b,ma.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=ma.queue(a,b),d=c.length,e=c.shift(),f=ma._queueHooks(a,b),g=function(){ma.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return Ha.get(a,c)||Ha.access(a,c,{empty:ma.Callbacks("once memory").add(function(){Ha.remove(a,[b+"queue",c])})})}}),ma.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?ma.queue(this[0],a):void 0===b?this:this.each(function(){var c=ma.queue(this,a,b);ma._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&ma.dequeue(this,a)})},dequeue:function(a){return this.each(function(){ma.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=ma.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};for("string"!=typeof a&&(b=a,a=void 0),a=a||"fx";g--;)c=Ha.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var La=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ma=new RegExp("^(?:([+-])=|)("+La+")([a-z%]*)$","i"),Na=["Top","Right","Bottom","Left"],Oa=function(a,b){return a=b||a,"none"===a.style.display||""===a.style.display&&ma.contains(a.ownerDocument,a)&&"none"===ma.css(a,"display")},Pa=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e},Qa={};ma.fn.extend({show:function(){return p(this,!0)},hide:function(){return p(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){Oa(this)?ma(this).show():ma(this).hide()})}});var Ra=/^(?:checkbox|radio)$/i,Sa=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Ta=/^$|\/(?:java|ecma)script/i,Ua={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ua.optgroup=Ua.option,Ua.tbody=Ua.tfoot=Ua.colgroup=Ua.caption=Ua.thead,Ua.th=Ua.td;var Va=/<|&#?\w+;/;!function(){var a=_.createDocumentFragment(),b=a.appendChild(_.createElement("div")),c=_.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),ka.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",ka.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var Wa=_.documentElement,Xa=/^key/,Ya=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Za=/^([^.]*)(?:\.(.+)|)/;ma.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=Ha.get(a);if(q)for(c.handler&&(f=c,c=f.handler,e=f.selector),e&&ma.find.matchesSelector(Wa,e),c.guid||(c.guid=ma.guid++),(i=q.events)||(i=q.events={}),(g=q.handle)||(g=q.handle=function(b){return"undefined"!=typeof ma&&ma.event.triggered!==b.type?ma.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(Ca)||[""],j=b.length;j--;)h=Za.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n&&(l=ma.event.special[n]||{},n=(e?l.delegateType:l.bindType)||n,l=ma.event.special[n]||{},k=ma.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&ma.expr.match.needsContext.test(e),namespace:o.join(".")},f),(m=i[n])||(m=i[n]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,o,g)!==!1||a.addEventListener&&a.addEventListener(n,g)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),ma.event.global[n]=!0)},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=Ha.hasData(a)&&Ha.get(a);if(q&&(i=q.events)){for(b=(b||"").match(Ca)||[""],j=b.length;j--;)if(h=Za.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=ma.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;f--;)k=m[f],!e&&p!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||ma.removeEvent(a,n,q.handle),delete i[n])}else for(n in i)ma.event.remove(a,n+b[j],c,d,!0);ma.isEmptyObject(i)&&Ha.remove(a,"handle events")}},dispatch:function(a){var b,c,d,e,f,g,h=ma.event.fix(a),i=new Array(arguments.length),j=(Ha.get(this,"events")||{})[h.type]||[],k=ma.event.special[h.type]||{};for(i[0]=h,b=1;b<arguments.length;b++)i[b]=arguments[b];if(h.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,h)!==!1){for(g=ma.event.handlers.call(this,h,j),b=0;(e=g[b++])&&!h.isPropagationStopped();)for(h.currentTarget=e.elem,c=0;(f=e.handlers[c++])&&!h.isImmediatePropagationStopped();)h.rnamespace&&!h.rnamespace.test(f.namespace)||(h.handleObj=f,h.data=f.data,d=((ma.event.special[f.origType]||{}).handle||f.handler).apply(e.elem,i),void 0!==d&&(h.result=d)===!1&&(h.preventDefault(),h.stopPropagation()));return k.postDispatch&&k.postDispatch.call(this,h),h.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&("click"!==a.type||isNaN(a.button)||a.button<1))for(;i!==this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(d=[],c=0;c<h;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?ma(e,this).index(i)>-1:ma.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},addProp:function(a,b){Object.defineProperty(ma.Event.prototype,a,{enumerable:!0,configurable:!0,get:ma.isFunction(b)?function(){if(this.originalEvent)return b(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[a]},set:function(b){Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:b})}})},fix:function(a){return a[ma.expando]?a:new ma.Event(a)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==v()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===v()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&ma.nodeName(this,"input"))return this.click(),!1},_default:function(a){return ma.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}},ma.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)},ma.Event=function(a,b){return this instanceof ma.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?t:u,this.target=a.target&&3===a.target.nodeType?a.target.parentNode:a.target,this.currentTarget=a.currentTarget,this.relatedTarget=a.relatedTarget):this.type=a,b&&ma.extend(this,b),this.timeStamp=a&&a.timeStamp||ma.now(),void(this[ma.expando]=!0)):new ma.Event(a,b)},ma.Event.prototype={constructor:ma.Event,isDefaultPrevented:u,isPropagationStopped:u,isImmediatePropagationStopped:u,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=t,a&&!this.isSimulated&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=t,a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=t,a&&!this.isSimulated&&a.stopImmediatePropagation(),this.stopPropagation()}},ma.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(a){var b=a.button;return null==a.which&&Xa.test(a.type)?null!=a.charCode?a.charCode:a.keyCode:!a.which&&void 0!==b&&Ya.test(a.type)?1&b?1:2&b?3:4&b?2:0:a.which}},ma.event.addProp),ma.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){ma.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return e&&(e===d||ma.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),ma.fn.extend({on:function(a,b,c,d){return w(this,a,b,c,d)},one:function(a,b,c,d){return w(this,a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,ma(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return b!==!1&&"function"!=typeof b||(c=b,b=void 0),c===!1&&(c=u),this.each(function(){ma.event.remove(this,a,c,b)})}});var $a=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,_a=/<script|<style|<link/i,ab=/checked\s*(?:[^=]|=\s*.checked.)/i,bb=/^true\/(.*)/,cb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;ma.extend({htmlPrefilter:function(a){return a.replace($a,"<$1></$2>")},clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=ma.contains(a.ownerDocument,a);if(!(ka.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||ma.isXMLDoc(a)))for(g=q(h),f=q(a),d=0,e=f.length;d<e;d++)B(f[d],g[d]);if(b)if(c)for(f=f||q(a),g=g||q(h),d=0,e=f.length;d<e;d++)A(f[d],g[d]);else A(a,h);return g=q(h,"script"),g.length>0&&r(g,!i&&q(a,"script")),h},cleanData:function(a){for(var b,c,d,e=ma.event.special,f=0;void 0!==(c=a[f]);f++)if(Ga(c)){if(b=c[Ha.expando]){if(b.events)for(d in b.events)e[d]?ma.event.remove(c,d):ma.removeEvent(c,d,b.handle);c[Ha.expando]=void 0}c[Ia.expando]&&(c[Ia.expando]=void 0)}}}),ma.fn.extend({detach:function(a){return D(this,a,!0)},remove:function(a){return D(this,a)},text:function(a){return Fa(this,function(a){return void 0===a?ma.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=a)})},null,a,arguments.length)},append:function(){return C(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=x(this,a);b.appendChild(a)}})},prepend:function(){return C(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=x(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return C(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return C(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(ma.cleanData(q(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null!=a&&a,b=null==b?a:b,this.map(function(){return ma.clone(this,a,b)})},html:function(a){return Fa(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!_a.test(a)&&!Ua[(Sa.exec(a)||["",""])[1].toLowerCase()]){a=ma.htmlPrefilter(a);try{for(;c<d;c++)b=this[c]||{},1===b.nodeType&&(ma.cleanData(q(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return C(this,arguments,function(b){var c=this.parentNode;ma.inArray(this,a)<0&&(ma.cleanData(q(this)),c&&c.replaceChild(b,this))},a)}}),ma.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){ma.fn[a]=function(a){for(var c,d=[],e=ma(a),f=e.length-1,g=0;g<=f;g++)c=g===f?this:this.clone(!0),ma(e[g])[b](c),da.apply(d,c.get());return this.pushStack(d)}});var db=/^margin/,eb=new RegExp("^("+La+")(?!px)[a-z%]+$","i"),fb=function(b){var c=b.ownerDocument.defaultView;return c&&c.opener||(c=a),c.getComputedStyle(b)};!function(){function b(){if(h){h.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",h.innerHTML="",Wa.appendChild(g);var b=a.getComputedStyle(h);c="1%"!==b.top,f="2px"===b.marginLeft,d="4px"===b.width,h.style.marginRight="50%",e="4px"===b.marginRight,Wa.removeChild(g),h=null}}var c,d,e,f,g=_.createElement("div"),h=_.createElement("div");h.style&&(h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",ka.clearCloneStyle="content-box"===h.style.backgroundClip,g.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",g.appendChild(h),ma.extend(ka,{pixelPosition:function(){return b(),c},boxSizingReliable:function(){return b(),d},pixelMarginRight:function(){return b(),e},reliableMarginLeft:function(){return b(),f}}))}();var gb=/^(none|table(?!-c[ea]).+)/,hb={position:"absolute",visibility:"hidden",display:"block"},ib={letterSpacing:"0",fontWeight:"400"},jb=["Webkit","Moz","ms"],kb=_.createElement("div").style;ma.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=E(a,"opacity");return""===c?"1":c}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=ma.camelCase(b),i=a.style;return b=ma.cssProps[h]||(ma.cssProps[h]=G(h)||h),g=ma.cssHooks[b]||ma.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=Ma.exec(c))&&e[1]&&(c=n(a,b,e),f="number"),null!=c&&c===c&&("number"===f&&(c+=e&&e[3]||(ma.cssNumber[h]?"":"px")),ka.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=ma.camelCase(b);return b=ma.cssProps[h]||(ma.cssProps[h]=G(h)||h),g=ma.cssHooks[b]||ma.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=E(a,b,d)),"normal"===e&&b in ib&&(e=ib[b]),""===c||c?(f=parseFloat(e),c===!0||isFinite(f)?f||0:e):e}}),ma.each(["height","width"],function(a,b){ma.cssHooks[b]={get:function(a,c,d){if(c)return!gb.test(ma.css(a,"display"))||a.getClientRects().length&&a.getBoundingClientRect().width?J(a,b,d):Pa(a,hb,function(){return J(a,b,d)})},set:function(a,c,d){var e,f=d&&fb(a),g=d&&I(a,b,d,"border-box"===ma.css(a,"boxSizing",!1,f),f);return g&&(e=Ma.exec(c))&&"px"!==(e[3]||"px")&&(a.style[b]=c,c=ma.css(a,b)),H(a,c,g)}}}),ma.cssHooks.marginLeft=F(ka.reliableMarginLeft,function(a,b){if(b)return(parseFloat(E(a,"marginLeft"))||a.getBoundingClientRect().left-Pa(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px"}),ma.each({margin:"",padding:"",border:"Width"},function(a,b){ma.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];d<4;d++)e[a+Na[d]+b]=f[d]||f[d-2]||f[0];return e}},db.test(a)||(ma.cssHooks[a+b].set=H)}),ma.fn.extend({css:function(a,b){return Fa(this,function(a,b,c){var d,e,f={},g=0;if(ma.isArray(b)){for(d=fb(a),e=b.length;g<e;g++)f[b[g]]=ma.css(a,b[g],!1,d);return f}return void 0!==c?ma.style(a,b,c):ma.css(a,b)},a,b,arguments.length>1)}}),ma.Tween=K,K.prototype={constructor:K,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||ma.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(ma.cssNumber[c]?"":"px")},cur:function(){var a=K.propHooks[this.prop];return a&&a.get?a.get(this):K.propHooks._default.get(this)},run:function(a){var b,c=K.propHooks[this.prop];return this.options.duration?this.pos=b=ma.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):K.propHooks._default.set(this),this}},K.prototype.init.prototype=K.prototype,K.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=ma.css(a.elem,a.prop,""),b&&"auto"!==b?b:0)},set:function(a){ma.fx.step[a.prop]?ma.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[ma.cssProps[a.prop]]&&!ma.cssHooks[a.prop]?a.elem[a.prop]=a.now:ma.style(a.elem,a.prop,a.now+a.unit)}}},K.propHooks.scrollTop=K.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},ma.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"},ma.fx=K.prototype.init,ma.fx.step={};var lb,mb,nb=/^(?:toggle|show|hide)$/,ob=/queueHooks$/;ma.Animation=ma.extend(R,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);return n(c.elem,a,Ma.exec(b),c),c}]},tweener:function(a,b){ma.isFunction(a)?(b=a,a=["*"]):a=a.match(Ca);for(var c,d=0,e=a.length;d<e;d++)c=a[d],R.tweeners[c]=R.tweeners[c]||[],R.tweeners[c].unshift(b)},prefilters:[P],prefilter:function(a,b){b?R.prefilters.unshift(a):R.prefilters.push(a)}}),ma.speed=function(a,b,c){var d=a&&"object"==typeof a?ma.extend({},a):{complete:c||!c&&b||ma.isFunction(a)&&a,duration:a,easing:c&&b||b&&!ma.isFunction(b)&&b};return ma.fx.off||_.hidden?d.duration=0:d.duration="number"==typeof d.duration?d.duration:d.duration in ma.fx.speeds?ma.fx.speeds[d.duration]:ma.fx.speeds._default,null!=d.queue&&d.queue!==!0||(d.queue="fx"),d.old=d.complete,d.complete=function(){ma.isFunction(d.old)&&d.old.call(this),d.queue&&ma.dequeue(this,d.queue)},d},ma.fn.extend({fadeTo:function(a,b,c,d){return this.filter(Oa).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=ma.isEmptyObject(a),f=ma.speed(b,c,d),g=function(){var b=R(this,ma.extend({},a),f);(e||Ha.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=ma.timers,g=Ha.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&ob.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));!b&&c||ma.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=Ha.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=ma.timers,g=d?d.length:0;for(c.finish=!0,ma.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;b<g;b++)d[b]&&d[b].finish&&d[b].finish.call(this);
delete c.finish})}}),ma.each(["toggle","show","hide"],function(a,b){var c=ma.fn[b];ma.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(N(b,!0),a,d,e)}}),ma.each({slideDown:N("show"),slideUp:N("hide"),slideToggle:N("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){ma.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),ma.timers=[],ma.fx.tick=function(){var a,b=0,c=ma.timers;for(lb=ma.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||ma.fx.stop(),lb=void 0},ma.fx.timer=function(a){ma.timers.push(a),a()?ma.fx.start():ma.timers.pop()},ma.fx.interval=13,ma.fx.start=function(){mb||(mb=a.requestAnimationFrame?a.requestAnimationFrame(L):a.setInterval(ma.fx.tick,ma.fx.interval))},ma.fx.stop=function(){a.cancelAnimationFrame?a.cancelAnimationFrame(mb):a.clearInterval(mb),mb=null},ma.fx.speeds={slow:600,fast:200,_default:400},ma.fn.delay=function(b,c){return b=ma.fx?ma.fx.speeds[b]||b:b,c=c||"fx",this.queue(c,function(c,d){var e=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(e)}})},function(){var a=_.createElement("input"),b=_.createElement("select"),c=b.appendChild(_.createElement("option"));a.type="checkbox",ka.checkOn=""!==a.value,ka.optSelected=c.selected,a=_.createElement("input"),a.value="t",a.type="radio",ka.radioValue="t"===a.value}();var pb,qb=ma.expr.attrHandle;ma.fn.extend({attr:function(a,b){return Fa(this,ma.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){ma.removeAttr(this,a)})}}),ma.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return"undefined"==typeof a.getAttribute?ma.prop(a,b,c):(1===f&&ma.isXMLDoc(a)||(e=ma.attrHooks[b.toLowerCase()]||(ma.expr.match.bool.test(b)?pb:void 0)),void 0!==c?null===c?void ma.removeAttr(a,b):e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:(a.setAttribute(b,c+""),c):e&&"get"in e&&null!==(d=e.get(a,b))?d:(d=ma.find.attr(a,b),null==d?void 0:d))},attrHooks:{type:{set:function(a,b){if(!ka.radioValue&&"radio"===b&&ma.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},removeAttr:function(a,b){var c,d=0,e=b&&b.match(Ca);if(e&&1===a.nodeType)for(;c=e[d++];)a.removeAttribute(c)}}),pb={set:function(a,b,c){return b===!1?ma.removeAttr(a,c):a.setAttribute(c,c),c}},ma.each(ma.expr.match.bool.source.match(/\w+/g),function(a,b){var c=qb[b]||ma.find.attr;qb[b]=function(a,b,d){var e,f,g=b.toLowerCase();return d||(f=qb[g],qb[g]=e,e=null!=c(a,b,d)?g:null,qb[g]=f),e}});var rb=/^(?:input|select|textarea|button)$/i,sb=/^(?:a|area)$/i;ma.fn.extend({prop:function(a,b){return Fa(this,ma.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[ma.propFix[a]||a]})}}),ma.extend({prop:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return 1===f&&ma.isXMLDoc(a)||(b=ma.propFix[b]||b,e=ma.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=ma.find.attr(a,"tabindex");return b?parseInt(b,10):rb.test(a.nodeName)||sb.test(a.nodeName)&&a.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),ka.optSelected||(ma.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}}),ma.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ma.propFix[this.toLowerCase()]=this});var tb=/[\t\r\n\f]/g;ma.fn.extend({addClass:function(a){var b,c,d,e,f,g,h,i=0;if(ma.isFunction(a))return this.each(function(b){ma(this).addClass(a.call(this,b,S(this)))});if("string"==typeof a&&a)for(b=a.match(Ca)||[];c=this[i++];)if(e=S(c),d=1===c.nodeType&&(" "+e+" ").replace(tb," ")){for(g=0;f=b[g++];)d.indexOf(" "+f+" ")<0&&(d+=f+" ");h=ma.trim(d),e!==h&&c.setAttribute("class",h)}return this},removeClass:function(a){var b,c,d,e,f,g,h,i=0;if(ma.isFunction(a))return this.each(function(b){ma(this).removeClass(a.call(this,b,S(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof a&&a)for(b=a.match(Ca)||[];c=this[i++];)if(e=S(c),d=1===c.nodeType&&(" "+e+" ").replace(tb," ")){for(g=0;f=b[g++];)for(;d.indexOf(" "+f+" ")>-1;)d=d.replace(" "+f+" "," ");h=ma.trim(d),e!==h&&c.setAttribute("class",h)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):ma.isFunction(a)?this.each(function(c){ma(this).toggleClass(a.call(this,c,S(this),b),b)}):this.each(function(){var b,d,e,f;if("string"===c)for(d=0,e=ma(this),f=a.match(Ca)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else void 0!==a&&"boolean"!==c||(b=S(this),b&&Ha.set(this,"__className__",b),this.setAttribute&&this.setAttribute("class",b||a===!1?"":Ha.get(this,"__className__")||""))})},hasClass:function(a){var b,c,d=0;for(b=" "+a+" ";c=this[d++];)if(1===c.nodeType&&(" "+S(c)+" ").replace(tb," ").indexOf(b)>-1)return!0;return!1}});var ub=/\r/g,vb=/[\x20\t\r\n\f]+/g;ma.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=ma.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,ma(this).val()):a,null==e?e="":"number"==typeof e?e+="":ma.isArray(e)&&(e=ma.map(e,function(a){return null==a?"":a+""})),b=ma.valHooks[this.type]||ma.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=ma.valHooks[e.type]||ma.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(ub,""):null==c?"":c)}}}),ma.extend({valHooks:{option:{get:function(a){var b=ma.find.attr(a,"value");return null!=b?b:ma.trim(ma.text(a)).replace(vb," ")}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type,g=f?null:[],h=f?e+1:d.length,i=e<0?h:f?e:0;i<h;i++)if(c=d[i],(c.selected||i===e)&&!c.disabled&&(!c.parentNode.disabled||!ma.nodeName(c.parentNode,"optgroup"))){if(b=ma(c).val(),f)return b;g.push(b)}return g},set:function(a,b){for(var c,d,e=a.options,f=ma.makeArray(b),g=e.length;g--;)d=e[g],(d.selected=ma.inArray(ma.valHooks.option.get(d),f)>-1)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),ma.each(["radio","checkbox"],function(){ma.valHooks[this]={set:function(a,b){if(ma.isArray(b))return a.checked=ma.inArray(ma(a).val(),b)>-1}},ka.checkOn||(ma.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var wb=/^(?:focusinfocus|focusoutblur)$/;ma.extend(ma.event,{trigger:function(b,c,d,e){var f,g,h,i,j,k,l,m=[d||_],n=ha.call(b,"type")?b.type:b,o=ha.call(b,"namespace")?b.namespace.split("."):[];if(g=h=d=d||_,3!==d.nodeType&&8!==d.nodeType&&!wb.test(n+ma.event.triggered)&&(n.indexOf(".")>-1&&(o=n.split("."),n=o.shift(),o.sort()),j=n.indexOf(":")<0&&"on"+n,b=b[ma.expando]?b:new ma.Event(n,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=o.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:ma.makeArray(c,[b]),l=ma.event.special[n]||{},e||!l.trigger||l.trigger.apply(d,c)!==!1)){if(!e&&!l.noBubble&&!ma.isWindow(d)){for(i=l.delegateType||n,wb.test(i+n)||(g=g.parentNode);g;g=g.parentNode)m.push(g),h=g;h===(d.ownerDocument||_)&&m.push(h.defaultView||h.parentWindow||a)}for(f=0;(g=m[f++])&&!b.isPropagationStopped();)b.type=f>1?i:l.bindType||n,k=(Ha.get(g,"events")||{})[b.type]&&Ha.get(g,"handle"),k&&k.apply(g,c),k=j&&g[j],k&&k.apply&&Ga(g)&&(b.result=k.apply(g,c),b.result===!1&&b.preventDefault());return b.type=n,e||b.isDefaultPrevented()||l._default&&l._default.apply(m.pop(),c)!==!1||!Ga(d)||j&&ma.isFunction(d[n])&&!ma.isWindow(d)&&(h=d[j],h&&(d[j]=null),ma.event.triggered=n,d[n](),ma.event.triggered=void 0,h&&(d[j]=h)),b.result}},simulate:function(a,b,c){var d=ma.extend(new ma.Event,c,{type:a,isSimulated:!0});ma.event.trigger(d,null,b)}}),ma.fn.extend({trigger:function(a,b){return this.each(function(){ma.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c)return ma.event.trigger(a,b,c,!0)}}),ma.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(a,b){ma.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),ma.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),ka.focusin="onfocusin"in a,ka.focusin||ma.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){ma.event.simulate(b,a.target,ma.event.fix(a))};ma.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=Ha.access(d,b);e||d.addEventListener(a,c,!0),Ha.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=Ha.access(d,b)-1;e?Ha.access(d,b,e):(d.removeEventListener(a,c,!0),Ha.remove(d,b))}}});var xb=a.location,yb=ma.now(),zb=/\?/;ma.parseXML=function(b){var c;if(!b||"string"!=typeof b)return null;try{c=(new a.DOMParser).parseFromString(b,"text/xml")}catch(d){c=void 0}return c&&!c.getElementsByTagName("parsererror").length||ma.error("Invalid XML: "+b),c};var Ab=/\[\]$/,Bb=/\r?\n/g,Cb=/^(?:submit|button|image|reset|file)$/i,Db=/^(?:input|select|textarea|keygen)/i;ma.param=function(a,b){var c,d=[],e=function(a,b){var c=ma.isFunction(b)?b():b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(null==c?"":c)};if(ma.isArray(a)||a.jquery&&!ma.isPlainObject(a))ma.each(a,function(){e(this.name,this.value)});else for(c in a)T(c,a[c],b,e);return d.join("&")},ma.fn.extend({serialize:function(){return ma.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=ma.prop(this,"elements");return a?ma.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!ma(this).is(":disabled")&&Db.test(this.nodeName)&&!Cb.test(a)&&(this.checked||!Ra.test(a))}).map(function(a,b){var c=ma(this).val();return null==c?null:ma.isArray(c)?ma.map(c,function(a){return{name:b.name,value:a.replace(Bb,"\r\n")}}):{name:b.name,value:c.replace(Bb,"\r\n")}}).get()}});var Eb=/%20/g,Fb=/#.*$/,Gb=/([?&])_=[^&]*/,Hb=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ib=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Jb=/^(?:GET|HEAD)$/,Kb=/^\/\//,Lb={},Mb={},Nb="*/".concat("*"),Ob=_.createElement("a");Ob.href=xb.href,ma.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:xb.href,type:"GET",isLocal:Ib.test(xb.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Nb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":ma.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?W(W(a,ma.ajaxSettings),b):W(ma.ajaxSettings,a)},ajaxPrefilter:U(Lb),ajaxTransport:U(Mb),ajax:function(b,c){function d(b,c,d,h){var j,m,n,u,v,w=c;k||(k=!0,i&&a.clearTimeout(i),e=void 0,g=h||"",x.readyState=b>0?4:0,j=b>=200&&b<300||304===b,d&&(u=X(o,x,d)),u=Y(o,u,x,j),j?(o.ifModified&&(v=x.getResponseHeader("Last-Modified"),v&&(ma.lastModified[f]=v),v=x.getResponseHeader("etag"),v&&(ma.etag[f]=v)),204===b||"HEAD"===o.type?w="nocontent":304===b?w="notmodified":(w=u.state,m=u.data,n=u.error,j=!n)):(n=w,!b&&w||(w="error",b<0&&(b=0))),x.status=b,x.statusText=(c||w)+"",j?r.resolveWith(p,[m,w,x]):r.rejectWith(p,[x,w,n]),x.statusCode(t),t=void 0,l&&q.trigger(j?"ajaxSuccess":"ajaxError",[x,o,j?m:n]),s.fireWith(p,[x,w]),l&&(q.trigger("ajaxComplete",[x,o]),--ma.active||ma.event.trigger("ajaxStop")))}"object"==typeof b&&(c=b,b=void 0),c=c||{};var e,f,g,h,i,j,k,l,m,n,o=ma.ajaxSetup({},c),p=o.context||o,q=o.context&&(p.nodeType||p.jquery)?ma(p):ma.event,r=ma.Deferred(),s=ma.Callbacks("once memory"),t=o.statusCode||{},u={},v={},w="canceled",x={readyState:0,getResponseHeader:function(a){var b;if(k){if(!h)for(h={};b=Hb.exec(g);)h[b[1].toLowerCase()]=b[2];b=h[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return k?g:null},setRequestHeader:function(a,b){return null==k&&(a=v[a.toLowerCase()]=v[a.toLowerCase()]||a,u[a]=b),this},overrideMimeType:function(a){return null==k&&(o.mimeType=a),this},statusCode:function(a){var b;if(a)if(k)x.always(a[x.status]);else for(b in a)t[b]=[t[b],a[b]];return this},abort:function(a){var b=a||w;return e&&e.abort(b),d(0,b),this}};if(r.promise(x),o.url=((b||o.url||xb.href)+"").replace(Kb,xb.protocol+"//"),o.type=c.method||c.type||o.method||o.type,o.dataTypes=(o.dataType||"*").toLowerCase().match(Ca)||[""],null==o.crossDomain){j=_.createElement("a");try{j.href=o.url,j.href=j.href,o.crossDomain=Ob.protocol+"//"+Ob.host!=j.protocol+"//"+j.host}catch(y){o.crossDomain=!0}}if(o.data&&o.processData&&"string"!=typeof o.data&&(o.data=ma.param(o.data,o.traditional)),V(Lb,o,c,x),k)return x;l=ma.event&&o.global,l&&0===ma.active++&&ma.event.trigger("ajaxStart"),o.type=o.type.toUpperCase(),o.hasContent=!Jb.test(o.type),f=o.url.replace(Fb,""),o.hasContent?o.data&&o.processData&&0===(o.contentType||"").indexOf("application/x-www-form-urlencoded")&&(o.data=o.data.replace(Eb,"+")):(n=o.url.slice(f.length),o.data&&(f+=(zb.test(f)?"&":"?")+o.data,delete o.data),o.cache===!1&&(f=f.replace(Gb,""),n=(zb.test(f)?"&":"?")+"_="+yb++ +n),o.url=f+n),o.ifModified&&(ma.lastModified[f]&&x.setRequestHeader("If-Modified-Since",ma.lastModified[f]),ma.etag[f]&&x.setRequestHeader("If-None-Match",ma.etag[f])),(o.data&&o.hasContent&&o.contentType!==!1||c.contentType)&&x.setRequestHeader("Content-Type",o.contentType),x.setRequestHeader("Accept",o.dataTypes[0]&&o.accepts[o.dataTypes[0]]?o.accepts[o.dataTypes[0]]+("*"!==o.dataTypes[0]?", "+Nb+"; q=0.01":""):o.accepts["*"]);for(m in o.headers)x.setRequestHeader(m,o.headers[m]);if(o.beforeSend&&(o.beforeSend.call(p,x,o)===!1||k))return x.abort();if(w="abort",s.add(o.complete),x.done(o.success),x.fail(o.error),e=V(Mb,o,c,x)){if(x.readyState=1,l&&q.trigger("ajaxSend",[x,o]),k)return x;o.async&&o.timeout>0&&(i=a.setTimeout(function(){x.abort("timeout")},o.timeout));try{k=!1,e.send(u,d)}catch(y){if(k)throw y;d(-1,y)}}else d(-1,"No Transport");return x},getJSON:function(a,b,c){return ma.get(a,b,c,"json")},getScript:function(a,b){return ma.get(a,void 0,b,"script")}}),ma.each(["get","post"],function(a,b){ma[b]=function(a,c,d,e){return ma.isFunction(c)&&(e=e||d,d=c,c=void 0),ma.ajax(ma.extend({url:a,type:b,dataType:e,data:c,success:d},ma.isPlainObject(a)&&a))}}),ma._evalUrl=function(a){return ma.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},ma.fn.extend({wrapAll:function(a){var b;return this[0]&&(ma.isFunction(a)&&(a=a.call(this[0])),b=ma(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this)),this},wrapInner:function(a){return ma.isFunction(a)?this.each(function(b){ma(this).wrapInner(a.call(this,b))}):this.each(function(){var b=ma(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=ma.isFunction(a);return this.each(function(c){ma(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(a){return this.parent(a).not("body").each(function(){ma(this).replaceWith(this.childNodes)}),this}}),ma.expr.pseudos.hidden=function(a){return!ma.expr.pseudos.visible(a)},ma.expr.pseudos.visible=function(a){return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)},ma.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(b){}};var Pb={0:200,1223:204},Qb=ma.ajaxSettings.xhr();ka.cors=!!Qb&&"withCredentials"in Qb,ka.ajax=Qb=!!Qb,ma.ajaxTransport(function(b){var c,d;if(ka.cors||Qb&&!b.crossDomain)return{send:function(e,f){var g,h=b.xhr();if(h.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(g in b.xhrFields)h[g]=b.xhrFields[g];b.mimeType&&h.overrideMimeType&&h.overrideMimeType(b.mimeType),b.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");for(g in e)h.setRequestHeader(g,e[g]);c=function(a){return function(){c&&(c=d=h.onload=h.onerror=h.onabort=h.onreadystatechange=null,"abort"===a?h.abort():"error"===a?"number"!=typeof h.status?f(0,"error"):f(h.status,h.statusText):f(Pb[h.status]||h.status,h.statusText,"text"!==(h.responseType||"text")||"string"!=typeof h.responseText?{binary:h.response}:{text:h.responseText},h.getAllResponseHeaders()))}},h.onload=c(),d=h.onerror=c("error"),void 0!==h.onabort?h.onabort=d:h.onreadystatechange=function(){4===h.readyState&&a.setTimeout(function(){c&&d()})},c=c("abort");try{h.send(b.hasContent&&b.data||null)}catch(i){if(c)throw i}},abort:function(){c&&c()}}}),ma.ajaxPrefilter(function(a){a.crossDomain&&(a.contents.script=!1)}),ma.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return ma.globalEval(a),a}}}),ma.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),ma.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=ma("<script>").prop({charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),_.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Rb=[],Sb=/(=)\?(?=&|$)|\?\?/;ma.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Rb.pop()||ma.expando+"_"+yb++;return this[a]=!0,a}}),ma.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Sb.test(b.url)?"url":"string"==typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Sb.test(b.data)&&"data");if(h||"jsonp"===b.dataTypes[0])return e=b.jsonpCallback=ma.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Sb,"$1"+e):b.jsonp!==!1&&(b.url+=(zb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||ma.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){void 0===f?ma(a).removeProp(e):a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Rb.push(e)),g&&ma.isFunction(f)&&f(g[0]),g=f=void 0}),"script"}),ka.createHTMLDocument=function(){var a=_.implementation.createHTMLDocument("").body;return a.innerHTML="<form></form><form></form>",2===a.childNodes.length}(),ma.parseHTML=function(a,b,c){if("string"!=typeof a)return[];"boolean"==typeof b&&(c=b,b=!1);var d,e,f;return b||(ka.createHTMLDocument?(b=_.implementation.createHTMLDocument(""),d=b.createElement("base"),d.href=_.location.href,b.head.appendChild(d)):b=_),e=va.exec(a),f=!c&&[],e?[b.createElement(e[1])]:(e=s([a],b,f),f&&f.length&&ma(f).remove(),ma.merge([],e.childNodes))},ma.fn.load=function(a,b,c){var d,e,f,g=this,h=a.indexOf(" ");return h>-1&&(d=ma.trim(a.slice(h)),a=a.slice(0,h)),ma.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&ma.ajax({url:a,type:e||"GET",dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?ma("<div>").append(ma.parseHTML(a)).find(d):a)}).always(c&&function(a,b){g.each(function(){c.apply(this,f||[a.responseText,b,a])})}),this},ma.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){ma.fn[b]=function(a){return this.on(b,a)}}),ma.expr.pseudos.animated=function(a){return ma.grep(ma.timers,function(b){return a===b.elem}).length},ma.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=ma.css(a,"position"),l=ma(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=ma.css(a,"top"),i=ma.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),ma.isFunction(b)&&(b=b.call(a,c,ma.extend({},h))),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},ma.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){ma.offset.setOffset(this,a,b)});var b,c,d,e,f=this[0];if(f)return f.getClientRects().length?(d=f.getBoundingClientRect(),d.width||d.height?(e=f.ownerDocument,c=Z(e),b=e.documentElement,{top:d.top+c.pageYOffset-b.clientTop,left:d.left+c.pageXOffset-b.clientLeft}):d):{top:0,left:0}},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===ma.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),ma.nodeName(a[0],"html")||(d=a.offset()),d={top:d.top+ma.css(a[0],"borderTopWidth",!0),left:d.left+ma.css(a[0],"borderLeftWidth",!0)}),{top:b.top-d.top-ma.css(c,"marginTop",!0),left:b.left-d.left-ma.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent;a&&"static"===ma.css(a,"position");)a=a.offsetParent;return a||Wa})}}),ma.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c="pageYOffset"===b;ma.fn[a]=function(d){return Fa(this,function(a,d,e){var f=Z(a);return void 0===e?f?f[b]:a[d]:void(f?f.scrollTo(c?f.pageXOffset:e,c?e:f.pageYOffset):a[d]=e)},a,d,arguments.length)}}),ma.each(["top","left"],function(a,b){ma.cssHooks[b]=F(ka.pixelPosition,function(a,c){if(c)return c=E(a,b),eb.test(c)?ma(a).position()[b]+"px":c})}),ma.each({Height:"height",Width:"width"},function(a,b){ma.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){ma.fn[d]=function(e,f){var g=arguments.length&&(c||"boolean"!=typeof e),h=c||(e===!0||f===!0?"margin":"border");return Fa(this,function(b,c,e){var f;return ma.isWindow(b)?0===d.indexOf("outer")?b["inner"+a]:b.document.documentElement["client"+a]:9===b.nodeType?(f=b.documentElement,Math.max(b.body["scroll"+a],f["scroll"+a],b.body["offset"+a],f["offset"+a],f["client"+a])):void 0===e?ma.css(b,c,h):ma.style(b,c,e,h)},b,g?e:void 0,g)}})}),ma.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}}),ma.parseJSON=JSON.parse,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ma});var Tb=a.jQuery,Ub=a.$;return ma.noConflict=function(b){return a.$===ma&&(a.$=Ub),b&&a.jQuery===ma&&(a.jQuery=Tb),ma},b||(a.jQuery=a.$=ma),ma}),function(a){if("function"==typeof define&&define.amd&&define("uikit",function(){var b=window.UIkit||a(window,window.jQuery,window.document);return b.load=function(a,c,d,e){var f,g=a.split(","),h=[],i=(e.config&&e.config.uikit&&e.config.uikit.base?e.config.uikit.base:"").replace(/\/+$/g,"");if(!i)throw new Error("Please define base path to UIkit in the requirejs config.");for(f=0;f<g.length;f+=1){var j=g[f].replace(/\./g,"/");h.push(i+"/components/"+j)}c(h,function(){d(b)})},b}),!window.jQuery)throw new Error("UIkit requires jQuery");window&&window.jQuery&&a(window,window.jQuery,window.document)}(function(a,b,c){"use strict";var d={},e=a.UIkit?Object.create(a.UIkit):void 0;if(d.version="2.26.3",d.noConflict=function(){return e&&(a.UIkit=e,b.UIkit=e,b.fn.uk=e.fn),d},d.prefix=function(a){return a},d.$=b,d.$doc=d.$(document),d.$win=d.$(window),d.$html=d.$("html"),d.support={},d.support.transition=function(){var a=function(){var a,b=c.body||c.documentElement,d={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(a in d)if(void 0!==b.style[a])return d[a]}();return a&&{end:a}}(),d.support.animation=function(){var a=function(){var a,b=c.body||c.documentElement,d={WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd oanimationend",animation:"animationend"};for(a in d)if(void 0!==b.style[a])return d[a]}();return a&&{end:a}}(),function(){Date.now=Date.now||function(){return(new Date).getTime()};for(var a=["webkit","moz"],b=0;b<a.length&&!window.requestAnimationFrame;++b){var c=a[b];window.requestAnimationFrame=window[c+"RequestAnimationFrame"],window.cancelAnimationFrame=window[c+"CancelAnimationFrame"]||window[c+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var d=0;window.requestAnimationFrame=function(a){var b=Date.now(),c=Math.max(d+16,b);return setTimeout(function(){a(d=c)},c-b)},window.cancelAnimationFrame=clearTimeout}}(),d.support.touch="ontouchstart"in document||a.DocumentTouch&&document instanceof a.DocumentTouch||a.navigator.msPointerEnabled&&a.navigator.msMaxTouchPoints>0||a.navigator.pointerEnabled&&a.navigator.maxTouchPoints>0||!1,d.support.mutationobserver=a.MutationObserver||a.WebKitMutationObserver||null,d.Utils={},d.Utils.isFullscreen=function(){return document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.fullscreenElement||!1},d.Utils.str2json=function(a,b){try{return b?JSON.parse(a.replace(/([\$\w]+)\s*:/g,function(a,b){return'"'+b+'":'}).replace(/'([^']+)'/g,function(a,b){return'"'+b+'"'})):new Function("","var json = "+a+"; return JSON.parse(JSON.stringify(json));")()}catch(c){return!1}},d.Utils.debounce=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}},d.Utils.throttle=function(a,b){var c=!1;return function(){c||(a.call(),c=!0,setTimeout(function(){c=!1},b))}},d.Utils.removeCssRules=function(a){var b,c,d,e,f,g,h,i,j,k;a&&setTimeout(function(){try{for(k=document.styleSheets,e=0,h=k.length;e<h;e++){for(d=k[e],c=[],d.cssRules=d.cssRules,b=f=0,i=d.cssRules.length;f<i;b=++f)d.cssRules[b].type===CSSRule.STYLE_RULE&&a.test(d.cssRules[b].selectorText)&&c.unshift(b);for(g=0,j=c.length;g<j;g++)d.deleteRule(c[g])}}catch(l){}},0)},d.Utils.isInView=function(a,c){var e=b(a);if(!e.is(":visible"))return!1;var f=d.$win.scrollLeft(),g=d.$win.scrollTop(),h=e.offset(),i=h.left,j=h.top;return c=b.extend({topoffset:0,leftoffset:0},c),j+e.height()>=g&&j-c.topoffset<=g+d.$win.height()&&i+e.width()>=f&&i-c.leftoffset<=f+d.$win.width()},d.Utils.checkDisplay=function(a,c){var e=d.$("[data-uk-margin], [data-uk-grid-match], [data-uk-grid-margin], [data-uk-check-display]",a||document);return a&&!e.length&&(e=b(a)),e.trigger("display.uk.check"),c&&("string"!=typeof c&&(c='[class*="uk-animation-"]'),e.find(c).each(function(){var a=d.$(this),b=a.attr("class"),c=b.match(/uk\-animation\-(.+)/);a.removeClass(c[0]).width(),a.addClass(c[0])})),e},d.Utils.options=function(a){if("string"!=b.type(a))return a;a.indexOf(":")!=-1&&"}"!=a.trim().substr(-1)&&(a="{"+a+"}");var c=a?a.indexOf("{"):-1,e={};if(c!=-1)try{e=d.Utils.str2json(a.substr(c))}catch(f){}return e},d.Utils.animate=function(a,c){var e=b.Deferred();return a=d.$(a),a.css("display","none").addClass(c).one(d.support.animation.end,function(){a.removeClass(c),e.resolve()}),a.css("display",""),e.promise()},d.Utils.uid=function(a){return(a||"id")+(new Date).getTime()+"RAND"+Math.ceil(1e5*Math.random())},d.Utils.template=function(a,b){for(var c,d,e,f,g=a.replace(/\n/g,"\\n").replace(/\{\{\{\s*(.+?)\s*\}\}\}/g,"{{!$1}}").split(/(\{\{\s*(.+?)\s*\}\})/g),h=0,i=[],j=0;h<g.length;){if(c=g[h],c.match(/\{\{\s*(.+?)\s*\}\}/))switch(h+=1,c=g[h],d=c[0],e=c.substring(c.match(/^(\^|\#|\!|\~|\:)/)?1:0),d){case"~":i.push("for(var $i=0;$i<"+e+".length;$i++) { var $item = "+e+"[$i];"),j++;break;case":":i.push("for(var $key in "+e+") { var $val = "+e+"[$key];"),j++;break;case"#":i.push("if("+e+") {"),j++;break;case"^":i.push("if(!"+e+") {"),j++;break;case"/":i.push("}"),j--;break;case"!":i.push("__ret.push("+e+");");break;default:i.push("__ret.push(escape("+e+"));")}else i.push("__ret.push('"+c.replace(/\'/g,"\\'")+"');");h+=1}return f=new Function("$data",["var __ret = [];","try {","with($data){",j?'__ret = ["Not all blocks are closed correctly."]':i.join(""),"};","}catch(e){__ret = [e.message];}",'return __ret.join("").replace(/\\n\\n/g, "\\n");',"function escape(html) { return String(html).replace(/&/g, '&amp;').replace(/\"/g, '&quot;').replace(/</g, '&lt;').replace(/>/g, '&gt;');}"].join("\n")),b?f(b):f},d.Utils.events={},d.Utils.events.click=d.support.touch?"tap":"click",a.UIkit=d,d.fn=function(a,c){var e=arguments,f=a.match(/^([a-z\-]+)(?:\.([a-z]+))?/i),g=f[1],h=f[2];return d[g]?this.each(function(){var a=b(this),f=a.data(g);f||a.data(g,f=d[g](this,h?void 0:c)),h&&f[h].apply(f,Array.prototype.slice.call(e,1))}):(b.error("UIkit component ["+g+"] does not exist."),this)},b.UIkit=d,b.fn.uk=d.fn,d.langdirection="rtl"==d.$html.attr("dir")?"right":"left",d.components={},d.component=function(a,c){var e=function(c,f){var g=this;return this.UIkit=d,this.element=c?d.$(c):null,this.options=b.extend(!0,{},this.defaults,f),this.plugins={},this.element&&this.element.data(a,this),this.init(),(this.options.plugins.length?this.options.plugins:Object.keys(e.plugins)).forEach(function(a){e.plugins[a].init&&(e.plugins[a].init(g),g.plugins[a]=!0)}),this.trigger("init.uk.component",[a,this]),this};return e.plugins={},b.extend(!0,e.prototype,{defaults:{plugins:[]},boot:function(){},init:function(){},on:function(a,b,c){return d.$(this.element||this).on(a,b,c)},one:function(a,b,c){return d.$(this.element||this).one(a,b,c)},off:function(a){return d.$(this.element||this).off(a)},trigger:function(a,b){return d.$(this.element||this).trigger(a,b)},find:function(a){return d.$(this.element?this.element:[]).find(a)},proxy:function(a,b){var c=this;b.split(" ").forEach(function(b){c[b]||(c[b]=function(){return a[b].apply(a,arguments)})})},mixin:function(a,b){var c=this;b.split(" ").forEach(function(b){c[b]||(c[b]=a[b].bind(c))})},option:function(){return 1==arguments.length?this.options[arguments[0]]||void 0:void(2==arguments.length&&(this.options[arguments[0]]=arguments[1]))}},c),this.components[a]=e,this[a]=function(){var c,e;if(arguments.length)switch(arguments.length){case 1:"string"==typeof arguments[0]||arguments[0].nodeType||arguments[0]instanceof jQuery?c=b(arguments[0]):e=arguments[0];break;case 2:c=b(arguments[0]),e=arguments[1]}return c&&c.data(a)?c.data(a):new d.components[a](c,e)},d.domready&&d.component.boot(a),e},d.plugin=function(a,b,c){this.components[a].plugins[b]=c},d.component.boot=function(a){d.components[a].prototype&&d.components[a].prototype.boot&&!d.components[a].booted&&(d.components[a].prototype.boot.apply(d,[]),d.components[a].booted=!0)},d.component.bootComponents=function(){for(var a in d.components)d.component.boot(a)},d.domObservers=[],d.domready=!1,d.ready=function(a){d.domObservers.push(a),d.domready&&a(document)},d.on=function(a,b,c){return a&&a.indexOf("ready.uk.dom")>-1&&d.domready&&b.apply(d.$doc),d.$doc.on(a,b,c)},d.one=function(a,b,c){return a&&a.indexOf("ready.uk.dom")>-1&&d.domready?(b.apply(d.$doc),d.$doc):d.$doc.one(a,b,c)},d.trigger=function(a,b){return d.$doc.trigger(a,b)},d.domObserve=function(a,b){d.support.mutationobserver&&(b=b||function(){},d.$(a).each(function(){var a=this,c=d.$(a);if(!c.data("observer"))try{var e=new d.support.mutationobserver(d.Utils.debounce(function(d){b.apply(a,[]),c.trigger("changed.uk.dom")},50),{childList:!0,subtree:!0});e.observe(a,{childList:!0,subtree:!0}),c.data("observer",e)}catch(f){}}))},d.init=function(a){a=a||document,d.domObservers.forEach(function(b){b(a)})},d.on("domready.uk.dom",function(){d.init(),d.domready&&d.Utils.checkDisplay()}),document.addEventListener("DOMContentLoaded",function(){var a=function(){if(d.$body=d.$("body"),d.trigger("beforeready.uk.dom"),d.component.bootComponents(),requestAnimationFrame(function(){var a={dir:{x:0,y:0},x:window.pageXOffset,
y:window.pageYOffset},b=function(){var c=window.pageXOffset,e=window.pageYOffset;a.x==c&&a.y==e||(c!=a.x?a.dir.x=c>a.x?1:-1:a.dir.x=0,e!=a.y?a.dir.y=e>a.y?1:-1:a.dir.y=0,a.x=c,a.y=e,d.$doc.trigger("scrolling.uk.document",[{dir:{x:a.dir.x,y:a.dir.y},x:c,y:e}])),requestAnimationFrame(b)};return d.support.touch&&d.$html.on("touchmove touchend MSPointerMove MSPointerUp pointermove pointerup",b),(a.x||a.y)&&b(),b}()),d.trigger("domready.uk.dom"),d.support.touch&&navigator.userAgent.match(/(iPad|iPhone|iPod)/g)&&d.$win.on("load orientationchange resize",d.Utils.debounce(function(){var a=function(){return b(".uk-height-viewport").css("height",window.innerHeight),a};return a()}(),100)),d.trigger("afterready.uk.dom"),d.domready=!0,d.support.mutationobserver){var a=d.Utils.debounce(function(){requestAnimationFrame(function(){d.init(document.body)})},10);new d.support.mutationobserver(function(b){var c=!1;b.every(function(a){if("childList"!=a.type)return!0;for(var b,d=0;d<a.addedNodes.length;++d)if(b=a.addedNodes[d],b.outerHTML&&b.outerHTML.indexOf("data-uk-")!==-1)return(c=!0)&&!1;return!0}),c&&a()}).observe(document.body,{childList:!0,subtree:!0})}};return"complete"!=document.readyState&&"interactive"!=document.readyState||setTimeout(a),a}()),d.$html.addClass(d.support.touch?"uk-touch":"uk-notouch"),d.support.touch){var f,g=!1,h="uk-hover",i=".uk-overlay, .uk-overlay-hover, .uk-overlay-toggle, .uk-animation-hover, .uk-has-hover";d.$html.on("mouseenter touchstart MSPointerDown pointerdown",i,function(){g&&b("."+h).removeClass(h),g=b(this).addClass(h)}).on("mouseleave touchend MSPointerUp pointerup",function(a){f=b(a.target).parents(i),g&&g.not(f).removeClass(h)})}return d}),function(a){function b(a,b,c,d){return Math.abs(a-b)>=Math.abs(c-d)?a-b>0?"Left":"Right":c-d>0?"Up":"Down"}function c(){j=null,l.last&&(void 0!==l.el&&l.el.trigger("longTap"),l={})}function d(){j&&clearTimeout(j),j=null}function e(){g&&clearTimeout(g),h&&clearTimeout(h),i&&clearTimeout(i),j&&clearTimeout(j),g=h=i=j=null,l={}}function f(a){return a.pointerType==a.MSPOINTER_TYPE_TOUCH&&a.isPrimary}if(!a.fn.swipeLeft){var g,h,i,j,k,l={},m=750;a(function(){var n,o,p,q=0,r=0;"MSGesture"in window&&(k=new MSGesture,k.target=document.body),a(document).on("MSGestureEnd gestureend",function(a){var b=a.originalEvent.velocityX>1?"Right":a.originalEvent.velocityX<-1?"Left":a.originalEvent.velocityY>1?"Down":a.originalEvent.velocityY<-1?"Up":null;b&&void 0!==l.el&&(l.el.trigger("swipe"),l.el.trigger("swipe"+b))}).on("touchstart MSPointerDown pointerdown",function(b){("MSPointerDown"!=b.type||f(b.originalEvent))&&(p="MSPointerDown"==b.type||"pointerdown"==b.type?b:b.originalEvent.touches[0],n=Date.now(),o=n-(l.last||n),l.el=a("tagName"in p.target?p.target:p.target.parentNode),g&&clearTimeout(g),l.x1=p.pageX,l.y1=p.pageY,o>0&&o<=250&&(l.isDoubleTap=!0),l.last=n,j=setTimeout(c,m),!k||"MSPointerDown"!=b.type&&"pointerdown"!=b.type&&"touchstart"!=b.type||k.addPointer(b.originalEvent.pointerId))}).on("touchmove MSPointerMove pointermove",function(a){("MSPointerMove"!=a.type||f(a.originalEvent))&&(p="MSPointerMove"==a.type||"pointermove"==a.type?a:a.originalEvent.touches[0],d(),l.x2=p.pageX,l.y2=p.pageY,q+=Math.abs(l.x1-l.x2),r+=Math.abs(l.y1-l.y2))}).on("touchend MSPointerUp pointerup",function(c){("MSPointerUp"!=c.type||f(c.originalEvent))&&(d(),l.x2&&Math.abs(l.x1-l.x2)>30||l.y2&&Math.abs(l.y1-l.y2)>30?i=setTimeout(function(){void 0!==l.el&&(l.el.trigger("swipe"),l.el.trigger("swipe"+b(l.x1,l.x2,l.y1,l.y2))),l={}},0):"last"in l&&(isNaN(q)||q<30&&r<30?h=setTimeout(function(){var b=a.Event("tap");b.cancelTouch=e,void 0!==l.el&&l.el.trigger(b),l.isDoubleTap?(void 0!==l.el&&l.el.trigger("doubleTap"),l={}):g=setTimeout(function(){g=null,void 0!==l.el&&l.el.trigger("singleTap"),l={}},250)},0):l={},q=r=0))}).on("touchcancel MSPointerCancel",e),a(window).on("scroll",e)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(b){a.fn[b]=function(c){return a(this).on(b,c)}})}}(jQuery),function(a){"use strict";var b=[];a.component("stackMargin",{defaults:{cls:"uk-margin-small-top",rowfirst:!1,observe:!1},boot:function(){a.ready(function(b){a.$("[data-uk-margin]",b).each(function(){var b=a.$(this);b.data("stackMargin")||a.stackMargin(b,a.Utils.options(b.attr("data-uk-margin")))})})},init:function(){var c=this;a.$win.on("resize orientationchange",function(){var b=function(){c.process()};return a.$(function(){b(),a.$win.on("load",b)}),a.Utils.debounce(b,20)}()),this.on("display.uk.check",function(a){this.element.is(":visible")&&this.process()}.bind(this)),this.options.observe&&a.domObserve(this.element,function(a){c.element.is(":visible")&&c.process()}),b.push(this)},process:function(){var b=this.element.children();if(a.Utils.stackMargin(b,this.options),!this.options.rowfirst||!b.length)return this;var c={},d=!1;return b.removeClass(this.options.rowfirst).each(function(b,e){e=a.$(this),"none"!=this.style.display&&(b=e.offset().left,((c[b]=c[b]||[])&&c[b]).push(this),d=d===!1?b:Math.min(d,b))}),a.$(c[d]).addClass(this.options.rowfirst),this}}),function(){var b=[],c=function(a){if(a.is(":visible")){var b=a.parent().width(),c=a.data("width"),d=b/c,e=Math.floor(d*a.data("height"));a.css({height:b<c?e:a.data("height")})}};a.component("responsiveElement",{defaults:{},boot:function(){a.ready(function(b){a.$("iframe.uk-responsive-width, [data-uk-responsive]",b).each(function(){var b,c=a.$(this);c.data("responsiveElement")||(b=a.responsiveElement(c,{}))})})},init:function(){var a=this.element;a.attr("width")&&a.attr("height")&&(a.data({width:a.attr("width"),height:a.attr("height")}).on("display.uk.check",function(){c(a)}),c(a),b.push(a))}}),a.$win.on("resize load",a.Utils.debounce(function(){b.forEach(function(a){c(a)})},15))}(),a.Utils.stackMargin=function(b,c){c=a.$.extend({cls:"uk-margin-small-top"},c),b=a.$(b).removeClass(c.cls);var d=!1;b.each(function(b,c,e,f){f=a.$(this),"none"!=f.css("display")&&(b=f.offset(),c=f.outerHeight(),e=b.top+c,f.data({ukMarginPos:e,ukMarginTop:b.top}),(d===!1||b.top<d.top)&&(d={top:b.top,left:b.left,pos:e}))}).each(function(b){b=a.$(this),"none"!=b.css("display")&&b.data("ukMarginTop")>d.top&&b.data("ukMarginPos")>d.pos&&b.addClass(c.cls)})},a.Utils.matchHeights=function(b,c){b=a.$(b).css("min-height",""),c=a.$.extend({row:!0},c);var d=function(b){if(!(b.length<2)){var c=0;b.each(function(){c=Math.max(c,a.$(this).outerHeight())}).each(function(){var b=a.$(this),d=c-("border-box"==b.css("box-sizing")?0:b.outerHeight()-b.height());b.css("min-height",d+"px")})}};c.row?(b.first().width(),setTimeout(function(){var c=!1,e=[];b.each(function(){var b=a.$(this),f=b.offset().top;f!=c&&e.length&&(d(a.$(e)),e=[],f=b.offset().top),e.push(b),c=f}),e.length&&d(a.$(e))},0)):d(b)},function(b){a.Utils.inlineSvg=function(c,d){a.$(c||'img[src$=".svg"]',d||document).each(function(){var c=a.$(this),d=c.attr("src");if(!b[d]){var e=a.$.Deferred();a.$.get(d,{nc:Math.random()},function(b){e.resolve(a.$(b).find("svg"))}),b[d]=e.promise()}b[d].then(function(b){var d=a.$(b).clone();c.attr("id")&&d.attr("id",c.attr("id")),c.attr("class")&&d.attr("class",c.attr("class")),c.attr("style")&&d.attr("style",c.attr("style")),c.attr("width")&&(d.attr("width",c.attr("width")),c.attr("height")||d.removeAttr("height")),c.attr("height")&&(d.attr("height",c.attr("height")),c.attr("width")||d.removeAttr("width")),c.replaceWith(d)})})},a.ready(function(b){a.Utils.inlineSvg("[data-uk-svg]",b)})}({})}(UIkit),function(a){"use strict";function b(b,c){c=a.$.extend({duration:1e3,transition:"easeOutExpo",offset:0,complete:function(){}},c);var d=b.offset().top-c.offset,e=a.$doc.height(),f=window.innerHeight;d+f>e&&(d=e-f),a.$("html,body").stop().animate({scrollTop:d},c.duration,c.transition).promise().done(c.complete)}a.component("smoothScroll",{boot:function(){a.$html.on("click.smooth-scroll.uikit","[data-uk-smooth-scroll]",function(b){var c=a.$(this);if(!c.data("smoothScroll")){a.smoothScroll(c,a.Utils.options(c.attr("data-uk-smooth-scroll")));c.trigger("click")}return!1})},init:function(){var c=this;this.on("click",function(d){d.preventDefault(),b(a.$(this.hash).length?a.$(this.hash):a.$("body"),c.options)})}}),a.Utils.scrollToElement=b,a.$.easing.easeOutExpo||(a.$.easing.easeOutExpo=function(a,b,c,d,e){return b==e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c})}(UIkit),function(a){"use strict";var b=a.$win,c=a.$doc,d=[],e=function(){for(var a=0;a<d.length;a++)window.requestAnimationFrame.apply(window,[d[a].check])};a.component("scrollspy",{defaults:{target:!1,cls:"uk-scrollspy-inview",initcls:"uk-scrollspy-init-inview",topoffset:0,leftoffset:0,repeat:!1,delay:0},boot:function(){c.on("scrolling.uk.document",e),b.on("load resize orientationchange",a.Utils.debounce(e,50)),a.ready(function(b){a.$("[data-uk-scrollspy]",b).each(function(){var b=a.$(this);if(!b.data("scrollspy")){a.scrollspy(b,a.Utils.options(b.attr("data-uk-scrollspy")))}})})},init:function(){var b,c=this,e=this.options.cls.split(/,/),f=function(){var d=c.options.target?c.element.find(c.options.target):c.element,f=1===d.length?1:0,g=0;d.each(function(d){var h=a.$(this),i=h.data("inviewstate"),j=a.Utils.isInView(h,c.options),k=h.data("ukScrollspyCls")||e[g].trim();!j||i||h.data("scrollspy-idle")||(b||(h.addClass(c.options.initcls),c.offset=h.offset(),b=!0,h.trigger("init.uk.scrollspy")),h.data("scrollspy-idle",setTimeout(function(){h.addClass("uk-scrollspy-inview").toggleClass(k).width(),h.trigger("inview.uk.scrollspy"),h.data("scrollspy-idle",!1),h.data("inviewstate",!0)},c.options.delay*f)),f++),!j&&i&&c.options.repeat&&(h.data("scrollspy-idle")&&(clearTimeout(h.data("scrollspy-idle")),h.data("scrollspy-idle",!1)),h.removeClass("uk-scrollspy-inview").toggleClass(k),h.data("inviewstate",!1),h.trigger("outview.uk.scrollspy")),g=e[g+1]?g+1:0})};f(),this.check=f,d.push(this)}});var f=[],g=function(){for(var a=0;a<f.length;a++)window.requestAnimationFrame.apply(window,[f[a].check])};a.component("scrollspynav",{defaults:{cls:"uk-active",closest:!1,topoffset:0,leftoffset:0,smoothscroll:!1},boot:function(){c.on("scrolling.uk.document",g),b.on("resize orientationchange",a.Utils.debounce(g,50)),a.ready(function(b){a.$("[data-uk-scrollspy-nav]",b).each(function(){var b=a.$(this);if(!b.data("scrollspynav")){a.scrollspynav(b,a.Utils.options(b.attr("data-uk-scrollspy-nav")))}})})},init:function(){var c,d=[],e=this.find("a[href^='#']").each(function(){"#"!==this.getAttribute("href").trim()&&d.push(this.getAttribute("href"))}),g=a.$(d.join(",")),h=this.options.cls,i=this.options.closest||this.options.closest,j=this,k=function(){c=[];for(var d=0;d<g.length;d++)a.Utils.isInView(g.eq(d),j.options)&&c.push(g.eq(d));if(c.length){var f,k=b.scrollTop(),l=function(){for(var a=0;a<c.length;a++)if(c[a].offset().top>=k)return c[a]}();if(!l)return;j.options.closest?(e.blur().closest(i).removeClass(h),f=e.filter("a[href='#"+l.attr("id")+"']").closest(i).addClass(h)):f=e.removeClass(h).filter("a[href='#"+l.attr("id")+"']").addClass(h),j.element.trigger("inview.uk.scrollspynav",[l,f])}};this.options.smoothscroll&&a.smoothScroll&&e.each(function(){a.smoothScroll(this,j.options.smoothscroll)}),k(),this.element.data("scrollspynav",this),this.check=k,f.push(this)}})}(UIkit),function(a){"use strict";var b=[];a.component("toggle",{defaults:{target:!1,cls:"uk-hidden",animation:!1,duration:200},boot:function(){a.ready(function(c){a.$("[data-uk-toggle]",c).each(function(){var b=a.$(this);if(!b.data("toggle")){a.toggle(b,a.Utils.options(b.attr("data-uk-toggle")))}}),setTimeout(function(){b.forEach(function(a){a.getToggles()})},0)})},init:function(){var a=this;this.aria=this.options.cls.indexOf("uk-hidden")!==-1,this.getToggles(),this.on("click",function(b){a.element.is('a[href="#"]')&&b.preventDefault(),a.toggle()}),b.push(this)},toggle:function(){if(this.totoggle.length){if(this.options.animation&&a.support.animation){var b=this,c=this.options.animation.split(",");1==c.length&&(c[1]=c[0]),c[0]=c[0].trim(),c[1]=c[1].trim(),this.totoggle.css("animation-duration",this.options.duration+"ms"),this.totoggle.each(function(){var d=a.$(this);d.hasClass(b.options.cls)?(d.toggleClass(b.options.cls),a.Utils.animate(d,c[0]).then(function(){d.css("animation-duration",""),a.Utils.checkDisplay(d)})):a.Utils.animate(this,c[1]+" uk-animation-reverse").then(function(){d.toggleClass(b.options.cls).css("animation-duration",""),a.Utils.checkDisplay(d)})})}else this.totoggle.toggleClass(this.options.cls),a.Utils.checkDisplay(this.totoggle);this.updateAria()}},getToggles:function(){this.totoggle=this.options.target?a.$(this.options.target):[],this.updateAria()},updateAria:function(){this.aria&&this.totoggle.length&&this.totoggle.each(function(){a.$(this).attr("aria-hidden",a.$(this).hasClass("uk-hidden"))})}})}(UIkit),function(a){"use strict";a.component("alert",{defaults:{fade:!0,duration:200,trigger:".uk-alert-close"},boot:function(){a.$html.on("click.alert.uikit","[data-uk-alert]",function(b){var c=a.$(this);if(!c.data("alert")){var d=a.alert(c,a.Utils.options(c.attr("data-uk-alert")));a.$(b.target).is(d.options.trigger)&&(b.preventDefault(),d.close())}})},init:function(){var a=this;this.on("click",this.options.trigger,function(b){b.preventDefault(),a.close()})},close:function(){var a=this.trigger("close.uk.alert"),b=function(){this.trigger("closed.uk.alert").remove()}.bind(this);this.options.fade?a.css("overflow","hidden").css("max-height",a.height()).animate({height:0,opacity:0,"padding-top":0,"padding-bottom":0,"margin-top":0,"margin-bottom":0},this.options.duration,b):b()}})}(UIkit),function(a){"use strict";a.component("buttonRadio",{defaults:{activeClass:"uk-active",target:".uk-button"},boot:function(){a.$html.on("click.buttonradio.uikit","[data-uk-button-radio]",function(b){var c=a.$(this);if(!c.data("buttonRadio")){var d=a.buttonRadio(c,a.Utils.options(c.attr("data-uk-button-radio"))),e=a.$(b.target);e.is(d.options.target)&&e.trigger("click")}})},init:function(){var b=this;this.find(b.options.target).attr("aria-checked","false").filter("."+b.options.activeClass).attr("aria-checked","true"),this.on("click",this.options.target,function(c){var d=a.$(this);d.is('a[href="#"]')&&c.preventDefault(),b.find(b.options.target).not(d).removeClass(b.options.activeClass).blur(),d.addClass(b.options.activeClass),b.find(b.options.target).not(d).attr("aria-checked","false"),d.attr("aria-checked","true"),b.trigger("change.uk.button",[d])})},getSelected:function(){return this.find("."+this.options.activeClass)}}),a.component("buttonCheckbox",{defaults:{activeClass:"uk-active",target:".uk-button"},boot:function(){a.$html.on("click.buttoncheckbox.uikit","[data-uk-button-checkbox]",function(b){var c=a.$(this);if(!c.data("buttonCheckbox")){var d=a.buttonCheckbox(c,a.Utils.options(c.attr("data-uk-button-checkbox"))),e=a.$(b.target);e.is(d.options.target)&&e.trigger("click")}})},init:function(){var b=this;this.find(b.options.target).attr("aria-checked","false").filter("."+b.options.activeClass).attr("aria-checked","true"),this.on("click",this.options.target,function(c){var d=a.$(this);d.is('a[href="#"]')&&c.preventDefault(),d.toggleClass(b.options.activeClass).blur(),d.attr("aria-checked",d.hasClass(b.options.activeClass)),b.trigger("change.uk.button",[d])})},getSelected:function(){return this.find("."+this.options.activeClass)}}),a.component("button",{defaults:{},boot:function(){a.$html.on("click.button.uikit","[data-uk-button]",function(b){var c=a.$(this);if(!c.data("button")){a.button(c,a.Utils.options(c.attr("data-uk-button")));c.trigger("click")}})},init:function(){var a=this;this.element.attr("aria-pressed",this.element.hasClass("uk-active")),this.on("click",function(b){a.element.is('a[href="#"]')&&b.preventDefault(),a.toggle(),a.trigger("change.uk.button",[a.element.blur().hasClass("uk-active")])})},toggle:function(){this.element.toggleClass("uk-active"),this.element.attr("aria-pressed",this.element.hasClass("uk-active"))}})}(UIkit),function(a){"use strict";function b(b,c,d,e){if(b=a.$(b),c=a.$(c),d=d||window.innerWidth,e=e||b.offset(),c.length){var f=c.outerWidth();if(b.css("min-width",f),"right"==a.langdirection){var g=d-(c.offset().left+f),h=d-(b.offset().left+b.outerWidth());b.css("margin-right",g-h)}else b.css("margin-left",c.offset().left-e.left)}}var c,d=!1,e={x:{"bottom-left":"bottom-right","bottom-right":"bottom-left","bottom-center":"bottom-center","top-left":"top-right","top-right":"top-left","top-center":"top-center","left-top":"right-top","left-bottom":"right-bottom","left-center":"right-center","right-top":"left-top","right-bottom":"left-bottom","right-center":"left-center"},y:{"bottom-left":"top-left","bottom-right":"top-right","bottom-center":"top-center","top-left":"bottom-left","top-right":"bottom-right","top-center":"bottom-center","left-top":"left-bottom","left-bottom":"left-top","left-center":"left-center","right-top":"right-bottom","right-bottom":"right-top","right-center":"right-center"},xy:{"bottom-left":"top-right","bottom-right":"top-left","bottom-center":"top-center","top-left":"bottom-right","top-right":"bottom-left","top-center":"bottom-center","left-top":"right-bottom","left-bottom":"right-top","left-center":"right-center","right-top":"left-bottom","right-bottom":"left-top","right-center":"left-center"}};a.component("dropdown",{defaults:{mode:"hover",pos:"bottom-left",offset:0,remaintime:800,justify:!1,boundary:a.$win,delay:0,dropdownSelector:".uk-dropdown,.uk-dropdown-blank",hoverDelayIdle:250,preventflip:!1},remainIdle:!1,boot:function(){var b=a.support.touch?"click":"mouseenter";a.$html.on(b+".dropdown.uikit","[data-uk-dropdown]",function(c){var d=a.$(this);if(!d.data("dropdown")){var e=a.dropdown(d,a.Utils.options(d.attr("data-uk-dropdown")));("click"==b||"mouseenter"==b&&"hover"==e.options.mode)&&e.element.trigger(b),e.element.find(e.options.dropdownSelector).length&&c.preventDefault()}})},init:function(){var b=this;this.dropdown=this.find(this.options.dropdownSelector),this.offsetParent=this.dropdown.parents().filter(function(){return a.$.inArray(a.$(this).css("position"),["relative","fixed","absolute"])!==-1}).slice(0,1),this.centered=this.dropdown.hasClass("uk-dropdown-center"),this.justified=!!this.options.justify&&a.$(this.options.justify),this.boundary=a.$(this.options.boundary),this.boundary.length||(this.boundary=a.$win),this.dropdown.hasClass("uk-dropdown-up")&&(this.options.pos="top-left"),this.dropdown.hasClass("uk-dropdown-flip")&&(this.options.pos=this.options.pos.replace("left","right")),this.dropdown.hasClass("uk-dropdown-center")&&(this.options.pos=this.options.pos.replace(/(left|right)/,"center")),this.element.attr("aria-haspopup","true"),this.element.attr("aria-expanded",this.element.hasClass("uk-open")),"click"==this.options.mode||a.support.touch?this.on("click.uk.dropdown",function(c){var d=a.$(c.target);d.parents(b.options.dropdownSelector).length||((d.is("a[href='#']")||d.parent().is("a[href='#']")||b.dropdown.length&&!b.dropdown.is(":visible"))&&c.preventDefault(),d.blur()),b.element.hasClass("uk-open")?(!b.dropdown.find(c.target).length||d.is(".uk-dropdown-close")||d.parents(".uk-dropdown-close").length)&&b.hide():b.show()}):this.on("mouseenter",function(a){b.trigger("pointerenter.uk.dropdown",[b]),b.remainIdle&&clearTimeout(b.remainIdle),c&&clearTimeout(c),d&&d==b||(c=d&&d!=b?setTimeout(function(){c=setTimeout(b.show.bind(b),b.options.delay)},b.options.hoverDelayIdle):setTimeout(b.show.bind(b),b.options.delay))}).on("mouseleave",function(){c&&clearTimeout(c),b.remainIdle=setTimeout(function(){d&&d==b&&b.hide()},b.options.remaintime),b.trigger("pointerleave.uk.dropdown",[b])}).on("click",function(c){var e=a.$(c.target);return b.remainIdle&&clearTimeout(b.remainIdle),d&&d==b?void((!b.dropdown.find(c.target).length||e.is(".uk-dropdown-close")||e.parents(".uk-dropdown-close").length)&&b.hide()):((e.is("a[href='#']")||e.parent().is("a[href='#']"))&&c.preventDefault(),void b.show())})},show:function(){a.$html.off("click.outer.dropdown"),d&&d!=this&&d.hide(!0),c&&clearTimeout(c),this.trigger("beforeshow.uk.dropdown",[this]),this.checkDimensions(),this.element.addClass("uk-open"),this.element.attr("aria-expanded","true"),this.trigger("show.uk.dropdown",[this]),a.Utils.checkDisplay(this.dropdown,!0),d=this,this.registerOuterClick()},hide:function(a){this.trigger("beforehide.uk.dropdown",[this,a]),this.element.removeClass("uk-open"),this.remainIdle&&clearTimeout(this.remainIdle),this.remainIdle=!1,this.element.attr("aria-expanded","false"),this.trigger("hide.uk.dropdown",[this,a]),d==this&&(d=!1)},registerOuterClick:function(){var b=this;a.$html.off("click.outer.dropdown"),setTimeout(function(){a.$html.on("click.outer.dropdown",function(e){c&&clearTimeout(c);a.$(e.target);d!=b||b.element.find(e.target).length||(b.hide(!0),a.$html.off("click.outer.dropdown"))})},10)},checkDimensions:function(){if(this.dropdown.length){this.dropdown.removeClass("uk-dropdown-top uk-dropdown-bottom uk-dropdown-left uk-dropdown-right uk-dropdown-stack").css({"top-left":"",left:"","margin-left":"","margin-right":""}),this.justified&&this.justified.length&&this.dropdown.css("min-width","");var c,d=a.$.extend({},this.offsetParent.offset(),{width:this.offsetParent[0].offsetWidth,height:this.offsetParent[0].offsetHeight}),f=this.options.offset,g=this.dropdown,h=(g.show().offset()||{left:0,top:0},g.outerWidth()),i=g.outerHeight(),j=this.boundary.width(),k=(this.boundary[0]!==window&&this.boundary.offset()?this.boundary.offset():{top:0,left:0},this.options.pos),l={"bottom-left":{top:0+d.height+f,left:0},"bottom-right":{top:0+d.height+f,left:0+d.width-h},"bottom-center":{top:0+d.height+f,left:0+d.width/2-h/2},"top-left":{top:0-i-f,left:0},"top-right":{top:0-i-f,left:0+d.width-h},"top-center":{top:0-i-f,left:0+d.width/2-h/2},"left-top":{top:0,left:0-h-f},"left-bottom":{top:0+d.height-i,left:0-h-f},"left-center":{top:0+d.height/2-i/2,left:0-h-f},"right-top":{top:0,left:0+d.width+f},"right-bottom":{top:0+d.height-i,left:0+d.width+f},"right-center":{top:0+d.height/2-i/2,left:0+d.width+f}},m={};if(c=k.split("-"),m=l[k]?l[k]:l["bottom-left"],this.justified&&this.justified.length)b(g.css({left:0}),this.justified,j);else if(this.options.preventflip!==!0){var n;switch(this.checkBoundary(d.left+m.left,d.top+m.top,h,i,j)){case"x":"x"!==this.options.preventflip&&(n=e.x[k]||"right-top");break;case"y":"y"!==this.options.preventflip&&(n=e.y[k]||"top-left");break;case"xy":this.options.preventflip||(n=e.xy[k]||"right-bottom")}n&&(c=n.split("-"),m=l[n]?l[n]:l["bottom-left"],this.checkBoundary(d.left+m.left,d.top+m.top,h,i,j)&&(c=k.split("-"),m=l[k]?l[k]:l["bottom-left"]))}h>j&&(g.addClass("uk-dropdown-stack"),this.trigger("stack.uk.dropdown",[this])),g.css(m).css("display","").addClass("uk-dropdown-"+c[0])}},checkBoundary:function(b,c,d,e,f){var g="";return(b<0||b-a.$win.scrollLeft()+d>f)&&(g+="x"),(c-a.$win.scrollTop()<0||c-a.$win.scrollTop()+e>window.innerHeight)&&(g+="y"),g}}),a.component("dropdownOverlay",{defaults:{justify:!1,cls:"",duration:200},boot:function(){a.ready(function(b){a.$("[data-uk-dropdown-overlay]",b).each(function(){var b=a.$(this);b.data("dropdownOverlay")||a.dropdownOverlay(b,a.Utils.options(b.attr("data-uk-dropdown-overlay")))})})},init:function(){var c=this;this.justified=!!this.options.justify&&a.$(this.options.justify),this.overlay=this.element.find("uk-dropdown-overlay"),this.overlay.length||(this.overlay=a.$('<div class="uk-dropdown-overlay"></div>').appendTo(this.element)),this.overlay.addClass(this.options.cls),this.on({"beforeshow.uk.dropdown":function(a,d){c.dropdown=d,c.justified&&c.justified.length&&b(c.overlay.css({display:"block","margin-left":"","margin-right":""}),c.justified,c.justified.outerWidth())},"show.uk.dropdown":function(b,d){var e=c.dropdown.dropdown.outerHeight(!0);c.dropdown.element.removeClass("uk-open"),c.overlay.stop().css("display","block").animate({height:e},c.options.duration,function(){c.dropdown.dropdown.css("visibility",""),c.dropdown.element.addClass("uk-open"),a.Utils.checkDisplay(c.dropdown.dropdown,!0)}),c.pointerleave=!1},"hide.uk.dropdown":function(){c.overlay.stop().animate({height:0},c.options.duration)},"pointerenter.uk.dropdown":function(a,b){clearTimeout(c.remainIdle)},"pointerleave.uk.dropdown":function(a,b){c.pointerleave=!0}}),this.overlay.on({mouseenter:function(){c.remainIdle&&(clearTimeout(c.dropdown.remainIdle),clearTimeout(c.remainIdle))},mouseleave:function(){c.pointerleave&&d&&(c.remainIdle=setTimeout(function(){d&&d.hide()},d.options.remaintime))}})}})}(UIkit),function(a){"use strict";var b=[];a.component("gridMatchHeight",{defaults:{target:!1,row:!0,ignorestacked:!1,observe:!1},boot:function(){a.ready(function(b){a.$("[data-uk-grid-match]",b).each(function(){var b,c=a.$(this);c.data("gridMatchHeight")||(b=a.gridMatchHeight(c,a.Utils.options(c.attr("data-uk-grid-match"))))})})},init:function(){var c=this;this.columns=this.element.children(),this.elements=this.options.target?this.find(this.options.target):this.columns,this.columns.length&&(a.$win.on("load resize orientationchange",function(){var b=function(){c.element.is(":visible")&&c.match()};return a.$(function(){b()}),a.Utils.debounce(b,50)}()),this.options.observe&&a.domObserve(this.element,function(a){c.element.is(":visible")&&c.match()}),this.on("display.uk.check",function(a){this.element.is(":visible")&&this.match()}.bind(this)),b.push(this))},match:function(){var b=this.columns.filter(":visible:first");if(b.length){var c=Math.ceil(100*parseFloat(b.css("width"))/parseFloat(b.parent().css("width")))>=100;return c&&!this.options.ignorestacked?this.revert():a.Utils.matchHeights(this.elements,this.options),this}},revert:function(){return this.elements.css("min-height",""),this}}),a.component("gridMargin",{defaults:{cls:"uk-grid-margin",rowfirst:"uk-row-first"},boot:function(){a.ready(function(b){a.$("[data-uk-grid-margin]",b).each(function(){var b,c=a.$(this);c.data("gridMargin")||(b=a.gridMargin(c,a.Utils.options(c.attr("data-uk-grid-margin"))))})})},init:function(){a.stackMargin(this.element,this.options)}})}(UIkit),function(a){"use strict";function b(b,c){if(c)return"object"==typeof b?(b=b instanceof jQuery?b:a.$(b),b.parent().length&&(c.persist=b,c.persist.data("modalPersistParent",b.parent()))):b="string"==typeof b||"number"==typeof b?a.$("<div></div>").html(b):a.$("<div></div>").html("UIkit.modal Error: Unsupported data type: "+typeof b),b.appendTo(c.element.find(".uk-modal-dialog")),c}var c,d=!1,e=0,f=a.$html;a.$win.on("resize orientationchange",a.Utils.debounce(function(){a.$(".uk-modal.uk-open").each(function(){a.$(this).data("modal").resize()})},150)),a.component("modal",{defaults:{keyboard:!0,bgclose:!0,minScrollHeight:150,center:!1,modal:!0},scrollable:!1,transition:!1,hasTransitioned:!0,init:function(){if(c||(c=a.$("body")),this.element.length){var b=this;this.paddingdir="padding-"+("left"==a.langdirection?"right":"left"),this.dialog=this.find(".uk-modal-dialog"),this.active=!1,this.element.attr("aria-hidden",this.element.hasClass("uk-open")),this.on("click",".uk-modal-close",function(a){a.preventDefault(),b.hide()}).on("click",function(c){var d=a.$(c.target);d[0]==b.element[0]&&b.options.bgclose&&b.hide()}),a.domObserve(this.element,function(a){b.resize()})}},toggle:function(){return this[this.isActive()?"hide":"show"]()},show:function(){if(this.element.length){var b=this;if(!this.isActive())return this.options.modal&&d&&d.hide(!0),this.element.removeClass("uk-open").show(),this.resize(!0),this.options.modal&&(d=this),this.active=!0,e++,a.support.transition?(this.hasTransitioned=!1,this.element.one(a.support.transition.end,function(){b.hasTransitioned=!0}).addClass("uk-open")):this.element.addClass("uk-open"),f.addClass("uk-modal-page").height(),this.element.attr("aria-hidden","false"),this.element.trigger("show.uk.modal"),a.Utils.checkDisplay(this.dialog,!0),this}},hide:function(b){if(!b&&a.support.transition&&this.hasTransitioned){var c=this;this.one(a.support.transition.end,function(){c._hide()}).removeClass("uk-open")}else this._hide();return this},resize:function(a){if(this.isActive()||a){var b=c.width();if(this.scrollbarwidth=window.innerWidth-b,c.css(this.paddingdir,this.scrollbarwidth),this.element.css("overflow-y",this.scrollbarwidth?"scroll":"auto"),!this.updateScrollable()&&this.options.center){var d=this.dialog.outerHeight(),e=parseInt(this.dialog.css("margin-top"),10)+parseInt(this.dialog.css("margin-bottom"),10);d+e<window.innerHeight?this.dialog.css({top:window.innerHeight/2-d/2-e}):this.dialog.css({top:""})}}},updateScrollable:function(){var a=this.dialog.find(".uk-overflow-container:visible:first");if(a.length){a.css("height",0);var b=Math.abs(parseInt(this.dialog.css("margin-top"),10)),c=this.dialog.outerHeight(),d=window.innerHeight,e=d-2*(b<20?20:b)-c;return a.css({"max-height":e<this.options.minScrollHeight?"":e,height:""}),!0}return!1},_hide:function(){this.active=!1,e>0?e--:e=0,this.element.hide().removeClass("uk-open"),this.element.attr("aria-hidden","true"),e||(f.removeClass("uk-modal-page"),c.css(this.paddingdir,"")),d===this&&(d=!1),this.trigger("hide.uk.modal")},isActive:function(){return this.element.hasClass("uk-open")}}),a.component("modalTrigger",{boot:function(){a.$html.on("click.modal.uikit","[data-uk-modal]",function(b){var c=a.$(this);if(c.is("a")&&b.preventDefault(),!c.data("modalTrigger")){var d=a.modalTrigger(c,a.Utils.options(c.attr("data-uk-modal")));d.show()}}),a.$html.on("keydown.modal.uikit",function(a){d&&27===a.keyCode&&d.options.keyboard&&(a.preventDefault(),d.hide())})},init:function(){var b=this;this.options=a.$.extend({target:!!b.element.is("a")&&b.element.attr("href")},this.options),this.modal=a.modal(this.options.target,this.options),this.on("click",function(a){a.preventDefault(),b.show()}),this.proxy(this.modal,"show hide isActive")}}),a.modal.dialog=function(c,d){var e=a.modal(a.$(a.modal.dialog.template).appendTo("body"),d);return e.on("hide.uk.modal",function(){e.persist&&(e.persist.appendTo(e.persist.data("modalPersistParent")),e.persist=!1),e.element.remove()}),b(c,e),e},a.modal.dialog.template='<div class="uk-modal"><div class="uk-modal-dialog" style="min-height:0;"></div></div>',a.modal.alert=function(b,c){c=a.$.extend(!0,{bgclose:!1,keyboard:!1,modal:!1,labels:a.modal.labels},c);var d=a.modal.dialog(['<div class="uk-margin uk-modal-content">'+String(b)+"</div>",'<div class="uk-modal-footer uk-text-right"><button class="uk-button uk-button-primary uk-modal-close">'+c.labels.Ok+"</button></div>"].join(""),c);return d.on("show.uk.modal",function(){setTimeout(function(){d.element.find("button:first").focus()},50)}),d.show()},a.modal.confirm=function(b,c,d){var e=arguments.length>1&&arguments[arguments.length-1]?arguments[arguments.length-1]:{};c=a.$.isFunction(c)?c:function(){},d=a.$.isFunction(d)?d:function(){},e=a.$.extend(!0,{bgclose:!1,keyboard:!1,modal:!1,labels:a.modal.labels},a.$.isFunction(e)?{}:e);var f=a.modal.dialog(['<div class="uk-margin uk-modal-content">'+String(b)+"</div>",'<div class="uk-modal-footer uk-text-right"><button class="uk-button js-modal-confirm-cancel">'+e.labels.Cancel+'</button> <button class="uk-button uk-button-primary js-modal-confirm">'+e.labels.Ok+"</button></div>"].join(""),e);return f.element.find(".js-modal-confirm, .js-modal-confirm-cancel").on("click",function(){a.$(this).is(".js-modal-confirm")?c():d(),f.hide()}),f.on("show.uk.modal",function(){setTimeout(function(){f.element.find(".js-modal-confirm").focus()},50)}),f.show()},a.modal.prompt=function(b,c,d,e){d=a.$.isFunction(d)?d:function(a){},e=a.$.extend(!0,{bgclose:!1,keyboard:!1,modal:!1,labels:a.modal.labels},e);var f=a.modal.dialog([b?'<div class="uk-modal-content uk-form">'+String(b)+"</div>":"",'<div class="uk-margin-small-top uk-modal-content uk-form"><p><input type="text" class="uk-width-1-1"></p></div>','<div class="uk-modal-footer uk-text-right"><button class="uk-button uk-modal-close">'+e.labels.Cancel+'</button> <button class="uk-button uk-button-primary js-modal-ok">'+e.labels.Ok+"</button></div>"].join(""),e),g=f.element.find("input[type='text']").val(c||"").on("keyup",function(a){
13==a.keyCode&&f.element.find(".js-modal-ok").trigger("click")});return f.element.find(".js-modal-ok").on("click",function(){d(g.val())!==!1&&f.hide()}),f.on("show.uk.modal",function(){setTimeout(function(){g.focus()},50)}),f.show()},a.modal.blockUI=function(b,c){var d=a.modal.dialog(['<div class="uk-margin uk-modal-content">'+String(b||'<div class="uk-text-center">...</div>')+"</div>"].join(""),a.$.extend({bgclose:!1,keyboard:!1,modal:!1},c));return d.content=d.element.find(".uk-modal-content:first"),d.show()},a.modal.labels={Ok:"Ok",Cancel:"Cancel"}}(UIkit),function(a){"use strict";function b(b){var c=a.$(b),d="auto";if(c.is(":visible"))d=c.outerHeight();else{var e={position:c.css("position"),visibility:c.css("visibility"),display:c.css("display")};d=c.css({position:"absolute",visibility:"hidden",display:"block"}).outerHeight(),c.css(e)}return d}a.component("nav",{defaults:{toggle:">li.uk-parent > a[href='#']",lists:">li.uk-parent > ul",multiple:!1},boot:function(){a.ready(function(b){a.$("[data-uk-nav]",b).each(function(){var b=a.$(this);if(!b.data("nav")){a.nav(b,a.Utils.options(b.attr("data-uk-nav")))}})})},init:function(){var b=this;this.on("click.uk.nav",this.options.toggle,function(c){c.preventDefault();var d=a.$(this);b.open(d.parent()[0]==b.element[0]?d:d.parent("li"))}),this.find(this.options.lists).each(function(){var c=a.$(this),d=c.parent(),e=d.hasClass("uk-active");c.wrap('<div style="overflow:hidden;height:0;position:relative;"></div>'),d.data("list-container",c.parent()[e?"removeClass":"addClass"]("uk-hidden")),d.attr("aria-expanded",d.hasClass("uk-open")),e&&b.open(d,!0)})},open:function(c,d){var e=this,f=this.element,g=a.$(c),h=g.data("list-container");this.options.multiple||f.children(".uk-open").not(c).each(function(){var b=a.$(this);b.data("list-container")&&b.data("list-container").stop().animate({height:0},function(){a.$(this).parent().removeClass("uk-open").end().addClass("uk-hidden")})}),g.toggleClass("uk-open"),g.attr("aria-expanded",g.hasClass("uk-open")),h&&(g.hasClass("uk-open")&&h.removeClass("uk-hidden"),d?(h.stop().height(g.hasClass("uk-open")?"auto":0),g.hasClass("uk-open")||h.addClass("uk-hidden"),this.trigger("display.uk.check")):h.stop().animate({height:g.hasClass("uk-open")?b(h.find("ul:first")):0},function(){g.hasClass("uk-open")?h.css("height",""):h.addClass("uk-hidden"),e.trigger("display.uk.check")}))}})}(UIkit),function(a){"use strict";var b={x:window.scrollX,y:window.scrollY},c=(a.$win,a.$doc,a.$html),d={show:function(d){if(d=a.$(d),d.length){var e=a.$("body"),f=d.find(".uk-offcanvas-bar:first"),g="right"==a.langdirection,h=f.hasClass("uk-offcanvas-bar-flip")?-1:1,i=h*(g?-1:1),j=window.innerWidth-e.width();b={x:window.pageXOffset,y:window.pageYOffset},d.addClass("uk-active"),e.css({width:window.innerWidth-j,height:window.innerHeight}).addClass("uk-offcanvas-page"),e.css(g?"margin-right":"margin-left",(g?-1:1)*(f.outerWidth()*i)).width(),c.css("margin-top",b.y*-1),f.addClass("uk-offcanvas-bar-show"),this._initElement(d),f.trigger("show.uk.offcanvas",[d,f]),d.attr("aria-hidden","false")}},hide:function(d){var e=a.$("body"),f=a.$(".uk-offcanvas.uk-active"),g="right"==a.langdirection,h=f.find(".uk-offcanvas-bar:first"),i=function(){e.removeClass("uk-offcanvas-page").css({width:"",height:"","margin-left":"","margin-right":""}),f.removeClass("uk-active"),h.removeClass("uk-offcanvas-bar-show"),c.css("margin-top",""),window.scrollTo(b.x,b.y),h.trigger("hide.uk.offcanvas",[f,h]),f.attr("aria-hidden","true")};f.length&&(a.support.transition&&!d?(e.one(a.support.transition.end,function(){i()}).css(g?"margin-right":"margin-left",""),setTimeout(function(){h.removeClass("uk-offcanvas-bar-show")},0)):i())},_initElement:function(b){b.data("OffcanvasInit")||(b.on("click.uk.offcanvas swipeRight.uk.offcanvas swipeLeft.uk.offcanvas",function(b){var c=a.$(b.target);if(!b.type.match(/swipe/)&&!c.hasClass("uk-offcanvas-close")){if(c.hasClass("uk-offcanvas-bar"))return;if(c.parents(".uk-offcanvas-bar:first").length)return}b.stopImmediatePropagation(),d.hide()}),b.on("click","a[href*='#']",function(b){var c=a.$(this),e=c.attr("href");"#"!=e&&(a.$doc.one("hide.uk.offcanvas",function(){var b;try{b=a.$(c[0].hash)}catch(d){b=""}b.length||(b=a.$('[name="'+c[0].hash.replace("#","")+'"]')),b.length&&a.Utils.scrollToElement?a.Utils.scrollToElement(b,a.Utils.options(c.attr("data-uk-smooth-scroll")||"{}")):window.location.href=e}),d.hide())}),b.data("OffcanvasInit",!0))}};a.component("offcanvasTrigger",{boot:function(){c.on("click.offcanvas.uikit","[data-uk-offcanvas]",function(b){b.preventDefault();var c=a.$(this);if(!c.data("offcanvasTrigger")){a.offcanvasTrigger(c,a.Utils.options(c.attr("data-uk-offcanvas")));c.trigger("click")}}),c.on("keydown.uk.offcanvas",function(a){27===a.keyCode&&d.hide()})},init:function(){var b=this;this.options=a.$.extend({target:!!b.element.is("a")&&b.element.attr("href")},this.options),this.on("click",function(a){a.preventDefault(),d.show(b.options.target)})}}),a.offcanvas=d}(UIkit),function(a){"use strict";function b(b,c,d){var e,f=a.$.Deferred(),g=b,h=b;return d[0]===c[0]?(f.resolve(),f.promise()):("object"==typeof b&&(g=b[0],h=b[1]||b[0]),a.$body.css("overflow-x","hidden"),e=function(){c&&c.hide().removeClass("uk-active "+h+" uk-animation-reverse"),d.addClass(g).one(a.support.animation.end,function(){d.removeClass(""+g).css({opacity:"",display:""}),f.resolve(),a.$body.css("overflow-x",""),c&&c.css({opacity:"",display:""})}.bind(this)).show()},d.css("animation-duration",this.options.duration+"ms"),c&&c.length?(c.css("animation-duration",this.options.duration+"ms"),c.css("display","none").addClass(h+" uk-animation-reverse").one(a.support.animation.end,function(){e()}.bind(this)).css("display","")):(d.addClass("uk-active"),e()),f.promise())}var c;a.component("switcher",{defaults:{connect:!1,toggle:">*",active:0,animation:!1,duration:200,swiping:!0},animating:!1,boot:function(){a.ready(function(b){a.$("[data-uk-switcher]",b).each(function(){var b=a.$(this);if(!b.data("switcher")){a.switcher(b,a.Utils.options(b.attr("data-uk-switcher")))}})})},init:function(){var b=this;if(this.on("click.uk.switcher",this.options.toggle,function(a){a.preventDefault(),b.show(this)}),this.options.connect){this.connect=a.$(this.options.connect),this.connect.children().removeClass("uk-active"),this.connect.length&&(this.connect.children().attr("aria-hidden","true"),this.connect.on("click","[data-uk-switcher-item]",function(c){c.preventDefault();var d=a.$(this).attr("data-uk-switcher-item");if(b.index!=d)switch(d){case"next":case"previous":b.show(b.index+("next"==d?1:-1));break;default:b.show(parseInt(d,10))}}),this.options.swiping&&this.connect.on("swipeRight swipeLeft",function(a){a.preventDefault(),window.getSelection().toString()||b.show(b.index+("swipeLeft"==a.type?1:-1))}));var c=this.find(this.options.toggle),d=c.filter(".uk-active");if(d.length)this.show(d,!1);else{if(this.options.active===!1)return;d=c.eq(this.options.active),this.show(d.length?d:c.eq(0),!1)}c.not(d).attr("aria-expanded","false"),d.attr("aria-expanded","true")}},show:function(d,e){if(!this.animating){if(isNaN(d))d=a.$(d);else{var f=this.find(this.options.toggle);d=d<0?f.length-1:d,d=f.eq(f[d]?d:0)}var g=this,f=this.find(this.options.toggle),h=a.$(d),i=c[this.options.animation]||function(a,d){if(!g.options.animation)return c.none.apply(g);var e=g.options.animation.split(",");return 1==e.length&&(e[1]=e[0]),e[0]=e[0].trim(),e[1]=e[1].trim(),b.apply(g,[e,a,d])};e!==!1&&a.support.animation||(i=c.none),h.hasClass("uk-disabled")||(f.attr("aria-expanded","false"),h.attr("aria-expanded","true"),f.filter(".uk-active").removeClass("uk-active"),h.addClass("uk-active"),this.options.connect&&this.connect.length&&(this.index=this.find(this.options.toggle).index(h),this.index==-1&&(this.index=0),this.connect.each(function(){var b=a.$(this),c=a.$(b.children()),d=a.$(c.filter(".uk-active")),e=a.$(c.eq(g.index));g.animating=!0,i.apply(g,[d,e]).then(function(){d.removeClass("uk-active"),e.addClass("uk-active"),d.attr("aria-hidden","true"),e.attr("aria-hidden","false"),a.Utils.checkDisplay(e,!0),g.animating=!1})})),this.trigger("show.uk.switcher",[h]))}}}),c={none:function(){var b=a.$.Deferred();return b.resolve(),b.promise()},fade:function(a,c){return b.apply(this,["uk-animation-fade",a,c])},"slide-bottom":function(a,c){return b.apply(this,["uk-animation-slide-bottom",a,c])},"slide-top":function(a,c){return b.apply(this,["uk-animation-slide-top",a,c])},"slide-vertical":function(a,c,d){var e=["uk-animation-slide-top","uk-animation-slide-bottom"];return a&&a.index()>c.index()&&e.reverse(),b.apply(this,[e,a,c])},"slide-left":function(a,c){return b.apply(this,["uk-animation-slide-left",a,c])},"slide-right":function(a,c){return b.apply(this,["uk-animation-slide-right",a,c])},"slide-horizontal":function(a,c,d){var e=["uk-animation-slide-right","uk-animation-slide-left"];return a&&a.index()>c.index()&&e.reverse(),b.apply(this,[e,a,c])},scale:function(a,c){return b.apply(this,["uk-animation-scale-up",a,c])}},a.switcher.animations=c}(UIkit),function(a){"use strict";a.component("tab",{defaults:{target:">li:not(.uk-tab-responsive, .uk-disabled)",connect:!1,active:0,animation:!1,duration:200,swiping:!0},boot:function(){a.ready(function(b){a.$("[data-uk-tab]",b).each(function(){var b=a.$(this);if(!b.data("tab")){a.tab(b,a.Utils.options(b.attr("data-uk-tab")))}})})},init:function(){var b=this;this.current=!1,this.on("click.uk.tab",this.options.target,function(c){if(c.preventDefault(),!b.switcher||!b.switcher.animating){var d=b.find(b.options.target).not(this);d.removeClass("uk-active").blur(),b.trigger("change.uk.tab",[a.$(this).addClass("uk-active"),b.current]),b.current=a.$(this),b.options.connect||(d.attr("aria-expanded","false"),a.$(this).attr("aria-expanded","true"))}}),this.options.connect&&(this.connect=a.$(this.options.connect)),this.responsivetab=a.$('<li class="uk-tab-responsive uk-active"><a></a></li>').append('<div class="uk-dropdown uk-dropdown-small"><ul class="uk-nav uk-nav-dropdown"></ul><div>'),this.responsivetab.dropdown=this.responsivetab.find(".uk-dropdown"),this.responsivetab.lst=this.responsivetab.dropdown.find("ul"),this.responsivetab.caption=this.responsivetab.find("a:first"),this.element.hasClass("uk-tab-bottom")&&this.responsivetab.dropdown.addClass("uk-dropdown-up"),this.responsivetab.lst.on("click.uk.tab","a",function(c){c.preventDefault(),c.stopPropagation();var d=a.$(this);b.element.children("li:not(.uk-tab-responsive)").eq(d.data("index")).trigger("click")}),this.on("show.uk.switcher change.uk.tab",function(a,c){b.responsivetab.caption.html(c.text())}),this.element.append(this.responsivetab),this.options.connect&&(this.switcher=a.switcher(this.element,{toggle:">li:not(.uk-tab-responsive)",connect:this.options.connect,active:this.options.active,animation:this.options.animation,duration:this.options.duration,swiping:this.options.swiping})),a.dropdown(this.responsivetab,{mode:"click",preventflip:"y"}),b.trigger("change.uk.tab",[this.element.find(this.options.target).not(".uk-tab-responsive").filter(".uk-active")]),this.check(),a.$win.on("resize orientationchange",a.Utils.debounce(function(){b.element.is(":visible")&&b.check()},100)),this.on("display.uk.check",function(){b.element.is(":visible")&&b.check()})},check:function(){var b=this.element.children("li:not(.uk-tab-responsive)").removeClass("uk-hidden");if(!b.length)return void this.responsivetab.addClass("uk-hidden");var c,d,e,f=b.eq(0).offset().top+Math.ceil(b.eq(0).height()/2),g=!1;if(this.responsivetab.lst.empty(),b.each(function(){a.$(this).offset().top>f&&(g=!0)}),g)for(var h=0;h<b.length;h++)c=a.$(b.eq(h)),d=c.find("a"),"none"==c.css("float")||c.attr("uk-dropdown")||(c.hasClass("uk-disabled")||(e=c[0].outerHTML.replace("<a ",'<a data-index="'+h+'" '),this.responsivetab.lst.append(e)),c.addClass("uk-hidden"));this.responsivetab[this.responsivetab.lst.children("li").length?"removeClass":"addClass"]("uk-hidden")}})}(UIkit),function(a){"use strict";a.component("cover",{defaults:{automute:!0},boot:function(){a.ready(function(b){a.$("[data-uk-cover]",b).each(function(){var b=a.$(this);if(!b.data("cover")){a.cover(b,a.Utils.options(b.attr("data-uk-cover")))}})})},init:function(){if(this.parent=this.element.parent(),a.$win.on("load resize orientationchange",a.Utils.debounce(function(){this.check()}.bind(this),100)),this.on("display.uk.check",function(a){this.element.is(":visible")&&this.check()}.bind(this)),this.check(),this.element.is("iframe")&&this.options.automute){var b=this.element.attr("src");this.element.attr("src","").on("load",function(){this.contentWindow.postMessage('{ "event": "command", "func": "mute", "method":"setVolume", "value":0}',"*")}).attr("src",[b,b.indexOf("?")>-1?"&":"?","enablejsapi=1&api=1"].join(""))}},check:function(){this.element.css({width:"",height:""}),this.dimension={w:this.element.width(),h:this.element.height()},this.element.attr("width")&&!isNaN(this.element.attr("width"))&&(this.dimension.w=this.element.attr("width")),this.element.attr("height")&&!isNaN(this.element.attr("height"))&&(this.dimension.h=this.element.attr("height")),this.ratio=this.dimension.w/this.dimension.h;var a,b,c=this.parent.width(),d=this.parent.height();c/this.ratio<d?(a=Math.ceil(d*this.ratio),b=d):(a=c,b=Math.ceil(c/this.ratio)),this.element.css({width:a,height:b})}})}(UIkit),function(a){var b;window.UIkit&&(b=a(UIkit)),"function"==typeof define&&define.amd&&define("uikit-sticky",["uikit"],function(){return b||a(UIkit)})}(function(a){"use strict";function b(b){var f=arguments.length?arguments:e;if(f.length&&!(c.scrollTop()<0))for(var g,h,i,j,k=c.scrollTop(),l=d.height(),m=c.height(),n=l-m,o=k>n?n-k:0,p=0;p<f.length;p++)if(j=f[p],j.element.is(":visible")&&!j.animate){if(j.check()){if(j.top<0?g=0:(i=j.element.outerHeight(),g=l-i-j.top-j.options.bottom-k-o,g=g<0?g+j.top:j.top),j.boundary&&j.boundary.length){var q=j.boundary.offset().top;h=j.boundtoparent?l-(q+j.boundary.outerHeight())+parseInt(j.boundary.css("padding-bottom")):l-q,g=k+i>l-h-(j.top<0?0:j.top)?l-h-(k+i):g}if(j.currentTop!=g){if(j.element.css({position:"fixed",top:g,width:j.getWidthFrom.length?j.getWidthFrom.width():j.element.width()}),!j.init&&(j.element.addClass(j.options.clsinit),location.hash&&k>0&&j.options.target)){var r=a.$(location.hash);r.length&&setTimeout(function(a,b){return function(){b.element.width();var c=a.offset(),d=c.top+a.outerHeight(),e=b.element.offset(),f=b.element.outerHeight(),g=e.top+f;e.top<d&&c.top<g&&(k=c.top-f-b.options.target,window.scrollTo(0,k))}}(r,j),0)}j.element.addClass(j.options.clsactive).removeClass(j.options.clsinactive),j.element.trigger("active.uk.sticky"),j.element.css("margin",""),j.options.animation&&j.init&&!a.Utils.isInView(j.wrapper)&&j.element.addClass(j.options.animation),j.currentTop=g}}else null!==j.currentTop&&j.reset();j.init=!0}}var c=a.$win,d=a.$doc,e=[],f=1;return a.component("sticky",{defaults:{top:0,bottom:0,animation:"",clsinit:"uk-sticky-init",clsactive:"uk-active",clsinactive:"",getWidthFrom:"",showup:!1,boundary:!1,media:!1,target:!1,disabled:!1},boot:function(){a.$doc.on("scrolling.uk.document",function(a,c){c&&c.dir&&(f=c.dir.y,b())}),a.$win.on("resize orientationchange",a.Utils.debounce(function(){if(e.length){for(var a=0;a<e.length;a++)e[a].reset(!0);b()}},100)),a.ready(function(c){setTimeout(function(){a.$("[data-uk-sticky]",c).each(function(){var b=a.$(this);b.data("sticky")||a.sticky(b,a.Utils.options(b.attr("data-uk-sticky")))}),b()},0)})},init:function(){var b,g=this.options.boundary;this.wrapper=this.element.wrap('<div class="uk-sticky-placeholder"></div>').parent(),this.computeWrapper(),this.element.css("margin",0),g&&(g===!0||"!"===g[0]?(g=g===!0?this.wrapper.parent():this.wrapper.closest(g.substr(1)),b=!0):"string"==typeof g&&(g=a.$(g))),this.sticky={self:this,options:this.options,element:this.element,currentTop:null,wrapper:this.wrapper,init:!1,getWidthFrom:a.$(this.options.getWidthFrom||this.wrapper),boundary:g,boundtoparent:b,top:0,calcTop:function(){var b=this.options.top;if(this.options.top&&"string"==typeof this.options.top)if(this.options.top.match(/^(-|)(\d+)vh$/))b=window.innerHeight*parseInt(this.options.top,10)/100;else{var c=a.$(this.options.top).first();c.length&&c.is(":visible")&&(b=-1*(c.offset().top+c.outerHeight()-this.wrapper.offset().top))}this.top=b},reset:function(b){this.calcTop();var c=function(){this.element.css({position:"",top:"",width:"",left:"",margin:"0"}),this.element.removeClass([this.options.animation,"uk-animation-reverse",this.options.clsactive].join(" ")),this.element.addClass(this.options.clsinactive),this.element.trigger("inactive.uk.sticky"),this.currentTop=null,this.animate=!1}.bind(this);!b&&this.options.animation&&a.support.animation&&!a.Utils.isInView(this.wrapper)?(this.animate=!0,this.element.removeClass(this.options.animation).one(a.support.animation.end,function(){c()}).width(),this.element.addClass(this.options.animation+" uk-animation-reverse")):c()},check:function(){if(this.options.disabled)return!1;if(this.options.media)switch(typeof this.options.media){case"number":if(window.innerWidth<this.options.media)return!1;break;case"string":if(window.matchMedia&&!window.matchMedia(this.options.media).matches)return!1}var b=c.scrollTop(),e=d.height(),g=e-window.innerHeight,h=b>g?g-b:0,i=this.wrapper.offset().top,j=i-this.top-h,k=b>=j;return k&&this.options.showup&&(1==f&&(k=!1),f==-1&&!this.element.hasClass(this.options.clsactive)&&a.Utils.isInView(this.wrapper)&&(k=!1)),k}},this.sticky.calcTop(),e.push(this.sticky)},update:function(){b(this.sticky)},enable:function(){this.options.disabled=!1,this.update()},disable:function(a){this.options.disabled=!0,this.sticky.reset(a)},computeWrapper:function(){this.wrapper.css({height:["absolute","fixed"].indexOf(this.element.css("position"))==-1?this.element.outerHeight():"","float":"none"!=this.element.css("float")?this.element.css("float"):"",margin:this.element.css("margin")}),"fixed"==this.element.css("position")&&this.element.css({width:this.sticky.getWidthFrom.length?this.sticky.getWidthFrom.width():this.element.width()})}}),a.sticky}),window.webix||(webix={}),webix.version="3.3.17",webix.codebase="./",webix.name="core",webix.cdn="//cdn.webix.com",webix.clone=function(a){var b=webix.clone.a;return b.prototype=a,new b},webix.clone.a=function(){},webix.extend=function(a,b,c){if(a.$protoWait)return webix.PowerArray.insertAt.call(a.$protoWait,b,1),a;for(var d in b)(!a[d]||c)&&(a[d]=b[d]);return b.defaults&&webix.extend(a.defaults,b.defaults),b.$init&&b.$init.call(a),a},webix.copy=function(a){var b;arguments.length>1?(b=arguments[0],a=arguments[1]):b=webix.isArray(a)?[]:{};for(var c in a){var d=a[c];d&&"object"==typeof d?webix.isDate(d)?b[c]=new Date(d):(b[c]=webix.isArray(d)?[]:{},webix.copy(b[c],d)):b[c]=d}return b},webix.single=function(a){var b=null,c=function(c){return b||(b=new a({})),b.c&&b.c.apply(b,arguments),b};return c},webix.protoUI=function(){var a=arguments,b=a[0].name,c=function(a){if(!c)return webix.ui[b].prototype;var d=c.$protoWait;if(d){for(var e=[d[0]],f=1;f<d.length;f++)e[f]=d[f],e[f].$protoWait&&(e[f]=e[f].call(webix,e[f].name)),e[f].prototype&&e[f].prototype.name&&(webix.ui[e[f].prototype.name]=e[f]);if(webix.ui[b]=webix.proto.apply(webix,e),c.d)for(var f=0;f<c.d.length;f++)webix.type(webix.ui[b],c.d[f]);c=d=null}return this!=webix?new webix.ui[b](a):webix.ui[b]};return c.$protoWait=Array.prototype.slice.call(arguments,0),webix.ui[b]=c},webix.proto=function(){for(var a=arguments,b=a[0],c=!!b.$init,d=[],e=a.length-1;e>0;e--){if("function"==typeof a[e]&&(a[e]=a[e].prototype),a[e].$init&&d.push(a[e].$init),a[e].defaults){var f=a[e].defaults;b.defaults||(b.defaults={});for(var g in f)webix.isUndefined(b.defaults[g])&&(b.defaults[g]=f[g])}if(a[e].type&&b.type)for(var g in a[e].type)b.type[g]||(b.type[g]=a[e].type[g]);for(var h in a[e])b[h]||b[h]===!1||(b[h]=a[e][h])}c&&d.push(b.$init),b.$init=function(){for(var a=0;a<d.length;a++)d[a].apply(this,arguments)},b.$skin&&b.$skin();var i=function(a){this.$ready=[],this.$init(a),this.e&&this.e(a,this.defaults);for(var b=0;b<this.$ready.length;b++)this.$ready[b].call(this)};return i.prototype=b,b=a=null,i},webix.bind=function(a,b){return function(){return a.apply(b,arguments)}},webix.require=function(a,b,c){var d=webix.promise.defer();if(b&&b!==!0&&(d=d.then(function(){b.call(c||this)})),webix.require.disabled)return d.resolve(),d;if("string"==typeof a){if(webix.f[a]!==!0){var e=a;if(a.toString().match(/^([a-z]+\:)*\/\//i)||(e=webix.codebase+a),".css"==a.substr(a.length-4)){var f=webix.html.create("LINK",{type:"text/css",rel:"stylesheet",href:e});return document.getElementsByTagName("head")[0].appendChild(f),d.resolve(),d}b===!0?(webix.exec(webix.ajax().sync().get(e).responseText),webix.f[a]=!0):webix.f[a]?webix.f[a].push(d):(webix.f[a]=[d],webix.ajax(e,function(b){webix.exec(b);var c=webix.f[a];webix.f[a]=!0;for(var d=0;d<c.length;d++)c[d].resolve()}))}else d.resolve();return d}var g=a.length||0;if(g){var h=function(){g?(g--,webix.require(a[a.length-g-1],h,c)):d.resolve()};h()}else{for(var i in a)g++;var h=function(){g--,0===g&&d.resolve()};for(var i in a)webix.require(i,h,c)}},webix.f={},webix.exec=function(a){window.execScript?window.execScript(a):window.eval(a)},webix.wrap=function(a,b){return a?function(){var c=a.apply(this,arguments);return b.apply(this,arguments),c}:b},webix.isUndefined=function(a){return"undefined"==typeof a},webix.delay=function(a,b,c,d){return window.setTimeout(function(){if(!b||!b.$destructed){var d=a.apply(b,c||[]);return a=b=c=null,d}},d||1)},webix.once=function(a){var b=!0;return function(){b&&(b=!1,a.apply(this,arguments))}},webix.uid=function(){return this.g||(this.g=(new Date).valueOf()),this.g++,this.g},webix.toNode=function(a){return"string"==typeof a?document.getElementById(a):a},webix.toArray=function(a){return webix.extend(a||[],webix.PowerArray,!0)},webix.toFunctor=function(str,scope){if("string"==typeof str){var method=str.replace("()","");return scope&&scope[method]?scope[method]:window[method]||eval(str)}return str},webix.isArray=function(a){return Array.isArray?Array.isArray(a):"[object Array]"===Object.prototype.toString.call(a)},webix.isDate=function(a){return a instanceof Date},webix.h={},webix.event=function(a,b,c,d){d=d||{},a=webix.toNode(a);var e=d.id||webix.uid();return d.bind&&(c=webix.bind(c,d.bind)),webix.h[e]=[a,b,c],a.addEventListener?a.addEventListener(b,c,!!d.capture):a.attachEvent&&a.attachEvent("on"+b,webix.h[e][2]=function(){return c.apply(a,arguments)}),e},webix.eventRemove=function(a){if(a){var b=webix.h[a];b[0].removeEventListener?b[0].removeEventListener(b[1],b[2],!1):b[0].detachEvent&&b[0].detachEvent("on"+b[1],b[2]),delete this.h[a]}},webix.EventSystem={$init:function(){this.i||(this.i={},this.j={},this.k={})},blockEvent:function(){this.i.l=!0},unblockEvent:function(){this.i.l=!1},mapEvent:function(a){webix.extend(this.k,a,!0)},on_setter:function(a){if(a)for(var b in a){var c=webix.toFunctor(a[b],this.$scope),d=b.indexOf("->");-1!==d?this[b.substr(0,d)].attachEvent(b.substr(d+2),webix.bind(c,this)):this.attachEvent(b,c)}},callEvent:function(a,b){if(this.i.l)return!0;a=a.toLowerCase();var c=this.i[a.toLowerCase()],d=!0;if(c)for(var e=0;e<c.length;e++)c[e].apply(this,b||[])===!1&&(d=!1);if(this.k[a]){var f=this.k[a];f.$eventSource=this,f.callEvent(a,b)||(d=!1),f.$eventSource=null}return d},attachEvent:function(a,b,c){a=a.toLowerCase(),c=c||webix.uid(),b=webix.toFunctor(b,this.$scope);var d=this.i[a]||webix.toArray();return arguments[3]?d.unshift(b):d.push(b),this.i[a]=d,this.j[c]={f:b,t:a},c},detachEvent:function(a){if(this.j[a]){var b=this.j[a].t,c=this.j[a].f,d=this.i[b];d.remove(c),delete this.j[a]}},hasEvent:function(a){a=a.toLowerCase();var b=this.i[a];return!(!b||!b.length)}},webix.extend(webix,webix.EventSystem,!0),webix.PowerArray={removeAt:function(a,b){a>=0&&this.splice(a,b||1)},remove:function(a){this.removeAt(this.find(a))},insertAt:function(a,b){if(b||0===b){var c=this.splice(b,this.length-b);this[b]=a,this.push.apply(this,c)}else this.push(a)},find:function(a){for(var b=0;b<this.length;b++)if(a==this[b])return b;return-1},each:function(a,b){for(var c=0;c<this.length;c++)a.call(b||this,this[c])},map:function(a,b){for(var c=0;c<this.length;c++)this[c]=a.call(b||this,this[c]);return this},filter:function(a,b){for(var c=0;c<this.length;c++)a.call(b||this,this[c])||(this.splice(c,1),c--);return this}},webix.env={},function(){if(webix.env.strict=!!window.webix_strict,webix.env.https="https:"===document.location.protocol,(-1!=navigator.userAgent.indexOf("Mobile")||-1!=navigator.userAgent.indexOf("Windows Phone"))&&(webix.env.mobile=!0),(webix.env.mobile||-1!=navigator.userAgent.indexOf("iPad")||-1!=navigator.userAgent.indexOf("Android"))&&(webix.env.touch=!0),-1!=navigator.userAgent.indexOf("Opera"))webix.env.isOpera=!0;else{if(webix.env.isIE=!!document.all||-1!==navigator.userAgent.indexOf("Trident"),webix.env.isIE){var a=parseFloat(navigator.appVersion.split("MSIE")[1]);8==a&&(webix.env.isIE8=!0)}webix.env.isEdge=-1!=navigator.userAgent.indexOf("Edge"),webix.env.isFF=-1!=navigator.userAgent.indexOf("Firefox"),webix.env.isWebKit=-1!=navigator.userAgent.indexOf("KHTML"),webix.env.isSafari=webix.env.isWebKit&&-1!=navigator.userAgent.indexOf("Mac")}-1!=navigator.userAgent.toLowerCase().indexOf("android")&&(webix.env.isAndroid=!0,navigator.userAgent.toLowerCase().indexOf("trident")&&(webix.env.isAndroid=!1,webix.env.isIEMobile=!0)),webix.env.transform=!1,webix.env.transition=!1;for(var b=-1,c=["","webkit","Moz","O","ms"],d=["","-webkit-","-Moz-","-o-","-ms-"],e=document.createElement("DIV"),f=0;f<c.length;f++){var g=c[f]?c[f]+"Transform":"transform";if("undefined"!=typeof e.style[g]){b=f;break}}if(b>-1){webix.env.cssPrefix=d[b];var h=webix.env.jsPrefix=c[b];webix.env.transform=h?h+"Transform":"transform",webix.env.transition=h?h+"Transition":"transition",webix.env.transitionDuration=h?h+"TransitionDuration":"transitionDuration",e.style[webix.env.transform]="translate3d(0,0,0)",webix.env.translate=e.style[webix.env.transform]?"translate3d":"translate",webix.env.transitionEnd="-Moz-"==webix.env.cssPrefix?"transitionend":h?h+"TransitionEnd":"transitionend"}webix.env.pointerevents=!webix.env.isIE||null!==new RegExp("Trident/.*rv:11").exec(navigator.userAgent)}(),webix.env.svg=function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}(),webix.html={m:0,denySelect:function(){webix.m||(webix.m=document.onselectstart),document.onselectstart=webix.html.stopEvent},allowSelect:function(){0!==webix.m&&(document.onselectstart=webix.m||null),webix.m=0},index:function(a){for(var b=0;a=a.previousSibling;)b++;return b},n:{},createCss:function(a,b){var c="";b=b||"";for(var d in a)c+=d+":"+a[d]+";";var e=this.n[c+b];return e||(e="s"+webix.uid(),this.addStyle("."+e+(b||"")+"{"+c+"}"),this.n[c+b]=e),e},addStyle:function(a){var b=this.ky;b||(b=this.ky=document.createElement("style"),b.setAttribute("type","text/css"),b.setAttribute("media","screen"),document.getElementsByTagName("head")[0].appendChild(b)),b.styleSheet?b.styleSheet.cssText+=a:b.appendChild(document.createTextNode(a))},create:function(a,b,c){b=b||{};var d=document.createElement(a);for(var e in b)d.setAttribute(e,b[e]);return b.style&&(d.style.cssText=b.style),b["class"]&&(d.className=b["class"]),c&&(d.innerHTML=c),d},getValue:function(a){return a=webix.toNode(a),a?webix.isUndefined(a.value)?a.innerHTML:a.value:""},remove:function(a){if(a instanceof Array)for(var b=0;b<a.length;b++)this.remove(a[b]);else a&&a.parentNode&&a.parentNode.removeChild(a)},insertBefore:function(a,b,c){a&&(b&&b.parentNode?b.parentNode.insertBefore(a,b):c.appendChild(a))},locate:function(a,b){var c;for(a.tagName?c=a:(a=a||event,c=a.target||a.srcElement);c;){if(c.getAttribute){var d=c.getAttribute(b);if(d)return d}c=c.parentNode}return null},offset:function(a){if(a.getBoundingClientRect){var b=a.getBoundingClientRect(),c=document.body,d=document.documentElement,e=window.pageYOffset||d.scrollTop||c.scrollTop,f=window.pageXOffset||d.scrollLeft||c.scrollLeft,g=d.clientTop||c.clientTop||0,h=d.clientLeft||c.clientLeft||0,i=b.top+e-g,j=b.left+f-h;return{y:Math.round(i),x:Math.round(j),width:a.offsetWidth,height:a.offsetHeight}}for(var i=0,j=0;a;)i+=parseInt(a.offsetTop,10),j+=parseInt(a.offsetLeft,10),a=a.offsetParent;return{y:i,x:j,width:a.offsetHeight,height:a.offsetWidth}},posRelative:function(a){return a=a||event,webix.isUndefined(a.offsetX)?{x:a.layerX,y:a.layerY}:{x:a.offsetX,y:a.offsetY}},pos:function(a){if(a=a||event,a.touches&&a.touches[0]&&(a=a.touches[0]),a.pageX||a.pageY)return{x:a.pageX,y:a.pageY};var b=webix.env.isIE&&"BackCompat"!=document.compatMode?document.documentElement:document.body;return{x:a.clientX+b.scrollLeft-b.clientLeft,y:a.clientY+b.scrollTop-b.clientTop}},preventEvent:function(a){return a&&a.preventDefault&&a.preventDefault(),a&&(a.returnValue=!1),webix.html.stopEvent(a)},stopEvent:function(a){return a=a||event,a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0,!1},addCss:function(a,b,c){c&&-1!==a.className.indexOf(b)||(a.className+=" "+b)},removeCss:function(a,b){a.className=a.className.replace(RegExp(" "+b,"g"),"")},getTextSize:function(a,b){var c=webix.html.create("DIV",{"class":"webix_view webix_measure_size "+(b||"")},"");c.style.cssText="width:1px; height:1px; visibility:hidden; position:absolute; top:0px; left:0px; overflow:hidden; white-space:nowrap;",document.body.appendChild(c);for(var d="object"!=typeof a?[a]:a,e=0,f=0,g=0;g<d.length;g++)c.innerHTML=d[g],e=Math.max(e,c.scrollWidth),f=Math.max(f,c.scrollHeight);return webix.html.remove(c),{width:e,height:f}},download:function(a,b){var c=!1;if("object"==typeof a){if(window.navigator.msSaveBlob)return window.navigator.msSaveBlob(a,b);if(webix.env.isSafari){var d=new FileReader;return d.onloadend=function(){var a=d.result;webix.html.download("data:attachment/file"+a.slice(a.search(/[,;]/)),b)},void d.readAsDataURL(a)}a=window.URL.createObjectURL(a),c=!0}var e=document.createElement("a");e.href=a,e.download=b,document.body.appendChild(e),e.click(),webix.delay(function(){c&&window.URL.revokeObjectURL(a),document.body.removeChild(e),e.remove()})},TC:function(a){if(!a)return"";var b=a.className||"";return b.baseVal&&(b=b.baseVal),b.indexOf||(b=""),b}},webix.ready=function(a){this.o?a.call():this.p.push(a)},webix.p=[],function(){var a=document.getElementsByTagName("SCRIPT");a.length&&(a=(a[a.length-1].getAttribute("src")||"").split("/"),a.splice(a.length-1,1),webix.codebase=a.slice(0,a.length).join("/")+"/");var b=function(){webix.env.isIE&&(document.body.className+=" webix_ie"),webix.callEvent("onReady",[])},c=function(){webix.o=!0,window.webix_ready&&webix.isArray(webix_ready)&&(webix.p=webix_ready.concat(webix.p));for(var a=0;a<webix.p.length;a++)webix.p[a].call();webix.p=[]};webix.attachEvent("onReady",function(a){a?c():webix.delay(c)}),"complete"==document.readyState?b():webix.event(window,"load",b)}(),webix.locale=webix.locale||{},webix.ready(function(){webix.event(document.body,"click",function(a){webix.callEvent("onClick",[a||event])})}),webix.editStop=function(){webix.callEvent("onEditEnd",[])},function(a){function b(a,b){var c=this;c.promise=c,c.state="pending",c.val=null,c.fn=a||null,c.er=b||null,c.next=[]}var c="undefined"!=typeof setImmediate?setImmediate:function(a){setTimeout(a,0)};b.prototype.resolve=function(a){var b=this;"pending"===b.state&&(b.val=a,b.state="resolving",c(function(){b.fire()}))},b.prototype.reject=function(a){var b=this;"pending"===b.state&&(b.val=a,b.state="rejecting",c(function(){b.fire()}))},b.prototype.then=function(a,c){var d=this,e=new b(a,c);return d.next.push(e),"resolved"===d.state&&e.resolve(d.val),"rejected"===d.state&&e.reject(d.val),e},b.prototype.fail=function(a){return this.then(null,a)},b.prototype.finish=function(a){var b=this;if(b.state=a,"resolved"===b.state)for(var c=0;c<b.next.length;c++)b.next[c].resolve(b.val);
if("rejected"===b.state){for(var c=0;c<b.next.length;c++)b.next[c].reject(b.val);if(webix.assert&&!b.next.length)throw b.val}},b.prototype.thennable=function(a,b,c,d,e){var f=this;if(e=e||f.val,"object"==typeof e&&"function"==typeof a)try{var g=0;a.call(e,function(a){0===g++&&b(a)},function(a){0===g++&&c(a)})}catch(h){c(h)}else d(e)},b.prototype.fire=function(){var a,b=this;try{a=b.val&&b.val.then}catch(c){return b.val=c,b.state="rejecting",b.fire()}b.thennable(a,function(a){b.val=a,b.state="resolving",b.fire()},function(a){b.val=a,b.state="rejecting",b.fire()},function(c){if(b.val=c,"resolving"===b.state&&"function"==typeof b.fn)try{b.val=b.fn.call(void 0,b.val)}catch(d){return b.val=d,b.finish("rejected")}if("rejecting"===b.state&&"function"==typeof b.er)try{b.val=b.er.call(void 0,b.val),b.state="resolving"}catch(d){return b.val=d,b.finish("rejected")}return b.val===b?(b.val=TypeError(),b.finish("rejected")):void b.thennable(a,function(a){b.val=a,b.finish("resolved")},function(a){b.val=a,b.finish("rejected")},function(a){b.val=a,"resolving"===b.state?b.finish("resolved"):b.finish("rejected")})})},b.prototype.done=function(){if(this.state=!this.next)throw this.val;return null},b.prototype.nodeify=function(a){return"function"==typeof a?this.then(function(b){try{a(null,b)}catch(c){setImmediate(function(){throw c})}return b},function(b){try{a(b)}catch(c){setImmediate(function(){throw c})}return b}):this},b.prototype.spread=function(a,b){return this.all().then(function(b){return"function"==typeof a&&a.apply(null,b)},b)},b.prototype.all=function(){var a=this;return this.then(function(c){function d(){++f===g&&e.resolve(c)}var e=new b;if(!(c instanceof Array))return e.reject(TypeError),e;for(var f=0,g=c.length,h=0,i=c.length;i>h;h++){var j,k=c[h];try{j=k&&k.then}catch(l){e.reject(l);break}!function(b){a.thennable(j,function(a){c[b]=a,d()},function(a){c[b]=a,d()},function(){d()},k)}(h)}return e})};var d={all:function(a){var c=new b(null,null);return c.resolve(a),c.all()},defer:function(){return new b(null,null)},fcall:function(){var a=new b,c=Array.apply([],arguments),d=c.shift();try{var e=d.apply(null,c);a.resolve(e)}catch(f){a.reject(f)}return a},nfcall:function(){var a=new b,c=Array.apply([],arguments),d=c.shift();try{c.push(function(b,c){return b?a.reject(b):a.resolve(c)}),d.apply(null,c)}catch(e){a.reject(e)}return a}};a.promise=d}(webix),function(){function a(a,c,d){var e={name:c,data:d,key:i},g=webix.promise.defer();return k.push([a,e,g]),h||(h=setTimeout(b,1)),g.sync=function(){return e.sync=!0,f(a,e)},g}function b(){for(var a=[],b=[],c="",d=0;d<k.length;d++){var f=k[d];f[1].sync||(j.multicall?(c=f[0],a.push(f[1]),b.push(f)):e.apply(this,f))}k=[],h=!1,j.multicall&&a.length&&e(c,{data:a,key:i,multicall:!0},b)}function c(a,b){if(j.multicall)for(var c=0;c<a.length;c++)a[c][2].resolve(b[c]);else a.resolve(b)}function d(a,b){if(j.multicall)for(var c=0;c<a.length;c++)a[c][2].reject(b);else a.reject(b)}function e(a,b,e){var f=webix.ajax();b.data=f.stringify(b.data),f.post(a,b).then(function(a){var b=g(a.text());b?c(e,b.data):d(e,a.text())},function(a){d(e,a)}),webix.callEvent("onRemoteCall",[e,b])}function f(a,b,c){var d=webix.ajax();return webix.callEvent("onRemoteCall",[null,b]),b.data=d.stringify(b.data),g(d.sync().post(a,b).responseText).data}function g(a){return webix.DataDriver.json.toObject.call(j,a)}var h,i="",j={timeout:30,parseDates:!0,multicall:!0},k=[],l=webix.remote=function(a,b,c,d){if(!b){var e=document.getElementsByTagName("script");b=e[e.length-1].src}c=c||l,d=d||"";for(var f in a)if("$key"==f)i=a.$key;else if(0===f.indexOf("$"))l[f]=a[f];else if("object"==typeof a[f]){var g=c[f]={};l(a[f],b,g,f+".")}else c[f]=m(b,d+f)},m=function(b,c){return function(){return a(b,c,[].splice.call(arguments,0))}};l.config=j,l.flush=b}(),webix.skin={},webix.skin.air={topLayout:"wide",barHeight:34,tabbarHeight:36,rowHeight:34,toolbarHeight:22,listItemHeight:28,inputHeight:34,inputPadding:2,menuHeight:34,menuMargin:0,labelTopHeight:16,layoutMargin:{space:10,wide:4,clean:0,head:4,line:-1,toolbar:4,form:8},layoutPadding:{space:10,wide:0,clean:0,head:0,line:0,toolbar:4,form:8},tabMargin:0,calendarHeight:70,padding:0,optionHeight:27},webix.skin.aircompact={topLayout:"wide",barHeight:24,tabbarHeight:26,rowHeight:26,toolbarHeight:22,listItemHeight:28,inputHeight:29,inputPadding:2,menuHeight:25,menuMargin:0,labelTopHeight:16,layoutMargin:{space:10,wide:4,clean:0,head:4,line:-1,toolbar:4,form:8},layoutPadding:{space:10,wide:0,clean:0,head:0,line:0,toolbar:4,form:8},tabMargin:0,calendarHeight:70,padding:0,optionHeight:23},webix.skin.web={name:"web",topLayout:"space",barHeight:28,tabbarHeight:30,rowHeight:30,toolbarHeight:22,listItemHeight:28,inputHeight:28,inputPadding:2,menuMargin:0,menuHeight:27,labelTopHeight:16,layoutMargin:{space:10,wide:4,clean:0,head:4,line:-1,toolbar:4,form:8,accordion:9},layoutPadding:{space:10,wide:0,clean:0,head:0,line:0,toolbar:4,form:8,accordion:0},tabMargin:3,tabTopOffset:3,calendarHeight:70,padding:0,optionHeight:22},webix.skin.clouds={topLayout:"wide",barHeight:36,tabbarHeight:46,rowHeight:34,toolbarHeight:22,listItemHeight:32,inputHeight:30,inputPadding:2,menuHeight:34,labelTopHeight:16,layoutMargin:{space:10,wide:4,clean:0,head:4,line:-1,toolbar:4,form:8},layoutPadding:{space:10,wide:0,clean:0,head:0,line:0,toolbar:4,form:8},tabMargin:2,tabOffset:0,tabBottomOffset:10,calendarHeight:70,padding:0},webix.skin.terrace={topLayout:"space",barHeight:37,tabbarHeight:39,rowHeight:38,toolbarHeight:22,listItemHeight:28,inputHeight:30,inputPadding:2,menuMargin:0,menuHeight:32,labelTopHeight:16,layoutMargin:{space:20,wide:20,clean:0,head:4,line:-1,toolbar:4,form:8},layoutPadding:{space:20,wide:0,clean:0,head:0,line:0,toolbar:4,form:8},tabMargin:2,tabOffset:0,calendarHeight:70,padding:17,optionHeight:24},webix.skin.metro={topLayout:"space",barHeight:36,tabbarHeight:46,rowHeight:34,toolbarHeight:36,listItemHeight:32,inputHeight:30,buttonHeight:45,inputPadding:2,menuHeight:36,labelTopHeight:16,layoutMargin:{space:10,wide:4,clean:0,head:4,line:-1,toolbar:4,form:8,accordion:9},layoutPadding:{space:10,wide:0,clean:0,head:0,line:0,toolbar:0,form:8,accordion:0},tabMargin:2,tabOffset:0,tabBottomOffset:10,calendarHeight:70,padding:0,optionHeight:23},webix.skin.light={topLayout:"space",barHeight:36,tabbarHeight:46,rowHeight:32,toolbarHeight:36,listItemHeight:32,inputHeight:34,buttonHeight:45,inputPadding:3,menuHeight:36,labelTopHeight:16,layoutMargin:{space:15,wide:15,clean:0,head:4,line:-1,toolbar:4,form:8,accordion:10},layoutPadding:{space:15,wide:0,clean:0,head:0,line:0,toolbar:0,form:8,accordion:0},tabMargin:2,tabOffset:0,tabBottomOffset:10,calendarHeight:70,padding:0,optionHeight:27},webix.skin.glamour={topLayout:"space",barHeight:39,tabbarHeight:39,rowHeight:32,toolbarHeight:39,listItemHeight:32,inputHeight:34,buttonHeight:34,inputPadding:3,menuHeight:36,labelTopHeight:16,layoutMargin:{space:15,wide:15,clean:0,head:4,line:-1,toolbar:4,form:8,accordion:10},layoutPadding:{space:15,wide:0,clean:0,head:0,line:0,toolbar:3,form:8,accordion:0},tabMargin:1,tabOffset:0,tabBottomOffset:1,calendarHeight:70,padding:0,optionHeight:27},webix.skin.touch={topLayout:"space",barHeight:42,tabbarHeight:50,rowHeight:42,toolbarHeight:42,listItemHeight:42,inputHeight:42,inputPadding:4,menuHeight:42,labelTopHeight:24,unitHeaderHeight:34,layoutMargin:{space:10,wide:4,clean:0,head:4,line:-1,toolbar:0,form:0,accordion:9},layoutPadding:{space:10,wide:0,clean:0,head:0,line:0,toolbar:4,form:8,accordion:0},tabMargin:2,tabOffset:0,tabBottomOffset:10,calendar:{headerHeight:70,timepickerHeight:35,height:310,width:300},padding:0,customCheckbox:!0,customRadio:!0,optionHeight:32},webix.skin.flat={topLayout:"space",barHeight:46,tabbarHeight:46,rowHeight:34,toolbarHeight:46,listItemHeight:34,inputHeight:38,buttonHeight:38,inputPadding:3,menuHeight:34,labelTopHeight:22,propertyItemHeight:28,layoutMargin:{space:10,wide:10,clean:0,head:4,line:-1,toolbar:4,form:8,accordion:10},layoutPadding:{space:10,wide:0,clean:0,head:0,line:0,toolbar:4,form:17,accordion:0},tabMargin:4,tabOffset:0,tabBottomOffset:6,tabTopOffset:1,customCheckbox:!0,customRadio:!0,calendarHeight:70,padding:0,accordionType:"accordion",optionHeight:32},webix.skin.compact={topLayout:"space",barHeight:34,tabbarHeight:34,rowHeight:24,toolbarHeight:34,listItemHeight:28,inputHeight:30,buttonHeight:30,inputPadding:3,menuHeight:28,labelTopHeight:16,layoutMargin:{space:5,wide:5,clean:0,head:4,line:-1,toolbar:4,form:4,accordion:5},layoutPadding:{space:5,wide:0,clean:0,head:0,line:0,toolbar:2,form:12,accordion:0},tabMargin:3,tabOffset:0,tabBottomOffset:3,tabTopOffset:1,customCheckbox:!0,customRadio:!0,calendarHeight:70,padding:0,accordionType:"accordion",optionHeight:23},webix.skin.material={topLayout:"space",barHeight:45,tabbarHeight:47,rowHeight:38,toolbarHeight:22,listItemHeight:34,inputHeight:38,buttonHeight:38,inputPadding:2,menuMargin:0,menuHeight:34,labelTopHeight:16,propertyItemHeight:34,layoutMargin:{material:10,space:10,wide:10,clean:0,head:4,line:-1,toolbar:4,form:16,accordion:0},layoutPadding:{material:10,space:10,wide:0,clean:0,head:0,line:0,toolbar:4,form:16,accordion:0},tabMargin:0,tabOffset:0,tabBottomOffset:0,tabTopOffset:0,customCheckbox:!0,customRadio:!0,calendarHeight:70,padding:0,accordionType:"accordion"},webix.skin.set=function(a){if(webix.skin.$active=webix.skin[a],webix.skin.$name=a,webix.ui)for(var b in webix.ui){var c=webix.ui[b];c&&c.prototype&&c.prototype.$skin&&c.prototype.$skin(c.prototype)}},webix.skin.set(window.webix_skin||"flat"),webix.Destruction={$init:function(){webix.destructors.push(this)},destructor:function(){var a=this.s;if(this.di&&this.editCancel(),this.callEvent&&this.callEvent("onDestruct",[]),this.destructor=function(){},this.getChildViews){var b=this.getChildViews();if(b)for(var c=0;c<b.length;c++)b[c].destructor();if(this.Ns)for(var c=0;c<this.Ns.length;c++)this.Ns[c].destructor()}if(delete webix.ui.views[a.id],a.$id){var d=this.getTopParentView();d&&d.oC&&d.oC(a.$id)}this.t=null,this.u=null,this.v=null,this.w&&(this.w.innerHTML="",this.w.t=null),this.x&&this.x.parentNode&&this.x.parentNode.removeChild(this.x),this.data&&this.data.destructor&&this.data.destructor(),this.unbind&&this.unbind(),this.data=null,this.x=this.$view=this.w=this.y=null,this.i=this.j={},webix.UIManager.A==this&&(webix.UIManager.A=null);var e=a.url;e&&e.$proxy&&e.release&&e.release(),this.$scope=null,this.$destructed=!0}},webix.destructors=[],webix.event(window,"unload",function(){webix.callEvent("unload",[]),webix.B=!0;for(var a=0;a<webix.destructors.length;a++)webix.destructors[a].destructor();webix.destructors=[],webix.ui.et=webix.toArray();for(var b in webix.h){var c=webix.h[b];c[0].removeEventListener?c[0].removeEventListener(c[1],c[2],!1):c[0].detachEvent&&c[0].detachEvent("on"+c[1],c[2]),delete webix.h[b]}}),function(){var a={},b={},c=new RegExp("(\\r\\n|\\n)","g"),d=new RegExp('(\\")',"g"),e=new RegExp("(\\\\)","g"),f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},g=/[&<>"'`]/g,h=function(a){return f[a]||"&amp;"};webix.template=function(f){if("function"==typeof f)return f;if(a[f])return a[f];if(f=(f||"").toString(),-1!=f.indexOf("->")){var g=f.split("->");switch(g[0]){case"html":f=webix.html.getValue(g[1]);break;case"http":f=(new webix.ajax).sync().get(g[1],{uid:webix.uid()}).responseText}}if(f=(f||"").toString(),webix.env.strict){if(!b[f]){b[f]=[];var h=[];if(f.replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g,function(a,b,c,d,e){h.push({pos:e,str:a,fn:function(a,e){return a[b]?c:d}})}),f.replace(/\{common\.([^}\(]*)\}/g,function(a,b,c){h.push({pos:c,str:a,fn:function(a,c){return c[b]||""}})}),f.replace(/\{common\.([^\}\(]*)\(\)\}/g,function(a,b,c){h.push({pos:c,str:a,fn:function(a,c){return c[b]?c[b].apply(this,arguments):""}})}),f.replace(/\{obj\.([^:}]*)\}/g,function(a,b,c){h.push({pos:c,str:a,fn:function(a,c){return a[b]}})}),f.replace("{obj}",function(a,b,c){h.push({pos:c,str:a,fn:function(a,b){return a}})}),f.replace(/#([^#'";, ]+)#/gi,function(a,b,c){"!"==b.charAt(0)?h.push({pos:c,str:a,fn:function(a,c){return b=b.substr(1),-1!=b.indexOf(".")&&(a=webix.CodeParser.collapseNames(a)),webix.template.escape(a[b.substr(1)])}}):h.push({pos:c,str:a,fn:function(a,c){return-1!=b.indexOf(".")&&(a=webix.CodeParser.collapseNames(a)),a[b]}})}),h.sort(function(a,b){return a.pos>b.pos?1:-1}),h.length){for(var i=0,j=function(a,c,d){b[a].push(function(){return a.slice(c,d)})},k=0;k<h.length;k++){var l=h[k].pos;j(f,i,l),b[f].push(h[k].fn),i=l+h[k].str.length}j(f,i,f.length)}else b[f].push(function(){return f})}return function(){for(var a="",c=0;c<b[f].length;c++)a+=b[f][c].apply(this,arguments);return a}}f=f.replace(e,"\\\\"),f=f.replace(c,"\\n"),f=f.replace(d,'\\"'),f=f.replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g,'"+(obj.$1?"$2":"$3")+"'),f=f.replace(/\{common\.([^}\(]*)\}/g,"\"+(common.$1||'')+\""),f=f.replace(/\{common\.([^\}\(]*)\(\)\}/g,'"+(common.$1?common.$1.apply(this, arguments):"")+"'),f=f.replace(/\{obj\.([^}]*)\}/g,'"+(obj.$1)+"'),f=f.replace("{obj}",'"+obj+"'),f=f.replace(/#([^#'";, ]+)#/gi,function(a,b){return"!"==b.charAt(0)?'"+webix.template.escape(obj.'+b.substr(1)+')+"':'"+(obj.'+b+')+"'});try{a[f]=Function("obj","common",'return "'+f+'";')}catch(m){}return a[f]},webix.template.escape=function(a){return a===webix.undefined||null===a?"":(a.toString()||"").replace(g,h)},webix.template.empty=function(){return""},webix.template.bind=function(a){return webix.bind(webix.template(a),this)},webix.type=function(a,b){if(a.$protoWait)return a.d||(a.d=[]),void a.d.push(b);"function"==typeof a&&(a=a.prototype),a.types||(a.types={"default":a.type},a.type.name="default");var c=b.name,d=a.type;c&&(d=a.types[c]=webix.clone(b.baseType?a.types[b.baseType]:a.type));for(var e in b)0===e.indexOf("template")?d[e]=webix.template(b[e]):d[e]=b[e];return c}}(),webix.Settings={$init:function(){this.s=this.config={}},define:function(a,b){return"object"==typeof a?this.C(a):this.D(a,b)},D:function(a,b){var c=this[a+"_setter"];return this.s[a]=c?c.call(this,b,a):b},C:function(a){if(a)for(var b in a)this.D(b,a[b])},e:function(a,b){var c={};b&&(c=webix.extend(c,b)),"object"!=typeof a||a.tagName||webix.extend(c,a,!0),this.C(c)},E:function(a,b){for(var c in b)switch(typeof a[c]){case"object":a[c]=this.E(a[c]||{},b[c]);break;case"undefined":a[c]=b[c]}return a}},webix.proxy=function(a,b,c){var d=webix.copy(webix.proxy[a]);return d.source=b,c&&webix.extend(d,c,!0),d.init&&d.init(),d},webix.proxy.$parse=function(a){if("string"==typeof a&&-1!=a.indexOf("->")){var b=a.split("->");return webix.proxy(b[0],b[1])}return a},webix.proxy.post={$proxy:!0,load:function(a,b,c){c=webix.extend(c||{},this.params||{},!0),webix.ajax().bind(a).post(this.source,c,b)}},webix.proxy.sync={$proxy:!0,load:function(a,b){webix.ajax().sync().bind(a).get(this.source,null,b)}},webix.proxy.connector={$proxy:!0,connectorName:"!nativeeditor_status",load:function(a,b){webix.ajax(this.source,b,a)},saveAll:function(a,b,c,d){for(var e=this.source,f={},g=[],h=0;h<b.length;h++){var i=b[h];g.push(i.id);for(var j in i.data)0!==j.indexOf("$")&&(f[i.id+"_"+j]=i.data[j]);f[i.id+"_"+this.connectorName]=i.operation}f.ids=g.join(","),f.webix_security=webix.securityKey,e+=-1==e.indexOf("?")?"?":"&",e+="editing=true",webix.ajax().post(e,f,d)},result:function(a,b,c,d,e,f){if(e=e.xml(),!e)return c.yr(null,d,e,f);var g=e.data.action;g.length||(g=[g]);for(var h=[],i=0;i<g.length;i++){var j=g[i];h.push(j),j.status=j.type,j.id=j.sid,j.newid=j.tid,c.processResult(j,j,{text:d,data:e,loader:f})}return h}},webix.proxy.rest={$proxy:!0,load:function(a,b){webix.ajax(this.source,b,a)},save:function(a,b,c,d){return webix.proxy.rest.dC.call(this,a,b,c,d,webix.ajax())},dC:function(a,b,c,d,e){var f=this.source;f+="/"==f.charAt(f.length-1)?"":"/";var g=b.operation,h=b.data;"insert"==g&&delete h.id,"update"==g?e.put(f+h.id,h,d):"delete"==g?e.del(f+h.id,h,d):e.post(f,h,d)}},webix.proxy.json={$proxy:!0,load:function(a,b){webix.ajax(this.source,b,a)},save:function(a,b,c,d){var e=webix.ajax().headers({"Content-Type":"application/json"});return webix.proxy.rest.dC.call(this,a,b,c,d,e)}},webix.proxy.faye={$proxy:!0,init:function(){this.clientId=this.clientId||webix.uid()},load:function(a){var b=this.clientId;this.client.subscribe(this.source,function(c){c.clientId!=b&&webix.dp(a).ignore(function(){if("delete"==c.operation)a.remove(c.data.id);else if("insert"==c.operation)a.add(c.data);else if("update"==c.operation){var b=a.getItem(c.data.id);b&&(webix.extend(b,c.data,!0),a.refresh(b.id))}})})},save:function(a,b,c,d){b.clientId=this.clientId,this.client.publish(this.source,b)}},webix.proxy.indexdb={$proxy:!0,create:function(a,b,c,d){this.source=a+"/",this.F(d,c,function(a){var c=a.target.result;for(var d in b)for(var e=b[d],f=c.createObjectStore(d,{keyPath:"id",autoIncrement:!0}),g=0;g<e.length;g++)f.put(e[g])})},F:function(a,b,c){if(-1!=this.source.indexOf("/")){var d=this.source.split("/");this.source=d[1],b=b||d[2];var e,f=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB;e=b?f.open(d[0],b):f.open(d[0]),c&&(e.onupgradeneeded=c),e.onerror=function(){},e.onblocked=function(){},e.onsuccess=webix.bind(function(b){this.db=b.target.result,a&&a.call(this)},this)}else this.db?a.call(this):webix.delay(this.F,this,[a],50)},load:function(a,b){this.F(function(){var c=this.db.transaction(this.source).objectStore(this.source),d=[];c.openCursor().onsuccess=function(c){var e=c.target.result;e?(d.push(e.value),e["continue"]()):(a.parse(d),webix.ajax.$callback(a,b,"[]",d))}})},save:function(a,b,c,d){this.F(function(){var a,d=b.operation,e=b.data,f=b.id,g=this.db.transaction([this.source],"readwrite").objectStore(this.source);"delete"==d?a=g["delete"](f):"update"==d?a=g.put(e):"insert"==d&&(delete e.id,a=g.add(e)),a.onsuccess=function(a){var e={status:d,id:b.id};"insert"==d&&(e.newid=a.target.result),c.processResult(e,e)}})}},webix.proxy.binary={$proxy:!0,load:function(a,b){var c=this.source.split("@"),d=c[0].split(".").pop();return webix.ajax().response("arraybuffer").get(c[0]).then(function(e){var f={ext:d,dataurl:c[1]};webix.ajax.$callback(a,b,"",{data:e,options:f},-1)})}},webix.ajax=function(a,b,c){return 0!==arguments.length?(new webix.ajax).get(a,b,c):this.getXHR?this:new webix.ajax},webix.ajax.count=0,webix.ajax.prototype={master:null,getXHR:function(){return new XMLHttpRequest},stringify:function(a){var b=Date.prototype.toJSON;Date.prototype.toJSON=function(){return webix.i18n.parseFormatStr(this)};var c;return c=a instanceof Date?a.toJSON():JSON.stringify(a),Date.prototype.toJSON=b,c},G:function(a,b,c,d){var e;b&&(webix.isArray(b)||"function"==typeof(b.success||b.error||b))&&(e=c,c=b,b=null);var f=webix.promise.defer(),g=this.getXHR();webix.isArray(c)||(c=[c]),c.push({success:function(a,b){f.resolve(b)},error:function(a,b){f.reject(g)}});var h=this.I||{};if(webix.callEvent("onBeforeAjax",[d,a,b,g,h,null,f])){var i=!1;if("GET"!==d){var j=!1;for(var k in h)"content-type"==k.toString().toLowerCase()&&(j=!0,"application/json"==h[k]&&(i=!0));j||(h["Content-Type"]="application/x-www-form-urlencoded")}if("object"==typeof b)if(i)b=this.stringify(b);else{var l=[];for(var m in b){var n=b[m];(null===n||n===webix.undefined)&&(n=""),"object"==typeof n&&(n=this.stringify(n)),l.push(m+"="+encodeURIComponent(n))}b=l.join("&")}b&&"GET"===d&&(a=a+(-1!=a.indexOf("?")?"&":"?")+b,b=null),g.open(d,a,!this.H);var o=this.Tw;o&&(g.responseType=o);for(var k in h)g.setRequestHeader(k,h[k]);var p=this;return this.master=this.master||e,g.onreadystatechange=function(){if(!g.readyState||4==g.readyState){if(webix.ajax.count++,c&&p&&!g.aborted){if(-1!=webix.ly.find(g))return webix.ly.remove(g);var a,b,d=p.master||p,f=g.status>=400||0===g.status;"blob"==g.responseType||"arraybuffer"==g.responseType?(a="",b=g.response):(a=g.responseText||"",b=p.J(g)),webix.ajax.$callback(d,c,a,b,g,f)}p&&(p.master=null),c=p=e=null}},this.qh&&(g.timeout=this.qh),this.H?g.send(b||null):setTimeout(function(){g.aborted||(-1!=webix.ly.find(g)?webix.ly.remove(g):g.send(b||null))},1),this.master&&this.master.Ve&&this.master.Ve.push(g),this.H?g:f}},J:function(a){return{xml:function(){try{return webix.DataDriver.xml.tagToObject(webix.DataDriver.xml.toObject(a.responseText,this))}catch(b){}},rawxml:function(){return window.XPathResult?a.responseXML:webix.DataDriver.xml.fromString(a.responseText)},text:function(){return a.responseText},json:function(){try{return JSON.parse(a.responseText)}catch(b){}}}},get:function(a,b,c){return this.G(a,b,c,"GET")},post:function(a,b,c){return this.G(a,b,c,"POST")},put:function(a,b,c){return this.G(a,b,c,"PUT")},del:function(a,b,c){return this.G(a,b,c,"DELETE")},patch:function(a,b,c){return this.G(a,b,c,"PATCH")},sync:function(){return this.H=!0,this},timeout:function(a){return this.qh=a,this},response:function(a){return this.Tw=a,this},header:function(a){return this.I=a,this},headers:function(a){return this.I=webix.extend(this.I||{},a),this},bind:function(a){return this.master=a,this}},webix.ajax.$callback=function(a,b,c,d,e,f){if(!a.$destructed){if(-1===e&&d&&"function"==typeof d.json&&(d=d.json()),f&&webix.callEvent("onAjaxError",[e]),webix.isArray(b)||(b=[b]),!f)for(var g=0;g<b.length;g++)if(b[g]){var h=b[g].before;h&&h.call(a,c,d,e)}for(var g=0;g<b.length;g++)if(b[g]){var i=b[g].success||b[g];f&&(i=b[g].error),i&&i.call&&i.call(a,c,d,e)}}},webix.send=function(a,b,c,d){var e=webix.html.create("FORM",{target:d||"_self",action:a,method:c||"POST"},"");for(var f in b){var g=webix.html.create("INPUT",{type:"hidden",name:f,value:b[f]},"");e.appendChild(g)}e.style.display="none",document.body.appendChild(e),e.submit(),document.body.removeChild(e)},webix.AtomDataLoader={$init:function(a){this.data={},this.waitData=webix.promise.defer(),a&&(this.s.datatype=a.datatype||"json"),this.$ready.push(this.K)},K:function(){this.L=!0,this.s.url&&this.url_setter(this.s.url),this.s.data&&this.data_setter(this.s.data)},url_setter:function(a){return a=webix.proxy.$parse(a),this.L?(this.load(a,this.s.datatype),a):a},data_setter:function(a){return this.L?(this.parse(a,this.s.datatype),!0):a},load:function(a,b){var c=arguments[2]||null;this.callEvent("onBeforeLoad",[]),"string"==typeof b?(this.data.driver=webix.DataDriver[b],b=arguments[2]):this.data.driver||(this.data.driver=webix.DataDriver.json);var d=[{success:this.M,error:this.N}];return b&&(webix.isArray(b)?d.push.apply(d,b):d.push(b)),a=webix.proxy.$parse(a),a.$proxy&&a.load?a.load(this,d,c):"function"==typeof a?a(c).then(webix.bind(function(a){webix.ajax.$callback(this,d,"",a,-1)},this),webix.bind(function(a){webix.ajax.$callback(this,d,"",null,a,!0)},this)):webix.ajax(a,d,this)},parse:function(a,b){return a&&a.then&&"function"==typeof a.then?a.then(webix.bind(function(a){a&&"function"==typeof a.json&&(a=a.json()),this.parse(a,b)},this)):a&&a.sync&&this.sync?this.sync(a):(this.callEvent("onBeforeLoad",[]),this.data.driver=webix.DataDriver[b||"json"],void this.M(a,null))},df:function(a){var b=this.data.driver,c=b.getDetails(b.getRecords(a)[0]);this.setValues?this.setValues(c):this.data=c},tB:function(a,b,c,d){a?this.$onLoad&&this.$onLoad(a,this.data.driver)||(this.data&&this.data.df?this.data.df(a):this.df(a)):this.N(b,c,d),this.ef&&this.ef(),this.callEvent("onAfterLoad",[]),this.waitData.resolve()},M:function(a,b,c){var d,e=this.data.driver;-1===c?d=e.toObject(b):(this.Ve&&this.Ve.remove(c),d=e.toObject(a,b)),d&&d.then?d.then&&"function"==typeof d.then&&d.then(webix.bind(this.tB,this)):this.tB(d)},N:function(a,b,c){this.callEvent("onAfterLoad",[]),this.callEvent("onLoadError",arguments),webix.callEvent("onLoadError",[a,b,c,this])},O:function(a){if(!this.s.dataFeed||this.P||!a)return!0;var b=this.s.dataFeed;return"function"==typeof b?b.call(this,a.id||a,a):(b=b+(-1==b.indexOf("?")?"?":"&")+"action=get&id="+encodeURIComponent(a.id||a),this.callEvent("onBeforeLoad",[]),webix.ajax(b,function(a,b,c){this.P=!0;var d=webix.DataDriver.json,e=d.toObject(a,b);e?this.setValues(d.getDetails(d.getRecords(e)[0])):this.N(a,b,c),this.P=!1,this.callEvent("onAfterLoad",[])},this),!1)}},webix.DataDriver={},webix.DataDriver.json={toObject:function(a){if(!a)return null;if("string"==typeof a)try{if(this.parseDates){var b=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(.\d{3})?Z/;a=JSON.parse(a,function(a,c){return"string"==typeof c&&b.test(c)?new Date(c):c})}else a=JSON.parse(a)}catch(c){return null}return a},getRecords:function(a){return a&&a.data&&(a=a.data),a&&!webix.isArray(a)?[a]:a},getDetails:function(a){return"string"==typeof a?{id:a||webix.uid(),value:a}:a},getOptions:function(a){return a.collections},getInfo:function(a){return{Q:a.total_count||0,R:a.pos||0,S:a.parent||0,T:a.config,U:a.webix_security}},child:"data",parseDates:!1},webix.DataDriver.html={toObject:function(a){if("string"==typeof a){var b=null;return-1==a.indexOf("<")&&(b=webix.toNode(a)),b||(b=document.createElement("DIV"),b.innerHTML=a),b.firstChild}return a},getRecords:function(a){return a.getElementsByTagName(this.tag)},getDetails:function(a){return webix.DataDriver.xml.tagToObject(a)},getOptions:function(){return!1},getInfo:function(a){return{Q:0,R:0}},tag:"LI"},webix.DataDriver.jsarray={toObject:function(a){return"string"==typeof a?JSON.parse(a):a},getRecords:function(a){return a&&a.data&&(a=a.data),a},getDetails:function(a){for(var b={},c=0;c<a.length;c++)b["data"+c]=a[c];return null!==this.idColumn&&(b.id=a[this.idColumn]),b},getOptions:function(){return!1},getInfo:function(a){return{Q:0,R:0}},idColumn:null},webix.DataDriver.csv={toObject:function(a){return a},getRecords:function(a){return a.split(this.row)},getDetails:function(a){a=this.stringToArray(a);for(var b={},c=0;c<a.length;c++)b["data"+c]=a[c];return null!==this.idColumn&&(b.id=a[this.idColumn]),b},getOptions:function(){return!1},getInfo:function(a){return{Q:0,R:0}},stringToArray:function(a){a=a.split(this.cell);for(var b=0;b<a.length;b++)a[b]=a[b].replace(/^[ \t\n\r]*(\"|)/g,"").replace(/(\"|)[ \t\n\r]*$/g,"");return a},idColumn:null,row:"\n",cell:","},webix.DataDriver.xml={V:function(a){return a&&a.documentElement?a.getElementsByTagName("parsererror").length?null:a:null},toObject:function(a,b){var c=b?b.rawxml?b.rawxml():b:null;return this.V(c)?c:(c="string"==typeof a?this.fromString(a.replace(/^[\s]+/,"")):a,this.V(c)?c:null)},getRecords:function(a){return this.xpath(a,this.records)},records:"/*/item",child:"item",config:"/*/config",getDetails:function(a){return this.tagToObject(a,{})},getOptions:function(){return!1},getInfo:function(a){var b=this.xpath(a,this.config);return b=b.length?this.assignTypes(this.tagToObject(b[0],{})):null,{Q:a.documentElement.getAttribute("total_count")||0,R:a.documentElement.getAttribute("pos")||0,S:a.documentElement.getAttribute("parent")||0,T:b,U:a.documentElement.getAttribute("webix_security")||null}},xpath:function(a,b){if(window.XPathResult){var c=a;-1==a.nodeName.indexOf("document")&&(a=a.ownerDocument);for(var d=[],e=a.evaluate(b,c,null,XPathResult.ANY_TYPE,null),f=e.iterateNext();f;)d.push(f),f=e.iterateNext();return d}var g=!0;try{"undefined"==typeof a.selectNodes&&(g=!1)}catch(h){}if(g)return a.selectNodes(b);var i=b.split("/").pop();return a.getElementsByTagName(i)},assignTypes:function(a){for(var b in a){var c=a[b];if("object"==typeof c)this.assignTypes(c);else if("string"==typeof c){if(""===c)continue;"true"==c?a[b]=!0:"false"==c?a[b]=!1:c==1*c&&(a[b]=1*a[b])}}return a},tagToObject:function(a,b){var c=1==a.nodeType&&a.getAttribute("stack"),d=0;if(c){b=[];for(var e=a.childNodes,f=0;f<e.length;f++)1==e[f].nodeType&&b.push(this.tagToObject(e[f],{}))}else{b=b||{};var g=a.attributes;if(g&&g.length)for(var f=0;f<g.length;f++)b[g[f].name]=g[f].value,d=1;for(var e=a.childNodes,f=0;f<e.length;f++)if(1==e[f].nodeType){var h=e[f].tagName;b[h]?("function"!=typeof b[h].push&&(b[h]=[b[h]]),b[h].push(this.tagToObject(e[f],{}))):b[h]=this.tagToObject(e[f],{}),d=2}if(!d)return this.nodeValue(a);2>d&&(b.value=b.value||this.nodeValue(a))}return b},nodeValue:function(a){return a.firstChild?a.firstChild.wholeText||a.firstChild.data:""},fromString:function(a){try{if(window.DOMParser)return(new DOMParser).parseFromString(a,"text/xml");if(window.ActiveXObject){var b=new ActiveXObject("Microsoft.xmlDOM");return b.loadXML(a),b}}catch(c){return null}}},webix.BaseBind={bind:function(a,b,c){this.attachEvent||webix.extend(this,webix.EventSystem),"string"==typeof a&&(a=webix.$$(a)),a.W&&a.W(),this.W&&this.W(),a.getBindData||webix.extend(a,webix.BindSource),this.X(),a.addBind(this.s.id,b,c),this.Os=a.s.id;var d=this.s.id;this.Ps=this.attachEvent(this.touchable?"onAfterRender":"onBindRequest",function(){return a.getBindData(d)}),this.refresh&&this.isVisible(this.s.id)&&this.refresh()},unbind:function(){if(this.Os){var a=webix.$$(this.Os);a&&a.removeBind(this.s.id),this.detachEvent(this.Ps),this.Os=null}},X:function(){var a=this.s;if(this.filter){var b=a.id;this.data.Y=webix.bind(function(){webix.$$(this.Os).Z[b]=!1},this)}var c=this.render;this.render=function(){if(!this.$){this.$=!0;var a=this.callEvent("onBindRequest");return this.$=!1,c.apply(this,a===!1?arguments:[])}},(this.getValue||this.getValues)&&(this.save=function(){return!(this.validate&&!this.validate())&&(webix.$$(this.Os).setBindData(this.getValue?this.getValue:this.getValues(),this.s.id),void(this.setDirty&&this.setDirty(!1)))}),!a.dataFeed&&this.loadNext&&this.data.attachEvent("onStoreLoad",webix.bind(function(){this.Os&&(webix.$$(this.Os).Z[this.s.id]=!1)},this)),this.X=function(){}}},webix.BindSource={$init:function(){this.bb={},this.Z={},this.cb={},this.db(this)},saveBatch:function(a){this.eb=!0,a.call(this),this.eb=!1,this.fb()},setBindData:function(a,b){if(b&&(this.cb[b]=!0),this.setValue)this.setValue(a);else if(this.setValues)this.setValues(a);else{var c=this.getCursor();c?this.updateItem(c,a):this.add(a)}this.callEvent("onBindUpdate",[a,b]),this.save&&this.save(),b&&(this.cb[b]=!1)},getBindData:function(a,b){if(this.Z[a])return!1;var c=webix.$$(a);c.isVisible(c.s.id)&&(this.Z[a]=!0,this.gb(c,this.bb[a][0],this.bb[a][1]),b&&c.filter&&c.refresh())},addBind:function(a,b,c){this.bb[a]=[b,c]},removeBind:function(a){delete this.bb[a],delete this.Z[a],delete this.cb[a]},db:function(a){a.filter?webix.extend(this,webix.CollectionBind):a.setValue?webix.extend(this,webix.ValueBind):webix.extend(this,webix.RecordBind)},fb:function(){if(!this.eb)for(var a in this.bb)this.cb[a]||(this.Z[a]=!1,this.getBindData(a,!0))},hb:function(a,b,c){a.setValue?a.setValue(c&&b?c[b]:c):a.filter?a.data.silent(function(){this.filter(b,c)}):!c&&a.clear?a.clear():a.O(c)&&a.setValues(webix.clone(c)),a.callEvent("onBindApply",[c,b,this])}},webix.DataValue=webix.proto({name:"DataValue",isVisible:function(){return!0},$init:function(a){(!a||webix.isUndefined(a.value))&&(this.data=a||"");var b=a&&a.id?a.id:webix.uid();this.s={id:b},webix.ui.views[b]=this},setValue:function(a){this.data=a,this.callEvent("onChange",[a])},getValue:function(){return this.data},refresh:function(){this.callEvent("onBindRequest")}},webix.EventSystem,webix.BaseBind),webix.DataRecord=webix.proto({name:"DataRecord",isVisible:function(){return!0},$init:function(a){this.data=a||{};var b=a&&a.id?a.id:webix.uid();this.s={id:b},webix.ui.views[b]=this},getValues:function(){return this.data},setValues:function(a,b){this.data=b?webix.extend(this.data,a,!0):a,this.callEvent("onChange",[a])},refresh:function(){this.callEvent("onBindRequest")}},webix.EventSystem,webix.BaseBind,webix.AtomDataLoader,webix.Settings),webix.ValueBind={$init:function(){this.attachEvent("onChange",this.fb)},gb:function(a,b,c){b=b||"value";var d=this.getValue()||"";if(c&&(d=c(d)),a.setValue)a.setValue(d);else if(a.filter)a.data.silent(function(){this.filter(b,d)});else{var e={};e[b]=d,a.O(d)&&a.setValues(e)}a.callEvent("onBindApply",[d,b,this])}},webix.RecordBind={$init:function(){this.attachEvent("onChange",this.fb)},gb:function(a,b,c){var d=this.getValues()||null;c&&(d=c(d)),this.hb(a,b,d)}},webix.CollectionBind={
$init:function(){this.ib=null,this.attachEvent("onSelectChange",function(a){var b=this.getSelectedId();this.setCursor(b?b.id||b:null)}),this.attachEvent("onAfterCursorChange",this.fb),this.attachEvent("onAfterDelete",function(a){a==this.getCursor()&&this.setCursor(null)}),this.data.attachEvent("onStoreUpdated",webix.bind(function(a,b,c){a&&a==this.getCursor()&&"paint"!=c&&"delete"!=c&&this.fb()},this)),this.data.attachEvent("onClearAll",webix.bind(function(){this.ib=null},this)),this.data.attachEvent("onIdChange",webix.bind(function(a,b){this.ib==a&&(this.ib=b,this.fb())},this))},refreshCursor:function(){this.ib&&this.callEvent("onAfterCursorChange",[this.ib])},setCursor:function(a){a==this.ib||null!==a&&!this.getItem(a)||(this.callEvent("onBeforeCursorChange",[this.ib]),this.ib=a,this.callEvent("onAfterCursorChange",[a]))},getCursor:function(){return this.ib},gb:function(a,b,c){if("$level"==b&&this.data.getBranch)return(a.data||a).importData(this.data.getBranch(this.getCursor()));var d=this.getItem(this.getCursor())||this.s.defaultData||null;return"$data"==b?"function"==typeof c?c.call(a,d,this):a.data.importData(d?d[c]:[]):(c&&(d=c(d)),void this.hb(a,b,d))}},webix.AtomRender={jb:function(a){return a.$empty?"":this.s.template(a,this)},render:function(){var a=this.s;return!!this.isVisible(a.id)&&((!this.callEvent||this.callEvent("onBeforeRender",[this.data]))&&(this.data&&!a.content&&(this.y.innerHTML="",this.y.innerHTML=this.jb(this.data)),this.callEvent&&this.callEvent("onAfterRender",[])),!0)},sync:function(a){this.kb=!1,"DataStore"!=a.name&&(a.data&&"DataStore"==a.name?a=a.data:this.kb=!0),this.kb?a.bind("change",webix.bind(function(a){a.id==this.data.id&&(this.data=a.attributes,this.refresh())},this)):a.attachEvent("onStoreUpdated",webix.bind(function(b){b&&b!=this.data.id||(this.data=a.pull[b],this.refresh())},this))},template_setter:webix.template},webix.SingleRender=webix.proto({template_setter:function(a){this.type.template=webix.template(a)},jb:function(a){var b=this.type;return(b.templateStart?b.templateStart(a,b):"")+b.template(a,b)+(b.templateEnd?b.templateEnd(a,b):"")},customize:function(a){webix.type(this,a)}},webix.AtomRender),webix.UIManager={A:null,lb:{},mb:0,nb:{enter:13,tab:9,esc:27,escape:27,up:38,down:40,left:37,right:39,pgdown:34,pagedown:34,pgup:33,pageup:33,end:35,home:36,insert:45,"delete":46,backspace:8,space:32,meta:91,win:91,mac:91,multiply:106,add:107,subtract:109,decimal:110,divide:111},ob:function(){webix.event(document.body,"click",webix.bind(this.pb,this)),webix.event(document,"keydown",webix.bind(this.qb,this)),document.body.addEventListener&&document.body.addEventListener("focus",webix.bind(this.rb,this),!0),webix.destructors.push(this)},destructor:function(){webix.UIManager.A=null},getFocus:function(){return this.A},sb:function(a){this.tb=this.tb||a.s.id},setFocus:function(a,b){return a=webix.$$(a),a&&!a.$view&&(a=null),this.mb=webix.mb=new Date,this.A===a||(this.A&&this.A.callEvent&&this.A.callEvent("onBlur",[this.A]),a&&a.callEvent&&a.callEvent("onFocus",[a,this.A]),webix.callEvent("onFocusChange",[a,this.A]),this.A&&this.A.blur&&!b&&this.A.blur(),this.A=a,a&&a.focus&&!b&&a.focus(),!0)},applyChanges:function(a){var b=this.getFocus();b&&b!=a&&b.Xy&&b.Xy(a)},hasFocus:function(a){return a===this.A},ub:function(a,b){var c=webix.html.locate(a,"view_id")||this.tb;return c=webix.$$(c),this.tb=null,c!=this.A?(b||(this.tb=null),c?(c=webix.$$(c),this.canFocus(c)&&this.setFocus(c)):b||this.setFocus(null),!0):void 0},pb:function(a){return new Date-this.mb<100?(this.tb=null,!1):this.ub(a)},rb:function(a){return this.ub(a,!0)},canFocus:function(a){return a.isVisible()&&a.isEnabled()},vb:function(a){var b=this.getFocus();return!(a&&!this.wb(a,b))&&void(this.xb("getPrev",a)?this.A=null:this.setFocus(this.getPrev(a)))},Xz:{190:46},wb:function(a,b){if(!a)return!1;if(!b)return!1;for(;b;){if(b===a)return!0;b=b.getParentView()}return!1},yb:function(){this&&this.callEvent&&this.callEvent("onTimedKeyPress",[])},BA:function(a){return 112>a&&a>105},qb:function(a){var b=a.which||a.keyCode;b>95&&106>b&&(b-=48),b=this.Xz[b]||b;var c=a.ctrlKey,d=a.shiftKey,e=a.altKey,f=a.metaKey,g=this.zb(b,c,d,e,f),h=this.getFocus();h&&h.callEvent&&(h.callEvent("onKeyPress",[b,a])===!1&&webix.html.preventEvent(a),h.hasEvent("onTimedKeyPress")&&(clearTimeout(h.Ab),h.Ab=webix.delay(this.yb,h,[],h.s.keyPressTimeout||250))),this.tabControl&&(9!==b||c||e||f||(this.xb(d?"getPrev":"getNext"),webix.html.preventEvent(a))),this.BA(b)||(g=this.zb(String.fromCharCode(b),c,d,e,f));var i=!c&&!e&&!f&&9!=b&&27!=b&&13!=b;return this.Bb(g,i,a)===!1?(webix.html.preventEvent(a),!1):void 0},xb:function(a){if(!this.getFocus())return null;a=a||"getNext";for(var b=this.getFocus(),c=b,d=webix.uid();;){if(b=this[a](b),b&&b.s.tabFocus&&this.canFocus(b))return this.setFocus(b);if(b===c||b.$fmarker==d)return null;b.$fmarker=d}},getTop:function(a){for(var b,c=webix.$$(a);c&&(b=c.getParentView());)c=b;return c},getNext:function(a,b){var c=a.getChildViews();if(c.length&&!b)return c[0];var d=a.getParentView();if(!d)return a;var e=d.getChildViews();if(e.length)for(var f=webix.PowerArray.find.call(e,a)+1;f<e.length;){if(this.canFocus(e[f]))return e[f];f++}return this.getNext(d,!0)},getPrev:function(a,b){var c=a.getChildViews();if(c.length&&b)return this.getPrev(c[c.length-1],!0);if(b)return a;var d=a.getParentView();if(!d)return this.getPrev(a,!0);var e=d.getChildViews();if(e)for(var f=webix.PowerArray.find.call(e,a)-1;f>=0;){if(this.canFocus(e[f]))return this.getPrev(e[f],!0);f--}return d},addHotKey:function(a,b,c){var d=this.Cb(a);c||(c=null),d.handler=b,d.view=c;var e=this.zb(d.letter,d.ctrl,d.shift,d.alt,d.meta);return this.lb[e]||(this.lb[e]=[]),this.lb[e].push(d),a},removeHotKey:function(a,b,c){var d=this.Cb(a),e=this.zb(d.letter,d.ctrl,d.shift,d.alt,d.meta);if(b||c){var f=this.lb[e];if(f){for(var g=f.length-1;g>=0;g--)c&&f[g].view!==c||b&&f[g].handler!==b||f.splice(g,1);f.length||delete this.lb[e]}}else delete this.lb[e]},zb:function(a,b,c,d,e){return a+"_"+["",b?"1":"0",c?"1":"0",d?"1":"0",e?"1":"0"].join("")},Bb:function(a,b,c){var d=this.getFocus();return this.lb[a]?this.Db(this.lb[a],d,c):!b||!this.lb.ANY_0000||this.Db(this.lb.ANY_0000,d,c)},Db:function(a,b,c){for(var d=0;d<a.length;d++){var e=a[d];if(null===e.view||b===e.view||"string"==typeof e.view&&b&&b.name===e.view){var f=e.handler(b,c);if(!!f===f)return f}}return!0},Cb:function(a){var b,c,d,e,f=this.nb,g=a.toLowerCase().split(/[\+\-_]/);b=c=d=e=0;for(var h="",i=0;i<g.length;i++)if("ctrl"===g[i])b=1;else if("shift"===g[i])c=1;else if("alt"===g[i])d=1;else if("command"===g[i])e=1;else if(f[g[i]]){var j=f[g[i]];h=this.BA(j)?j.toString():String.fromCharCode(j)}else h=g[i];return{letter:h.toUpperCase(),ctrl:b,shift:c,alt:d,meta:e}}},webix.ready(function(){webix.UIManager.ob(),webix.UIManager.addHotKey("enter",function(a,b){if(a&&a.editStop&&a.Eb)return a.editStop(),!0;if(a&&a.touchable){var c=a.getFormView();c&&!a.Dt&&c.callEvent("onSubmit",[a,b])}}),webix.UIManager.addHotKey("esc",function(a){if(a){if(a.editCancel&&a.Eb)return a.editCancel(),!0;var b=a.getTopParentView();b&&b.setPosition&&b.Fb()}}),webix.UIManager.addHotKey("shift+tab",function(a,b){if(a&&a.Gb&&!a.Gb(!1,b))return!1;if(a&&a.Eb){if(a.editNext)return a.editNext(!1);if(a.editStop)return a.editStop(),!0}}),webix.UIManager.addHotKey("tab",function(a,b){if(a&&a.Gb&&!a.Gb(!0,b))return!1;if(a&&a.Eb){if(a.editNext)return a.editNext(!0);if(a.editStop)return a.editStop(),!0}else webix.delay(function(){webix.UIManager.tabControl||webix.UIManager.setFocus(webix.$$(document.activeElement),!0)},1)})}),webix.IdSpace={$init:function(){this.Hb={},this.Ib={},this.getTopParentView=webix.bind(function(){return this},this),this.Jb(),this.$ready.push(this.Kb)},$$:function(a){return this.Hb[a]},innerId:function(a){return this.Ib[a]},Jb:function(a){this.Lb=webix.Mb,webix.Mb=this},Kb:function(a){for(var b in this.Hb){var c=this.Hb[b];this.callEvent&&c.mapEvent&&!c.k.onitemclick&&c.mapEvent({onitemclick:this}),c.getTopParentView=this.getTopParentView}webix.Mb=this.Lb,this.Lb=0},oC:function(a){delete this.Hb[a]},ui:function(){this.Jb();var a=webix.ui.apply(webix,arguments);return this.Kb(),a}},function(){var a=[],b=webix.ui;if(!webix.ui){b=webix.ui=function(a,e,f){webix.Nb=!0;var g=webix.isArray(a),h=webix.toNode(a.container||e||document.body);h.s&&(f=d(h,g,f));var i,j=h==document.body;if(a.s||h&&g?i=a:(h&&j&&(a.$topView=!0),a.Ob||(a.Ob={}),i=b.A(a)),!j||i.setPosition||i.$apiOnly||webix.ui.Pb(),i.s&&i.s.ft&&!h.$view)i.s.gt=h;else if(!i.$apiOnly)if(h.appendChild)c(h,i,a);else if(h.destructor){var k=h;if(f||0===f||webix.isArray(i)||(f=h,h=h.getParentView()),h&&h.Qb)i.getParentView&&i.getParentView()&&i.getParentView().Rb(i),h.Qb(i,f);else{var e=k.$view.parentNode;k.destructor(),c(e,i,a)}}return webix.Nb=!1,i};var c=function(b,c,d){b.appendChild(c.x),((!c.setPosition||c.s.fullscreen)&&b==document.body||c.s.position)&&a.push(c),d.skipResize||c.adjust()},d=function(a,b,c){var d=[a];if(b)d=a.getChildViews();else if(a.gd)d=[a.gd];else{if("number"==typeof c)return c;if(c)return d=[webix.$$(c)],e(d),d[0].config.id}return e(d),c},e=function(a){for(var b=a.length-1;b>=0;b--)delete webix.ui.views[a[b].config.id],a[b].config.id="x"+webix.uid(),webix.ui.views[a[b].config.id]=a[b],e(a[b].getChildViews())}}webix.ui.animate=function(a,b,c){var d=webix.$$(b);if(d){var e=c||{type:"slide",direction:"left"},f=d.x.cloneNode(!0),g=webix.ui(a,b);g.x.parentNode.appendChild(f);var h=webix.animate.formLine(g.x,f,e);return e.callback=function(){webix.animate.breakLine(h)},webix.animate(h,e),g}},webix.ui.animateView=function(a,b,c){if(a=webix.$$(a)){c=c||{type:"slide",direction:"left"};for(var d=function(a){var b=a.x,c=b.className,d=b.innerHTML;return"<div class='"+c+"' style='width:"+b.offsetWidth+"px;height:"+b.offsetHeight+"px;'>"+d+"</div>"},e=[],f=0;f<a.x.childNodes.length;f++){var g=a.x.childNodes[f],h=g.currentStyle?g.currentStyle.display:getComputedStyle(g,null).display;e.push(h||"")}var i=d(a);"function"==typeof b&&b.call(this);for(var j=d(a),k=a.x.insertBefore(webix.html.create("DIV",{"class":"webix_view_animate",style:"width:"+a.x.offsetWidth+"px;height:"+a.x.offsetHeight+"px;"},j+i),a.x.firstChild),f=1;f<a.x.childNodes.length;f++)a.x.childNodes[f].style.display="none";var l=webix.animate.formLine(k.childNodes[0],k.childNodes[1],c);return c.callback=function(){if(k){a.x.removeChild(k),k=null;for(var b=0;b<a.x.childNodes.length;b++)a.x.childNodes[b].style.display=e[b]}},webix.animate(l,c),a}},webix.ui.Sb=function(){var a=webix.html.create("div");a.className="webix_skin_mark",a.style.cssText="position:absolute;left:-1000px;width:100px;padding:0px;margin:0px;min-height:100px;overflow-y:scroll;",document.body.appendChild(a);var b=a.offsetWidth-a.clientWidth,c={110:"air",120:"aircompact",130:"clouds",140:"web",150:"terrace",160:"metro",170:"light",180:"glamour",190:"touch",200:"flat",210:"compact",220:"material"}[10*Math.floor(a.offsetHeight/10)];if(document.body.removeChild(a),c){var d=webix.skin[c];d&&d!=webix.skin.$active&&webix.skin.set(c)}return webix.env.$customScroll?0:b},webix.ui.scrollSize=webix.env.touch||webix.env.$customScroll?0:17,webix.ready(function(){var a=webix.ui.Sb();webix.ui.scrollSize=webix.env.touch?0:a}),webix.ui.Tb=function(a){return"$"+a+(this.Ub[a]=(this.Ub[a]||0)+1)},webix.ui.Ub={},webix.ui.Pb=function(){webix.html.addStyle("html, body{ height:100%; }"),document.body.className+=" webix_full_screen",webix.ui.Pb=function(){},webix.Touch.limit(!1)},webix.ui.resize=function(){if(!(webix.env.touch&&(webix.edit_open_time&&new Date-webix.edit_open_time<500||webix.mb&&new Date-webix.mb<500)||(webix.UIManager.applyChanges(),webix.callEvent("onClick",[]),webix.ui.$freeze)))for(var b=a.length-1;b>=0;b--)a[b].$destructed?a.splice(b,1):a[b].adjust()},webix.ui.each=function(a,b,c,d){if(a)for(var e=d?[a]:a.getChildViews(),f=0;f<e.length;f++)b.call(c||webix,e[f])!==!1&&webix.ui.each(e[f],b,c)},webix.event(window,"resize",webix.ui.resize),b.Wb={},b.delay=function(a){webix.ui.Wb[a.id]=a},b.hasMethod=function(a,b){var c=webix.ui[a];return!!c&&(c.$protoWait&&(c=c.call(webix)),!!webix.ui[a].prototype[b])},webix.ui.zIndex=function(){return webix.ui.zIndexBase++},webix.ui.zIndexBase=100,b.A=function(a){if(a.view){var c=a.view;return new b[c](a)}if(a.rows||a.cols){for(var d=a.rows||a.cols,e=!1,f=0;f<d.length;f++)d[f].body&&!d[f].view&&(e=!0);return e?new b.headerlayout(a):new b.layout(a)}return a.cells?new b.multiview(a):a.template||a.content?new b.template(a):new b.spacer(a)},b.views={},webix.$$=function(a){if(!a)return null;if(b.views[a])return b.views[a];if(b.Wb[a])return webix.ui(b.Wb[a]);var c=a;if("object"==typeof a){if(a.s)return a;c=a.target||a.srcElement||a}return b.views[webix.html.locate({target:webix.toNode(c)},"view_id")]},webix.isUndefined(window.$$)&&(window.$$=webix.$$),webix.UIExtension=window.webix_view||{},webix.protoUI({name:"baseview",$init:function(a){a.id||(a.id=webix.ui.Tb(this.name)),this.Xb=webix.Xb,webix.Xb=null,this.$scope=a.$scope||(this.Xb?this.Xb.$scope:null),this.x||(this.w=this.x=webix.html.create("DIV",{"class":"webix_view"}),this.$view=this.x)},$skin:!1,defaults:{width:0,height:0,gravity:1},getNode:function(){return this.x},getParentView:function(){return this.Xb||null},getTopParentView:function(){var a=this.getParentView();return a?a.getTopParentView():this},getFormView:function(){var a=this.getParentView();return!a||a.setValues?a:a.getFormView()},getChildViews:function(){return[]},isVisible:function(a,b){if(this.s.hidden)return a&&(this.Yb||(this.Yb=[],this.Zb={}),this.Zb[a]||(this.Zb[a]=!0,this.Yb.push(a))),!1;var c=this.getParentView();return!c||c.isVisible(a,this.s.id)},isEnabled:function(){if(this.$b)return!1;var a=this.getParentView();return!a||a.isEnabled()},disable:function(){webix.html.remove(this.$b),this.s.disabled=!0,this.$b=webix.html.create("div",{"class":"webix_disabled"}),window.getComputedStyle&&(this._b=window.getComputedStyle(this.x,null).getPropertyValue("position")),"absolute"!=this._b&&(this.x.style.position="relative"),this.x.appendChild(this.$b),webix.html.addCss(this.x,"webix_disabled_view",!0),webix.UIManager.vb(this)},enable:function(){this.s.disabled=!1,this.$b&&(webix.html.remove(this.$b),webix.html.removeCss(this.x,"webix_disabled_view"),this.$b=null,this._b&&(this.x.style.position=this._b))},disabled_setter:function(a){return a?this.disable():this.enable(),a},container_setter:function(a){return!0},css_setter:function(a){return"object"==typeof a&&(a=webix.html.createCss(a)),this.x.className+=" "+a,a},id_setter:function(a){if(webix.Mb&&(webix.Mb!=this||this.Lb)){var b=this.config.$id=a;(this.Lb||webix.Mb).Hb[a]=this,a=webix.ui.Tb(this.name),(this.Lb||webix.Mb).Ib[a]=b}return webix.ui.views[a]=this,this.x.setAttribute("view_id",a),a},$setSize:function(a,b){var c=this.ac;return(!c||c[0]!=a||c[1]!=b)&&(this.ac=[a,b],this.$width=this.bc=a-(this.cc?webix.ui.scrollSize:0),this.$height=this.dc=b-(this.ec?webix.ui.scrollSize:0),this.x.style.width=a+"px",this.x.style.height=b+"px",webix.env.isWebKit&&(this.x.offsetWidth,this.x.offsetHeight),!0)},$getSize:function(a,b){var c=this.s,d=[c.width||c.minWidth||0,c.width||c.maxWidth||1e5,c.height||c.minHeight||0,c.height||c.maxHeight||1e5,c.gravity];return d[0]+=a,d[1]+=a,d[2]+=b,d[3]+=b,d},show:function(a,b){var c=this.getParentView(),d=!arguments[2];if(c)!b&&b!==!1&&this.s.animate&&c.s.animate&&(b=webix.extend(c.s.animate?webix.extend({},c.s.animate):{},this.s.animate,!0)),(d?c.fc:c.Fb)&&(d?c.fc:c.Fb).call(c,this,b),d&&this.Qd(),a&&d&&c.show(a);else if(this.s.hidden){if(d){var e=webix.toNode(this.s.gt||document.body);e.appendChild(this.x),this.s.hidden=!1,this.adjust(),this.Qd()}}else d||(this.s.hidden=this.s.ft=!0,this.x&&(this.s.gt=this.x.parentNode,webix.html.remove(this.x)))},Qd:function(){if(this.Yb){for(var a=0;a<this.Yb.length;a++){var b=webix.$$(this.Yb[a]);b&&b.render()}this.Yb=[],this.Zb={}}},hidden_setter:function(a){return a&&this.hide(),this.s.hidden},hide:function(){this.show(null,null,!0),webix.UIManager.vb(this)},adjust:function(){if(!this.x.parentNode)return!1;var a=this.x.parentNode.offsetWidth||0,b=this.x.parentNode.offsetHeight||0,c=this.$getSize(0,0);c[0]>a&&(a=c[0]),c[2]>b&&(b=c[2]),a>c[1]&&(a=c[1]),b>c[3]&&(b=c[3]),this.$setSize(a,b)},resize:function(a){if(!webix.gc&&!webix.ui.$freeze){var b=this.getParentView();b?b.resizeChildren?b.resizeChildren():b.resize():(this.adjust(),webix.callEvent("onResize",[]))}}},webix.Settings,webix.Destruction,webix.BaseBind,webix.UIExtension),webix.protoUI({name:"view",$init:function(a){this.hc(a)},hc:function(a){var b=webix.isUndefined(a.borderless);b&&!this.setPosition&&a.$topView&&(a.borderless=!0,b=!1),b&&this.defaults.borderless||a.borderless?a.Ob={top:!0,left:!0,bottom:!0,right:!0}:(a.Ob||(a.Ob={}),this.w.style.borderWidth="1px")},$getSize:function(a,b){var c=this.s.Ob;c&&(a+=(c.left?0:1)+(c.right?0:1),b+=(c.top?0:1)+(c.bottom?0:1));var d=webix.ui.baseview.prototype.$getSize.call(this,a,b);return d},$setSize:function(a,b){var c=this.s.Ob;return c&&(a-=(c.left?0:1)+(c.right?0:1),b-=(c.top?0:1)+(c.bottom?0:1)),webix.ui.baseview.prototype.$setSize.call(this,a,b)}},webix.ui.baseview)}(),webix.ui.view.call(webix),webix.protoUI({name:"spacer",defaults:{borderless:!0},$init:function(){this.x.className+=" webix_spacer"}},webix.ui.view),webix.protoUI({name:"baselayout",$init:function(a){this.$ready.push(this.kc),this.y=this.w,this.lc=[],this.ht=[],a.$topView&&(a.borderless=!0,a.Ob={top:!0,left:!0,bottom:!0,right:!0}),a.isolate&&webix.extend(this,webix.IdSpace)},rows_setter:function(a){this.mc=1,this.nc=a},cols_setter:function(a){this.mc=0,this.$view.style.whiteSpace="nowrap",this.nc=a},Rb:function(a){webix.PowerArray.removeAt.call(this.q,webix.PowerArray.find.call(this.q,a)),this.resizeChildren(!0)},Qb:function(a,b){if(webix.isUndefined(b)){for(var c=0;c<this.q.length;c++)this.q[c].destructor();this.nc=a,this.kc()}else{var d;if("number"==typeof b){(0>b||b>this.q.length)&&(b=this.q.length);var e=(this.q[b]||{}).x;webix.PowerArray.insertAt.call(this.q,a,b),a.s.hidden||webix.html.insertBefore(a.x,e,this.y)}else{d=webix.$$(b),b=webix.PowerArray.find.call(this.q,d);var f=d.x.parentNode;f&&!a.s.hidden&&f.insertBefore(a.x,d.x),d.destructor(),this.q[b]=a}this.mc||this.oc(a),this.q[b].Xb=this}this.resizeChildren(!0);var g=this.elements?this:this.getFormView();g&&g.Qs(),webix.callEvent("onReconstruct",[this])},oc:function(a){a.x.style.display="inline-block",a.x.style.verticalAlign="top"},addView:function(a,b){webix.isUndefined(b)&&(b=this.q.length);var c=this.getTopParentView();return c=c&&c.ui?c:webix,c.ui(a,this,b).s.id},removeView:function(a){var b;b="object"!=typeof a?webix.$$(a):a;var c=webix.PowerArray.find.call(this.q,b);if(c>=0){this.Vx&&this.Vx(c,b);var d=this.elements?this:this.getFormView();this.q.splice(c,1),d&&webix.ui.each(b,function(a){a.name&&delete d.getCleanValues()[a.config.name]},d,!0),b.destructor(),this.resizeChildren(!0),d&&d.Qs()}webix.callEvent("onReconstruct",[this])},reconstruct:function(){this.qc=0,this.Qb(this.nc)},Fb:function(a,b,c){a.s.hidden||(a.s.hidden=!0,webix.html.remove(a.x),this.qc++,c||webix.Nb||this.resizeChildren(!0))},Lw:function(a){a.callEvent&&a.callEvent("onViewShow",[])},resizeChildren:function(){if(!webix.ui.$freeze&&this.lc){var a=this.getParentView();if(a)return a.resizeChildren?a.resizeChildren():a.resize();var b,c,d,e,f=this.$getSize(0,0);d=b=this.lc[0]||0,e=c=this.lc[1]||0,a?this.rc(b,c):(f[0]>b&&(d=f[0]),f[2]>c&&(e=f[2]),b>f[1]&&(d=f[1]),c>f[3]&&(e=f[3]),this.$setSize(d,e)),webix.callEvent("onResize",[])}},getChildViews:function(){return this.q},index:function(a){a.s&&(a=a.s.id);for(var b=0;b<this.q.length;b++)if(this.q[b].s.id==a)return b;return-1},fc:function(a,b,c){if(a.s.hidden){a.s.hidden=!1;for(var d=this.index(a)+1;this.q[d]&&this.q[d].s.hidden;)d++;var e=this.q[d]?this.q[d].x:null;webix.html.insertBefore(a.x,e,this.y||this.x),this.qc--,c||(this.resizeChildren(!0),a.refresh&&a.refresh()),a.callEvent&&(a.callEvent("onViewShow",[]),webix.ui.each(a,this.Lw))}},showBatch:function(a,b){var c="undefined"!=typeof b;if(b=b!==!1,c)this.s.visibleBatch="";else{if(this.s.visibleBatch==a)return;this.s.visibleBatch=a}for(var d=[],e=0;e<this.q.length;e++)this.q[e].s.batch?this.q[e].s.batch==a?b?d.push(this.q[e]):this.Fb(this.q[e],null,!0):c||this.Fb(this.q[e],null,!0):d.push(this.q[e]);for(var e=0;e<d.length;e++)this.fc(d[e],null,!0),d[e].Qd();this.resizeChildren(!0)},kc:function(a){this.q=[];for(var b=0;b<a.length;b++)webix.Xb=this,a[b].Ob||(a[b].borderless=!0),this.q[b]=webix.ui.A(a[b],this),this.mc||this.oc(this.q[b]),this.s.visibleBatch&&this.s.visibleBatch!=this.q[b].s.batch&&this.q[b].s.batch&&(this.q[b].s.hidden=!0,this.qc++),this.q[b].s.hidden||((this.y||this.w).appendChild(this.q[b].x),this.q[b].$nospace&&this.qc++);this.sc&&this.sc(a)},tc:function(a,b,c){if(this.mc!=c)for(var d=0;d<this.q.length;d++)this.q[d].s[a]=b,this.q[d].tc&&this.q[d].tc(a,b,c)},$getSize:function(a,b){var c=0,d=1e5,e=1e5,f=0;this.mc?e=0:d=0;var g=0,h=0,i=0;this.uc=[];for(var j=0;j<this.q.length;j++)if(!this.q[j].s.hidden){var k=this.uc[j]=this.q[j].$getSize(0,0);this.q[j].$nospace?h++:this.mc?(k[0]>c&&(c=k[0]),k[1]<d&&(d=k[1]),f+=k[2],e+=k[3],k[2]==k[3]&&-1!=k[2]?(g+=k[2],h++):i+=k[4]):(k[2]>f&&(f=k[2]),k[3]<e&&(e=k[3]),c+=k[0],d+=k[1],k[0]==k[1]&&-1!=k[0]?(g+=k[0],h++):i+=k[4])}f>e&&(e=f),c>d&&(d=c),this.vc=[g,this.q.length-h,i],this.ng=[c+a,f+b];var l=webix.ui.baseview.prototype.$getSize.call(this,0,0);return l[1]>=1e5&&(l[1]=0),l[3]>=1e5&&(l[3]=0),l[0]=(l[0]||c)+a,l[1]=Math.max(l[0],(l[1]||d)+a),l[2]=(l[2]||f)+b,l[3]=Math.max(l[2],(l[3]||e)+b),this.s.responsive&&(l[0]=0),l},$setSize:function(a,b){this.lc=[a,b],webix.ui.baseview.prototype.$setSize.call(this,a,b),this.rc(a,b)},wc:function(a,b,c){b=a[b],c=a[c];var d=b;if(b!=c){var e=this.xc*a[4]/this.yc;if(b>e)d=b,this.yc-=a[4],this.xc-=d;else{if(!(e>c))return-1;d=c,this.yc-=a[4],this.xc-=d}}return d},it:function(a,b){var c=webix.$$(b);"hide"!==c&&c?(c||(c=webix.ui({view:"popup",body:[{}]})),a.jt=a.s.width,a.kt=a.s.height,a.lt=c.s.id,a.s.width=0,a.s.height||(a.s.autoheight=!0),webix.ui(a,c,this.ht.length)):(a.hide(),webix.delay(this.resize,this),a.lt="hide"),this.ht.push(a)},mt:function(a){var b=a.lt;a.lt=0,"hide"!==b&&b?(a.s.width=a.jt,a.s.height=a.kt,delete a.s.autoheight,webix.ui(a,this,0)):(a.show(),webix.delay(this.resize,this)),this.ht.pop()},nt:function(a,b){if(!this.ot){if(this.ot=!0,a<this.ng[0])for(var c=0;c<this.q.length-1;c++){var d=this.q[c];if(!d.lt){this.it(d,this.s.responsive);break}}else if(this.ht.length){var d=this.ht[this.ht.length-1],e="hide"==d.lt?0:d.jt,f=d.$getSize(e,0);f[0]+this.ng[0]+this.Dc+20<=a&&this.mt(d)}this.ot=!1}},rc:function(a,b){webix.gc=(webix.gc||0)+1,this.s.responsive&&this.nt(a,b),this.xc=(this.mc?b:a)-this.vc[0],this.yc=this.vc[2];for(var c=a,d=b,e=[],f=0;f<this.q.length;f++)if(!this.q[f].s.hidden){var g=this.uc[f];if(this.mc){var d=this.wc(g,2,3);if(0>d){e.push(f);continue}}else{var c=this.wc(g,0,1);if(0>c){e.push(f);continue}}this.q[f].$setSize(c,d)}for(var f=0;f<e.length;f++){var h=e[f],g=this.uc[h],i=Math.round(this.xc*g[4]/this.yc);this.xc-=i,this.yc-=g[4],this.mc?d=i:c=i,this.q[h].$setSize(c,d)}webix.gc-=1},zc:function(a,b){var c=this.index(a);return-1==c?null:this.q[c+b]},Ac:function(){return this.q[0]}},webix.EventSystem,webix.ui.baseview),webix.protoUI({name:"layout",$init:function(a){this.qc=0},defaults:{type:"line"},kc:function(){this.Bc&&(a=this.Bc(a)),this.Uw||(this.x.className+=" webix_layout_"+(this.s.type||""),this.Uw=1),this.s.margin!==webix.undefined&&(this.Cc=this.s.margin),this.s.padding!=webix.undefined&&(this.Dc=this.Ec=this.s.padding),this.s.paddingX!==webix.undefined&&(this.Dc=this.s.paddingX),this.s.paddingY!==webix.undefined&&(this.Ec=this.s.paddingY),(this.Ec||this.Dc)&&(this.Fc=!0),this.Wx()&&!this.s.borderless&&(this.w.style.borderWidth="1px",this.Gc=!0);var a=this.nc;this.s.borderless&&(this.s.Ob={top:!0,left:!0,right:!0,bottom:!0}),this.Hc(a),webix.ui.baselayout.prototype.kc.call(this,a),this.Ic(a)},$getSize:function(a,b){a=a||0,b=b||0;var c=this.Cc*(this.q.length-this.qc-1);if(this.Gc||this.Wx()){var d=this.s.Ob;d&&(a+=(d.left?0:1)+(d.right?0:1),b+=(d.top?0:1)+(d.bottom?0:1))}return this.s.height||(b+=2*(this.Ec||0)+(this.mc?c:0)),this.s.width||(a+=2*(this.Dc||0)+(this.mc?0:c)),webix.ui.baselayout.prototype.$getSize.call(this,a,b)},$setSize:function(a,b){this.lc=[a,b];var c;c=this.Wx()||this.Gc?webix.ui.view.prototype.$setSize.call(this,a,b):webix.ui.baseview.prototype.$setSize.call(this,a,b),b=this.dc,a=this.bc;var d=this.s;d.scroll&&(b=Math.max(b,this.ng[1]),a=Math.max(a,this.ng[0])),this.rc(a,b)},rc:function(a,b){var c=this.Cc*(this.q.length-this.qc-1);return this.mc?(b-=c+2*this.Ec,a-=2*this.Dc):(a-=c+2*this.Dc,b-=2*this.Ec),webix.ui.baselayout.prototype.rc.call(this,a,b)},resizeChildren:function(a){if(a){this.ac=null;for(var b=[],c=0;c<this.q.length;c++){var d=this.q[c];b[c]=d.s;var e=d.lc&&!d.Gc||d.s.borderless?"0px":"1px";d.x.style.borderTopWidth=d.x.style.borderBottomWidth=d.x.style.borderLeftWidth=d.x.style.borderRightWidth=e}this.Hc(b);for(var c=0;c<b.length;c++)b[c].borderless&&this.q[c].hc&&this.q[c].hc(b[c]);this.Ic(this.q)}webix.ui.baselayout.prototype.resizeChildren.call(this)},Wx:function(){return this.Fc&&this.Cc>0&&!this.Xx},Hc:function(a){if(!this.Wx()||this.s.borderless&&"space"!=this.s.type){for(var b=0;b<a.length;b++)a[b].Ob=webix.clone(this.s.Ob);var c=!1;this.Xx&&(c=!0);var d=a.length;if(this.mc){for(var b=1;d-1>b;b++)a[b].Ob.top=a[b].Ob.bottom=c;if(d>1){for("head"!=this.s.type&&(a[0].Ob.bottom=c);a[d-1].hidden&&d>1;)d--;d>0&&(a[d-1].Ob.top=c)}}else{for(var b=1;d-1>b;b++)a[b].Ob.left=a[b].Ob.right=c;if(d>1){for("head"!=this.s.type&&(a[0].Ob.right=c),a[d-1].Ob.left=c;d>1&&a[d-1].hidden;)d--;d>0&&(a[d-1].Ob.left=c)}}}else for(var b=0;b<a.length;b++)a[b].Ob&&a[b].borderless||(a[b].Ob={top:!1,left:!1,right:!1,bottom:!1})},Jc:function(a,b){b.top&&(a.borderTopWidth="0px"),b.left&&(a.borderLeftWidth="0px"),b.right&&(a.borderRightWidth="0px"),b.bottom&&(a.borderBottomWidth="0px")},Ic:function(a){for(var b=0,c=0;c<a.length;c++){var d=this.q[c],e=d.s.Ob;if(d.s.hidden&&this.q[c+1]){var f=this.q[c+1].s.Ob;e.top||(f.top=!1),e.left||(f.left=!1),c==b&&b++}this.Jc(d.x.style,d.s.Ob)}for(var g=this.mc?"marginLeft":"marginTop",h=this.mc?"marginTop":"marginLeft",i=this.mc?this.Dc:this.Ec,j=this.mc?this.Ec:this.Dc,c=0;c<a.length;c++)this.q[c].x.style[g]=(i||0)+"px";this.q.length&&(this.q[b].x.style[h]=(j||0)+"px");for(var k=b+1;k<a.length;k++)this.q[k].x.style[h]=this.Cc+"px"},type_setter:function(a){return this.Cc="undefined"!=typeof this.Kc[a]?this.Kc[a]:this.Kc.line,this.Dc=this.Ec="undefined"!=typeof this.Kc[a]?this.Lc[a]:this.Lc.line,this.Xx="material"==a||"clean"==a,"material"==a&&(this.s.borderless=!0),a},$skin:function(){var a=webix.skin.$active;this.Kc=a.layoutMargin,this.Lc=a.layoutPadding}},webix.ui.baselayout),webix.ui.layout.call(webix),webix.animate=function(a,b){var c=b;if(webix.isArray(a))for(var d=0;d<a.length;d++){if(webix.isArray(b)&&(c=b[d]),"slide"==c.type){if("out"==c.subtype&&0===d)continue;if("in"==c.subtype&&1==d)continue}if("flip"!=c.type)webix.animate(a[d],c);else{var e=webix.clone(c);0===d&&(e.type="flipback"),1==d&&(e.callback=null),webix.animate(a[d],e)}}else{var f=webix.toNode(a);f.Mc?webix.animate.end(f,c):webix.animate.start(f,c)}},webix.animate.end=function(a,b){a.style[webix.env.transitionDuration]="1ms",a.Mc=null,webix.Nc&&window.clearTimeout(webix.Nc),webix.Nc=webix.delay(webix.animate,webix,[a,b],10)},webix.animate.isSupported=function(){return!webix.$testmode&&!webix.noanimate&&webix.env.transform&&webix.env.transition&&!webix.env.isOpera},webix.animate.formLine=function(a,b,c){var d=c.direction;b.parentNode.style.position="relative",b.style.position="absolute",a.style.position="absolute";var e=webix.env.isFF?"top"==d||"left"==d?-1:1:0;return"top"==d||"bottom"==d?(a.style.left="0px",a.style.top=(c.top||e)+("top"==d?1:-1)*b.offsetHeight+"px"):(a.style.top=(c.top||0)+"px",a.style.left=e+("left"==d?1:-1)*b.offsetWidth+"px"),b.parentNode==a.parentNode&&c.keepViews?a.style.display="":webix.html.insertBefore(a,b.nextSibling,b.parentNode),"slide"==c.type&&"out"==c.subtype&&(a.style.left="0px",a.style.top=(c.top||0)+"px",b.parentNode.removeChild(b),webix.html.insertBefore(b,a.nextSibling,a.parentNode)),[a,b]},webix.animate.breakLine=function(a){arguments[1]?a[1].style.display="none":webix.html.remove(a[1]),webix.animate.clear(a[0]),webix.animate.clear(a[1]),a[0].style.position=""},webix.animate.clear=function(a){a.style[webix.env.transform]="none",a.style[webix.env.transition]="none",a.style.top=a.style.left=""},webix.animate.defaults={type:"slide",delay:"0",duration:"500",timing:"ease-in-out",x:0,y:0},webix.animate.start=function(a,b){"string"==typeof b&&(b={type:b}),b=webix.Settings.E(b,webix.animate.defaults);var c,d,e=webix.env.cssPrefix,f=a.Mc=b;switch("slide"==f.type&&f.direction){case"right":f.x=a.offsetWidth;break;case"left":f.x=-a.offsetWidth;break;case"top":f.y=-a.offsetHeight;break;case"bottom":default:f.y=f.y||a.offsetHeight}("flip"==f.type||"flipback"==f.type)&&(c=[0,0],d="scaleX","vertical"==f.subtype?(c[0]=20,d="scaleY"):c[1]=20,("right"==f.direction||"bottom"==f.direction)&&(c[0]*=-1,c[1]*=-1));var g=f.duration+"ms "+f.timing+" "+f.delay+"ms",h=e+"TransformStyle: preserve-3d;",i="",j="";switch(f.type){case"fade":i="opacity "+g,h="opacity: 0;";break;case"show":i="opacity "+g,h="opacity: 1;";break;case"flip":g=f.duration/2+"ms "+f.timing+" "+f.delay+"ms",j="skew("+c[0]+"deg, "+c[1]+"deg) "+d+"(0.00001)",i="all "+g;break;case"flipback":f.delay+=f.duration/2,g=f.duration/2+"ms "+f.timing+" "+f.delay+"ms",a.style[webix.env.transform]="skew("+-1*c[0]+"deg, "+-1*c[1]+"deg) "+d+"(0.00001)",a.style.left="0",j="skew(0deg, 0deg) "+d+"(1)",i="all "+g;break;case"slide":var k=f.x+"px",l=f.y+"px";j=webix.env.translate+"("+k+", "+l+("translate3d"==webix.env.translate?", 0":"")+")",i=e+"transform "+g}webix.delay(function(){a.style[webix.env.transition]=i,webix.delay(function(){h&&(a.style.cssText+=h),j&&(a.style[webix.env.transform]=j);var b=!1,c=webix.event(a,webix.env.transitionEnd,function(d){a.Mc=null,f.callback&&f.callback.call(f.master||window,a,f,d),b=!0,webix.eventRemove(c)});window.setTimeout(function(){b||(a.Mc=null,f.callback&&f.callback.call(f.master||window,a,f),b=!0,webix.eventRemove(c))},1.3*(1*f.duration+1*f.delay))})})},webix.MouseEvents={$init:function(a){a=a||{},this.Oc=0,this.Pc=300,this.Qc=null,this.Rc(a.onClick,"on_click"),this.Rc(a.onContext,"on_context"),this.Rc(a.onDblClick,"on_dblclick"),this.Rc(a.onMouseMove,"on_mouse_move"),this.on_click&&(webix.event(this.w,"click",this.Sc,{bind:this}),webix.env.isIE8&&this.on_dblclick&&webix.event(this.w,"dblclick",this.Tc,{bind:this})),this.on_context&&webix.event(this.w,"contextmenu",this.Uc,{bind:this}),this.on_mouse_move&&this.Vc()},Vc:function(){this.Wc||(this.on_mouse_move=this.on_mouse_move||{},webix.event(this.w,"mousemove",this.Xc,{bind:this}),webix.event(this.w,webix.env.isIE?"mouseleave":"mouseout",this.Xc,{bind:this}),this.Wc=1)},Rc:function(a,b){if(a){var c=this[b],d=c?webix.extend({},c):{};this[b]=webix.extend(d,a)}},Sc:function(a){if(!this.isEnabled())return!1;if(webix.UIManager.sb(this),this.on_dblclick){var b=(new Date).valueOf();if(b-this.Oc<=this.Pc&&this.locate){var c=this.locate(a);if(""+c==""+this.Qc)return this.Oc=0,this.Tc(a)}this.Oc=b}var d=this.Yc(a,this.on_click,"ItemClick");return d},Tc:function(a){return this.Yc(a,this.on_dblclick,"ItemDblClick")},Uc:function(a){this.Yc(a,this.on_context,"BeforeContextMenu","AfterContextMenu")},Xc:function(a){if(document.createEventObject)a=document.createEventObject(event);else if(!(webix.$testmode||webix.isUndefined(a.movementY)||a.movementY||a.movementX))return;this.Zc&&window.clearTimeout(this.Zc),this.callEvent("onMouseMoving",[a]),this.Zc=window.setTimeout(webix.bind(function(){"mousemove"==a.type?this.$c(a):this._c(a);
},this),this.s.mouseEventDelay||500)},$c:function(a){this.Yc(a,this.on_mouse_move,"MouseMove")||this.callEvent("onMouseOut",[a||event])},_c:function(a){this.callEvent("onMouseOut",[a||event])},Yc:function(a,b,c,d){if(a=a||event,!a.processed&&this.x){a.processed=!0;var e=a.target||a.srcElement;if(webix.env.isIE8){var f=this.s.id,g=e.w_view;if(g){if(g!==f)return}else e.w_view=f}for(var h="",i=null,j=!1;e&&e.parentNode&&e!=this.x.parentNode;){if(!j&&e.getAttribute&&(i=e.getAttribute(this.ad))){if(this.Qc=i,this.callEvent){if(!this.callEvent("on"+c,[i,a,e]))return;d&&this.callEvent("on"+d,[i,a,e])}j=!0}if(h=webix.html.TC(e)){h=h.toString().split(" ");for(var k=0;k<h.length;k++)if(b[h[k]]){var l=webix.toFunctor(b[h[k]],this.$scope),m=l.call(this,a,i||webix.html.locate(a,this.ad),e);if(m===!1)return j}}e=e.parentNode}return j}}},webix.protoUI({name:"accordionitem",$init:function(a){this.x.innerHTML="<div webix_ai_id='"+a.id+"'  class='webix_accordionitem_header'><div class='webix_accordionitem_button' ></div><div class='webix_accordionitem_label' ></div></div><div class='webix_accordionitem_body'></div>",this.w=this.x,this.bd=this.w.childNodes[0],a.header||(this.bd.style.display="none"),this.cd=this.w.childNodes[0].childNodes[1],this.dd=this.w.childNodes[0].childNodes[0],this.ed=this.w.childNodes[1],this.x.className+=" webix_accordionitem",this.fd=this.gd=null,this.q=!0},Rb:function(){this.gd={destructor:function(){}}},Qb:function(a){this.gd.destructor(),this.gd=a,this.gd.Xb=this,this.ed.appendChild(this.gd.x),this.resize()},ad:"webix_ai_id",getChildViews:function(){return[this.gd]},body_setter:function(a){return"object"!=typeof a&&(a={template:a}),a.Ob={top:!0,left:!0,right:!0,bottom:!0},this.gd=webix.ui.A(a),this.gd.$view.style.border="0px solid red",this.gd.Xb=this,this.ed.appendChild(this.gd.x),a},header_setter:function(a){return a&&(a=webix.template(a)),a},headerAlt_setter:function(a){return a&&(a=webix.template(a)),a},$getSize:function(a,b){var c=this.gd.$getSize(0,0),d=this.s.Ob;d&&(a+=(d.left?0:1)+(d.right?0:1),b+=(d.top?0:1)+(d.bottom?0:1));var e=0,f=webix.ui.baseview.prototype.$getSize.call(this,0,0);f[0]=(f[0]||c[0])+a,f[1]>=1e5&&(f[1]=c[1]),f[1]+=a,f[2]=(f[2]||c[2])+b;var g=f[3]<1e5;return g||(f[3]=c[3]),f[3]+=b,this.getParentView().mc?this.s.collapsed?f[2]=f[3]=this.hd():this.s.header&&(e=this.s.headerHeight):(this.s.collapsed&&(f[0]=f[1]=this.hd()),this.s.header&&(e=this.s.headerHeight)),g||(f[2]+=e,f[3]+=e),f},on_click:{webix_accordionitem_header:function(a,b){return this.id(a),!1},webix_accordionitem_header_v:function(a,b){return this.id(a),!1}},id:function(a){this.define("collapsed",!this.s.collapsed)},collapsed_setter:function(a){if(this.s.header!==!1){var b=this.getParentView();if(b){if(a)if(b.jd(this))this.kd();else{var c=0;if(b.q.length>1)for(var d=0;d<b.q.length;d++){var e=b.q[d];if(this!=e&&e.isVisible()){e.expand(),this.kd(),c=1;break}}if(!c)return}else this.ld();this.s.collapsed=a,a||b.md(this),this.refresh(),webix.Nb||this.resize(),b.callEvent("onAfter"+(a?"Collapse":"Expand"),[this.s.id]),this.s.$noresize=a}return a}},collapse:function(){this.define("collapsed",!0),webix.UIManager.vb(this)},expand:function(){this.define("collapsed",!1)},fc:function(){this.show()},Fb:function(){this.hide()},ld:function(){this.ed.style.display="",webix.html.removeCss(this.$view,"collapsed"),webix.html.removeCss(this.bd,"collapsed")},kd:function(){this.getParentView().mc,this.s.headerAlt&&(this.cd.innerHTML=this.s.headerAlt()),this.ed.style.display="none",webix.html.addCss(this.$view,"collapsed"),webix.html.addCss(this.bd,"collapsed")},refresh:function(){var a=this.s[this.s.collapsed?"headerAlt":"header"]||this.s.header;a&&(this.cd.innerHTML=a());var b=this.getParentView().mc?"vertical":"horizontal";this.x.className.indexOf(" "+b)<0&&webix.html.addCss(this.x,b),webix.env.transform||webix.html.addCss(this.x,"webix_ie",!0)},hd:function(){return this.s.collapsed?this.s.headerAltHeight:this.s.headerHeight},$setSize:function(a,b){if(webix.ui.view.prototype.$setSize.call(this,a,b)||this.hd()!=this.CA){a=this.bc,b=this.dc;var c=this.CA=this.hd();if(this.s.header)if(this.bd.style.height=c+"px",this.bd.style.width="auto",this.bd.style[webix.env.transform]="",this.bd.style.borderBottomWidth=(this.s.collapsed?0:1)+"px",this.getParentView().mc||!this.s.collapsed)b-=this.hd();else if(this.s.collapsed)if(webix.animate.isSupported()){this.bd.style.width=b+"px",this.bd.style.height=a+3+"px";var d=Math.floor(b/2-a/2)+(a-this.s.headerAltHeight)/2;this.bd.style[webix.env.transform]="rotate(90deg) translate("+d+"px, "+(d+1)+"px)"}else this.bd.style.width=a+"px",this.bd.style.height=b+3+"px";this.s.collapsed||(this.gd.$setSize(a,b),this.ct=b)}else if(!this.s.collapsed){var e=this.gd;this.ct&&e.$setSize(this.bc,this.ct)}},$skin:function(){var a=this.defaults;a.headerAltHeight=a.headerHeight=webix.skin.$active.barHeight,webix.skin.$active.borderlessAccordion&&(a.borderless=!0)},defaults:{header:!1,headerAlt:!1,body:""}},webix.MouseEvents,webix.EventSystem,webix.ui.view),webix.protoUI({name:"accordion",defaults:{panelClass:"accordionitem",multi:!1,collapsed:!1},addView:function(a){var b=webix.ui.layout.prototype.addView.apply(this,arguments),c=webix.$$(b);return c.collapsed_setter&&c.refresh&&c.refresh(),b},kc:function(){for(var a=this.s.panelClass,b=this.nc,c=0;c<b.length;c++)!b[c].body&&!b[c].header||b[c].view||(b[c].view=a),webix.isUndefined(b[c].collapsed)&&(b[c].collapsed=this.s.collapsed);this.nd=!0,webix.ui.layout.prototype.kc.call(this),this.nd=!1;for(var c=0;c<this.q.length;c++)this.q[c].name==a&&this.q[c].refresh(),this.q[c].od=!1;for(var d=!1,c=this.q.length-1;c>=0&&!d;c--)this.q[c].s.hidden||(this.q[c].od=!0,d=!0)},md:function(a){if(this.s.multi===!1&&this.nd!==!0)for(var b=0;b<this.q.length;b++)a!=this.q[b]&&!this.q[b].s.collapsed&&this.q[b].collapse&&this.q[b].collapse()},jd:function(a){if(this.s.multi===!0||this.nd)return!0;for(var b=0;b<this.q.length;b++)if(a!=this.q[b]&&!this.q[b].s.collapsed&&this.q[b].isVisible())return!0;return!1},$skin:function(){var a=this.defaults;webix.skin.$active.accordionType&&(a.type=webix.skin.$active.accordionType)}},webix.ui.layout),webix.protoUI({name:"headerlayout",defaults:{type:"accordion",multi:"mixed",collapsed:!1}},webix.ui.accordion),webix.DragControl={pd:webix.toArray(["dummy"]),addDrop:function(a,b,c){a=webix.toNode(a),a.webix_drop=this.qd(b),c&&(a.webix_master=!0)},qd:function(a){a=a||webix.DragControl;var b=this.pd.find(a);return 0>b&&(b=this.pd.length,this.pd.push(a)),b},UB:function(a){var b=webix.DragControl,c=this.VB();if(c&&c.WB){b.v||b.createDrag(a);var d=b.Gd;b.v.style.left=a.x+b.left+(d.x_offset||0)+"px",b.v.style.top=a.y+b.top+(d.y_offset||0)+"px"}},addDrag:function(a,b){a=webix.toNode(a),a.webix_drag=this.qd(b),webix.event(a,webix.env.mouse.down,this.rd,{bind:a}),webix.event(a,"dragstart",webix.html.preventEvent)},rd:function(a){if(webix.DragControl.sd){if(webix.DragControl.td==a)return;webix.DragControl.ud(),webix.DragControl.destroyDrag(a)}webix.DragControl.sd=this;var b=webix.env.mouse.context(a);webix.DragControl.vd=b,webix.DragControl.td=a,webix.DragControl.wd=webix.event(document.body,webix.env.mouse.move,webix.DragControl.xd),webix.DragControl.yd=webix.event(document.body,webix.env.mouse.up,webix.DragControl.ud),webix.html.addCss(document.body,"webix_noselect",1)},ud:function(){webix.DragControl.zd()},xd:function(a){var b=webix.env.mouse.context(a),c=webix.DragControl.VB(),d=c&&webix.env.touch&&c.WB&&!webix.Touch.qm;return d||Math.abs(b.x-webix.DragControl.vd.x)<5&&Math.abs(b.y-webix.DragControl.vd.y)<5||(webix.DragControl.zd(!0),!webix.DragControl.v&&!webix.DragControl.createDrag(webix.DragControl.td))?void 0:(webix.DragControl.sendSignal("start"),webix.DragControl.wd=webix.event(document.body,webix.env.mouse.move,webix.DragControl.Ad),webix.DragControl.yd=webix.event(document.body,webix.env.mouse.up,webix.DragControl.Bd),webix.DragControl.Ad(a),webix.env.touch?webix.html.preventEvent(a):void 0)},Bd:function(a){webix.DragControl.zd(),webix.DragControl.td=null,webix.DragControl.Cd&&(webix.DragControl.$drop(webix.DragControl.sd,webix.DragControl.Cd,a),webix.DragControl.$dragOut(webix.DragControl.sd,webix.DragControl.Cd,null,a)),webix.DragControl.destroyDrag(a),webix.DragControl.sendSignal("stop")},zd:function(a){this.wd=webix.eventRemove(this.wd),this.yd=webix.eventRemove(this.yd),a||webix.html.removeCss(document.body,"webix_noselect")},Ad:function(a){var b=webix.DragControl,c=webix.html.pos(a),d=webix.env.mouse.context(a),e=b.$dragPos(c,a),f=b.Gd;if(b.v.style.top=c.y+b.top+(e||!f.y_offset?0:f.y_offset)+"px",b.v.style.left=c.x+b.left+(e||!f.x_offset?0:f.x_offset)+"px",b.Ed)b.Ed=!1;else{var g=d.target=webix.env.touch?document.elementFromPoint(d.x,d.y):d.target,h=webix.env.touch?d:a;b.Fd(g,h)}return webix.html.preventEvent(a)},Fd:function(a,b){for(;a&&"BODY"!=a.tagName;){if(a.webix_drop){if(this.Cd&&(this.Cd!=a||a.webix_master)&&this.$dragOut(this.sd,this.Cd,a,b),!this.Cd||this.Cd!=a||a.webix_master)return this.Cd=null,this.Dd=this.$dragIn(webix.DragControl.sd,a,b),void(this.Dd&&(this.Cd=a));return}a=a.parentNode}this.Cd&&(this.Cd=this.Dd=this.$dragOut(this.sd,this.Cd,null,b))},sendSignal:function(a){webix.DragControl.active="start"==a},getMaster:function(a){return this.pd[a.webix_drag||a.webix_drop]},getContext:function(){return this.Gd},getNode:function(){return this.v},createDrag:function(a){var b=webix.DragControl,c=b.sd;b.Gd={};var d,e=this.pd[c.webix_drag];if(e.$dragCreate){if(d=e.$dragCreate(c,a),!d)return!1;this.ZB(a),d.style.position="absolute"}else{var f=b.$drag(c,a);if(b.ZB(a),!f)return!1;d=document.createElement("DIV"),d.innerHTML=f,d.className="webix_drag_zone",document.body.appendChild(d);var g=b.Gd;g.html&&webix.env.pointerevents&&(g.x_offset=-Math.round(.5*d.offsetWidth),g.y_offset=-Math.round(.75*d.offsetHeight))}return d.style.zIndex=Math.max(d.style.zIndex,webix.ui.zIndex()),webix.DragControl.Hd=webix.event(d,webix.env.mouse.move,webix.DragControl.Id),webix.DragControl.Gd.from||(webix.DragControl.Gd={source:c,from:c}),webix.DragControl.v=d,!0},Id:function(){webix.DragControl.Ed=!0},destroyDrag:function(a){var b=webix.DragControl.sd,c=this.pd[b.webix_drag];c&&c.$dragDestroy?(webix.DragControl.Hd=webix.eventRemove(webix.DragControl.Hd),webix.DragControl.v&&c.$dragDestroy(b,webix.DragControl.v,a)):webix.html.remove(webix.DragControl.v),webix.DragControl.Dd=webix.DragControl.sd=webix.DragControl.Cd=webix.DragControl.v=null},VB:function(){return webix.DragControl.pd[webix.DragControl.sd.webix_drag]},top:5,left:5,ZB:function(a){var b=webix.DragControl,c=b.vd,d=b.Gd;if("undefined"!=typeof d.x_offset&&"undefined"!=typeof d.y_offset)return null;if(d.x_offset=d.y_offset=0,webix.env.pointerevents){var e=webix.DragControl.VB();if(e.WB&&e!==this){var f=e.WB(c,a);f&&(d.x_offset=f.x-c.x,d.y_offset=f.y-c.y)}}},$dragPos:function(a,b){var c=this.pd[webix.DragControl.sd.webix_drag];return c.$dragPos&&c!=this?(c.$dragPos(a,b,webix.DragControl.v),!0):void 0},$dragIn:function(a,b,c){var d=this.pd[b.webix_drop];return d.$dragIn&&d!=this?d.$dragIn(a,b,c):(b.className=b.className+" webix_drop_zone",b)},$dragOut:function(a,b,c,d){var e=this.pd[b.webix_drop];return e.$dragOut&&e!=this?e.$dragOut(a,b,c,d):(b.className=b.className.replace("webix_drop_zone",""),null)},$drop:function(a,b,c){var d=this.pd[b.webix_drop];return webix.DragControl.Gd.from=webix.DragControl.getMaster(a),d.$drop&&d!=this?d.$drop(a,b,c):void b.appendChild(a)},$drag:function(a,b){var c=this.pd[a.webix_drag];return c.$drag&&c!=this?c.$drag(a,b):"<div style='"+a.style.cssText+"'>"+a.innerHTML+"</div>"}},webix.attachEvent("onLongTouch",function(a){webix.DragControl.sd&&webix.DragControl.UB(a)}),webix.DataMove={copy:function(a,b,c,d){d=d||{};var e=d.newId||a;c=c||this;var f=this.getItem(a);return c&&(f=c.Jd(f)),c.data.add(c.Jd(f,e),b,d.parent||0)},Kd:function(a,b,c){if(b&&a){var d=this.getIndexById(a);return d+(c==this&&c.getIndexById(b)<d?0:1)}},move:function(a,b,c,d){d=d||{};var e=d.newId||a;if(c=c||this,c.data){if(webix.isArray(a)){a.length>3&&(this.$blockRender=c.$blockRender=!0);for(var f=0;f<a.length;f++){var g=this.move(a[f],b,c,d);b=c.Kd(g,a[f+1],this)}return this.$blockRender=c.$blockRender=!1,void(a.length>3&&(this.refresh(),c!=this&&c.refresh()))}var g=a,h=this.getItem(a);return c&&c!=this?(g=c.data.add(c.Jd(h,e),b,d.parent||0),this.data.remove(a)):(0>b&&(b=this.data.order.length-1),this.data.move(this.getIndexById(a),b),this.data.callEvent("onDataMove",[a,b,null,this.data.order[b+1]])),g}},moveUp:function(a,b){return this.move(a,this.getIndexById(a)-(b||1))},moveDown:function(a,b){return this.moveUp(a,-1*(b||1))},moveTop:function(a){return this.move(a,0)},moveBottom:function(a){return this.move(a,this.data.count()-1)},Jd:function(a,b){var c=webix.extend({},a);return c.id=!b||this.data.pull[b]?webix.uid():b,c.$template=null,this.s.externalData&&(c=this.s.externalData.call(this,c,b)),c}},webix.Movable={move_setter:function(a){return a&&(this.Ld=webix.clone(this.Ld),this.Ld.master=this,webix.DragControl.addDrag(this.bd,this.Ld)),a},Ld:{$dragCreate:function(a,b){if(this.master.config.move){var c=webix.html.offset(a),d=webix.html.pos(b);return webix.DragControl.top=c.y-d.y,webix.DragControl.left=c.x-d.x,webix.toNode(this.master.x)}},$dragDestroy:function(a,b){var c=this.master;c.s&&(c.s.top=parseInt(b.style.top,10),c.s.left=parseInt(b.style.left,10)),webix.DragControl.top=webix.DragControl.left=5,this.master.callEvent("onViewMoveEnd",[])},$dragPos:function(a,b){this.master.callEvent("onViewMove",[a,b])}}},webix.Modality={Md:function(a){if(a){if(!this.Nd){this.Nd=webix.html.create("div",{"class":"webix_modal"});var b=this.s.zIndex||webix.ui.zIndex();this.Od=webix.Pd,webix.Pd=b,this.Nd.style.zIndex=b-1,this.x.style.zIndex=b,document.body.appendChild(this.Nd),webix.event(this.Nd,"click",webix.bind(this.Vw,this))}}else if(this.Nd){webix.html.remove(this.Nd);var c=this.Od;setTimeout(function(){webix.Pd=c},1),this.Nd=null}return a}},webix.protoUI({name:"window",$init:function(a){this.x.innerHTML="<div class='webix_win_content'><div class='webix_win_head'></div><div class='webix_win_body'></div></div>",this.w=this.x.firstChild,this.bd=this.w.childNodes[0],this.y=this.ed=this.w.childNodes[1],this.x.className+=" webix_window",this.fd=this.gd=null,this.s.Ob={top:!1,left:!1,right:!1,bottom:!1},a.id||(a.id=webix.uid()),webix.event(this.w,"click",webix.bind(this.Vw,this)),this.w.addEventListener&&webix.event(this.w,"click",function(){!this.s.zIndex&&this.s.toFront&&(this.x.style.zIndex=webix.ui.zIndex())},{bind:this,capture:!0}),a.modal&&(this.my=!0)},Vw:function(a){var b=webix.ui.et,c=b.find(this);-1==c&&(c=b.length-1),a.click_view=c,webix.env.isIE8&&(a.srcElement.click_view=c)},getChildViews:function(){return this.fd?[this.fd,this.gd]:[this.gd]},zIndex_setter:function(a){return this.x.style.zIndex=a,a},Rb:function(){this.gd={destructor:function(){}}},Qb:function(a){this.gd.destructor(),this.gd=a,this.gd.Xb=this,this.ed.appendChild(this.gd.x);var b=this.gd.x.style;b.borderTopWidth=b.borderBottomWidth=b.borderLeftWidth=b.borderRightWidth="1px",this.gd.s.Ob=webix.clone(this.s.Ob),this.resize(!0)},show:function(a,b,c){if(!this.callEvent("onBeforeShow",arguments))return!1;this.s.hidden=!1,this.x.style.zIndex=this.s.zIndex||webix.ui.zIndex(),(this.s.modal||this.my)&&(this.Md(!0),this.my=null);var d,e,f;if(b=b||{},b.pos||(b.pos=this.s.relative),a){"object"!=typeof a||a.tagName?(a=webix.toNode(a),d=webix.html.offset(a)):a.target||a.srcElement?(d=webix.html.pos(a),e=20,f=5):d=a;var g=Math.max(window.innerWidth||0,document.body.offsetWidth),h=Math.max(window.innerHeight||0,document.body.offsetHeight);e=e||a.offsetWidth||0,f=f||a.offsetHeight||0;var i=this.ac,j=d.x,k=d.y,l=0,m=0;if(this.s.autofit){var n=6,o=6,p=6;c="top",k=0,j=0,g-d.x-e<i[0]&&"right"==b.pos&&(b.pos="left"),"right"==b.pos?(j=d.x+n+e,o=-f,c="left",l=Math.round(d.y+f/2),m=j-p):"left"==b.pos?(j=d.x-n-i[0]-1,o=-f,c="right",l=Math.round(d.y+f/2),m=j+i[0]+1):(j=d.x<0?0:g-d.x>i[0]?d.x:g-n-i[0],m=Math.round(d.x+e/2),m>j+i[0]&&(m=j+i[0]/2));var q=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;(!i[1]||h+q-f-d.y-o>i[1])&&"top"!=b.pos?(k=f+d.y+o-4,l||(c="top",l=k-p)):(k=d.y-o-i[1],0>k?(k=0,"top"==c&&(c=!1)):l||(c="bottom",k--,l=k+i[1]+1))}var r=b.x||0,s=b.y||0;this.setPosition(j+r,k+s),this.Rd&&(c?this.Rd(c,m+r,l+s):this.Sd())}else this.s.position&&this.Td();this.x.style.display="block",this.Ww=1,webix.delay(function(){this.Ww=0},this,[],webix.env.touch?400:100),this.Qd(),this.config.autofocus&&(this.Vd=webix.UIManager.getFocus(),webix.UIManager.setFocus(this)),-1==webix.ui.et.find(this)&&webix.ui.et.push(this),this.callEvent("onShow",[])},Fb:function(a){if(!(this.s.hidden||this.s.modal||this.Ww||a&&a.showpopup||webix.Pd&&this.s.zIndex<=webix.Pd)){if(a){var b=webix.env.isIE8?a.srcElement.click_view:a.click_view;b||0===b||(b=-1);var c=webix.ui.et.find(this);if(b>=c)return}this.hide()}},hidden_setter:function(a){return a?this.hide():this.show(),!!a},hide:function(a){if(!this.$destructed&&(a||!this.s.hidden)){if(this.s.modal&&this.Md(!1),"top"==this.s.position?webix.animate(this.x,{type:"slide",x:0,y:-(this.dc+20),duration:300,callback:this.Wd,bind:this}):this.Wd(),this.s.autofocus){var b=document.activeElement;b&&this.x&&(this.x.contains(b)||b===document.body)&&(webix.UIManager.setFocus(this.Vd),this.Vd=null)}this.ny()}},ny:function(){var a=webix.ui.et,b=a.find(this),c=a.length-1;if(b>-1)for(var d=c;d>b;d--)a[d].Sd&&a[d].hide();a.removeAt(b)},destructor:function(){this.Md(!1),webix.html.remove(this.x),this.s.autofocus&&(webix.B||webix.UIManager.setFocus(this.Vd),this.Vd=null),this.ny(),this.Sd&&this.Sd(),webix.Destruction.destructor.apply(this,[])},Wd:function(){this.$destructed||(this.x.style.display="none",this.s.hidden=!0,this.callEvent("onHide",[]))},close:function(){this.destructor()},Xd:function(a){a.borderless=!0},body_setter:function(a){return"object"!=typeof a&&(a={template:a}),this.Xd(a),webix.Xb=this,this.gd=webix.ui.A(a),this.gd.Xb=this,this.ed.appendChild(this.gd.x),a},head_setter:function(a){return a===!1?a:("object"!=typeof a&&(a={template:a,padding:0}),a.borderless=!0,webix.Xb=this,this.fd=webix.ui.A(a),this.fd.Xb=this,this.bd.appendChild(this.fd.x),a)},getBody:function(){return this.gd},getHead:function(){return this.fd},adjust:function(){return this.resize()},resizeChildren:function(){this.gd&&this.resize()},resize:function(){webix.ui.baseview.prototype.adjust.call(this),this.Td(this.s.left,this.s.top)},Td:function(a,b){if(this.s.position){this.$view.style.position="fixed";var c=this.bc,d=this.dc,e=window.innerWidth||document.documentElement.offsetWidth,f=window.innerHeight||document.documentElement.offsetHeight,g=Math.round((e-c)/2),h=Math.round((f-d)/2);if("function"==typeof this.s.position){var i={left:g,top:h,width:c,height:d,maxWidth:e,maxHeight:f};this.s.position.call(this,i),(i.width!=c||i.height!=d)&&this.$setSize(i.width,i.height),this.setPosition(i.left,i.top)}else"top"==this.s.position&&(h=webix.animate.isSupported()?-1*d:10),this.setPosition(g,h);"top"==this.s.position&&webix.animate(this.x,{type:"slide",x:0,y:d-2*(this.s.padding||0),duration:300,callback:this.Yd,bind:this})}else this.setPosition(a,b)},Yd:function(a){webix.animate.clear(a),this.s.top=-(2*(this.s.padding||0)),this.setPosition(this.s.left,this.s.top)},setPosition:function(a,b){this.x.style.top=b+"px",this.x.style.left=a+"px",this.s.left=a,this.s.top=b},$getSize:function(a,b){var c=this.s.Ob;c&&(a+=(c.left?0:1)+(c.right?0:1),b+=(c.top?0:1)+(c.bottom?0:1)),this.s.head&&(b+=1);var d=this.gd.$getSize(0,0);if(this.fd){var e=this.fd.$getSize(0,0);e[3]==e[2]&&(this.s.headHeight=e[3]),b+=this.s.headHeight}if(this.s.fullscreen){var f=window.innerWidth||document.body.clientWidth,g=window.innerHeight||document.body.clientHeight;return[f,f,g,g]}var h=webix.ui.view.prototype.$getSize.call(this,0,0);return h[1]=Math.min(h[1],(d[1]>=1e5&&h[1]>=1e5?Math.max(d[0],300):d[1])+a),h[3]=Math.min(h[3],(d[3]>=1e5&&h[3]>=1e5?Math.max(d[2],200):d[3])+b),h[0]=Math.min(Math.max(h[0],d[0]+a),h[1]),h[2]=Math.min(Math.max(h[2],d[2]+b),h[3]),h},$setSize:function(a,b){webix.ui.view.prototype.$setSize.call(this,a,b),a=this.bc,b=this.dc,this.s.head===!1?(this.bd.style.display="none",this.gd.$setSize(a,b)):(this.fd.$setSize(a,this.s.headHeight),this.gd.$setSize(a,b-this.s.headHeight))},$skin:function(){this.defaults.headHeight=webix.skin.$active.barHeight},defaults:{top:0,left:0,autofit:!0,relative:"bottom",body:"",head:"",hidden:!0,autofocus:!0}},webix.ui.view,webix.Movable,webix.Modality,webix.EventSystem),webix.protoUI({name:"popup",$init:function(){this.s.head=!1,this.$view.className+=" webix_popup",webix.attachEvent("onClick",webix.bind(this.Fb,this)),this.attachEvent("onHide",this.Sd)},close:function(){webix.html.remove(this.$d),webix.ui.window.prototype.close.call(this)},$getSize:function(a,b){return webix.ui.window.prototype.$getSize.call(this,a+2*this.s.padding,b+2*this.s.padding)},$setSize:function(a,b){webix.ui.view.prototype.$setSize.call(this,a,b),a=this.bc-2*this.s.padding,b=this.dc-2*this.s.padding,this.w.style.padding=this.s.padding+"px",this.bd.style.display="none",this.gd.$setSize(a,b)},Xd:function(){},defaults:{padding:8},head_setter:function(){},Rd:function(a,b,c){this.Sd(),document.body.appendChild(this.$d=webix.html.create("DIV",{"class":"webix_point_"+a},"")),this.$d.style.zIndex=webix.ui.zIndex(),this.$d.style.top=c+"px",this.$d.style.left=b+"px"},Sd:function(){this.$d=webix.html.remove(this.$d)}},webix.ui.window),webix.ui.et=webix.toArray(),webix.extend(webix.ui.window,{resize_setter:function(a){return a&&!this.Yz&&this.Zz(),a},Zz:function(){this.$z||(this.x.firstChild.style.position="relative",this.$z=webix.html.create("DIV",{"class":"webix_resize_handle"}),this.x.firstChild.appendChild(this.$z),webix.event(this.$z,webix.env.mouse.down,this._z,{bind:this}))},aA:function(a,b){if(!this.bA){this.bA=webix.html.create("div",{"class":"webix_resize_frame"},""),document.body.appendChild(this.bA);var c=webix.html.offset(this.x);this.bA.style.left=c.x+"px",this.bA.style.top=c.y+"px",this.bA.style.zIndex=webix.ui.zIndex()}this.bA.style.width=a+"px",this.bA.style.height=b+"px"},_z:function(a){this.config.resize&&(webix.html.addCss(document.body,"webix_noselect webix_resize_cursor"),this.cA=webix.html.offset(this.x),this.dA=webix.event(document.body,webix.env.mouse.move,this.eA,{bind:this}),this.fA=webix.event(document.body,webix.env.mouse.up,this.gA,{bind:this}))},eA:function(a){if(this.cA!==!1){var b=webix.html.pos(a),c={x:b.x-this.cA.x+10,y:b.y-this.cA.y+10};if(Math.abs(this.cA.x-b.x)<(this.config.minWidth||100)||Math.abs(this.cA.y-b.y)<(this.config.maxHeight||100))return;this.hA=c,this.aA(c.x,c.y)}},gA:function(){this.bA&&(this.bA=webix.html.remove(this.bA)),webix.html.removeCss(document.body,"webix_resize_cursor"),webix.html.removeCss(document.body,"webix_noselect"),webix.eventRemove(this.dA),webix.eventRemove(this.fA),this.hA&&(this.config.width=this.hA.x,this.config.height=this.hA.y,this.resize()),this.cA=this.hA=!1,this.callEvent("onViewResize",[])}}),webix.protoUI({name:"suggest",defaults:{autofocus:!1,type:"list",keyPressTimeout:1,body:{yCount:10,autoheight:!0,body:!0,select:!0,borderless:!0,navigation:!0},filter:function(a,b){return 0===a.value.toString().toLowerCase().indexOf(b.toLowerCase())}},template_setter:webix.template,filter_setter:function(a){return webix.toFunctor(a,this.$scope)},$init:function(a){var b={};webix.extend(b,webix.copy(this.defaults.body)),b.view=a.type||this.defaults.type;var c=this.Jt(b);a.body&&webix.extend(c,a.body,!0),a.data&&(c.data=a.data),a.url&&(c.url=a.url),a.datatype&&(c.datatype=a.datatype),a.id&&(b.id=b.id||a.id+"_"+b.view),a.body=b,this.$ready.push(this._d),this.attachEvent("onShow",this.ke),this.oy={}},Jt:function(a){return a},Rs:function(a){if(a){var b,c,d;this.s.master&&(b=webix.$$(this.s.master),b.options_setter&&(c=b.getInputNode())&&(d=this.getItemText(a.id),webix.isUndefined(c.value)?c.innerHTML=d:c.value=d.replace(/<[^>]*>/g,"")))}},setMasterValue:function(a,b){var c=a.id?this.getItemText(a.id):a.text||a.value;if(this.s.master){var d=webix.$$(this.s.master);b&&a.id?d.refresh():d.options_setter?d.setValue(a.$empty?"":a.id):d.setValueHere?d.setValueHere(c):d.setValue(c)}else this.ae&&(this.ae.value=c);b||(this.hide(!0),this.ae&&this.ae.focus()),this.callEvent("onValueSuggest",[a,c]),webix.delay(function(){webix.callEvent("onEditEnd",[])})},getMasterValue:function(){return this.s.master?webix.$$(this.s.master).getValue():null},getItemText:function(a){var b=this.getList().getItem(a);if(!b)return this.oy[a]||"";if(this.s.template)return this.s.template.call(this,b,this.type);if(this.s.textValue)return b[this.s.textValue];var c=this.getList().type,d=c.template.call(c,b,c);return this.oy[a]=d},getSuggestion:function(){var a,b=this.getList(),c=b.data.order;return b.getSelectedId&&(a=b.getSelectedId()),c.length&&(!a||c.find(a)<0)&&(a=c[0]),a&&"object"==typeof a&&(a+=""),a},getList:function(){return this.gd},_d:function(){var a=this.getList(),b=this.s.type;a.count?(a.attachEvent("onItemClick",webix.bind(function(b){this.setMasterValue(a.getItem(b))},this)),a.data.attachEvent("onstoreupdated",webix.bind(function(a,b,c){"delete"==c&&a==this.getMasterValue()?this.setMasterValue({id:"",text:""},1):"update"==c&&a==this.getMasterValue()&&this.setMasterValue(b,1)},this)),a.data.attachEvent("onAfterFilter",webix.bind(this.be,this)),a.data.attachEvent("onStoreLoad",webix.bind(this.be,this)),webix.isUndefined(this.s.fitMaster)&&(this.s.fitMaster=!0)):"calendar"==b?(a.attachEvent("onDateSelect",function(a){this.getParentView().setMasterValue({value:a})}),a.attachEvent("onTodaySet",function(a){this.getParentView().setMasterValue({value:a})}),a.attachEvent("onDateClear",function(a){this.getParentView().setMasterValue({value:a})})):"colorboard"==b&&a.attachEvent("onSelect",function(a){this.getParentView().setMasterValue({value:a})})},input_setter:function(a){return this.linkInput(a),0},linkInput:function(a){var b;a.getInputNode?(b=a.getInputNode(),b.webix_master_id=a.s.id):b=webix.toNode(a),webix.event(b,"keydown",function(a){(b!=document.body||this.isVisible())&&this.ce(a)},{bind:this,id:"webix_suggest_keydown_"+b.webix_master_id}),this.pt=!0},ce:function(a){a=a||event;var b=this.getList(),c=a.target||a.srcElement;this.ae=c,this.s.master=c.webix_master_id,window.clearTimeout(this.de);var d=a.keyCode;return 16!=d&&17!=d?9==d?this.ee(this,b):27==d?this.fe(this,b):13==d?this.ge(this,b):this.he(a)?(webix.html.preventEvent(a),!1):void(webix.isUndefined(c.value)||(clearTimeout(this.dt),this.dt=webix.delay(function(){if(this.pt||webix.UIManager.getFocus()==webix.$$(this.s.master)){this.ie=!0;var a=c.value;b.config.dataFeed?b.filter("value",a):b.filter&&b.filter(webix.bind(function(b){return this.s.filter.call(this,b,a)},this))}},this,[],this.s.keyPressTimeout))):void 0},be:function(){if(!this.ie)return!0;this.ie=!1;var a=this.getList();a.count()>0?(this.adjust(),this.isVisible()||(this.je=!0),this.show(this.ae,null,!0),this.je=!1):(this.hide(!0),this.ae=null)},show:function(a){if(!this.isVisible()){var b=this.getList();b.filter&&!this.je&&(b.filter(""),this.ke(b)),this.$customWidth&&this.$customWidth(a),a.tagName&&this.s.fitMaster&&(this.s.width=a.offsetWidth-2),b.Np&&b.render(),this.adjust(),"INPUT"==a.tagName&&(this.ae=a)}webix.ui.popup.prototype.show.apply(this,arguments)},ke:function(a){if(a=a||this.getList(),a.select&&a.showItem){var b=this.getMasterValue();b&&a.exists&&a.exists(b)?(a.select(b),a.showItem(b)):(a.unselect(),a.showItem(a.getFirstId()))}},ge:function(a,b){if(b.count&&b.count())if(a.isVisible()){var c=b.getSelectedId(!1,!0);1==b.count()&&b.getFirstId()!=c&&(c=b.getFirstId()),c&&this.setMasterValue(b.getItem(c)),a.hide(!0)}else a.show(this.ae);else a.isVisible()&&a.hide(!0)},fe:function(a,b){return a.hide(!0)},ee:function(a,b){return a.hide(!0)},he:function(a){var b=this.getList(),c=a.keyCode;if(b.count&&b.moveSelection){if(!(38!==c||a.ctrlKey||a.metaKey||a.shiftKey||a.altKey))return b.moveSelection("up"),this.Rs(b.getSelectedItem()),!0;if(!(40!==c||a.ctrlKey||a.metaKey||a.shiftKey||a.altKey)){var d=this.isVisible();if(!d){if(!b.count())return!1;this.show(this.ae)}var e=b.getSelectedId();return!e&&b.count?b.select(b.getFirstId()):d&&b.moveSelection("down"),this.Rs(b.getSelectedItem()),!0}}return!1},getValue:function(){var a=this.getList().getSelectedId()||"";return a.id||a},setValue:function(a){var b=this.getList();a?b.exists(a)&&(b.select(a),b.showItem(a)):(b.unselect(),b.showItem(b.getFirstId()))}},webix.ui.popup),webix.attachEvent("onClick",function(a){var b=webix.$$(a);if(b&&b.touchable){webix.UIManager.applyChanges(b),b.getNode(a);var c=a.target||a.srcElement;if("webix_disabled"==c.className)return;var d="";if(c.className&&0===c.className.toString().indexOf("webix_view"))return;for(b&&webix.UIManager.sb(b);c&&c.parentNode;){if(c.getAttribute){if(c.getAttribute("view_id"))break;if(d=c.className){d=d.toString().split(" ");for(var e=0;e<d.length;e++)if(b.on_click[d[e]]){var f=b.on_click[d[e]].call(b,a,b.s.id,c);if(f===!1)return}}}c=c.parentNode}if(b.s.click){var g=webix.toFunctor(b.s.click,b.$scope);g&&g.call&&g.call(b,b.s.id,a)}var h=b.s.popup;if(b.s.popup&&!b.s.readonly){"object"!=typeof h||h.name||(h=b.s.popup=webix.ui(h).s.id);var h=webix.$$(h);h.isVisible()||(h.s.master=b.s.id,h.show(b.getInputNode()||b.getNode(),null,!0))}b.callEvent("onItemClick",[b.s.id,a])}}),webix.protoUI({name:"button",touchable:!0,$skin:function(){this.defaults.height=webix.skin.$active.buttonHeight||webix.skin.$active.inputHeight,this.le=webix.skin.$active.labelTopHeight||15},defaults:{template:function(a,b){var c=b.$renderInput(a,b);return a.badge&&(c=c.replace("</button>","<span class='webix_badge'>"+a.badge+"</span></button>")),"<div class='webix_el_box' style='width:"+a.awidth+"px; height:"+a.aheight+"px'>"+c+"</div>"},label:"",tabFocus:!0,borderless:!0},$renderInput:function(a){var b="class='webixtype_"+(a.type||"base")+"' ";return"<button type='button' "+b+">"+webix.template.escape(a.label||a.value)+"</button>"},$init:function(a){this.x.className+=" webix_control webix_el_"+(this.$cssName||this.name),this.data=this.s,this.y=this.x,this.$B(a)},hotkey_setter:function(a){var b=this;this.Bt(a,function(a,c){var d=b.$view.firstChild;if(d.dispatchEvent){var e=document.createEvent("MouseEvents");e.initEvent("click",!0,!0),c.preventDefault(),d.dispatchEvent(e)}})},Bt:function(a,b,c){var d=webix.UIManager.addHotKey(a,b,c);this.attachEvent("onDestruct",function(){webix.UIManager.removeHotKey(d,b,c)})},tooltip_setter:function(a){var b=this.re()||this.$view.firstChild;return b&&(b.title=a),a},type_setter:function(a){return this.ne[a]&&(this.$renderInput=webix.template(this.ne[a])),"prev"==a||"next"==a?this.oe=this.pe:this.oe=!1,a},ne:{htmlbutton:"<button type='button' class='webix_el_htmlbutton webixtype_base'>#label#</button>",prev:"<input type='button' class='webixtype_prev' value='#label#' /><div class='webix_el_arrow webixtype_prev_arrow'></div>",next:"<input type='button' class='webixtype_next' value='#label#' /><div class='webix_el_arrow webixtype_next_arrow'></div>",imageButton:"<button type='button' class='webix_img_btn_abs webixtype_base' style='width:100%; line-height:#cheight#px'><div class='webix_image' style='width:#dheight#px;height:#dheight#px;background-image:url(#image#);'> </div> #label#</button>",imageButtonTop:"<button type='button' class='webix_img_btn_abs webix_img_btn_abs_top webixtype_base'><div class='webix_image' style='width:100%;height:100%;background-image:url(#image#);'> </div> <div class='webix_img_btn_text'>#label#</div></button>",image:"<button type='button' class='webix_img_btn' style='line-height:#cheight#px;'><div class='webix_image' style='width:#cheight#px;height:#cheight#px;background-image:url(#image#);'> </div> #label#</button>",imageTop:"<button type='button' class='webix_img_btn_top' style='background-image:url(#image#);'><div class='webix_img_btn_text'>#label#</div></button>",
icon:"<button type='button' class='webix_img_btn' style='line-height:#cheight#px;'><span class='webix_icon_btn fa-#icon#' style='max-width:#cheight#px;'></span>#label#</button>",iconButton:"<button type='button' class='webix_img_btn_abs webixtype_base' style='width:100%;'><span class='webix_icon fa-#icon#'></span> #label#</button>",iconTop:"<button type='button' class='webix_img_btn_top' style='width:100%;top:4px;text-align:center;'><span class='webix_icon fa-#icon#'></span><div class='webix_img_btn_text'>#label#</div></button>",iconButtonTop:"<button type='button' class='webix_img_btn_abs webix_img_btn_abs_top webixtype_base' style='width:100%;top:0px;text-align:center;'><span class='webix_icon fa-#icon#'></span><div class='webix_img_btn_text'>#label#</div></button>"},qe:function(){for(var a=[],b=["input","select","textarea","button"],c=0;c<b.length;c++)for(var d=this.$view.getElementsByTagName(b[c]),e=0;e<d.length;e++)a.push(d[e]);return a},disable:function(){var a,b=this.re();if(webix.ui.baseview.prototype.disable.apply(this,arguments),b&&-1==b.className.indexOf(" webix_disabled_box")){b.className+=" webix_disabled_box";var c=this.qe();for(a=0;a<c.length;a++)c[a].setAttribute("disabled",!0);if("top"==this.s.labelPosition){var d=this.y.firstChild;d&&(d.className+=" webix_disabled_top_label")}}},enable:function(){webix.ui.baseview.prototype.enable.apply(this,arguments);var a=this.re();if(a){a.className=a.className.replace(" webix_disabled_box","");for(var b=this.qe(),c=0;c<b.length;c++)b[c].removeAttribute("disabled");if("top"==this.s.labelPosition){var d=this.y.firstChild;d&&(d.className=d.className.replace(" webix_disabled_top_label",""))}}},$setSize:function(a,b){webix.ui.view.prototype.$setSize.call(this,a,b)&&this.render()},setValue:function(a){var b=this.s.value;return b!=a&&(this.s.value=a,this.se&&this.$setValue(a),void this.callEvent("onChange",[a,b]))},$setValue:function(a){(this.getInputNode()||{}).value=a},getValue:function(){var a=this.se?this.$getValue():this.s.value;return"undefined"==typeof a?"":a},$getValue:function(){return this.s.value||""},focus:function(){var a=this.getInputNode();a&&a.focus&&a.focus()},blur:function(){var a=this.getInputNode();a&&a.blur&&a.blur()},getInputNode:function(){return this.y.getElementsByTagName("input")[0]||this.y.getElementsByTagName("button")[0]},re:function(){for(var a=0;a<this.y.childNodes.length;a++)if(this.y.childNodes[a].className.indexOf("webix_el_box")>=0)return this.y.childNodes[a];return null},ue:Math.sqrt(2),pe:function(){var a=this.s,b=this.re().childNodes[1],c=b.previousSibling,d="next"==a.type?"right":"left",e=a.aheight-2*webix.skin.$active.inputPadding-2,f=e*this.ue/2;b.style.width=f+"px",b.style.height=f+"px",b.style.top=(e-f)/2+webix.skin.$active.inputPadding+"px",b.style[d]=(e-f)/2+this.ue/2+"px",c.style.width=a.awidth-e/2-2+"px",c.style.height=e+2+"px",c.style[d]=e/2+2+"px",c.style.top=webix.skin.$active.inputPadding+"px"},$B:function(a){a=a||this.s,a.autowidth&&(a.width=webix.html.getTextSize(a.value||a.label,"webixbutton").width+(a.badge?15:0)+("iconButton"===a.type?30:0)+("icon"===a.type?20:0))},ve:function(){this.we=this.s.inputWidth||(this.bc-this.s.width>2?this.s.width:0)||this.bc,this.xe=this.s.inputHeight||this.zy||0},resize:function(){return this.$B(),webix.ui.view.prototype.resize.apply(this,arguments)},render:function(){if(this.ve(),this.s.awidth=this.we||this.bc,this.s.aheight=this.xe||this.dc,this.s.bheight=this.s.aheight+2,this.s.cheight=this.s.aheight-2*webix.skin.$active.inputPadding,this.s.dheight=this.s.cheight-2,webix.AtomRender.render.call(this)){if(this.se=!0,this.oe&&this.oe(),this.s.align){var a=this.y.firstChild;switch("top"==this.s.labelPosition&&a.nextSibling&&(a=a.nextSibling),this.s.align){case"right":a.style.cssFloat="right";break;case"center":a.style.display="inline-block",a.parentNode.style.textAlign="center";break;case"middle":a.style.marginTop=Math.round((this.dc-this.xe)/2)+"px";break;case"bottom":a.style.marginTop=this.dc-this.xe+"px";break;case"left":a.style.cssFloat="left"}}this.$render&&this.$render(this.data),this.s.disabled&&this.disable(),this.s.tooltip&&this.define("tooltip",this.s.tooltip),this.ze&&(this.ze(this.data),this.ze=0)}},refresh:function(){this.render()},on_click:{Ae:function(a,b){var c=webix.html.locate(a,"button_id");c&&this.callEvent("onBeforeTabClick",[c,a])&&(this.setValue(c),this.callEvent("onAfterTabClick",[c,a]))},webix_all_segments:function(a,b){this.on_click.Ae.call(this,a,b)},webix_all_tabs:function(a,b){this.on_click.Ae.call(this,a,b)},webix_inp_counter_next:function(a,b,c){this.next()},webix_inp_counter_prev:function(a,b,c){this.prev()},webix_inp_combo:function(a,b,c){c.focus()},webix_inp_checkbox_border:function(a,b,c){this.s.disabled||"DIV"==(a.target||a.srcElement).tagName||this.s.readonly||this.toggle()},webix_inp_checkbox_label:function(a,b,c){this.s.readonly||this.toggle()},webix_inp_radio_border:function(a,b,c){var d=webix.html.locate(a,"radio_id");this.setValue(d)},webix_inp_radio_label:function(a,b,c){return c=c.parentNode.getElementsByTagName("input")[0],this.on_click.webix_inp_radio_border.call(this,c,b,c)},webix_tab_more_icon:function(a,b,c){this.getPopup().resize(),this.getPopup().show(c,null,!0)},webix_tab_close:function(a,b,c){var d=webix.html.locate(a,"button_id");d&&this.callEvent("onBeforeTabClose",[d,a])&&this.removeOption(d)}},Be:function(a){for(var b=0;b<a.length;b++)"string"==typeof a[b]?a[b]={id:a[b],value:a[b]}:(webix.isUndefined(a[b].id)&&(a[b].id=a[b].value),webix.isUndefined(a[b].value)&&(a[b].value=a[b].id));return a},Yx:function(a){var b=a?a.placeholder:this.s.placeholder;return b?"<span class='webix_placeholder'>"+b+"</span>":""},eC:function(a){return"webix_"+a+"_"+this.s.id}},webix.ui.view,webix.AtomRender,webix.Settings,webix.EventSystem),webix.protoUI({name:"label",defaults:{template:"<div style='height:100%;line-height:#cheight#px'>#label#</div>"},$skin:function(){this.defaults.height=webix.skin.$active.inputHeight},focus:function(){return!1},re:function(){return this.y.firstChild},setHTML:function(a){this.s.template=function(){return a},this.refresh()},setValue:function(a){this.s.label=a,webix.ui.button.prototype.setValue.apply(this,arguments)},$setValue:function(a){this.y.firstChild.innerHTML=a},oe:function(){}},webix.ui.button),webix.protoUI({name:"icon",$skin:function(){this.defaults.height=webix.skin.$active.inputHeight},defaults:{template:function(a){return"<button type='button' "+(a.tabFocus?"":"tabindex='-1'")+" style='height:100%;width:100%;' class='webix_icon_button'><span class='webix_icon fa-"+a.icon+" '></span>"+(a.badge?"<span class='webix_badge'>"+a.badge+"</span>":"")+"</button>"},width:33},oe:function(){}},webix.ui.button),webix.protoUI({name:"text",Ce:!0,De:function(){this.Ce&&(webix.event(this.getInputNode(),"change",this.Xy,{bind:this}),this.s.suggest&&webix.$$(this.s.suggest).linkInput(this))},Xy:function(){var a=this.getValue();a!=this.s.value&&this.setValue(a,!0)},$skin:function(){this.defaults.height=webix.skin.$active.inputHeight,this.defaults.inputPadding=webix.skin.$active.inputPadding},$init:function(a){"top"==a.labelPosition&&webix.isUndefined(a.height)&&this.defaults.height&&(a.height=this.defaults.height+this.le),this.Ns=[],this.attachEvent("onAfterRender",this.De)},$renderIcon:function(){var a=this.s;if(a.icon){var b=a.aheight-2*a.inputPadding,c=(b-18)/2-1;return"<span style='height:"+(b-c)+"px;padding-top:"+c+"px;' class='webix_input_icon fa-"+a.icon+"'></span>"}return""},relatedView_setter:function(a){return this.attachEvent("onChange",function(){var a=this.getValue(),b=this.s.relatedAction,c=this.s.relatedView,d=webix.$$(c);if(!d){var e=this.getTopParentView();e&&e.$$&&(d=e.$$(c))}"enable"==b?a?d.enable():d.disable():a?d.show():d.hide()}),a},validateEvent_setter:function(a){return"blur"==a&&this.attachEvent("onBlur",this.validate),"key"==a&&this.attachEvent("onTimedKeyPress",this.validate),a},validate:function(){var a=this.s.validate;!a&&this.s.required&&(a=webix.rules.isNotEmpty);var b=(this.getFormView(),this.s.name),c=this.getValue(),d={};return d[b]=c,!(a&&!this.getFormView().Se(a,c,d,b))},bottomLabel_setter:function(a){return this.s.bottomPadding||(this.s.bottomPadding=18),a},py:function(){var a=this.s.invalidMessage;return"function"==typeof a&&a.call(this),a},setBottomText:function(a,b){var c=this.s;if("undefined"!=typeof a){if(c.bottomLabel==a)return;c.bottomLabel=a}var d=(c.invalid?c.invalidMessage:"")||c.bottomLabel;d||c.bottomPadding||(c.inputHeight=0),d&&!c.bottomPadding?(this.ry=1,c.bottomPadding=c.bottomPadding||b||18,c.height||this.render(),this.resize()):!d&&this.ry?(c.bottomPadding=this.ry=0,c.height||this.render(),this.resize()):this.render()},$getSize:function(){var a=webix.ui.view.prototype.$getSize.apply(this,arguments),b=this.config.bottomPadding;return b&&(a[2]+=b,a[3]+=b),a},$setSize:function(a,b){var c=this.s;if(webix.ui.view.prototype.$setSize.call(this,a,b)){if(!a||!b)return;"top"==c.labelPosition?(c.inputHeight||(this.zy=this.dc-this.le-(this.config.bottomPadding||0)),c.labelWidth=0):c.bottomPadding&&(c.inputHeight=this.dc-this.config.bottomPadding),this.render()}},Ee:function(a){var b=(this.we||0)-(a.label?this.s.labelWidth:0)-4-(a.iconWidth||0);return 0>b?0:b},Fe:function(a,b){var c="x"+webix.uid(),d=b.Ee(a),e=a.inputAlign||"left",f=(this.$renderIcon?this.$renderIcon(a):"",this.s.aheight-2*webix.skin.$active.inputPadding-2),g=a.text||a.value||this.Yx(a),h="<div class='webix_inp_static' tabindex='0' onclick='' style='line-height:"+f+"px;width: "+d+"px; text-align: "+e+";' >"+g+"</div>";return b.$renderInput(a,h,c)},qt:function(a){var b="<"+a+(this.s.placeholder?" placeholder='"+this.s.placeholder+"' ":" ");this.s.readonly&&(b+="readonly='true' ");var c=this.s.attributes;if(c)for(var d in c)b+=d+"='"+c[d]+"' ";return b},$renderLabel:function(a,b){var c=a.labelAlign||"left",d="top"==this.s.labelPosition,e=d?"display:block;":"width: "+this.s.labelWidth+"px;",f="",g=d?this.le-2:this.s.aheight-2*this.s.inputPadding;return a.label&&(f="<label style='"+e+"text-align: "+c+";line-height:"+g+"px;' onclick='' for='"+b+"' class='webix_inp_"+(d?"top_":"")+"label "+(a.required?"webix_required":"")+"'>"+(a.label||"")+"</label>"),f},$renderInput:function(a,b,c){var d=a.inputAlign||"left",e="top"==a.labelPosition,f=this.Ee(a);c=c||webix.uid();var g=this.$renderLabel(a,c),h="";if(b)h+=b;else{h+=this.qt("input")+"id='"+c+"' type='"+(a.type||this.name)+"' value='"+webix.template.escape(a.value||"")+"' style='width: "+f+"px; text-align: "+d+";'";var i=a.attributes;if(i)for(var j in i)h+=" "+j+"='"+i[j]+"'";h+=" />"}var k=this.$renderIcon?this.$renderIcon(a):"";h+=k;var l="";l=e?g+"<div class='webix_el_box' style='width:"+a.awidth+"px; height:"+a.aheight+"px'>"+h+"</div>":"<div class='webix_el_box' style='width:"+a.awidth+"px; height:"+a.aheight+"px'>"+g+h+"</div>";var m=a.awidth-f-2*webix.skin.$active.inputPadding,n=(a.invalid?a.invalidMessage:"")||a.bottomLabel;return n&&(l+="<div class='webix_inp_bottom_label' style='width:"+(f||a.awidth)+"px;margin-left:"+Math.max(m,webix.skin.$active.inputPadding)+"px;'>"+n+"</div>"),l},defaults:{template:function(a,b){return b.$renderInput(a)},label:"",labelWidth:80},type_setter:function(a){return a},oe:!1,$setValue:function(a){this.getInputNode().value=a},$getValue:function(){return this.getInputNode().value},suggest_setter:function(a){if(a){if("string"==typeof a){var b=webix.$$(a);if(b)return webix.$$(a).s.id;a={body:{url:a,dataFeed:a}}}else webix.isArray(a)?a={body:{data:this.Be(a)}}:a.body||(a.body={});webix.extend(a,{view:"suggest"});var c=webix.ui(a);return this.Ns.push(c),c.s.id}return!1}},webix.ui.button),webix.protoUI({name:"segmented",Ce:!1,$init:function(){this.attachEvent("onChange",function(a){if(this.s.multiview){var b=this.getTopParentView(),c=null;b&&b.$$&&(c=b.$$(a)),c||(c=webix.$$(a)),c&&c.show&&c.show()}})},defaults:{template:function(a,b){!a.options;var c=a.options;b.Be(c),c=b.yC(c);var d=b.Ee(a),e=webix.uid(),f="<div style='width:"+d+"px' class='webix_all_segments'>",g=a.optionWidth||Math.floor(d/c.length);a.value||(a.value=c[0].id);for(var h=0;h<c.length;h++)f+="<button type='button' style='width:"+(c[h].width||g)+"px' ",f+="class='"+(a.value==c[h].id?"webix_selected ":"")+"webix_segment_"+(h==c.length-1?"N":h>0?1:0)+"' button_id='"+c[h].id+"' >",f+=c[h].value+"</button>";return b.$renderInput(a,f+"</div>",e)}},$setValue:function(a){this.refresh()},getValue:function(){return this.s.value},getInputNode:function(){return null},optionIndex:function(a){for(var b=this.s.options,c=0;c<b.length;c++)if(b[c].id==a)return c;return-1},addOption:function(a,b,c,d){var e=a;"object"!=typeof a?(b=b||a,e={id:a,value:b}):(a=e.id,d=c,c=b),this.optionIndex(a)<0&&webix.PowerArray.insertAt.call(this.s.options,e,d),c&&this.setValue(a)},removeOption:function(a,b){var c=this.optionIndex(a),d=this.s.options;c>=0&&webix.PowerArray.removeAt.call(d,c),this.s.value==a&&this.zC(d,c),this.callEvent("onOptionRemove",[a,this.s.value]),this.refresh()},zC:function(a,b){var c=a.length;if(c){b=Math.min(b,c-1);for(var d=b;c>d;d++)if(!a[d].hidden)return this.setValue(a[d].id);for(var d=b;d>=0;d--)if(!a[d].hidden)return this.setValue(a[d].id)}this.setValue("")},yC:function(a){for(var b=[],c=0;c<a.length;c++)a[c].hidden||b.push(a[c]);return b},AC:function(a,b){var c=this.s.options,d=this.optionIndex(a),e=c[d];e&&b==!!e.hidden&&(e.hidden=!b,b||this.s.value!=a?this.refresh():this.zC(c,d))},hideOption:function(a){this.AC(a,!1)},showOption:function(a){this.AC(a,!0)},oe:!1},webix.ui.text),webix.protoUI({name:"search",$skin:function(){this.defaults.inputPadding=webix.skin.$active.inputPadding},on_click:{webix_input_icon:function(a){return this.callEvent("onSearchIconClick",[a])}},defaults:{type:"text",icon:"search"}},webix.ui.text),webix.protoUI({name:"toggle",Ce:!0,$init:function(){this.attachEvent("onItemClick",function(){this.toggle()})},$setValue:function(a){this.render()},toggle:function(){this.setValue(!this.getValue())},getValue:function(){var a=this.s.value;return a&&"0"!=a?1:0},defaults:{template:function(a,b){var c=a.value?" webix_pressed":"";return a.label=(a.value?a.onLabel:a.offLabel)||a.label,a.icon=(a.value?a.onIcon:a.offIcon)||a.icon,"<div class='webix_el_box"+c+"' style='width:"+a.awidth+"px; height:"+a.aheight+"px'>"+b.$renderInput(a,b)+"</div>"}},oe:!1},webix.ui.button),webix.protoUI({name:"select",defaults:{template:function(a,b){var c=b.Be(a.options),d="x"+webix.uid(),e=b.qt("select")+"id='"+d+"' style='width:"+b.Ee(a)+"px;'>",f=webix.$$(c);if(f&&f.data&&f.data.each)f.data.each(function(b){e+="<option"+(b.id==a.value?" selected='true'":"")+" value='"+b.id+"'>"+b.value+"</option>"});else for(var g=0;g<c.length;g++)e+="<option"+(c[g].id==a.value?" selected='true'":"")+" value='"+c[g].id+"'>"+c[g].value+"</option>";return e+="</select>",b.$renderInput(a,e,d)}},options_setter:function(a){if(a){if("string"==typeof a){var b=new webix.DataCollection({url:a});return b.data.attachEvent("onStoreLoad",webix.bind(this.refresh,this)),b}return a}},getInputNode:function(){return this.y.getElementsByTagName("select")[0]}},webix.ui.text),webix.protoUI({name:"textarea",$skin:function(){},defaults:{template:function(a,b){var c=a.name||a.id,d="x"+webix.uid(),e=b.qt("textarea")+"style='width:"+b.Ee(a)+"px;'";return e+=" id='"+d+"' name='"+c+"' class='webix_inp_textarea'>"+(a.value||"")+"</textarea>",b.$renderInput(a,e,d)},height:0,minHeight:60},Dt:!0,$renderLabel:function(a,b){var c=a.labelAlign||"left",d="top"==this.s.labelPosition,e=d?"display:block;":"width: "+this.s.labelWidth+"px;",f="";return d?this.le-2:(webix.skin.$active.inputHeight||this.s.aheight)-2*this.s.inputPadding,a.label&&(f="<label style='"+e+"text-align: "+c+";' onclick='' for='"+b+"' class='webix_inp_"+(d?"top_":"")+"label "+(a.required?"webix_required":"")+"'>"+(a.label||"")+"</label>"),f},getInputNode:function(){return this.y.getElementsByTagName("textarea")[0]}},webix.ui.text),webix.protoUI({name:"counter",defaults:{template:function(a,b){var c=a.value||0,d="x"+webix.uid(),e="<div class='webix_el_group' style='width:"+b.Ee(a)+"px'>";return e+="<button type='button' class='webix_inp_counter_prev'>-</button>",e+=b.qt("input")+" id='"+d+"' type='text' class='webix_inp_counter_value' value='"+c+"'></input>",e+="<button type='button' class='webix_inp_counter_next'>+</button></div>",b.$renderInput(a,e,d)},min:0,max:1/0,step:1},$setValue:function(a){this.getInputNode().value=a},getInputNode:function(){return this.y.getElementsByTagName("input")[0]},getValue:function(a){return 1*webix.ui.button.prototype.getValue.apply(this,arguments)},next:function(a){a=this.s.step,this.shift(a)},prev:function(a){a=-1*this.s.step,this.shift(a)},shift:function(a){var b=this.s.min,c=this.s.max,d=this.getValue()+a;d>=b&&c>=d&&this.setValue(d)}},webix.ui.text),webix.protoUI({name:"checkbox",defaults:{checkValue:1,uncheckValue:0,template:function(a,b){var c="x"+webix.uid(),d="";a.labelRight&&(d="<label class='webix_label_right'>"+a.labelRight+"</label>",a.labelWidth&&(a.label=a.label||"&nbsp;"));var e=a.checkValue==a.value,f=Math.floor((b.s.aheight-16)/2),g=b.qt("input")+"style='margin-top:"+f+"px;"+(a.customCheckbox?"display:none":"")+"' id='"+c+"' type='checkbox' "+(e?"checked='1'":"")+"/>",h="webix_inp_checkbox_border webix_el_group webix_checkbox_"+(e?"1":"0"),i="<div style='line-height:"+b.s.cheight+"px' class='"+h+"'>"+g+(a.customCheckbox||"")+d+"</div>";return b.$renderInput(a,i,c)}},customCheckbox_setter:function(a){return a===!0&&webix.skin.$active.customCheckbox&&(a="<a onclick='javascript:void(0)'><button type='button' class='webix_custom_checkbox'></button></a>"),a},focus:function(){var a=this.$view.getElementsByTagName(this.s.customCheckbox?"button":"input")[0];a&&a.focus()},blur:function(){var a=this.$view.getElementsByTagName(this.s.customCheckbox?"button":"input")[0];a&&a.blur()},De:function(){},$setValue:function(a){var b=a==this.s.checkValue,c=this.getInputNode()?this.getInputNode().parentNode:null;c&&(c.className=c.className.replace(/(webix_checkbox_)\d/,"$1"+(b?1:0))),this.getInputNode().checked=b},toggle:function(){var a=this.getValue()!=this.s.checkValue?this.s.checkValue:this.s.uncheckValue;this.setValue(a)},getValue:function(){var a=this.s.value;return a==this.s.checkValue?this.s.checkValue:this.s.uncheckValue},$skin:function(){webix.skin.$active.customCheckbox&&(this.defaults.customCheckbox=!0)}},webix.ui.text),webix.protoUI({name:"radio",defaults:{template:function(a,b){for(var c,d=b.Be(a.options),e=[],f=0;f<d.length;f++){var g="x"+webix.uid();c=c||g,f&&(d[f].newline||a.vertical)&&e.push("<div class='webix_line_break'></div>");var h=d[f].id==a.value,i=b.qt("input")+" name='"+a.name+"' type='radio' "+(h?"checked='1'":"")+" value='"+d[f].id+"' id='"+g+"' style='"+(a.customRadio?"display:none":"")+"' />",j="<div radio_id='"+d[f].id+"' class='webix_inp_radio_border webix_radio_"+(h?"1":"0")+"'>"+i+(a.customRadio||"")+"</div>",k=d[f].value||"";k&&(k="<label for='"+g+"' class='webix_label_right'>"+k+"</label>"),e.push("<div class='webix_radio_option'>"+j+k+"</div>")}return e="<div class='webix_el_group' style='margin-left:"+(a.label?a.labelWidth:0)+"px;'>"+e.join("")+"</div>",b.$renderInput(a,e,c)}},refresh:function(){this.render(),this.ac&&this.$getSize(0,0)[2]!=this.ac[1]&&this.resize()},$getSize:function(a,b){var c=webix.ui.button.prototype.$getSize.call(this,a,b);if(this.s.options){for(var d=0,e=0;e<this.s.options.length;e++)(this.s.vertical||this.s.options[e].newline)&&d++;c[3]=c[2]=Math.max(c[2],(this.s.optionHeight||25)*d+2*this.s.inputPadding)}var f=this.config.bottomPadding;return f&&(c[2]+=f,c[3]+=f),c},Ie:function(){return this.y.getElementsByTagName("input")},$setValue:function(a){for(var b=this.Ie(),c=0;c<b.length;c++){b[c].parentNode.getAttribute("radio_id")==a?(b[c].className="webix_inp_radio_on",b[c].checked=!0):(b[c].className="webix_inp_radio_on webix_hidden",b[c].checked=!1);var d=b[c]?b[c].parentNode:null;d&&(d.className=d.className.replace(/(webix_radio_)\d/,"$1"+(b[c].checked?1:0)))}},getValue:function(a){return this.s.value},focus:function(){var a=this.$view.getElementsByTagName(this.s.customRadio?"button":"input")[0];a&&a.focus()},blur:function(){var a=this.$view.getElementsByTagName(this.s.customRadio?"button":"input")[0];a&&a.blur()},customRadio_setter:function(a){return a===!0&&webix.skin.$active.customRadio&&(a="<a onclick='javascript:void(0)'><button type='button'  class='webix_custom_radio'></button></a>"),a},$skin:function(){webix.skin.$active.customRadio&&(this.defaults.customRadio=!0),webix.skin.$active.optionHeight&&(this.defaults.optionHeight=webix.skin.$active.optionHeight)}},webix.ui.text),webix.protoUI({name:"richselect",defaults:{template:function(a,b){return b.Fe(a,b)},popupWidth:200,icon:"angle-down"},suggest_setter:function(a){return this.options_setter(a)},options_setter:function(a){a=this.Kt?this.Kt(a):a;var b=this.s.popup=this.s.suggest=webix.ui.text.prototype.suggest_setter.call(this,a),c=webix.$$(b).getList();return c&&c.attachEvent("onAfterLoad",webix.bind(this.Ss,this)),b},getList:function(){var a=webix.$$(this.s.suggest);return a.getList()},Ss:function(){var a=this.s.value;webix.isUndefined(a)||this.getPopup().isVisible()||this.s.text||this.$setValue(a)},$skin:function(){this.defaults.inputPadding=webix.skin.$active.inputPadding},$render:function(a){webix.isUndefined(a.value)||this.$setValue(a.value)},getInputNode:function(){return this.y.getElementsByTagName("DIV")[1]},getPopup:function(){return webix.$$(this.s.popup)},getText:function(){var a=this.getInputNode();return"undefined"==typeof a.value?a.innerHTML:a.value},$setValue:function(a){if(this.se){var b=a,c=this.getPopup();if(c)var b=this.getPopup().getItemText(a);!b&&a&&a.id&&(this.getPopup().getList().add(a),b=this.getPopup().getItemText(a.id),this.s.value=a.id),this.s.text=b;var d=this.getInputNode();webix.isUndefined(d.value)?d.innerHTML=b||this.Yx():d.value=b.replace(/<[^>]*>/g,"")}},getValue:function(){return this.s.value||""}},webix.ui.text),webix.protoUI({name:"combo",$init:function(){this.attachEvent("onBlur",webix.bind(function(a){if(this.s.text!=this.getText()){var b=this.getPopup().getSuggestion();if(!b||""===this.getInputNode().value&&""!==webix.$$(this.s.suggest).getItemText(b)){if(!this.s.editable){var c=this.getValue();this.$setValue(webix.isUndefined(c)?"":c)}}else this.setValue(b)}},this))},getInputNode:function(){return this.y.getElementsByTagName("input")[0]},$render:function(a){webix.isUndefined(a.value)||this.$setValue(a.value)},Xy:function(){var a=this.getInputNode(),b="";a.value&&(b=webix.$$(this.s.suggest).getSuggestion()||this.s.value),b!=this.s.value?this.setValue(b,!0):this.$setValue(b)},defaults:{template:function(a,b){return b.$renderInput(a)},icon:"angle-down"}},webix.ui.richselect),webix.protoUI({name:"datepicker",$init:function(){this.$ready.push(this.Je)},defaults:{template:function(a,b){"time"==b.s.type&&(b.s.icon=b.s.timeIcon);var c=a.type;a.type="";var d=a.editable?b.$renderInput(a):b.Fe(a,b);return a.type=c,d},stringResult:!1,timepicker:!1,icon:"calendar",icons:!0,timeIcon:"clock-o"},$skin:function(){this.defaults.inputPadding=webix.skin.$active.inputPadding},getPopup:function(){return webix.$$(this.s.popup)},Je:function(){var a=this.s;if(a.suggest)a.popup=a.suggest;else if(!a.popup){var b=this.s.timepicker;a.popup=a.suggest=this.suggest_setter({type:"calendar",height:240+(b?30:0),width:250,padding:0,body:{timepicker:b,type:this.s.type,icons:this.s.icons}})}this.ze=function(){}},$render:function(a){webix.isUndefined(a.value)||this.$setValue(a.value)},Tx:function(a){var b=this.s.type,c="time"==b;if(isNaN(parseFloat(a))||(a=""+a),"string"==typeof a&&a){var d=null;d="month"!=b&&"year"!=b||!this.Gx?c?webix.i18n.parseTimeFormatDate:webix.i18n.parseFormatDate:this.Gx,a=d(a)}if(a){if(c&&webix.isArray(a)){var e=new Date;e.setHours(a[0]),e.setMinutes(a[1]),a=e}isNaN(a.getTime())&&(a="")}return a},$setValue:function(a){var b=webix.$$(this.s.popup.toString()),c=b.gd;a=this.Tx(a),c.selectDate(a,!0),this.s.value=a?c.config.date:"";var d="time"==this.s.type,e=this.config.timepicker,f=this.Hx||(d?webix.i18n.timeFormatStr:e?webix.i18n.fullDateFormatStr:webix.i18n.dateFormatStr);this.s.text=a?f(this.s.value):"";var g=this.getInputNode();g.value==webix.undefined?g.innerHTML=this.s.text||this.Yx():g.value=this.s.text||""},format_setter:function(a){return a?"function"==typeof a?this.Hx=a:(this.Hx=webix.Date.dateToStr(a),this.Gx=webix.Date.strToDate(a)):this.Hx=this.Gx=null,a},getInputNode:function(){return this.s.editable?this.y.getElementsByTagName("input")[0]:this.y.getElementsByTagName("DIV")[1]},getValue:function(){var a=this.s.type,b="time"==a,c=this.config.timepicker,d=this.s.value;if(this.se){if(this.s.editable){var e=this.Gx||(b?webix.i18n.timeFormatDate:c?webix.i18n.fullDateFormatDate:webix.i18n.dateFormatDate);d=e(this.getInputNode().value)}}else d=this.Tx(d)||null;if(this.s.stringResult){var f=webix.i18n.parseFormatStr;return b&&(f=webix.i18n.parseTimeFormatStr),!this.Hx||"month"!=a&&"year"!=a||(f=this.Hx),d?f(d):""}return d||null},getText:function(){var a=this.getInputNode();return a?"undefined"==typeof a.value?a.innerHTML:a.value:""}},webix.ui.text),webix.protoUI({name:"colorpicker",$init:function(){this.$ready.push(this.Je)},defaults:{icon:!0},Je:function(){var a=this.s;a.suggest?a.popup=a.suggest:a.popup||(a.popup=a.suggest=this.suggest_setter({type:"colorboard",height:200})),this.ze=function(){}},$render:function(a){webix.isUndefined(a.value)||this.$setValue(a.value)},getValue:function(){return this.se&&this.s.editable?this.getInputNode().value:this.s.value},pz:function(){return this.$view.getElementsByTagName("DIV")[this.s.editable?1:2]},$setValue:function(a){var b=webix.$$(this.config.popup.toString()),c=b.getBody();c.setValue(a),this.config.value=a,this.pz().style.backgroundColor=a;var d=this.getInputNode();d.value==webix.undefined?d.innerHTML=a:d.value=a},$renderIcon:function(){var a=this.config;return'<div class="webix_input_icon" style="background-color:'+a.value+';"> </div>'}},webix.ui.datepicker),webix.RenderStack={$init:function(){this.v=document.createElement("DIV"),this.data.attachEvent("onIdChange",webix.bind(this.Ke,this)),this.attachEvent("onItemClick",this.Le),this.types||(this.types={"default":this.type},this.type.name="default"),this.type=webix.clone(this.type)},customize:function(a){webix.type(this,a)},type_setter:function(a){return this.types[a]?(this.type=webix.clone(this.types[a]),this.type.css&&(this.w.className+=" "+this.type.css)):this.customize(a),this.type.on_click&&webix.extend(this.on_click,this.type.on_click),a},template_setter:function(a){this.type.template=webix.template(a)},jb:function(a){var b=this.data.Me[a.id];return this.callEvent("onItemRender",[a]),this.type.templateStart(a,this.type,b)+(a.$template?this.type["template"+a.$template]:this.type.template)(a,this.type,b)+this.type.templateEnd(a,this.type,b)},Ne:function(a){return this.v.innerHTML=this.jb(a),this.v.firstChild},Ke:function(a,b){var c=this.getItemNode(a);c&&(c.setAttribute(this.ad,b),this.t[b]=this.t[a],delete this.t[a])},Le:function(){if(this.s.click){var a=webix.toFunctor(this.s.click,this.$scope);a&&a.call&&a.apply(this,arguments)}},getItemNode:function(a){if(this.t)return this.t[a];this.t={};for(var b=this.y.childNodes,c=0;c<b.length;c++){var d=b[c].getAttribute(this.ad);d&&(this.t[d]=b[c])}return this.getItemNode(a)},locate:function(a){return webix.html.locate(a,this.ad)},showItem:function(a){var b=this.getItemNode(a);if(b&&this.scrollTo){var c=Math.abs(this.w.offsetLeft-b.offsetLeft),d=c+b.offsetWidth,e=Math.abs(this.w.offsetTop-b.offsetTop),f=e+b.offsetHeight,g=this.getScrollState(),h=g.x;(h>c||h+this.bc<d)&&(h=c);var i=g.y;(i>e||i+this.dc<f)&&(i=e-5),this.scrollTo(h,i),this.Oe&&this.Oe(a)}},render:function(a,b,c){if(this.isVisible(this.s.id)&&!this.$blockRender)if(a){var d=this.getItemNode(a);switch(c){case"paint":case"update":if(!d)return;var e=this.t[a]=this.Ne(b);webix.html.insertBefore(e,d),webix.html.remove(d);break;case"delete":if(!d)return;webix.html.remove(d),delete this.t[a];break;case"add":var e=this.t[a]=this.Ne(b);webix.html.insertBefore(e,this.getItemNode(this.data.getNextId(a)),this.y);break;case"move":webix.html.insertBefore(this.getItemNode(a),this.getItemNode(this.data.getNextId(a)),this.y)}}else if(this.callEvent("onBeforeRender",[this.data])){(this.Pe||this.y).innerHTML=this.data.getRange().map(this.jb,this).join(""),this.t=null,this.callEvent("onAfterRender",[]);var e=this.y.offsetHeight}}},webix.ValidateData={$init:function(){this.h&&this.attachEvent("onChange",this.clearValidation)},clearValidation:function(){if(this.elements)for(var a in this.elements)this.Qe(a)},validate:function(a,b){this.callEvent("onBeforeValidate",[]);var c=this.Re={},d=!0,e=this.s.rules,f=this.isVisible&&!this.isVisible(),g=a&&a.hidden,h=a&&a.disabled,i={},j={};for(var k in this.elements){var l=this.elements[k].config.name;(f||this.elements[k].isVisible()||g)&&(this.elements[k].isEnabled()||h)?i[l]=this.elements[k]:j[l]=!0}if((e||i)&&!b&&this.getValues&&(b=this.getValues()),e){e.$obj&&(d=this.Se(e.$obj,b,b,"")&&d);var m=e.$all;if(m)for(var n in b)if(!j[n]){var o=this.Se(m,b[n],b,n);o||(c[n]=!0),d=o&&d}for(var n in e)if(!j[n]&&0!==n.indexOf("$")&&!c[n]){var o=this.Se(e[n],b[n],b,n);o||(c[n]=!0),d=o&&d}}if(i)for(var n in i)if(!c[n]){var p=i[n];if(p.validate){var o=p.validate();d=o&&d,o||(c[n]=!0)}else{var q=p.s;if(q){var r=q.validate;if(!r&&q.required&&(r=webix.rules.isNotEmpty),r){var o=this.Se(r,b[n],b,n);o||(c[n]=!0),d=o&&d}}}}return this.callEvent("onAfterValidation",[d,this.Re]),d},Se:function(a,b,c,d){return"string"==typeof a&&(a=webix.rules[a]),a.call(this,b,c,d)?(this.callEvent("onValidationSuccess",[d,c])&&this.Qe&&this.Qe(d),!0):(this.callEvent("onValidationError",[d,c])&&this.Te&&this.Te(d),!1)}},webix.ValidateCollection={Ue:function(){this.data.attachEvent("onStoreUpdated",webix.bind(function(a,b,c){!a||"add"!=c&&"update"!=c||this.validate(a)},this)),this.data.attachEvent("onClearAll",webix.bind(this.clearValidation,this)),this.Ue=function(){}},rules_setter:function(a){return a&&this.Ue(),a},clearValidation:function(){this.data.clearMark("webix_invalid",!0)},validate:function(a){var b=!0;if(a){this.Re={};var c=this.getItem(a);b=webix.ValidateData.validate.call(this,null,c),b?this.callEvent("onValidationSuccess",[a,c])&&this.Qe(a):this.callEvent("onValidationError",[a,c,this.Re])&&this.Te(a,this.Re)}else for(var d in this.data.pull)var b=this.validate(d)&&b;return b},Se:function(a,b,c,d){"string"==typeof a&&(a=webix.rules[a]);var e=a.call(this,b,c,d);return e||(this.Re[d]=!0),e},Qe:function(a){this.data.removeMark(a,"webix_invalid",!0)},Te:function(a,b){this.data.addMark(a,"webix_invalid",!0)}},webix.rules={isEmail:function(a){return/^[^@]+@[^@]+\.[^@]+$/.test((a||"").toString())},isNumber:function(a){return parseFloat(a)==a},isChecked:function(a){return!!a||"0"===a},isNotEmpty:function(a){return 0===a||a}},webix.MapCollection={$init:function(){this.$ready.push(this.cz),this.attachEvent("onStructureUpdate",this.cz)},cz:function(a){var a=this.dz=[],b=this.s;if(b.columns&&this.zj(b.columns),this.s.map&&this.ez(b.map),this.dz.length)try{this.data.qf=Function("obj",a.join("\n"))}catch(c){}},ez:function(a){for(var b in a)this.dz.push(this.fz(b,a[b]))},fz:function(a,b,c){var d="",e="";return 0===b.indexOf("(date)")?(d="webix.i18n.parseFormatDate(",e=")",c&&!c.format&&(c.format=webix.i18n.dateFormatStr),b=b.replace("(date)","")):0===b.indexOf("(number)")&&(d="(",e=")*1",b=b.replace("(number)","")),""!==b?(b=b.replace(/\{obj\.([^}]*)\}/g,"\"+(obj.$1||'')+\""),b=b.replace(/#([^#'";, ]+)#/gi,"\"+(obj.$1||'')+\"")):b='"+(obj.'+a+"||'')+\"","obj."+a+" = "+d+'"'+b+'"'+e+";"},zj:function(a){for(var b=0;b<a.length;b++){var c=a[b].map,d=a[b].id;d||(d=a[b].id="i"+webix.uid(),a[b].header||(a[b].header="")),c&&this.dz.push(this.fz(d,c,a[b])),this.Et(a[b])}},Et:function(a){
var b=a.options||a.collection;if(b)if("string"==typeof b){var c=webix.$$(b);c||(c=new webix.DataCollection({url:b}),this.Ns.push(c)),c.getBody&&(c=c.getBody()),this.Bj(c,a)}else if(b.loadNext)this.Bj(b,a);else if(b[0]&&"object"==typeof b[0])b=new webix.DataCollection({data:b}),this.Bj(b,a),this.Ns.push(b);else{if(webix.isArray(b)){for(var d={},e=0;e<b.length;e++)d[b[e]]=b[e];a.options=b=d}a.template=a.template||this.Ej(b,a.id,a.optionslist)}},Bj:function(a,b){if(b){delete b.options,b.collection=a,b.template=b.template||this.Dj(a,b.id,b.optionslist);var c=a.data.attachEvent("onStoreUpdated",webix.bind(function(){this.refresh(),this.refreshFilter(b.id)},this));this.attachEvent("onDestruct",function(){a.$destructed||a.data.detachEvent(c)})}},Ej:function(a,b,c){if(c){var d="string"==typeof c?c:",";return function(c,e){var f=c[b]||c.value;if(!f)return"";for(var g=f.split(d),h=0;h<g.length;h++)g[h]=a[g[h]]||"";return g.join(", ")}}return function(c,d){return a[c[b]]||c.value||""}},Dj:function(a,b,c){if(c){var d="string"==typeof c?c:",";return function(c,e){var f=c[b]||c.value;if(!f)return"";for(var g=f.split(d),h=0;h<g.length;h++){var i=a.data.pull[g[h]];g[h]=i?i.value||"":""}return g.join(", ")}}return function(c,d){var e=c[b]||c.value,f=a.data.pull[e];return f&&(f.value||0===f.value)?f.value:""}}},webix.DataLoader=webix.proto({$init:function(a){a=a||"",this.Ve=webix.toArray(),this.data=new webix.DataStore,this.data.attachEvent("onClearAll",webix.bind(this.We,this)),this.data.attachEvent("onServerConfig",webix.bind(this.Xe,this)),this.data.feed=this.Ye,this.data.owner=a.id},Ye:function(a,b,c){return this.Ze?this.Ze=[a,b,c]:(this.Ze=!0,this.$e=[a,b],void this._e.call(this,a,b,c))},_e:function(a,b,c,d,e){var f=null,d=d||this.data.url,g=[{success:this.af,error:this.af},c];if(0>a&&(a=0),e||(e={start:a,count:b}),this.count()&&(e["continue"]="true"),this.getState&&(f=this.getState()),d&&"string"!=typeof d)f&&(f.sort&&(e.sort=f.sort),f.filter&&(e.filter=f.filter)),this.load(d,g,e);else{d+=-1==d.indexOf("?")?"?":"&";var h=[];for(var i in e)h.push(i+"="+e[i]);if(f&&(f.sort&&h.push("sort["+f.sort.id+"]="+encodeURIComponent(f.sort.dir)),f.filter))for(var j in f.filter)h.push("filter["+j+"]="+encodeURIComponent(f.filter[j]));d+=h.join("&"),this.load(d,g)}},af:function(){var a=this.Ze,b=this.$e;this.Ze=!1,"object"!=typeof a||a[0]==b[0]&&a[1]==b[1]||this.data.feed.apply(this,a)},load:function(a,b){var a=webix.proxy.$parse(a),c=webix.AtomDataLoader.load.apply(this,arguments);return this.data.url||(this.data.url=a),c},loadNext:function(a,b,c,d,e){var f=this.s;return f.datathrottle&&!e?(this.bf&&window.clearTimeout(this.bf),void(this.bf=webix.delay(function(){this.loadNext(a,b,c,d,!0)},this,0,f.datathrottle))):(b||0===b||(b=this.count()),a||(a=f.datafetch||this.count()),this.data.url=this.data.url||d,void(this.callEvent("onDataRequest",[b,a,c,d])&&this.data.url&&this.data.feed.call(this,b,a,c)))},cf:function(a,b){var c=this.$e;return!!(this.Ze&&c&&c[0]<=b&&c[1]+c[0]>=a+b)},removeMissed_setter:function(a){return this.data.ff=a},gf:function(){var a=this.s.save;a===!0&&(a=this.s.save=this.s.url);var b={master:this};a&&a.url?webix.extend(b,a):b.url=a,webix.dp(b)},save_setter:function(a){return a&&this.$ready.push(this.gf),a},scheme_setter:function(a){this.data.scheme(a)},dataFeed_setter:function(a){return a=webix.proxy.$parse(a),this.data.attachEvent("onBeforeFilter",webix.bind(function(a,b){if("function"==typeof a)return!0;if(this.s.dataFeed&&(a||b)){a=a||"id",b&&"object"==typeof b&&(b=b.id),this.clearAll();var c=this.s.dataFeed;if("function"==typeof c){var d={};d[a]=b,c.call(this,b,d)}else if(c.$proxy){if(c.load){var e={};e[a]=b,c.load(this,{success:this.M,error:this.N},{filter:e})}}else{var f="filter["+a+"]="+encodeURIComponent(b);this.load(c+(c.indexOf("?")<0?"?":"&")+f,this.s.datatype)}return!1}},this)),a},ef:function(){if(this.s.ready&&!this.hf){var a=webix.toFunctor(this.s.ready,this.$scope);a&&webix.delay(a,this,arguments),this.hf=!0}},We:function(){for(var a=0;a<this.Ve.length;a++){var b=this.Ve[a];try{b.aborted=!0}catch(c){webix.ly.push(b)}b.abort()}this.Ve=webix.toArray(),this.waitData=webix.promise.defer()},Xe:function(a){this.C(a)}},webix.AtomDataLoader),webix.ly=webix.toArray(),webix.DataMarks={addCss:function(a,b,c){if(!this.addRowCss&&!c&&!this.hasCss(a,b)){var d=this.getItemNode(a);d&&(d.className+=" "+b,c=!0)}return this.data.addMark(a,b,1,1,c)},removeCss:function(a,b,c){if(!this.addRowCss&&!c&&this.hasCss(a,b)){var d=this.getItemNode(a);d&&(d.className=d.className.replace(b,"").replace("  "," "),c=!0)}return this.data.removeMark(a,b,1,c)},hasCss:function(a,b){return this.data.getMark(a,b)},clearCss:function(a,b){return this.data.clearMark(a,1,b)}},webix.DataStore=function(){this.name="DataStore",webix.extend(this,webix.EventSystem),this.setDriver("json"),this.pull={},this.order=webix.toArray(),this.Me={}},webix.DataStore.prototype={setDriver:function(a){this.driver=webix.DataDriver[a]},df:function(a,b){this.callEvent("onParse",[this.driver,a]),this.jf&&this.filter();var c=this.driver.getInfo(a);c.U&&(webix.securityKey=c.U),c.T&&this.callEvent("onServerConfig",[c.T]);var d=this.driver.getOptions(a);d&&this.callEvent("onServerOptions",[d]);var e=this.driver.getRecords(a);this.kf(c,e),this.lf&&this.mf&&!this.nf&&this.mf(this.lf),this.of&&(this.blockEvent(),this.sort(this.of),this.unblockEvent()),this.callEvent("onStoreLoad",[this.driver,a]),this.refresh()},kf:function(a,b){var c=1*(a.R||0),d=!0,e=!1;if(0===c&&this.order[0]&&this.order[this.order.length-1]){if(this.ff){e={};for(var f=0;f<this.order.length;f++)e[this.order[f]]=!0}d=!1,c=this.order.length}for(var g=0,f=0;f<b.length;f++){var h=this.driver.getDetails(b[f]),i=this.id(h);this.pull[i]?d&&this.order[g+c]&&g++:(this.order[g+c]=i,g++),this.pull[i]?(webix.extend(this.pull[i],h,!0),this.pf&&this.pf(this.pull[i]),e&&delete e[i]):(this.pull[i]=h,this.qf&&this.qf(h))}if(e){this.blockEvent();for(var j in e)this.remove(j);this.unblockEvent()}this.order[a.Q-1]||(this.order[a.Q-1]=webix.undefined)},id:function(a){return a.id||(a.id=webix.uid())},changeId:function(a,b){this.pull[a]&&(this.pull[b]=this.pull[a]),this.pull[b].id=b,this.order[this.order.find(a)]=b,this.jf&&(this.jf[this.jf.find(a)]=b),this.Me[a]&&(this.Me[b]=this.Me[a],delete this.Me[a]),this.callEvent("onIdChange",[a,b]),this.Ke&&this.Ke(a,b),delete this.pull[a]},getItem:function(a){return this.pull[a]},updateItem:function(a,b){var c=this.getItem(a);webix.isUndefined(b)||c===b||(webix.extend(c,b,!0),c.id=a),this.pf&&this.pf(c),this.callEvent("onStoreUpdated",[a,c,"update"]),this.callEvent("onDataUpdate",[a,c])},refresh:function(a){this.rf||(a?this.exists(a)&&this.callEvent("onStoreUpdated",[a,this.pull[a],"paint"]):this.callEvent("onStoreUpdated",[null,null,null]))},silent:function(a,b){this.rf=!0,a.call(b||this),this.rf=!1},getRange:function(a,b){if(a=a?this.getIndexById(a):this.$min||this.startOffset||0,b?b=this.getIndexById(b):(b=0===this.$max?0:Math.min(this.$max?this.$max-1:this.endOffset||1/0,this.count()-1),0>b&&(b=0)),a>b){var c=b;b=a,a=c}return this.getIndexRange(a,b)},getIndexRange:function(a,b){b=Math.min(0===b?0:b||1/0,this.count()-1);for(var c=webix.toArray(),d=a||0;b>=d;d++)c.push(this.getItem(this.order[d]));return c},count:function(){return this.order.length},exists:function(a){return!!this.pull[a]},move:function(a,b){if(a!=b){var c=this.getIdByIndex(a),d=this.getItem(c);this.jf&&this.sf(this.jf,0,0,this.getIdByIndex(a),this.getIdByIndex(b)),this.sf(this.order,a,b),this.callEvent("onStoreUpdated",[c,d,"move"])}},sf:function(a,b,c,d,e){if(d||e){b=c=-1;for(var f=0;f<a.length;f++)a[f]==d&&0>b&&(b=f),a[f]==e&&0>c&&(c=f)}var g=a[b];a.removeAt(b),a.insertAt(g,Math.min(a.length,c))},scheme:function(a){this.tf={},this.uf=a.$save,this.qf=a.$init||a.$change,this.pf=a.$update||a.$change,this.vf=a.$serialize,this.lf=a.$group,this.of=a.$sort;for(var b in a)"$"!=b.substr(0,1)&&(this.tf[b]=a[b])},importData:function(a,b){var c=a?a.data||a:[];if(this.jf=null,"function"==typeof c.serialize)this.order=webix.toArray([].concat(c.order)),this.pull=c.pull,c.branch&&this.branch&&(this.branch=webix.copy(c.branch),this.Mg=null);else{this.order=webix.toArray(),this.pull={};var d,e;if(webix.isArray(a))for(var f=0;f<a.length;f++)e=d=a[f],"object"==typeof e?d=e.id||webix.uid():e={id:d,value:d},this.order.push(e.id),this.qf&&this.qf(e),this.pull[e.id]=e;else for(var f in c)this.order.push(f),this.pull[f]={id:f,value:c[f]}}if(this.Pg&&!c.branch){this.branch={0:[]},this.Og||this.Lg("data");for(var g=0;g<this.order.length;g++){var f=this.order[g];this.Pg(this.pull[f],0,0,!1)}}this.callEvent("onStoreLoad",[]),b||this.callEvent("onStoreUpdated",[])},sync:function(a,b,c){var d=typeof a;if("string"==d&&(a=webix.$$("source")),"function"!=d&&"object"!=d&&(c=b,b=null),"DataStore"!=a.name){if(!a.data||"DataStore"!==a.data.name&&"TreeStore"!==a.data.name)return this.Ts=a,webix.callEvent("onSyncUnknown",[this,a,b]);a=a.data}var e=webix.bind(function(d,e,f){this.wf||(this.importData(a,!0),b&&this.silent(b),this.Y&&this.Y(),this.callEvent("onSyncApply",[]),c?c=!1:this.refresh())},this);this.ab=[a.attachEvent("onStoreUpdated",e),a.attachEvent("onIdChange",webix.bind(function(a,b){this.changeId(a,b),this.refresh(b)},this))],this.Ts=a,this.Us=this.attachEvent("onStoreUpdated",function(b,c,d){("update"==d||"save"==d)&&(this.wf=1,a.updateItem(b,c),this.wf=0)}),e()},unsync:function(){if(this.Ts){var a=this.Ts;if("DataStore"==a.name||a.data&&"DataStore"==a.data.name){for(var b=0;b<this.ab.length;b++)a.detachEvent(this.ab[b]);this.detachEvent(this.Us)}else webix.callEvent("onUnSyncUnknown",[this,a]);this.Ts=null}},destructor:function(){this.unsync(),this.pull=this.order=this.Me=null,this.i=this.j={}},add:function(a,b){if(this.tf)for(var c in this.tf)webix.isUndefined(a[c])&&(a[c]=this.tf[c]);this.qf&&this.qf(a);var d=this.id(a),e=arguments[2]||this.order,f=e.length;if((webix.isUndefined(b)||0>b)&&(b=f),b>f&&(b=Math.min(e.length,b)),this.callEvent("onBeforeAdd",[d,a,b])===!1)return!1;if(this.pull[d]=a,e.insertAt(d,b),this.jf){var g=this.jf.length;this.order.length&&(g=Math.min(b||0,g)),this.jf.insertAt(d,g)}return this.callEvent("onStoreUpdated",[d,a,"add"]),this.callEvent("onAfterAdd",[d,b]),a.id},remove:function(a){if(webix.isArray(a))for(var b=0;b<a.length;b++)this.remove(a[b]);else{if(this.callEvent("onBeforeDelete",[a])===!1)return!1;var c=this.getItem(a);this.order.remove(a),this.jf&&this.jf.remove(a),delete this.pull[a],this.Me[a]&&delete this.Me[a],this.callEvent("onStoreUpdated",[a,c,"delete"]),this.callEvent("onAfterDelete",[a])}},clearAll:function(){this.pull={},this.Me={},this.order=webix.toArray(),this.jf=this.url=null,this.callEvent("onClearAll",[]),this.refresh()},getIdByIndex:function(a){return this.order[a]},getIndexById:function(a){var b=this.order.find(a);return this.pull[a]?b:-1},getNextId:function(a,b){return this.order[this.getIndexById(a)+(b||1)]},getFirstId:function(){return this.order[0]},getLastId:function(){return this.order[this.order.length-1]},getPrevId:function(a,b){return this.order[this.getIndexById(a)-(b||1)]},sort:function(a,b,c){var d=a;"function"==typeof a?d={as:a,dir:b}:"string"==typeof a&&(d={by:a.replace(/#/g,""),dir:b,as:c});var e=[d.by,d.dir,d.as,d];this.callEvent("onBeforeSort",e)&&(this.order=this.xf(d,this.order),this.jf&&this.jf.length!=this.order.length&&(this.jf=this.xf(d,this.jf)),this.refresh(),this.callEvent("onAfterSort",e))},xf:function(a,b){var c=this.sorting.create(a);if(this.order.length){for(var d=webix.toArray(),e=b.length-1;e>=0;e--)d[e]=this.pull[b[e]];return d.sort(c),webix.toArray(d.map(function(a){return this.id(a)},this))}return b},Af:function(a){this.jf&&!a&&(this.order=this.jf,delete this.jf)},Bf:function(a,b,c){for(var d=webix.toArray(),e=0;e<this.order.length;e++){var f=this.order[e];a(this.getItem(f),b)&&d.push(f)}c&&this.jf||(this.jf=this.order),this.order=d},find:function(a,b){var c=[];for(var d in this.pull){var e=this.pull[d],f=!0;if("object"==typeof a){for(var g in a)if(e[g]!=a[g]){f=!1;break}}else a(e)||(f=!1);if(f&&c.push(e),b&&c.length)return c[0]}return c},filter:function(a,b,c){if((a||this.jf||this.Mg)&&this.callEvent("onBeforeFilter",[a,b])&&(this.Af(c),this.order.length)){if(a){var d=a;b=b||"","string"==typeof a&&(a=a.replace(/#/g,""),"function"==typeof b?d=function(c){return b(c[a])}:(b=b.toString().toLowerCase(),d=function(b,c){return-1!=(b[a]||"").toString().toLowerCase().indexOf(c)})),this.Bf(d,b,c,this.Cf)}this.refresh(),this.callEvent("onAfterFilter",[])}},Df:function(){for(var a=[],b=this.order.length-1;b>=0;b--)a[b]=this.pull[this.order[b]];return a},each:function(a,b,c){var d=this.order;c&&(d=this.jf||d);for(var e=0;e<d.length;e++)a.call(b||this,this.getItem(d[e]),e)},Ef:function(a,b){return function(){return a[b].apply(a,arguments)}},provideApi:function(a,b){b&&this.mapEvent({onbeforesort:a,onaftersort:a,onbeforeadd:a,onafteradd:a,onbeforedelete:a,onafterdelete:a,ondataupdate:a});for(var c=["sort","add","remove","exists","getIdByIndex","getIndexById","getItem","updateItem","refresh","count","filter","find","getNextId","getPrevId","clearAll","getFirstId","getLastId","serialize","sync"],d=0;d<c.length;d++)a[c[d]]=this.Ef(this,c[d])},addMark:function(a,b,c,d,e){var f=this.Me[a]||{};if(this.Me[a]=f,!f[b]){if(f[b]=d||!0,c){var g=f.$css||"";f.$css=g+" "+b}e||this.refresh(a)}return f[b]},removeMark:function(a,b,c,d){var e=this.Me[a];if(e){if(e[b]&&delete e[b],c){var f=e.$css;f&&(e.$css=f.replace(b,"").replace("  "," "))}d||this.refresh(a)}},getMark:function(a,b){var c=this.Me[a];return!!c&&c[b]},clearMark:function(a,b,c){for(var d in this.Me){var e=this.Me[d];e[a]&&(delete e[a],b&&e.$css&&(e.$css=e.$css.replace(a,"").replace("  "," ")),c||this.refresh(d))}},serialize:function(a){var b=this.order;a&&this.jf&&(b=this.jf);for(var c=[],d=0;d<b.length;d++){var e=this.pull[b[d]];this.vf&&(e=this.vf(e),e===!1)||c.push(e)}return c},sorting:{create:function(a){return this.Ff(a.dir,this.Gf(a.by,a.as))},as:{server:function(){return!1},date:function(a,b){return a-=0,b-=0,a>b?1:b>a?-1:0},"int":function(a,b){return a=1*a,b=1*b,a>b?1:b>a?-1:0},string_strict:function(a,b){return a=a.toString(),b=b.toString(),a>b?1:b>a?-1:0},string:function(a,b){return b?a?(a=a.toString().toLowerCase(),b=b.toString().toLowerCase(),a>b?1:b>a?-1:0):-1:1}},Gf:function(a,b){return a?("function"!=typeof b&&(b=this.as[b||"string"]),function(c,d){return b(c[a],d[a])}):b},Ff:function(a,b){return"asc"!=a&&a?function(a,c){return-1*b(a,c)}:b}}},webix.DataCollection=webix.proto({name:"DataCollection",isVisible:function(){return!!(this.data.order.length||this.data.jf||this.s.dataFeed)},$init:function(a){this.data.provideApi(this,!0);var b=a&&a.id?a.id:webix.uid();this.s.id=b,webix.ui.views[b]=this,this.data.attachEvent("onStoreLoad",webix.bind(function(){this.callEvent("onBindRequest",[])},this))},refresh:function(){this.callEvent("onBindRequest",[])}},webix.DataMove,webix.CollectionBind,webix.BindSource,webix.ValidateCollection,webix.DataLoader,webix.MapCollection,webix.EventSystem,webix.BaseBind,webix.Destruction,webix.Settings),webix.Scrollable={$init:function(a){return a&&!a.scroll&&this.If?this.y=this.y||this.w:((this.y||this.w).appendChild(webix.html.create("DIV",{"class":"webix_scroll_cont"},"")),this.y=(this.y||this.w).firstChild,void(webix.env.touch||webix.event(this.x,"scroll",webix.bind(function(a){this.callEvent&&webix.delay(function(){this.callEvent("onAfterScroll",[])},this)},this))))},scroll_setter:function(a){if(!a)return!1;var b="x"==a?"x":"xy"==a?"xy":"a"==a?"xy":"y";if(webix.Touch&&webix.Touch.$active)this.y.setAttribute("touch_scroll",b),this.attachEvent&&this.attachEvent("onAfterRender",webix.bind(this.Jf,this)),this.Kf=!0;else if(webix.env.$customScroll)webix.CustomScroll.enable(this,b);else{var c=this.y.parentNode.style;-1!=a.toString().indexOf("a")?c.overflowX=c.overflowY="auto":(-1!=b.indexOf("x")&&(this.ec=!0,c.overflowX="scroll"),-1!=b.indexOf("y")&&(this.cc=!0,c.overflowY="scroll"))}return b},Lf:function(a){if(!!this.s.scroll!=!!a){if(!webix.env.$customScroll){var b=this.y.parentNode.style;b.overflowX=b.overflowY=a?"auto":"hidden"}this.ec=this.cc=!!a,this.s.scroll=!!a}},getScrollState:function(){if(webix.Touch&&webix.Touch.$active){var a=webix.Touch.Mf(this.y);return{x:-a.e,y:-a.f}}return{x:this.y.parentNode.scrollLeft,y:this.y.parentNode.scrollTop}},scrollTo:function(a,b){webix.Touch&&webix.Touch.$active?(b=Math.max(0,Math.min(b,this.y.offsetHeight-this.dc)),a=Math.max(0,Math.min(a,this.y.offsetWidth-this.bc)),webix.Touch.Nf(this.y,-a,-b,this.s.scrollSpeed||"100ms")):(this.y.parentNode.scrollLeft=a,this.y.parentNode.scrollTop=b)},Jf:function(){if(-1!=this.s.scroll.toString().indexOf("x")){var a=this.y.scrollWidth;a&&(this.y.style.width="100%",this.y.style.width=a+"px")}if(webix.Touch&&webix.Touch.$active&&this.Kf){webix.Touch.Of(),webix.Touch.Pf();var b=this.getScrollState(),c=this.y.offsetWidth-this.$width-b.x,d=this.y.offsetHeight-this.$height-b.y;if(0>c||0>d){var a=0>c?Math.min(-c-b.x,0):-b.x,e=0>d?Math.min(-d-b.y,0):-b.y;webix.Touch.Nf(this.y,a,e,0)}}}},webix.protoUI({defaults:{size:10,page:0,group:5,template:"{common.pages()}",maxWidth:1e5,height:30,borderless:!0},name:"pager",on_click:{webix_pager_item:function(a,b){this.select(b)}},$init:function(a){this.data=this.s,this.y=this.x,this.x.className+=" webix_pager",(a.master===!1||0===a.master)&&this.$ready.push(this.wt)},wt:function(){this.refresh(),this.$master={refresh:function(){},select:function(){}}},select:function(a){if(this.$master&&"pager"==this.$master.name)return this.$master.select(a);switch(a){case"next":a=this.s.page+1;break;case"prev":a=this.s.page-1;break;case"first":a=0;break;case"last":a=this.s.limit-1}0>a&&(a=0),a>=this.data.limit&&(a=this.data.limit-1);var b=this.data.page;this.data.page=1*a,this.refresh()&&(this.s.animate&&this.Qf(b,1*a,this.s.animate)||this.$master.refresh())},ad:"webix_p_id",template_setter:webix.template,type:{template:function(a,b){return a.template.call(this,a,b)},pages:function(a){var b="";if(-1==a.page)return"";a.$min=a.page-Math.round((a.group-1)/2),a.$max=a.$min+1*a.group-1,a.$min<0&&(a.$max+=-1*a.$min,a.$min=0),a.$max>=a.limit&&(a.$min-=Math.min(a.$min,a.$max-a.limit+1),a.$max=a.limit-1);for(var c=a.$min||0;c<=a.$max;c++)b+=this.button({id:c,index:c+1,selected:c==a.page?"_selected":""});return b},page:function(a){return a.page+1},first:function(){return this.button({id:"first",index:webix.locale.pager.first,selected:""})},last:function(){return this.button({id:"last",index:webix.locale.pager.last,selected:""})},prev:function(){return this.button({id:"prev",index:webix.locale.pager.prev,selected:""})},next:function(){return this.button({id:"next",index:webix.locale.pager.next,selected:""})},button:webix.template("<button type='button' webix_p_id='{obj.id}' class='webix_pager_item{obj.selected}'>{obj.index}</button>")},clone:function(a){a.$view||(a.view="pager",a=webix.ui(a)),this.Rf=a,a.$master=this,this.Sf()},refresh:function(){var a=this.s;if(a.count){a.limit=Math.ceil(a.count/a.size);var b=Math.min(a.limit-1,a.page);return b!=a.page?this.$master.setPage(b):(a.page=b,b>=0&&b!=a.old_page||a.limit!=a.old_limit||a.old_count!=a.count?(this.render(),this.Sf(),a.old_limit=a.limit,a.old_page=a.page,a.old_count=a.count,!0):void 0)}},apiOnly_setter:function(a){return this.$apiOnly=a},Sf:function(){this.Rf&&(this.Rf.s.count=this.s.count,this.Rf.s.page=this.s.page,this.Rf.refresh())},Qf:function(a,b,c){if(a==b)return!1;if(this.Tf)return this.Uf&&window.clearTimeout(this.Uf),this.Uf=webix.delay(this.Qf,this,[a,b,c],100);var d=b>a?"left":"right";("top"==c.direction||"bottom"==c.direction)&&(d=b>a?"top":"bottom"),c.flip&&(d="");var e=0,f=this.$master.y;this.$master.Vf&&(f=this.$master.Vf,e=f.offsetTop,webix.html.addCss(this.$master.$view,"webix_animation"));var g=f.cloneNode(!0);g.style.width=f.style.width="100%",g.style.backgroundColor=f.style.backgroundColor="white",this.$master.refresh(),webix.html.insertBefore(g,f.nextSibling,f.parentNode);var h,i=c!==!0?c:{},j=webix.extend({direction:d,callback:webix.bind(function(){j.callback=null,webix.animate.breakLine(h),this.Tf=!1,this.$master.Vf&&webix.html.removeCss(this.$master.$view,"webix_animation")},this),top:e},i);h=webix.animate.formLine(f,g,j),webix.animate([f,g],j),this.Tf=!0}},webix.MouseEvents,webix.SingleRender,webix.ui.view,webix.EventSystem),webix.locale.pager={first:" &lt;&lt; ",last:" &gt;&gt; ",next:" &gt; ",prev:" &lt; "},webix.PagingAbility={pager_setter:function(a){function b(c){if(a.config.autosize&&this.getVisibleCount){var d=this.getVisibleCount();isNaN(d)?(a.config.size=1,webix.delay(b,this,[!0])):d!=a.config.size&&(a.config.size=d,a.refresh(),c===!0&&this.refresh())}var e=this.s.pager;return-1!=e.page&&(this.data.$min=this.sy(0,e.page*e.size),this.data.$max=this.sy(this.data.$min,e.size),this.data.$pagesize=this.data.$max-this.data.$min,!0)}if("string"==typeof a){var c=webix.$$(a);if(!c)return this.$blockRender=!0,webix.delay(function(){var b=webix.$$(a);this.s.pager=this.pager_setter(b);var c=b.s;c.count=this.data.ty(c.level),b.refresh(),this.$blockRender=!1,this.render()},this),null;a=c}return this.attachEvent("onBeforeRender",b),a.$view||(a.view="pager",a=webix.ui(a)),this.Wf=a,a.$master=this,this.data.attachEvent("onStoreUpdated",function(){var b=a.s;b.count=this.ty(b.level),a.refresh()}),this.data.ty=this.ty,a.s},ty:function(a){if(a&&0!==a){var b=0;return this.each(function(c){c.$level==a&&b++}),b}return this.count()},sy:function(a,b){var c=this.s.pager;if(c.level&&0!==c.level){var d=a,e=this.data.order.length;if(b)for(;e>d;){if(this.data.getItem(this.data.order[d]).$level==c.level){if(0===b)break;b--}d++}return d}return a+b},setPage:function(a){this.Wf&&this.Wf.select(a)},getPage:function(){return this.Wf.s.page},getPager:function(){return this.Wf}},webix.protoUI({name:"tooltip",defaults:{dy:0,dx:20},$init:function(a){"string"==typeof a&&(a={template:a}),this.type=webix.extend({},this.type),this.x=this.w=this.y=document.createElement("DIV"),this.w.className="webix_tooltip",webix.html.insertBefore(this.w,document.body.firstChild,document.body),webix.attachEvent("onClick",webix.bind(function(a){this.gz&&webix.$$(a)!=this&&this.hide()},this))},adjust:function(){},isVisible:function(){return!0},show:function(a,b){this.Xf||(this.data!=a&&(this.data=webix.extend({},a),this.render(a)),this.y.firstChild&&(this.w.style.top=b.y+this.s.dy+"px",this.w.style.left=b.x+this.s.dx+"px",this.w.style.display="block"),this.gz=!0)},hide:function(){this.data=null,this.w.style.display="none",this.gz=!1},disable:function(){this.Xf=!0},enable:function(){this.Xf=!1},type:{template:webix.template("{obj.id}"),templateStart:webix.template.empty,templateEnd:webix.template.empty}},webix.SingleRender,webix.Settings,webix.EventSystem,webix.ui.view),webix.AutoTooltip={tooltip_setter:function(a){if(a){"function"==typeof a&&(a={template:a});var b=!a.template,c=new webix.ui.tooltip(a);this.Vc();var d=this.attachEvent("onMouseMove",function(a,d){if(this.DA=d.clientX,this.EA=d.clientY,this.getColumnConfig){var e=c.type.column=this.getColumnConfig(a.column);if(b){if(!e.tooltip&&e.tooltip!=webix.undefined)return;var f=d.target||d.srcElements;if(f.getAttribute("webix_area")&&e.tooltip){var g=f.getAttribute("webix_area");c.type.template=function(a,b){var c=a[b.column.id];return webix.template(e.tooltip).call(this,a,b,c[g],g)}}else if(e.tooltip)c.type.template=e.tooltip=webix.template(e.tooltip);else{var h=this.getText(a.row,a.column);c.type.template=function(){return h}}}}webix.DragControl.active||c.show(this.getItem(a),webix.html.pos(d))}),e=webix.event(document.body,"mousemove",webix.bind(function(a){a=a||event,(this.DA!=a.clientX||this.EA!=a.clientY)&&c.hide()},this));return this.attachEvent("onDestruct",function(){this.config.tooltip&&this.config.tooltip.destructor()}),this.attachEvent("onAfterScroll",function(){c.hide()}),c.attachEvent("onDestruct",webix.bind(function(){this.detachEvent(d),webix.eventRemove(e)},this)),c}}},webix.protoUI({name:"proto",$init:function(){this.data.provideApi(this,!0),this.y=this.y||this.w,this.data.attachEvent("onStoreUpdated",webix.bind(function(){this.render.apply(this,arguments)},this))},$setSize:function(){webix.ui.view.prototype.$setSize.apply(this,arguments)&&this.render()},ad:"webix_item",on_mouse_move:{},type:{}},webix.PagingAbility,webix.DataMarks,webix.AutoTooltip,webix.ValidateCollection,webix.RenderStack,webix.DataLoader,webix.ui.view,webix.EventSystem,webix.Settings),webix.CodeParser={collapseNames:function(a,b,c){if(c=c||{},b=b||"",!a||"object"!=typeof a)return null;for(var d in a)!a[d]||"object"!=typeof a[d]||webix.isDate(a[d])||webix.isArray(a[d])?c[b+d]=a[d]:webix.CodeParser.collapseNames(a[d],b+d+".",c);return c},expandNames:function(a){var b,c,d,e,f,g={};for(f in a){for(d=f.split("."),c=d.length-1,e=g,b=0;c>b;b++)e[d[b]]||(e[d[b]]={}),e=e[d[b]];e[d[c]]=a[f]}return g}},webix.Values={$init:function(){this.elements={}},focus:function(a){if(a)this.ub(this.elements[a]);else for(var b in this.elements)if(this.ub(this.elements[b]))return!0},ub:function(a){return a&&a.focus?(a.focus(),!0):void 0},setValues:function(a,b){this.s.complexData&&(a=webix.CodeParser.collapseNames(a)),this.Zf(a,b)},Zf:function(a,b){this.Yf=b,this.blockEvent(),b&&this.$f||(this.$f={});for(var c in a)this.elements[c]||(this.$f[c]=a[c]);for(var c in this.elements){var d=this.elements[c];d&&(webix.isUndefined(a[c])?!b&&d.Ce&&d.setValue(""):d.setValue(a[c]),this.$f[c]=d.getValue())}this.unblockEvent(),this.callEvent("onValues",[])},isDirty:function(){return!!this.Yf||1===this.getDirtyValues(1)},setDirty:function(a){this.Yf=a,a||(this.$f=this.hz())},getDirtyValues:function(){var a={};if(this.$f)for(var b in this.elements){var c=this.elements[b].getValue();if(this.$f[b]!=c&&(a[b]=c,arguments[0]))return 1}return a},getCleanValues:function(){return this.$f},getValues:function(a){var b=this.hz(a);return this.s.complexData&&(b=webix.CodeParser.expandNames(b)),b},hz:function(a){var b,c=null,d=this.$f?webix.copy(this.$f):{};for(var e in this.elements)c=this.elements[e],b=!0,a&&("object"==typeof a?(a.hidden===!1&&(b=c.isVisible()),b&&a.disabled===!1&&(b=c.isEnabled())):b=a.call(this,c)),b?d[e]=c.getValue():delete d[e];return d},clear:function(){this.Yf=!1;var a={};for(var b in this.elements)this.elements[b].Ce&&(a[b]=this.elements[b].s.defaultValue||"");this.Zf(a)},markInvalid:function(a,b){if(b===!1)this.Qe(a);else{if("string"==typeof b){var c=this.elements[a];c&&(c.s.invalidMessage=b)}this.Te(a)}},Te:function(a){var b=this.elements[a];if(a&&b){this.Qe(a,!0),webix.html.addCss(b.x,"webix_invalid"),b.s.invalid=!0;var c=b.s.invalidMessage;"string"==typeof c&&b.setBottomText&&b.setBottomText()}},Qe:function(a,b){var c=this.elements[a];if(a&&c&&c.$view&&c.s.invalid){webix.html.removeCss(c.x,"webix_invalid"),c.s.invalid=!1;var d=c.s.invalidMessage;"string"==typeof d&&!b&&c.setBottomText&&c.setBottomText()}}},webix.protoUI({name:"toolbar",defaults:{type:"toolbar"},Gc:!0,_f:"webix_toolbar",ag:!1,$init:function(a){a.borderless||(this.w.style.borderWidth="1px"),this.w.className+=" "+this._f},Qs:function(){var a=this;a.elements={},webix.ui.each(this,function(b){return b.s.name&&b.getValue&&b.setValue&&(a.elements[b.s.name]=b,b.mapEvent&&b.mapEvent({onbeforetabclick:a,onaftertabclick:a,onitemclick:a,onchange:a})),!b.setValues&&void 0}),this.setDirty(!1)},sc:function(){this.Qs()},Bc:function(a){var b=this.s;return b.elements&&!a&&(this.nc=a=b.elements,this.mc=this.ag,delete b.elements),this.s.elementsConfig&&this.eg(this.nc,b.elementsConfig),a},eg:function(a,b){for(var c=0;c<a.length;c++){var d=a[c];webix.extend(d,b);var e=b;d.elementsConfig&&(e=webix.extend(webix.extend({},d.elementsConfig),b));var f;f=d.body?[d.body]:d.rows||d.cols||d.cells||d.body,f&&this.eg(f,e)}},$getSize:function(a,b){var c=webix.ui.layout.prototype.$getSize.call(this,a,b),d=this.getParentView(),e=this.mc?3:1;return d&&this.mc!=d.mc&&(c[e]+=1e5),c},render:function(){},refresh:function(){this.render()}},webix.Scrollable,webix.AtomDataLoader,webix.Values,webix.ui.layout,webix.ValidateData),webix.protoUI({name:"template",$init:function(a){var b=this.fg[a.type];b&&(webix.extend(a,b),a.borderless&&(delete a.Ob,this.hc(a))),this.y==this.x?(this.y=webix.html.create("DIV"),this.y.className=" webix_template",this.x.appendChild(this.y)):this.y.className+=" webix_template",this.attachEvent("onAfterRender",this.hg)},setValues:function(a,b){this.data=b?webix.extend(this.data,a,!0):a,this.render()},getValues:function(){return this.data},$skin:function(){this.fg.header.height=this.fg.section.height=webix.skin.$active.barHeight},fg:{header:{css:"webix_header"},section:{css:"webix_section",borderless:!0},clean:{css:"webix_clean",borderless:!0}},onClick_setter:function(a){return this.on_click=webix.extend(this.on_click||{},a,!0),this.Sc||webix.extend(this,webix.MouseEvents),a},defaults:{template:webix.template.empty},gg:function(){this.ig=!1,this.jg(),this.resize()},jg:function(){this.ig||(this.ig=!0,this.render())},src_setter:function(a){return this.ig=!0,this.callEvent("onBeforeLoad",[]),webix.ajax(a,webix.bind(function(a){this.s.template=webix.template(a),this.gg(),this.callEvent("onAfterLoad",[])},this)),a},hg:function(){this.s.autoheight&&(this.ac=null,this.resize()),this.s.scroll&&-1!=this.s.scroll.indexOf("x")&&(this.y.style.width=this.y.scrollWidth+"px")},content_setter:function(a){a&&(this.ig=!0,this.render=function(){},this.y.appendChild(webix.toNode(a)))},refresh:function(){this.render()},setHTML:function(a){this.s.template=function(){return a},this.refresh()},setContent:function(a){this.y.innerHTML="",this.content_setter(a)},$setSize:function(a,b){if(webix.ui.view.prototype.$setSize.call(this,a,b)){if(this.jg(),this.s.autoheight){var c=this.getTopParentView();clearTimeout(c.kg),c.kg=webix.delay(this.resize,this)}return!0}},$getSize:function(a,b){return this.s.autoheight&&!this.s.type&&(this.s.height=this.lg()),webix.ui.view.prototype.$getSize.call(this,a,b)},lg:function(){var a;return this.jg(),webix.skin.$active.layoutPadding.space,this.y.style.height="auto",a=this.y.scrollHeight,this.y.style.height="",a},If:!0},webix.Scrollable,webix.AtomDataLoader,webix.AtomRender,webix.EventSystem,webix.ui.view),webix.protoUI({name:"iframe",$init:function(a){this.y=this.w,this.w.innerHTML="<iframe style='width:100%; height:100%' frameborder='0' onload='var t= $$(\""+a.id+"\"); if (t) t.callEvent(\"onAfterLoad\",[]);' src='about:blank'></iframe>"},load:function(a){this.src_setter(a)},src_setter:function(a){return this.getIframe().src=a,this.callEvent("onBeforeLoad",[]),a},getIframe:function(){return this.w.getElementsByTagName("iframe")[0]},getWindow:function(){return this.getIframe().contentWindow}},webix.ui.view,webix.EventSystem),webix.OverlayBox={showOverlay:function(a){this.mg?this.mg.innerHTML=a:(this.mg=webix.html.create("DIV",{"class":"webix_overlay"},a||""),webix.html.insertBefore(this.mg,this.x.firstChild,this.x),this.x.style.position="relative")},hideOverlay:function(){this.mg&&(webix.html.remove(this.mg),this.mg=null)}},webix.protoUI({name:"scrollview",defaults:{scroll:"y",scrollSpeed:"0ms"},$init:function(){this.x.className+=" webix_scrollview"},body_setter:function(a){a.borderless=!0,this.gd=webix.ui.A(a),this.gd.Xb=this,this.y.appendChild(this.gd.x)},getChildViews:function(){return[this.gd]},getBody:function(){return this.gd},resizeChildren:function(){this.ng=this.gd.$getSize(0,0),this.og(),webix.callEvent("onResize",[])},og:function(){var a=(this.Mw||webix.ui.scrollSize,Math.max(this.bc,this.ng[0])),b=Math.max(this.dc,this.ng[2]);if(this.gd.$setSize(a,b),this.y.style.width=this.gd.bc+"px",this.y.style.height=this.gd.dc+"px",webix.env.touch){var c=this.getScrollState(),d=this.gd.dc-this.dc;d<c.y&&this.scrollTo(null,d)}},$getSize:function(a,b){var c=this.ng=this.gd.$getSize(0,0),d=webix.ui.view.prototype.$getSize.call(this,a,b),e=this.Mw||webix.ui.scrollSize;return"x"==this.s.scroll?(d[2]=Math.max(d[2],c[2])+e,
d[3]=Math.min(d[3],c[3])+e):"y"==this.s.scroll&&(d[0]=Math.max(d[0],c[0])+e,d[1]=Math.min(d[1],c[1])+e),d},$setSize:function(a,b){var c=webix.ui.scrollSize;webix.ui.scrollSize=this.Mw||c,webix.ui.view.prototype.$setSize.call(this,a,b)&&this.og(),webix.ui.scrollSize=c},scroll_setter:function(a){var b=webix.env.$customScroll;return"string"==typeof a&&0===a.indexOf("native-")&&(this.Mw=17,a=a.replace("native-"),webix.env.$customScroll=!1),a=webix.Scrollable.scroll_setter.call(this,a),webix.env.$customScroll=b,a},Qb:function(a){this.gd.destructor(),this.gd=a,this.gd.Xb=this,this.ed.appendChild(this.gd.x),this.resize()},showView:function(a){var b=webix.$$(a).$view.offsetTop-webix.$$(a).$view.parentNode.offsetTop;this.scrollTo(0,b)}},webix.Scrollable,webix.EventSystem,webix.ui.view),webix.TreeRenderStack={$init:function(){},pg:function(a){var b=this.data.Me[a.id];return this.callEvent("onItemRender",[a]),this.type.templateStart(a,this.type,b)+(a.$template?this.type["template"+a.$template](a,this.type,b):this.type.template(a,this.type,b))+this.type.templateEnd()},qg:function(a){return this.v.innerHTML=this.pg(a),this.v.firstChild},jb:function(a){var b="<div class='webix_tree_branch_"+a.$level+"'>"+this.pg(a);return a.open&&(b+=this.rg(a.id)),b+="</div>"},rg:function(a){var b="",c=this.data.branch[a];if(c){b+="<div class='webix_tree_leaves'>";for(var d=c.length-1,e=0;d>=e;e++){var f=this.getItem(c[e]);this.type.sg[f.$level]=e==d,b+=this.jb(f)}b+="</div>"}return b},render:function(a,b,c){if(webix.TreeRenderStack.tg=this,this.isVisible(this.s.id)&&!this.$blockRender){if(a){var d,e=this.getItem(a);if("add"!=c&&(d=this.getItemNode(a),!d))return;switch(c){case"branch":var f=d.parentNode,g=this.Ne(e);webix.html.insertBefore(g,f),webix.html.remove(f),this.t=null;break;case"paint":case"update":var g=this.t[a]=this.qg(e);webix.html.insertBefore(g,d),webix.html.remove(d);break;case"delete":webix.html.remove(d.parentNode);break;case"add":var h;if(0==e.$parent)h=this.y.firstChild;else if(h=this.getItemNode(e.$parent)){if(!h.nextSibling){var i=webix.html.create("DIV",{"class":"webix_tree_leaves"},"");h.parentNode.appendChild(i)}h=h.nextSibling}if(h){var j=this.data.getNextSiblingId(a);j=this.getItemNode(j),j&&(j=j.parentNode);var g=this.Ne(e);this.t[a]=g.firstChild,webix.html.insertBefore(g,j,h)}break;default:return!1}this.callEvent("onPartialRender",[a,b,c])}else this.callEvent("onBeforeRender",[this.data])&&(this.type.sg=[],this.y.innerHTML=this.rg(0),this.t=null,this.callEvent("onAfterRender",[]));return this.type.sg=0,webix.TreeRenderStack.tg=null,!0}},getItemNode:function(a){if(this.t)return this.t[a];this.t={};for(var b=this.y.getElementsByTagName("DIV"),c=0;c<b.length;c++){var d=b[c].getAttribute(this.ad);d&&(this.t[d]=b[c])}return this.getItemNode(a)},vg:1},webix.SelectionModel={$init:function(){this.wg=webix.toArray(),this.data.attachEvent("onStoreUpdated",webix.bind(this.xg,this)),this.data.attachEvent("onStoreLoad",webix.bind(this.yg,this)),this.data.attachEvent("onAfterFilter",webix.bind(this.zg,this)),this.data.attachEvent("onIdChange",webix.bind(this.Ag,this)),this.$ready.push(this.uy)},uy:function(){("multiselect"==this.s.select||this.s.multiselect)&&webix.event(this.$view,"mousedown",function(a){var b=(a||event).shiftKey;b&&(webix.vy=this,webix.html.addCss(this,"webix_noselect",1))})},Ag:function(a,b){for(var c=this.wg.length-1;c>=0;c--)this.wg[c]==a&&(this.wg[c]=b)},zg:function(){for(var a=this.wg.length-1;a>=0;a--)if(this.data.getIndexById(this.wg[a])<0){var b=this.wg[a];this.removeCss(b,"webix_selected",!0),this.wg.splice(a,1),this.callEvent("onSelectChange",[b])}},xg:function(a,b,c){if("delete"==c)if(this.loadBranch)for(var d=this.wg.length-1;d>=0;d--)this.exists(this.wg[d])||this.wg.splice(d,1);else this.wg.remove(a);else a||this.data.count()||this.data.jf||(this.wg=webix.toArray())},yg:function(){this.s.select&&this.data.each(function(a){a&&a.$selected&&this.select(a.id)},this)},Bg:function(a,b,c,d){var e=b?"onBeforeSelect":"onBeforeUnSelect";if(!this.callEvent(e,[a,b]))return!1;d&&(this.Dg=!0,this.unselectAll(),this.Dg=!1),b?this.addCss(a,"webix_selected",!0):this.removeCss(a,"webix_selected",!0),c?c.push(a):(b?this.wg.push(a):this.wg.remove(a),this.Cg(a));var e=b?"onAfterSelect":"onAfterUnSelect";return this.callEvent(e,[a]),!0},select:function(a,b){var c=arguments[2],d=arguments[3];if(!a)return this.selectAll();if(!webix.isArray(a)){if(d&&this.wg.length)return this.selectAll(this.wg[this.wg.length-1],a);var e=!1;return c||b||1==this.wg.length&&this.wg[0]==a||(e=!0),!e&&this.isSelected(a)?void(c&&this.unselect(a)):void this.Bg(a,!0,null,e)}for(var f=0;f<a.length;f++)this.select(a[f],f?1:b,c,d)},unselect:function(a){return a?void(this.isSelected(a)&&this.Bg(a,!1)):this.unselectAll()},selectAll:function(a,b){var c,d=[];c=a||b?this.data.getRange(a||null,b||null):this.data.getRange(),c.each(function(a){this.data.getMark(a.id,"webix_selected")||(this.wg.push(a.id),this.Bg(a.id,!0,d))},this),this.Cg(d)},unselectAll:function(){var a=[];this.wg.each(function(b){this.Bg(b,!1,a)},this),this.wg=webix.toArray(),this.Cg(a)},isSelected:function(a){return-1!=this.wg.find(a)},getSelectedId:function(a){switch(this.wg.length){case 0:return a?[]:"";case 1:return a?[this.wg[0]]:this.wg[0];default:return[].concat(this.wg)}},getSelectedItem:function(a){var b=this.getSelectedId(!0);if(b.length>1||a){for(var c=b.length-1;c>=0;c--)b[c]=this.getItem(b[c]);return b}return b.length?this.getItem(b[0]):void 0},Eg:function(a){return a.length>100||a.length>this.data.count/2},Cg:function(a){if("object"!=typeof a&&(a=[a]),a.length){if(this.Eg(a))this.data.refresh();else for(var b=0;b<a.length;b++)this.render(a[b],this.data.getItem(a[b]),"update");this.Dg||this.callEvent("onSelectChange",[a])}}},webix.ready(function(){webix.event(document.body,"mouseup",function(a){webix.vy&&(webix.html.removeCss(webix.vy,"webix_noselect"),webix.vy=null)})}),webix.TreeDataMove={$init:function(){},copy:function(a,b,c,d){return d=d||{},d.copy=!0,this.move(a,b,c,d)},Kd:function(a,b,c){if(b&&a){var d=this.getBranchIndex(a);return d+(c==this&&c.getBranchIndex(b)<d?0:1)}},Lt:function(a,b){var c=this.data.branch[a];if(c&&c.length)for(var d=0;d<c.length;d++){if(c[d]==b)return!0;if(this.Lt(c[d],b))return!0}return!1},move:function(a,b,c,d){d=d||{},b=b||0;var e=d.newId||a,f=d.parent||0;if(c=c||this,c.data){if(!webix.isArray(a)){if(this!=c||d.copy){if(e=c.data.add(c.Jd(this.getItem(a),e),b,f||0),this.data.branch[a]&&c.getBranchIndex){var g=this.data.vf;this.data.vf=function(a){var b=webix.copy(a);return delete b.$parent,delete b.$level,delete b.$child,c.data.pull[b.id]&&(b.id=webix.uid()),b};var h={data:this.serialize(a,!0),parent:e};this.data.vf=g,c.parse(h)}d.copy||this.data.remove(a)}else{if(a==f||this.Lt(a,f))return;var i=this.getItem(a),j=this.data.branch[f];j||(j=this.data.branch[f]=[]);var k=this.data.branch[i.$parent],l=webix.PowerArray.find.call(k,a);if(0>b&&(b=Math.max(j.length-1,0)),k===j&&b===l)return;if(webix.PowerArray.removeAt.call(k,l),webix.PowerArray.insertAt.call(j,a,Math.min(j.length,b)),k.length||delete this.data.branch[i.$parent],i.$parent&&"0"!=i.$parent&&this.getItem(i.$parent).$count--,f&&"0"!=f){var m=c.getItem(f);m.$count++,this.Fg(i,m.$level+1)}else this.Fg(i,1);i.$parent=f,c.data.callEvent("onDataMove",[a,b,f,j[b+1]])}return this.refresh(),e}for(var n=0;n<a.length;n++){var o=this.move(a[n],b,c,d);b=c.Kd(o,a[n+1],this)}}},Fg:function(a,b){a.$level=b;var c=this.data.branch[a.id];if(c)for(var d=0;d<c.length;d++)this.Fg(this.getItem(c[d]),b+1)},Gg:function(a){a&&!a.header&&this.open(a)},$dropAllow:function(a){if(a.from!=a.to)return!0;for(var b=0;b<a.source.length;b++)if(a.source==a.target||this.Lt(a.source,a.target))return!1;return!0},Jd:function(a,b){var c=webix.DataMove.Jd.call(this,a,b);return delete c.open,c}},webix.TreeDataLoader={$init:function(){this.data.attachEvent("onStoreUpdated",webix.bind(this.Hg,this),null,!0),this._e=this.Ig},Ig:function(a,b,c,d){var e=0===b?{parent:encodeURIComponent(a)}:null;webix.DataLoader.prototype._e.call(this,a,b,c,d,e)},loadBranch:function(a,b,c){a=a||0,this.data.url=this.data.url||c,this.callEvent("onDataRequest",[a,b,this.data.url])&&this.data.url&&this.data.feed.call(this,a,0,b,c)},Hg:function(a,b,c){c&&"add"!=c&&"delete"!=c&&"branch"!=c||this.data.Kg(this)}},webix.TreeStore={name:"TreeStore",$init:function(){this.Cf={showSubItems:!0},this.branch={0:[]},this.attachEvent("onParse",function(a,b){this.Lg(a.child),a.getInfo(b).S}),this.attachEvent("onClearAll",webix.bind(function(){this.Mg=null},this))},filterMode_setter:function(a){return webix.extend(this.Cf,a,!0)},Af:function(a){if(this.Mg&&!a){this.branch=this.Mg,this.order=webix.toArray(webix.copy(this.branch[0]));for(var b in this.branch)"0"!=b&&(this.getItem(b).$count=this.branch[b].length);delete this.Mg}},Bf:function(a,b,c,d){c&&this.Mg||(this.Mg=this.branch,this.branch=webix.clone(this.branch)),this.branch[0]=this.Ng(a,b,this.branch[0],1,d||{})},Ng:function(a,b,c,d,e){for(var f=[],g=e.level&&e.level!=d,h=0;h<c.length;h++){var i=c[h],j=this.getItem(i),k=!1,l=this.branch[i];if(g)k=!0;else if(a(this.getItem(i),b)){if(f.push(i),e.openParents!==!1)for(var m=this.getParentId(i);m&&"0"!=m;)this.getItem(m).open=1,m=this.getParentId(m);if(e.level||e.showSubItems)continue}else k=!0;if((g||!e.level)&&l){var n=this.branch[i]=this.Ng(a,b,l,d+1,e);j.$count=n.length,k&&n.length&&f.push(i)}}return f},count:function(){if(this.order.length)return this.order.length;var a=0;return this.eachOpen(function(){a++}),a},changeId:function(a,b){if(this.branch[a]){for(var c=this.branch[b]=this.branch[a],d=0;d<c.length;d++)this.getItem(c[d]).$parent=b;delete this.branch[a]}var e=this.getItem(a).$parent;if("0"!==e){var f=webix.PowerArray.find.call(this.branch[e],a);this.branch[e][f]=b}return webix.DataStore.prototype.changeId.call(this,a,b)},clearAll:function(){this.branch={0:[]},webix.DataStore.prototype.clearAll.call(this)},getPrevSiblingId:function(a){var b=this.branch[this.getItem(a).$parent],c=webix.PowerArray.find.call(b,a)-1;return c>=0?b[c]:null},getNextSiblingId:function(a){var b=this.branch[this.getItem(a).$parent],c=webix.PowerArray.find.call(b,a)+1;return c<b.length?b[c]:null},getParentId:function(a){return this.getItem(a).$parent},getFirstChildId:function(a){var b=this.branch[a];return b&&b.length?b[0]:null},isBranch:function(a){return!!this.branch[a]},getBranchIndex:function(a){var b=this.branch[this.pull[a].$parent];return webix.PowerArray.find.call(b,a)},Lg:function(a){"string"==typeof a?this.Og=function(b){var c=b[a];return c&&delete b[a],c}:this.Og=a},kf:function(a,b){for(var c=a.S||0,d=0;d<b.length;d++){var e=this.driver.getDetails(b[d]),f=this.id(e),g=!!this.pull[f];g?(e=webix.extend(this.pull[f],e,!0),this.pf&&this.pf(e)):(this.qf&&this.qf(e),this.pull[f]=e),this.Pg(e,c,0,g,1*a.R+d)}var h=this.pull[c]||{},i=this.branch[c]||[];h.$count=i.length,delete h.webix_kids,a.Q&&a.Q!=i.length&&(i[a.Q]=null)},Pg:function(a,b,c,d,e){a.$count=0,a.$parent=b||0,a.$level=c||("0"!=b?this.pull[b].$level+1:1);var f=this.branch[a.$parent];if(f||(f=this.branch[a.$parent]=[]),this.Mg&&(this.Mg[a.$parent]=f),!d){var g=e||f.length;f[g]=a.id}var h=this.Og(a);if(a.webix_kids)return a.$count=-1;if(!h)return a.$count=0;webix.isArray(h)||(h=[h]);for(var i=0;i<h.length;i++){var j=webix.DataDriver.json.getDetails(h[i]),k=this.id(j);d=!!this.pull[k],d?(j=webix.extend(this.pull[k],j,!0),this.pf&&this.pf(j)):(this.qf&&this.qf(j),this.pull[k]=j),this.Pg(j,a.id,a.$level+1,d)}var l=this.branch[a.id];l&&(a.$count=l.length)},Kg:function(a){this.order=webix.toArray(),this.Qg(0,a)},Qg:function(a,b){for(var c=this.branch[a],d=0;d<c.length;d++){var e=c[d];this.order.push(e);var f=this.pull[e];f&&f.open&&(-1==f.$count?b.loadBranch(e):f.$count&&this.Qg(e,b))}},provideApi:function(a,b){for(var c=["getPrevSiblingId","getNextSiblingId","getParentId","getFirstChildId","isBranch","getBranchIndex","filterMode_setter"],d=0;d<c.length;d++)a[c[d]]=this.Ef(this,c[d]);a.getIndexById||webix.DataStore.prototype.provideApi.call(this,a,b)},getTopRange:function(){return webix.toArray([].concat(this.branch[0])).map(function(a){return this.getItem(a)},this)},eachChild:function(a,b,c,d){var e=this.branch;d&&this.Mg&&(e=this.Mg);var f=e[a];if(f)for(var g=0;g<f.length;g++)b.call(c||this,this.getItem(f[g]))},each:function(a,b,c,d){this.eachChild(d||0,function(d){var e=this.branch;a.call(b||this,d),c&&this.Mg&&(e=this.Mg),e[d.id]&&this.each(a,b,c,d.id)},this,c)},eachOpen:function(a,b,c){this.eachChild(c||0,function(c){a.call(b||this,c),this.branch[c.id]&&c.open&&this.eachOpen(a,b,c.id)})},eachSubItem:function(a,b){var c=this.branch[a||0];if(c)for(var d=0;d<c.length;d++){var e=c[d];this.branch[e]?(b.call(this,this.getItem(e),!0),this.eachSubItem(e,b)):b.call(this,this.getItem(e),!1)}},eachLeaf:function(a,b){var c=this.branch[a||0];if(c)for(var d=0;d<c.length;d++){var e=c[d];this.branch[e]?this.eachLeaf(e,b):b.call(this,this.getItem(e),!1)}},xf:function(a,b){var c=this.sorting.create(a);for(var d in this.branch){for(var e=this.branch[d],f=[],g=0;g<e.length;g++)f.push(this.pull[e[g]]);f.sort(c);for(var g=0;g<e.length;g++)f[g]=f[g].id;this.branch[d]=f}return b},add:function(a,b,c){var d=!1,e=this.getItem(c||0);if(e&&(this.branch[e.id]||(d=!0),e.$count++),this.branch[c||0]=this.order=webix.toArray(this.branch[c||0]),a.$count=0,a.$level=e?e.$level+1:1,a.$parent=e?e.id:0,this.Mg){var f=this.Mg[c||0];if(f||(f=this.Mg[c]=this.order),this.order!==f){var g=f.length;!b&&this.branch[c||0].length&&(g=0),f=webix.toArray(f),f.insertAt(a.id,g)}}var h=webix.DataStore.prototype.add.call(this,a,b);return d&&this.refresh(c),h},Rg:function(a,b){var c=this.pull[a];if(this.branch[c.id]&&this.branch[c.id].length>0)for(var d=this.branch[a],e=0;e<d.length;e++)this.Rg(d[e],!0);delete this.branch[a],this.Mg&&delete this.Mg[a],delete this.pull[a],this.Me[a]&&delete this.Me[a]},Wy:function(a,b,c){var d=a[b];1==d.length&&d[0]==c&&b?delete a[b]:webix.toArray(d).remove(c)},remove:function(a){var b=this.pull[a],c=b.$parent||0;if(this.callEvent("onBeforeDelete",[a])===!1)return!1;this.Rg(a),this.callEvent("onAfterDelete",[a]);var d=this.pull[c];this.Wy(this.branch,c,a),this.Mg&&this.Wy(this.Mg,c,a);var e=0;d&&(d.$count--,d.$count<=0&&(d.$count=0,d.open=0,e=1)),this.callEvent("onStoreUpdated",[a,b,"delete"]),e&&this.refresh(d.id)},getBranch:function(a){var b=[],c=(this.Mg||this.branch)[a];if(c)for(var d=0;d<c.length;d++)b[d]=this.pull[c[d]];return b},serialize:function(a,b){var c=this.branch;b&&this.Mg&&(c=this.Mg);for(var d=this.branch[a||0],e=[],f=0;f<d.length;f++){var g,h=this.pull[d[f]];if(this.vf){if(g=this.vf(h),g===!1)continue}else g=webix.copy(h);this.branch[h.id]&&(g.data=this.serialize(h.id,b)),e.push(g)}return e}},webix.TreeType={space:function(a,b){for(var c="",d=1;d<a.$level;d++)c+="<div class='webix_tree_none'></div>";return c},icon:function(a,b){return a.$count?a.open?"<div class='webix_tree_open'></div>":"<div class='webix_tree_close'></div>":"<div class='webix_tree_none'></div>"},checkbox:function(a,b){return a.nocheckbox?"":"<input type='checkbox' class='webix_tree_checkbox' "+(a.checked?"checked":"")+(a.disabled?" disabled":"")+">"},folder:function(a,b){return a.icon?"<div class='webix_tree_file webix_tree_"+a.icon+"'></div>":a.$count?a.open?"<div class='webix_tree_folder_open'></div>":"<div class='webix_tree_folder'></div>":"<div class='webix_tree_file'></div>"}},webix.TreeAPI={open:function(a,b){if(a){var c=this.getItem(a);c.$count&&!c.open&&(this.callEvent("onBeforeOpen",[a])&&(c.open=!0,this.data.callEvent("onStoreUpdated",[a,0,"branch"]),this.callEvent("onAfterOpen",[a])),b&&"0"!=a&&this.open(this.getParentId(a),b))}},close:function(a){if(a){var b=this.getItem(a);b.open&&this.callEvent("onBeforeClose",[a])&&(b.open=!1,this.data.callEvent("onStoreUpdated",[a,0,"branch"]),this.callEvent("onAfterClose",[a]))}},openAll:function(a){this.data.eachSubItem(a||0,function(a,b){b&&(a.open=!0)}),this.data.refresh()},closeAll:function(a){this.data.eachSubItem(a||0,function(a,b){b&&(a.open=!1)}),this.data.refresh()},Sg:function(a,b,c){if(this.s.threeState)return this.Tg(a,null!==b?b:"");var d,e=this.getItem(a),f=c?c.target||c.srcElement:null;d=f&&"checkbox"==f.type?!!f.checked:null!==b?b:!e.checked,e.checked=d,this.callEvent("onItemCheck",[a,e.checked,c])},isBranchOpen:function(a){if("0"==a)return!0;var b=this.getItem(a);return!!b.open&&this.isBranchOpen(b.$parent)},getOpenItems:function(){var a=[];for(var b in this.data.branch)this.exists(b)&&this.getItem(b).open&&a.push(b);return a},getState:function(){return{open:this.getOpenItems(),select:this.getSelectedId(!0)}},Ug:function(a,b){var c=this.data.attachEvent("onStoreLoad",function(){a.setState.call(a,b),a.data.detachEvent(c),a=null})},setState:function(a){if(a.open){this.closeAll();for(var b=a.open,c=0;c<b.length;c++){var d=this.getItem(b[c]);if(d&&d.$count&&(d.open=!0,-1==d.$count))return this.Ug(this,a),this.refresh(),0}this.refresh()}if(a.select&&this.select){var e=a.select;this.unselect();for(var c=0;c<e.length;c++)this.exists(e[c])&&this.select(e[c],!0)}return 1}},webix.TreeClick={webix_tree_open:function(a,b){return this.close(b),!1},webix_tree_close:function(a,b){return this.open(b),!1},webix_tree_checkbox:function(a,b){return this.Sg(b,null,a),!1}},webix.TreeCollection=webix.proto({name:"TreeCollection",$init:function(){webix.extend(this.data,webix.TreeStore,!0),this.data.provideApi(this,!0),webix.extend(this,webix.TreeDataMove,!0)}},webix.TreeDataLoader,webix.DataCollection),webix.DragOrder={Vg:!0,$drag:function(a,b){var c=webix.DragItem.$drag.call(this,a,b);if(c){var d=webix.DragControl.getContext();this.getBranchIndex&&(this.Wg=this.Xg?16*this.getItem(d.start).$level:0),d.fragile||this.addCss(d.start,"webix_transparent")}return c},WB:function(a,b){return webix.DragItem.WB(a,b)},$dragPos:function(a,b,c){var d=webix.html.offset(this.$view),e=d.x+(this.Xg?+d.width-webix.ui.scrollSize-1:1),f=a.y,g="x"==this.s.layout;g&&(f=d.y+(this.Xg?+d.height-webix.ui.scrollSize-1:1),e=a.x),c.style.display="none";var h=document.elementFromPoint(e,f);if(h!=this.Yg){var i=webix.$$(h);if(i&&i==this){var j=this.locate(h,!0),k=webix.DragControl.getContext().start;if(j){if(j!=this.Yg){if(j!=k){var l,m;this.getBranchIndex?(l={parent:this.getParentId(j)},m=this.getBranchIndex(j)):(l={},m=this.getIndexById(j)),this.callEvent("onBeforeDropOrder",[k,m,b,l])&&(this.move(k,m,this,l),this.Yg=j)}webix.DragControl.Cd=this.w}}else if(j="$webix-last",this.Yg!=j){if(!this.callEvent("onBeforeDropOrder",[k,-1,b,{parent:0}]))return;this.Yg=j}}}if(c.style.display="block",g)if(a.y=d.y,a.x=a.x-18,a.x<d.x)a.x=d.x;else{var n=d.x+this.$view.offsetWidth-60;a.x>n&&(a.x=n)}else if(d.y+=this.$g,a.x=this.Wg||d.x,a.y=a.y-18,a.y<d.y)a.y=d.y;else{var n=d.y+this.$view.offsetHeight-60;a.y>n&&(a.y=n)}webix.DragControl.Ed=!0},$dragIn:function(){return!1},$drop:function(a,b,c){var d=webix.DragControl.getContext(),e=d.start;this.removeCss(e,"webix_transparent");var f=this.getIndexById(e);this.callEvent("onAfterDropOrder",[e,f,c]),d.fragile&&this.refresh()}},webix.DragItem={_g:function(a,b,c){b||webix.DragControl.addDrop(a.w,a,!0),c||webix.DragControl.addDrag(a.w,a),this.attachEvent("onDragOut",function(a,b){this.$dragMark(a,b)})},drag_setter:function(a){return a&&("order"==a&&webix.extend(this,webix.DragOrder,!0),"inner"==a&&(this.ah=!0),this._g(this,"source"==a,"target"==a),delete this.drag_setter),a},$dragIn:function(a,b,c){var d=this.locate(c)||null,e=webix.DragControl.Gd;if((this.ah||e.from.ah)&&e.from!==this)return!1;var f=webix.DragControl.getMaster(b),g=this.getItemNode(d,c)||this.y;return g==webix.DragControl.Dd?g:(e.target=d,e.to=f,this.bh&&(this.bh=window.clearTimeout(this.bh)),this.bh=webix.delay(this.ch,this,[webix.html.pos(c),d],250),this.$dropAllow(e,c)&&this.callEvent("onBeforeDragIn",[e,c])?(this.$dragMark(e,c),g):(e.to=e.target=null,null))},$dropAllow:function(){return!0},Gg:function(a){},ch:function(a,b){var c=1,d=0,e=this.s.dragscroll;"string"==typeof e&&(d=-1!=e.indexOf("x"),c=-1!=e.indexOf("y"));var f=this.Vf||this.$view,g=webix.html.offset(f),h=g.y,i=h+f.offsetHeight,j=g.x,k=j+f.offsetWidth,e=this.getScrollState(),l=!1,m=40,n=webix.DragControl.getContext();this.Gg(b),c&&(a.y<h+m?(this.scrollTo(e.x,e.y-2*m),l=!0):a.y>i-m&&(this.scrollTo(e.x,e.y+2*m),l=!0)),d&&(a.x<j+m?(this.scrollTo(e.x-2*m,e.y),l=!0):a.x>k-m&&(this.scrollTo(e.x+2*m,e.y),l=!0)),l&&webix.DragControl.sd&&n&&n.to===this&&(this.bh=webix.delay(this.ch,this,[a],100))},_B:function(a){return a&&"object"==typeof a?a.toString():a},$dragOut:function(a,b,c,d){var e=(this.x.contains(c)?this.locate(d):null)||null,f=webix.DragControl.Gd;return(f.target||"").toString()==(e||"").toString()?null:(this.bh&&(this.bh=window.clearTimeout(this.bh)),f.target=f.to=null,this.callEvent("onDragOut",[f,d]),null)},$drop:function(a,b,c){this.bh&&(this.bh=window.clearTimeout(this.bh));var d=webix.DragControl.Gd;d.to=this;var e=this._B(d.target);this.getBranchIndex?e&&(d.parent=this.getParentId(e),d.index=this.getBranchIndex(e)):d.index=e?this.getIndexById(e):this.count(),this.$dragMark({},c),d.from&&d.from!=d.to&&d.from.callEvent&&d.from.callEvent("onBeforeDropOut",[d,c]),this.callEvent("onBeforeDrop",[d,c])&&(this.dh(d,c),this.callEvent("onAfterDrop",[d,c]))},dh:function(a,b){if(a.from){var c={parent:a.parent,mode:a.pos};a.from.move(a.source,a.index,a.to,c)}},WB:function(a,b){if(this.getItemNode){var c=this.locate(b,!0);return c?webix.html.offset(this.getItemNode(c)):null}},$drag:function(a,b){var c=this.locate(b,!0);if(c){var d=[c];if(this.getSelectedId&&!this.Vg){var e=this.getSelectedId(!0,!0);if(e&&e.length>1&&-1!=webix.PowerArray.find.call(e,c)){for(var f={},d=[],g=0;g<e.length;g++)f[e[g]]=!0;for(var g=0;g<this.data.order.length;g++){var h=this.data.order[g];f[h]&&d.push(h)}}}var i=webix.DragControl.Gd={source:d,start:c};if(i.fragile=this.addRowCss&&webix.env.touch&&(webix.env.isWebKit||webix.env.isFF),i.from=this,this.callEvent("onBeforeDrag",[i,b]))return webix.Touch&&(webix.Touch.km=null),i.html||this.$dragHTML(this.getItem(c),b)}return null},$dragHTML:function(a,b){return this.jb(a)},$dragMark:function(a,b){var c=null;return a.target&&(c=this._B(a.target)),this.eh&&this.eh!=c&&(a.fragile||this.removeCss(this.eh,"webix_drag_over"),this.eh=null),!this.eh&&c?(this.eh=c,a.fragile||this.addCss(c,"webix_drag_over"),c):!!a.to}},webix.Group={$init:function(){webix.extend(this.data,webix.GroupStore),this.data.attachEvent("onClearAll",webix.bind(function(){this.data.nf=this.data.fh=null,this.gh=0},this))},group:function(a){this.data.ungroup(!0),this.data.group(a)},ungroup:function(a){this.data.ungroup(a)}},webix.GroupMethods={sum:function(a,b){b=b||this;for(var c=0,d=0;d<b.length;d++)c+=1*a(b[d]);return c},min:function(a,b){b=b||this;for(var c=1/0,d=0;d<b.length;d++)1*a(b[d])<c&&(c=1*a(b[d]));return 1*c},max:function(a,b){b=b||this;for(var c=-(1/0),d=0;d<b.length;d++)1*a(b[d])>c&&(c=1*a(b[d]));return 1*c},count:function(a,b){return b.length},any:function(a,b){return a(b[0])},string:function(a,b){return a.$name}},webix.GroupStore={$init:function(){this.attachEvent("onClearAll",this.oz)},oz:function(){this.nf=this.fh=null,this.gh=0},ungroup:function(a){return this.getBranchIndex?this.hh.apply(this,arguments):void(this.nf&&(this.order=this.nf,this.pull=this.fh,this.fh=this.nf=null,a||this.callEvent("onStoreUpdated",[])))},mf:function(a){this.blockEvent(),this.group(a),this.unblockEvent()},ih:function(a){if("function"==typeof a)return a;var b=function(b){return b[a]};return b.$name=a,b},group:function(a){if(this.getBranchIndex)return this.jh.apply(this,arguments);var b=this.ih(a.by);a.map[b]||(a.map[b]=[b,this.kh]);var c={},d=[];this.each(function(e){var f=b(e);c[f]||(d.push({id:f,$group:!0,$row:a.row}),c[f]=webix.toArray()),c[f].push(e)});for(var e in a.map){var f=a.map[e][1]||"any",g=this.ih(a.map[e][0]);"function"!=typeof f&&(f=webix.GroupMethods[f]);for(var h=0;h<d.length;h++)d[h][e]=f.call(this,g,c[d[h].id])}this.nf=this.order,this.fh=this.pull,this.order=webix.toArray(),this.pull={};for(var h=0;h<d.length;h++){var i=this.id(d[h]);this.pull[i]=d[h],this.order.push(i)}this.callEvent("onStoreUpdated",[])},jh:function(a,b){this.gh=(this.gh||0)+1;var c;"string"==typeof a?(c={by:this.ih(a),map:{}},c.map[a]=[a]):c="function"==typeof a?{by:a,map:{}}:a;var d;b?d=this.getItem(b).$level:(b=0,d=0);for(var e=this.branch[b],f=this.ih(c.by),g=[],h=[],i=0;i<e.length;i++){var j=this.getItem(e[i]),k=f(j),l=d+"$"+k,m=this.branch[l];if(!m){var n=this.pull[l]={id:l,value:k,$group:!0,$row:c.row};h.push(n),m=this.branch[l]=[],m.lh=[],g.push(l)}m.push(j.id),m.lh.push(j)}this.branch[b]=g;for(var o in c.map){var p=c.map[o][1]||"any",q=this.ih(c.map[o][0]);"function"!=typeof p&&(p=webix.GroupMethods[p]);for(var i=0;i<h.length;i++)h[i][o]=p.call(this,q,this.branch[h[i].id].lh)}for(var i=0;i<h.length;i++){var r=h[i];if(this.hasEvent("onGroupCreated")&&this.callEvent("onGroupCreated",[r.id,r.value,this.branch[r.id].lh]),c.footer){var s="footer$"+r.id,t=this.pull[s]={id:s,$footer:!0,value:r.value,$level:d,$count:0,$parent:r.id,$row:c.footer.row};for(var o in c.footer){var p=c.footer[o][1]||"any",q=this.ih(c.footer[o][0]);"function"!=typeof p&&(p=webix.GroupMethods[p]),t[o]=p.call(this,q,this.branch[h[i].id].lh)}this.branch[r.id].push(t.id),this.callEvent("onGroupFooter",[t.id,t.value,this.branch[r.id].lh])}delete this.branch[r.id].lh}this.mh(g,b,d+1),this.callEvent("onStoreUpdated",[])},hh:function(a,b,c){if(c||this.gh){this.gh=Math.max(0,this.gh-1),b=b||0;for(var d=[],e=this.branch[b],f=0;f<e.length;f++){var g=e[f],h=this.branch[g];h&&(d=d.concat(h)),delete this.pull[g],delete this.branch[g]}this.branch[b]=d;for(var f=d.length-1;f>=0;f--)this.pull[d[f]].$footer&&d.splice(f,1);this.mh(d,0,1),a||this.callEvent("onStoreUpdated",[])}},mh:function(a,b,c){b&&(this.getItem(b).$count=a.length);for(var d=0;d<a.length;d++){var e=this.pull[a[d]];e.$level=c,e.$parent=b;var f=this.branch[e.id];f&&this.mh(f,e.id,c+1)}}},webix.clipbuffer={nh:null,oh:null,ph:0,init:function(){return null!==this.nh?this.nh:(webix.destructors.push(this),this.nh=document.createElement("textarea"),this.nh.className="webix_clipbuffer",this.nh.setAttribute("webixignore",1),document.body.appendChild(this.nh),webix.event(document.body,"keydown",webix.bind(function(a){var b=a.keyCode,c=!(!a.ctrlKey&&!a.metaKey);86===b&&c&&webix.delay(this.rh,this,[a],100)},this)),this.nh)},destructor:function(){this.nh=null},set:function(a){this.init(),this.nh.value=a,this.focus()},focus:function(){this.UA()||(this.init(),this.nh.focus(),this.nh.select())},UA:function(){var a="";return"undefined"!=typeof window.getSelection?a=window.getSelection().toString():"undefined"!=typeof document.selection&&"Text"==document.selection.type&&(a=document.selection.createRange().text),!!a},rh:function(a){var b=a.target||a.srcElement;if(b===this.nh){var c=this.nh.value,d=webix.UIManager.getFocus();!d||d.getEditor&&d.getEditor()||(d.callEvent("onPaste",[c]),this.nh.select())}}},webix.CopyPaste={clipboard_setter:function(a){return(a===!0||1===a)&&(a="modify"),this.attachEvent("onAfterSelect",function(a){if(!this.getEditor||!this.getEditor()){var b=this.getItem(a),c=this.type.templateCopy(b);webix.clipbuffer.set(c,this),webix.clipbuffer.focus()}}),this.attachEvent("onPaste",function(a){webix.isUndefined(this.rh[this.s.clipboard])||this.rh[this.s.clipboard].call(this,a)}),this.attachEvent("onFocus",function(){webix.clipbuffer.focus()}),this.attachEvent("onItemClick",function(){document.activeElement&&this.$view.contains(document.activeElement)||(webix.clipbuffer.focus(),webix.UIManager.setFocus(this))}),a},rh:{insert:function(a){this.add({value:a})},modify:function(a){for(var b=this.getSelectedId(!0),c=0;c<b.length;c++)this.getItem(b[c]).value=a,this.refresh(b[c])},custom:function(a){}},templateCopy_setter:function(a){this.type.templateCopy=webix.template(a)},type:{templateCopy:function(a){return this.template(a)}}},webix.KeysNavigation={sh:function(a){return function(b,c){var d=c.srcElement||c.target;if(!d.getAttribute("webixignore")){var e=d.tagName;if("INPUT"==e||"TEXTAREA"==e||"SELECT"==e)return!0}return!(b&&b.moveSelection&&b.config.navigation&&!b.Eb)||b.moveSelection(a,c.shiftKey)}},moveSelection:function(a,b){var c=this.getSelectedId(!0);if(!c.length){if("down"==a)a="top";else{if("up"!=a)return;a="bottom"}c=[1]}if(1==c.length){if(c=c[0],"left"==a&&this.close)return this.close(c);if("right"==a&&this.open)return this.open(c);if("top"==a)c=this.getFirstId();else if("bottom"==a)c=this.getLastId();else if("up"==a||"left"==a||"pgup"==a){var d=this.getIndexById(c),e="pgup"==a?10:1;c=this.getIdByIndex(Math.max(0,d-e))}else{if("down"!=a&&"right"!=a&&"pgdown"!=a)return;var d=this.getIndexById(c),e="pgdown"==a?10:1;c=this.getIdByIndex(Math.min(this.count()-1,d+e))}this.showItem(c),this.select(c)}return!1},navigation_setter:function(a){return a&&!webix.UIManager.th&&(webix.UIManager.th=!0,webix.UIManager.addHotKey("up",this.sh("up")),webix.UIManager.addHotKey("down",this.sh("down")),webix.UIManager.addHotKey("shift+up",this.sh("up")),webix.UIManager.addHotKey("shift+down",this.sh("down")),webix.UIManager.addHotKey("shift+right",this.sh("right")),webix.UIManager.addHotKey("shift+left",this.sh("left")),webix.UIManager.addHotKey("pageup",this.sh("pgup")),webix.UIManager.addHotKey("pagedown",this.sh("pgdown")),webix.UIManager.addHotKey("home",this.sh("top")),webix.UIManager.addHotKey("end",this.sh("bottom")),webix.UIManager.addHotKey("right",this.sh("right")),webix.UIManager.addHotKey("left",this.sh("left"))),a}},webix.protoUI({name:"tree",defaults:{scroll:"a"},$init:function(){this.x.className+=" webix_tree",webix.extend(this.data,webix.TreeStore,!0),webix.extend(this.on_click,webix.TreeClick),this.attachEvent("onAfterRender",this.Jf),this.attachEvent("onPartialRender",this.Jf),this.data.provideApi(this,!0)},ad:"webix_tm_id",on_context:{},on_dblclick:{webix_tree_checkbox:function(){return this.on_click.webix_tree_checkbox?this.on_click.webix_tree_checkbox.apply(this,arguments):void 0}},on_click:{webix_tree_item:function(a,b){if(this.s.activeTitle){var c=this.getItem(b);c.open?this.close(b):this.open(b)}if(this.s.select)if("multiselect"==this.s.select||this.s.multiselect){if("level"==this.s.multiselect){var d=this.getSelectedId(!0)[0];if(d&&this.getParentId(b)!=this.getParentId(d))return}this.select(b,!1,a.ctrlKey||a.metaKey||"touch"==this.s.multiselect,a.shiftKey)}else this.select(b)}},rh:{insert:function(a){var b=this.getSelectedId()||"0";this.add({value:a},null,b)},modify:function(a){for(var b=this.getSelectedId(!0),c=0;c<b.length;c++)this.getItem(b[c]).value=a,this.refresh(b[c])},custom:function(a){}},Xg:!0,$dragHTML:function(a){return"<div class='borderless'>"+this.type.template(a,this.type)+"</div>"},type:webix.extend({template:function(a,b){var c=b["template"+a.level]||b.templateCommon;return c.apply(this,arguments)},classname:function(a,b,c){var d="webix_tree_item";return a.$css&&("object"==typeof a.$css&&(a.$css=webix.html.createCss(a.$css)),d+=" "+a.$css),c&&c.$css&&(d+=" "+c.$css),d},templateCommon:webix.template("{common.icon()} {common.folder()} <span>#value#</span>"),templateStart:webix.template('<div webix_tm_id="#id#" class="{common.classname()}">'),templateEnd:webix.template("</div>"),templateCopy:webix.template("#value#")},webix.TreeType)},webix.AutoTooltip,webix.Group,webix.TreeAPI,webix.DragItem,webix.TreeDataMove,webix.SelectionModel,webix.KeysNavigation,webix.MouseEvents,webix.Scrollable,webix.TreeDataLoader,webix.ui.proto,webix.TreeRenderStack,webix.CopyPaste,webix.EventSystem),webix.TreeStateCheckbox={uh:function(){if(this.vg){var a=this.render;this.render=function(b,c,d){var e=a.apply(this,arguments);this.s.threeState&&e&&"checkbox"!=c&&this.vh.apply(this,arguments)},this.uh=function(){}}},threeState_setter:function(a){return a&&this.uh(),a},vh:function(a){var b,c,d,e,f;if(d=[],f=this,a&&!f.data.pull[a]&&(a=0),!a||f.data.pull[a].$count)for(c=this.wh(a),
c.sort(function(a,b){return f.data.pull[b].$level-f.data.pull[a].$level}),b=0;b<c.length;b++)b&&f.data.pull[c[b]].$parent==f.data.pull[c[b-1]].$parent||(d=d.concat(f.xh(c[b])));else d=d.concat(f.xh(a));for(e={},b=0;b<d.length;b++)e[d[b]]||(e[d[b]]=1,this.yh(d[b]));f=null},yh:function(a){var b,c;c=this.getItemNode(a),c&&(this.render(a,"checkbox","update"),this.getItem(a).indeterminate&&(c=this.getItemNode(a),b=c.getElementsByTagName("input")[0],b&&(b.indeterminate=this.getItem(a).indeterminate)))},xh:function(a){var b,c,d,e,f,g,h,i;for(e=this.getParentId(a),g=this,f=[];e&&"0"!=e;){h=0,c=0,this.data.eachChild(e,function(a){a.indeterminate?h++:a.checked&&c++}),b=d=i=!1;var j=this.getItem(e);c==j.$count?b=!0:(c>0||h>0)&&(d=!0),(d||d!=j.indeterminate)&&(i=!0),j.indeterminate=d,j.checked!=b&&(i=!0),j.checked=b,i?(f.push(e),e=this.getParentId(e)):e=0}return f},getChecked:function(){var a=[],b=this;return this.data.eachSubItem(0,function(c){b.isChecked(c.id)&&a.push(c.id)}),a},Tg:function(a,b){var c=this.getItem(a);if(c&&(""===b&&(b=!c.checked),c.checked!=b||c.indeterminate)){c.checked=b,this.zh(a);var d=this.xh(a);if(this.vg&&d.length<5)for(var e=0;e<d.length;e++)this.yh(d[e]);else this.refresh();this.callEvent("onItemCheck",[a,b])}},checkItem:function(a){this.Sg(a,!0),this.updateItem(a)},uncheckItem:function(a){this.Sg(a,!1),this.updateItem(a)},Ah:function(a,b,c){var d=b?"checkItem":"uncheckItem";a?this[d](a):a=0,this.s.threeState?a||this.data.eachChild(0,function(a){this[d](a.id)},this,c):this.data.each(function(a){this[d](a.id)},this,c,a)},checkAll:function(a,b){this.Ah(a,!0,b)},uncheckAll:function(a,b){this.Ah(a,!1,b)},zh:function(a){var b,c=this.getItem(a);c.indeterminate=!1,b=c.checked,this.data.eachSubItem(a,function(a){a.indeterminate=!1,a.checked=b}),this.vg&&this.isBranchOpen(c.$parent)&&this.render(a,0,"branch")},isChecked:function(a){return this.getItem(a).checked},wh:function(a){var b=[];return this.data.eachSubItem(a,function(a,c){c||b.push(a.id)}),b}},webix.ui.tree&&webix.extend(webix.ui.tree,webix.TreeStateCheckbox,!0),webix.type(webix.ui.tree,{name:"lineTree",css:"webixLineTree",icon:function(a,b){for(var c="",d="",e=1;e<=a.$level;e++){if(e==a.$level)var d=a.$count?a.open?"webix_tree_open ":"webix_tree_close ":"webix_tree_none ";var f=this.Bh(a,b,e);f&&(c+="<div class='"+d+" webix_tree_img webix_tree_"+f+"'></div>")}return c},Bh:function(a,b,c){var d=b.sg,e=webix.TreeRenderStack.tg;if(0===d&&e){var f=a.$level,g=a.id;for(d=[];f;){var h=e.getParentId(g),i=e.data.branch[h];i[i.length-1]==g&&(d[f]=!0),g=h,f--}b.sg=d}if(!d)return 0;if(c==a.$level){var j=3;return a.$parent||0===a.$index&&(j=4),d[a.$level]&&(j=2),a.$count?a.open?"minus"+j:"plus"+j:"line"+j}return d[c]?"blank":"line1"}}),webix.NavigationButtons={Ch:function(){webix.html.remove(this.Dh),this.Dh=webix.html.create("DIV",{"class":"webix_nav_panel webix_nav_panel_"+this.s.navigation.type},""),this.x.appendChild(this.Dh),this.Eh(),this.Fh(),this.Gh()},Gh:function(){var a=[];this.Dh&&(a[0]=webix.event(this.Dh,"click",webix.bind(function(a){for(var b=a.srcElement||a.target,c=!1;b!=this.Dh&&!c;){var d=b.getAttribute(this.Hh);d&&(c=!0,this.Ih(d)),b=b.parentNode}},this))),this.Jh&&(a[1]=webix.event(this.Jh,"click",webix.bind(function(a){this.Kh(-1)},this))),this.Lh&&(a[1]=webix.event(this.Lh,"click",webix.bind(function(a){this.Kh(1)},this))),this.attachEvent("onDestruct",function(){for(var b=0;b<a.length;b++)this.detachEvent(a[b]);a=null})},Kh:function(a){if(this.q){var b=this.Mh+a;(b>=this.q.length||0>b)&&(b=0>b?this.q.length-1:0),this.setActiveIndex(b)}},Ih:function(a){this.q&&webix.$$(a).show()},Eh:function(){var a,b;if(b=this.s.navigation,b.items){this.Hh=b.linkAttr||"bind_id",this.Dh?this.Nh():this.Ch();var c=this.q?this.q:this.data.order;if(c.length>1)for(var d=0;d<c.length;d++){a=webix.html.create("DIV",{"class":"webix_nav_item webix_nav_"+(d==this.Mh?"active":"inactive")},"<div></div>");var e=this.q?this.q[d].s.id:c[d];e&&a.setAttribute(this.Hh,e),this.Dh.appendChild(a)}}},Nh:function(){if(this.Dh)for(var a=this.Dh.childNodes,b=a.length-1;b>=0;b--)webix.html.remove(a[b])},Fh:function(){var a;a=this.s.navigation,a.buttons&&(this.Jh&&webix.html.remove(this.Jh),this.Jh&&webix.html.remove(this.Lh),this.Jh=webix.html.create("DIV",{"class":"webix_nav_button_"+a.type+" webix_nav_button_prev "},'<div class="webix_nav_button_inner"></div>'),this.x.appendChild(this.Jh),this.Lh=webix.html.create("DIV",{"class":"webix_nav_button_"+a.type+" webix_nav_button_next "},'<div class="webix_nav_button_inner"></div>'),this.x.appendChild(this.Lh))}},webix.protoUI({name:"list",Oh:"webix_list",$init:function(a){webix.html.addCss(this.x,this.Oh+("x"==(a.layout||this.defaults.layout)?"-x":"")),this.data.provideApi(this,!0),this.Ph=webix.bind(this.Ph,this),this.data.attachEvent("onStoreUpdated",this.Ph),this.data.attachEvent("onSyncApply",this.Ph),this.attachEvent("onAfterRender",this.hg)},$dragHTML:function(a,b){if("y"==this.s.layout&&"auto"==this.type.width){this.type.width=this.bc;var c=this.jb(a);return this.type.width="auto",c}return this.jb(a)},defaults:{select:!1,scroll:!0,layout:"y"},ad:"webix_l_id",on_click:{webix_list_item:function(a,b){this.s.select&&(this.Qh=!0,"multiselect"==this.s.select||this.s.multiselect?this.select(b,!1,a.ctrlKey||a.metaKey||"touch"==this.s.multiselect,a.shiftKey):this.select(b),this.Qh=!1)}},on_dblclick:{},getVisibleCount:function(){return Math.floor(this.dc/this.type.height)},Ph:function(){(this.s.autoheight||this.s.autowidth)&&this.resize()},Rh:function(a){var b=this.data.$pagesize||this.count();return this.Lf(a&&b>a),this.s.autoheight&&(a||1/0)>b&&(a=b),Math.max(this.type.height*a,this.s.minHeight||0)},Sh:function(a){var b=this.data.$pagesize||this.count();return this.Lf(a&&b>a),this.s.autowidth&&(a||1/0)>b&&(a=b),this.type.width*a},hg:function(){"x"==this.s.layout&&(this.y.style.width="auto"!=this.type.width?this.type.width*this.count()+"px":"auto")},$getSize:function(a,b){return"y"==this.s.layout?("auto"!=this.type.width&&(this.s.width=this.type.width+(this.cc?webix.ui.scrollSize:0)),(this.s.yCount||this.s.autoheight)&&(this.s.height=this.Rh(this.s.yCount)||1)):("auto"!=this.type.height&&(this.s.height=this.type.height+(this.ec?webix.ui.scrollSize:0)),(this.s.xCount||this.s.autowidth)&&(this.s.width=this.Sh(this.s.xCount)||1)),webix.ui.view.prototype.$getSize.call(this,a,b)},$setSize:function(){webix.ui.view.prototype.$setSize.apply(this,arguments)},type:{css:"",widthSize:function(a,b){return b.width+(b.width>-1?"px":"")},heightSize:function(a,b){return b.height+(b.height>-1?"px":"")},classname:function(a,b,c){var d="webix_list_item";return a.$css&&("object"==typeof a.$css&&(a.$css=webix.html.createCss(a.$css)),d+=" "+a.$css),c&&c.$css&&(d+=" "+c.$css),d},template:function(a){return(a.icon?"<span class='webix_icon fa-"+a.icon+"'></span> ":"")+a.value+(a.badge?"<div class='webix_badge'>"+a.badge+"</div>":"")},width:"auto",templateStart:webix.template('<div webix_l_id="#id#" class="{common.classname()}" style="width:{common.widthSize()}; height:{common.heightSize()}; overflow:hidden;">'),templateEnd:webix.template("</div>")},$skin:function(){this.type.height=webix.skin.$active.listItemHeight}},webix.KeysNavigation,webix.DataMove,webix.DragItem,webix.MouseEvents,webix.SelectionModel,webix.Scrollable,webix.ui.proto,webix.CopyPaste),webix.protoUI({name:"grouplist",defaults:{animate:{}},Oh:"webix_grouplist",$init:function(){webix.extend(this.data,webix.TreeStore,!0),this.data.count=function(){return this.order.length},this.data.provideApi(this,!0),this.data.attachEvent("onClearAll",webix.bind(this.Th,this)),this.Th()},Th:function(){this.Uh=[],this.Vh=[]},$setSize:function(){webix.ui.view.prototype.$setSize.apply(this,arguments)&&(this.y.style.width=this.bc)},on_click:{webix_list_item:function(a,b){if(this.Wh)return!1;for(var c=0;c<this.Vh.length;c++)if(this.Vh[c]==b){for(var d=c;d<this.Vh.length;d++)this.data.getItem(this.Vh[d]).$template="";return c?(this.Uh=this.data.branch[this.Vh[c-1]],this.Vh.splice(c)):(this.Uh=this.data.branch[0],this.Vh=[]),this.Xh=!1,this.render()}var e=this.getItem(b);return e.$count?(this.Xh=!0,this.Vh.push(b),e.$template="Back",this.Uh=this.data.branch[e.id],this.render()):void(this.s.select&&(this.Qh=!0,"multiselect"==this.s.select||this.s.multiselect?this.select(b,!1,"touch"==this.s.multiselect||a.ctrlKey||a.metaKey,a.shiftKey):this.select(b),this.Qh=!1))}},getOpenState:function(){return{parents:this.Vh,branch:this.Uh}},render:function(a,b,c,d){var e,f;if(this.Vh=webix.copy(this.Vh),this.Uh=webix.copy(this.Uh),this.Vh.length)for(e=0;e<this.Vh.length;e++)this.data.branch[this.Vh[e]]||(this.Vh.splice(e,1),e--);if(f=this.Vh.length?this.Vh[this.Vh.length-1]:0,this.Uh=webix.copy(this.data.branch[f]),!this.Uh.length&&this.Vh.length&&(this.Uh=[f],this.Vh.pop()),this.Wh)return webix.delay(this.render,this,arguments,100);for(e=0;e<this.Uh.length;e++)this.data.getItem(this.Uh[e]).$template="";if(this.Uh.length||(this.Uh=this.data.branch[0]),this.data.order=webix.toArray([].concat(this.Vh).concat(this.Uh)),this.callEvent("onBeforeRender",[this.data])){if(!this.Qh&&this.y.innerHTML&&webix.animate.isSupported()&&this.s.animate&&this.Yh!=this.Vh.length){if(this.callEvent("onBeforeRender",[this.data])){this.Zh||(this.Zh=[]);var g=this.y.cloneNode(!1);g.innerHTML=this.data.getRange().map(this.jb,this).join("");var h=webix.extend({},this.s.animate);h.direction=this.Xh?"left":"right";var i=[webix.clone(h),webix.clone(h)];if(this.Xh)this.Zh.push(this.getScrollState()),webix.Touch&&webix.Touch.$active&&(i[0].y=0,i[1].y=-this.getScrollState().y);else{var j=this.Zh.pop();webix.Touch&&webix.Touch.$active&&(i[0].y=-j.y,i[1].y=-this.getScrollState().y)}var k=webix.animate.formLine(g,this.y,h);webix.Touch&&webix.Touch.$active&&webix.Touch.Nf(g,0,this.Xh?0:i[0].y,"0ms"),h.master=this,h.callback=function(){this.y=g,this.Xh?webix.Touch&&webix.Touch.$active||this.scrollTo(0,0):webix.Touch&&webix.Touch.$active?webix.delay(function(){webix.Touch.Nf(g,0,i[0].y,"0ms")},this):j&&this.scrollTo(0,j.y),webix.animate.breakLine(k),h.master=h.callback=null,this.t=null,this.Wh=!1,this.callEvent("onAfterRender",[])},this.Wh=!0,webix.animate(k,i)}}else webix.RenderStack.render.apply(this,arguments);this.Yh=this.Vh.length}},templateBack_setter:function(a){this.type.templateBack=webix.template(a)},templateItem_setter:function(a){this.type.templateItem=webix.template(a)},templateGroup_setter:function(a){this.type.templateGroup=webix.template(a)},type:{template:function(a,b){return a.$count?b.templateGroup(a,b):b.templateItem(a,b)},css:"group",classname:function(a,b,c){return"webix_list_item webix_"+(a.$count?"group":"item")+(a.$template?"_back":"")+(c&&c.webix_selected?" webix_selected ":"")+(a.$css?a.$css:"")},templateStart:webix.template('<div webix_l_id="#id#" class="{common.classname()}" style="width:{common.widthSize()}; height:{common.heightSize()};  overflow:hidden;">'),templateBack:webix.template("#value#"),templateItem:webix.template("#value#"),templateGroup:webix.template("#value#"),templateEnd:function(a,b){var c="";return a.$count&&(c+="<div class='webix_arrow_icon'></div>"),c+="</div>"}},showItem:function(a){var b,c;for(a&&(b=this.getItem(a),c=b.$parent,b.$count&&(c=b.id)),this.Uh=this.data.branch[c||0],this.Vh=[];c;)this.getItem(c).$template="Back",this.Vh.unshift(c),c=this.getItem(c).$parent;this.Qh=!0,this.render(),this.Qh=!1,webix.RenderStack.showItem.call(this,a)}},webix.Group,webix.ui.list),webix.type(webix.ui.grouplist,{}),webix.protoUI({name:"unitlist",ad:"webix_item_id",uniteBy_setter:webix.template,sort_setter:function(a){return"object"!=typeof a&&(a={}),this.E(a,{dir:"asc",as:"string"}),a},render:function(a,b,c,d){var e=this.s;if(this.isVisible(e.id)){if(!e.uniteBy)return!1;if(a){var f=this.getItemNode(a);if(f&&"update"==c&&this.s.uniteBy.call(this,b)==this.getItem(a).$unitValue){var g=this.t[a]=this.Ne(b);return webix.html.insertBefore(g,f),void webix.html.remove(f)}}this.callEvent("onBeforeRender",[this.data])&&(this.units=null,this.$h(),this.units&&(this.y.innerHTML=this._h().map(this.jb,this).join(""),this.t=null),this.callEvent("onAfterRender",[]))}},getUnits:function(){var a=[];if(this.units)for(var b in this.units)a.push(b);return a},getUnitList:function(a){return this.units?this.units[a]:null},jb:function(a){var b=this.data.Me[a.id];return this.callEvent("onItemRender",[a]),a.$unit?this.type.templateStartHeader(a,this.type)+this.type.templateHeader.call(this,a.$unit)+this.type.templateEnd(a,this.type):this.type.templateStart(a,this.type,b)+(a.$template?this.type["template"+a.$template]:this.type.template)(a,this.type)+this.type.templateEnd(a,this.type)},_h:function(){var a,b,c,d;a=[];var e=this.data.$min||0,f=this.data.$max||1/0,g=0;for(c in this.units)for(a.push({$unit:c}),d=this.units[c],b=0;b<d.length;b++){if(g==e&&(a=[{$unit:c}]),a.push(this.getItem(d[b])),g==f)return webix.toArray(a);g++}return webix.toArray(a)},$h:function(){var a=this;this.units={},this.data.each(function(b){var c=a.s.uniteBy.call(this,b);b.$unitValue=c,a.units[c]||(a.units[c]=[]),a.units[c].push(b.id)})},type:{headerHeight:20,templateHeader:function(a){return"<span class='webix_unit_header_inner'>"+a+"</span>"},templateStart:function(a,b,c){if(a.$unit)return b.templateStartHeader.apply(this,arguments);var d="webix_list_item webix_list_"+b.css+"_item"+(c&&c.webix_selected?" webix_selected":"")+b.classname(a,b,c),e="width:"+b.widthSize(a,b,c)+"; height:"+b.heightSize(a,b,c)+"; overflow:hidden;"+(b.layout&&"x"==b.layout?"float:left;":"");return'<div webix_item_id="'+a.id+'" class="'+d+'" style="'+e+'">'},templateStartHeader:function(a,b,c){var d="webix_unit_header webix_unit_"+b.css+"_header"+(a.$selected?"_selected":""),e="width:"+b.widthSize(a,b,c)+"; height:"+b.headerHeight+"px; overflow:hidden;";return'<div webix_unit_id="'+a.$unit+'" class="'+d+'" style="'+e+'">'}},$skin:function(){this.type.headerHeight=webix.skin.$active.unitHeaderHeight||20}},webix.ui.list),webix.EditAbility={defaults:{editaction:"click"},$init:function(a){this.ai={},this.Eb=0,this.bi=0,this.w.style.position="relative",a&&(a.onDblClick=a.onDblClick||{}),this.attachEvent("onAfterRender",this.$s),this.s.editable&&this.ci(),webix.extend(this,webix.Undo)},Ux:function(a){try{if("number"==typeof a.selectionStart)a.selectionStart=a.selectionEnd=a.value.length;else if("undefined"!=typeof a.createTextRange){var b=a.createTextRange();b.collapse(!1),b.select()}}catch(c){}},$s:function(){var a=this.getEditor();if(a&&a.$inline&&!a.getPopup){var b=this.mi(a);if(b&&b!=a.node){var c=a.node.value;a.node=b,b.value=c,b.focus(),this.Ux(b)}else this.editStop()}},editable_setter:function(a){return a&&this.ci(),a},ci:function(){webix.attachEvent("onEditEnd",webix.bind(function(){this.Eb&&this.editStop()},this)),webix.attachEvent("onClick",webix.bind(function(a){this.Eb&&new Date-this.bi>200&&(this.di&&!this.di.popupType&&a&&this.di.node&&this.di.node.contains(a.target||a.srcElement)||this.editStop())},this)),this.data.attachEvent&&this.data.attachEvent("onIdChange",webix.bind(function(a,b){this.ei(a,b)},this)),this.attachEvent("onItemClick",function(a){this.s.editable&&"click"==this.s.editaction&&this.edit(a)}),this.attachEvent("onItemDblClick",function(a){this.s.editable&&"dblclick"==this.s.editaction&&this.edit(a)}),this.fi=webix.bind(function(){this.bi=new Date},this),this.ci=function(){},this.gi&&this.gi()},Vs:function(){webix.delay(function(){var a=this.getEditor();if(a&&a.config.liveEdit){var b={value:a.getValue(),old:a.value};if(b.value==b.old)return;a.value=b.value,this.ti(a,b.value),this.callEvent("onLiveEdit",[b,a])}},this)},hi:function(a){var b=this.s.form;"string"!=typeof b&&(this.s.form=b=webix.ui(b).config.id);var b=webix.$$(b),c=b.setValues?b:b.getChildViews()[0];c.setValues(this.getItem(a.row||a)),b.config.master=this.config.id,b.show(this.getItemNode(a));var d=c.getChildViews()[0];d.focus&&d.focus()},edit:function(a,b,c){if(this.callEvent("onBeforeEditStart",[a])){if(this.s.form)return this.hi(a);var d=this.ii(a);if(d){if(this.getEditor(a))return;b||this.editStop();var e=webix.extend({},webix.editors[d]),f=this.ji(a,e,c);e.config.liveEdit&&(this.Ws=this.attachEvent("onKeyPress",this.Vs));var g=e.getPopup?e.getPopup(f).x:f;return g&&webix.event(g,"click",this.fi),f&&webix.event(f,"change",this.ki,{bind:{view:this,id:a}}),c!==!1&&e.focus(),this.bi=webix.edit_open_time=new Date,webix.UIManager.setFocus(this,!0),this.callEvent("onAfterEditStart",[a]),e}return null}},getEditor:function(a){return a?this.ai[a]:this.di},ei:function(a,b){var c=this.ai[a];c&&(this.ai[b]=c,c.id=b,delete this.ai[a])},ki:function(a){this.view.hasEvent("onEditorChange")&&this.view.callEvent("onEditorChange",[this.id,this.view.getEditorValue(this.id)])},li:function(a){return this.s},ji:function(a,b,c){var d=(b.config=this.li(a),b.render());b.$inline&&(d=this.mi(a)),b.node=d;var e=this.getItem(a),f=e[this.s.editValue||"value"];return webix.isUndefined(f)&&(f=""),b.setValue(f,e),b.value=f,this.ni(a,b),c!==!1&&this.showItem(a),b.$inline||this.oi(a,d,!0),b.afterRender&&b.afterRender(),d},pi:function(a){return this.getItemNode(a)},mi:function(a){var b=this.pi(a);return b&&(b=b.getElementsByTagName("input")[0]||b),b},ii:function(a){return this.s.editor},ni:function(a,b){b.id=a,this.ai[a]=this.di=b,this.Eb++},qi:function(a){this.di==a&&(this.di=0),a.destroy&&a.destroy(),delete a.popup,delete a.node,delete this.ai[a.id],this.Eb--},focusEditor:function(a){var b=this.getEditor.apply(this,arguments);b&&b.focus&&b.focus()},editCancel:function(){this.editStop(null,null,!0)},Xy:function(a){if(a){var b=this.getEditor();if(b&&b.getPopup&&b.getPopup()==a.getTopParentView())return}this.editStop()},editStop:function(a){if(!this.Zx){this.Zx=1;var b=arguments[2],c=1;return a?c=this.ri(this.ai[a],b):this.si(function(a){c*=this.ri(a,b)}),this.Zx=0,c}},ug:function(a){var b=this.getItemNode(a);return{left:b.offsetLeft,top:b.offsetTop,height:b.offsetHeight,width:b.offsetWidth,parent:this.w}},oi:function(a,b,c){if(b.style){var d=this.ug(a);b.style.top=d.top+"px",b.style.left=d.left+"px",b.style.width=d.width-1+"px",b.style.height=d.height-1+"px",b.top=d.top,c&&d.parent.appendChild(b)}},si:function(a){for(var b in this.ai)a.call(this,this.ai[b])},ri:function(a,b){if(a){var c={value:a.getValue(),old:a.value};if(this.callEvent("onBeforeEditStop",[c,a,b])){if(!b){var d=c.old;"string"==typeof c.value&&(d+=""),(d!=c.value||a.config.liveEdit)&&this.updateItem(this.ti(a,c.value))}a.$inline?a.node=null:webix.html.remove(a.node);var e=a.config.suggest;return e&&"string"==typeof e&&webix.$$(e).hide(),this.qi(a),this.Ws&&this.detachEvent(this.Ws),this.callEvent("onAfterEditStop",[c,a,b]),1}return 0}},validateEditor:function(a){var b=!0;if(this.s.rules){var c=this.getEditor(a),d=c.column||this.s.editValue||"value",e=this.s.rules[d],f=this.s.rules.$all;if(e||f){var g=this.data.getItem(c.row||c.id),h=c.getValue(),i=c.getInputNode();e&&(b=e.call(this,h,g,d)),f&&(b=f.call(this,h,g,d)&&b),b?webix.html.removeCss(i,"webix_invalid"):webix.html.addCss(i,"webix_invalid"),webix.callEvent("onLiveValidation",[c,b,g,h])}}return b},getEditorValue:function(a){var b;return b=0===arguments.length?this.di:this.getEditor(a),b?b.getValue():void 0},getEditState:function(){return this.di||!1},editNext:function(a,b){if(a=a!==!1,1==this.Eb||b){var c=this.ui(this.di||b,function(a){return!!this.ii(a)},a);if(this.editStop())return c&&(this.edit(c),this.vi(c)),!1}},vi:function(){},ui:function(a,b,c){var d=this.getIndexById(a.id),e=this.data.order;if(c){for(var f=d+1;f<e.length;f++)if(b.call(this,e[f]))return e[f]}else for(var f=d-1;f>=0;f--)if(b.call(this,e[f]))return e[f];return null},ti:function(a,b){return this.getItem(a.id)[this.s.editValue||"value"]=b,a.id}},function(){function a(a,c){var d=a.config.suggest;if(d){var e=a.config.suggest=b(d),f=webix.$$(e);f&&c&&f.linkInput(c)}}function b(a){if("string"==typeof a)return a;if(a.linkInput)return a.s.id;"object"==typeof a?(webix.isArray(a)&&(a={data:a}),a.view=a.view||"suggest"):a===!0&&(a={view:"suggest"});var b=webix.ui(a);return b.config.id}webix.editors={text:{focus:function(){this.getInputNode(this.node).focus(),this.getInputNode(this.node).select()},getValue:function(){return this.getInputNode(this.node).value},setValue:function(b){var c=this.getInputNode(this.node);c.value=b,a(this,c)},getInputNode:function(){return this.node.firstChild},render:function(){return webix.html.create("div",{"class":"webix_dt_editor"},"<input type='text'>")}},"inline-checkbox":{render:function(){return{}},getValue:function(){return this.node.checked},setValue:function(){},focus:function(){this.node.focus()},getInputNode:function(){},$inline:!0},"inline-text":{render:function(){return{}},getValue:function(){return this.node.value},setValue:function(){},focus:function(){try{this.node.select(),this.node.focus()}catch(a){}},getInputNode:function(){},$inline:!0},checkbox:{focus:function(){this.getInputNode().focus()},getValue:function(){return this.getInputNode().checked},setValue:function(a){this.getInputNode().checked=!!a},getInputNode:function(){return this.node.firstChild.firstChild},render:function(){return webix.html.create("div",{"class":"webix_dt_editor"},"<div><input type='checkbox'></div>")}},select:{focus:function(){this.getInputNode().focus()},getValue:function(){return this.getInputNode().value},setValue:function(a){this.getInputNode().value=a},getInputNode:function(){return this.node.firstChild},render:function(){var a="",b=this.config.options||this.config.collection;if(b.data&&b.data.each)b.data.each(function(b){a+="<option value='"+b.id+"'>"+b.value+"</option>"});else if(webix.isArray(b))for(var c=0;c<b.length;c++){var d=b[c],e=webix.isUndefined(d.id),f=e?d:d.id,g=e?d:d.value;a+="<option value='"+f+"'>"+g+"</option>"}else for(var h in b)a+="<option value='"+h+"'>"+b[h]+"</option>";return webix.html.create("div",{"class":"webix_dt_editor"},"<select>"+a+"</select>")}},popup:{focus:function(){this.getInputNode().focus()},destroy:function(){this.getPopup().hide()},getValue:function(){return this.getInputNode().getValue()||""},setValue:function(a){this.getPopup().show(this.node),this.getInputNode().setValue(a)},getInputNode:function(){return this.getPopup().getChildViews()[0]},getPopup:function(){return this.config.popup||(this.config.popup=this.createPopup()),webix.$$(this.config.popup)},createPopup:function(){var a=this.config.popup||this.config.suggest;if(a){var b;return"object"!=typeof a||a.name?b=webix.$$(a):(a.view=a.view||"suggest",b=webix.ui(a)),b.linkInput&&b.linkInput(document.body),b}var c=webix.editors.$popup[this.popupType];return"string"!=typeof c&&(c=webix.editors.$popup[this.popupType]=webix.ui(c),this.popupInit(c)),c.s.id},popupInit:function(a){},popupType:"text",render:function(){return{}},$inline:!0}},webix.editors.color=webix.extend({focus:function(){},popupType:"color",popupInit:function(a){a.getChildViews()[0].attachEvent("onSelect",function(a){webix.callEvent("onEditEnd",[a])})}},webix.editors.popup),webix.editors.date=webix.extend({focus:function(){},popupType:"date",setValue:function(a){this.wi=this.config.stringResult||a&&"string"==typeof a,webix.editors.popup.setValue.call(this,a)},getValue:function(){return this.getInputNode().getValue(this.wi?webix.i18n.parseFormatStr:"")||""},popupInit:function(a){a.getChildViews()[0].attachEvent("onDateSelect",function(a){webix.callEvent("onEditEnd",[a])})}},webix.editors.popup),webix.editors.combo=webix.extend({xi:function(a){return this.config.popup?this.config.popup.config.id:a?b(a):this.rt(a)},rt:function(){var a=webix.editors.combo;return a.st=a.st||this.xi(!0)},render:function(){var a=webix.html.create("div",{"class":"webix_dt_editor"},"<input type='text'>"),b=this.config.suggest=this.xi(this.config.suggest);return b&&(webix.$$(b).linkInput(a.firstChild,!0),webix.event(a.firstChild,"click",webix.bind(this.showPopup,this))),a},getPopup:function(){return webix.$$(this.config.suggest)},showPopup:function(){var a=this.getPopup(),b=a.getList(),c=this.getInputNode(),d=this.getValue();a.show(c),d?b.exists(d)&&(b.select(d),b.showItem(d)):(b.unselect(),b.showItem(b.getFirstId())),a.ae=c},afterRender:function(){this.showPopup()},setValue:function(a){if(this.yi=a,this.config.suggest){var b=webix.$$(this.config.suggest),c=this.config.collection||this.config.options;c&&b.getList().data.importData(c),this.zi=this.getInputNode(this.node).value=b.getItemText(a)}},getValue:function(){var a=this.getInputNode().value;return this.config.suggest?a==this.zi?this.yi:webix.$$(this.config.suggest).getSuggestion():a}},webix.editors.text),webix.editors.richselect=webix.extend({focus:function(){},getValue:function(){return this.getPopup().getValue()},setValue:function(a){var b=this.config.collection||this.config.options;this.getInputNode(),b&&this.getPopup().getList().data.importData(b),this.getPopup().show(this.node),this.getPopup().setValue(a)},getInputNode:function(){return this.getPopup().getList()},popupInit:function(a){a.linkInput(document.body)},popupType:"richselect"},webix.editors.popup),webix.editors.password=webix.extend({render:function(){return webix.html.create("div",{"class":"webix_dt_editor"},"<input type='password'>")}},webix.editors.text),webix.editors.$popup={text:{view:"popup",width:250,height:150,body:{view:"textarea"}},color:{view:"popup",body:{view:"colorboard"}},date:{view:"popup",width:250,height:250,padding:0,body:{view:"calendar",icons:!0,borderless:!0}},richselect:{view:"suggest",body:{view:"list",select:!0}}}}(),webix.VirtualRenderStack={$init:function(){this.t={},webix.event(this.x,"scroll",webix.bind(this.Ai,this)),webix.env.touch&&this.attachEvent("onAfterScroll",webix.bind(this.Ai,this)),this.Bi=[]},getItemNode:function(a){return this.t[a]},showItem:function(a){var b=this.Ci(),c=this.data.getIndexById(a),d=Math.floor(c/b.Di)*b.Ei,e=this.getScrollState();(d<e.y||d+this.s.height>=e.y+this.dc)&&this.scrollTo(0,d)},render:function(a,b,c){if(this.isVisible(this.s.id)&&!this.$blockRender)if(a){var d=this.getItemNode(a);switch(c){case"update":if(!d)return;var e=this.t[a]=this.Ne(b);webix.html.insertBefore(e,d),webix.html.remove(d);break;default:this.Fi()}}else this.callEvent("onBeforeRender",[this.data])&&(this.t={},this.Ai(null,!0),this.Gi=!1,this.callEvent("onAfterRender",[]))},Fi:function(){this.Gi||(this.Gi=!0,window.setTimeout(webix.bind(function(){this.render()},this),1))},Hi:function(a){var b=document.createElement("DIV");return b.style.cssText="height:"+a+"px; width:100%; overflow:hidden;",b},Ai:function(a,b){this.Bi=[];var c=this.Ci();(!this.y.firstChild||b)&&(this.y.innerHTML="",this.y.appendChild(this.Hi(c.Ii)),this.u=[this.y.firstChild]);for(var d=c.R;d<=c.Ji;){for(;this.u[d]&&this.u[d].Ki&&d<=c.Ji;)d++;if(d>c.Ji)break;for(var e=d;!this.u[e];)e--;var f=this.u[e],g=d*c.Di+(this.data.$min||0);if(g>(this.data.$max||1/0))break;var h=Math.min(g+c.Di-1,this.data.$max?this.data.$max-1:1/0),i=this.Hi(c.Ei),j=this.data.getIndexRange(g,h);if(!j.length)break;for(var k={$template:"Loading"},l=0;l<j.length;l++)j[l]||this.Bi.push(g+l),j[l]=this.jb(j[l]||k);i.innerHTML=j.join("");for(var l=0;l<j.length;l++)this.t[this.data.getIdByIndex(g+l)]=i.childNodes[l];var m=parseInt(f.style.height,10),n=(d-e)*c.Ei,o=m-n-c.Ei;if(webix.html.insertBefore(i,n?f.nextSibling:f,this.y),this.u[d]=i,i.Ki=!0,0>=n&&o>0)f.style.height=o+"px",this.u[d+1]=f;else if(0>n?webix.html.remove(f):f.style.height=n+"px",o>0){var p=this.u[d+1]=this.Hi(o);webix.html.insertBefore(p,i.nextSibling,this.y)}d++}if(this.Bi.length){var q=this.Bi[0],r=this.Bi.pop()+1;if(r>q){var s=r-q;if(this.cf(s,q))return;s=Math.max(s,this.s.datafetch||this.s.loadahead||0),this.loadNext(s,q)}}},Ci:function(){var a=this.getScrollState(),b=a.y,c=this.bc,d=this.dc,e=this.type,f=Math.floor(c/e.width)||1,g=Math.floor(b/e.height),h=Math.ceil((d+b)/e.height)-1,i=this.data.$max?this.data.$max-this.data.$min:this.data.count(),j=Math.ceil(i/f)*e.height;return{R:g,Ji:h,Li:b,Ii:j,Ei:e.height,Di:f}},ug:function(a){var b=this.getItemNode(a);return b||(this.showItem(a),this.Ai(),b=this.getItemNode(a)),{left:b.offsetLeft,top:b.offsetTop,height:b.offsetHeight,width:b.offsetWidth,parent:this.w}}},webix.protoUI({name:"dataview",$init:function(a){a.sizeToContent&&this.$ready.unshift(this.Mi);var b=a.prerender||this.defaults.prerender;(b===!1||b!==!0&&"auto"!==a.height&&!a.autoheight)&&webix.extend(this,webix.VirtualRenderStack,!0),a.autoheight&&(a.scroll=!1),this.attachEvent("onBeforeRender",function(){this.iz()}),this.w.className+=" webix_dataview"},Mi:function(){var a=webix.html.create("DIV",0,this.type.template({}));a.style.position="absolute",document.body.appendChild(a),this.type.width=a.offsetWidth,this.type.height=a.offsetHeight,webix.html.remove(a)},defaults:{scroll:!0,datafetch:50},ad:"webix_f_id",on_click:{webix_dataview_item:function(a,b){this.s.select&&("multiselect"==this.s.select||this.s.multiselect?this.select(b,!1,"touch"==this.s.multiselect||a.ctrlKey||a.metaKey,a.shiftKey):this.select(b))}},on_dblclick:{},on_mouse_move:{},type:{template:webix.template("#value#"),templateLoading:webix.template("Loading..."),width:160,height:50,classname:function(a,b,c){var d="webix_dataview_item ";return b.css&&(d+=b.css+" "),a.$css&&("object"==typeof a.$css&&(a.$css=webix.html.createCss(a.$css)),d+=a.$css+" "),c&&c.$css&&(d+=c.$css+" "),d},templateStart:webix.template('<div webix_f_id="#id#" class="{common.classname()}" style="width:{common.width}px; height:{common.height}px; float:left; overflow:hidden;">'),templateEnd:webix.template("</div>")},Ni:function(a){return this.s.height=this.type.height*Math.ceil(this.data.count()/Math.floor(a/this.type.width))},autoheight_setter:function(a){return a&&(this.data.attachEvent("onStoreLoad",webix.bind(this.resize,this)),this.w.style.overflowY="hidden"),a},$getSize:function(a,b){this.s.xCount>0&&"auto"!=this.type.width&&!this.Nw&&(this.s.width=this.type.width*this.s.xCount+(this.cc?webix.ui.scrollSize:0)),this.s.yCount&&"auto"!=this.type.height&&(this.s.height=this.type.height*this.s.yCount);var c=this.s.width||this.bc;return this.s.autoheight&&c&&(this.Ni(c),this.scroll_setter(!1)),webix.ui.view.prototype.$getSize.call(this,a,b)},iz:function(){var a=!1;return this.s.yCount&&"auto"==this.type.height&&(this.type.height=Math.floor(this.dc/this.s.yCount),a=!0),this.s.xCount&&("auto"==this.type.width||this.Nw)?(this.Nw=!0,this.type.width=Math.floor(this.bc/this.s.xCount),a=!0):this.Nw=!1,a},$setSize:function(a,b){if(webix.ui.view.prototype.$setSize.call(this,a,b)){if(this.s.autoheight&&this.Ni()!=this.dc)return webix.delay(this.resize,this);(this.iz()||this.Ai)&&this.render()}}},webix.DataMove,webix.DragItem,webix.MouseEvents,webix.KeysNavigation,webix.SelectionModel,webix.Scrollable,webix.ui.proto),webix.DataDriver.htmltable={toObject:function(a){a=webix.toNode(a);var b=a.rows;return webix.html.remove(a),b},getRecords:function(a){for(var b=[],c=a[0]&&a[0].Oi?1:0;c<a.length;c++)b.push(a[c]);return b},getDetails:function(a){var b=a.getElementsByTagName("td");a={};for(var c=0;c<b.length;c++)a["data"+c]=b[c].innerHTML;return a},getInfo:function(a){return{Q:0,R:0}},getOptions:function(){},getConfig:function(a){var b=[],c=a[0].getElementsByTagName("th");c.length&&(a[0].Oi=!0);for(var d=0;d<c.length;d++){var e={id:"data"+d,header:this.Pi(c[d].innerHTML)},f=this.Qi(c[d]);e=webix.extend(e,f),b.push(e)}return b},Pi:function(a){var b=a.indexOf("json://");return-1!=b&&(a=JSON.parse(a.substr(b+7))),a},Qi:function(a){for(var b=a.attributes,c={},d=0;d<b.length;d++)c[b[d].nodeName]=this.Pi(b[d].nodeValue);return c.width=parseInt(c.width,10),c}},webix.protoUI({name:"vscroll",defaults:{scroll:"x",scrollStep:40,scrollPos:0,scrollSize:18,scrollVisible:1,zoom:1},$init:function(a){var b=a.scroll||"x",c=this.x=webix.toNode(a.container);c.className+=" webix_vscroll_"+b,c.innerHTML="<div class='webix_vscroll_body'></div>",webix.event(c,"scroll",this.Ri,{bind:this}),this.Si=0,this.Wi=0},Ti:function(a){return a>15e5?(this.s.zoom=Math.floor(a/15e5)+1,
this.Ui=a-this.Si,a=Math.floor(a/this.s.zoom)+this.Si):(this.s.zoom=1,this.Ui=1/0),a},scrollWidth_setter:function(a){return a=this.Ti(a),this.x.firstChild.style.width=a+"px",a},scrollHeight_setter:function(a){return a=this.Ti(a),this.x.firstChild.style.height=a+"px",a},sizeTo:function(a,b,c){a=a-(b||0)-(c||0);var d=this.s.scrollSize;webix.env.isIE&&d&&(d+=1),d||!this.s.scrollVisible||webix.env.$customScroll||(this.x.style.pointerEvents="none",d=14),d?(this.x.style.display="block",b&&(this.x.style.marginTop=b+"px"),this.x.style["x"==this.s.scroll?"width":"height"]=Math.max(0,a)+"px",this.x.style["x"==this.s.scroll?"height":"width"]=d+"px"):this.x.style.display="none",this.Si=a},getScroll:function(){return this.s.scrollPos*this.s.zoom},getSize:function(){return(this.s.scrollWidth||this.s.scrollHeight)*this.s.zoom},scrollTo:function(a){0>a&&(a=0);var b=this.s;a=Math.min(((b.scrollWidth||b.scrollHeight)-this.Si)*b.zoom,a),0>a&&(a=0);var c=a/b.zoom;return this.Wi!=c?(this.x["x"==b.scroll?"scrollLeft":"scrollTop"]=c,this.Vi(c),!0):void 0},Ri:function(){var a=this.x["x"==this.s.scroll?"scrollLeft":"scrollTop"];a!=this.Wi&&this.Vi(a)},Vi:function(a){this.Wi=a,this.s.scrollPos=Math.min(this.Ui,a*this.s.zoom)||0,this.callEvent("onScroll",[this.s.scrollPos])},activeArea:function(a,b){this.Xi=b,webix.event(a,"mousewheel",this.Yi,{bind:this}),webix.event(a,"DOMMouseScroll",this.Yi,{bind:this}),this.uB(a)},uB:function(a){!webix.env.touch&&window.navigator.pointerEnabled&&(webix.html.addCss(a,"webix_scroll_touch_ie",!0),webix.event(a,"pointerdown",function(a){("touch"==a.pointerType||"pen"==a.pointerType)&&(this.km=webix.Touch.hm(a),this.vB=this.s.scrollPos)},{bind:this}),webix.event(document.body,"pointermove",function(a){var b;this.km&&(this.lm=webix.Touch.hm(a),"x"==this.s.scroll?b=this.lm.x-this.km.x:"y"==this.s.scroll&&(b=this.lm.y-this.km.y),b&&Math.abs(b)>5&&this.scrollTo(this.vB-b))},{bind:this}),webix.event(window,"pointerup",function(a){this.km&&(this.km=this.lm=null)},{bind:this}))},Yi:function(a){var b=0;return a.wheelDeltaX&&Math.abs(a.wheelDeltaX)>Math.abs(a.wheelDeltaY)?this.Xi&&this.s.scrollVisible&&(b=a.wheelDeltaX/-40):!this.Xi&&this.s.scrollVisible&&(b=webix.isUndefined(a.wheelDelta)?a.detail:a.wheelDelta/-40),webix.env.isSafari&&(this.Yy=a.target||a.srcElement),b&&this.scrollTo(this.s.scrollPos+b*this.s.scrollStep)?webix.html.preventEvent(a):void 0}},webix.EventSystem,webix.Settings),webix.Number={format:function(a,b){if(""===a||"undefined"==typeof a)return a;b=b||webix.i18n,a=parseFloat(a);var c=0>a?"-":"";a=Math.abs(a);var d=a.toFixed(b.decimalSize).toString();d=d.split(".");var e="";if(b.groupSize){var f=b.groupSize,g=d[0].length;do{g-=f;var h=g>0?d[0].substr(g,f):d[0].substr(0,f+g);e=h+(e?b.groupDelimiter+e:"")}while(g>0)}else e=d[0];return b.decimalSize?c+e+b.decimalDelimiter+d[1]:c+e},numToStr:function(a){return function(b){return webix.Number.format(b,a)}}},webix.Date={startOnMonday:!1,toFixed:function(a){return 10>a?"0"+a:a},weekStart:function(a){a=this.copy(a);var b=a.getDay();return this.startOnMonday&&(0===b?b=6:b--),this.datePart(this.add(a,-1*b,"day"))},monthStart:function(a){return a=this.copy(a),a.setDate(1),this.datePart(a)},yearStart:function(a){return a=this.copy(a),a.setMonth(0),this.monthStart(a)},dayStart:function(a){return this.datePart(a,!0)},dateToStr:function(a,b){return"function"==typeof a?a:webix.env.strict?function(b){var c="",d=0;return a.replace(/%[a-zA-Z]/g,function(e,f){c+=a.slice(d,f);var g=function(a){if("%d"==e)return webix.Date.toFixed(a.getDate());if("%m"==e)return webix.Date.toFixed(a.getMonth()+1);if("%j"==e)return a.getDate();if("%n"==e)return a.getMonth()+1;if("%y"==e)return webix.Date.toFixed(a.getFullYear()%100);if("%Y"==e)return a.getFullYear();if("%D"==e)return webix.i18n.calendar.dayShort[a.getDay()];if("%l"==e)return webix.i18n.calendar.dayFull[a.getDay()];if("%M"==e)return webix.i18n.calendar.monthShort[a.getMonth()];if("%F"==e)return webix.i18n.calendar.monthFull[a.getMonth()];if("%h"==e)return webix.Date.toFixed((a.getHours()+11)%12+1);if("%g"==e)return(a.getHours()+11)%12+1;if("%G"==e)return a.getHours();if("%H"==e)return webix.Date.toFixed(a.getHours());if("%i"==e)return webix.Date.toFixed(a.getMinutes());if("%a"==e)return a.getHours()>11?"pm":"am";if("%A"==e)return a.getHours()>11?"PM":"AM";if("%s"==e)return webix.Date.toFixed(a.getSeconds());if("%W"==e)return webix.Date.toFixed(webix.Date.getISOWeek(a));if("%c"==e){var b=a.getFullYear();return b+="-"+webix.Date.toFixed(a.getMonth()+1),b+="-"+webix.Date.toFixed(a.getDate()),b+="T",b+=webix.Date.toFixed(a.getHours()),b+=":"+webix.Date.toFixed(a.getMinutes()),b+=":"+webix.Date.toFixed(a.getSeconds())}return e};c+=g(b),d=f+2}),c+=a.slice(d,a.length)}:(a=a.replace(/%[a-zA-Z]/g,function(a){switch(a){case"%d":return'"+webix.Date.toFixed(date.getDate())+"';case"%m":return'"+webix.Date.toFixed((date.getMonth()+1))+"';case"%j":return'"+date.getDate()+"';case"%n":return'"+(date.getMonth()+1)+"';case"%y":return'"+webix.Date.toFixed(date.getFullYear()%100)+"';case"%Y":return'"+date.getFullYear()+"';case"%D":return'"+webix.i18n.calendar.dayShort[date.getDay()]+"';case"%l":return'"+webix.i18n.calendar.dayFull[date.getDay()]+"';case"%M":return'"+webix.i18n.calendar.monthShort[date.getMonth()]+"';case"%F":return'"+webix.i18n.calendar.monthFull[date.getMonth()]+"';case"%h":return'"+webix.Date.toFixed((date.getHours()+11)%12+1)+"';case"%g":return'"+((date.getHours()+11)%12+1)+"';case"%G":return'"+date.getHours()+"';case"%H":return'"+webix.Date.toFixed(date.getHours())+"';case"%i":return'"+webix.Date.toFixed(date.getMinutes())+"';case"%a":return'"+(date.getHours()>11?"pm":"am")+"';case"%A":return'"+(date.getHours()>11?"PM":"AM")+"';case"%s":return'"+webix.Date.toFixed(date.getSeconds())+"';case"%W":return'"+webix.Date.toFixed(webix.Date.getISOWeek(date))+"';case"%c":var c='"+date.getFullYear()+"';return c+='-"+webix.Date.toFixed((date.getMonth()+1))+"',c+='-"+webix.Date.toFixed(date.getDate())+"',c+="T",c+='"+webix.Date.toFixed(date.getHours())+"',c+=':"+webix.Date.toFixed(date.getMinutes())+"',c+=':"+webix.Date.toFixed(date.getSeconds())+"',b===!0&&(c+="Z"),c;default:return a}}),b===!0&&(a=a.replace(/date\.get/g,"date.getUTC")),new Function("date","if (!date) return ''; if (!date.getMonth) date=webix.i18n.parseFormatDate(date);  return \""+a+'";'))},strToDate:function(a,b){if("function"==typeof a)return a;var c,d,e,f=a.match(/%[a-zA-Z]/g),g="var temp=date.split(/[^0-9a-zA-Z]+/g);";if(!webix.i18n.calendar.monthShort_hash){for(e=webix.i18n.calendar.monthShort,d=webix.i18n.calendar.monthShort_hash={},c=0;c<e.length;c++)d[e[c]]=c;for(e=webix.i18n.calendar.monthFull,d=webix.i18n.calendar.monthFull_hash={},c=0;c<e.length;c++)d[e[c]]=c}if(webix.env.strict)return function(a){if(!a)return"";if("object"==typeof a)return a;var d=a.split(/[^0-9a-zA-Z]+/g),e=[0,0,1,0,0,0];for(c=0;c<f.length;c++){var g=f[c];if("%y"==g)e[0]=1*d[c]+(d[c]>30?1900:2e3);else if("%Y"==g)e[0]=1*(d[c]||0),e[0]<30&&(e[0]+=2e3);else if("%n"==g||"%m"==g)e[1]=(d[c]||1)-1;else if("%M"==g)e[1]=webix.i18n.calendar.monthShort_hash[d[c]]||0;else if("%F"==g)e[1]=webix.i18n.calendar.monthFull_hash[d[c]]||0;else if("%j"==g||"%d"==g)e[2]=d[c]||1;else if("%g"==g||"%G"==g||"%h"==g||"%H"==g)e[3]=d[c]||0;else if("%a"==g||"%A"==g)e[3]=e[3]%12+("am"==(d[c]||"").toLowerCase()?0:12);else if("%i"==g)e[4]=d[c]||0;else if("%s"==g)e[5]=d[c]||0;else if("%c"==g){var h=/(\d+)-(\d+)-(\d+)T(\d+):(\d+):(\d+)/g,i=h.exec(a);e[0]=1*(i[1]||0),e[0]<30&&(e[0]+=2e3),e[1]=(i[2]||1)-1,e[2]=i[3]||1,e[3]=i[4]||0,e[4]=i[5]||0,e[5]=i[6]||0}}return b?new Date(Date.UTC(e[0],e[1],e[2],e[3],e[4],e[5])):new Date(e[0],e[1],e[2],e[3],e[4],e[5])};for(c=0;c<f.length;c++)switch(f[c]){case"%j":case"%d":g+="set[2]=temp["+c+"]||1;";break;case"%n":case"%m":g+="set[1]=(temp["+c+"]||1)-1;";break;case"%y":g+="set[0]=temp["+c+"]*1+(temp["+c+"]>30?1900:2000);";break;case"%g":case"%G":case"%h":case"%H":g+="set[3]=temp["+c+"]||0;";break;case"%i":g+="set[4]=temp["+c+"]||0;";break;case"%Y":g+="set[0]=(temp["+c+"]||0)*1; if (set[0]<30) set[0]+=2000;";break;case"%a":case"%A":g+="set[3]=set[3]%12+((temp["+c+"]||'').toLowerCase()=='am'?0:12);";break;case"%s":g+="set[5]=temp["+c+"]||0;";break;case"%M":g+="set[1]=webix.i18n.calendar.monthShort_hash[temp["+c+"]]||0;";break;case"%F":g+="set[1]=webix.i18n.calendar.monthFull_hash[temp["+c+"]]||0;";break;case"%c":g+="var res = date.split('T');",g+="if(res[0]){ var d = res[0].split('-');",g+="set[0]= (d[0]||0)*1; if (set[0]<30) set[0]+=2000;",g+="set[1]= (d[1]||1)-1;",g+="set[2]= d[2]||1;}",g+="if(res[1]){ var t = res[1].split(':');",g+="set[3]= t[0]||0;",g+="set[4]= t[1]||0;",g+="set[5]= t[2]||0;}"}var h="set[0],set[1],set[2],set[3],set[4],set[5]";return b&&(h=" Date.UTC("+h+")"),new Function("date","if (!date) return ''; if (typeof date == 'object') return date; var set=[0,0,1,0,0,0]; "+g+" return new Date("+h+");")},getISOWeek:function(a){if(!a)return!1;var b=a.getDay();0===b&&(b=7);var c=new Date(a.valueOf());c.setDate(a.getDate()+(4-b));var d=c.getFullYear(),e=Math.floor((c.getTime()-new Date(d,0,1).getTime())/864e5),f=1+Math.floor(e/7);return f},getUTCISOWeek:function(a){return this.getISOWeek(a)},Jv:function(a,b,c,d){if(c){var e=d(a,b);if(e)for(var f=c>0?1:-1;e;)a.setHours(a.getHours()+f),e=d(a,b),f+=c>0?1:-1}},add:function(a,b,c,d){d&&(a=this.copy(a));var e=webix.Date.copy(a);switch(c){case"day":a.setDate(a.getDate()+b),this.Jv(a,e,b,function(a,b){return webix.Date.datePart(b,!0).valueOf()==webix.Date.datePart(a,!0).valueOf()});break;case"week":a.setDate(a.getDate()+7*b),this.Jv(a,e,7*b,function(a,b){return webix.Date.datePart(b,!0).valueOf()==webix.Date.datePart(a,!0).valueOf()});break;case"month":a.setMonth(a.getMonth()+b),this.Jv(a,e,b,function(a,b){return b.getMonth()==a.getMonth()&&b.getYear()==a.getYear()});break;case"year":a.setYear(a.getFullYear()+b),this.Jv(a,e,b,function(a,b){return b.getFullYear()==a.getFullYear()});break;case"hour":a.setHours(a.getHours()+b),this.Jv(a,e,b,function(a,b){return b.getHours()==a.getHours()&&webix.Date.datePart(b,!0)==webix.Date.datePart(a,!0)});break;case"minute":a.setMinutes(a.getMinutes()+b);break;default:webix.Date.add[c](a,b,c)}return a},datePart:function(a,b){b&&(a=this.copy(a));var c=this.copy(a);return c.setHours(0),c.getDate()!=a.getDate()?a.setHours(1):a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a},timePart:function(a,b){return b&&(a=this.copy(a)),(a.valueOf()/1e3-60*a.getTimezoneOffset())%86400},copy:function(a){return new Date(a.valueOf())},equal:function(a,b){return!(!a||!b)&&a.valueOf()===b.valueOf()},isHoliday:function(a){return a=a.getDay(),0===a||6==a?"webix_cal_event":void 0}},webix.i18n={Zi:["fullDateFormat","timeFormat","dateFormat","longDateFormat","parseFormat","parseTimeFormat"],parseFormat:"%Y-%m-%d %H:%i",parseTimeFormat:"%H:%i",numberFormat:webix.Number.format,priceFormat:function(a){return webix.i18n.$i(webix.i18n.numberFormat(a,webix.i18n._i))},setLocale:function(a){var b=function(a,c){for(var d in c)"object"!=typeof c[d]||webix.isArray(c[d])?a[d]=c[d]:(a[d]||(a[d]={}),b(a[d],c[d]))};"string"==typeof a&&(a=this.locales[a]),a&&b(this,a);for(var c=webix.i18n.Zi,d=0;d<c.length;d++){var e=c[d],f=webix.i18n[e+"UTC"];webix.i18n[e+"Str"]=webix.Date.dateToStr(webix.i18n[e],f),webix.i18n[e+"Date"]=webix.Date.strToDate(webix.i18n[e],f)}this.$i=webix.template(this.price),this._i=this.priceSettings||this,this.intFormat=webix.Number.numToStr({groupSize:this.groupSize,groupDelimiter:this.groupDelimiter,decimalSize:0})}},webix.i18n.locales={},webix.i18n.locales["en-US"]={groupDelimiter:",",groupSize:3,decimalDelimiter:".",decimalSize:2,dateFormat:"%m/%d/%Y",timeFormat:"%h:%i %A",longDateFormat:"%d %F %Y",fullDateFormat:"%m/%d/%Y %h:%i %A",price:"${obj}",priceSettings:{groupDelimiter:",",groupSize:3,decimalDelimiter:".",decimalSize:2},fileSize:["b","Kb","Mb","Gb","Tb","Pb","Eb"],calendar:{monthFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],hours:"Hours",minutes:"Minutes",done:"Done",clear:"Clear",today:"Today"},controls:{select:"Select"},dataExport:{page:"Page",of:"of"}},webix.i18n.setLocale("en-US"),webix.Undo={$init:function(){this.VA=webix.extend([],webix.PowerArray,!0),this.WA=-1},undo_setter:function(a){return a&&(this.XA(),this.XA=function(){}),a},XA:function(){var a=this;this.attachEvent("onBeforeDrop",function(b){if(b.from==b.to){var c=a.YA=webix.copy(this.getItem(b.start));this.data.branch?c.$index=this.getBranchIndex(c.id):c.$index=this.getIndexById(c.id)}}),this.data.attachEvent("onDataMove",function(b){if(a.YA&&a.YA.id==b){var c=a.YA;a.YA=null,a.ZA(b,c,"move")}}),this.attachEvent("onBeforeEditStop",function(a,b){this.$A=webix.copy(this.getItem(b.id||b.row))}),this.data.attachEvent("onBeforeDelete",function(b){if(this.getItem(b)){var c=a._A=webix.copy(this.getItem(b));this.branch?(c.$index=this.getBranchIndex(b),this.branch[b]&&(c.$branch=webix.copy(this.serialize(b)))):c.$index=this.getIndexById(b)}}),this.data.attachEvent("onStoreUpdated",function(b,c,d){var e=null;b&&("add"==d?e=webix.copy(c):"delete"==d?e=a._A:"update"==d&&a.$A&&a.$A.id==b&&(e=a.$A,a.$A=null),e&&a.ZA(b,e,d))}),this.data.attachEvent("onIdChange",function(b,c){"object"==typeof b&&(b=b.row);for(var d=0;d<a.VA.length;d++)a.VA[d].id==b&&(a.VA[d].id=c)})},ZA:function(a,b,c){!this.aB&&this.s.undo&&(this.VA.push({id:a,action:c,data:b}),20==this.VA.length&&this.VA.splice(0,1),this.bB||(this.WA=this.VA.length-1))},ignoreUndo:function(a,b){this.aB=!0,a.call(b||this),this.aB=!1},removeUndo:function(a){for(var b=this.VA.length-1;b>=0;b--)this.VA[b].id==a&&("id"==this.VA[b].action&&(a=this.VA[b].data),this.VA.removeAt(b));this.WA=this.VA.length-1},undo:function(a){if(a)this.ignoreUndo(function(){var b,c;for(c=this.VA.length-1;!b&&c>=0;c--)this.VA[c].id==a&&(b=this.VA[c]);b&&(this.cB(b),this.VA.removeAt(c+1),this.WA=this.VA.length-1)});else{var b=this.VA[this.WA];b&&(this.ignoreUndo(function(){this.cB(b),this.VA.removeAt(this.WA)}),this.WA--)}},cB:function(a){if("delete"==a.action){var b=null,c=a.data.$parent;a.data.$branch&&(b={parent:a.id,data:webix.copy(a.data.$branch)},delete a.data.$branch,c&&!this.data.branch[c]&&(c=0)),this.add(a.data,a.data.$index,c),b&&this.parse(b)}else"add"==a.action?this.remove(a.id):"update"==a.action?this.updateItem(a.id,a.data):"move"==a.action&&(a.data.$parent?this.getItem(a.data.$parent)&&this.move(a.id,a.data.$index,null,{parent:a.data.$parent}):this.move(a.id,a.data.$index))}},webix.protoUI({name:"datatable",defaults:{leftSplit:0,rightSplit:0,columnWidth:100,minColumnWidth:20,minColumnHeight:26,prerender:!1,autoheight:!1,autowidth:!1,header:!0,fixedRowHeight:!0,scrollAlignY:!0,scrollX:!0,scrollY:!0,datafetch:50},$skin:function(){var a=webix.skin.$active.rowHeight,b=this.defaults;b.rowHeight=a,b.headerRowHeight=webix.skin.$active.barHeight},on_click:{webix_richfilter:function(){return!1},webix_table_checkbox:function(a,b){b=this.locate(a);var c=this.getItem(b.row),d=this.getColumnConfig(b.column),e=a.target||a.srcElement,f="checkbox"==e.type?e.checked:c[b.column]!=d.checkValue,g=f?d.checkValue:d.uncheckValue;return c[b.column]=g,this.callEvent("onCheck",[b.row,b.column,g]),this.data.callEvent("onDataUpdate",[b,c]),this.data.callEvent("onStoreUpdated",[b.row,c,this.s.checkboxRefresh?"update":"save"]),!1},webix_table_radio:function(a){var b=this.locate(a),c=this.getItem(b.row),d=this.getColumnConfig(b.column);return this.eachRow(function(a){var c=this.data.pull[a];c&&c[b.column]==d.checkValue&&(c[b.column]=d.uncheckValue)}),c[b.column]=d.checkValue,this.callEvent("onCheck",[b.row,b.column,!0]),this.refresh(),!1}},on_dblclick:{webix_table_checkbox:function(){return this.on_click.webix_table_checkbox.apply(this,arguments)}},on_context:{},$init:function(a){this.on_click=webix.extend({},this.on_click);var b="<div class='webix_ss_header'><div class='webix_hs_left'></div><div class='webix_hs_center'></div><div class='webix_hs_right'></div></div><div class='webix_ss_body'><div class='webix_ss_left'><div class='webix_ss_center_scroll'></div></div>";b+="<div class='webix_ss_center'><div class='webix_ss_center_scroll'></div></div>",b+="<div class='webix_ss_right' ><div class='webix_ss_center_scroll'></div></div></div>",b+="<div class='webix_ss_hscroll'></div><div class='webix_ss_footer'><div class='webix_hs_left'></div><div class='webix_hs_center'></div><div class='webix_hs_right'></div></div><div class='webix_ss_vscroll_header'></div><div class='webix_ss_vscroll'></div><div class='webix_ss_vscroll_footer'></div>",this.w.innerHTML=b,this.bj=this.w.id=this.name+webix.uid(),this.w.className+=" webix_dtable",this.y=this.w,this.I=this.w.firstChild,this.Vf=this.I.nextSibling,this.cj=this.Vf.nextSibling.nextSibling,this.data.provideApi(this,!0),this.data.attachEvent("onParse",webix.bind(this.dj,this)),this.$ready.push(this.ej),this.fj=[],this.Mt=[],this.Nt=[],this.gj=[],this.hj={},this.ij={},this.$g=this.jj=0,this.Ns=[],this.data.attachEvent("onServerConfig",webix.bind(this.kj,this)),this.data.attachEvent("onServerOptions",webix.bind(this.lj,this)),this.attachEvent("onViewShow",this.Ow),webix.callEvent("onDataTable",[this,a])},mj:function(){this.nj=this.oj=webix.ui.scrollSize,webix.html.addStyle("#"+this.bj+" .webix_cell { height:"+this.s.rowHeight+"px; line-height:"+(this.s.rowLineHeight||this.s.rowHeight)+"px;"+(this.s.fixedRowHeight?"":"white-space:normal;")+" }"),webix.html.addStyle("#"+this.bj+" .webix_hcell { height:"+this.s.headerRowHeight+"px; line-height:"+this.s.headerRowHeight+"px;}"),this.mj=function(){}},ej:function(){this.data.attachEvent("onStoreLoad",webix.bind(this.nz,this)),this.data.attachEvent("onSyncApply",webix.bind(this.nz,this)),this.data.attachEvent("onStoreUpdated",webix.bind(function(){return this.render.apply(this,arguments)},this)),this.data.attachEvent("onStoreUpdated",webix.bind(this.pj,this)),this.render()},refresh:function(){this.render()},render:function(a,b,c){if("save"!=c){if("move"==c){var d=webix.DragControl.getContext();if(d&&d.fragile)return}if(!this.fj.length){var e=this.s.columns;if(!e||!e.length){if(!this.s.autoConfig||!this.data.order.length)return;this.tj=0,this.qj()}this.rj()}return!this.isVisible(this.s.id)||this.$blockRender?this.mj():!a||-1==b||"paint"!=c&&"update"!=c?(this.sj&&(clearTimeout(this.sj),this.sj=0),this.callEvent("onBeforeRender",[this.data])?(this.mj(),this.tj||this.uj(),this.bc&&(this.s.experimental&&("paint"==c||"update"==c)&&a?this.Kv(a):this.vj(!0,!0)),a&&"update"==c||(this.wj=this.xj(),this.yj()),this.callEvent("onAfterRender",[this.data]),!0):void 0):(this.sj&&clearTimeout(this.sj),void(this.sj&&this.Lv!=a?(this.Lv=null,this.sj=webix.delay(function(){this.render()},this)):(this.Lv=a,this.sj=webix.delay(function(){this.render(a,-1,c)},this))))}},getColumnConfig:function(a){return this.Aj[a]||this.am[a]},lj:function(a){for(var b in a){var c=this.getColumnConfig(b),d=new webix.DataCollection({data:a[b]});this.Ns.push(d),this.Bj(d,c)}},kj:function(a){a.columns&&this.tj&&this.refreshColumns(null,!0)},rj:function(){if(this.s.columns){this.fj=this.s.columns,this.Aj={};for(var a=0;a<this.fj.length;a++){var b=this.fj[a];this.Aj[b.id]=b;var c=b.cssFormat;c&&(b.cssFormat=webix.toFunctor(c,this.$scope)),b.width=b.width||this.s.columnWidth,"string"==typeof b.format&&(b.format=webix.i18n[b.format]||window[b.format]),webix.isUndefined(b.checkValue)&&(b.checkValue=1),webix.isUndefined(b.uncheckValue)&&(b.uncheckValue=0),b.css&&"object"==typeof b.css&&(b.css=webix.html.createCss(b.css));var d=b.template;d&&("string"==typeof d&&(d=d.replace(/#\$value#/g,"#"+b.id+"#")),b.template=webix.template(d))}this.Mj("header",this.Mt),this.Mj("footer",this.Nt),this.callEvent("onStructureLoad",[])}},Cj:function(){this.uj()},uj:function(){this.Fj=this.fj.length-this.s.rightSplit,this.Gj=0;for(var a=0;a<this.fj.length;a++){if(!this.fj[a].node){var b=webix.html.create("DIV");b.style.width=this.fj[a].width+"px",this.fj[a].node=b}a>=this.s.leftSplit&&a<this.Fj&&(this.Gj+=this.fj[a].width)}var c=[];if(this.s.rightSplit){var d=this.fj.length-this.s.rightSplit;c[d]=" webix_first",c[d-1]=" webix_last"}if(this.s.leftSplit){var e=this.s.leftSplit;c[e]=" webix_first",c[e-1]=" webix_last"}c[0]=(c[0]||"")+" webix_first";var f=this.fj.length-1;c[f]=(c[f]||"")+" webix_last";for(var a=0;a<this.fj.length;a++){var g=this.fj[a].node;g.setAttribute("column",a),g.className="webix_column "+(this.fj[a].css||"")+(c[a]||"")}this.Hj(),this.Ij(),this.Jj(),this.Kj(),this.tj=!0},Ij:function(){for(var a=0,b=0;b<this.fj.length;b++){var c=this.fj[b];(b==this.s.leftSplit||b==this.Fj)&&(a=0),c.node&&(c.node.style.left=a+"px",(this.s.leftSplit||this.s.rightSplit)&&(webix.html.remove(c.node),c.attached=!1)),a+=c.width}},Kj:function(){this.Lj||(this.Lj=0),this.$g=this.jj=0,this.s.header&&(this.fk(this.I,0,1),this.Mj("header",this.Mt),this.$g=this.Mt.Ot,this.Nj(this.I,"header",this.Mt)),this.s.footer&&(this.fk(this.cj,0,1),this.Mj("footer",this.Nt),this.jj=this.Nt.Ot,this.Nj(this.cj,"footer",this.Nt)),this.refreshHeaderContent(!1,!1),this.Oj(),this.Nk&&this.markSorting(this.Nk,this.Ok)},Mj:function(a,b){for(var c=0,d=0;d<this.fj.length;d++){var e=this.fj[d][a];e&&"object"==typeof e&&e.length||(webix.isUndefined(e)&&(e="header"==a?this.fj[d].id:""),e=[e]);for(var f=0;f<e.length;f++)"object"!=typeof e[f]&&(e[f]={text:e[f]}),e[f]&&e[f].height&&(b[f]=e[f].height);c=Math.max(c,e.length),this.fj[d][a]=e}b.Ot=c;for(var d=c-1;d>=0;d--)b[d]=b[d]||this.s.headerRowHeight,b.Ot+=1*b[d];for(var d=0;d<this.fj.length;d++)for(var g=this.fj[d][a],f=0;f<g.length;f++){if(g[f]&&g[f].rowspan)for(var h=1;h<g[f].rowspan;h++)g[f+h]=null;if(g[f]&&g[f].colspan)for(var h=1;h<g[f].colspan;h++)this.fj[d+h][a][f]=null}for(var d=0;d<this.fj.length;d++){var e=this.fj[d][a];if(e.length<c){var i=e.length-1;e[i].rowspan=c-e.length+1;for(var f=i+1;c>f;f++)e[f]=null}}return c},Pj:function(a,b){for(var c=a.getElementsByTagName("TD"),d=0;d<c.length;d++)if(c[d].getAttribute("active_id")==b)return c[d]},getHeaderContent:function(a){var b=this.Pj(this.I,a);if(b||(b=this.Pj(this.cj,a)),b){var c=this.hj[a],d=webix.ui.datafilter[c.content];return d.getHelper?d.getHelper(b,c):{type:d,getValue:function(){return d.getValue(b)},setValue:function(a){return d.setValue(b,a)}}}},Pt:function(a,b,c){var d=c?-1:0;for(c+=b,b;c>b;b++)d+=a[b]+1;return d},Qj:function(a,b,c,d,e){if(a==b)return"";for(var f="<table style='width:"+c+"px' cellspacing='0' cellpadding='0'>",g=a;b>g;g++){f+="<tr>";for(var g=a;b>g;g++)f+="<th  style='width:"+this.fj[g].width+"px'></th>";f+="</tr>"}for(var h=this.fj[0][d].length,i=0;h>i;i++){f+="<tr section='"+d+"'>";for(var g=a;b>g;g++){var j=this.fj[g][d][i];if(null!==j){j.content&&(j.contentId=j.contentId||webix.uid(),j.columnId=this.fj[g].id,j.format=this.fj[g].format,j.text=webix.ui.datafilter[j.content].render(this,j),this.hj[j.contentId]=j,this.Rj=!0),f+="<td column='"+(j.colspan?j.colspan-1+g:g)+"'";var k="";g==a&&(k+="webix_first");var l=g+(j.colspan?j.colspan-1:0);l>=b-1&&(k+=" webix_last"),k&&(f+=' class="'+k+'"');var m=e[i],n="";j.contentId&&(f+=" active_id='"+j.contentId+"'"),j.colspan&&(f+=" colspan='"+j.colspan+"'"),j.rowspan&&(f+=" rowspan='"+j.rowspan+"'",m=this.Pt(this.Mt,i,j.rowspan)),m!=this.s.headerRowHeight&&(n=" style='line-height:"+m+"px; height:"+m+"px;'");var o="webix_hcell",p=j.css;p&&("object"==typeof p&&(j.css=p=webix.html.createCss(p)),o+=" "+p),this.fj[g].$selected&&(o+=" webix_sel_hcell"),f+="><div class='"+o+"'"+n+">";var q=""===j.text?"&nbsp;":j.text;j.rotate&&(q="<div class='webix_rotate' style='width:"+(m-10)+"px; transform-origin:center "+(m-15)/2+"px;-webkit-transform-origin:center "+(m-15)/2+"px;'>"+q+"</div>"),f+=q+"</div></td>"}}f+="</tr>"}return f+="</tr></table>"},showItemByIndex:function(a,b){var c=this.s.pager;if(c){var d=Math.floor(a/c.size);d!=c.page&&webix.$$(c.id).select(d)}if(-1!=a){var e=this.Sj();if(a<e[0]+1||a>=e[1]-1){var f=this.Tj(c?this.data.$min:0,a);a<e[0]+1?f=Math.max(0,f-1):(f+=this.Uj(a)-this.Vj,a>0&&(f+=this.Uj(a-1)-1)),this.Wj.scrollTo(f)}}if(-1!=b){if(b<this.s.leftSplit)return;if(b>=this.Fj)return;var e=this.Xj();if(b<e[0]+1||b>=e[1]-1){for(var f=0,g=this.s.leftSplit;b>g;g++)f+=this.fj[g].width;b<e[0]+1||(f+=this.fj[b].width-this.Yj),this.Zj.scrollTo(f)}}},showCell:function(a,b){if(!b||!a){var c=this.getSelectedId(!0);1==c.length&&(b=b||c[0].column,a=a||c[0].row)}b=b?this.getColumnIndex(b):-1,a=a?this.getIndexById(a):-1,this.showItemByIndex(a,b)},scrollTo:function(a,b){if(this.Zj){if(this.$j)return this.$j(a,b);null!==a&&this.Zj.scrollTo(a),null!==b&&this.Wj.scrollTo(b)}},getScrollState:function(){if(this._j)return this._j();var a=this.ck?0:this.aC||0;return{x:this.bk||0,y:this.jk+a}},showItem:function(a){this.showItemByIndex(this.getIndexById(a),-1)},Nj:function(a,b,c){a.childNodes[0].innerHTML=this.Qj(0,this.s.leftSplit,this.dk,b,c),a.childNodes[1].innerHTML=this.Qj(this.s.leftSplit,this.Fj,this.Gj,b,c),a.childNodes[1].onscroll=webix.bind(this._s,this),a.childNodes[2].innerHTML=this.Qj(this.Fj,this.fj.length,this.ek,b,c)},_s:function(){var a=this.getScrollState().x,b=this.I.childNodes[1].scrollLeft;b!=a&&this.scrollTo(b,null)},pj:function(){this.refreshHeaderContent(!0,!0)},nz:function(){this.refreshHeaderContent(!1,!0)},refreshHeaderContent:function(a,b,c){this.s.header&&(b&&this.fk(this.I,a,1,c),this.fk(this.I,a,0,c)),this.s.footer&&(b&&this.fk(this.cj,a,1,c),this.fk(this.cj,a,0,c))},refreshFilter:function(a){(!a||this.hj[a])&&this.refreshHeaderContent(!1,!0,a)},fk:function(a,b,c,d){if(this.Rj&&a)for(var e=a.getElementsByTagName("TD"),f=0;f<e.length;f++)if(e[f].getAttribute("active_id")){var g=this.hj[e[f].getAttribute("active_id")];if(d&&d!=g.columnId)continue;var h=webix.ui.datafilter[g.content];c?h.getValue&&(g.value=h.getValue(e[f])):(!b||h.trackCells)&&h.refresh(this,e[f],g)}},headerContent:[],gk:function(a,b,c){this.oj?(a.style.height=Math.max(b,1)-1+"px",a.style.width=(this.Fj?0:c)+this.oj-1+"px",webix.env.isWebKit&&a.offsetWidth):a.style.display="none"},Oj:function(){this.s.header&&this.gk(this.hk,this.$g,this.Lj),this.s.footer&&this.gk(this.ik,this.jj,this.Lj)},sk:function(a,b){var c=!(this.s.autowidth||this.s.scrollX===!1);this.nj=c?webix.ui.scrollSize:0;var d=!(this.s.autoheight||this.s.scrollY===!1);this.oj=d?webix.ui.scrollSize:0,this.Zj&&(this.Zj.s.scrollSize=this.nj,this.Zj.s.scrollVisible=c),this.Wj&&(this.Wj.s.scrollSize=this.oj,this.Wj.s.scrollVisible=d)},Hj:function(){this.jk=0,this.bk=0;var a,b;if(a=b=1,(this.s.autoheight||this.s.scrollY===!1)&&(b=this.oj=0),(this.s.autowidth||this.s.scrollX===!1)&&(a=this.nj=0),webix.env.touch&&(a=b=0),this.Zj||(this.Zj=new webix.ui.vscroll({container:this.cj.previousSibling,scrollWidth:this.Gj,scrollSize:this.nj,scrollVisible:a}),!a||this.nj||webix.env.$customScroll||(this.Zj.x.style.position="absolute"),this.Zj.attachEvent("onScroll",webix.bind(this.kk,this))),!this.Wj){this.hk=this.cj.nextSibling;var c=this.hk.nextSibling;this.ik=c.nextSibling,this.Wj=new webix.ui.vscroll({container:c,scrollHeight:100,scroll:"y",scrollSize:this.oj,scrollVisible:b}),this.Wj.activeArea(this.Vf),this.Zj.activeArea(this.Vf,!0),this.Wj.attachEvent("onScroll",webix.bind(this.lk,this))}this.bc&&this.callEvent("onResize",[this.bc,this.dc]),webix.env.$customScroll&&webix.CustomScroll.enable(this),this.Hj=function(){}},columnId:function(a){return this.fj[a].id},getColumnIndex:function(a){for(var b=0;b<this.fj.length;b++)if(this.fj[b].id==a)return b;return-1},nk:function(a,b){var c,d=0,e=0,f=0,g=0,h=0;for(c=0;c<this.fj.length&&((this.Fj==c||this.s.leftSplit==c)&&(d=0,h++),this.fj[c].id!=b);c++)d+=this.fj[c].width;for(e+=this.fj[c].width,c=0;c<this.data.order.length&&this.data.order[c]!=a;c++)g+=this.Uj(c);return f+=this.Uj(c),[d,e,g-this.jk,f,this.Vf.childNodes[h]]},ok:function(){return this.row},locate:function(a,b){if(this.s.subview&&this!=webix.$$(a))return null;for(a=a.target||a.srcElement||a;a&&a.getAttribute&&!a.getAttribute("view_id");){var c=webix.html.TC(a).toString(),d=null;if(-1!=c.indexOf("webix_cell")&&(d=this.pk(a),d&&(d.row=this.data.order[d.rind])),-1!=c.indexOf("webix_hcell")&&(d=this.pk(a),d&&(d.header=!0)),d)return b?d.header?null:d.row:(d.column=this.fj[d.cind].id,d.toString=this.ok,d);a=a.parentNode}return null},pk:function(a){var b=a.parentNode;if(!b)return null;var c=1*(a.getAttribute("column")||b.getAttribute("column")),d=a.getAttribute("row")||0;if(!d)for(var e=0;e<b.childNodes.length;e++)b.childNodes[e]==a&&(d=e+this.fj[c].qk);return{rind:d,cind:c}},rk:function(a){this.tj&&(this.Ij(),this.Jj(),this.Kj(),a||this.vj(!1,!1))},setColumnWidth:function(a,b,c){return this.Xs(this.getColumnIndex(a),b,c)},Xs:function(a,b,c,d){if(!isNaN(b)){var e=this.fj[a];e.minWidth&&b<e.minWidth?b=e.minWidth:b<this.s.minColumnWidth&&(b=this.s.minColumnWidth);var f=e.width;return f!=b&&(a>=this.s.leftSplit&&a<this.Fj&&(this.Gj+=b-f),e.width=b,!!e.node&&(e.node.style.width=b+"px",c||this.rk(),this.callEvent("onColumnResize",[e.id,b,f,!!d]),!0))}},FA:function(a){return(a.$height||this.s.rowHeight)+(a.$subopen?a.$subHeight:0)},Uj:function(a){var b=this.data.order[a];return b?this.FA(this.data.pull[b]):this.s.rowHeight},Tj:function(a,b){if(this.s.fixedRowHeight)return(b-a)*this.s.rowHeight;for(var c=0;b>a;a++)c+=this.Uj(a);return c},ug:function(a,b){1==arguments.length&&(b=a.column,a=a.row);for(var c=this.getItem(a),d=this.getColumnConfig(b),e=0,f=0,g=0;g<this.fj.length;g++){(g==this.s.leftSplit||g==this.Fj)&&(e=0);var h=this.fj[g];if(h.id==b){var i=g<this.s.leftSplit?0:g>=this.Fj?2:1;f=this.Vf.childNodes[i].firstChild;break}e+=h.width}var j=(this.data.order.length,this.Tj(this.ak||0,this.getIndexById(a)));return{parent:f,top:j+(this.ck||0),left:e,width:d.width,height:c.$height||this.s.rowHeight}},xj:function(){var a=this.s.pager,b=0,c=this.data.order.length;return a&&(b=a.size*a.page,c=Math.min(c,b+a.size),a.level&&(b=this.data.$min,c=this.data.$max)),this.Tj(b,c)},setRowHeight:function(a,b){if(!isNaN(b)){b<this.s.minColumnHeight&&(b=this.s.minColumnHeight);var c=this.getItem(a),d=c.$height||this.s.rowHeight;d!=b&&(c.$height=b,this.config.fixedRowHeight=!1,this.render(),this.callEvent("onRowResize",[a,b,d]))}},lk:function(a){if(this.jk=a,this.s.prerender)for(var b=this.Vf.childNodes,c=0;c<b.length;c++)b[c].scrollTop=a;else this.vj();webix.env.$customScroll&&webix.CustomScroll.sk(this.Vf),this.callEvent("onScrollY",[]),this.callEvent("onAfterScroll",[])},kk:function(a){this.Vf.childNodes[1].scrollLeft=this.bk=a,this.s.header&&(this.I.childNodes[1].scrollLeft=a),this.s.footer&&(this.cj.childNodes[1].scrollLeft=a),this.s.prerender===!1&&this.vj(!this.tk),webix.env.$customScroll&&webix.CustomScroll.sk(this.Vf),this.callEvent("onScrollX",[]),this.callEvent("onAfterScroll",[])},Xj:function(a){if(a)return[0,this.fj.length];for(var b=this.bk,c=this.s.leftSplit;b>0;)b-=this.fj[c].width,c++;var d=c;for(b&&c--,b+=this.Yj;b>0&&d<this.Fj;)b-=this.fj[d].width,d++;return[c,d]},getVisibleCount:function(){return Math.floor(this.Vj/this.config.rowHeight)},Sj:function(a){var b=this.jk,c=0,d=this.count(),e=this.s.pager;if(e){var c=e.page*e.size,d=Math.min(d,c+e.size);e.level&&(c=this.data.$min,d=this.data.$max)}if(this.s.autoheight)return[c,d,0];if(a)return[c,d,0];var f=c,g=this.s.fixedRowHeight?this.s.rowHeight:0;if(g){var h=Math.ceil(b/g);b-=h*g,f+=h}else for(;b>0;)b-=this.Uj(f),f++;var i=f>0&&b?-(this.Uj(f-1)+b):0,j=f;if(b&&f--,b+=this.Vj||this.dc,g){var h=Math.ceil(b/g);b-=h*g,j+=h,j>d&&(j=d)}else for(;b>0&&d>j;)b-=this.Uj(j),j++;return[f,j,i]},Kv:function(a){var b=this.getItem(a),c=this.getIndexById(a),d=this.Sj();if(!(c<d[0]||c>=d[1]))for(var e=this.Xj(),f=0;f<this.fj.length;f++){var g=this.fj[f];if(f<this.Fj&&f>=this.s.leftSplit&&(f<e[0]||f>e[1])&&(g.qk=-999),g.attached&&g.node){
var h=g.node.childNodes[c-d[0]],i=this.Ek(b,this.fj[f],0);h.innerHTML=i,h.className=this.Mv(this.fj[f],i,b,a)}}},vj:function(a,b){if(this.fj.length){b&&this.uk();var c=this.Xj(this.s.prerender),d=this.Sj(this.s.prerender===!0);if(a){for(var e=this.s.leftSplit;e<c[0];e++)this.vk(e,b);for(var e=c[1];e<this.Fj;e++)this.vk(e,b)}this.wk=[];for(var f=0,e=0;e<this.s.leftSplit;e++)f+=this.xk(e,d,b);for(var e=c[0];e<c[1];e++)f+=this.xk(e,d,b,e==c[0]);for(var e=this.Fj;e<this.fj.length;e++)f+=this.xk(e,d,b);this.yk(d[0],d[1],b),this.zk(d)}},Ak:function(a,b){this.Bk=a,this.Ck=b,webix.html.remove(this.gj),this.gj=[]},yk:function(a,b,c){if(this.GA&&(this.GA.style.top=this.ck+"px"),(c||a!=this.Bk||b!=this.Ck)&&(this.Ak(a,b),this.Dk)){this.Dk=!1;for(var d=0;d<this.wk.length;d++){var e,f=this.wk[d],g=this.getItem(f.id);e="function"==typeof g.$row?g.$row.call(this,g,this.type):this.Ek(g,this.getColumnConfig(g.$row),d);var h=this.gj[d]=webix.html.create("DIV",null,e);h.className="webix_cell "+(g.$sub?"webix_dtable_sub"+(this.s.subview?"view":"row"):"webix_dtable_colrow"),h.setAttribute("column",0),h.setAttribute("row",f.index);var i=g.$height||this.s.rowHeight;g.$subopen?h.style.height=g.$subHeight+"px":h.style.height=i+"px",h.style.paddingRight=webix.ui.scrollSize+"px",h.style.top=f.top+(g.$subopen?i-1:-1)+"px",this.GA||(this.GA=webix.html.create("DIV"),this.GA.style.position="relative",this.GA.style.top=this.ck+"px",this.Vf.appendChild(this.GA)),this.GA.appendChild(h),this.attachEvent("onSyncScroll",function(a,b,c){webix.Touch.Nf(this.GA,0,b,c)}),this.s.subview&&this.callEvent("onSubViewRender",[g,h])}}},zk:function(a){var b=this.s.pager,c=this.s.datafetch,d=!this.Fk||a[0]>=this.Fk;if(this.Fk=a[0],this.Gk){if(b&&(!c||c>=b.size)&&this.Hk([0,b.size*b.page],Math.max(c,b.size),!0))return this.Gk=null;this.Ik(this.Gk,d),this.Gk=null}else this.s.loadahead&&this.Hk(a,this.s.loadahead,d)},Hk:function(a,b,c){var d=a[1],e=d+b;c||(d=a[0]-b,e=a[0]),0>d&&(d=0),e=Math.min(e,this.data.order.length-1);for(var f=!1,g=d;e>g;g++)this.data.order[g]||(f?(f.last=g,f.count=g-d):f={start:g,count:e-d});return f?(this.Ik(f,c),!0):void 0},Ik:function(a,b){var c=Math.max(a.count,this.s.datafetch||this.s.loadahead||0),d=b?a.start:a.last-c+1;this.cf(a.count,a.start)||this.loadNext(c,d)},Zy:function(a){if(webix.env.isSafari){var b,c,d,e,f=["x","y"];for(b=0;2>b;b++)e=this["_"+f[b]+"_scroll"],e&&e.Yy&&e.Yy.parentNode==a&&(c=e.Yy);c&&(this.$y&&webix.html.remove(this.$y),this.$y=c,d=c.cloneNode(!0),c.parentNode.insertBefore(d,c),this.$y.style.display="none",this.Vf.appendChild(this.$y))}},vk:function(a){var b=this.fj[a];this.Zy(b.node),webix.html.remove(b.node),b.attached=!1},uk:function(){for(var a=0;a<this.fj.length;a++)this.fj[a].qk=-1;this.gj.length&&(webix.html.remove(this.gj),this.gj=[])},getText:function(a,b){return this.Ek(this.getItem(a),this.getColumnConfig(b),0)},Mv:function(a,b,c,d){var e="webix_cell";if(a.cssFormat){var f=a.cssFormat(b,c,d,a.id);f&&(e+="object"==typeof f?" "+webix.html.createCss(f):" "+f)}var g=c.$css;g&&("object"==typeof g&&(c.$css=g=webix.html.createCss(g)),e+=" "+g);var h=this.data.Me[d];if(h&&(h.$css&&(e+=" "+h.$css),h.$cellCss)){var i=h.$cellCss[a.id];i&&(e+=" "+i)}if(c.$cellCss){var j=c.$cellCss[a.id];j&&("object"==typeof j&&(j=webix.html.createCss(j)),e+=" "+j)}var k=this.data.getMark(c.id,"webix_selected");return(k&&(k.$row||k[a.id])||a.$selected)&&(e+=this.Lk),e},Ek:function(a,b,c){if(!a)return"";var d;return d=a[b.id],d===webix.undefined||null===d?d="":b.format&&(d=b.format(d)),b.template&&(d=b.template(a,this.type,d,b,c)),d},type:{checkbox:function(a,b,c,d){var e=c==d.checkValue?'checked="true"':"";return"<input class='webix_table_checkbox' type='checkbox' "+e+">"},radio:function(a,b,c,d){var e=c==d.checkValue?'checked="true"':"";return"<input class='webix_table_radio' type='radio' "+e+">"},editIcon:function(){return"<span class='webix_icon fa-pencil'></span>"},trashIcon:function(){return"<span class='webix_icon fa-trash'></span>"}},type_setter:function(a){return this.types&&this.types[a]?(this.type=webix.clone(this.types[a]),this.type.css&&(this.w.className+=" "+this.type.css)):webix.type(this,a),this.type.on_click&&webix.extend(this.on_click,this.type.on_click),a},xk:function(a,b,c,d){var e=this.fj[a];if(!e.attached){var f=a<this.s.leftSplit?0:a>=this.Fj?2:1;this.Vf.childNodes[f].firstChild.appendChild(e.node),e.attached=!0,e.split=f}this.ak=b[0],this.ck=0,this.aC=b[2];var g=0;if(this.s.scrollAlignY?b[1]==this.data.order.length||this.data.$pagesize&&b[1]%this.data.$pagesize===0?e.node.style.top=(this.ck=b[2])+"px":e.Jk&&(e.node.style.top="0px"):(this.ck=b[2],b[2]!=e.Jk&&(e.node.style.top=b[2]+"px")),!c&&e.qk==b[0]&&e.Kk==b[1])return 0;for(var h="",i=this.s.columns[a],j=this.s.rowHeight,k=b[0];k<b[1];k++){var l,m=this.data.order[k],n=this.data.getItem(m);if(n){if(d&&n.$row&&(this.Dk=!0,this.wk.push({top:g,id:n.id,index:k}),!n.$sub)){h+="<div class='webix_cell'></div>",g+=j;continue}var l=this.Ek(n,i,k),o=this.Mv(i,l,n,m),p=n.$subopen?"margin-bottom:"+n.$subHeight+"px;":"";n.$height?(h+="<div class='"+o+"' style='height:"+n.$height+"px;"+p+"'>"+l+"</div>",g+=n.$height-j):h+="<div class='"+o+"'"+(p?" style='"+p+"'":"")+">"+l+"</div>",p&&(g+=n.$subHeight)}else h+="<div class='webix_cell'></div>",this.Gk?this.Gk.last=k:this.Gk={start:k,count:b[1]-k};g+=j}return this.Zy(e.node),e.node.innerHTML=h,e.qk=b[0],e.Kk=b[1],e.Jk=b[2],1},yj:function(){if(this.fj.length&&!isNaN(1*this.dc)){var a=this.wj+(this.nj?this.nj:0);if(!this.s.autoheight&&!this.s.yCount||!this.resize()){this.Wj.sizeTo(this.dc,this.$g,this.jj),this.Wj.define("scrollHeight",a),this.Vj=Math.max(0,this.dc-this.nj-this.$g-this.jj);for(var b=0;3>b;b++)this.Vf.childNodes[b].style.height=this.Vj+"px",this.s.prerender?this.Vf.childNodes[b].firstChild.style.height=this.wj+"px":this.Vf.childNodes[b].firstChild.style.height=this.Vj+"px";this.I.style.height=this.$g+"px"}}},Jj:function(){if(this.fj.length){var a=0;for(this.dk=0,this.ek=0,this.Yj=0;a<this.s.leftSplit;)this.dk+=this.fj[a].width,a++;for(a=this.fj.length-1;a>=this.Fj;)this.ek+=this.fj[a].width,a--;if(this.bc&&(!this.s.autowidth||!this.resize())){this.Yj=this.bc-this.ek-this.dk-this.oj,this.Vf.childNodes[1].firstChild.style.width=this.Gj+"px",this.Vf.childNodes[0].style.width=this.dk+"px",this.Vf.childNodes[1].style.width=this.Yj+"px",this.Vf.childNodes[2].style.width=this.ek+"px",this.I.childNodes[0].style.width=this.dk+"px",this.I.childNodes[1].style.width=this.Yj+"px",this.I.childNodes[2].style.width=this.ek+"px",this.cj.childNodes[0].style.width=this.dk+"px",this.cj.childNodes[1].style.width=this.Yj+"px",this.cj.childNodes[2].style.width=this.ek+"px";var b=this.Yj-this.Gj;if(0>b&&(b=0),b!=this.Lj&&(this.Lj=b,this.Oj()),webix.env.isWebKit){var c=this.Vf.childNodes[0].offsetWidth;c=this.Vf.childNodes[1].offsetWidth,c=this.Vf.childNodes[1].firstChild.offsetWidth,c=this.Vf.childNodes[2].offsetWidth}this.Zj.sizeTo(this.bc-this.oj),this.Zj.define("scrollWidth",this.Gj+this.dk+this.ek)}}},$getSize:function(a,b){if((this.s.autoheight||this.s.yCount)&&this.s.columns){var c=(this.s.yCount||0)*this.s.rowHeight;c||(c=this.isVisible()?this.wj:this.count()*this.s.rowHeight),this.s.height=Math.max(c+(this.nj?this.nj:0)-1,this.s.minHeight||0)+this.$g+this.jj}this.s.autowidth&&this.s.columns&&(this.s.width=Math.max(this.Gj+this.dk+this.ek+this.oj,this.s.minWidth||0));var d=this.dk+this.ek+this.oj,e=webix.ui.view.prototype.$getSize.call(this,a,b);return e[0]=Math.max(e[0]||d),e},Ow:function(){if(this.Zj){var a=this.getScrollState();this.Zj.Wi=this.Wj.Wi=-1,this.scrollTo(a.x,a.y)}},$setSize:function(a,b){var c=this.bc,d=this.dc;webix.ui.view.prototype.$setSize.apply(this,arguments)&&(this.tj&&(this.callEvent("onResize",[this.bc,this.dc,c,d]),this.Jj(),this.yj()),this.render())},Mk:function(a){var b=this.getColumnConfig(a);if(b.sort){var c="asc";b.id==this.Nk&&(c="asc"==this.Ok?"desc":"asc"),this.zf(b.id,c,b.sort)}},markSorting:function(a,b){if(this.Pk||(this.Pk=webix.html.create("DIV")),webix.html.remove(this.Pk),b){var c=this.Qk(this.getColumnIndex(a));c&&(this.Pk.className="webix_ss_sort_"+b,c.style.position="relative",c.appendChild(this.Pk)),this.Nk=a,this.Ok=b}else this.Nk=this.Ok=null},scroll_setter:function(a){return"string"==typeof a?(this.s.scrollX=-1!=a.indexOf("x"),this.s.scrollY=-1!=a.indexOf("y"),a):this.s.scrollX=this.s.scrollY=a},Qk:function(a){for(var b=this.I.getElementsByTagName("TD"),c=null,d=0;d<b.length;d++)if(b[d].getAttribute("column")==a&&!b[d].getAttribute("active_id")&&(c=b[d].firstChild,(b[d].colSpan||0)<2))return c;return c},zf:function(a,b,c){b=b||"asc",this.markSorting(a,b),"server"==c?this.loadNext(0,0,{before:function(){var a=this.data.url;this.clearAll(),this.data.url=a}},0,1):("text"==c&&(this.data.each(function(b){b.$text=this.getText(b.id,a)},this),c="string",a="$text"),"function"==typeof c?this.data.sort(c,b):this.data.sort(a,b,c||"string"))},iA:function(a,b,c,d){var e,f,g;if(a.length)for(f=0;f<a.length;f++)if(e=webix.toFunctor(a[f],this.$scope),g=e.call(this,b,c,d),g===!1)return!1},Yc:function(a,b,c,d){a=a||event;var e=a.target||a.srcElement;if(!this.s.subview||this==webix.$$(e)){for(var f,g="",h=[],i=!1,j=null,e=a.target||a.srcElement;e&&e.parentNode&&e!=this.x.parentNode;){var k=webix.html.TC(e);if(g=k){g=g.toString().split(" ");for(var l=g.length-1;l>=0;l--)b[g[l]]&&h.push(b[g[l]])}if(e.parentNode.getAttribute&&!j){var m=e.parentNode.getAttribute("column")||e.getAttribute("column");if(m){var n="DIV"==e.parentNode.tagName;if(!this.fj[m])return;if(i=!0,n){var o=e.parentNode.getAttribute("row")||e.getAttribute("row")||webix.html.index(e)+this.fj[m].qk;this.Qc=j={row:this.data.order[o],column:this.fj[m].id},j.toString=this.ok}else this.Qc=j={column:this.fj[m].id};if(f=this.iA(h,a,j,e),f===!1)return;if(n)this.callEvent("on"+c,[j,a,e])&&d&&this.callEvent("on"+d,[j,a,e]);else if("ItemClick"==c){var p="header"==e.parentNode.parentNode.getAttribute("section");p&&this.callEvent("onHeaderClick",[j,a,e])&&this.Mk(j.column)}h=[]}}e=e.parentNode}return this.iA(h,a,j,this.$view),i}},showOverlay:function(a){if(!this.Rk){var b=webix.html.create("DIV",{"class":"webix_overlay"},"");this.Vf.appendChild(b),this.Rk=b}this.Rk.innerHTML=a},hideOverlay:function(){this.Rk&&(webix.html.remove(this.Rk),this.Rk=null)},mapCells:function(a,b,c,d,e,f){if(null===a&&this.data.order.length>0&&(a=this.data.order[0]),null===b&&(b=this.columnId(0)),null===c&&(c=this.data.order.length),null===d&&(d=this.s.columns.length),this.exists(a)&&(a=this.getIndexById(a),b=this.getColumnIndex(b),null!==b))for(var g=0;c>g&&a+g<this.data.order.length;g++)for(var h=a+g,i=this.data.order[h],j=this.getItem(i),k=0;d>k&&b+k<this.s.columns.length;k++){var l=b+k,m=this.columnId(l),n=e(j[m],i,m,g,k);f||(j[m]=n)}},dj:function(a,b){!this.s.columns&&a.getConfig&&this.define("columns",a.getConfig(b))},qj:function(){var a=this.getItem(this.getFirstId()),b=this.s.columns=[];for(var c in a)"id"!=c&&b.push({id:c,header:c[0].toUpperCase()+c.substr(1),sort:"string",editor:"text"});b.length&&(b[0].fillspace=!0),"undefined"==typeof this.s.select&&this.define("select","row")}},webix.AutoTooltip,webix.Group,webix.DataMarks,webix.DataLoader,webix.MouseEvents,webix.MapCollection,webix.ui.view,webix.EventSystem,webix.Settings),webix.ui.datafilter={textWaitDelay:500,summColumn:{getValue:function(a){return a.firstChild.innerHTML},setValue:function(){},refresh:function(a,b,c){var d=0;a.mapCells(null,c.columnId,null,1,function(a){a=1*a,isNaN(a)||(d+=a)},!0),c.format&&(d=c.format(d)),c.template&&(d=c.template({value:d})),b.firstChild.innerHTML=d},trackCells:!0,render:function(a,b){return b.template&&(b.template=webix.template(b.template)),""}},masterCheckbox:{getValue:function(){},setValue:function(){},getHelper:function(a,b){return{check:function(){b.checked=!1,a.onclick()},uncheck:function(){b.checked=!0,a.onclick()},isChecked:function(){return b.checked}}},refresh:function(a,b,c){b.onclick=function(){this.getElementsByTagName("input")[0].checked=c.checked=!c.checked;var b=a.getColumnConfig(c.columnId),d=c.checked?b.checkValue:b.uncheckValue;a.data.each(function(b){b&&(b[c.columnId]=d,a.callEvent("onCheck",[b.id,c.columnId,d]),this.callEvent("onStoreUpdated",[b.id,b,"save"]))}),a.refresh()}},render:function(a,b){return"<input type='checkbox' "+(b.checked?"checked='1'":"")+">"}},textFilter:{getInputNode:function(a){return a.firstChild.firstChild},getValue:function(a){return this.getInputNode(a).value},setValue:function(a,b){this.getInputNode(a).value=b},refresh:function(a,b,c){b.component=a.s.id,a.registerFilter(b,c,this),b.Sk=a.s.id,c.value&&this.getValue(b)!=c.value&&this.setValue(b,c.value),b.onclick=webix.html.preventEvent;var d="webix_keydown_filter_"+a.s.id+"_"+c.columnId;webix.event(b,"keydown",this.Tk,{id:d})},render:function(a,b){return this.init&&this.init(b),b.css="webix_ss_filter","<input "+(b.placeholder?'placeholder="'+b.placeholder+'" ':"")+"type='text'>"},Tk:function(a,b,c){var d=this.Sk;9!=(a.which||a.keyCode)&&(this.Uk&&window.clearTimeout(this.Uk),this.Uk=window.setTimeout(function(){webix.$$(d).filterByAll()},webix.ui.datafilter.textWaitDelay))}},selectFilter:{getInputNode:function(a){return a.firstChild.firstChild},getValue:function(a){return this.getInputNode(a).value},setValue:function(a,b){this.getInputNode(a).value=b},refresh:function(a,b,c){c.compare=c.compare||function(a,b){return a==b},b.component=a.s.id,a.registerFilter(b,c,this);var d,e=c.options;e?"string"==typeof e?(d=c.options=[],webix.ajax(e).then(webix.bind(function(d){c.options=d.json(),this.refresh(a,b,c)},this))):d=e:(d=a.collectValues(c.columnId),d.unshift({id:"",value:""}));var f=webix.$$(e);f&&f.data&&f.data.getRange&&(d=f.data.getRange());for(var g=document.createElement("select"),h=0;h<d.length;h++){var i=document.createElement("option");i.value=d[h].id,i.text=d[h].value,g.add(i)}b.firstChild.innerHTML="",b.firstChild.appendChild(g),c.value&&this.setValue(b,c.value),b.onclick=webix.html.preventEvent,g.Sk=a.s.id;var j="webix_change_filter_"+a.s.id+"_"+c.columnId;webix.event(g,"change",this.Vk,{id:j})},render:function(a,b){return this.init&&this.$init(b),b.css="webix_ss_filter",""},Vk:function(a,b,c){webix.$$(this.Sk).filterByAll()}}},webix.ui.datafilter.serverFilter=webix.extend({$server:!0,Tk:function(a,b,c){var d=this.Sk,e=a.which||a.keyCode;b=a.target||a.srcElement,9==e||e>=33&&40>=e||(this.Uk&&window.clearTimeout(this.Uk),this.Uk=window.setTimeout(function(){webix.$$(d).filterByAll()},webix.ui.datafilter.textWaitDelay))}},webix.ui.datafilter.textFilter),webix.ui.datafilter.serverSelectFilter=webix.extend({$server:!0,Vk:function(a,b,c){var d=this.Sk;webix.$$(d).filterByAll()}},webix.ui.datafilter.selectFilter),webix.ui.datafilter.numberFilter=webix.extend({init:function(a){a.prepare=function(b,c){var d=-1!=b.indexOf("=")?1:0,e=this.format(b);return""===e?"":(-1!=b.indexOf(">")?a.compare=this.Wk:-1!=b.indexOf("<")?(a.compare=this.Xk,d*=-1):(a.compare=this.Yk,d=0),e-d)}},format:function(a){return a.replace(/[^\-\.0-9]/g,"")},Wk:function(a,b){return 1*a>b},Xk:function(a,b){return""!==a&&b>1*a},Yk:function(a,b){return 1*a==b}},webix.ui.datafilter.textFilter),webix.ui.datafilter.dateFilter=webix.extend({format:function(a){if(""===a)return"";var b=new Date;if(-1!=a.indexOf("today"))b=webix.Date.dayStart(b);else if(-1==a.indexOf("now")){var c=a.match(/[0-9]+/g);if(!c||!c.length)return"";c.length<3?(c.reverse(),b=new Date(c[0],(c[1]||1)-1,1)):b=webix.i18n.dateFormatDate(a.replace(/^[>< =]+/,""))}return b.valueOf()}},webix.ui.datafilter.numberFilter),webix.extend(webix.ui.datatable,{filterByAll:function(){var a=!1;this.data.silent(function(){this.filter();var b=!1;for(var c in this.ij){var d=this.ij[c],e=d[2].getValue(d[0]),f=e;d[1].prepare&&(f=d[1].prepare.call(d[2],f,d[1],this)),d[1].value=e;var g=d[1].compare;if(this.callEvent("onBeforeFilter",[c,f,d[1]])){if(d[2].$server)return a=!0,this.jA();""!==f&&(g?(g=this.fC(c,g),this.filter(webix.bind(function(a,b){return!!a&&g(a[c],b,a)},this),f,b)):this.filter(c,f,b),b=!0)}}},this),a||(this.refresh(),this.callEvent("onAfterFilter",[]))},fC:function(a,b){var c=this.getColumnConfig(a).optionslist;return c?("string"!=typeof c&&(c=","),function(a,d,e){if(!a)return!0;for(var f=a.split(c),g=0;g<f.length;g++)if(b(f[g],d,e))return!0}):b},filterMode_setter:function(a){return webix.extend(this.data.Cf,a,!0)},getFilter:function(a){var b=this.ij[a];return b&&b[2].getInputNode?b[2].getInputNode(b[0]):null},registerFilter:function(a,b,c){this.ij[b.columnId]=[a,b,c]},collectValues:function(a){var b=[],c={"":!0},d=this.getColumnConfig(a),e=d.options||d.collection;if(e){if("object"==typeof e&&!e.loadNext){if(webix.isArray(e))for(var f=0;f<e.length;f++)b.push({id:e[f],value:e[f]});else for(var g in e)b.push({id:g,value:e[g]});return b}"string"==typeof e&&(e=webix.$$(e)),e.getBody&&(e=e.getBody()),this.Zk.call(e,"id","value",b,c)}else this.Zk(d.id,d.id,b,c);var d={values:b};return this.callEvent("onCollectValues",[a,d]),d.values},Zk:function(a,b,c,d){this.data.each(function(e){var f=e?e[b]:"";f===webix.undefined||d[f]||(d[f]=!0,c.push({id:e[a],value:f}))},this,!0),c.sort(function(a,b){return a.value>b.value?1:-1})},jA:function(a){this.loadNext(0,0,{before:function(){var a=this.data.url;this.editStop&&this.editStop(),this.clearAll(),this.data.url=a},success:function(){this.callEvent("onAfterFilter",[])}},0,1)}}),webix.extend(webix.ui.datatable,{hover_setter:function(a){return a&&!this.Yw&&(this.Vc(),this.config.experimental=!0,this.attachEvent("onMouseMoving",function(a){var b=this.locate(arguments[0]);b=b?b.row:null,this.Zw!=b&&(this.Zw&&this.removeRowCss(this.Zw,this.s.hover),this.$w(),this.Zw=b)}),this.attachEvent("onMouseOut",function(){this.Zw&&(this.removeRowCss(this.Zw,this.s.hover),this.Zw=null)}),this.Yw=1),a},$w:function(){webix.delay(function(){this.Zw&&this.addRowCss(this.Zw,this.s.hover)},this,[],5)},select_setter:function(a){return!this.select&&a&&(webix.extend(this,this._k.$k,!0),a===!0?a="row":"multiselect"==a&&(a="row",this.s.multiselect=!0),webix.extend(this,this._k[a],!0)),a},getSelectedId:function(a){return a?[]:""},getSelectedItem:function(a){return webix.SelectionModel.getSelectedItem.call(this,a)},_k:{$k:{Lk:" webix_cell_select",$init:function(){this.al(),this.on_click.webix_cell=webix.bind(this.bl,this),this.cl=this.zg=function(){this.unselect()},this.data.attachEvent("onStoreUpdated",webix.bind(this.xg,this)),this.data.attachEvent("onClearAll",webix.bind(this.cl,this)),this.data.attachEvent("onAfterFilter",webix.bind(this.zg,this)),this.data.attachEvent("onIdChange",webix.bind(this.Ag,this)),this.$ready.push(webix.SelectionModel.uy)},Ag:function(a,b){for(var c=0;c<this.dl.length;c++)this.dl[c]==a&&(this.dl[c]=b);for(var c=0;c<this.el.length;c++){var d=this.el[c];d.row==a&&(a=this.fl(d),d.row=b,b=this.fl(d),d.id=b,delete this.gl[a],this.gl[b]=!0)}},xg:function(a,b,c){"delete"==c&&this.unselect(a)},al:function(){this.el=[],this.gl={},this.dl=[]},isSelected:function(a,b){var c;return c=webix.isUndefined(b)?"object"==typeof a?this.fl(a):a:this.fl({row:a,column:b}),this.gl[c]},getSelectedId:function(a,b){var c;if(this.el.length>1||a){if(c=[].concat(this.el),b)for(var d=0;d<c.length;d++)c[d]=c[d].id}else if(c=this.el[0],b&&c)return c.id;return c},ok:function(){return this.row},hl:function(a,b){var c=this.fl(a);if(null!==c){if(-1===b)return this.ll(a);if(a.id=c,a.toString=this.ok,!this.callEvent("onBeforeSelect",[a,b]))return!1;if(!this.gl[c]||!b&&1!=this.el.length)return b||this.il(),this.el.push(a),this.gl[c]=!0,this.callEvent("onAfterSelect",[a,b]),this.jl(this.kl(a)),!0}},il:function(){if(!this.el.length)return!1;for(var a=0;a<this.dl.length;a++){var b=this.getItem(this.dl[a]);b&&this.data.removeMark(b.id,"webix_selected",0,1)}var c=this.s.columns;if(c)for(var a=0;a<c.length;a++)c[a].$selected=null;return this.al(),!0},unselectAll:function(){this.clearSelection()},selectAll:function(){this.selectRange()},clearSelection:function(){this.il()&&(this.callEvent("onSelectChange",[]),this.render())},ll:function(a){var b=this.fl(a);if(!b&&this.el.length&&(this.clearSelection(),this.callEvent("onSelectChange",[])),this.gl[b]){if(!this.callEvent("onBeforeUnSelect",[a]))return!1;for(var c=0;c<this.el.length;c++)if(this.el[c].id==b){this.el.splice(c,1);break}delete this.gl[b],this.callEvent("onAfterUnSelect",[a]),this.jl(0,this.ml(a))}},nl:function(a){var b=this.getItem(a);return this.data.addMark(b.id,"webix_selected",0,{$count:0},!0)},jl:function(a){a&&this.dl.push(a),this.Dg||(this.render(),this.callEvent("onSelectChange",[]))},bl:function(a,b){var c=a.ctrlKey||a.metaKey||"touch"==this.s.multiselect,d=a.shiftKey;if(this.s.multiselect||"multiselect"==this.s.select||(c=d=!1),d&&this.el.length){var e=this.el[this.el.length-1];this.ol(b,e)}else c&&this.gl[this.fl(b)]?this.ll(b):this.hl({row:b.row,column:b.column},c)},pl:function(a,b,c){var d=this.s.columns;if(b){for(var e=[],f=0;f<d.length;f++)d[f].$selected&&e.push(d[f]);d=e}for(var g=this.data.order,h=0,f=0;f<g.length;f++){var i=this.getItem(g[f]);if(i){var j=this.data.getMark(i.id,"webix_selected");if(j||b){for(var k=0,l=0;l<d.length;l++){var m=d[l].id;if(c||b||j[m]){if(!a)return{row:g[f],column:m};i[m]=a(i[m],g[f],m,h,k),k++}}h++}}}}},row:{Lk:" webix_row_select",fl:function(a){return a.row},select:function(a,b){a&&(a=a.toString()),this.hl({row:a},b)},kl:function(a){return this.nl(a.row).$row=!0,a.row},unselect:function(a){this.ll({row:a})},ml:function(a){return this.data.removeMark(a.row,"webix_selected",0,1),a.row},mapSelection:function(a){return this.pl(a,!1,!0)},ol:function(a,b){return this.selectRange(a.row,b.row)},selectRange:function(a,b,c){webix.isUndefined(c)&&(c=!0);var d=a?this.getIndexById(a):0,e=b?this.getIndexById(b):this.data.order.length-1;if(d>e){var f=d;d=e,e=f}this.Dg=!0;for(var g=d;e>=g;g++)this.select(this.getIdByIndex(g),c);this.Dg=!1,this.jl()}},cell:{fl:function(a){return a.column?a.row+"_"+a.column:null},select:function(a,b,c){this.hl({row:a,column:b},c)},kl:function(a){var b=this.nl(a.row);return b.$count++,b[a.column]=!0,a.row},unselect:function(a,b){this.ll({row:a,column:b})},ml:function(a){var b=this.nl(a.row);return b.$count--,b[a.column]=!1,b.$count<=0&&this.data.removeMark(a.row,"webix_selected"),a.row},mapSelection:function(a){return this.pl(a,!1,!1)},ol:function(a,b){return this.selectRange(a.row,a.column,b.row,b.column)},selectRange:function(a,b,c,d,e){webix.isUndefined(e)&&(e=!0);var f=a?this.getIndexById(a):0,g=c?this.getIndexById(c):this.data.order.length-1,h=b?this.getColumnIndex(b):0,i=d?this.getColumnIndex(d):this.fj.length-1;if(f>g){var j=f;f=g,g=j}if(h>i){var j=h;h=i,i=j}this.Dg=!0;for(var k=f;g>=k;k++)for(var l=h;i>=l;l++)this.select(this.getIdByIndex(k),this.columnId(l),e);this.Dg=!1,this.jl()}},column:{Lk:" webix_column_select",fl:function(a){return a.column},ok:function(){return this.column},select:function(a,b){this.hl({column:a},b)},kl:function(a){this.s.columns[this.getColumnIndex(a.column)].$selected=!0,this.Dg||this.Kj()},unselect:function(a){this.ll({column:a})},ml:function(a){this.s.columns[this.getColumnIndex(a.column)].$selected=null,this.Kj()},mapSelection:function(a){return this.pl(a,!0,!1)},ol:function(a,b){return this.selectRange(a.column,b.column)},selectRange:function(a,b,c){webix.isUndefined(c)&&(c=!0);var d=a?this.getColumnIndex(a):0,e=b?this.getColumnIndex(b):this.fj.length-1;if(d>e){var f=d;d=e,e=f}this.Dg=!0;for(var g=d;e>=g;g++)this.select(this.columnId(g),c);this.Dg=!1,this.Kj(),this.jl()}},area:{fl:function(a){return a.row+"_"+a.column},getSelectedId:function(a){var b=this.getSelectArea(),c=[];if(b)if(!a||b.start.row==b.end.row&&b.start.column==b.end.column)c.push(b.end);else for(var d=this.getIndexById(b.start.row),e=this.getIndexById(b.end.row),f=this.getColumnIndex(b.start.column),g=this.getColumnIndex(b.end.column),h=d;e>=h;h++)for(var i=f;g>=i;i++)c.push({row:this.getIdByIndex(h),column:this.columnId(i)});return a?c:c[0]},unselect:function(a){this.removeSelectArea()},ll:function(){this.removeSelectArea()},mapSelection:function(a){var b=this.getSelectArea();if(b)for(var c=this.getColumnIndex(b.start.column),d=this.getColumnIndex(b.end.column),e=this.getIndexById(b.start.row),f=this.getIndexById(b.end.row),g=e;f>=g;g++)for(var h=this.data.order[g],i=this.getItem(h),j=c;d>=j;j++){var k=this.fj[j].id;if(!a)return{row:h,column:k};a(i[k]||"",h,k,g-e,j-c)}},ol:function(a,b){this.gC(a,b)},hl:function(a,b){return this.addSelectArea(a,a,!1),!0}}}}),webix.extend(webix.ui.datatable,{blockselect_setter:function(a){return a&&this.ql&&(webix.event(this.x,webix.env.mouse.move,this.rl,{bind:this}),webix.event(this.x,webix.env.mouse.down,this.sl,{bind:this}),webix.event(document.body,webix.env.mouse.up,this.tl,{bind:this}),this.ql=this.ul=this.vl=!1),a},ql:!0,wl:function(a,b){for(var c=a.target||a.srcElement;c;){if(c.getAttribute&&c.getAttribute("webixignore"))return!1;if(c==b)return!0;c=c.parentNode}return!1},sl:function(a){if(this.wl(a,this.Vf)){if(a.target&&"INPUT"==a.target.tagName||this.Pl)return;webix.html.addCss(document.body,"webix_noselect"),this.xl=webix.html.offset(this.Vf);var b=webix.html.pos(a);this.ul=[b.x-this.xl.x,b.y-this.xl.y]}},tl:function(a){this.yl&&(this.jz("select",!0,a),this.yl=webix.html.remove(this.yl)),webix.html.removeCss(document.body,"webix_noselect"),this.ul=this.vl=!1},jz:function(a,b,c){var d=this.zl.apply(this,this.ul),e=this.zl.apply(this,this.vl);if(this.callEvent("onBeforeBlockSelect",[d,e,b,c])){if((!this.wB||this.wB(d,e,b,c)!==!1)&&d.row&&e.row)if("select"===a)this.il(),this.ol(d,e);else{var f,g,h,i;if(this.ul,"box"===a)f=Math.min(this.ul[0],this.vl[0]),h=Math.max(this.ul[0],this.vl[0]),g=Math.min(this.ul[1],this.vl[1]),i=Math.max(this.ul[1],this.vl[1]);else{var j=this.ug(d.row,d.column),k=this.ug(e.row,e.column),l=this.getScrollState(),m=j.width,n=k.width;this.ek&&this.ul[0]>this.dk+this.Yj?j.left+=this.dk+this.Yj:this.dk?this.ul[0]>this.dk&&(j.left<l.x?(m-=l.x-j.left,j.left=this.dk):j.left+=this.dk-l.x):j.left-=l.x,this.ek&&this.vl[0]>this.dk+this.Yj?k.left+=this.dk+this.Yj:this.dk?this.vl[0]>this.dk&&(k.left<l.x?(n-=l.x-k.left,k.left=this.dk):k.left+=this.dk-l.x):k.left-=l.x,this.s.prerender&&(j.top-=this.jk,k.top-=this.jk),f=Math.min(j.left,k.left),h=Math.max(j.left+m,k.left+n),g=Math.min(j.top,k.top),i=Math.max(j.top+j.height,k.top+k.height)}var o=this.yl.style;o.left=f+"px",o.top=g+"px",o.width=h-f+"px",o.height=i-g+"px"}b&&this.callEvent("onAfterBlockSelect",[d,e])}},Al:function(a){this.yl=webix.html.create("div",{"class":"webix_block_selection"},""),this.Vf.appendChild(this.yl)},rl:function(a){if(this.ul!==!1){var b=webix.html.pos(a),c=[b.x-this.xl.x,b.y-this.xl.y];if(Math.abs(this.ul[0]-c[0])<5&&Math.abs(this.ul[1]-c[1])<5)return;this.vl===!1&&this.Al(a),this.vl=c,this.jz(this.config.blockselect,!1,a)}},zl:function(a,b){this.ek&&a>this.dk+this.Yj?a+=this.Zj.getSize()-this.Yj-this.dk-this.ek:(!this.dk||a>this.dk)&&(a+=this.Zj.getScroll()),b+=this.getScrollState().y;var c=null,d=null;0>a&&(a=0),0>b&&(b=0);for(var e=this.s.columns,f=this.data.order,g=0,h=0;h<e.length;h++)if(g+=e[h].width,g>=a){d=e[h].id;break}if(d||(d=e[e.length-1].id),g=0,this.s.fixedRowHeight)c=f[Math.floor(b/this.s.rowHeight)];else for(var h=0;h<f.length;h++)if(g+=this.Uj(h),g>=b){c=f[h];break}return c||(c=f[f.length-1]),{row:c,column:d}}}),webix.protoUI({name:"resizearea",defaults:{dir:"x"},$init:function(a){var b=a.dir||"x",c=webix.toNode(a.container),d="x"==b?"width":"height",e=a.margin?a.margin+"px":0;this.Cl="x"==b?"left":"top",this.x=webix.html.create("DIV",{"class":"webix_resize_area webix_dir_"+b}),webix.event(this.x,webix.env.mouse.down,webix.html.stopEvent),e&&(e="x"==b?e+" 0 "+e:"0 "+e+" 0 "+e),this.Dl=webix.html.create("DIV",{"class":"webix_resize_handle_"+b,style:e?"padding:"+e:""},"<div class='webix_handle_content'></div>"),this.El=webix.html.create("DIV",{"class":"webix_resize_origin_"+b}),a[d]&&(this.El.style[d]=a[d]+(a.border?1:0)+"px",this.Dl.style[d]=a[d]+"px"),a.cursor&&(this.Dl.style.cursor=this.El.style.cursor=this.x.style.cursor=a.cursor),this.Fl=webix.event(c,webix.env.mouse.move,this.Gl,{bind:this}),this.Hl=webix.event(document.body,webix.env.mouse.up,this.Il,{bind:this}),this.Dl.style[this.Cl]=this.El.style[this.Cl]=a.start+"px",c.appendChild(this.x),c.appendChild(this.Dl),c.appendChild(this.El)},Il:function(){this.callEvent("onResizeEnd",[this.Jl]),webix.eventRemove(this.Fl),webix.eventRemove(this.Hl),webix.html.remove(this.x),webix.html.remove(this.Dl),webix.html.remove(this.El),this.x=this.Dl=this.El=null},Gl:function(a){var b=webix.html.pos(a);this.Jl=("x"==this.s.dir?b.x:b.y)+this.s.start-this.s.eventPos,this.Dl.style[this.Cl]=this.Jl+"px",this.callEvent("onResize",[this.Jl])}},webix.EventSystem,webix.Settings),webix.extend(webix.ui.datatable,{resizeRow_setter:function(a){return this.s.scrollAlignY=!1,this.s.fixedRowHeight=!1,this.resizeColumn_setter(a)},resizeColumn_setter:function(a){return a&&this.Kl&&(webix.event(this.x,"mousemove",this.Ll,{bind:this}),webix.event(this.x,"mousedown",this.Ml,{bind:this}),webix.event(this.x,"mouseup",this.Nl,{bind:this}),this.Kl=!1),a},Kl:!0,Ml:function(a){this.Ol&&(this.Pl=[webix.html.pos(a),this.Ol[2]],webix.html.addCss(document.body,"webix_noselect"),webix.html.denySelect())},Nl:function(){this.Pl=!1,webix.html.removeCss(document.body,"webix_noselect"),webix.html.allowSelect()},Ql:function(a){if(a=a||event,!this.Rl){var b=this.Ol[0],c=this.Pl[1],d=this.pk(c);if(d){var e,f=this.Pl[0];if("x"==b?(e=webix.html.offset(c).x+this.Ol[1]-webix.html.offset(this.Vf).x,f=f.x,this.Ol[1]||(d.cind-=c.parentNode.colSpan||1)):(e=webix.html.offset(c).y+this.Ol[1]-webix.html.offset(this.Vf).y+this.$g,f=f.y,this.Ol[1]||d.rind--),d.cind>=0&&d.rind>=0){this.Rl=[b,d,e];var g=new webix.ui.resizearea({container:this.x,dir:b,eventPos:f,start:e,cursor:("x"==b?"e":"n")+"-resize"});g.attachEvent("onResizeEnd",webix.bind(this.Sl,this))}this.Ml=this.Ol=!1}}},Sl:function(a){if(this.Rl){var b=this.Rl[0],c=this.Rl[1],d=a-this.Rl[2];if("x"==b){this.s.rightSplit&&c.cind+1>=this.Fj&&c.cind!==this.fj.length-1&&(c.cind++,d*=-1);var e=this.fj[c.cind],f=e.width;delete e.fillspace,this.Xs(c.cind,f+d,!0,!0),this.rk()}else{var g=this.getIdByIndex(c.rind),h=this.FA(this.getItem(g));this.setRowHeight(g,h+d)}this.Nl()}this.Rl=null},Ll:function(a){var b=this.s;if(this.Ol&&this.Pl)return this.Ql(a);a=a||event;var c=a.target||a.srcElement,d=!1;if("TD"!=c.tagName&&"TABLE"!=c.tagName){var e=c.className||"",f=-1!=e.indexOf("webix_cell");if(!f||!b.drag){var g=-1!=e.indexOf("webix_hcell");if(this.Ol=!1,f||g){var h=c.offsetWidth,i=c.offsetHeight,j=webix.html.posRelative(a),k=b.resizeRow;f&&k&&(k===!0&&(k=3),j.y<k?(this.Ol=["y",0,c],d="n-resize"):i-j.y<k+1&&(this.Ol=["y",i,c],d="n-resize"));var l=b.resizeColumn;l&&(l===!0&&(l=3),j.x<l?(this.Ol=["x",0,c],d="e-resize"):h-j.x<l+1&&(this.Ol=["x",h,c],d="e-resize"))}this.Tl&&window.clearTimeout(this.Tl),this.Tl=webix.delay(this.Ul,this,[d],d?100:0)}}},Ul:function(a){this.Vl!=a&&(this.Vl=a,this.x.style.cursor=a||"default")}}),webix.extend(webix.ui.datatable,webix.PagingAbility),webix.csv={escape:!0,delimiter:{rows:"\n",cols:"\t"},parse:function(a,b){if(b=b||this.delimiter,!this.escape)return this.Wl(a,b);for(var c=a.replace(/\n$/,"").split(b.rows),d=0;d<c.length-1;)this.Xl(c[d],'"')%2===1&&(c[d]+=b.rows+c[d+1],delete c[d+1],d++),d++;var e=[];for(d=0;d<c.length;d++)if("undefined"!=typeof c[d]){for(var f=c[d].split(b.cols),g=0;g<f.length;g++)0===f[g].indexOf('"')&&(f[g]=f[g].substr(1,f[g].length-2)),f[g]=f[g].replace('""','"');e.push(f)}return e},Wl:function(a,b){for(var c=a.split(b.rows),d=0;d<c.length;d++)c[d]=c[d].split(b.cols);return c},Xl:function(a,b){var c=a.split(b);return c.length-1},stringify:function(a,b){if(b=b||this.delimiter,!this.escape){for(var c=0;c<a.length;c++)a[c]=a[c].join(b.cols);return a.join(b.rows)}for(var d=/\n|\"|;|,/,c=0;c<a.length;c++){for(var e=0;e<a[c].length;e++)d.test(a[c][e])&&(a[c][e]=a[c][e].replace(/"/g,'""'),
a[c][e]='"'+a[c][e]+'"');a[c]=a[c].join(b.cols)}return a=a.join(b.rows)}},webix.TablePaste={clipboard_setter:function(a){return(a===!0||1===a)&&(this.s.clipboard="block"),webix.clipbuffer.init(),this.attachEvent("onSelectChange",this.Yl),this.attachEvent("onItemClick",function(a,b,c){document.activeElement&&this.$view.contains(document.activeElement)||(webix.clipbuffer.focus(),webix.UIManager.setFocus(this))}),this.attachEvent("onPaste",this.Zl),a},Yl:function(){if(!this.getEditor||!this.getEditor()){var a=this.$l();webix.clipbuffer.set(a),webix.UIManager.setFocus(this)}},$l:function(){var a=[];return this.mapSelection(function(b,c,d,e,f){return a[e]||(a[e]=[]),a[e].push(b),b}),webix.csv.stringify(a,this.s.delimiter)},Zl:function(a){if(!webix.isUndefined(this.rh[this.s.clipboard])){var b=webix.csv.parse(a,this.s.delimiter);this.rh[this.s.clipboard].call(this,b)}},rh:{block:function(a){var b=this.mapSelection(null);b&&(this.mapCells(b.row,b.column,a.length,null,function(b,c,d,e,f){return a[e]&&a[e].length>f?a[e][f]:b}),this.render())},selection:function(a){this.mapSelection(function(b,c,d,e,f){return a[e]&&a[e].length>f?a[e][f]:b}),this.render()},repeat:function(a){this.mapSelection(function(b,c,d,e,f){return c=a[e%a.length],b=c[f%c.length]}),this.render()},custom:function(a){}}},webix.extend(webix.ui.datatable,webix.TablePaste),webix.storage||(webix.storage={}),webix.storage.local={put:function(a,b){a&&window.JSON&&window.localStorage&&window.localStorage.setItem(a,window.JSON.stringify(b))},get:function(a){if(a&&window.JSON&&window.localStorage){var b=window.localStorage.getItem(a);return b?webix.DataDriver.json.toObject(b):null}return null},remove:function(a){a&&window.JSON&&window.localStorage&&window.localStorage.removeItem(a)},clear:function(){window.localStorage.clear()}},webix.storage.session={put:function(a,b){a&&window.JSON&&window.sessionStorage&&window.sessionStorage.setItem(a,window.JSON.stringify(b))},get:function(a){if(a&&window.JSON&&window.sessionStorage){var b=window.sessionStorage.getItem(a);return b?webix.DataDriver.json.toObject(b):null}return null},remove:function(a){a&&window.JSON&&window.sessionStorage&&window.sessionStorage.removeItem(a)},clear:function(){window.sessionStorage.clear()}},webix.storage.cookie={put:function(a,b,c,d){a&&window.JSON&&(document.cookie=a+"="+escape(window.JSON.stringify(b))+(d&&d instanceof Date?";expires="+d.toUTCString():"")+(c?";domain="+c:"")+(webix.env.https?";secure":""))},_l:function(a){for(var b=document.cookie.split(";"),c="",d="",e="",f=!1,g=0;g<b.length;g++){if(c=b[g].split("="),d=c[0].replace(/^\s+|\s+$/g,""),d==a)return f=!0,c.length>1&&(e=unescape(c[1].replace(/^\s+|\s+$/g,""))),e;c=null,d=""}return null},get:function(a){if(a&&window.JSON){var b=this._l(a);return b?webix.DataDriver.json.toObject(unescape(b)):null}return null},remove:function(a,b){a&&this._l(a)&&(document.cookie=a+"="+(b?";domain="+b:"")+";expires=Thu, 01-Jan-1970 00:00:01 GMT")},clear:function(a){for(var b=document.cookie.split(";"),c=0;c<b.length;c++)document.cookie=/^[^=]+/.exec(b[c])[0]+"="+(a?";domain="+a:"")+";expires=Thu, 01-Jan-1970 00:00:01 GMT"}},webix.DataState={getState:function(){for(var a=this.config.columns.length,b=this.config.columns,c={ids:[],size:[],select:this.getSelectedId(!0),scroll:this.getScrollState()},d=0;a>d;d++)c.ids.push(b[d].id),c.size.push(b[d].width);if(this.Nk&&(c.sort={id:this.Nk,dir:this.Ok}),this.ij){var e={},f=0;for(var g in this.ij)if(!this.am[g]){var h=this.ij[g];h[1].value=e[g]=h[2].getValue(h[0]),f=1}f&&(c.filter=e)}c.hidden=[];for(var g in this.am)c.hidden.push(g);return c},setState:function(a){var b=this.config.columns;if(a){if(this.Nk=null,this.blockEvent(),a.hidden){for(var c={},d=0;d<a.hidden.length;d++)c[a.hidden[d]]=!0,this.bm.length||this.hideColumn(a.hidden[d]);if(this.bm.length)for(var d=0;d<this.bm.length;d++){var e=this.bm[d];!!c[e]==!this.am[e]&&this.hideColumn(e,!!c[e])}}if(a.ids){for(var f=!1,g=this.config.columns,d=0;d<g.length;d++)g[d].id!=a.ids[d]&&(f=!0);if(f){for(var d=0;d<a.ids.length;d++)g[d]=this.getColumnConfig(a.ids[d])||g[d];this.refreshColumns()}}if(a.size)for(var h=Math.min(a.size.length,b.length),d=0;h>d;d++)b[d]&&b[d].width!=a.size[d]&&this.Xs(d,a.size[d],!0);if(a.filter)for(var i in this.ij){var j=this.ij[i];j[2].setValue(j[0],"")}if(this.unblockEvent(),this.rk(!0),this.callEvent("onStructureUpdate",[]),a.sort){var k=b[this.getColumnIndex(a.sort.id)];k&&this.zf(a.sort.id,a.sort.dir,k.sort)}if(a.filter){for(var i in a.filter){var l=a.filter[i];if(l&&this.ij[i]){var j=this.ij[i];j[2].setValue(j[0],l);var m=j[1].contentId;m&&(this.hj[m].value=l)}}this.filterByAll()}if(a.select&&this.select){var n=a.select;this.unselect();for(var d=0;d<n.length;d++)(!n[d].row||this.exists(n[d].row))&&this.hl(n[d],!0)}a.scroll&&this.scrollTo(a.scroll.x,a.scroll.y)}}},webix.extend(webix.ui.datatable,webix.DataState),function(){var a=webix.Touch={config:{longTouchDelay:1e3,scrollDelay:150,gravity:500,deltaStep:30,speed:"0ms",finish:1500,ellastic:!0},limit:function(b){a.cm=b!==!1},disable:function(){a.Xf=!0},enable:function(){a.Xf=!1},$init:function(){a.$init=function(){},webix.event(document.body,b.down,a.dm),webix.event(document.body,b.move,a.em),webix.event(document.body,b.up,a.fm),webix.event(document.body,"dragstart",function(a){return webix.html.preventEvent(a)}),webix.event(document.body,"touchstart",function(b){if(!a.Xf&&!a.cm&&webix.env.isSafari){var c=b.srcElement.tagName.toLowerCase();return"input"==c||"textarea"==c||"select"==c||"label"==c||(a.im=!0,webix.html.preventEvent(b))}}),a.Of(),a.jm=[null,null],a.$active=!0},Of:function(){a.km=a.lm=a.mm=a.bC=null,a.nm=a.om=a.pm=this.qm=null,a.rm={sm:0,tm:0,um:0},a.vm&&(webix.html.removeCss(a.vm,"webix_touch"),a.vm=null),window.clearTimeout(a.wm),a.xm=!0,a.ym=!0,a.zm=!0,a.Am||a.Pf()},fm:function(b){if(a.km){if(a.nm){var c=a.Mf(a.om),d=c.e,e=c.f,f=a.config.finish,g=a.Bm(b,!0),h=webix.$$(a.om),i=h&&h.$scroll?h.$scroll.gravity:a.config.gravity;if(g.um){var j=d+i*g.sm/g.um,k=e+i*g.tm/g.um,l=a.jm[0]?a.Cm(j,!1,!1,a.pm.dx,a.pm.px):d,m=a.jm[1]?a.Cm(k,!1,!1,a.pm.dy,a.pm.py):e,n=Math.max(Math.abs(l-d),Math.abs(m-e));150>n&&(f=f*n/150),(l!=d||m!=e)&&(f=Math.round(f*Math.max((l-d)/(j-d),(m-e)/(k-e))));var o={e:l,f:m},h=webix.$$(a.om);h&&h.adjustScroll&&h.adjustScroll(o),f=Math.max(100,f),d!=o.e||e!=o.f?(a.Nf(a.om,o.e,o.f,f+"ms"),a.Dm&&a.Dm.Em(o.e,o.f,f+"ms"),a.Fm(o.e,o.f,f+"ms")):a.Pf()}else a.Pf()}else if(!this.qm)if(a.zm&&!a.ym)a.Gm("onSwipeX");else if(a.ym&&!a.zm)a.Gm("onSwipeY");else if(webix.env.isSafari&&a.im){a.im=!1;var p=a.km.target;webix.delay(function(){var a=document.createEvent("MouseEvents");a.initEvent("click",!0,!0),p.dispatchEvent(a)})}a.Gm("onTouchEnd"),a.Of()}},em:function(b){if(a.bC&&a.km){var c=a.Bm(b);if(a.Gm("onTouchMove"),a.nm)a.Hm(c);else if(a.ym=a.Im(c.Jm,"x",a.ym),a.zm=a.Im(c.Ei,"y",a.zm),a.nm){var d=a.Km("onBeforeScroll",!0);if(d){var e={};d.callEvent("onBeforeScroll",[e]),e.update&&(a.config.speed=e.speed,a.config.scale=e.scale)}a.Lm(c)}return webix.html.preventEvent(b)}},Hm:function(){if(a.om){var b=a.Mf(a.om),c=(b.e,b.f,a.mm||a.km),d=webix.$$(a.om),e=d&&d.$scroll?d.$scroll.ellastic:a.config.ellastic;a.jm[0]&&(b.e=a.Cm(b.e-c.x+a.lm.x,e,b.e,a.pm.dx,a.pm.px)),a.jm[1]&&(b.f=a.Cm(b.f-c.y+a.lm.y,e,b.f,a.pm.dy,a.pm.py)),a.Nf(a.om,b.e,b.f,"0ms"),a.Dm&&a.Dm.Em(b.e,b.f,"0ms"),a.Fm(b.e,b.f,"0ms")}},Fm:function(b,c,d){var e=a.pm.px/a.pm.dx*-b,f=a.pm.py/a.pm.dy*-c;a.jm[0]&&a.Nf(a.jm[0],e,0,d),a.jm[1]&&a.Nf(a.jm[1],0,f,d)},scrollTo:function(b,c,d,e){a.Nf(b,c,d,e)},Nf:function(b,c,d,e){if(!a.tt&&window.setAnimationFrame&&window.setAnimationFrame(function(){return a.tt=!0,a.Nf(b,c,d,e)}),a.tt=null,a.Am=!0,b){var f=a.config.translate||webix.env.translate;b.style[webix.env.transform]=f+"("+Math.round(c)+"px, "+Math.round(d)+"px"+("translate3d"==f?", 0":"")+")",b.style[webix.env.transitionDuration]=e}},Mf:function(b){var c,d=window.getComputedStyle(b)[webix.env.transform];if("none"==d)c={e:0,f:0};else if(window.WebKitCSSMatrix)c=new WebKitCSSMatrix(d);else if(window.MSCSSMatrix)c=new MSCSSMatrix(d);else{var e=d.replace(/(matrix\()(.*)(\))/gi,"$2");e=e.replace(/\s/gi,""),e=e.split(",");for(var c={},f=["a","b","c","d","e","f"],g=0;g<f.length;g++)c[f[g]]=parseInt(e[g],10)}return a.Dm&&a.Dm.Mm(c),c},Cm:function(a,b,c,d,e){if(a===c)return a;var f=Math.abs(a-c),g=f/(a-c);if(a>0)return b?c+g*Math.sqrt(f):0;var h=d-e;return 0>h+a?b?c-Math.sqrt(-(a-c)):-h:a},Nm:function(b){if(!b.scroll_enabled){b.scroll_enabled=!0,b.parentNode.style.position="relative";var c=webix.env.cssPrefix;b.style.cssText+=c+"transition: "+c+"transform; "+c+"user-select:none; "+c+"transform-style:flat;",b.addEventListener(webix.env.transitionEnd,a.Pf,!1)}},Lm:function(b){-1!=a.nm.indexOf("x")&&(a.jm[0]=a.Om("x",a.pm.dx,a.pm.px,"width")),-1!=a.nm.indexOf("y")&&(a.jm[1]=a.Om("y",a.pm.dy,a.pm.py,"height")),a.Nm(a.om),window.setTimeout(a.Hm,1)},Om:function(b,c,d,e){if(2>c-d){var f=a.Mf(a.om),g="y"==b?f.e:0,h="y"==b?0:f.f;return a.Dm||a.Nf(a.om,g,h,"0ms"),a.nm=a.nm.replace(b,""),""}var i=webix.html.create("DIV",{"class":"webix_scroll_"+b},"");return i.style[e]=Math.max(d*d/c-7,10)+"px",a.om.parentNode.appendChild(i),i},Im:function(b,c,d){return b>a.config.deltaStep?(a.xm&&(a.Pm(c),a.pk(c),-1==(a.nm||"").indexOf(c)&&(a.nm="")),!1):d},Pf:function(){var b,c,d;d=webix.$$(a.om||this),d&&(a.om?b=a.Mf(a.om):d.getScrollState&&(c=d.getScrollState(),b={e:c.x,f:c.y}),webix.callEvent("onAfterScroll",[b]),d.callEvent&&d.callEvent("onAfterScroll",[b])),a.nm||(webix.html.remove(a.jm),a.jm=[null,null]),a.Am=!1},Pm:function(b){window.clearTimeout(a.wm),a.xm=!1},Qm:function(b){return!a.jm[0]&&!a.jm[1]||void a.Rm(b,a.jm[0]?"x":"y")},dm:function(c){var d=c.target||event.srcElement;if(!(a.Xf||d.tagName&&"textarea"==d.tagName.toLowerCase()&&d.offsetHeight<d.scrollHeight)){a.qm=null,a.bC=a.km=b.context(c);var e=webix.$$(c);!a.cm||a.Sm()||e&&e.$touchCapture||(a.bC=null),a.Gm("onTouchStart"),a.Qm(c)&&(a.wm=window.setTimeout(a.Tm,a.config.longTouchDelay)),!e||!e.touchable||d.className&&0===d.className.indexOf("webix_view")||(a.vm=e.getNode(c),webix.html.addCss(a.vm,"webix_touch"))}},Tm:function(b){a.km&&(a.Gm("onLongTouch"),webix.callEvent("onClick",[a.km]),a.qm=!0)},Rm:function(c,d){a.pk(d);var e=a.jm[0]||a.jm[1];if(e){var f=a.Km("onBeforeScroll",!0);f&&f.callEvent("onBeforeScroll",[a.km,a.lm])}!e||a.om&&e.parentNode==a.om.parentNode||(a.Of(),a.Pf(),a.km=b.context(c)),a.em(c)},Bm:function(c,d){return a.mm=a.lm,a.lm=b.context(c),a.rm.Jm=Math.abs(a.km.x-a.lm.x),a.rm.Ei=Math.abs(a.km.y-a.lm.y),a.mm&&(a.lm.time-a.mm.time<a.config.scrollDelay?(a.rm.sm=a.rm.sm/1.3+a.lm.x-a.mm.x,a.rm.tm=a.rm.tm/1.3+a.lm.y-a.mm.y):a.rm.tm=a.rm.sm=0,a.rm.um=a.rm.um/1.3+(a.lm.time-a.mm.time)),a.rm},Um:function(b){a.pm={dx:b.offsetWidth,dy:b.offsetHeight,px:b.parentNode.offsetWidth,py:b.parentNode.offsetHeight}},Sm:function(b){var c=a.km.target;if(!webix.env.touch&&!webix.env.transition&&!webix.env.transform)return null;for(;c&&"BODY"!=c.tagName;){if(c.getAttribute){var d=c.getAttribute("touch_scroll");if(d&&(!b||-1!=d.indexOf(b)))return[c,d]}c=c.parentNode}return null},pk:function(b){var c=this.Sm(b);return c&&(a.nm=c[1],a.om=c[0],a.Um(c[0])),c},Gm:function(b){webix.callEvent(b,[a.km,a.lm]);var c=a.Km(b);c&&c.callEvent(b,[a.km,a.lm])},Km:function(b,c){var d=webix.$$(c?a.om:a.km);if(!d)return null;for(;d;){if(d.hasEvent&&d.hasEvent(b))return d;d=d.getParentView()}return null},gm:function(b){if(!b.touches[0]){var c=a.lm;return c.time=new Date,c}return{target:b.target,x:b.touches[0].pageX,y:b.touches[0].pageY,time:new Date}},hm:function(a){return{target:a.target||a.srcElement,x:a.pageX,y:a.pageY,time:new Date}}};webix.ready(function(){webix.env.touch&&(a.$init(),-1==document.body.className.indexOf("webix_full_screen")&&a.limit(!0),window.MSCSSMatrix&&webix.html.addStyle(".webix_view{ -ms-touch-action: none; }"))});var b=webix.env.mouse={down:"mousedown",up:"mouseup",move:"mousemove",context:a.hm};window.navigator.pointerEnabled?(b.down="pointerdown",b.move="pointermove",b.up="pointerup"):window.navigator.msPointerEnabled?(b.down="MSPointerDown",b.move="MSPointerMove",b.up="MSPointerUp"):webix.env.touch&&(b.down="touchstart",b.move="touchmove",b.up="touchend",b.context=a.gm)}(),webix.attachEvent("onDataTable",function(a,b){webix.env.touch&&(webix.Touch.$init(),b.scrollSize=0,webix.extend(a,b.prerender===!0?a.Vm:a.Wm),webix.Touch.Xf&&webix.Touch.limit(),a.defaults.scrollAlignY=!1,a.Vf.setAttribute("touch_scroll","xy"),a.$ready.push(function(){var a="",b=this.s;b.autowidth||b.scrollX===!1||(a+="x"),b.autoheight||b.scrollY===!1||(a+="y"),this.Vf.setAttribute("touch_scroll",a)}),webix.Touch.Nm(a.Vf.childNodes[1].firstChild),webix.Touch.Nf(a.Vf.childNodes[1].firstChild,0,0,"0ms"),a.Em(0,0,"0ms"))}),webix.extend(webix.ui.datatable,{Vm:{$j:function(a,b){webix.Touch.Nf(this.Vf.childNodes[1].firstChild,0,0,"0ms"),this.Em(a,b,"0ms")},_j:function(){var a=webix.Touch.Mf(this.Vf.childNodes[1].firstChild);return{x:-a.e,y:-a.f}},$init:function(){this.attachEvent("onBeforeScroll",function(){webix.Touch.om=this.Vf.childNodes[1].firstChild,webix.Touch.Um(webix.Touch.om),webix.Touch.Dm=this}),this.attachEvent("onTouchEnd",function(){webix.Touch.Dm=null})},Em:function(a,b,c){this.s.leftSplit&&webix.Touch.Nf(this.Vf.childNodes[0].firstChild,0,b,c),this.s.rightSplit&&webix.Touch.Nf(this.Vf.childNodes[2].firstChild,0,b,c),this.s.header&&webix.Touch.Nf(this.I.childNodes[1].firstChild,a,0,c),this.s.footer&&webix.Touch.Nf(this.cj.childNodes[1].firstChild,a,0,c),this.callEvent("onSyncScroll",[a,b,c])},Mm:function(){}},Wm:{$j:function(a,b){webix.delay(function(){this.callEvent("onAfterScroll",[{e:-a,f:-b}])},this)},$scroll:{gravity:0,elastic:!1},$init:function(){this.attachEvent("onBeforeScroll",function(){var a=webix.Touch;a.om=this.Vf.childNodes[1].firstChild,a.Um(a.om),a.pm.dy=this.wj,a.Dm=this}),this.attachEvent("onAfterScroll",function(a){if(a){var b=this.bk!=-a.e,c=this.jk!=-a.f;webix.Touch.Dm=null,webix.Touch.$m=null,this.jk=0;var d=webix.Touch.config.translate;return webix.Touch.config.translate="translate",this.Em(a.e,0,"0ms"),webix.Touch.config.translate=d,this.bk=-a.e,this.jk=-a.f,this.render(),b&&this.callEvent("onScrollX",[]),c&&this.callEvent("onScrollY",[]),!1}})},Em:function(a,b,c){b+=this.jk,webix.Touch.Nf(this.Vf.childNodes[1].firstChild,a,b,c),this.s.leftSplit&&webix.Touch.Nf(this.Vf.childNodes[0].firstChild,0,b,c),this.s.rightSplit&&webix.Touch.Nf(this.Vf.childNodes[2].firstChild,0,b,c),this.s.header&&webix.Touch.Nf(this.I.childNodes[1].firstChild,a,0,c),this.s.footer&&webix.Touch.Nf(this.cj.childNodes[1].firstChild,a,0,c),this.callEvent("onSyncScroll",[a,b,c])},Mm:function(a){a.f-=this.jk}}}),webix.extend(webix.ui.datatable,{$init:function(){this.data.attachEvent("onStoreUpdated",webix.bind(function(a){a||this._m()},this)),this.attachEvent("onStructureLoad",this._m),this.attachEvent("onStructureUpdate",this.an),this.attachEvent("onColumnResize",function(a,b,c,d){d&&this.an()}),this.attachEvent("onResize",this.an)},_m:function(){if(this.count()){for(var a=!1,b=this.fj,c=0;c<b.length;c++)b[c].adjust&&(a=this.bn(c,b[c].adjust,!0)||a);a&&this.rk(!0)}},an:function(){var a=this.s.columns,b=[],c=0;if(a&&!this.s.autowidth)for(var d=0;d<a.length;d++){var e=a[d].fillspace;e&&(b[d]=e,c+=1*e||1)}c&&this.cn(b,c)},cn:function(a,b){var c=this.s.columns;if(c){var d=this.bc-this.oj,e=!1;if(d>0){for(var f=0;f<c.length;f++)a[f]||(d-=c[f].width||this.config.columnWidth);for(var f=0;f<a.length;f++)if(a[f]){var g=Math.min(d,Math.round(d*a[f]/b));e=this.Xs(f,g,!0)||e,d-=c[f].width,b-=a[f]}e&&this.rk(!0)}}},dn:function(a,b){var c=webix.html.create("DIV",{"class":"webix_view webix_table_cell webix_measure_size webix_cell"},"");c.style.cssText="width:1px; visibility:hidden; position:absolute; top:0px; left:0px; overflow:hidden;",document.body.appendChild(c);var d=this.s.columns[a],e=-(1/0);if("header"!=b&&this.data.each(function(a){if(a){var b=this.Ek(a,d,0);c.innerHTML=b,e=Math.max(c.scrollWidth,e)}},this),b&&"data"!=b)for(var f=0;f<d.header.length;f++){var g=d.header[f];g&&(c.innerHTML=g.text,e=Math.max(c.scrollWidth,e))}return c=webix.html.remove(c),e+1+(webix.env.isIE?webix.skin.$active.layoutPadding.space:0)},bn:function(a,b,c){if(a>=0){var d=this.dn(a,b);return this.Xs(a,d,c)}},adjustColumn:function(a,b){this.bn(this.getColumnIndex(a),b)},adjustRowHeight:function(a,b){var c,d=this.getColumnConfig(a),e=(this.data.count(),webix.html.create("DIV",{"class":"webix_table_cell webix_measure_size webix_cell"},""));e.style.cssText="width:"+d.width+"px; height:1px; visibility:hidden; position:absolute; top:0px; left:0px; overflow:hidden;",this.$view.appendChild(e),e.offsetHeight<1&&(c=this.$view.cloneNode(!0),document.body.appendChild(c),c.appendChild(e)),this.data.each(function(a){a&&(e.innerHTML=this.Ek(a,d,0),a.$height=Math.max(e.scrollHeight,this.s.rowHeight))},this),e=webix.html.remove(e),c&&webix.html.remove(c),b||this.refresh()}}),webix.extend(webix.ui.datatable,{math_setter:function(a){return a&&this.en(),a},fn:"$",en:function(){webix.env.strict||(this.data.attachEvent("onStoreUpdated",webix.bind(this.gn,this)),this.data.attachEvent("onStoreLoad",webix.bind(this.hn,this)),this.attachEvent("onStructureLoad",this.hn))},gn:function(a,b,c){if(a&&"delete"!=c&&"paint"!=c){"add"==c&&this.pn(b);for(var d=0;d<this.fj.length;d++)this.jn(a,this.fj[d].id,"add"!==c);this.kn={}}},jn:function(a,b,c){var d,e=this.getItem(a);if(c===!0?d=e[this.fn+b]||e[b]:(d=e[b],this.kn={}),"undefined"!=typeof d&&null!==d&&(d.length>0&&"="===d.substr(0,1)?(("undefined"==typeof e[this.fn+b]||c!==!0)&&(e[this.fn+b]=e[b]),e[b]=this.ln(d,a,b)):("undefined"!=typeof e[this.fn+b]&&delete e[this.fn+b],this.mn(a,b)),"undefined"!=typeof e.depends&&"undefined"!=typeof e.depends[b]))for(var f in e.depends[b]){var g=e.depends[b][f][0]+"__"+e.depends[b][f][1];"undefined"==typeof this.kn[g]&&(this.kn[g]=!0,this.jn(e.depends[b][f][0],e.depends[b][f][1],!0))}},nn:function(a,b){var c=this.getItem(a);"undefined"!=typeof c[this.fn+b]&&(c[b]=c[this.fn+b])},hn:function(){if(this.fj&&this.count()){this.pn();for(var a=0;a<this.fj.length;a++){var b=this.columnId(a);this.data.each(function(a){this.jn(a.id,b)},this)}this.kn={}}},pn:function(a){for(var b=0;b<this.fj.length;b++)if(this.fj[b].math){var c=this.columnId(b),d="="+this.fj[b].math;d=d.replace(/\$r/g,"#$r#"),d=d.replace(/\$c/g,"#$c#"),a?a[c]=this.qn(d,a.id,c):this.data.each(function(a){a[c]=this.qn(d,a.id,c)},this)}},qn:function(a,b,c){return webix.template(a)({$r:b,$c:c})},rn:function(a,b){var c;if(!this.exists(a))return"#out_of_range";c=this.getItem(a);var d=c[this.fn+b]||c[b]||0;return d=d.toString(),"="!==d.substring(0,1)?d:("undefined"==typeof c[this.fn+b]&&(c[this.fn+b]=c[b]),c[b]=this.ln(d,a,b,!0),c[b])},ln:function(a,b,c,d){if(d===!0){if(this.sn(b,c))return"#selfreference"}else this.tn();this.un(b,c),this.getItem(b),a=a.substring(1);var e=this.vn(a),f=this.wn(a);e?(a=this.xn(a,f),a=this.yn(a,e)):a=this.xn(a,f,!0);var g=this.zn(a);if(g!==!1)return g;this.An(b,c),this.mn(b,c);for(var h=0;h<f.length;h++)this.Bn([b,c],f[h]);var g=this.zn(a);if(g!==!1)return g;if(!a)return a;a=this.Cn(a);var g=this.zn(a);return g!==!1?g:a},vn:function(a){var b=/(\+|\-|\*|\/)/g,c=a.replace(/\[[^)]*?\]/g,"").match(b);return c},wn:function(a){var b=/\[([^\]]+),([^\]]+)\]/g,c=a.match(b);null===c&&(c=[]);for(var d=0;d<c.length;d++){var e=c[d],f=e;e=e.substr(1,e.length-2),e=e.split(","),e[0]=this.Dn(e[0]),e[1]=this.Dn(e[1]),":"===e[0].substr(0,1)&&(e[0]=this.getIdByIndex(e[0].substr(1))),":"===e[1].substr(0,1)&&(e[1]=this.columnId(e[1].substr(1))),e[2]=f,c[d]=e}return c},xn:function(a,b,c){var d="(",e=")";c&&(d=e="");for(var f=0;f<b.length;f++){var g=b[f],h=this.rn(g[0],g[1]);isNaN(h)&&(h='"'+h+'"'),a=a.replace(g[2],d+h+e)}return a},yn:function(a,b){for(var c=[],d=0;d<b.length;d++){var e=b[d],f=this.En(a,e);c.push(f[0]),a=f[1]}c.push(a);for(var d=0;d<c.length;d++){var g=this.Dn(c[d]);c[d]=g}for(var h="",d=0;d<c.length-1;d++)h+=c[d]+b[d];return h+=c[c.length-1]},Cn:function(expr){try{webix.temp_value="",expr="webix.temp_value = "+expr,eval(expr)}catch(ex){webix.temp_value=""}var result=webix.temp_value;return webix.temp_value=null,result.toString()},En:function(a,b){var c=a.indexOf(b),d=a.substr(0,c),e=a.substr(c+1);return[d,e]},Dn:function(a){return a=a.replace(/^ */g,""),a=a.replace(/ *$/g,"")},tn:function(){this.Fn=[]},un:function(a,b){this.Fn[a+"__"+b]=!0},An:function(a,b){"undefined"!=typeof this.Fn[a+"__"+b]&&delete this.Fn[a+"__"+b]},sn:function(a,b){return"undefined"!=typeof this.Fn[a+"__"+b]},Bn:function(a,b){var c=this.getItem(b[0]);"undefined"==typeof c.depends&&(c.depends={}),"undefined"==typeof c.depends[b[1]]&&(c.depends[b[1]]={}),c.depends[b[1]][a[0]+"__"+a[1]]=a,c=this.getItem(a[0]),"undefined"==typeof c.triggers&&(c.triggers={}),"undefined"==typeof c.triggers[a[1]]&&(c.triggers[a[1]]={}),c.triggers[a[1]][b[0]+"__"+b[1]]=b},mn:function(a,b){if(this.exists(a,b)){var c=this.getItem(a,b);if("undefined"!=typeof c.triggers)for(var d in c.triggers[b]){var e=c.triggers[b][d];delete this.getItem(e[0]).depends[e[1]][a+"__"+b]}}},zn:function(a){var b=/#\w+/,c=a.match(b);return null!==c&&c.length>0&&c[0]}}),webix.extend(webix.ui.datatable,{ii:function(a){return this.getColumnConfig(a.column).editor},getEditor:function(a,b){return a?(1==arguments.length&&(b=a.column,a=a.row),(this.ai[a]||{})[b]):this.di},si:function(a){for(var b in this.ai){var c=this.ai[b];for(var d in c)"$count"!=d&&a.call(this,c[d])}},ji:function(a,b,c){var d=a.row,e=a.column,f=b.config=this.getColumnConfig(e);c!==!1&&this.showCell(d,e);var g=b.render();b.$inline&&(g=this.mi(a)),b.node=g;var h,i=this.getItem(d),j=f.editFormat;if(this.s.editMath&&(h=i["$"+e]),h=h||i[e],webix.isUndefined(h)&&(h=""),b.setValue(j?j(h):h,i),b.value=i[e],this.ni(a,b),b.$inline||this.oi(a,g,!0),b.afterRender&&b.afterRender(),this.s.liveValidation){var k="webix_keyup_edit_"+this.s.id+"_"+d+"_"+e;webix.event(b.node,"keyup",this.Gn(a,this),{id:k}),this.validateEditor(a)}return g},Gn:function(a,b){return function(){b.validateEditor(a)}},ti:function(a,b){var c=this.getColumnConfig(a.column).editParse,d=this.getItem(a.row);return d[a.column]=c?c(b):b,this.s.editMath&&delete d["$"+a.column],a.row},ni:function(a,b,c){var d=this.ai[a.row]=this.ai[a.row]||{};d.$count=(d.$count||0)+1,b.row=a.row,b.column=a.column,this.di=d[a.column]=b,this.Eb++,this.Hn=this.getScrollState()},qi:function(a){this.di==a&&(this.di=0),a.destroy&&a.destroy();var b=this.ai[a.row];delete b[a.column],b.$count--,b.$count||delete this.ai[a.row],this.Eb--},ei:function(a,b){var c=this.ai[a];if(c){this.ai[b]=c,delete this.ai[a];for(var d in c)c[d].row=b}},pi:function(a){var b=this.getColumnConfig(a.column);if(b&&b.node&&b.attached){var c=this.getIndexById(a.row);if(c>=b.qk&&c<b.Kk)return b.node.childNodes[c-b.qk]}return 0},editCell:function(a,b,c,d){return b=b||this.s.columns[0].id,webix.EditAbility.edit.call(this,{row:a,column:b},c,d)},editRow:function(a,b){a&&a.row&&(a=a.row);var c=!1;this.eachColumn(function(b){this.edit({row:a,column:b},c,!c),c=!0})},editColumn:function(a,b){a&&a.column&&(a=a.column);var c=!1;this.eachRow(function(b){this.edit({row:b,column:a},c,!c),c=!0})},eachRow:function(a,b){var c=this.data.order;b&&(c=this.data.jf||c);for(var d=0;d<c.length;d++)a.call(this,c[d])},eachColumn:function(a,b){for(var c in this.Aj){var d=this.Aj[c];a.call(this,d.id,d)}if(b)for(var c in this.am){var d=this.am[c];a.call(this,d.id,d)}},vi:function(a){if(this.getSelectedId){var b=this.getSelectedId(!0);if(1==b.length)return this.hl(a),!1}},Gb:function(a,b){if(this.s.editable&&!this.Eb){if(b.target&&"INPUT"==b.target.tagName)return!0;var c=this.getSelectedId(!0);if(1==c.length)return this.editNext(a,c[0]),!1}return!0},ui:function(a,b,c){var d=this.getIndexById(a.row),e=this.getColumnIndex(a.column),f=this.data.order,g=this.fj;if(c)for(var h=d;h<f.length;h++){for(var i=e+1;i<g.length;i++){var j={row:f[h],column:g[i].id};if(b.call(this,j))return j}e=-1}else for(var h=d;h>=0;h--){for(var i=e-1;i>=0;i--){var j={row:f[h],column:g[i].id};if(b.call(this,j))return j}e=g.length}return null},In:function(){this.Eb&&(this.Jn?this.Jn=!1:(this.Wj.scrollTo(this.getScrollState().y+this.Vf.childNodes[1].firstChild.scrollTop),this.Vf.childNodes[1].firstChild.scrollTop=0,this.Jn=!0))},Kn:function(){this.Eb&&this.Zj.scrollTo(this.Vf.childNodes[1].scrollLeft)},gi:function(){this.attachEvent("onScrollY",this.Ln),this.attachEvent("onScrollX",this.Ln),this.attachEvent("onScrollY",this.$s),this.attachEvent("onColumnResize",function(){this.editStop()}),this.attachEvent("onAfterFilter",function(){this.editStop()}),this.attachEvent("onRowResize",function(){this.editStop()}),this.Vf.childNodes[1].firstChild.onscroll=webix.bind(this.In,this),this.Vf.childNodes[1].onscroll=webix.bind(this.Kn,this)},Ln:function(){if(this.Eb){var a=this.Hn;this.Hn=this.getScrollState();var b=this.Hn.y-a.y;this.si(function(a){if(a.getPopup){var c=this.getItemNode(a);c?a.getPopup().show(c):a.getPopup().show({x:-1e4,y:-1e4})}else a.$inline||(a.node.top-=b,a.node.style.top=a.node.top+"px")})}}}),webix.extend(webix.ui.datatable,webix.EditAbility),webix.extend(webix.ui.datatable,{$init:function(){this.kz(),this.attachEvent("onStructureLoad",this.Nn)},kz:function(){this.am={},this.bm=webix.toArray(),this.Mn=[0,0]},Nn:function(){var a=this.fj;this.xB(a);for(var b=a.length-1;b>=0;b--)a[b].hidden?this.hideColumn(a[b].id,!0,!0):a[b].batch&&this.config.visibleBatch&&a[b].batch!=this.config.visibleBatch&&this.hideColumn(a[b].id,!0,!0)},xB:function(a){for(var b=0;b<a.length;b++)for(var c=0;c<a[b].header.length;c++){var d=a[b].header[c];d&&d.colspan&&(d.$colspan=d.colspan)}},moveColumn:function(a,b){var c=this.getColumnIndex(a);if(c!=b){var d=this.s.columns,e=d.splice(c,1),f=b-(b>c?1:0);webix.PowerArray.insertAt.call(d,e[0],f),this.On()}},rz:function(){var a=this.bm,b=this.s.columns;if(!a.length){for(var c=0;c<b.length;c++)a[c]=b[c].id;this.Mn=[this.s.leftSplit,this.Fj]}},isColumnVisible:function(a){return!this.am[a]},hideColumn:function(a,b,c){var d,e=this.s.columns,f=this.bm,g=this.am;if(b!==!1){var h=this.getColumnIndex(a);if(-1===h||!this.callEvent("onBeforeColumnHide",[a]))return;if(-1==h)return;this.rz(),h<this.s.leftSplit&&this.s.leftSplit--,h>=this.Fj?this.s.rightSplit--:this.Fj--,this.vk(h),d=g[a]=e.splice(h,1)[0],d.qk=-1,delete this.Aj[a],this.callEvent("onAfterColumnHide",[a])}else{if(d=g[a],!d||!this.callEvent("onBeforeColumnShow",[a]))return;for(var i=null,j=0;j<f.length&&f[j]!=a;j++)g[f[j]]||(i=f[j]);var h=i?this.getColumnIndex(i)+1:0;webix.PowerArray.insertAt.call(e,d,h),delete d.hidden,j<this.Mn[0]&&this.s.leftSplit++,j>=this.Mn[1]?this.s.rightSplit++:this.Fj++,delete g[a],this.Aj[a]=d,this.callEvent("onAfterColumnShow",[a])}this.xt(d,b!==!1?0:1),c||this.On()},xt:function(a,b){for(var c=a.header.length-1;c>=0;c--)for(var d,e=this.bm,f=!1,g=0,h=0;h<e.length;h++){var a=this.getColumnConfig(e[h]),i=a.header[c];this.isColumnVisible(e[h])?(f&&g>0&&d&&d.colspan>0?(i=a.header[c]=d,d=i):i&&i.$colspan&&0>=g&&(g=i.colspan=i.$colspan,d=i),f=null):(i&&i.$colspan&&0>=g&&(g=i.colspan=i.$colspan,f=d=i),d&&g>0&&d.colspan--),g--}},refreshColumns:function(a,b){(a&&a!=this.config.columns||b)&&(this.kz(),this.ij=[],a&&(this.Fj=a.length-(this.config.rightSplit||0))),this.Aj={};for(var c=0;c<this.fj.length;c++){var d=this.fj[c];this.Aj[d.id]=d,d.attached=d.node=null}for(var c=0;3>c;c++)this.I.childNodes[c].innerHTML="",this.Vf.childNodes[c].firstChild.innerHTML="";this.fj=this.config.columns=a||this.config.columns,this.Fj=this.fj.length-this.s.rightSplit,this.tj=0,this.rj(),this.callEvent("onStructureUpdate"),this.sk(),this.render()},On:function(){this.tj=0,this.callEvent("onStructureUpdate"),this.uj(),this.render()},showColumn:function(a){return this.hideColumn(a,!1)},showColumnBatch:function(a,b){var c="undefined"!=typeof b;b=b!==!1,this.eachColumn(function(d,e){if(e.batch){var f=this.am[e.id];b||(f=!f),e.batch==a&&f?this.hideColumn(e.id,!b,!0):c||e.batch==a||f||this.hideColumn(e.id,b,!0)}},!0),this.On()}}),webix.extend(webix.ui.datatable,{moveSelection:function(a,b){var c=this.getSelectedId(!0),d=c.length-1;if(0>d){if("down"==a||"right"==a)a="top";else{if("up"!=a&&"left"!=a)return;a="bottom"}d=0,c=[{row:1,column:1}]}if(d>=0){var e=c[d].row,f=c[d].column,g=!!this.s.multiselect&&b;if("top"==a||"bottom"==a){if(e&&("top"==a?e=this.data.getFirstId():"bottom"==a&&(e=this.data.getLastId())),f){var d=0;"bottom"==a&&(d=this.config.columns.length-1),f=this.columnId(d)}}else if("up"==a||"down"==a||"pgup"==a||"pgdown"==a){if(e){var d=this.getIndexById(e),h="pgup"==a||"pgdown"==a?Math.round(this.Vj/this.s.rowHeight):1;"up"==a||"pgup"==a?d-=h:("down"==a||"pgdown"==a)&&(d+=h),0>d&&(d=0),d>=this.data.order.length&&(d=this.data.order.length-1),e=this.getIdByIndex(d),!e&&this.s.pager&&this.showItemByIndex(d)}}else{if("right"!=a&&"left"!=a)return;if(f&&"row"!=this.config.select){var d=this.getColumnIndex(f);if("right"==a?d++:"left"==a&&d--,0>d||d>=this.config.columns.length)return;f=this.columnId(d)}else{if(this.open&&"right"==a)return this.open(e);if(this.close&&"left"==a)return this.close(e)}}e&&(this.showCell(e,f),this.hl({row:e,column:f},g))}return!1}}),webix.extend(webix.ui.datatable,webix.KeysNavigation),webix.extend(webix.ui.datatable,webix.DataMove),webix.extend(webix.ui.datatable,{$dragHTML:function(a,b){for(var c=this.bc-this.oj,d="<div class='webix_dd_drag' style='width:"+(c-2)+"px;'>",e=this.s.columns,f=0;f<e.length;f++){var g=this.Ek(a,e[f]);d+="<div style='width:"+e[f].width+"px;'>"+g+"</div>"}return d+"</div>"},getHeaderNode:function(a,b){var c=this.getColumnIndex(a);b=b||0;for(var d=this.I.childNodes[1].getElementsByTagName("TR")[b+1].childNodes,e=0;e<d.length;e++)if(d[e].getAttribute("column")==c)return d[e].firstChild;return null},getItemNode:function(a,b){if(a&&!a.header){var c=a.row||a,d=this.getIndexById(c),e=this.Sj();if(d<e[0]&&d>e[1])return;var f=this.Xj(),g=this.s.leftSplit?0:f[0];if(a.column&&(g=this.getColumnIndex(a.column),g<this.Fj&&g>=this.s.leftSplit&&(g<f[0]||g>f[1])))return;var h=this.s.columns[g];if(h.attached&&h.node)return h.node.childNodes[d-e[0]]}},dragColumn_setter:function(a){var b;"order"==a?b={$drag:webix.bind(function(a,c){var d=this.locate(c);if(this.Pl||!d||!this.callEvent("onBeforeColumnDrag",[d.column,c]))return!1;webix.DragControl.Gd={from:b,start:d,custom:"column_dnd"};var e=this.getColumnConfig(d.column);return this.Qn=webix.html.posRelative(c),this.Rn=e.width,"<div class='webix_dd_drag_column' style='width:"+e.width+"px'>"+(e.header[0].text||"&nbsp;")+"</div>"},this),$dragPos:webix.bind(function(a,b,c){var d=webix.DragControl.getContext(),e=webix.html.offset(this.$view);c.style.display="none";var f=document.elementFromPoint(a.x,e.y+1),g=f?this.locate(f):null,h=webix.DragControl.getContext().start.column;if(g&&g.column!=h&&(!this.Sn||g.column!=this.Yg)&&"column_dnd"==d.custom&&webix.$$(f)==this){if(!this.callEvent("onBeforeColumnDropOrder",[h,g.column,b]))return;var i=this.getColumnIndex(h),j=this.getColumnIndex(g.column);b.touches&&(this.wy=b.target,this.wy.style.display="none",this.$view.parentNode.appendChild(this.wy)),this.moveColumn(h,j+(j>i?1:0)),this.Yg=g.column,this.Sn=!0}if(g&&g.column==h&&(this.Sn=!1),c.style.display="block",a.x=a.x-this.Qn.x,a.y=e.y,a.x<e.x)a.x=e.x;else{var k=e.x+this.$view.offsetWidth-this.oj-this.Rn;a.x>k&&(a.x=k)}webix.DragControl.Ed=!0},this),$dragDestroy:webix.bind(function(a,b){webix.html.remove(b),this.wy&&webix.html.remove(this.wy);var c=webix.DragControl.getContext().start;this.callEvent("onAfterColumnDropOrder",[c.column,this.Yg,a])},this)}:a&&(b={ah:!0,$drag:webix.bind(function(a,c){var d=this.locate(c);if(this.Pl||!d||!this.callEvent("onBeforeColumnDrag",[d.column,c]))return!1;webix.DragControl.Gd={from:b,start:d,custom:"column_dnd"};for(var e=this.getColumnConfig(d.column).header,f="&nbsp;",g=0;g<e.length;g++)if(e[g]){f=e[g].text;break}return"<div class='webix_dd_drag_column'>"+f+"</div>";
},this),$drop:webix.bind(function(a,b,c){var d=c;c.touches&&this.Tn&&(d=this.Tn);var e=this.locate(d);if(!e)return!1;var f=webix.DragControl.getContext().start.column;if(f!=e.column){if(!this.callEvent("onBeforeColumnDrop",[f,e.column,c]))return;var g=this.getColumnIndex(f),h=this.getColumnIndex(e.column);this.moveColumn(f,h+(h>g?1:0)),this.callEvent("onAfterColumnDrop",[f,e.column,c])}},this),$dragIn:webix.bind(function(a,c,d){var e=webix.DragControl.getContext();if("column_dnd"!=e.custom||e.from!=b)return!1;for(var f=d.target||d.srcElement;-1==(f.className||"").indexOf("webix_hcell");)if(f=f.parentNode,!f)return;return f!=this.Tn&&(this.Tn&&webix.html.removeCss(this.Tn,"webix_dd_over_column"),webix.html.addCss(f,"webix_dd_over_column")),this.Tn=f},this),$dragDestroy:webix.bind(function(a,b){this.Tn&&webix.html.removeCss(this.Tn,"webix_dd_over_column"),webix.html.remove(b)},this)}),a&&(webix.DragControl.addDrag(this.I,b),webix.DragControl.addDrop(this.I,b,!0))}}),webix.extend(webix.ui.datatable,webix.DragItem),webix.extend(webix.ui.datatable,{Te:function(a,b){this.Un(a);for(var c in b)this.addCellCss(a,c,"webix_invalid_cell");this.addCss(a,"webix_invalid")},Qe:function(a){this.Un(a),this.removeCss(a,"webix_invalid")},Un:function(a){var b=(this.getItem(a),this.data.getMark(a,"$cellCss"));if(b)for(var c in b)b[c]=b[c].replace("webix_invalid_cell","").replace("  "," ")},addRowCss:function(a,b,c){this.addCss(a,b,c)},removeRowCss:function(a,b,c){this.removeCss(a,b,c)},addCellCss:function(a,b,c,d){var e=this.data.getMark(a,"$cellCss"),f=e||{},g=f[b]||"";f[b]=g.replace(c,"").replace("  "," ")+" "+c,e||this.data.addMark(a,"$cellCss",!1,f,!0),d||this.refresh(a)},removeCellCss:function(a,b,c,d){var e=this.data.getMark(a,"$cellCss");if(e){var f=e[b]||"";f&&(e[b]=f.replace(c,"").replace("  "," ")),d||this.refresh(a)}}}),webix.extend(webix.ui.datatable,webix.ValidateCollection),function(){function a(a){for(var b=[],c=a.length-1;c>=0;c--){var d=a[c];b[c]="object"==typeof d?d.value:d}return b}var b=webix.Sparklines=function(){};b.types={},b.getTemplate=function(a){var b=a||{};"string"==typeof a&&(b={type:a}),webix.extend(b,{type:"line"});var c=this.types[b.type];return webix.bind(this.BC,new c(b))},b.BC=function(b,c,d,e){return e?this.draw(a(d),e.width,33):this.draw(b.data||b,c.width,c.height)}}(),webix.attachEvent("onDataTable",function(a){a.type.sparklines=webix.Sparklines.getTemplate()}),function(){function a(a){var b=" ";if(a)for(var c in a)b+=c+'="'+a[c]+'" ';return b}var b={};b.draw=function(b,c,d,e){var f={xmlns:"http://www.w3.org/2000/svg",version:"1.1",height:"100%",width:"100%",viewBox:"0 0 "+c+" "+d,"class":e||""};return"<svg "+a(f)+">"+b+"</svg>"},b.styleMap={lineColor:"stroke",color:"fill"},b.group=function(a){return"<g>"+a+"</g>"},b.z={M:function(a){return" M "+a.x+" "+a.y},L:function(a){return" L "+a.x+" "+a.y},C:function(a,b,c){return" C "+a.x+" "+a.y+" "+b.x+" "+b.y+" "+c.x+" "+c.y},A:function(a,b,c,d){var e=a.x+Math.cos(d)*b,f=a.y+Math.sin(d)*b;return" A "+b+" "+b+" 0 0 1 "+e+" "+f}},b.definePath=function(a,b){for(var c="",d=0;d<a.length;d++){var e=a[d][0].toUpperCase();c+=this.z[e].apply(this,a[d].slice(1))}return b&&(c+=" Z"),c},b.CC=function(a){for(var b=[],c=0;c<a.length;c++)b.push([c?"L":"M",a[c]]);return b},b.setOpacity=function(a,b){return a=webix.color.toRgb(a),a.push(b),"rgba("+a.join(",")+")"},b.DC=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];c||b.push(["M",d[0]]),b.push(["C",d[1],d[2],d[3]])}return b},b.getPath=function(b,c,d){return d=a(d),'<path class="'+c+'" vector-effect="non-scaling-stroke" d="'+b+'" '+d+"/>"},b.getSector=function(c,d,e,f,g,h){h=a(h);var i=c.x+Math.cos(e)*d,j=c.y+Math.sin(e)*d,k=[["M",c],["L",{x:i,y:j}],["A",c,d,e,f],["L",c]];return'<path class="'+g+'" vector-effect="non-scaling-stroke" d="'+b.definePath(k,!0)+'" '+h+"/>"},b.getCurve=function(b,c,d){d=a(d);var e=this.definePath(this.DC(b));return'<path fill="none" class="'+c+'" vector-effect="non-scaling-stroke" d="'+e+'" '+d+"/>"},b.getLine=function(a,b,c,d){return this.getPath(this.definePath(this.CC([a,b]),!0),c,d)},b.getCircle=function(b,c,d,e){return e=a(e),'<circle class="'+d+'" cx="'+b.x+'" cy="'+b.y+'" r="'+c+'" '+e+"/>"},b.getRect=function(b,c,d,e,f,g){return g=a(g),'<rect class="'+f+'" rx="0" ry="0" x="'+b+'" y="'+c+'" width="'+d+'" height="'+e+'" '+g+"/>"},webix.EC=b}(),function(){function a(a){this.config=webix.extend(webix.copy(b),a||{},!0)}var b={paddingX:3,paddingY:4,radius:1,minHeight:4,eventRadius:8};a.prototype.draw=function(a,b,c){var d,e,f,g,h,i=this.config,j=webix.Sparklines.types.line.prototype,k=webix.EC;return g=this.getPoints(a,b,c),f=k.definePath(j.FC(g),!0),i.color&&(h=this.GC(k,i.color)),e=k.group(k.getPath(f,"webix_sparklines_area"+(h?" "+h.area:""))),g.splice(g.length-3,3),f=k.definePath(j.FC(g)),e+=k.group(k.getPath(f,"webix_sparklines_line"+(h?" "+h.line:""))),e+=j.HC(k,g,i.radius,"webix_sparklines_item"+(h?" "+h.item:"")),d=Math.min(a.length?(b-2*(i.paddingX||0))/a.length:0,i.eventRadius),e+=j.IC(k,g,d),k.draw(e,b,c,"webix_sparklines_area_chart"+(i.css?" "+i.css:""))},a.prototype.GC=function(a,b){var c={area:{},line:{},item:{}},d=a.styleMap;if(b){c.area[d.color]=a.setOpacity(b,.2),c.line[d.lineColor]=b,c.item[d.color]=b;for(var e in c)c[e]=webix.html.createCss(c[e])}return c},a.prototype.getPoints=function(a,b,c){var d=webix.Sparklines.types.line.prototype,e=d.getPoints.call(this,a,b,c),f=this.config.paddingX||0,g=this.config.paddingY||0;return e.push({x:b-f,y:c-g},{x:f,y:c-g},{x:f,y:e[0].y}),e},webix.Sparklines.types.area=a}(),function(){function a(a){this.config=webix.extend(webix.copy(b),a||{},!0)}var b={paddingX:3,paddingY:4,width:20,margin:4,minHeight:4,eventRadius:8,origin:0,itemCss:function(a){return a<(this.config.origin||0)?" webix_sparklines_bar_negative":""}};a.prototype.draw=function(a,b,c){var d,e,f,g,h,i=this.config,j="",k=[],l=this.getPoints(a,b,c),m=webix.EC;for(d=0;d<l.length;d++)e="function"==typeof i.itemCss?i.itemCss.call(this,a[d]):i.itemCss||"",i.negativeColor&&a[d]<i.origin?e+=" "+this.GC(m,i.negativeColor):i.color&&(e+=" "+this.GC(m,i.color)),f=l[d],k.push(m.getRect(f.x,f.y,f.width,f.height,"webix_sparklines_bar "+e));j+=m.group(k.join("")),g=parseInt(this.JC(a,b,c),10)+.5,h=i.paddingX||0,j+=m.group(m.getLine({x:h,y:g},{x:b-h,y:g},"webix_sparklines_origin"));var n=this.KC(a,b,c),o=[];for(d=0;d<n.length;d++)f=n[d],o.push(m.getRect(f.x,f.y,f.width,f.height,"webix_sparklines_event_area ",{webix_area:d}));return j+=m.group(o.join("")),m.draw(j,b,c,"webix_sparklines_bar_chart"+(i.css?" "+i.css:""))},a.prototype.GC=function(a,b){var c={},d=a.styleMap;return b&&(c[d.color]=b),webix.html.createCss(c)},a.prototype.JC=function(a,b,c){var d=this.config,e=d.paddingY||0;c=(c||100)-2*e;var f=e+c;if(d.origin!==!1){var g=Math.min.apply(null,a),h=Math.max.apply(null,a),i=d.origin||0;if(i>=h)f=e;else if(i>g){var j=c/(h-g);f-=j*(i-g)}}return f},a.prototype.KC=function(a,b,c){var d=[],e=this.config.paddingX||0,f=this.config.paddingY||0;if(b=(b||100)-2*e,c=(c||100)-2*f,a.length)for(var g=b/a.length,h=0;h<a.length;h++)d.push({x:Math.ceil(g*h)+e,y:f,height:c,width:g});return d},a.prototype.getPoints=function(a,b,c){var d=this.config,e=Math.min.apply(null,a),f=Math.max.apply(null,a),g=[],h=d.paddingX,i=d.paddingY,j=d.margin,k=d.width||20,l=this.JC(a,b,c);if(b=(b||100)-2*h,c=(c||100)-2*i,a.length){var m=b/a.length,n=f-e;k=Math.min(m-j,k),j=m-k;var o=0,p=e;d.origin!==!1&&d.origin>e?p=d.origin||0:o=d.minHeight;for(var q=(c-o)/(n?n:1),r=0;r<a.length;r++){var s=Math.ceil(q*(a[r]-p));g.push({x:Math.ceil(m*r)+h+j/2,y:l-(a[r]>=p?s:0)-o,height:Math.abs(s)+o,width:k})}}return g},webix.Sparklines.types.bar=a}(),function(){function a(a){this.config=webix.extend(webix.copy(b),a||{},!0)}var b={paddingX:6,paddingY:6,radius:2,minHeight:4,eventRadius:8};a.prototype.draw=function(a,b,c){var d=this.getPoints(a,b,c),e=this.config,f=webix.EC,g=e.color?this.GC(f,e.color):null,h=f.definePath(this.FC(d)),i=f.group(f.getPath(h,"webix_sparklines_line"+(g?" "+g.line:"")));i+=this.HC(f,d,e.radius,"webix_sparklines_item"+(g?" "+g.item:""));var j=Math.min(a.length?(b-2*(e.paddingX||0))/a.length:0,e.eventRadius);return i+=this.IC(f,d,j),f.draw(i,b,c,"webix_sparklines_line_chart"+(e.css?" "+e.css:""))},a.prototype.GC=function(a,b){var c={line:{},item:{}},d=a.styleMap;if(b){c.line[d.lineColor]=b,c.item[d.color]=b;for(var e in c)c[e]=webix.html.createCss(c[e])}return c},a.prototype.HC=function(a,b,c,d,e){for(var f=[],g=0;g<b.length;g++)f.push(a.getCircle(b[g],c,d,e));return a.group(f.join(""))},a.prototype.IC=function(a,b,c){for(var d=[],e=0;e<b.length;e++)d.push(a.getCircle(b[e],c,"webix_sparklines_event_area",{webix_area:e}));return a.group(d.join(""))},a.prototype.FC=function(a){var b,c,d=[];for(b=0;b<a.length;b++)c=b?"L":"M",d.push([c,a[b]]);return d},a.prototype.getPoints=function(a,b,c){var d=this.config,e=Math.min.apply(null,a),f=Math.max.apply(null,a),g=[],h=d.paddingX||0,i=d.paddingY||0;b=(b||100)-2*h;var j=d.minHeight||0;if(c=(c||100)-2*i,a.length)if(1==a.length)g.push({x:b/2+h,y:c/2+h});else{var k=b/(a.length-1),l=f-e,m=(c-j)/(l?l:1);l||(c/=2);for(var n=0;n<a.length;n++)g.push({x:Math.ceil(k*n)+h,y:c-Math.ceil(m*(a[n]-e))+i-j})}return g},webix.Sparklines.types.line=a}(),function(){function a(a){this.config=webix.extend(b,a||{},!0)}var b={paddingY:2};a.prototype.rC=0,a.prototype.qC=["#f55b50","#ff6d3f","#ffa521","#ffc927","#ffee54","#d3e153","#9acb61","#63b967","#21a497","#21c5da","#3ea4f5","#5868bf","#7b53c0","#a943ba","#ec3b77","#9eb0b8"],a.prototype.xv=function(a,b){var c=b.length,d=this.qC.length;return d>c?(a&&(a=d-c>a?this.rC+2:this.rC+1),this.rC=a):a%=d,this.qC[a]},a.prototype.draw=function(a,b,c){var d,e,f,g,h=this.config,i=h.color||this.xv,j=this.getAngles(a),k=webix.EC,l=h.paddingY||0,m=c/2-l,n=b/2,o=c/2;for("function"!=typeof i&&(i=function(){return i}),g="",f=0;f<j.length;f++)d={},d[k.styleMap.color]=i.call(this,f,a,this.LC),g+=k.getSector({x:n,y:o},m,j[f][0],j[f][1],"webix_sparklines_sector",d);for(e=k.group(g),g="",f=0;f<j.length;f++)g+=k.getSector({x:n,y:o},m,j[f][0],j[f][1],"webix_sparklines_event_area",{webix_area:f});return e+=k.group(g),k.draw(e,b,c,"webix_sparklines_pie_chart"+(h.css?" "+h.css:""))},a.prototype.getAngles=function(a){var b,c,d=-Math.PI/2,e=[],f=this.Wo(a);for(c=0;c<a.length;c++)b=-Math.PI/2+f[c]-1e-4,e.push([d,b]),d=b;return e},a.prototype.Vo=function(a){for(var b=0,c=0;c<a.length;c++)b+=a[c];return b},a.prototype.Wo=function(a){var b,c,d=[],e=0,f=this.Vo(a);for(b=0;b<a.length;b++)c=a[b],d[b]=2*Math.PI*(f?(c+e)/f:1/a.length),e+=c;return d},webix.Sparklines.types.pie=a}(),function(){function a(a){this.config=webix.extend(webix.copy(c),a||{},!0)}function b(a){this.config=webix.extend(webix.copy(d),a||{},!0)}var c={paddingX:3,paddingY:6,radius:2,minHeight:4,eventRadius:8};a.prototype.draw=function(a,b,c){var d=this.config,e="",f=webix.Sparklines.types.line.prototype,g=this.getPoints(a,b,c),h=webix.EC,i=d.color?this.GC(h,d.color):null;e+=h.group(h.getCurve(g,"webix_sparklines_line"+(i?" "+i.line:"")));var j=f.getPoints.call(this,a,b,c);e+=f.HC(h,j,d.radius,"webix_sparklines_item"+(i?" "+i.item:""));var k=Math.min(a.length?(b-2*(d.paddingX||0))/a.length:0,d.eventRadius);return e+=f.IC(h,j,k),h.draw(e,b,c,"webix_sparklines_line_chart"+(d.css?" "+d.css:""))},a.prototype.GC=function(a,b){var c={line:{},item:{}},d=a.styleMap;if(b){c.line[d.lineColor]=b,c.item[d.color]=b;for(var e in c)c[e]=webix.html.createCss(c[e])}return c},a.prototype.getPoints=function(a,b,c){var d,e,f,g,h=[],i=[],j=[],k=webix.Sparklines.types.line.prototype;for(e=k.getPoints.call(this,a,b,c),d=0;d<e.length;d++)i.push(e[d].x),j.push(e[d].y);for(f=this.MC(i),g=this.MC(j),d=0;d<e.length-1;d++)h.push([e[d],{x:f[0][d],y:g[0][d]},{x:f[1][d],y:g[1][d]},e[d+1]]);return h},a.prototype.MC=function(a){var b,c,d=[],e=[],f=[],g=[],h=[],i=[],j=a.length-1;for(d[0]=0,e[0]=2,f[0]=1,g[0]=a[0]+2*a[1],b=1;j-1>b;b++)d[b]=1,e[b]=4,f[b]=1,g[b]=4*a[b]+2*a[b+1];for(d[j-1]=2,e[j-1]=7,f[j-1]=0,g[j-1]=8*a[j-1]+a[j],b=1;j>b;b++)c=d[b]/e[b-1],e[b]=e[b]-c*f[b-1],g[b]=g[b]-c*g[b-1];for(h[j-1]=g[j-1]/e[j-1],b=j-2;b>=0;--b)h[b]=(g[b]-f[b]*h[b+1])/e[b];for(b=0;j-1>b;b++)i[b]=2*a[b+1]-h[b+1];return i[j-1]=.5*(a[j]+h[j-1]),[h,i]},webix.Sparklines.types.spline=a;var d={paddingX:3,paddingY:6,radius:1,minHeight:4,eventRadius:8};b.prototype=webix.copy(a.prototype),b.prototype.draw=function(a,b,c){var d=this.config,e=webix.Sparklines.types.line.prototype,f=webix.EC,g=d.color?this.GC(f,d.color):null,h=this.getPoints(a,b,c),i=h.splice(h.length-3,3),j=f.CC(i);j[0][0]="L";var k=f.DC(h).concat(j),l=f.group(f.getPath(f.definePath(k),"webix_sparklines_area"+(g?" "+g.area:""),!0));l+=f.group(f.getPath(f.definePath(f.DC(h)),"webix_sparklines_line"+(g?" "+g.line:"")));var m=e.getPoints.call(this,a,b,c);l+=e.HC(f,m,d.radius,"webix_sparklines_item"+(g?" "+g.item:""));var n=Math.min(a.length?(b-2*(d.paddingX||0))/a.length:0,d.eventRadius);return l+=e.IC(f,m,n),f.draw(l,b,c,"webix_sparklines_splinearea_chart"+(d.css?" "+d.css:""))},b.prototype.GC=function(a,b){var c={area:{},line:{},item:{}},d=a.styleMap;if(b){c.area[d.color]=a.setOpacity(b,.2),c.line[d.lineColor]=b,c.item[d.color]=b;for(var e in c)c[e]=webix.html.createCss(c[e])}return c},b.prototype.getPoints=function(b,c,d){var e=a.prototype.getPoints.call(this,b,c,d),f=this.config.paddingX||0,g=this.config.paddingY||0;return e.push({x:c-f,y:d-g},{x:f,y:d-g},{x:f,y:e[0][0].y}),e},webix.Sparklines.types.splineArea=b}(),webix.TreeTableClick={},webix.TreeTablePaste={insert:function(a){for(var b=this.getSelectedId(!0,!0),c=0;c<a.length;c++){for(var d={},e=0;e<this.s.columns.length;e++)d[this.s.columns[e].id]=a[c][e]||"";!webix.isUndefined(d.id)&&this.exists(d.id)&&(d.id=webix.uid()),this.add(d,null,b[0])}}},webix.protoUI({name:"treetable",$init:function(){webix.extend(this.data,webix.TreeStore,!0),webix.extend(this.type,webix.TreeType),webix.extend(this,webix.TreeDataMove,!0);for(var a in webix.TreeClick)this.on_click[a]||(this.on_click[a]=this.Vn(webix.TreeClick[a]));this.type.treetable=webix.template("{common.space()}{common.icon()} {common.folder()}"),this.type.treecheckbox=function(a,b){return a.indeterminate&&!a.nocheckbox?"<div class='webix_tree_checkbox webix_indeterminate'></div>":webix.TreeType.checkbox.apply(this,arguments)},this.data.provideApi(this,!0)},$exportView:function(a){return webix.extend(a,{filterHTML:!0}),this},Xg:!1,Vn:function(a){return function(b,c){return c=c.row,a.call(this,b,c)}},getState:function(){var a=webix.DataState.getState.call(this);return webix.extend(a,webix.TreeAPI.getState.call(this)),a},setState:function(a){webix.TreeAPI.setState.call(this,a)&&webix.DataState.setState.call(this,a)},clipboard_setter:function(a){return webix.extend(this.rh,webix.TreeTablePaste),webix.TablePaste.clipboard_setter.call(this,a)},Ik:function(a,b){for(var c=0;c<a.start;c++){var d=this.data.order[c];d&&1!=this.getItem(d).$level&&a.start--}return webix.ui.datatable.prototype.Ik.call(this,a,b)}},webix.TreeAPI,webix.TreeStateCheckbox,webix.TreeDataLoader,webix.ui.datatable),webix.Canvas=webix.proto({$init:function(a){this.Wn=[],this.Xn=a.name,this.tg=webix.toNode(a.container||a);var b=a.width*(window.devicePixelRatio||1),c=a.height*(window.devicePixelRatio||1),d=a.style||"";d+=";width:"+a.width+"px;height:"+a.height+"px;",this.Yn(a.name,d,b,c)},Yn:function(a,b,c,d){return this.Zn=webix.html.create("canvas",{width:c,height:d,canvas_id:a,style:b||""}),this.tg.appendChild(this.Zn),this.Zn.getContext||webix.env.isIE&&(webix.require("legacy/excanvas/excanvas.js",!0),G_vmlCanvasManager.init_(document),G_vmlCanvasManager.initElement(this.Zn)),this.Zn},getCanvas:function(a){var b=(this.Zn||this.Yn(this.w)).getContext(a||"2d");return this.$n||(this.$n=!0,b.scale(window.devicePixelRatio||1,window.devicePixelRatio||1)),b},_n:function(a,b){this.Zn&&(this.Zn.setAttribute("width",a*(window.devicePixelRatio||1)),this.Zn.setAttribute("height",b*(window.devicePixelRatio||1)),this.Zn.style.width=a+"px",this.Zn.style.height=b+"px",this.$n=!1)},renderText:function(a,b,c,d,e){if(c){e&&(e=Math.max(e,0)),b&&(b=Math.max(b,0));var f=webix.html.create("DIV",{"class":"webix_canvas_text"+(d?" "+d:""),style:"left:"+a+"px; top:"+b+"px;"},c);return this.tg.appendChild(f),this.Wn.push(f),e&&(f.style.width=e+"px"),f}},renderTextAt:function(a,b,c,d,e,f,g){var h=this.renderText.call(this,c,d,e,f,g);return h&&(a&&("middle"==a?h.style.top=parseInt(d-h.offsetHeight/2,10)+"px":h.style.top=d-h.offsetHeight+"px"),b&&("left"==b?h.style.left=c-h.offsetWidth+"px":h.style.left=parseInt(c-h.offsetWidth/2,10)+"px")),h},clearCanvas:function(a){var b,c=[];for(b=0;b<this.Wn.length;b++)this.tg.removeChild(this.Wn[b]);if(this.Wn=[],!a&&this.tg.t){for(c=this.ao();c.length;)c[0].parentNode.removeChild(c[0]),c.splice(0,1);c=null,this.tg.t.getElementsByTagName("AREA").length||(this.tg.t.parentNode.removeChild(this.tg.t),this.tg.t=null)}this.getCanvas().clearRect(0,0,this.Zn.offsetWidth,this.Zn.offsetHeight)},toggleCanvas:function(){this.bo("none"==this.Zn.style.display)},showCanvas:function(){this.bo(!0)},hideCanvas:function(){this.bo(!1)},bo:function(a){var b,c;for(c=0;c<this.Wn.length;c++)this.Wn[c].style.display=a?"":"none";if(this.tg.t)for(b=this.ao(),c=0;c<b.length;c++)a?b[c].removeAttribute("disabled"):b[c].setAttribute("disabled","true");this.Zn.style.display=a?"":"none"},ao:function(){var a,b,c=[];for(a=this.tg.t.getElementsByTagName("AREA"),b=0;b<a.length;b++)a[b].getAttribute("userdata")==this.Xn&&c.push(a[b]);return c}}),webix.color={co:["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],toHex:function(a,b){a=parseInt(a,10);for(var c="";a>0;)c=this.co[a%16]+c,a=Math.floor(a/16);for(;c.length<b;)c="0"+c;return c},hexToDec:function(a){return parseInt(a,16)},toRgb:function(a){var b,c,d,e;return"string"!=typeof a?(b=a[0],c=a[1],d=a[2]):-1!=a.indexOf("rgb")?(e=a.substr(a.indexOf("(")+1,a.lastIndexOf(")")-a.indexOf("(")-1).split(","),b=e[0],c=e[1],d=e[2]):("#"==a.substr(0,1)&&(a=a.substr(1)),b=this.hexToDec(a.substr(0,2)),c=this.hexToDec(a.substr(2,2)),d=this.hexToDec(a.substr(4,2))),b=parseInt(b,10)||0,c=parseInt(c,10)||0,d=parseInt(d,10)||0,(0>b||b>255)&&(b=0),(0>c||c>255)&&(c=0),(0>d||d>255)&&(d=0),[b,c,d]},hsvToRgb:function(a,b,c){var d,e,f,g,h,i,j,k;switch(d=Math.floor(a/60)%6,e=a/60-d,f=c*(1-b),g=c*(1-e*b),h=c*(1-(1-e)*b),i=0,j=0,k=0,d){case 0:i=c,j=h,k=f;break;case 1:i=g,j=c,k=f;break;case 2:i=f,j=c,k=h;break;case 3:i=f,j=g,k=c;break;case 4:i=h,j=f,k=c;break;case 5:i=c,j=f,k=g}return i=Math.floor(255*i),j=Math.floor(255*j),k=Math.floor(255*k),[i,j,k]},rgbToHsv:function(a,b,c){var d,e,f,g,h,i,j,k;return d=a/255,e=b/255,f=c/255,g=Math.min(d,e,f),h=Math.max(d,e,f),j=0,i=0===h?0:1-g/h,k=h,h==g?j=0:h==d&&e>=f?j=60*(e-f)/(h-g)+0:h==d&&f>e?j=60*(e-f)/(h-g)+360:h==e?j=60*(f-d)/(h-g)+120:h==f&&(j=60*(d-e)/(h-g)+240),[j,i,k]}},webix.HtmlMap=webix.proto({$init:function(a){this.ad="map_"+webix.uid(),this.U=a,this.eo=[],this.sA=[]},addRect:function(a,b,c){this.fo(a,"RECT",b,c)},addPoly:function(a,b,c){this.fo(a,"POLY",b,c)},fo:function(a,b,c,d){var e="";4==arguments.length&&(e="userdata='"+d+"'"),this.eo.push("<area "+this.U+"='"+a+"' shape='"+b+"' coords='"+c.join()+"' "+e+"></area>"),this.sA.push({index:d,points:c})},addSector:function(a,b,c,d,e,f,g,h){var i=[];i.push(d),i.push(Math.floor(e*g));for(var j=b;c>j;j+=Math.PI/18)i.push(Math.floor(d+f*Math.cos(j))),i.push(Math.floor((e+f*Math.sin(j))*g));return i.push(Math.floor(d+f*Math.cos(c))),i.push(Math.floor((e+f*Math.sin(c))*g)),i.push(d),i.push(Math.floor(e*g)),this.addPoly(a,i,h)},render:function(a){var b=webix.html.create("DIV");b.style.cssText="position:absolute; width:100%; height:100%; top:0px; left:0px;",a.appendChild(b);var c=webix.env.isIE?"":"src='data:image/gif;base64,R0lGODlhEgASAIAAAP///////yH5BAUUAAEALAAAAAASABIAAAIPjI+py+0Po5y02ouz3pwXADs='";b.innerHTML="<map id='"+this.ad+"' name='"+this.ad+"'>"+this.eo.join("\n")+"</map><img "+c+" class='webix_map_img' usemap='#"+this.ad+"'>",a.t=b,this.eo=[]}}),webix.protoUI({name:"chart",$init:function(a){if(this.go=[this.s],this.ho=[],this.w.className+=" webix_chart",this.$ready.push(this.Mi),a.preset&&this.io(a),a.series){var b=a.series;delete a.series,a.series=b}this.attachEvent("onMouseMove",this.tA),this.data.provideApi(this,!0)},Mi:function(){this.data.attachEvent("onStoreUpdated",webix.bind(function(){this.render()},this))},defaults:{color:"default",alpha:"1",label:!1,value:"{obj.value}",padding:{},type:"pie",lineColor:"#ffffff",cant:.5,barWidth:30,line:{width:2,color:"#1293f8"},item:{radius:3,borderColor:"#636363",borderWidth:1,color:"#ffffff",alpha:1,type:"r",shadow:!1},shadow:!0,gradient:!1,border:!0,labelOffset:20,origin:"auto",scale:"linear"},ad:"webix_area_id",on_click:{webix_chart_legend_item:function(a,b,c){var d=c.getAttribute("series_id");if(this.callEvent("onLegendClick",[a,d,c])){var e=this.s,f=e.legend.values,g=f&&f[d].toggle||e.legend.toggle;"undefined"!=typeof d&&this.go.length>1&&g&&(-1!=c.className.indexOf("hidden")?this.showSeries(d):this.hideSeries(d))}}},on_dblclick:{},on_mouse_move:{},locate:function(a){return webix.html.locate(a,this.ad)},$setSize:function(a,b){if(webix.ui.view.prototype.$setSize.call(this,a,b)){for(var c in this.canvases)this.canvases[c]._n(this.bc,this.dc);this.render()}},type_setter:function(a){return"undefined"==typeof this.s.offset&&(this.s.offset=!("area"==a||"stackedArea"==a)),"radar"!=a||this.s.yAxis||this.define("yAxis",{}),"scatter"==a&&(this.s.yAxis||this.define("yAxis",{}),this.s.xAxis||this.define("xAxis",{})),a},destructor:function(){this.removeAllSeries(),webix.Destruction.destructor.apply(this,arguments)},removeAllSeries:function(){this.clearCanvas(),this.ko&&(this.ko.innerHTML="",this.ko.parentNode.removeChild(this.ko),this.ko=null),this.canvases&&(this.canvases={}),this.w.innerHTML="";for(var a=0;a<this.go.length;a++)this.go[a].tooltip&&this.go[a].tooltip.destructor();this.go=[]},clearCanvas:function(){if(this.canvases&&"object"==typeof this.canvases)for(var a in this.canvases)this.canvases[a].clearCanvas()},render:function(){var a,b,c,d,e;if(this.isVisible(this.s.id)&&this.callEvent("onBeforeRender",[this.data])){if(this.canvases&&"object"==typeof this.canvases)for(b in this.canvases)this.canvases[b].clearCanvas();else this.canvases={};if(this.s.legend&&(this.canvases.legend||(this.canvases.legend=this.lo("legend")),this.mo(this.data.getRange(),this.bc,this.dc)),a=this.no(this.bc,this.dc),this.eo=d=new webix.HtmlMap(this.ad),e=this.s,this.go)for(c=this.oo(),b=0;b<this.go.length;b++)this.s=this.go[b],this.canvases[b]||(this.canvases[b]=this.lo(b,"z-index:"+(2+b))),this["$render_"+this.s.type](this.canvases[b].getCanvas(),c,a.start,a.end,b,d);d.render(this.w),this.w.lastChild.style.zIndex=100,this.po(this.w.lastChild,a),this.callEvent("onAfterRender",[]),this.s=e}},po:function(a,b){var c={};c.left=b.start.x,c.top=b.start.y,c.width=b.end.x-b.start.x,c.height=b.end.y-b.start.y;for(var d in c)a.style[d]=c[d]+"px"},oo:function(){var a,b,c,d,e,f,g,h,i,j;if(d=this.data.getRange(),a=-1!=this.s.type.toLowerCase().indexOf("barh")?"yAxis":"xAxis",b=this.s[a],b&&b.units&&"object"==typeof b.units){if(c=b.units,h=[],"undefined"!=typeof c.start&&"undefined"!=typeof c.end&&"undefined"!=typeof c.next)for(g=c.start;g<=c.end;)h.push(g),g=c.next.call(this,g);else"[object Array]"===Object.prototype.toString.call(c)&&(h=c);if(f=[],h.length){for(i=b.value,j={},e=0;e<d.length;e++)j[i(d[e])]=e;for(e=0;e<h.length;e++)"undefined"!=typeof j[h[e]]?(d[j[h[e]]].$unit=h[e],f.push(d[j[h[e]]])):f.push({$unit:h[e]})}return f}return d},series_setter:function(a){if("object"!=typeof a);else{this.e(a.length?a[0]:a),this.go=[this.s];for(var b=1;b<a.length;b++)this.addSeries(a[b])}return a},value_setter:webix.template,xValue_setter:webix.template,yValue_setter:function(a){this.define("value",a)},alpha_setter:webix.template,label_setter:webix.template,lineColor_setter:webix.template,borderColor_setter:webix.template,pieInnerText_setter:webix.template,gradient_setter:function(a){return"function"!=typeof a&&a&&a===!0&&(a="light"),a},colormap:{RAINBOW:function(a){var b=Math.floor(this.getIndexById(a.id)/this.count()*1536);return 1536==b&&(b-=1),this.qo[Math.floor(b/256)](b%256)},"default":function(a){var b=this.count(),c=this.qC.length,d=this.getIndexById(a.id);return c>b?(d&&(d=c-b>d?this.rC+2:this.rC+1),this.rC=d):d%=c,this.qC[d]}},color_setter:function(a){return this.colormap[a]||webix.template(a)},fill_setter:function(a){return!(!a||"0"==a)&&webix.template(a)},io:function(a){this.define("preset",a.preset),delete a.preset},preset_setter:function(a){var b,c,d;if(this.defaults=webix.extend({},this.defaults),d=this.presets[a],"object"==typeof d){for(b in d)if("object"==typeof d[b])if(this.defaults[b]&&"object"==typeof this.defaults[b]){this.defaults[b]=webix.extend({},this.defaults[b]);for(c in d[b])this.defaults[b][c]=d[b][c]}else this.defaults[b]=webix.extend({},d[b]);else this.defaults[b]=d[b];return a}return!1},legend_setter:function(a){return a?("object"!=typeof a&&(a={template:a}),this.E(a,{width:150,height:18,layout:"y",align:"left",valign:"bottom",template:"",toggle:-1!=this.s.type.toLowerCase().indexOf("stacked")?"":"hide",marker:{type:"square",width:15,height:15,radius:3},margin:4,padding:3}),a.template=webix.template(a.template),a):(this.ko&&(this.ko.innerHTML="",this.ko=null),!1)},item_setter:function(a){"object"!=typeof a&&(a={color:a,borderColor:a}),this.E(a,webix.extend({},this.defaults.item));var b=["alpha","borderColor","color","radius"];return this.ro(b,a),a},line_setter:function(a){return"object"!=typeof a&&(a={color:a}),a=webix.extend(a,this.defaults.line),a.color=webix.template(a.color),a},padding_setter:function(a){return"object"!=typeof a&&(a={left:a,right:a,top:a,bottom:a}),this.E(a,{left:50,right:20,top:35,bottom:40}),a},xAxis_setter:function(a){if(!a)return!1;"object"!=typeof a&&(a={template:a}),this.E(a,{title:"",color:"#000000",lineColor:"#cfcfcf",template:"{obj}",lines:!0});var b=["lineColor","template","lines"];return this.ro(b,a),this.so=webix.extend({},a),a},yAxis_setter:function(a){this.E(a,{title:"",color:"#000000",lineColor:"#cfcfcf",template:"{obj}",lines:!0,bg:"#ffffff"});var b=["lineColor","template","lines","bg"];return this.ro(b,a),this.to=webix.extend({},a),a},ro:function(a,b){for(var c=0;c<a.length;c++)b[a[c]]=webix.template(b[a[c]])},lo:function(a,b,c){return new webix.Canvas({container:c||this.w,name:a,style:b||"",width:this.bc,height:this.dc})},uo:function(a,b,c,d,e,f){var g=0;return this.s.yAxis&&(this.canvases.y||(this.canvases.y=this.lo("axis_y")),g=this.vo(this.canvases.y.getCanvas(),a,b,c,d,e)),this.s.xAxis&&(this.canvases.x||(this.canvases.x=this.lo("axis_x")),this.wo(this.canvases.x.getCanvas(),a,b,c,f,g)),g},wo:function(a,b,c,d,e,f){for(var g,h=c.x-.5,i=parseInt(f?f:d.y,10)+.5,j=d.x,k=!0,l="stackedBar"==this.s.type?d.y+.5:i,m=0;m<b.length;m++){this.s.offset===!0?g=h+e/2+m*e:(g=m==b.length-1?d.x:h+m*e,k=!!m),g=Math.ceil(g)-.5;var n="auto"!=this.s.origin&&"bar"==this.s.type&&parseFloat(this.s.value(b[m]))<this.s.origin;this.xo(g,l,b[m],k,n),(this.s.offset||m)&&this.s.xAxis.lines.call(this,b[m])&&this.yo(a,g,d.y,c.y,b[m])}this.canvases.x.renderTextAt(!0,!1,h,d.y+this.s.padding.bottom-3,this.s.xAxis.title,"webix_axis_title_x",d.x-c.x),this.zo(a,h,i,j,i,this.s.xAxis.color,1),this.s.xAxis.lines.call(this,{})&&this.s.offset&&this.zo(a,j+.5,d.y,j+.5,c.y+.5,this.s.xAxis.color,.2)},vo:function(a,b,c,d,e,f){var g,h={};if(this.s.yAxis){var i=c.x-.5,j=d.y,k=c.y,l=d.y+.5;if(this.s.yAxis.step&&(g=parseFloat(this.s.yAxis.step)),"undefined"==typeof this.to.step||"undefined"==typeof this.to.start||"undefined"==typeof this.to.end?(h=this.Ao(e,f),e=h.start,f=h.end,g=h.step,this.s.yAxis.end=f,this.s.yAxis.start=e):"logarithmic"==this.config.scale&&(this.Bo=!0),this.Co(c,d),0!==g){if(f==e)return j;for(var m=(j-k)*g/(f-e),n=0,o=e;f>=o;o+=g){var p=this.Bo?Math.pow(10,o):o;h.fixNum&&(p=parseFloat(p).toFixed(h.fixNum));var q=Math.floor(j-n*m)+.5;if(o==e&&"auto"==this.s.origin||!this.s.yAxis.lines.call(this,o)||this.zo(a,i,q,d.x,q,this.s.yAxis.lineColor.call(this,o),1),o==this.s.origin&&(l=q),1>g&&!this.Bo){var r=Math.min(Math.floor(this.Do(g)),0>=e?0:Math.floor(this.Do(e))),s=Math.pow(10,-r);p=Math.round(p*s)/s,o=p}this.canvases.y.renderText(0,q-5,this.s.yAxis.template(p.toString()),"webix_axis_item_y",c.x-5),n++}return this.zo(a,i,j+1,i,k,this.s.yAxis.color,1),l}}},Co:function(a,b){var c="webix_axis_title_y"+(webix.Eo&&9!=webix.Eo?" webix_ie_filter":""),d=this.canvases.y.renderTextAt("middle",!1,0,parseInt((b.y-a.y)/2+a.y,10),this.s.yAxis.title,c);d&&(d.style.left=(webix.env.transform?(d.offsetHeight-d.offsetWidth)/2:0)+"px")},Fo:function(a,b){var c=Math.floor(this.Do(a)),d=Math.ceil(this.Do(b));return{start:c,step:1,end:d}},Ao:function(a,b){if(this.Bo=!1,"logarithmic"==this.s.scale){var c=Math.floor(this.Do(a)),d=Math.ceil(this.Do(b));if(a>0&&b>0&&d-c>1)return this.Bo=!0,this.Fo(a,b)}"auto"!=this.s.origin&&this.s.origin<a&&(a=this.s.origin);var e,f,g;e=(b-a)/8||1;var h=Math.floor(this.Do(e)),i=Math.pow(10,h),j=e/i;if(j=j>5?10:5,e=parseInt(j,10)*i,e>Math.abs(a))f=0>a?-e:0;else{var k=Math.abs(a),l=Math.floor(this.Do(k)),m=k/Math.pow(10,l);for(f=Math.ceil(10*m)/10*Math.pow(10,l)-e,k>1&&e>.1&&(f=Math.ceil(f));0>a?a>=f:f>=a;)f-=e;0>a&&(f=-f-2*e)}for(g=f;b>g;)g+=e,g=parseFloat((1*g).toFixed(Math.abs(h)));return{start:f,end:g,step:e,fixNum:0>h?Math.abs(h):0}},Go:function(a,b){var c,d,e=this.data.Df(),f=arguments.length&&"h"==a?this.so:this.to;if(b=b||"value",f&&"undefined"!=typeof f.end&&"undefined"!=typeof f.start&&f.step)c=parseFloat(f.end),d=parseFloat(f.start);else if(c=webix.GroupMethods.max(this.go[0][b],e),d=f&&"undefined"!=typeof f.start?parseFloat(f.start):webix.GroupMethods.min(this.go[0][b],e),this.go.length>1)for(var g=1;g<this.go.length;g++){var h=webix.GroupMethods.max(this.go[g][b],e),i=webix.GroupMethods.min(this.go[g][b],e);h>c&&(c=h),d>i&&(d=i)}return{max:c,min:d}},Do:function(a){var b="log";return Math[b](a)/Math.LN10},xo:function(a,b,c,d,e){if(this.s.xAxis){var f=this.canvases.x.renderTextAt(e,d,a,b-(e?2:0),this.s.xAxis.template(c));f&&(f.className+=" webix_axis_item_x")}},yo:function(a,b,c,d,e){this.s.xAxis&&this.s.xAxis.lines&&this.zo(a,b,c,b,d,this.s.xAxis.lineColor.call(this,e),1)},zo:function(a,b,c,d,e,f,g){a.strokeStyle=f,a.lineWidth=g,a.beginPath(),a.moveTo(b,c),a.lineTo(d,e),a.stroke(),a.lineWidth=1},Ho:function(a,b){var c,d=1;return c=b!=a?b-a:a,[c,d]},qo:[function(a){return"#FF"+webix.color.toHex(a/2,2)+"00"},function(a){return"#FF"+webix.color.toHex(a/2+128,2)+"00"},function(a){return"#"+webix.color.toHex(255-a,2)+"FF00"},function(a){return"#00FF"+webix.color.toHex(a,2)},function(a){return"#00"+webix.color.toHex(255-a,2)+"FF"},function(a){return"#"+webix.color.toHex(a,2)+"00FF"}],qC:["#f55b50","#ff6d3f","#ffa521","#ffc927","#ffee54","#d3e153","#9acb61","#63b967","#21a497","#21c5da","#3ea4f5","#5868bf","#7b53c0","#a943ba","#ec3b77","#9eb0b8"],rC:0,addSeries:function(a){var b=webix.extend({},this.s);this.s=webix.extend({},b),this.e(a,{}),this.go.push(this.s),this.s=b},tA:function(a,b,c){var d;if(c.getAttribute("userdata")&&(this.Io=1==this.go.length?c.getAttribute("userdata"):this.uA(b),this.go[this.Io])){for(var e=0;e<this.go.length;e++)d=this.go[e].tooltip,d&&d.disable();c.getAttribute("disabled")||(d=this.go[this.Io].tooltip,d&&d.enable())}},uA:function(a){var b,c,d,e,f,g,h,i;for(c=this.eo.sA,e=webix.html.offset(this.w.t),f=webix.html.pos(a),h=f.x-e.x,i=f.y-e.y,d=0;d<c.length;d++)b=c[d].points,h<=b[2]&&h>=b[0]&&i<=b[3]&&i>=b[1]&&(g?c[d].index>g.index&&(g=c[d]):g=c[d]);return g?g.index:0},hideSeries:function(a){this.canvases[a].hideCanvas();var b=this.s.legend;b&&b.values&&b.values[a]&&(b.values[a].$hidden=!0,this.mo())},showSeries:function(a){this.canvases[a].showCanvas();var b=this.s.legend;b&&b.values&&b.values[a]&&(delete b.values[a].$hidden,this.mo())},mo:function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n=0,o=0;if(a=a||[],b=b||this.bc,j=this.canvases.legend.getCanvas(),
d=this.s.legend,i="x"!=this.s.legend.layout?"width:"+d.width+"px":"",this.ko&&(this.ko.innerHTML="",this.ko.parentNode.removeChild(this.ko)),this.canvases.legend.clearCanvas(!0),e=webix.html.create("DIV",{"class":"webix_chart_legend",style:"left:"+n+"px; top:"+o+"px;"+i},""),d.padding&&(e.style.padding=d.padding+"px"),this.ko=e,this.w.appendChild(e),g=[],d.values)for(c=0;c<d.values.length;c++)g.push(this.Jo(e,d.values[c].text,"undefined"!=typeof d.values[c].id?typeof d.values[c].id:c,d.values[c].$hidden));else for(c=0;c<a.length;c++)g.push(this.Jo(e,d.template(a[c])));for(0===e.offsetWidth&&(e.style.width="auto"),h=e.offsetWidth,f=e.offsetHeight,b>h&&("x"==d.layout&&"center"==d.align&&(n=(b-h)/2),"right"==d.align&&(n=b-h),d.margin&&"center"!=d.align&&(n+=("left"==d.align?1:-1)*d.margin)),f<this.dc&&("middle"==d.valign&&"center"!=d.align&&"x"!=d.layout?o=(this.dc-f)/2:"bottom"==d.valign&&(o=this.dc-f),d.margin&&"middle"!=d.valign&&(o+=("top"==d.valign?1:-1)*d.margin)),e.style.left=n+"px",e.style.top=o+"px",j.save(),c=0;c<g.length;c++)m=g[c],d.values&&d.values[c].$hidden?(l=!0,k=d.values[c].disableColor?d.values[c].disableColor:"#d9d9d9"):(l=!1,k=d.values?d.values[c].color:this.s.color.call(this,a[c])),this.Ko(j,m.offsetLeft+n,m.offsetTop+o,k,m.offsetHeight,l,c);j.restore(),g=null},Jo:function(a,b,c,d){var e="";"x"==this.s.legend.layout&&(e="float:left;");var f=webix.html.create("DIV",{style:e+"padding-left:"+(10+this.s.legend.marker.width)+"px","class":"webix_chart_legend_item"+(d?" hidden":"")},b);return arguments.length>2&&f.setAttribute("series_id",c),a.appendChild(f),f},Ko:function(a,b,c,d,e,f,g){var h=[],i=this.s.legend.marker,j=this.s.legend.values,k=j&&j[g].markerType?j[g].markerType:i.type;if(d&&(a.strokeStyle=a.fillStyle=d),"round"!=k&&i.radius)if("item"==k){if(this.s.line&&"scatter"!=this.s.type&&!this.s.disableLines){a.beginPath(),a.lineWidth=this.go[g].line.width,a.strokeStyle=f?d:this.go[g].line.color.call(this,{});var l=b+5,m=c+e/2;a.moveTo(l,m);var n=l+i.width;a.lineTo(n,m),a.stroke()}var o=this.go[g].item,p=parseInt(o.radius.call(this,{}),10)||0;p&&(a.beginPath(),f?(a.lineWidth=o.borderWidth,a.strokeStyle=d,a.fillStyle=d):(a.lineWidth=o.borderWidth,a.fillStyle=o.color.call(this,{}),a.strokeStyle=o.borderColor.call(this,{}),a.globalAlpha=o.alpha.call(this,{})),a.beginPath(),b+=i.width/2+5,c+=e/2,this.Lo(a,b,c,p+1,o.type),a.fill(),a.stroke()),a.globalAlpha=1}else a.beginPath(),a.lineWidth=1,b+=5,c+=e/2-i.height/2,h=[[b+i.radius,c+i.radius,i.radius,Math.PI,3*Math.PI/2,!1],[b+i.width-i.radius,c],[b+i.width-i.radius,c+i.radius,i.radius,-Math.PI/2,0,!1],[b+i.width,c+i.height-i.radius],[b+i.width-i.radius,c+i.height-i.radius,i.radius,0,Math.PI/2,!1],[b+i.radius,c+i.height],[b+i.radius,c+i.height-i.radius,i.radius,Math.PI/2,Math.PI,!1],[b,c+i.radius]],this.Mo(a,h),a.stroke(),a.fill();else{a.beginPath(),a.lineWidth=i.height,a.lineCap=i.type,b+=a.lineWidth/2+5,c+=e/2,a.moveTo(b,c);var n=b+i.width-i.height+1;a.lineTo(n,c),a.stroke(),a.fill()}},no:function(a,b){var c,d,e,f;if(c=this.s.padding.left,d=this.s.padding.top,e=a-this.s.padding.right,f=b-this.s.padding.bottom,this.s.legend){var g=this.s.legend,h=this.s.legend.width,i=this.s.legend.height;"x"==g.layout?"center"==g.valign?"right"==g.align?e-=h:"left"==g.align&&(c+=h):"bottom"==g.valign?f-=i:d+=i:"right"==g.align?e-=h:"left"==g.align&&(c+=h)}return{start:{x:c,y:d},end:{x:e,y:f}}},No:function(a){var b,c,d,e,f;if(this.s.yAxis&&"undefined"!=typeof this.s.yAxis.end&&"undefined"!=typeof this.s.yAxis.start&&this.s.yAxis.step)d=parseFloat(this.s.yAxis.end),e=parseFloat(this.s.yAxis.start);else{for(b=0;b<a.length;b++)for(a[b].$sum=0,a[b].$min=1/0,c=0;c<this.go.length;c++)f=parseFloat(this.go[c].value(a[b])||0),isNaN(f)||(-1!=this.go[c].type.toLowerCase().indexOf("stacked")&&(a[b].$sum+=f),f<a[b].$min&&(a[b].$min=f));for(d=-(1/0),e=1/0,b=0;b<a.length;b++)a[b].$sum>d&&(d=a[b].$sum),a[b].$min<e&&(e=a[b].$min);e>0&&(e=0)}return{max:d,min:e}},Oo:function(a,b,c,d,e,f,g,h){var i,j,k,l,m,n;return"light"==f?(i="x"==h?a.createLinearGradient(b,c,d,c):a.createLinearGradient(b,c,b,e),n=[[0,"#FFFFFF"],[.9,g],[1,g]],j=2):"falling"==f||"rising"==f?(i="x"==h?a.createLinearGradient(b,c,d,c):a.createLinearGradient(b,c,b,e),k=webix.color.toRgb(g),l=webix.color.rgbToHsv(k[0],k[1],k[2]),l[1]*=.5,m="rgb("+webix.color.hsvToRgb(l[0],l[1],l[2])+")","falling"==f?n=[[0,m],[.7,g],[1,g]]:"rising"==f&&(n=[[0,g],[.3,g],[1,m]]),j=0):(a.globalAlpha=.37,j=0,i="x"==h?a.createLinearGradient(b,e,b,c):a.createLinearGradient(b,c,d,c),n=[[0,"#9d9d9d"],[.3,"#e8e8e8"],[.45,"#ffffff"],[.55,"#ffffff"],[.7,"#e8e8e8"],[1,"#9d9d9d"]]),this.Po(i,n),{gradient:i,offset:j}},Qo:function(a,b,c,d){return a*=-1,b+=Math.cos(a)*d,c-=Math.sin(a)*d,{x:b,y:c}},Po:function(a,b){for(var c=0;c<b.length;c++)a.addColorStop(b[c][0],b[c][1])},Mo:function(a,b){var c,d;for(c=0;c<b.length;c++)d=c?"lineTo":"moveTo",b[c].length>2&&(d="arc"),a[d].apply(a,b[c])},Ro:function(a,b,c,d,e){a.addRect(b,[c[0].x-d.x,c[0].y-d.y,c[1].x-d.x,c[1].y-d.y],e)}},webix.Group,webix.AutoTooltip,webix.DataLoader,webix.MouseEvents,webix.EventSystem,webix.ui.view),webix.extend(webix.ui.chart,{$render_pie:function(a,b,c,d,e,f){this.So(a,b,c,d,1,f,e)},So:function(a,b,c,d,e,f,g){if(b.length){var h=this.To(c,d),i=this.s.radius?this.s.radius:h.radius;if(!(0>i)){var j=this.Uo(b),k=this.Vo(j),l=this.Wo(j,k),m=this.s.x?this.s.x:h.x,n=this.s.y?this.s.y:h.y;1==e&&this.s.shadow&&this.Xo(a,m,n,i),n/=e;var o=-Math.PI/2,p=[];if(a.scale(1,e),this.s.gradient){var q=1!=e?m+i/3:m,r=1!=e?n+i/3:n;this.Yo(a,m,n,i,q,r)}for(var s=0;s<b.length;s++)if(j[s]){a.strokeStyle=this.s.lineColor.call(this,b[s]),a.beginPath(),a.moveTo(m,n),p.push(o);var t=-Math.PI/2+l[s]-1e-4;a.arc(m,n,i,o,t,!1),a.lineTo(m,n);var u=this.s.color.call(this,b[s]);a.fillStyle=u,a.fill(),this.s.pieInnerText&&this.Zo(m,n,5*i/6,o,t,e,this.s.pieInnerText(b[s],k),!0),this.s.label&&this.Zo(m,n,i+this.s.labelOffset,o,t,e,this.s.label(b[s])),1!=e&&(this.$o(a,m,n,o,t,i,!0),a.fillStyle="#000000",a.globalAlpha=.2,this.$o(a,m,n,o,t,i,!1),a.globalAlpha=1,a.fillStyle=u),f.addSector(b[s].id,o,t,m-c.x,n-c.y/e,i,e,g),o=t}a.globalAlpha=.8;var v;for(s=0;s<p.length;s++)v=this.Qo(p[s],m,n,i),this.zo(a,m,n,v.x,v.y,this.s.lineColor.call(this,b[s]),2);1==e&&(a.lineWidth=2,a.strokeStyle="#ffffff",a.beginPath(),a.arc(m,n,i+1,0,2*Math.PI,!1),a.stroke()),a.globalAlpha=1,a.scale(1,1/e)}}},Uo:function(a){for(var b=[],c=0;c<a.length;c++)b.push(parseFloat(this.s.value(a[c])||0));return b},Vo:function(a){for(var b=0,c=0;c<a.length;c++)b+=a[c];return b},Wo:function(a,b){var c,d=[],e=0;b=b||this.Vo(a);for(var f=0;f<a.length;f++)c=a[f],d[f]=2*Math.PI*(b?(c+e)/b:1/a.length),e+=c;return d},To:function(a,b){var c=b.x-a.x,d=b.y-a.y,e=a.x+c/2,f=a.y+d/2,g=Math.min(c/2,d/2);return{x:e,y:f,radius:g}},$o:function(a,b,c,d,e,f,g){if(a.lineWidth=1,0>=d&&e>=0||d>=0&&e<=Math.PI||Math.abs(d-Math.PI)>.003&&d<=Math.PI&&e>=Math.PI){0>=d&&e>=0&&(d=0,g=!1,this._o(a,b,c,f,d,e)),d<=Math.PI&&e>=Math.PI&&(e=Math.PI,g=!1,this._o(a,b,c,f,d,e));var h=(this.s.pieHeight||Math.floor(f/4))/this.s.cant;a.beginPath(),a.arc(b,c,f,d,e,!1),a.lineTo(b+f*Math.cos(e),c+f*Math.sin(e)+h),a.arc(b,c+h,f,e,d,!0),a.lineTo(b+f*Math.cos(d),c+f*Math.sin(d)),a.fill(),g&&a.stroke()}},_o:function(a,b,c,d,e,f){a.beginPath(),a.arc(b,c,d,e,f,!1),a.stroke()},Xo:function(a,b,c,d){a.globalAlpha=.5;for(var e=["#c4c4c4","#c6c6c6","#cacaca","#dcdcdc","#dddddd","#e0e0e0","#eeeeee","#f5f5f5","#f8f8f8"],f=e.length-1;f>-1;f--)a.beginPath(),a.fillStyle=e[f],a.arc(b+1,c+1,d+f,0,2*Math.PI,!0),a.fill();a.globalAlpha=1},ap:function(a){return a.addColorStop(0,"#ffffff"),a.addColorStop(.7,"#7a7a7a"),a.addColorStop(1,"#000000"),a},Yo:function(a,b,c,d,e,f){a.beginPath();var g;"function"!=typeof this.s.gradient?(g=a.createRadialGradient(e,f,d/4,b,c,d),g=this.ap(g)):g=this.s.gradient(g),a.fillStyle=g,a.arc(b,c,d,0,2*Math.PI,!0),a.fill(),a.globalAlpha=.7},Zo:function(a,b,c,d,e,f,g,h){var i=this.canvases[0].renderText(0,0,g,0,1);if(i){var j=i.scrollWidth;i.style.width=j+"px",j>a&&(j=a);var k=.2>e-d?4:8;h&&(k=j/1.8);var l=d+(e-d)/2;c-=(k-8)/2;var m=-k,n=-8,o="right";(l>=Math.PI/2&&l<Math.PI||l<=3*Math.PI/2&&l>=Math.PI)&&(m=-j-m+1,o="left");var p=0;!h&&1>f&&l>0&&l<Math.PI&&(p=(this.s.height||Math.floor(c/4))/f);var q=(b+Math.floor((c+p)*Math.sin(l)))*f+n,r=a+Math.floor((c+k/2)*Math.cos(l))+m,s=e<Math.PI/2+.01,t=d<Math.PI/2;t&&s?r=Math.max(r,a+3):t||s?!h&&(l>=Math.PI/2&&l<Math.PI||l<=3*Math.PI/2&&l>=Math.PI)&&(r+=j/3):r=Math.min(r,a-j),i.style.top=q+"px",i.style.left=r+"px",i.style.width=j+"px",i.style.textAlign=o,i.style.whiteSpace="nowrap"}},$render_pie3D:function(a,b,c,d,e,f){this.So(a,b,c,d,this.s.cant,f)},$render_donut:function(a,b,c,d,e,f){if(b.length){this.So(a,b,c,d,1,f,e);var g=this.s,h=this.To(c,d),i=g.radius?g.radius:h.radius,j=g.innerRadius&&g.innerRadius<i?g.innerRadius:i/3,k=g.x?g.x:h.x,l=g.y?g.y:h.y;a.fillStyle="#ffffff",a.beginPath(),a.arc(k,l,j,0,2*Math.PI,!0),a.fill()}}}),webix.extend(webix.ui.chart,{$render_bar:function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s,t=d.y-c.y;s=!!this.s.yAxis,r=!!this.s.xAxis,j=this.Go(),k=j.max,l=j.min,h=(d.x-c.x)/b.length,e||"auto"!=this.s.origin&&!s||this.uo(b,c,d,l,k,h),s&&(k=parseFloat(this.s.yAxis.end),l=parseFloat(this.s.yAxis.start)),o=this.Ho(l,k),m=o[0],n=o[1],q=m?t/m:m,s||"auto"!=this.s.origin&&r||(p=10,q=m?(t-p)/m:p),!e&&"auto"!=this.s.origin&&!s&&this.s.origin>l&&this.wo(a,b,c,d,h,d.y-q*(this.s.origin-l)),g=parseInt(this.s.barWidth,10);var u=0,v=0;for(i=0;i<this.go.length;i++)i==e&&(v=u),"bar"==this.go[i].type&&u++;this.go&&g*u+4>h&&(g=parseInt(h/u-4,10));var w=(h-g*u)/2,x="undefined"!=typeof this.s.radius?parseInt(this.s.radius,10):Math.round(g/5),y=!1,z=this.s.gradient;for(z&&"function"!=typeof z?(y=z,z=!1):z&&(z=a.createLinearGradient(0,d.y,0,c.y),this.s.gradient(z)),r||this.zo(a,c.x,d.y+.5,d.x,d.y+.5,"#000000",1),i=0;i<b.length;i++){var A=parseFloat(this.s.value(b[i])||0);if(this.Bo&&(A=this.Do(A)),!isNaN(A)){A>k&&(A=k),A-=l,A*=n;var B=c.x+w+i*h+(g+1)*v,C=d.y;if(0>A||this.s.yAxis&&0===A&&!("auto"!=this.s.origin&&this.s.origin>l))this.canvases[e].renderTextAt(!0,!0,B+Math.floor(g/2),C,this.s.label(b[i]));else{s||"auto"!=this.s.origin&&r||(A+=p/q);var D=z||this.s.color.call(this,b[i]);a.globalAlpha=this.s.alpha.call(this,b[i]);var E=this.bp(a,c,B,C,g,l,x,q,A,D,z,y);y&&this.cp(a,B,C,g,l,x,q,A,D,y),this.s.border&&this.dp(a,B,C,g,l,x,q,A,D),a.globalAlpha=1,E[0]!=B?this.canvases[e].renderTextAt(!1,!0,B+Math.floor(g/2),E[1],this.s.label(b[i])):this.canvases[e].renderTextAt(!0,!0,B+Math.floor(g/2),E[3],this.s.label(b[i])),f.addRect(b[i].id,[B-c.x,E[3]-c.y,E[2]-c.x,E[1]-c.y],e)}}}},ep:function(a,b,c,d,e,f,g){var h=this.s.xAxis,i=c;return h&&"auto"!=this.s.origin&&this.s.origin>g&&(c-=(this.s.origin-g)*e,i=c,d-=this.s.origin-g,0>d&&(d*=-1,a.translate(b+f,c),a.rotate(Math.PI),b=0,c=0),c-=.5),{value:d,x0:b,y0:c,start:i}},bp:function(a,b,c,d,e,f,g,h,i,j,k,l){a.save(),a.fillStyle=j;var m=this.ep(a,c,d,i,h,e,f),n=this.fp(a,m.x0,m.y0,e,g,h,m.value,this.s.border?1:0);k&&!l&&a.lineTo(m.x0+(this.s.border?1:0),b.y),a.fill(),a.restore();var o=m.x0,p=m.x0!=c?c+n[0]:n[0],q=m.x0!=c?m.start-n[1]-m.y0:m.y0,r=m.x0!=c?m.start-m.y0:n[1];return[o,q,p,r]},gp:function(a,b){var c,d;d=webix.color.toRgb(b),c=webix.color.rgbToHsv(d[0],d[1],d[2]),c[2]/=1.4,b="rgb("+webix.color.hsvToRgb(c[0],c[1],c[2])+")",a.strokeStyle=b,1==a.globalAlpha&&(a.globalAlpha=.9)},dp:function(a,b,c,d,e,f,g,h,i){var j;a.save(),j=this.ep(a,b,c,h,g,d,e),this.gp(a,i),this.fp(a,j.x0,j.y0,d,f,g,j.value,a.lineWidth/2,1),a.stroke(),a.restore()},cp:function(a,b,c,d,e,f,g,h,i,j){a.save();var k=this.ep(a,b,c,h,g,d,e),l=this.Oo(a,k.x0,k.y0,k.x0+d,k.y0-g*k.value+2,j,i,"y"),m=this.s.border?1:0;a.fillStyle=l.gradient,this.fp(a,k.x0+l.offset,k.y0,d-2*l.offset,f,g,k.value,l.offset+m),a.fill(),a.restore()},fp:function(a,b,c,d,e,f,g,h,i){a.beginPath();var j=0;if(e>f*g){var k=(e-f*g)/e;1>=k&&k>=-1&&(j=-Math.acos(k)+Math.PI/2)}a.moveTo(b+h,c);var l=c-Math.floor(f*g)+e+(e?0:h);f*g>e&&a.lineTo(b+h,l);var m=b+e;e&&e>0&&a.arc(m,l,Math.max(e-h,0),-Math.PI+j,-Math.PI/2,!1);var n=b+d-e-h,o=l-e+(e?h:0);a.lineTo(n,o),e&&e>0&&a.arc(n+h,l,Math.max(e-h,0),-Math.PI/2,0-j,!1);var p=b+d-h;return a.lineTo(p,c),i||a.lineTo(b+h,c),[p,o]}}),webix.extend(webix.ui.chart,{$render_line:function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r;if(j=this.hp(a,b,c,d,e),g=this.s,b.length){for(k=g.offset?c.x+.5*j.cellWidth:c.x,i=[],h=0;h<b.length;h++)if(r=this.ip(b[h],c,d,j)){if(m=h?j.cellWidth*h-.5+k:k,o="object"==typeof r?r.y0:r,h&&this.s.fixOverflow){if(q=this.ip(b[h-1],c,d,j),q.out&&q.out==r.out)continue;l=j.cellWidth*(h-1)-.5+k,n="object"==typeof q?q.y0:q,q.out&&(p="min"==q.out?d.y:c.y,i.push({x:this.jp(l,m,n,o,p),y:p})),r.out&&(p="min"==r.out?d.y:c.y,i.push({x:this.jp(l,m,n,o,p),y:p}))}r.out||i.push({x:m,y:r,index:h})}for(this.kp=c,h=1;h<=i.length;h++)l=i[h-1].x,n=i[h-1].y,h<i.length&&(m=i[h].x,o=i[h].y,this.zo(a,l,n,m,o,g.line.color.call(this,b[h-1]),g.line.width),g.line&&g.line.shadow&&(a.globalAlpha=.3,this.zo(a,l+2,n+g.line.width+8,m+2,o+g.line.width+8,"#eeeeee",g.line.width+3),a.globalAlpha=1)),"undefined"!=typeof i[h-1].index&&this.lp(a,l,n,b[i[h-1].index],g.label(b[i[h-1].index]),e,f,c)}},jp:function(a,b,c,d,e){return a+(e-c)*(b-a)/(d-c)},lp:function(a,b,c,d,e,f,g){var h=this.s.item,i=parseInt(h.radius.call(this,d),10)||0,j=this.kp;if(i){if(a.save(),h.shadow){a.lineWidth=1,a.strokeStyle="#bdbdbd",a.fillStyle="#bdbdbd";for(var k=[.1,.2,.3],l=k.length-1;l>=0;l--)a.globalAlpha=k[l],a.strokeStyle="#d0d0d0",a.beginPath(),this.Lo(a,b,c+2*i/3,i+l+1,h.type),a.stroke();a.beginPath(),a.globalAlpha=.3,a.fillStyle="#bdbdbd",this.Lo(a,b,c+2*i/3,i+1,h.type),a.fill()}a.restore(),a.lineWidth=h.borderWidth,a.fillStyle=h.color.call(this,d),a.strokeStyle=h.borderColor.call(this,d),a.globalAlpha=h.alpha.call(this,d),a.beginPath(),this.Lo(a,b,c,i+1,h.type),a.fill(),a.stroke(),a.globalAlpha=1}if(e&&this.canvases[f].renderTextAt(!1,!0,b,c-i-this.s.labelOffset,this.s.label.call(this,d)),g){var m=this.s.eventRadius||i+1;g.addRect(d.id,[b-m-j.x,c-m-j.y,b+m-j.x,c+m-j.y],f)}},Lo:function(a,b,c,d,e){var f=[];if(!e||"square"!=e&&"s"!=e)if(!e||"diamond"!=e&&"d"!=e)f=!e||"triangle"!=e&&"t"!=e?[[b,c,d,0,2*Math.PI,!0]]:[[b,c-d],[b+Math.sqrt(3)*d/2,c+d/2],[b-Math.sqrt(3)*d/2,c+d/2],[b,c-d]];else{var g=a.lineWidth>1?a.lineWidth*Math.sqrt(2)/4:0;f=[[b,c-d],[b+d,c],[b,c+d],[b-d,c],[b+g,c-d-g]]}else d*=Math.sqrt(2)/2,f=[[b-d-a.lineWidth/2,c-d],[b+d,c-d],[b+d,c+d],[b-d,c+d],[b-d,c-d]];this.Mo(a,f)},ip:function(a,b,c,d){var e=d.minValue,f=d.maxValue,g=d.unit,h=d.valueFactor,i=this.s.value(a);this.Bo&&(i=this.Do(i));var j=(parseFloat(i||0)-e)*h;this.s.yAxis||(j+=d.startValue/g);var k=c.y-g*j;return!this.s.fixOverflow||"line"!=this.s.type&&"area"!=this.s.type?(i>f&&(k=b.y),(0>j||e>i)&&(k=c.y)):i>f?k={y:b.y,y0:k,out:"max"}:(0>j||e>i)&&(k={y:c.y,y0:k,out:"min"}),k},hp:function(a,b,c,d,e){var f,g={};g.totalHeight=d.y-c.y,g.cellWidth=(d.x-c.x)/(this.s.offset?b.length:b.length-1);var h=!!this.s.yAxis,i=-1!=this.s.type.indexOf("stacked")?this.No(b):this.Go();g.maxValue=i.max,g.minValue=i.min,e||this.uo(b,c,d,g.minValue,g.maxValue,g.cellWidth),h&&(g.maxValue=parseFloat(this.s.yAxis.end),g.minValue=parseFloat(this.s.yAxis.start));var j=this.Ho(g.minValue,g.maxValue);return f=j[0],g.valueFactor=j[1],g.unit=f?g.totalHeight/f:10,g.startValue=0,h||(g.startValue=10,g.unit!=g.totalHeight&&(g.unit=f?(g.totalHeight-g.startValue)/f:10)),g}}),webix.extend(webix.ui.chart,{$render_barH:function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A;for(i=(d.y-c.y)/b.length,m=this.Go("h"),n=m.max,o=m.min,v=d.x-c.x,A=!!this.s.xAxis,e||this.mp(a,b,c,d,o,n,i),A&&(n=parseFloat(this.s.xAxis.end),o=parseFloat(this.s.xAxis.start)),t=this.Ho(o,n),r=t[0],q=t[1],x=r?v/r:10,A||(u=10,x=r?(v-u)/r:10),h=parseInt(this.s.barWidth,10),h*this.go.length+4>i&&(h=i/this.go.length-4),g=Math.floor((i-h*this.go.length)/2),s="undefined"!=typeof this.s.radius?parseInt(this.s.radius,10):Math.round(h/5),p=!1,k=this.s.gradient,k&&"function"!=typeof k?(p=k,k=!1):k&&(k=a.createLinearGradient(c.x,c.y,d.x,c.y),this.s.gradient(k)),A||this.zo(a,c.x-.5,c.y,c.x-.5,d.y,"#000000",1),l=0;l<b.length;l++)if(w=parseFloat(this.s.value(b[l]||0)),this.Bo&&(w=this.Do(w)),w>n&&(w=n),w-=o,w*=q,y=c.x,z=c.y+g+l*i+(h+1)*e,0>w&&"auto"==this.s.origin||this.s.xAxis&&0===w&&!("auto"!=this.s.origin&&this.s.origin>o))this.canvases[e].renderTextAt("middle","right",y+10,z+h/2+g,this.s.label(b[l]));else{0>w&&"auto"!=this.s.origin&&this.s.origin>o&&(w=0),A||(w+=u/x),j=k||this.s.color.call(this,b[l]),this.s.border&&this.np(a,y,z,h,o,s,x,w,j),a.globalAlpha=this.s.alpha.call(this,b[l]);var B=this.op(a,d,y,z,h,o,s,x,w,j,k,p);p&&this.pp(a,y,z,h,o,s,x,w,j,p),a.globalAlpha=1,B[3]==z?(this.canvases[e].renderTextAt("middle","left",B[0]-5,B[3]+Math.floor(h/2),this.s.label(b[l])),f.addRect(b[l].id,[B[0]-c.x,B[3]-c.y,B[2]-c.x,B[3]+h-c.y],e)):(this.canvases[e].renderTextAt("middle",!1,B[2]+5,B[1]+Math.floor(h/2),this.s.label(b[l])),f.addRect(b[l].id,[B[0]-c.x,z-c.y,B[2]-c.x,B[3]-c.y],e))}},qp:function(a,b,c,d,e,f,g,h,i){var j=0;if(e>f*g){var k=(e-f*g)/e;j=-Math.asin(k)+Math.PI/2}a.moveTo(b,c+h);var l=b+f*g-e-(e?0:h);l=Math.max(b,l),f*g>e&&a.lineTo(l,c+h);var m=c+e;e&&e>0&&a.arc(l,m,e-h,-Math.PI/2+j,0,!1);var n=c+d-e-(e?0:h),o=l+e-(e?h:0);a.lineTo(o,n),e&&e>0&&a.arc(l,n,e-h,0,Math.PI/2-j,!1);var p=c+d-h;return a.lineTo(b,p),i||a.lineTo(b,c+h),[o,p]},mp:function(a,b,c,d,e,f,g){var h=0;this.s.xAxis&&(this.canvases.x||(this.canvases.x=this.lo("axis_x")),h=this.rp(this.canvases.x.getCanvas(),b,c,d,e,f)),this.s.yAxis&&(this.canvases.y||(this.canvases.y=this.lo("axis_y")),this.sp(this.canvases.y.getCanvas(),b,c,d,g,h))},sp:function(a,b,c,d,e,f){if(this.s.yAxis){var g,h=parseInt(f?f:c.x,10)-.5,i=d.y+.5,j=c.y;this.zo(a,h,i,h,j,this.s.yAxis.color,1);for(var k=0;k<b.length;k++){var l="auto"!=this.s.origin&&"barH"==this.s.type&&parseFloat(this.s.value(b[k]))<this.s.origin;g=j+e/2+k*e,this.canvases.y.renderTextAt("middle",!l&&"left",l?h+5:h-5,g,this.s.yAxis.template(b[k]),"webix_axis_item_y",l?0:h-10),this.s.yAxis.lines.call(this,b[k])&&this.zo(a,c.x,g,d.x,g,this.s.yAxis.lineColor.call(this,b[k]),1)}this.s.yAxis.lines.call(this,{})&&this.zo(a,c.x+.5,j+.5,d.x,j+.5,this.s.yAxis.lineColor.call(this,{}),1),this.Co(c,d)}},rp:function(a,b,c,d,e,f){var g,h={},i=this.s.xAxis;if(i){var j=d.y+.5,k=c.x-.5,l=d.x-.5,m=c.x;if(this.zo(a,k,j,l,j,i.color,1),i.step&&(g=parseFloat(i.step)),("undefined"==typeof this.so.step||"undefined"==typeof this.so.start||"undefined"==typeof this.so.end)&&(h=this.Ao(e,f),e=h.start,f=h.end,g=h.step,this.s.xAxis.end=f,this.s.xAxis.start=e,this.s.xAxis.step=g),0!==g){for(var n=(l-k)*g/(f-e),o=0,p=e;f>=p;p+=g){var q=this.Bo?Math.pow(10,p):p;h.fixNum&&(q=parseFloat(q).toFixed(h.fixNum));var r=Math.floor(k+o*n)+.5;if(p==e&&"auto"==this.s.origin||!i.lines.call(this,p)||this.zo(a,r,j,r,c.y,this.s.xAxis.lineColor.call(this,p),1),p==this.s.origin&&(m=r+1),1>g&&!this.Bo){var s=Math.min(Math.floor(this.Do(g)),0>=e?0:Math.floor(this.Do(e))),t=Math.pow(10,-s);q=Math.round(q*t)/t,p=q}this.canvases.x.renderTextAt(!1,!0,r,j+2,i.template(q.toString()),"webix_axis_item_x"),o++}return this.canvases.x.renderTextAt(!0,!1,k,d.y+this.s.padding.bottom-3,this.s.xAxis.title,"webix_axis_title_x",d.x-c.x),i.lines.call(this,{})||this.zo(a,k,c.y-.5,l,c.y-.5,this.s.xAxis.color,.2),m}}},tp:function(a,b,c,d,e,f,g){var h=this.s.yAxis,i=b;return h&&"auto"!=this.s.origin&&this.s.origin>g&&(b+=(this.s.origin-g)*e,i=b,d-=this.s.origin-g,0>d&&(d*=-1,a.translate(b,c+f),a.rotate(Math.PI),b=.5,c=0),b+=.5),{value:d,x0:b,y0:c,start:i}},op:function(a,b,c,d,e,f,g,h,i,j,k,l){a.save();var m=this.tp(a,c,d,i,h,e,f);a.fillStyle=j,a.beginPath();var n=this.qp(a,m.x0,m.y0,e,g,h,m.value,this.s.border?1:0);k&&!l&&a.lineTo(b.x,m.y0+(this.s.border?1:0)),a.fill(),a.restore();var o=m.y0,p=m.y0!=d?d:n[1],q=m.y0!=d?m.start-n[0]:m.start,r=m.y0!=d?m.start:n[0];return[q,o,r,p]},np:function(a,b,c,d,e,f,g,h,i){a.save();var j=this.tp(a,b,c,h,g,d,e);a.beginPath(),this.gp(a,i),a.globalAlpha=.9,this.qp(a,j.x0,j.y0,d,f,g,j.value,a.lineWidth/2,1),a.stroke(),a.restore()},pp:function(a,b,c,d,e,f,g,h,i,j){a.save();var k=this.tp(a,b,c,h,g,d,e),l=this.Oo(a,k.x0,k.y0+d,k.x0+g*k.value,k.y0,j,i,"x");a.fillStyle=l.gradient,a.beginPath(),this.qp(a,k.x0,k.y0+l.offset,d-2*l.offset,f,g,k.value,l.offset),a.fill(),a.globalAlpha=1,a.restore()}}),webix.extend(webix.ui.chart,{$render_stackedBar:function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n=this.s,o=d.y-c.y,p=!!n.yAxis,q=!!n.xAxis,r=this.No(b),s=0===n.origin;g=r.max,h=r.min;var t=Math.floor((d.x-c.x)/b.length);e||(i=this.uo(b,c,d,h,g,t)),p&&(g=parseFloat(n.yAxis.end),h=parseFloat(n.yAxis.start));var u=this.Ho(h,g);m=u[0],l=u[1];var v=m?o/m:10,w=parseInt(n.barWidth,10);w+4>t&&(w=t-4);var x=Math.floor((t-w)/2),y=!!n.gradient&&n.gradient;q||this.zo(a,c.x,d.y+.5,d.x,d.y+.5,"#000000",1);for(var z=0;z<b.length;z++){var A=parseFloat(n.value(b[z]||0));this.Bo&&(A=this.Do(A)),j=c.x+x+z*t;var B=s&&0>A;if(e?k=B?b[z].$startYN:b[z].$startY:(k=i-1,b[z].$startY=k,s&&(B&&(k=i+1),b[z].$startYN=i+1)),A&&(e||s||(A-=h),A*=l,!(k<c.y+1)))if(n.yAxis&&0===A)this.canvases.y.renderTextAt(!0,!0,j+Math.floor(w/2),k,this.s.label(b[z]));else{var C=this.s.color.call(this,b[z]),D=Math.abs(k-(s?d.y+h*v:d.y))<3;a.globalAlpha=n.alpha.call(this,b[z]),a.fillStyle=a.strokeStyle=n.color.call(this,b[z]),a.beginPath();var E=k-v*A+(D?B?-1:1:0),F=this.up(a,j-(n.border?.5:0),k,w+(n.border?.5:0),E,0,c.y);if(a.fill(),a.stroke(),y){a.save();var G=this.Oo(a,j,k,j+w,F[1],y,C,"y");a.fillStyle=G.gradient,a.beginPath(),F=this.up(a,j+G.offset,k,w-2*G.offset,E,n.border?1:0,c.y),a.fill(),a.restore()}n.border&&(a.save(),"string"==typeof n.border?a.strokeStyle=n.border:this.gp(a,C),a.beginPath(),this.up(a,j-.5,parseInt(k,10)+.5,w+1,parseInt(E,10)+.5,0,c.y,D),a.stroke(),a.restore()),a.globalAlpha=1,this.canvases[e].renderTextAt(!1,!0,j+Math.floor(w/2),F[1]+(k-F[1])/2-7,this.s.label(b[z])),f.addRect(b[z].id,[j-c.x,F[1]-c.y,F[0]-c.x,b[z][B?"$startYN":"$startY"]-c.y],e),b[z][B?"$startYN":"$startY"]=F[1]}}},up:function(a,b,c,d,e,f,g,h){a.moveTo(b,c),g>e&&(e=g),a.lineTo(b,e);var i=b+d,j=e;a.lineTo(i,j);var k=b+d;return a.lineTo(k,c),h||a.lineTo(b,c),[k,j]}}),webix.extend(webix.ui.chart,{$render_stackedBarH:function(a,b,c,d,e,f){var g,h,i,j,k=d.x-c.x,l=!!this.s.yAxis,m=this.No(b);g=m.max,h=m.min;var n=Math.floor((d.y-c.y)/b.length);e||this.mp(a,b,c,d,h,g,n),l&&(g=parseFloat(this.s.xAxis.end),h=parseFloat(this.s.xAxis.start));var o=this.Ho(h,g);j=o[0],i=o[1];var p=j?k/j:10,q=0;l||(q=10,p=j?(k-q)/j:10);var r=parseInt(this.s.barWidth,10);r+4>n&&(r=n-4);var s=(n-r)/2,t=0,u=!1,v=this.s.gradient;v&&(u=!0),l||this.zo(a,c.x-.5,c.y,c.x-.5,d.y,"#000000",1);var w=0,x=0;for(y=0;y<this.go.length;y++)y==e&&(x=w),"stackedBarH"==this.go[y].type&&w++;for(var y=0;y<b.length;y++){x||(b[y].$startX=c.x);var z=parseFloat(this.s.value(b[y]||0));z>g&&(z=g),z-=h,z*=i;var A=c.x,B=c.y+s+y*n;if(x?A=b[y].$startX:b[y].$startX=A,0>z||this.s.yAxis&&0===z)this.canvases.y.renderTextAt("middle",!0,A+10,B+r/2,this.s.label(b[y]));else{l||(z+=q/p);var C=this.s.color.call(this,b[y]);a.globalAlpha=this.s.alpha.call(this,b[y]),a.fillStyle=this.s.color.call(this,b[y]),a.beginPath();var D=this.qp(a,A,B,r,t,p,z,0);if(v&&!u&&a.lineTo(c.x+k,B+(this.s.border?1:0)),a.fill(),u){var E=this.Oo(a,A,B+r,A,B,u,C,"x");a.fillStyle=E.gradient,a.beginPath(),D=this.qp(a,A,B,r,t,p,z,0),a.fill()}this.s.border&&this.np(a,A,B,r,h,t,p,z,C),a.globalAlpha=1,this.canvases[e].renderTextAt("middle",!0,b[y].$startX+(D[0]-b[y].$startX)/2-1,B+(D[1]-B)/2,this.s.label(b[y])),f.addRect(b[y].id,[b[y].$startX-c.x,B-c.y,D[0]-c.x,D[1]-c.y],e),b[y].$startX=D[0]}}}}),webix.extend(webix.ui.chart,{$render_spline:function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s;if(k=this.hp(a,b,c,d,e),g=this.s,this.kp=c,i=[],b.length){for(n=g.offset?c.x+.5*k.cellWidth:c.x,h=0;h<b.length;h++)q=this.ip(b[h],c,d,k),q&&(m=h?k.cellWidth*h-.5+n:n,i.push({x:m,y:q,index:h}));for(l=this.vp(i),h=0;h<i.length;h++){if(o=i[h].x,r=i[h].y,h<i.length-1){for(p=i[h+1].x,s=i[h+1].y,j=o;p>j;j++){var t=this.wp(j,o,h,l.a,l.b,l.c,l.d);t<c.y&&(t=c.y),t>d.y&&(t=d.y);var u=this.wp(j+1,o,h,l.a,l.b,l.c,l.d);u<c.y&&(u=c.y),u>d.y&&(u=d.y),this.zo(a,j,t,j+1,u,g.line.color(b[h]),g.line.width)}this.zo(a,p-1,this.wp(j,o,h,l.a,l.b,l.c,l.d),p,s,g.line.color(b[h]),g.line.width)}this.lp(a,o,r,b[i[h].index],g.label(b[i[h].index]),e,f)}}},vp:function(a){var b,c,d,e,f,g,h,i,j=[],k=[],l=a.length;for(f=0;l-1>f;f++)j[f]=a[f+1].x-a[f].x,k[f]=(a[f+1].y-a[f].y)/j[f];for(h=[],i=[],h[0]=0,h[1]=2*(j[0]+j[1]),i[0]=0,i[1]=6*(k[1]-k[0]),f=2;l-1>f;f++)h[f]=2*(j[f-1]+j[f])-j[f-1]*j[f-1]/h[f-1],i[f]=6*(k[f]-k[f-1])-j[f-1]*i[f-1]/h[f-1];for(g=[],g[l-1]=g[0]=0,f=l-2;f>=1;f--)g[f]=(i[f]-j[f]*g[f+1])/h[f];for(b=[],c=[],d=[],e=[],f=0;l-1>f;f++)b[f]=a[f].y,c[f]=-j[f]*g[f+1]/6-j[f]*g[f]/3+(a[f+1].y-a[f].y)/j[f],d[f]=g[f]/2,e[f]=(g[f+1]-g[f])/(6*j[f]);return{a:b,b:c,c:d,d:e}},wp:function(a,b,c,d,e,f,g){return d[c]+(a-b)*(e[c]+(a-b)*(f[c]+(a-b)*g[c]))}}),webix.extend(webix.ui.chart,{$render_area:function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;if(l=this.hp(a,b,c,d,e),h=this.s,j=h.eventRadius||Math.floor(l.cellWidth/2),b.length){for(m=[],p=h.offset?c.x+.5*l.cellWidth:c.x,i=0;i<b.length;i++)if(k=b[i],o=this.ip(k,c,d,l),s=p+l.cellWidth*i,o){if(t="object"==typeof o?o.y0:o,i&&this.s.fixOverflow){if(n=this.ip(b[i-1],c,d,l),n.out&&n.out==o.out)continue;q=l.cellWidth*(i-1)-.5+p,r="object"==typeof n?n.y0:n,n.out&&(u="min"==n.out?d.y:c.y,m.push([this.jp(q,s,r,t,u),u])),o.out&&(u="min"==o.out?d.y:c.y,m.push([this.jp(q,s,r,t,u),u]),i==b.length-1&&u==c.y&&m.push([s,c.y]))}o.out||(m.push([s,t]),f.addRect(k.id,[s-j-c.x,t-j-c.y,s+j-c.x,t+j-c.y],e)),h.yAxis||(g=h.offset||i!=b.length-1?"center":"left",this.canvases[e].renderTextAt(!1,g,s,t-h.labelOffset,h.label(k)))}m.length&&(m.push([s,d.y]),m.push([m[0][0],d.y])),a.globalAlpha=this.s.alpha.call(this,b[0]),a.fillStyle=this.s.color.call(this,b[0]),a.beginPath(),this.Mo(a,m),a.fill(),h.border&&(a.lineWidth=h.borderWidth||1,h.borderColor?a.strokeStyle=h.borderColor.call(this,b[0]):this.gp(a,a.fillStyle),a.beginPath(),this.Mo(a,m),a.stroke()),a.lineWidth=1,a.globalAlpha=1}},$render_stackedArea:function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s,t;if(p=this.hp(a,b,c,d,e),j=this.s,n=j.eventRadius||Math.floor(p.cellWidth/2),b.length){q=[],t=[],r=j.offset?c.x+.5*p.cellWidth:c.x;var u=function(a,c){return e?b[a].$startY?c-d.y+b[a].$startY:0:c},v=function(a,b,c){var d=(c.y-b.y)/(c.x-b.x);return d*a+b.y-d*b.x};for(k=0;k<b.length;k++)o=b[k],k?r+=p.cellWidth:(s=u(k,d.y),q.push([r,s])),s=u(k,this.ip(o,c,d,p)),t.push(isNaN(s)&&!k?b[k].$startY||d.y:s),s&&(q.push([r,s]),f.addRect(o.id,[r-n-c.x,s-n-c.y,r+n-c.x,s+n-c.y],e),j.yAxis||(i=!j.offset&&m?"left":"center",this.canvases[e].renderTextAt(!1,i,r,s-j.labelOffset,j.label(o))));if(q.push([r,u(k-1,d.y)]),e)for(k=b.length-2;k>0;k--)r-=p.cellWidth,s=b[k].$startY,s&&q.push([r,s]);for(q.push([q[0][0],q[0][1]]),a.globalAlpha=this.s.alpha.call(this,b[0]),a.fillStyle=this.s.color.call(this,b[0]),a.beginPath(),this.Mo(a,q),a.fill(),k=0;k<b.length;k++){if(s=t[k],!s)for(k==b.length-1&&(s=b[k].$startY),l=k+1;l<b.length;l++)if(t[l]){g={x:c.x,y:t[0]},h={x:c.x+p.cellWidth*l,y:t[l]},s=v(c.x+p.cellWidth*k,g,h);break}b[k].$startY=s}}}}),webix.extend(webix.ui.chart,{$render_radar:function(a,b,c,d,e,f){this.xp(a,b,c,d,e,f)},xp:function(a,b,c,d,e,f){if(b.length){for(var g=this.To(c,d),h=this.s.radius?this.s.radius:g.radius,i=this.s.x?this.s.x:g.x,j=this.s.y?this.s.y:g.y,k=[],l=0;l<b.length;l++)k.push(1);var m=this.Wo(k,b.length);this.kp=c,e||this.yp(m,i,j,h,b),this.zp(a,m,i,j,h,b,e,f)}},zp:function(a,b,c,d,e,f,g,h){var i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A;for(k=this.s,m=k.yAxis.start,n=k.yAxis.end,A=this.Ho(m,n),t=A[0],z=t?e/t:e/2,y=A[1],u=-Math.PI/2,i=j=u,q=[],p=0,l=0;l<f.length;l++)x?w=x:(v=k.value(f[l]),this.Bo&&(v=this.Do(v)),w=(parseFloat(v||0)-m)*y),r=Math.floor(z*w),v=k.value(l!=f.length-1?f[l+1]:f[0]),this.Bo&&(v=this.Do(v)),x=(parseFloat(v||0)-m)*y,s=Math.floor(z*x),i=j,j=l!=f.length-1?u+b[l]-1e-4:u,o=p||this.Qo(i,c,d,r),p=this.Qo(j,c,d,s),q.push(o);k.fill&&this.Ap(a,q,f),!k.disableLines&&f.length>2&&this.Bp(a,q,f),(!k.disableItems||f.length<3)&&this.Cp(a,q,f,g,h),q=null},Cp:function(a,b,c,d,e){for(var f=0;f<b.length;f++)this.lp(a,b[f].x,b[f].y,c[f],this.s.label.call(this,c),d,e)},Ap:function(a,b,c){var d,e;a.globalAlpha=this.s.alpha.call(this,{}),a.beginPath();for(var f=0;f<b.length;f++)a.fillStyle=this.s.fill.call(this,c[f]),d=b[f],e=b[f+1]||b[0],f||a.moveTo(d.x,d.y),a.lineTo(e.x,e.y);a.fill(),a.globalAlpha=1},Bp:function(a,b,c){for(var d,e,f=0;f<b.length;f++)d=b[f],e=b[f+1]||b[0],this.zo(a,d.x,d.y,e.x,e.y,this.s.line.color.call(this,c[f]),this.s.line.width)},yp:function(a,b,c,d,e){var f=this.s.yAxis,g=this.s.xAxis,h=f.start,i=f.end,j=f.step,k={},l=this.to;if("undefined"==typeof l.step||"undefined"==typeof l.start||"undefined"==typeof l.end){var m=this.Go();k=this.Ao(m.min,m.max),h=k.start,i=k.end,j=k.step,f.end=i,f.start=h}var n,o,p,q,r,s=[],t=0,u=d*j/(i-h);1>j&&(q=Math.min(this.Do(j),0>=h?0:this.Do(h)),r=Math.pow(10,-q));var v=[];this.canvases.scale||(this.canvases.scale=this.lo("radar_scale"));var w=this.canvases.scale.getCanvas();for(n=i;n>=h;n-=j){var x=this.Bo?Math.pow(10,n):n;k.fixNum&&(x=parseFloat(n).toFixed(k.fixNum)),s.push(Math.floor(t*u)+.5),r&&!this.Bo&&(x=Math.round(x*r)/r,n=x);var y=c-d+s[s.length-1];if(this.canvases.scale.renderTextAt("middle","left",b,y,f.template(x.toString()),"webix_axis_item_y webix_radar"),a.length<2)return void this.Dp(w,"arc",b,c,d-s[s.length-1],-Math.PI/2,3*Math.PI/2,n);var z,A=-Math.PI/2,B=A;for(o=0;o<a.length;o++)t||v.push(B),z=A+a[o]-1e-4,this.Dp(w,a.length>2?l.lineShape||"line":"arc",b,c,d-s[s.length-1],B,z,n,o,e[n]),B=z;t++}for(n=0;n<v.length;n++)p=this.Qo(v[n],b,c,d),g.lines.call(this,e[n],n)&&this.zo(w,b,c,p.x,p.y,g?g.lineColor.call(this,e[n]):"#cfcfcf",1),this.Ep(w,b,c,d,v[n],g?g.template.call(this,e[n]):"&nbsp;")},Dp:function(a,b,c,d,e,f,g,h,i){var j,k;if(0>e)return!1;j=this.Qo(f,c,d,e),k=this.Qo(g,c,d,e);var l=this.s.yAxis;l.bg&&(a.beginPath(),a.moveTo(c,d),"arc"==b?a.arc(c,d,e,f,g,!1):(a.lineTo(j.x,j.y),a.lineTo(k.x,k.y)),a.fillStyle=l.bg(h,i),a.moveTo(c,d),a.fill(),a.closePath()),l.lines.call(this,h)&&(a.lineWidth=1,a.beginPath(),"arc"==b?a.arc(c,d,e,f,g,!1):(a.moveTo(j.x,j.y),a.lineTo(k.x,k.y)),a.strokeStyle=l.lineColor.call(this,h),a.stroke())},Ep:function(a,b,c,d,e,f){var g=this.canvases.scale.renderText(0,0,f,"webix_axis_radar_title",1),h=g.scrollWidth,i=g.offsetHeight,j=.001,k=this.Qo(e,b,c,d+5),l=0,m=0;(0>e||e>Math.PI)&&(m=-i),e>Math.PI/2&&(l=-h),Math.abs(e+Math.PI/2)<j||Math.abs(e-Math.PI/2)<j?l=-h/2:(Math.abs(e)<j||Math.abs(e-Math.PI)<j)&&(m=-i/2),g.style.top=k.y+m+"px",g.style.left=k.x+l+"px",g.style.width=h+"px",g.style.whiteSpace="nowrap"}}),webix.extend(webix.ui.chart,{$render_scatter:function(a,b,c,d,e,f){if(!this.s.xValue)return!1;var g=this.Go(),h=this.Go("h","xValue");e||(this.canvases.x||(this.canvases.x=this.lo("axis_x")),this.canvases.y||(this.canvases.y=this.lo("axis_y")),this.vo(this.canvases.y.getCanvas(),b,c,d,g.min,g.max),this.rp(this.canvases.x.getCanvas(),b,c,d,h.min,h.max)),g={min:this.s.yAxis.start,max:this.s.yAxis.end},h={min:this.s.xAxis.start,max:this.s.xAxis.end};var i=this.Fp(a,b,c,d,h,g);this.kp=c;for(var j=0;j<b.length;j++)this.Gp(a,f,c,d,i,h,g,b[j],e)},Fp:function(a,b,c,d,e,f){var g={};return g.totalHeight=d.y-c.y,g.totalWidth=d.x-c.x,this.Hp(g,e.min,e.max,g.totalWidth,"X"),this.Hp(g,f.min,f.max,g.totalHeight,"Y"),g},Gp:function(a,b,c,d,e,f,g,h,i){var j=this.Ip(e,d,c,f,h,"X"),k=this.Ip(e,c,d,g,h,"Y");this.lp(a,j,k,h,this.s.label.call(this,h),i,b)},Ip:function(a,b,c,d,e,f){var g=this.s["X"==f?"xValue":"value"].call(this,e),h=a["valueFactor"+f],i=(parseFloat(g||0)-d.min)*h,j=a["unit"+f],k=c[f.toLowerCase()]-("X"==f?-1:1)*Math.floor(j*i);return 0>i&&(k=c[f.toLowerCase()]),g>d.max&&(k=b[f.toLowerCase()]),g<d.min&&(k=c[f.toLowerCase()]),k},Hp:function(a,b,c,d,e){var f=this.Ho(b,c);
e=e||"",a["relValue"+e]=f[0],a["valueFactor"+e]=f[1],a["unit"+e]=a["relValue"+e]?d/a["relValue"+e]:10}}),webix.extend(webix.ui.chart,{presets:{simple:{item:{borderColor:"#ffffff",color:"#2b7100",shadow:!1,borderWidth:2},line:{color:"#8ecf03",width:2}},plot:{color:"#1293f8",item:{borderColor:"#636363",borderWidth:1,color:"#ffffff",type:"r",shadow:!1},line:{color:"#1293f8",width:2}},diamond:{color:"#b64040",item:{borderColor:"#b64040",color:"#b64040",type:"d",radius:3,shadow:!0},line:{color:"#ff9000",width:2}},point:{color:"#fe5916",disableLines:!0,fill:!1,disableItems:!1,item:{color:"#feb916",borderColor:"#fe5916",radius:2,borderWidth:1,type:"r"},alpha:1},line:{line:{color:"#3399ff",width:2},item:{color:"#ffffff",borderColor:"#3399ff",radius:2,borderWidth:2,type:"d"},fill:!1,disableItems:!1,disableLines:!1,alpha:1},area:{fill:"#3399ff",line:{color:"#3399ff",width:1},disableItems:!0,alpha:.2,disableLines:!1},round:{item:{radius:3,borderColor:"#3f83ff",borderWidth:1,color:"#3f83ff",type:"r",shadow:!1,alpha:.6}},square:{item:{radius:3,borderColor:"#447900",borderWidth:2,color:"#69ba00",type:"s",shadow:!1,alpha:1}},column:{color:"RAINBOW",gradient:!1,barWidth:45,radius:0,alpha:1,border:!0},stick:{barWidth:5,gradient:!1,color:"#67b5c9",radius:2,alpha:1,border:!1},alpha:{color:"#b9a8f9",barWidth:70,gradient:"falling",radius:0,alpha:.5,border:!0}}}),webix.protoUI({name:"calendar",defaults:{date:new Date,select:!1,navigation:!0,monthSelect:!0,weekHeader:!0,weekNumber:!1,skipEmptyWeeks:!1,calendarHeader:"%F %Y",calendarWeekHeader:"W#",events:webix.Date.isHoliday,minuteStep:5,icons:!1,timepickerHeight:30,headerHeight:70,dayTemplate:function(a){return a.getDate()},width:260,height:250},dayTemplate_setter:webix.template,calendarHeader_setter:webix.Date.dateToStr,calendarWeekHeader_setter:webix.Date.dateToStr,calendarTime_setter:function(a){return this._w=a,webix.Date.dateToStr(a)},date_setter:function(a){return this.Jp(a)},maxDate_setter:function(a){return this.Jp(a)},minDate_setter:function(a){return this.Jp(a)},minTime_setter:function(a){return"string"==typeof a&&(a=webix.i18n.parseTimeFormatDate(a),a=[a.getHours(),a.getMinutes()]),a},maxTime_setter:function(a){return"string"==typeof a&&(a=webix.i18n.parseTimeFormatDate(a),a=[a.getHours(),a.getMinutes()]),a},$init:function(){this.x.className+=" webix_calendar",this.Kp={},this.Lp=this.Mp=null,this.Np=0},type_setter:function(a){return"time"==a?(this.jq=!0,this.Np=-1):"year"==a&&(this.NC=!0),a},$setSize:function(a,b){webix.ui.view.prototype.$setSize.call(this,a,b)&&this.render()},$getSize:function(a,b){if(this.s.cellHeight){var c=this.Op(this.s.date);this.s.height=this.s.cellHeight*c.Sp+(webix.skin.$active.calendarHeight||70)}return webix.ui.view.prototype.$getSize.call(this,a,b)},Op:function(a,b){if(!this.Pp||b){var c=a.getMonth(),d=a.getFullYear(),e=new Date(d,c+1,1),f=webix.Date.weekStart(new Date(d,c,1)),g=Math.round((e.valueOf()-f.valueOf())/864e5),h=this.s.skipEmptyWeeks?Math.ceil(g/7):6;this.Pp={Qp:c,Rp:f,zc:e,Sp:h}}return this.Pp},$skin:function(){webix.skin.$active.calendar&&(webix.skin.$active.calendar.width&&(this.defaults.width=webix.skin.$active.calendar.width),webix.skin.$active.calendar.height&&(this.defaults.height=webix.skin.$active.calendar.height),webix.skin.$active.calendar.headerHeight&&(this.defaults.headerHeight=webix.skin.$active.calendar.headerHeight),webix.skin.$active.calendar.timepickerHeight&&(this.defaults.timepickerHeight=webix.skin.$active.calendar.timepickerHeight))},Tp:function(a){for(var b=this.Op(a),c=this.s,d=[],e=[],f=this.bc-36,g=this.dc-this.s.headerHeight-10-(this.s.timepicker||this.ax?this.s.timepickerHeight:0),h=c.weekNumber?8:7,i=0;h>i;i++)e[i]=Math.ceil(f/(h-i)),f-=e[i];for(var j=b.Sp,k=0;j>k;k++)d[k]=Math.ceil(g/(j-k)),g-=d[k];return[e,d]},icons_setter:function(a){a?"object"==typeof a?this.ax=a:this.ax=this.Sx:this.ax=null},ax:[],Sx:[{template:function(){return"<span class='webix_cal_icon_today webix_cal_icon'>"+webix.i18n.calendar.today+"</span>"},on_click:{webix_cal_icon_today:function(){this.setValue(new Date),this.callEvent("onTodaySet",[this.getSelectedDate()])}}},{template:function(){return"<span class='webix_cal_icon_clear webix_cal_icon'>"+webix.i18n.calendar.clear+"</span>"},on_click:{webix_cal_icon_clear:function(){this.setValue(""),this.callEvent("onDateClear",[this.getSelectedDate()])}}}],refresh:function(){this.render()},render:function(){this.Np=0,this.Up=!1;var a=this.s;if(this.isVisible(a.id)){this.Vp=webix.Date.datePart(new Date),this.callEvent("onBeforeRender",[]);var b=this.s.date,c=this.Op(b,!0),d=this.Tp(b),e=d[0],f=d[1],g="<div class='webix_cal_month'><span class='webix_cal_month_name"+(this.s.monthSelect?"":" webix_readonly")+"'>"+a.calendarHeader(b)+"</span>";if(a.navigation&&(g+="<div class='webix_cal_prev_button'></div><div class='webix_cal_next_button'></div>"),g+="</div>",a.weekHeader&&(g+="<div class='webix_cal_header'>"+this.Wp(e)+"</div>"),g+="<div class='webix_cal_body'>"+this.Xp(e,f,c)+"</div>",(this.s.timepicker||this.ax)&&(g+="<div class='webix_cal_footer'>",this.s.timepicker&&(g+=this.Yp(b)),this.ax&&(g+=this.bx()),g+="</div>"),this.w.innerHTML=g,"time"==this.s.type){var h=this.s.date;h&&("string"==typeof h?b=webix.i18n.parseTimeFormatDate(h):webix.isArray(h)&&(b.setHours(h[0]),b.setMinutes(h[1]))),this.yt(-1,b)}else"month"==this.s.type?this.yt(1,b):"year"==this.s.type&&this.yt(2,b);this.callEvent("onAfterRender",[])}},bx:function(a){for(var b="<div class='webix_cal_icons'>",c=this.ax,d=0;d<c.length;d++){if(c[d].template){var e="function"==typeof c[d].template?c[d].template:webix.template(c[d].template);b+=e.call(this,a)}c[d].on_click&&webix.extend(this.on_click,c[d].on_click)}return b+="</div>"},Yp:function(a){var b=this.s.calendarTime||webix.i18n.timeFormatStr;return"<div class='webix_cal_time"+(this.ax?" webix_cal_time_icons":"")+"'><span class='webix_icon fa-clock-o'></span> "+b(a)+"</div>"},Wp:function(a){var b=this.s,c="",d=0;b.weekNumber&&(d=1,c+="<div class='webix_cal_week_header' style='width: "+a[0]+"px;' >"+b.calendarWeekHeader()+"</div>");for(var e=webix.Date.startOnMonday?1:0,f=0;7>f;f++){var g=(e+f)%7,h=webix.i18n.calendar.dayShort[g];c+="<div day='"+g+"' style='width: "+a[f+d]+"px;' >"+h+"</div>"}return c},blockDates_setter:function(a){return webix.toFunctor(a,this.$scope)},Zp:function(a,b){var c="";return webix.Date.equal(a,this.Vp)&&(c+=" webix_cal_today"),this.sz(a)||(c+=" webix_cal_day_disabled"),webix.Date.equal(a,this.Lp)&&(c+=" webix_cal_select"),a.getMonth()!=b.Qp&&(c+=" webix_cal_outside"),this.s.events&&(c+=" "+this.s.events(a)),c+=" webix_cal_day"},Xp:function(a,b,c){for(var d=this.s,e="",f=webix.Date.datePart(webix.Date.copy(c.Rp)),g=d.weekNumber?1:0,h=webix.Date.getISOWeek(webix.Date.add(f,2,"day",!0)),i=(this.s.minDate||new Date(1,1,1),this.s.maxDate||new Date(9999,1,1),0);i<b.length;i++){e+="<div class='webix_cal_row' style='height:"+b[i]+"px;line-height:"+b[i]+"px'>",g&&(!f.getMonth()&&f.getDate()<7&&(h=webix.Date.getISOWeek(webix.Date.add(f,2,"day",!0))),e+="<div class='webix_cal_week_num' style='width:"+a[0]+"px'>"+h+"</div>");for(var j=g;j<a.length;j++){var k=this.Zp(f,c),l=this.s.dayTemplate.call(this,f);e+="<div day='"+j+"' class='"+k+"' style='width:"+a[j]+"px'><span class='webix_cal_day_inner'>"+l+"</span></div>",f=webix.Date.add(f,1,"day"),f.getHours()&&(f=webix.Date.datePart(f))}e+="</div>",h++}return e},$p:function(a,b,c){var d=this.s.date;b||(b=this.aq[this.Np]._p),this.Np||(d=webix.Date.copy(d),d.setDate(1));var e=webix.Date.add(d,a*b,"month",!0);this.bq(d,e)},bq:function(a,b){this.callEvent("onBeforeMonthChange",[a,b])&&(this.Np?this.cq(b):this.showCalendar(b),this.callEvent("onAfterMonthChange",[b,a]))},aq:{"-2":{lz:function(a){var b=this.s,c=b.date,d=!1,e=b.minTime?b.minTime[0]:0,f=b.maxTime?b.maxTime[0]+(b.maxTime[1]?1:0):24,g=b.minTime&&c.getHours()==e?b.minTime[1]:0,h=b.maxTime&&b.maxTime[1]&&c.getHours()==f-1?b.maxTime[1]:60;if(this.s.blockTime){var i=webix.Date.copy(c);i.setMinutes(a),d=this.s.blockTime(i)}return g>a||a>=h||d},dq:function(a,b){a.setMinutes(b)}},"-1":{lz:function(a){var b=this.s,c=b.date,d=b.minTime?b.minTime[0]:0,e=b.maxTime?b.maxTime[0]+(b.maxTime[1]?1:0):24;if(d>a||a>=e)return!0;if(b.blockTime){var f=webix.Date.copy(c);f.setHours(a);for(var g=b.minTime&&a==d?b.minTime[1]:0,h=b.maxTime&&b.maxTime[1]&&a==e-1?b.maxTime[1]:60,i=g;h>i;i+=b.minuteStep)if(f.setMinutes(i),!b.blockTime(f))return!1;return!0}},dq:function(a,b){a.setHours(b)}},0:{_p:1},1:{lz:function(a,b){var c,d,e=!1,f=b.s.minDate||null,g=b.s.maxDate||null,h=b.s.date.getFullYear();return f&&g&&(c=f.getFullYear(),d=g.getFullYear(),(c>h||h==c&&f.getMonth()>a||h>d||h==d&&g.getMonth()<a)&&(e=!0)),e},Jv:function(a,b){return a<b.s.minDate?a=webix.Date.copy(b.s.minDate):a>b.s.maxDate&&(a=webix.Date.copy(b.s.maxDate)),a},eq:function(a){return a.getFullYear()},fq:function(a){return webix.i18n.calendar.monthShort[a]},dq:function(a,b){b!=a.getMonth()&&a.setDate(1),a.setMonth(b)},_p:12},2:{lz:function(a,b){a+=this.gq;var c=!1,d=b.s.minDate,e=b.s.maxDate;return d&&e&&(d.getFullYear()>a||e.getFullYear()<a)&&(c=!0),c},Jv:function(a,b){return a<b.s.minDate?a=webix.Date.copy(b.s.minDate):a>b.s.maxDate&&(a=webix.Date.copy(b.s.maxDate)),a},eq:function(a){var b=a.getFullYear();return this.gq=b=b-b%10-1,b+" - "+(b+10)},fq:function(a){return this.gq+a},dq:function(a,b){a.setFullYear(this.gq+b)},_p:120}},mz:function(){var a,b,c;if(b=this.aq[-1].lz.call(this,this.s.date.getHours()))for(a=0;24>a;a++)if(!this.aq[-1].lz.call(this,a)){this.s.date.setHours(a);break}if(c=this.aq[-2].lz.call(this,this.s.date.getMinutes()))for(a=0;60>a;a+=this.s.minuteStep)if(!this.aq[-2].lz.call(this,a)){this.s.date.setMinutes(a);break}},cq:function(a){var b,c,d,e,f,g,h,i,j,k,l="";if(b=this.s,f=b.weekHeader?2:1,k=this.aq[this.Np],g=this.w.childNodes,a&&(b.date=a),i=b.type,this.Up||(this.hq=this.w.offsetHeight-b.headerHeight,"year"!=i&&"month"!=i?this.hq-=b.timepickerHeight:this.ax&&(this.hq-=10),this.iq=g[f].offsetWidth,this.Up=1),this.jq){d=this.hq/6;var m=6,n=this._w||webix.i18n.timeFormat,o=n.match(/%([a,A])/);for(o&&m++,j=parseInt((this.iq-3)/m,10),l+="<div class='webix_time_header'>"+this.kq(j,o)+"</div>",l+="<div  class='webix_cal_body' style='height:"+this.hq+"px'>",this.mz(),l+="<div class='webix_hours'>",h=b.date.getHours(),e=0;24>e;e++){if(c="",o&&e%4===0){var p=e?12==e?"pm":"":"am";l+="<div class='webix_cal_block_empty"+c+"' style='"+this.lq(j,d)+"clear:both;'>"+p+"</div>"}this.aq[-1].lz.call(this,e)?c+=" webix_cal_day_disabled":h==e&&(c+=" webix_selected");var q=webix.Date.toFixed(o&&e>12?e-12:e);l+="<div class='webix_cal_block"+c+"' data-value='"+e+"' style='"+this.lq(j,d)+(e%4!==0||o?"":"clear:both;")+"'>"+q+"</div>"}for(l+="</div>",l+="<div class='webix_minutes'>",h=b.date.getMinutes(),e=0;60>e;e+=b.minuteStep)c="",this.aq[-2].lz.call(this,e)?c=" webix_cal_day_disabled":h==e&&(c=" webix_selected"),l+="<div class='webix_cal_block webix_cal_block_min"+c+"' data-value='"+e+"' style='"+this.lq(j,d)+(e%2===0?"clear:both;":"")+"'>"+webix.Date.toFixed(e)+"</div>";l+="</div>",l+="</div>",l+="<div  class='webix_time_footer'>"+this.mq()+"</div>",this.w.innerHTML=l}else{for(g[0].firstChild.innerHTML=k.eq(b.date),d=this.hq/3,j=this.iq/4,this.sz(b.date)&&(h=1==this.Np?b.date.getMonth():b.date.getFullYear()),e=0;12>e;e++)c=h==(1==this.Np?e:k.fq(e))?" webix_selected":"",k.lz(e,this)&&(c+=" webix_cal_day_disabled"),l+="<div class='webix_cal_block"+c+"' data-value='"+e+"' style='"+this.lq(j,d)+"'>"+k.fq(e)+"</div>";f-1&&(g[f-1].style.display="none"),g[f].innerHTML=l,"year"!=i&&"month"!=i&&(g[f+1]?g[f+1].innerHTML=this.mq():this.w.innerHTML+="<div  class='webix_time_footer'>"+this.mq()+"</div>"),g[f].style.height=this.hq+"px"}},lq:function(a,b){return"width:"+a+"px; height:"+b+"px; line-height:"+b+"px;"},mq:function(){return"<input type='button' style='width:100%' class='webix_cal_done' value='"+webix.i18n.calendar.done+"'>"},kq:function(a,b){var c=a*(b?5:4),d=2*a;return"<div class='webix_cal_hours' style='width:"+c+"px'>"+webix.i18n.calendar.hours+"</div><div class='webix_cal_minutes' style='width:"+d+"px'>"+webix.i18n.calendar.minutes+"</div>"},yt:function(a,b){this.callEvent("onBeforeZoom",[a])&&(this.Np=a,a?this.cq(b):this.showCalendar(b),this.callEvent("onAfterZoom",[a]))},Jv:function(a){return!this.sz(a)&&this.aq[this.Np].Jv&&(a=this.aq[this.Np].Jv(a,this)),a},nq:function(a){var b=this.s.date,c=webix.Date.copy(b);this.aq[this.Np].dq(c,a);var d=this.Np-(this.NC?0:1),e=this.Np;if(c=this.Jv(c),this.sz(c)){this.yt(d,c);var f=this.s.type;("month"==f&&2!=e||"year"==f)&&this.zt(c)}},zt:function(a){this.callEvent("onBeforeDateSelect",[a])&&(this.selectDate(a,!0),this.callEvent("onDateSelect",[a]),this.callEvent("onAfterDateSelect",[a]))},on_click:{webix_cal_prev_button:function(a,b,c){this.$p(-1)},webix_cal_next_button:function(a,b,c){this.$p(1)},webix_cal_day_disabled:function(){return!1},webix_cal_outside:function(){return!!this.s.navigation&&void 0},webix_cal_day:function(a,b,c){var d=webix.html.index(c)-(this.s.weekNumber?1:0),e=webix.html.index(c.parentNode),f=webix.Date.add(this.Op().Rp,d+7*e,"day",!0);this.s.timepicker&&(f.setHours(this.s.date.getHours()),f.setMinutes(this.s.date.getMinutes())),this.zt(f)},webix_cal_time:function(a){if(this.aq[this.Np-1]){this.jq=!0;var b=this.Np-1;this.yt(b)}},webix_cal_done:function(a){var b=webix.Date.copy(this.s.date);b=this.Jv(b),this.zt(b)},webix_cal_month_name:function(a){if(this.jq=!1,2!=this.Np&&this.s.monthSelect){var b=Math.max(this.Np,0)+1;this.yt(b)}},webix_cal_block:function(a,b,c){if(this.jq){if(-1!==c.className.indexOf("webix_cal_day_disabled"))return!1;var d=-1!=c.className.indexOf("webix_cal_block_min")?this.Np-1:this.Np,e=this.s.date,f=webix.Date.copy(e);this.aq[d].dq(f,1*c.getAttribute("data-value")),this.cq(f)}else-1==c.className.indexOf("webix_cal_day_disabled")&&this.nq(1*c.getAttribute("data-value"))}},Jp:function(a,b){return a?("string"==typeof a&&(a=b?webix.Date.strToDate(b)(a):webix.i18n.parseFormatDate(a)),a):webix.Date.datePart(new Date)},sz:function(a){var b=this.s.blockDates&&this.s.blockDates.call(this,a),c=this.s.minDate,d=this.s.maxDate,e=c>a||a>d;return!b&&!e},showCalendar:function(a){a=this.Jp(a),this.s.date=a,this.render(),this.resize()},getSelectedDate:function(){return this.Mp?webix.Date.copy(this.Mp):this.Mp},getVisibleDate:function(){return webix.Date.copy(this.s.date)},setValue:function(a,b){this.selectDate(a,!0)},getValue:function(a){var b=this.getSelectedDate();return a&&(b=webix.Date.dateToStr(a)(b)),b},selectDate:function(a,b){a?(a=this.Jp(a),this.Mp=a,this.Lp=webix.Date.datePart(webix.Date.copy(a))):(this.Mp=null,this.Lp=null,this.s.date&&webix.Date.datePart(this.s.date)),b?this.showCalendar(a):this.render(),this.callEvent("onChange",[a])},locate:function(){return null}},webix.MouseEvents,webix.ui.view,webix.EventSystem),webix.protoUI({name:"property",$init:function(){this.w.className+=" webix_property",this.Ns=[]},defaults:{nameWidth:100,editable:!0},on_render:{checkbox:function(a,b){return"<input type='checkbox' class='webix_property_check' "+(a?"checked":"")+">"},color:function(a,b){return'<div class="webix_property_col_val"><div class=\'webix_property_col_ind\' style="background-color:'+(a||"#FFFFFF")+';"></div><span>'+a+"</span></div>"}},on_edit:{label:!1},ad:"webix_f_id",on_click:{webix_property_check:function(a){var b=this.locate(a);return this.getItem(b).value=!this.getItem(b).value,this.callEvent("onCheck",[b,this.getItem(b).value]),!1}},on_dblclick:{},registerType:function(a,b){if(b.template&&(this.on_render[a]=b.template),b.editor&&(this.on_edit[a]=b.editor),b.click)for(var c in b.click)this.on_click[c]=b.click[c]},elements_setter:function(a){this.oq={};for(var b=0;b<a.length;b++){var c=a[b];"multiselect"==c.type&&(c.optionslist=!0),c.id=c.id||webix.uid(),c.label=c.label||"",c.value=c.value||"",this.oq[c.id]=b,this.template=this.Et(a[b])}return a},showItem:function(a){webix.RenderStack.showItem.call(this,a)},locate:function(a){return webix.html.locate(arguments[0],this.ad)},getItemNode:function(a){return this.y.childNodes[this.oq[a]]},getItem:function(a){return this.s.elements[this.oq[a]]},ii:function(a){var b=this.getItem(a).type;if("checkbox"==b)return"inline-checkbox";var c=this.on_edit[b];return c!==!1&&(c||b)},li:function(a){return this.getItem(a)},ui:function(a,b,c){var d=this.oq[a.id],e=this.s.elements;if(c){for(var f=d+1;f<e.length;f++)if(b.call(this,e[f].id))return e[f].id}else for(var f=d-1;f>=0;f--)if(b.call(this,e[f].id))return e[f].id;return null},updateItem:function(){this.refresh()},ug:function(a){var b=this.getItemNode(a);return{left:b.offsetLeft+this.s.nameWidth,top:b.offsetTop,height:b.firstChild.offsetHeight,width:this.pq,parent:this.w}},setValues:function(a,b){this.s.complexData&&(a=webix.CodeParser.collapseNames(a)),b||this.qq();for(var c in a){var d=this.getItem(c);d&&(d.value=a[c])}this.rq=a,this.refresh()},qq:function(){for(var a=this.s.elements,b=0;b<a.length;b++)a[b].value=""},getValues:function(){for(var a=webix.clone(this.rq||{}),b=0;b<this.s.elements.length;b++){var c=this.s.elements[b];"label"!=c.type&&(a[c.id]=c.value)}return this.s.complexData&&(a=webix.CodeParser.expandNames(a)),a},refresh:function(){this.render()},$setSize:function(a,b){webix.ui.view.prototype.$setSize.call(this,a,b)&&(this.pq=this.bc-this.s.nameWidth,this.render())},$getSize:function(a,b){if(this.s.autoheight){var c=this.s.elements.length;this.s.height=Math.max(this.type.height*c,this.s.minHeight||0)}return webix.ui.view.prototype.$getSize.call(this,a,b)},jb:function(){var a=[],b=this.s.elements;if(b)for(var c=0;c<b.length;c++){var d=b[c];d.css&&"object"==typeof d.css&&(d.css=webix.html.createCss(d.css));var e='<div webix_f_id="'+d.id+'" class="webix_property_line '+(d.css||"")+'">';if("label"==d.type)a[c]=e+"<div class='webix_property_label_line'>"+d.label+"</div></div>";else{var f,g=this.on_render[d.type],h="<div class='webix_property_label' style='width:"+this.s.nameWidth+"px'>"+d.label+"</div><div class='webix_property_value' style='width:"+this.pq+"px'>";f=d.collection||d.options?d.template(d,d.value):d.format?d.format(d.value):d.value,g&&(f=g.call(this,d.value,d)),a[c]=e+h+f+"</div></div>"}}return a.join("")},type:{height:24,templateStart:webix.template(""),templateEnd:webix.template("</div>")},$skin:function(){this.type.height=webix.skin.$active.propertyItemHeight||24}},webix.AutoTooltip,webix.EditAbility,webix.MapCollection,webix.MouseEvents,webix.Scrollable,webix.SingleRender,webix.AtomDataLoader,webix.EventSystem,webix.ui.view),webix.protoUI({name:"colorboard",defaults:{template:'<div style="width:100%;height:100%;background-color:{obj.val}"></div>',palette:null,height:220,width:220,cols:12,rows:10,minLightness:.15,maxLightness:1},$init:function(a){webix.event(this.x,"click",webix.bind(function(a){var b=webix.html.locate(a,"webix_val");this.setValue(b),this.callEvent("onSelect",[this.s.value,a])},this))},sq:function(a){var b=this.s.palette;a=a.toUpperCase();for(var c=0,d=b.length;d>c;c++)for(var e=0,f=b[c].length;f>e;e++)if(b[c][e].toUpperCase()==a)return{row:c,col:e};return null},$setSize:function(a,b){webix.ui.view.prototype.$setSize.call(this,a,b)&&this.render()},getValue:function(){return this.s.value},re:function(){return this.x.firstChild},setValue:function(a){return a?("#"!=a.charAt(0)&&(a="#"+a),this.s.value=a,this.$setValue(a),a):void 0},uq:null,vq:function(){if(this.uq&&this.uq.parentNode)return this.uq;var a=this.uq=document.createElement("div");return a.className="webix_color_selector",this.x.lastChild.appendChild(a),a},$setValue:function(a){if(this.isVisible(this.s.id)){var b,c,d,e,f,g=0,h=0;if(d=this.sq(a),d&&(b=this.x.lastChild.childNodes[d.row].childNodes[d.col]),!(b&&b.parentNode&&b.parentNode.parentNode))return void(this.uq&&(this.uq.style.left="-100px"));e=b.parentNode,g=b.offsetLeft-e.offsetLeft,h=-(this.$height-(b.offsetTop-e.parentNode.offsetTop)),c=this.vq(),f=["left:"+g+"px","top:"+h+"px","width:"+b.style.width,"height:"+b.style.height].join(";"),"undefined"!=typeof c.style.cssText?c.style.cssText=f:c.setAttribute("style",f)}},wq:function(a){function b(a){return webix.color.toHex(a,2)}function c(a,c,d){return"#"+b(Math.floor(a))+b(Math.floor(c))+b(Math.floor(d))}function d(a,b,c){var d,f,g;if(b){var h=.5>c?c*(1+b):c+b-c*b,i=2*c-h;d=e(i,h,a+1/3),f=e(i,h,a),g=e(i,h,a-1/3)}else d=f=g=c;return{r:255*d,g:255*f,b:255*g}}function e(a,b,c){return 0>c&&(c+=1),c>1&&(c-=1),1/6>c?a+6*(b-a)*c:.5>=c?b:2/3>c?a+(b-a)*(2/3-c)*6:a}function f(a){for(var b=[],d=255,e=d/a,f=0;a>f;f++)d=Math.round(d>0?d:0),b.push(c(d,d,d)),d-=e;return b[b.length-1]="#000000",b}var g=[],h=a.rows-1,i=1/a.cols,j=(a.maxLightness-a.minLightness)/h,k=null;g.push(f(a.cols));for(var l=0,m=a.minLightness;h>l;l++){k=[];for(var n=0,o=0;n<a.cols;n++){var p=d(o,1,m);k.push(c(p.r,p.g,p.b)),o+=i}g.push(k),m+=j}this.s.palette=g},render:function(){function a(a,b,c){for(var f='<div class="webix_color_row">',g=0;g<a.length;g++)e.width=b[g],e.height=c,e.val=a[g],f+=d(e);return f+="</div>"}if(this.isVisible(this.s.id)){this.s.palette||this.wq(this.s);var b=this.s.palette;this.callEvent("onBeforeRender",[]);for(var c=this.s,d=webix.template('<div style="width:{obj.width}px;height:{obj.height}px;" webix_val="{obj.val}">'+(c.template||"")+"</div>"),e={width:0,height:0,val:0},f=this.$width,g=this.$height,h=[],i='<div class="webix_color_palette">',j="object"==typeof b[0]?b[0]:b,k=0;k<j.length;k++)h[k]=Math.floor(f/(j.length-k)),f-=h[k];if("object"==typeof b[0])for(var l=0;l<b.length;l++){var m=Math.floor(g/(b.length-l));g-=m;var n=b[l];i+=a(n,h,m)}else i+=a(b,h,g);i+="</div>",this.x.innerHTML=i,this.uq=null,this.s.value&&this.$setValue(this.s.value),this.callEvent("onAfterRender",[])}},refresh:function(){this.render()}},webix.ui.view,webix.EventSystem),webix.protoUI({name:"resizer",defaults:{width:7,height:7},$init:function(a){this.x.className+=" webix_resizer";var b=this.getParentView().Cc;webix.event(this.x,webix.env.mouse.down,this.xq,{bind:this}),webix.event(document.body,webix.env.mouse.up,this.yq,{bind:this});var c=this.zq();this.Aq=!1,this.Bq=c,this.Cq="x"==c?"width":"height","x"==c?a.height=0:a.width=0,b>0?(this.x.className+=" webix_resizer_v"+c,this.x.style.marginRight="-"+b+"px","x"==c?a.width=b:a.height=b,this.$nospace=!0):this.x.className+=" webix_resizer_"+c,this.x.innerHTML="<div class='webix_resizer_content'></div>","y"==c&&b>0&&(this.x.style.marginBottom="-"+(a.height||this.defaults.height)+"px")},xq:function(a){var b=this.Dq();b&&!this.s.disabled&&(a=a||event,this.Aq=!0,this.Pl=webix.html.pos(a),this.Eq=[],this.Fq(a,b[0]))},yq:function(){this.Aq=!1,this.Pl=!1},Fq:function(a,b){var c,d,e,f,g;a=a||event,c=this.Bq,this.getParentView().x.style.position="relative",e=webix.html.offset(this.x),f=webix.html.offset(this.getParentView().x),g=e[c]-f[c],d=webix.html.offset(b.$view)[c]-webix.html.offset(this.getParentView().$view)[c],this.Rl=[c,b,g,d],this.Gq=new webix.ui.resizearea({container:this.getParentView().x,dir:c,eventPos:this.Pl[c],start:g-1,height:this.$height,width:this.$width,border:1,margin:this.getParentView()["_padding"+c.toUpperCase()]}),this.Gq.attachEvent("onResizeEnd",webix.bind(this.Hq,this)),this.Gq.attachEvent("onResize",webix.bind(this.Iq,this)),webix.html.addCss(document.body,"webix_noselect",1)},zq:function(){return this.getParentView().mc?"y":"x"},Iq:function(){var a,b,c,d,e,f,g,h,i,j;if(this.Rl)for(a=this.Dq(),e=this.Rl[0],d=this.Gq.Jl-this.Rl[2],i=this.Jq(a,e,d),j=a[0]["$"+this.Cq]+a[1]["$"+this.Cq],g="y"==e?["minHeight","maxHeight"]:["minWidth","maxWidth"],f=0;2>f;f++){b=a[f].s,c=f?-d:d;var k=b[g[0]],l=b[g[1]];if(c>0&&l&&l<=i[f]||0>c&&(k||3)>=i[f])return this.Eq[f]=c>0?l:k||3,h=this.Kq(a,e),void(this.Gq.Dl.style["y"==e?"top":"left"]=this.Rl[3]+h[0]+"px");i[f]<3?this.Gq.Dl.style["y"==e?"top":"left"]=this.Rl[3]+f*j+1+"px":this.Eq[f]=null}},Dq:function(){var a,b;for(a=this.getParentView().q,b=0;b<a.length;b++)if(a[b]==this)return!a[b-1]||a[b-1].s.$noresize?null:!a[b+1]||a[b+1].s.$noresize?null:[a[b-1],a[b+1]]},Hq:function(a){if("undefined"!=typeof a){var b,c,d,e,f,g=this.getParentView().mc;if(this.Lq=null,this.Rl){if(c=this.Rl[0],d=a-this.Rl[2],b=this.Dq(),b[0]&&b[1]){f=this.Mq(b,c,d);for(var e=0;2>e;e++){var h=b[e].$getSize(0,0);if(g?h[2]==h[3]:Math.abs(h[1]-h[0])<3)b[e].s[this.Cq]=f[e],b[e].tc&&b[e].tc(this.Cq,f[e],g);else{var i=b[e].$view[g?"offsetHeight":"offsetWidth"];b[e].s.gravity=f[e]/i*b[e].s.gravity}}b[0].resize();for(var e=0;2>e;e++)b[e].callEvent&&b[e].callEvent("onViewResize",[]);webix.callEvent("onLayoutResize",[b])}this.Rl=!1}this.Rl=!1,this.Aq=!1,this.Eq=null,webix.html.removeCss(document.body,"webix_noselect")}},Kq:function(a){var b,c,d;return d=a[0]["$"+this.Cq]+a[1]["$"+this.Cq],this.Eq[0]?(b=this.Eq[0],c=d-b):this.Eq[1]&&(c=this.Eq[1],b=d-c),[b,c]},Jq:function(a,b,c){for(var d=[],e="height"==this.Cq?"offsetHeight":"offsetWidth",f=0;2>f;f++)d[f]=a[f].$view[e]+(f?-1:1)*c;return d},Mq:function(a,b,c){var d,e,f;if(this.Eq[0]||this.Eq[1])e=this.Kq(a,b);else for(e=this.Jq(a,b,c),d=0;2>d;d++)e[d]<0&&(f=e[0]+e[1],e[d]=1,e[1-d]=f-1);return e}},webix.MouseEvents,webix.ui.view),webix.protoUI({name:"multiview",defaults:{animate:{}},setValue:function(a){webix.$$(a).show()},getValue:function(){return this.getActiveId()},$init:function(){this.Mh=0,this.mc=1,this.x.style.position="relative",this.x.className+=" webix_multiview",this.Nq=[]},Oq:function(a,b){var c=webix.$$(a);c.Pq||(c.Qq=[],c.Pq={}),c.Pq[b]||(c.Pq[b]=!0,c.Qq.push(b))},Rq:function(a){var b=webix.$$(a);if(this.s.keepViews&&(b.x.style.display=""),this.Nq[this.Nq.length-2]!=a?(10==this.Nq.length&&this.Nq.splice(0,1),this.Nq.push(a)):this.Nq.splice(this.Nq.length-1,1),b.Pq){for(var c=0;c<b.Qq.length;c++)webix.$$(b.Qq[c]).render();b.Qq=[],b.Pq={}}},addView:function(){var a=webix.ui.baselayout.prototype.addView.apply(this,arguments);return this.s.keepViews?webix.$$(a).x.style.display="none":webix.html.remove(webix.$$(a).x),a},Vx:function(a,b){if(a==this.Mh){var c=Math.max(a-1,1);this.q[c]&&this.fc(this.q[c],!1)}a<this.Mh&&this.Mh--},Fb:function(){},kc:function(a){a=a||this.nc;for(var b=0;b<a.length;b++)a[b].Ob=this.s.borderless?{top:1,left:1,right:1,bottom:1}:this.s.Ob||{};webix.ui.baselayout.prototype.kc.call(this,a);for(var b=1;b<this.q.length;b++)this.s.keepViews?this.q[b].x.style.display="none":webix.html.remove(this.q[b].x);for(var b=0;b<a.length;b++){var c=this.q[b];if(!c.q||c.Gc){var d=c.s.Ob;d.top&&(c.x.style.borderTopWidth="0px"),d.left&&(c.x.style.borderLeftWidth="0px"),d.right&&(c.x.style.borderRightWidth="0px"),d.bottom&&(c.x.style.borderBottomWidth="0px")}}this.Rq(this.getActiveId())},cells_setter:function(a){this.nc=a},Sq:function(a,b){var c=(this.s.animate||{}).direction,d="top"==c||"bottom"==c;return b>a?d?"bottom":"right":d?"top":"left"},fc:function(a,b){var c=this.getParentView();if(c&&c.getTabbar&&c.getTabbar().setValue(a.s.$id||a.s.id),this.Wh)return webix.delay(this.fc,this,[a,b],100);for(var d=-1,e=0;e<this.q.length;e++)if(this.q[e]==a){d=e;break}if(!(0>d||d==this.Mh)){var f=this.q[this.Mh],g=this.q[d];if(f.$getSize(0,0),(b||"undefined"==typeof b)&&webix.animate.isSupported()&&this.s.animate){var h=webix.extend({},this.s.animate);this.s.keepViews&&(h.keepViews=!0),h.direction=this.Sq(d,this.Mh),h=webix.Settings.E(b||{},h);var i=webix.animate.formLine(g.x,f.x,h);g.$getSize(0,0),g.$setSize(this.bc,this.dc);var j=h.callback;h.callback=function(){webix.animate.breakLine(i,this.s.keepViews),this.Wh=!1,j&&j.call(this),j=h.master=h.callback=null,this.resize()},h.master=this,this.Mh=d,this.Rq(this.getActiveId()),webix.animate(i,h),this.Wh=!0}else this.s.keepViews?f.x.style.display="none":(webix.html.remove(f.x),this.x.appendChild(this.q[e].x)),this.Mh=d,f.resize(),this.Rq(this.getActiveId());g.callEvent&&(g.callEvent("onViewShow",[]),webix.ui.each(g,this.Lw)),this.callEvent("onViewChange",[f.s.id,g.s.id])}},$getSize:function(a,b){var c=this.q[this.Mh].$getSize(0,0);if(this.s.fitBiggest)for(var d=0;d<this.q.length;d++)if(d!=this.Mh)for(var e=this.q[d].$getSize(0,0),f=0;4>f;f++)c[f]=Math.max(c[f],e[f]);var g=webix.ui.baseview.prototype.$getSize.call(this,0,0);return g[1]>=1e5&&(g[1]=0),g[3]>=1e5&&(g[3]=0),g[0]=(g[0]||c[0])+a,g[1]=(g[1]||c[1])+a,g[2]=(g[2]||c[2])+b,g[3]=(g[3]||c[3])+b,g},$setSize:function(a,b){this.lc=[a,b],webix.ui.baseview.prototype.$setSize.call(this,a,b),this.q[this.Mh].$setSize(a,b)},isVisible:function(a,b){return b&&b!=this.getActiveId()?(a&&this.Oq(b,a),!1):webix.ui.view.prototype.isVisible.call(this,a,this.s.id)},getActiveId:function(){return this.q.length?this.q[this.Mh].s.id:null},back:function(a){if(a=a||1,this.callEvent("onBeforeBack",[this.getActiveId(),a])){if(this.Nq.length>a){var b=this.Nq[this.Nq.length-a-1];return webix.$$(b).show(),b}return null}return null}},webix.ui.baselayout),webix.protoUI({name:"form",defaults:{type:"form",autoheight:!0},Tq:-1,_f:"webix_form",ag:!0,$getSize:function(a,b){this.cc&&!this.s.width&&(a+=webix.ui.scrollSize);var c=webix.ui.layout.prototype.$getSize.call(this,a,b);return(this.s.scroll||!this.s.autoheight)&&(c[2]=this.s.height||this.s.minHeight||0,c[3]+=1e5),c}},webix.ui.toolbar),webix.protoUI({name:"menu",Oh:"webix_menu",$init:function(a){a.autowidth&&(this.KA=!0,delete a.autowidth),this.data.attachEvent("onStoreUpdated",webix.bind(function(){this.Uq()},this)),this.attachEvent("onMouseMove",this.Vq),this.attachEvent("onMouseOut",function(){this.Wq()&&"click"==this.s.openAction||this.Xq||this.Uq()}),this.attachEvent("onItemClick",function(a,b,c){var d=this.getItem(a);if(d){if(d.$template)return;var e=this.getTopMenu();if(!this.data.getMark(a,"webix_disabled")){if(!e.callEvent("onMenuItemClick",[a,b,c]))return void(b.showpopup=!0);this!=e&&e.Le(a,b,c),d.submenu?(this!==e&&!webix.env.touch||"click"!=e.s.openAction||this.Yq(a,c),b.showpopup=!0):(e.Uq(!0),e.$q&&e.hide())}}}),this.data.attachEvent("onClearAll",function(){this._q=[]}),this.data._q=[]},sizeToContent:function(){if("y"==this.s.layout){var a=[];this.data.each(function(b){a.push(this.jb(b))},this),this.config.width=webix.html.getTextSize(a,this.$view.className).width+20,this.resize()}},getTopMenu:function(){for(var a=this;a.ar;)a=webix.$$(a.ar);return a},Rh:function(a){this.s.autoheight&&(a=this.count());for(var b=0,c=0;a>c;c++){var d=this.data.pull[this.data.order[c]];b+=d&&"Separator"==d.$template?4:this.type.height}return b},on_mouse_move:{},type:{css:"menu",width:"auto",templateStart:function(a,b,c){if("Separator"===a.$template||"Spacer"===a.$template)return'<div webix_l_id="#id#" class="webix_context_'+a.$template.toLowerCase()+'">';var d=(a.href?" href='"+a.href+"' ":"")+(a.target?" target='"+a.target+"' ":"");return webix.ui.list.prototype.type.templateStart(a,b,c).replace(/^<div/,"<a "+d)+(a.submenu&&b.subsign?"<div class='webix_submenu_icon'></div>":"")},templateEnd:function(a,b,c){return"Separator"===a.$template||"Spacer"===a.$template?"</div>":"</a>"},templateSeparator:webix.template("<div class='sep_line'></div>"),templateSpacer:webix.template("<div></div>")},getMenu:function(a){if(this.data.pull[a])return this;for(var b in this.data.pull){var c=this.getItem(b);if(c.submenu){var d=this.br(c).getMenu(a);if(d)return d}}},getSubMenu:function(a){var b=this.getMenu(a),c=b.getItem(a);return c.submenu?b.br(c):null},getMenuItem:function(a){return this.getMenu(a).getItem(a)},br:function(a){var b=webix.$$(a.submenu);return b||(a.submenu=this.cr(a),b=webix.$$(a.submenu)),b},Vq:function(a,b,c){this.Wq()&&this.Yq(a,c)},Wq:function(){var a=this.getTopMenu();if("click"==a.s.openAction){if(webix.env.touch)return!1;var b=a.dr;return!(!b||!webix.$$(b).isVisible())}return!0},Yq:function(a,b){var c=this.getItem(a);if(c&&(this.Xq=null,this.dr&&c.submenu!=this.dr&&this.Uq(!0),c.submenu&&!this.config.hidden)){var d=this.br(c);if(this.data.getMark(a,"webix_disabled"))return;this.getTopMenu().KA&&d.sizeToContent&&!d.isVisible()&&d.sizeToContent(),d.show(b,{pos:this.s.subMenuPos}),d.ar=this.s.id,this.dr=c.submenu;
}},disableItem:function(a){this.getMenu(a).addCss(a,"webix_disabled")},enableItem:function(a){this.getMenu(a).removeCss(a,"webix_disabled")},er:function(a,b){var c=this.data;c._q[a]!=b&&(c._q[a]=b,c.filter(function(a){return!c._q[a.id]}),this.resize())},hideItem:function(a){var b=this.getMenu(a);b&&b.er(a,!0)},showItem:function(a){var b=this.getMenu(a);return b?(b.er(a,!1),webix.ui.list.prototype.showItem.call(b,a)):void 0},Uq:function(a){if(this.dr){var b=webix.$$(this.dr);b.Uq&&b.Uq(a),(a||!b.gr)&&(b.hide(),this.dr=null)}},cr:function(a){var b={view:"submenu",data:a.submenu},c=this.getTopMenu().s.submenuConfig;c&&webix.extend(b,c,!0);var d=this.getMenuItem(a.id);d&&d.config&&webix.extend(b,d.config,!0);var e=webix.ui(b);return e.ar=this,e.s.id},$skin:function(){webix.ui.list.prototype.$skin.call(this),this.type.height=webix.skin.$active.menuHeight},defaults:{scroll:"",layout:"x",mouseEventDelay:100,subMenuPos:"bottom"}},webix.ui.list),webix.protoUI({name:"submenu",$init:function(){this.gd=webix.clone(this.hr),this.gd.A=this,this.attachEvent("onMouseOut",function(){"click"!=this.getTopMenu().s.openAction&&(this.Xq||this.gr||this.hide())}),this.attachEvent("onMouseMoving",function(){this.ar&&(webix.$$(this.ar).Xq=!0)})},$skin:function(){webix.ui.menu.prototype.$skin.call(this),webix.ui.popup.prototype.$skin.call(this),this.type.height=webix.skin.$active.menuHeight},hr:{$getSize:function(a,b){var c=1*this.A.s.height,d=1*this.A.s.width,e=webix.ui.menu.prototype.$getSize.call(this.A,a,b);return this.A.s.height=c,this.A.s.width=d,e},$setSize:function(a,b){this.A.s.scroll&&(this.A.ed.style.height=b+"px")},destructor:function(){this.A=null}},body_setter:function(){},getChildViews:function(){return[]},defaults:{width:150,subMenuPos:"right",layout:"y",autoheight:!0},type:{height:webix.skin.menuHeight,subsign:!0}},webix.ui.menu,webix.ui.popup),webix.ContextHelper={defaults:{padding:"4",hidden:!0},body_setter:function(a){return a=webix.ui.window.prototype.body_setter.call(this,a),this.gd.x.style.borderWidth="0px",a},attachTo:function(a){var b;b=a.on_context?a.attachEvent("onAfterContextMenu",webix.bind(this.ir,this)):webix.event(a,"contextmenu",this.jr,{bind:this}),this.attachEvent("onDestruct",function(){a.detachEvent?a.detachEvent(b):webix.eventRemove(b),a=null})},getContext:function(){return this.nh},setContext:function(a){this.nh=a},jr:function(a){return this.nh=webix.toNode(a||event),this.kr(a)},ir:function(a,b,c){return this.nh={obj:webix.$$(b),id:a},this.kr(b)},kr:function(a){var b=this.show(a,null,!0);return b===!1?b:(webix.callEvent("onClick",[]),webix.html.preventEvent(a))},gr:!0,master_setter:function(a){return this.attachTo(a),null}},webix.protoUI({name:"context"},webix.ContextHelper,webix.ui.popup),webix.protoUI({name:"contextmenu",$q:!0,$init:function(a){a.submenuConfig&&webix.extend(a,a.submenuConfig)}},webix.ContextHelper,webix.ui.submenu),webix.protoUI({name:"tabbar",$skin:function(){var a=webix.skin.$active,b=this.defaults;b.topOffset=a.tabTopOffset||0,b.tabOffset="undefined"!=typeof a.tabOffset?a.tabOffset:10,b.bottomOffset=a.tabBottomOffset||0,b.height=a.tabbarHeight,b.tabMargin=a.tabMargin,b.inputPadding=a.inputPadding,b.tabMinWidth=a.tabMinWidth||100,b.tabMoreWidth=a.tabMoreWidth||40},ut:function(){var a,b,c=this.s,d=this.OC||c.options,e=this.we-2*c.tabOffset,f=c.optionWidth||c.tabMinWidth;if(b=d.length,c.tabMinWidth&&f>e/b)return{max:parseInt(e/f,10)||1};if(!c.optionWidth)for(a=0;b>a;a++)d[a].width&&(e-=d[a].width+(a||c.type?0:c.tabMargin),b--);return{width:b?e/b:c.tabMinWidth}},Je:function(){var a=this.s;if(!a.tabbarPopup){var b={view:"popup",width:a.popupWidth||200,body:{view:"list",borderless:!0,select:!0,css:"webix_tab_list",autoheight:!0,yCount:a.yCount,type:{template:a.popupTemplate}}},c=webix.ui(b);c.getBody().attachEvent("onBeforeSelect",webix.bind(function(a){return a&&this.callEvent("onBeforeTabClick",[a])?(this.setValue(a),webix.$$(this.s.tabbarPopup).hide(),this.callEvent("onAfterTabClick",[a]),!0):void 0},this)),a.tabbarPopup=c.s.id,this.Ns.push(c)}this.Je=function(){}},getPopup:function(){return this.Je(),webix.$$(this.s.tabbarPopup)},moreTemplate_setter:webix.template,popupTemplate_setter:webix.template,defaults:{popupWidth:200,popupTemplate:"#value#",yCount:7,moreTemplate:'<span class="webix_icon fa-ellipsis-h"></span>',template:function(a,b){var c,d,e,f,g,h,i,j,k,l;if(b.OC=j=b.yC(a.options),j.length){b.Be(j),!a.value&&j.length&&(a.value=j[0].id),d="",a.tabOffset&&(d+="<div class='webix_tab_filler' style='width:"+a.tabOffset+"px;'>&nbsp;</div>"),c=b.we-2*a.tabOffset-(a.type?0:a.tabMargin*(j.length-1)),k=a.topOffset+a.bottomOffset;var m=b.ut();if(m.max&&m.max<j.length){var n=b.getPopup();n.hide();var o=n.getBody()||null;if(o)if(m.max){var p=!1;for(e=0;e<j.length&&!p;e++)if(j[e].id==a.value&&(p=!0,e+1>m.max)){var q=j.splice(e,1),r=j.splice(0,m.max-1).concat(q);j=r.concat(j)}o.clearAll(),o.parse(j.slice(m.max))}else o.clearAll()}else b.s.tabbarPopup&&webix.$$(b.s.tabbarPopup).hide();i=a.tabOffset;var s=!1;for(e=0;e<j.length&&!s;e++)m&&m.max?(m.max==e+1&&(s=!0),c=b.we-2*a.tabOffset-(!a.type&&m.max>1?a.tabMargin*(m.max-1):0),l=(c-a.tabMoreWidth)/m.max):l=m.width,l=j[e].width||a.optionWidth||l,i+=l+(e&&!a.type?a.tabMargin:0),a.tabMargin>0&&e&&!a.type&&(d+="<div class='webix_tab_filler' style='width:"+a.tabMargin+"px;'></div>"),d+=b.vt(j[e],l),s&&(d+='<div class="webix_tab_more_icon" style="width:'+a.tabMoreWidth+'px;">'+a.moreTemplate(a,b)+"</div>",i+=a.tabMoreWidth);f=b.bc-i,f>0&&!a.type&&(d+="<div class='webix_tab_filler' style='width:"+f+"px;'>&nbsp;</div>")}else d="<div class='webix_tab_filler' style='width:"+b.we+"px; border-right:0px;'></div>";return g="",h=k&&!a.type?"height:"+(b.dc-k)+"px":"",a.topOffset&&!a.type&&(g+="<div class='webix_before_all_tabs' style='width:100%;height:"+a.topOffset+"px'></div>"),g+="<div style='"+h+"' class='webix_all_tabs "+(a.type?"webixtype_"+a.type:"")+"'>"+d+"</div>",a.bottomOffset&&!a.type&&(g+="<div class='webix_after_all_tabs' style='width:100%;height:"+a.bottomOffset+"px'></div>"),g}},vt:function(a,b){var c,d="",e=this.config;if(a.id==e.value&&(d=" webix_selected"),a.css&&(d+=" "+a.css),b=a.width||b,c='<div class="webix_item_tab'+d+'" button_id="'+a.id+'" style="width:'+b+'px;">',this.lr){var f=this.dc-2*e.inputPadding-2,g=this.dc-2,h=webix.extend({cheight:f,aheight:g},a);c+=this.lr(h)}else{var i=a.icon?"<span class='webix_icon fa-"+a.icon+"'></span> ":"";c+=i+a.value}return(a.close||e.close)&&(c+="<span class='webix_tab_close webix_icon fa-times'></span>"),c+="</div>"},ne:{image:"<div class='webix_img_btn_top' style='height:#cheight#px;background-image:url(#image#);'><div class='webix_img_btn_text'>#value#</div></div>",icon:"<div class='webix_img_btn' style='line-height:#cheight#px;height:#cheight#px;'><span class='webix_icon_btn fa-#icon#' style='max-width:#cheight#px;max-height:#cheight#px;'></span>#value#</div>",iconTop:"<div class='webix_img_btn_top' style='height:#cheight#px;width:100%;top:0px;text-align:center;'><span class='webix_icon fa-#icon#'></span><div class='webix_img_btn_text'>#value#</div></div>"},type_setter:function(a){return this.s.tabOffset=0,this.ne[a]&&(this.lr=webix.template(this.ne[a])),a}},webix.ui.segmented),webix.protoUI({name:"tabview",defaults:{type:"clean"},setValue:function(a){this.q[0].setValue(a)},getValue:function(){return this.q[0].getValue()},getTabbar:function(){return this.q[0]},getMultiview:function(){return this.q[1]},addView:function(a){var b=a.body.id=a.body.id||webix.uid();this.getMultiview().addView(a.body),a.id=a.body.id,a.value=a.header,delete a.body,delete a.header;var c=this.getTabbar();return c.addOption(a),c.refresh(),b},removeView:function(a){var b=this.getTabbar();b.removeOption(a),b.refresh()},$init:function(a){this.$ready.push(this.Nv);for(var b=a.cells,c=[],d=b.length-1;d>=0;d--){var e=b[d].body||b[d];e.id||(e.id="view"+webix.uid()),c[d]={value:b[d].header,id:e.id,close:b[d].close,width:b[d].width,hidden:!!b[d].hidden},b[d]=e}var f={view:"tabbar",multiview:!0},g={view:"multiview",cells:b,animate:!!a.animate};a.value&&(f.value=a.value),a.tabbar&&webix.extend(f,a.tabbar,!0),a.multiview&&webix.extend(g,a.multiview,!0),f.options=f.options||c,a.rows=[f,g],delete a.cells,delete a.tabs},Nv:function(){this.getTabbar().attachEvent("onOptionRemove",function(a){var b=webix.$$(a);b&&b.destructor()})}},webix.ui.layout),function(){function a(a){return a.tagName?a.tagName.toLowerCase():null}function b(a,b){if(!a.getAttribute)return null;var c=a.getAttribute(b);return c?c.toLowerCase():null}function c(){var b=a(this);return e[b]?e[b](this):e.other(this)}function d(b){var c=a(this);return f[c]?f[c](this,b):f.other(this,b)}var e={radio:function(a){for(var b=0;b<a.length;b++)if(a[b].checked)return a[b].value;return""},input:function(a){var c=b(a,"type");return"checkbox"===c?a.checked:a.value},textarea:function(a){return a.value},select:function(a){var b=a.selectedIndex;return a.options[b].value},other:function(a){return a.innerHTML}},f={radio:function(a,b){for(var c=0;c<a.length;c++)a[c].checked=a[c].value==b},input:function(a,c){var d=b(a,"type");"checkbox"===d?a.checked=!!c:a.value=c},textarea:function(a,b){a.value=b},select:function(a,b){a.value=b?b:a.firstElementChild.value||b},other:function(a,b){a.innerHTML=b}};webix.protoUI({name:"htmlform",$init:function(a){this.elements={},this.mr=!1,a.content&&(a.container==a.content||!a.container&&a.content==document.body)&&(this.nr=!0)},content_setter:function(a){if(a=webix.toNode(a),this.nr)for(;a.childNodes.length>1;)this.x.childNodes[0].appendChild(a.childNodes[0]);else this.x.childNodes[0].appendChild(a);return this.pc(),!0},render:function(){webix.ui.template.prototype.render.apply(this,arguments),this.pc()},pc:function(){var e=this.x.querySelectorAll("[name]");this.elements={};for(var f=0;f<e.length;f++){var g=e[f],h=b(g,"name");if(h){var i="button"===a(g),j=b(g,"type"),k=i||"button"===j||"submit"===j;if("radio"===j){var l=this.elements[h]||[];l.tagName="radio",l.push(g),g=l}this.elements[h]=g,g.getValue=c,g.setValue=d,g.Ce=!k,g.s={defaultValue:g.getValue()}}}return this.elements},Te:function(a,b){this.Qe(a,b);var c=this.x.querySelector('[name="'+a+'"]');c&&webix.html.addCss(c,"invalid")},Qe:function(a,b){var c=this.x.querySelector('[name="'+a+'"]');c&&webix.html.removeCss(c,"invalid")}},webix.ui.template,webix.Values)}(),webix.dp=function(a,b){if("object"==typeof a&&a.s&&(a=a.s.id),webix.dp.ur[a]||b)return webix.dp.ur[a];("string"==typeof a||"number"==typeof a)&&(a={master:webix.$$(a)});var c=new webix.DataProcessor(a),d=c.s.master.s.id;return webix.dp.ur[d]=c,webix.$$(d).attachEvent("onDestruct",function(){webix.dp.ur[this.s.id]=null,delete webix.dp.ur[this.s.id]}),c},webix.dp.ur={},webix.dp.$$=function(a){return webix.dp.ur[a]},webix.DataProcessor=webix.proto({defaults:{autoupdate:!0,updateFromResponse:!1,mode:"post",operationName:"webix_operation",trackMove:!1},$init:function(){this.reset(),this.vr=!1,this.name="DataProcessor",this.$ready.push(this.Mi)},reset:function(){this.zr=[]},url_setter:function(a){var b="";if("string"==typeof a){var c=a.split("->");c.length>1&&(a=c[1],b=c[0])}else a&&a.mode&&(b=a.mode,a=a.url);return b?webix.proxy(b,a):a},master_setter:function(a){var b=a;return"DataStore"!=a.name&&(b=a.data),this.s.store=b,a},Mi:function(){this.s.store.attachEvent("onStoreUpdated",webix.bind(this.Ar,this)),this.s.store.attachEvent("onDataMove",webix.bind(this.Br,this))},ignore:function(a,b){var c=this.vr;this.vr=!0,a.call(b||this),this.vr=c},off:function(){this.vr=!0},on:function(){this.vr=!1},Cr:function(a){var b={};for(var c in a)0!==c.indexOf("$")&&(b[c]=a[c]);return b},save:function(a,b,c){b=b||"update",this.Dr(a,c||this.s.store.getItem(a),b)},Dr:function(a,b,c){if("object"==typeof a&&(a=a.toString()),!a||this.vr===!0||!c||"paint"==c)return!0;var d=this.s.store;d&&d.vf&&(b=d.vf(b));var e={id:a,data:this.Cr(b),operation:c};if(webix.isUndefined(b.$parent)||(e.data.parent=b.$parent),"delete"!=e.operation){var f=this.s.master;f&&f.data&&f.data.getMark&&f.data.getMark(a,"webix_invalid")&&(e.Er=!0),this.validate(null,e.data)||(e.Er=!0)}return this.Fr(e)&&this.zr.push(e),this.s.autoupdate&&this.send(),!0},Br:function(a,b,c,d){if(this.s.trackMove){var e=webix.copy(this.s.store.getItem(a));this.s.store.order,e.webix_move_index=b,e.webix_move_id=d,e.webix_move_parent=c,this.Dr(a,e,"order")}},Ar:function(a,b,c){switch(c){case"save":c="update";break;case"update":c="update";break;case"add":c="insert";break;case"delete":c="delete";break;default:return!0}return this.Dr(a,b,c)},Fr:function(a){for(var b=0;b<this.zr.length;b++){var c=this.zr[b];if(c.id==a.id)return"delete"==a.operation&&("insert"==c.operation?this.zr.splice(b,1):c.operation="delete"),c.data=a.data,c.Er=a.Er,!1}return!0},send:function(){this.Gr()},Gr:function(){if(this.s.url){for(var a=this.zr,b=[],c=this.s.url,d=0;d<a.length;d++){var e=a[d];if(!e.Hr&&!e.Er){var f=e.id,g=e.operation,h="object"!=typeof c||c.$proxy?c:c[g],i=h&&(h.$proxy||"function"==typeof h);if(h&&(this.s.store.uf&&this.s.store.uf(e.data),this.callEvent("onBefore"+g,[f,e]))){if(e.Hr=!0,!this.callEvent("onBeforeDataSend",[e]))return;e.data=this.Ir(e.data);var j=this.at({id:e.id,status:e.operation});h.$proxy?h.save?h.save(this.config.master,e,this,j):b.push(e):("insert"==g&&delete e.data.id,i?h(e.id,e.operation,e.data).then(function(a){a&&"function"==typeof a.json&&(a=a.json()),j.success("",a,-1)},function(a){j.error("",null,a)}):(e.data[this.s.operationName]=g,this.G(h,e.data,this.s.mode,g,j))),this.callEvent("onAfterDataSend",[e])}}}c.$proxy&&c.saveAll&&b.length&&c.saveAll(this.config.master,b,this,this.at({}))}},Ir:function(a){var b={};for(var c in a)0!==c.indexOf("$")&&(b[c]=a[c]);return b},G:function(a,b,c,d,e){return"function"==typeof a?a(b,d,e):void webix.ajax()[c](a,b,e)},at:function(a){var b=this;return{success:function(c,d,e){return b.xr(a,c,d,e)},error:function(c,d,e){return b.yr(a,c,d,e)}}},attachProgress:function(a,b,c){this.attachEvent("onBeforeDataSend",a),this.attachEvent("onAfterSync",b),this.attachEvent("onAfterSaveError",c),this.attachEvent("onLoadError",c)},yr:function(a,b,c,d){a?this.Jr(!0,a.id,!1,a.status,!1,{text:b,data:c,loader:d}):(this.callEvent("onLoadError",arguments),webix.callEvent("onLoadError",[b,c,d,this]))},Jr:function(a,b,c,d,e,f){var g=this.s.master,h=this.getItemState(b);if(h.Hr=!1,a){if(this.callEvent("onBeforeSaveError",[b,d,e,f]))return h.Er=!0,this.s.undoOnError&&g.s.undo&&g.undo(b),void this.callEvent("onAfterSaveError",[b,d,e,f])}else this.setItemState(b,!1);c&&b!=c&&this.s.store.changeId(b,c),e&&"delete"!=d&&this.s.updateFromResponse&&this.ignore(function(){this.s.store.updateItem(c||b,e)}),this.s.undoOnError&&g.s.undo&&g.removeUndo(c||b),this.callEvent("onAfterSave",[e,b,f]),this.callEvent("onAfter"+d,[e,b,f])},processResult:function(a,b,c){var d=b&&("error"==b.status||"invalid"==b.status),e=!!b&&(b.newid||b.id);this.Jr(d,a.id,e,a.status,b,c)},xr:function(a,b,c,d){if(this.callEvent("onBeforeSync",[a,b,c,d]),-1===d)this.processResult(a,c,{});else{var e=this.s.url;if(e.$proxy&&e.result)e.result(a,this.s.master,this,b,c,d);else{var f;b&&(f=c.json(),b&&"undefined"==typeof f&&(f={status:"error"})),this.processResult(a,f,{text:b,data:c,loader:d})}}this.callEvent("onAfterSync",[a,b,c,d])},escape:function(a){return this.s.escape?this.s.escape(a):encodeURIComponent(a)},getState:function(){if(!this.zr.length)return!1;for(var a=this.zr.length-1;a>=0;a--)if(this.zr[a].Hr)return"saving";return!0},getItemState:function(a){var b=this.bt(a);return this.zr[b]||null},setItemState:function(a,b){if(b)this.save(a,b);else{var c=this.bt(a);c>-1&&this.zr.splice(c,1)}},bt:function(a){for(var b=-1,c=0;c<this.zr.length;c++)if(this.zr[c].id==a){b=c;break}return b}},webix.Settings,webix.EventSystem,webix.ValidateData),webix.jsonp=function(a,b,c,d){var e="webix_jsonp_"+webix.uid(),f=document.createElement("script");f.id=e,f.type="text/javascript";var g=document.getElementsByTagName("head")[0];"function"==typeof b&&(d=c,c=b,b={}),b||(b={}),b.jsonp="webix.jsonp."+e,webix.jsonp[e]=function(){c.apply(d||window,arguments),f.parentNode.removeChild(f),c=g=d=f=null,delete webix.jsonp[e]};var h=[];for(var i in b)h.push(i+"="+encodeURIComponent(b[i]));a+=(-1==a.indexOf("?")?"?":"&")+h.join("&"),f.src=a,g.appendChild(f)},webix.markup={namespace:"x",attribute:"data-",dataTag:"li",Ys:/-([a-z])/g,Zs:function(a){return a[1].toUpperCase()},Lr:{width:!0,height:!0,gravity:!0,margin:!0,padding:!0,paddingX:!0,paddingY:!0,minWidth:!0,maxWidth:!0,minHeight:!0,maxHeight:!0,headerRowHeight:!0},AA:{disabled:!0,hidden:!0},Mr:function(a,b){return webix.ui.hasMethod(a,b)},init:function(a,b,c){a=a||document.body;for(var d=[],e=this.Nr(a),f=e.html,g=null,h=e.length-1;h>=0;h--)d[h]=e[h];for(var h=0;h<d.length;h++){var i;i=this.Or(d[h],f),i.$scope=c,g=this.Pr(i,d[h],f,b)}return g},parse:function(a,b){"string"==typeof a&&(a=webix.DataDriver[b||"xml"].toObject(a,a));var c=this.Nr(a,b);return this.Or(c[0],c.html)},Pr:function(a,b,c,d){return d?a.container=d:(a.container=b.parentNode,webix.html.remove(b)),this.Mr(a.view,"setPosition")&&delete a.container,webix.ui(a)},Nr:function(a){this.Qr=this.namespace?this.namespace+":":"",this.Rr=this.Qr+"ui";var b=a.getElementsByTagName(this.Rr);return!b.length&&a.documentElement&&a.documentElement.tagName==this.Rr&&(b=[a.documentElement]),!b.length&&this.namespace&&(b=a.getElementsByTagName("ui"),!b.length&&a.documentElement&&"ui"==a.documentElement.tagName&&(b=[a.documentElement])),b.length||(b=this.Sr(a),b.html=!0),b},Sr:function(a){if(a.getAttribute&&a.getAttribute(this.attribute+"view"))return[a];for(var b=a.querySelectorAll("["+this.attribute+"view]"),c=[],d=0;d<b.length;d++)b[d].parentNode.getAttribute(this.attribute+"view")||c.push(b[d]);return c},Or:function(a,b,c){var d=!1;if(!c){var e=this.Tr(a,b);if("ui"==e)for(var f=a.childNodes,g=0;g<f.length;g++)if(1==f[g].nodeType)return this.Or(f[g],b);c={view:e},b&&"table"==a.tagName.toLowerCase()&&(c.data=a,c.datatype="htmltable",d=!0)}for(var h="cols"==c.view||"rows"==c.view||this.Mr(c.view,"addView"),i=[],j=0,k=!(b||a.style),l=a.firstChild;l;){if(1==l.nodeType){var e=this.Tr(l,b);if("data"==e){j=1;var m=l;l=l.nextSibling,c.data=this.Ur(m,b);continue}if("config"==e){this.Vr(l,c,b);var n=l;l=l.nextSibling,webix.html.remove(n);continue}if("column"==e){j=1;var o=this.Wr(l,b);o.header=o.header||o.value,o.width=1*o.width||"",c.columns=c.columns||[],c.columns.push(o)}else if(e||h&&b){var p=this.Or(l,b,{view:e});"head"==p.view?c.head=p.rows?p.rows[0]:p.template:"body"==p.view?this.Mr(c.view,"addView")?i.push({body:p.rows?p.rows[0]:p.value,header:p.header||""}):c.body=p.rows?1==p.rows.length?p.rows[0]:{rows:p.rows}:p.value:i.push(p)}else if(k){j=1;var q=l.tagName;b&&(q=q.toLowerCase().replace(this.Ys,this.Zs)),c[q]=webix.DataDriver.xml.tagToObject(l)}}l=l.nextSibling}if(this.Xr(a,c,b),i.length)c.stack?c[c.stack]=i:this.Mr(c.view,"setValues")?c.elements=i:"rows"==c.view?(c.view="layout",c.rows=i):"cols"==c.view?(c.view="layout",c.cols=i):this.Mr(c.view,"setValue")?c.cells=i:this.Mr(c.view,"getBody")?c.body=1==i.length?i[0]:{rows:i}:c.rows=i;else if(!d&&!j)if(!b||c.template||c.view&&"template"!=c.view){var r=this.Yr(a,b);if(r){var s="template";this.Mr(c.view,"setValue")&&(s="value"),c[s]=c[s]||r}}else c.view="template",c.content=a;return c},Zr:function(a){var b=a.replace(/\s+/gm,"");return!(b.length>0)},$r:{body:1,head:1,data:1,rows:1,cols:1,cells:1,elements:1,ui:1,column:1,config:1},Vr:function(a,b,c){var d=this.Xr(a,{});d.name?(b[d.name]=d,delete d.name):d.stack?b[d.stack]=[]:b=d;for(var e=a.childNodes,f=0;f<e.length;f++){var g=null;g=1==e[f].nodeType&&"config"==e[f].tagName.toLowerCase()&&e[f].attributes.length?this.Vr(e[f],d,c):e[f].innerHTML,d.stack&&g&&b[d.stack].push(g)}return b},Tr:function(a,b){if(b)return a.getAttribute(this.attribute+"view")||("config"==a.tagName.toLowerCase()?"config":null);var c=a.tagName.toLowerCase();if(this.namespace){if(0===c.indexOf(this.Qr)||a.scopeName==this.namespace)return c.replace(this.Qr,"")}else if(webix.ui[c]||this.$r[c])return c;return 0},Ur:function(a,b){for(var c=[],d=a.getElementsByTagName(webix.markup.dataTag),e=0;e<d.length;e++){var f=d[e];if(f.parentNode.parentNode.tagName!=webix.markup.dataTag){var g=this.Wr(f,b);f.className&&(g.$css=f.className),c.push(g)}}return webix.html.remove(a),c},Yr:function(a,b){return a.style?a.innerHTML:a.firstChild?a.firstChild.wholeText||a.firstChild.data||"":""},Wr:function(a,b){if(!b)return webix.DataDriver.xml.tagToObject(a);var c=this.Xr(a,{},b);return!c.value&&a.childNodes.length&&(c.value=this.Yr(a,b)),c},Xr:function(a,b,c){for(var d=a.attributes,e=0;e<d.length;e++){var f=d[e].name;if(c){if(0!==f.indexOf(this.attribute))continue;f=f.replace(this.attribute,"").replace(this.Ys,this.Zs)}var g=d[e].value;-1!=g.indexOf("json://")&&(g=JSON.parse(g.replace("json://",""))),this.Lr[f]?g=parseInt(g,10):this.AA[f]&&(g=g&&"false"!==g&&"0"!=g),b[f]=g}return b}},function(){function a(a,b){var d=a.callback;c(!1),a.box.parentNode.removeChild(a.box),m=a.box=null,d&&d(b,a.details)}function b(b){if(m){b=b||event;var c=b.which||event.keyCode;if(webix.message.keyboard)return(13==c||32==c)&&a(m,!0),27==c&&a(m,!1),b.preventDefault&&b.preventDefault(),!(b.cancelBubble=!0)}}function c(a){c.cover&&c.cover.parentNode||(c.cover=document.createElement("DIV"),c.cover.onkeydown=b,c.cover.className="webix_modal_cover",document.body.appendChild(c.cover)),c.cover.style.display=a?"inline-block":"none"}function d(a,b,c){return"<div class='webix_popup_button"+(c?" "+c:"")+"' result='"+b+"' ><div>"+a+"</div></div>"}function e(a){n.area||(n.area=document.createElement("DIV"),n.area.className="webix_message_area",n.area.style[n.position]="5px",document.body.appendChild(n.area)),n.hide(a.id);var b=document.createElement("DIV");return b.innerHTML="<div>"+a.text+"</div>",b.className="webix_info webix_"+a.type,b.onclick=function(){n.hide(a.id),a=null},webix.$testmode&&(b.className+=" webix_no_transition"),"bottom"==n.position&&n.area.firstChild?n.area.insertBefore(b,n.area.firstChild):n.area.appendChild(b),a.expire>0&&(n.timers[a.id]=window.setTimeout(function(){n.hide(a.id)},a.expire)),b.style.height=b.offsetHeight-2+"px",n.pull[a.id]=b,b=null,a.id}function f(b,c,e){var f=document.createElement("DIV");f.className=" webix_modal_box webix_"+b.type,f.setAttribute("webixbox",1);var g="";if(b.width&&(f.style.width=b.width+(webix.rules.isNumber(b.width)?"px":"")),b.height&&(f.style.height=b.height+(webix.rules.isNumber(b.height)?"px":"")),b.title&&(g+='<div class="webix_popup_title">'+b.title+"</div>"),g+='<div class="webix_popup_text"><span>'+(b.content?"":b.text)+'</span></div><div  class="webix_popup_controls">',(c||b.ok)&&(g+=d(b.ok||"OK",!0,"confirm")),(e||b.cancel)&&(g+=d(b.cancel||"Cancel",!1)),b.buttons)for(var h=0;h<b.buttons.length;h++)g+=d(b.buttons[h],h);if(g+="</div>",f.innerHTML=g,b.content){var i=b.content;"string"==typeof i&&(i=document.getElementById(i)),"none"==i.style.display&&(i.style.display=""),f.childNodes[b.title?1:0].appendChild(i)}return f.onclick=function(c){c=c||event;var d=c.target||c.srcElement;if(d.className||(d=d.parentNode),-1!=d.className.indexOf("webix_popup_button")){var e=d.getAttribute("result");e="true"==e||"false"!=e&&e,a(b,e)}c.cancelBubble=!0},b.box=f,(c||e||b.buttons)&&(m=b),f}function g(a,d,e){var g=a.tagName?a:f(a,d,e);a.hidden||c(!0),document.body.appendChild(g);var h=a.left||Math.abs(Math.floor(((window.innerWidth||document.documentElement.offsetWidth)-g.offsetWidth)/2)),i=a.top||Math.abs(Math.floor(((window.innerHeight||document.documentElement.offsetHeight)-g.offsetHeight)/2));return"top"==a.position?g.style.top="-3px":g.style.top=i+"px",g.style.left=h+"px",g.onkeydown=b,g.focus(),a.hidden&&webix.modalbox.hide(g),g}function h(a){return g(a,!0,!1)}function i(a){return g(a,!0,!0)}function j(a){return g(a)}function k(a,b,c){return"object"!=typeof a&&("function"==typeof b&&(c=b,b=""),a={text:a,type:b,callback:c}),a}function l(a,b,c,d){return"object"!=typeof a&&(a={text:a,type:b,expire:c,id:d}),a.id=a.id||n.uid(),a.expire=a.expire||n.expire,a}var m=null;document.attachEvent?document.attachEvent("onkeydown",b):document.addEventListener("keydown",b,!0),webix.alert=function(){var a=k.apply(this,arguments);return a.type=a.type||"confirm",h(a)},webix.confirm=function(){var a=k.apply(this,arguments);return a.type=a.type||"alert",i(a)},webix.modalbox=function(){var a=k.apply(this,arguments);return a.type=a.type||"alert",j(a)},webix.modalbox.hide=function(a){if(a){for(;a&&a.getAttribute&&!a.getAttribute("webixbox");)a=a.parentNode;a&&a.parentNode.removeChild(a)}c(!1),m=null};var n=webix.message=function(a,b,c,d){a=l.apply(this,arguments),a.type=a.type||"info";var f=a.type.split("-")[0];switch(f){case"alert":return h(a);case"confirm":return i(a);case"modalbox":return j(a);default:return e(a)}};n.seed=(new Date).valueOf(),n.uid=function(){return n.seed++},n.expire=4e3,n.keyboard=!0,n.position="top",n.pull={},n.timers={},n.hideAll=function(){for(var a in n.pull)n.hide(a)},n.hide=function(a){var b=n.pull[a];b&&b.parentNode&&(window.setTimeout(function(){b.parentNode.removeChild(b),b=null},2e3),b.style.height=0,b.className+=" hidden",n.timers[a]&&window.clearTimeout(n.timers[a]),delete n.pull[a])}}(),webix.protoUI({name:"carousel",defaults:{scrollSpeed:"300ms",type:"clean",navigation:{}},$init:function(a){this.x.className+=" webix_carousel",this.Ft=null,this.y=null,this.Mh=0,this.$ready.unshift(this.Gt),this.$ready.push(this.Mi)},Gt:function(){this.Ft&&this.Ft.destructor&&this.Ft.destructor();var a="";this.config.cols?(a="cols",this.mc=0):(a="rows",this.mc=1);var b={borderless:!0,type:"clean"};b[a]=webix.copy(this.s[a]);for(var c=["type","margin","marginX","marginY","padding","paddingX","paddingY"],d={},e=0;e<c.length;e++)this.s[c[e]]&&(d[c[e]]=this.s[c[e]]);webix.extend(b,d,!0),this.Ft=webix.ui.A(b),this.Ft.Xb=this,this.x.appendChild(this.Ft.x),this.q=this.Ft.q,this.Ft.fc=webix.bind(webix.ui.carousel.prototype.fc,this),this.Ft.adjustScroll=webix.bind(webix.ui.carousel.prototype.adjustScroll,this),webix.attachEvent("onReconstruct",webix.bind(function(a){a==this.Ft&&this.Ht()},this)),this.w=this.x.firstChild},getChildViews:function(){return[this.Ft]},getLayout:function(){return this.Ft},Mi:function(){this.w.setAttribute("touch_scroll",this.mc?"y":"x"),this.Ft.attachEvent("onAfterScroll",webix.bind(function(){this.callEvent("onShow",[this.getActiveId()])},this))},adjustScroll:function(a){var b,c=this.mc?this.dc:this.bc;return this.mc?(b=Math.round(a.f/c),a.f=b*c):(b=Math.round(a.e/c),a.e=b*c),this.Mh=-b,this.s.navigation&&this.Eh(),!0},fc:function(a){var b,c,d,e,f,g;for(d=-1,c=this.Ft,b=0;b<c.q.length;b++)if(c.q[b]==a){d=b;break}0>d||d==this.Mh||(this.Mh=d,e=c.mc?this.dc:this.bc,f=-(c.mc?0:d*e),g=-(c.mc?d*e:0),this.scrollTo(f,g),this.callEvent("onShow",[c.q[this.Mh].s.id]),this.s.navigation&&this.Ch())},scrollTo:function(a,b){webix.Touch&&webix.animate.isSupported()?webix.Touch.Nf(this.w,a,b,this.s.scrollSpeed||"100ms"):(this.w.style.marginLeft=a+"px",this.w.style.marginTop=b+"px")},navigation_setter:function(a){return this.E(a,{type:"corner",buttons:!0,items:!0}),a},showNext:function(){this.Mh<this.Ft.q.length-1&&this.setActiveIndex(this.Mh+1)},showPrev:function(){this.Mh>0&&this.setActiveIndex(this.Mh-1)},setActiveIndex:function(a){var b=this.Ft.q[a].s.id;webix.$$(b).show()},getActiveIndex:function(){return this.Mh},$getSize:function(a,b){var c=this.Ft.$getSize(0,0),d=webix.ui.view.prototype.$getSize.call(this,a,b);return this.Ft.mc?(d[0]=Math.max(d[0],c[0]),d[1]=Math.min(d[1],c[1])):(d[2]=Math.max(d[2],c[2]),d[3]=Math.min(d[3],c[3])),d},$setSize:function(a,b){var c=this.Ft,d=c.q.length,e=webix.ui.view.prototype.$setSize.call(this,a,b),f=this.dc*(c.mc?d:1),g=this.bc*(c.mc?1:d);e?(this.w.style.height=f+"px",this.w.style.width=g+"px",c.$setSize(g,f),this.Ht()):c.$setSize(g,f)},Ht:function(){var a=this.Ft,b=this.Mh||0,c=a.mc?this.dc:this.bc,d=-(a.mc?0:b*c),e=-(a.mc?b*c:0);this.scrollTo(d,e),this.s.navigation&&this.Ch()},getActiveId:function(){var a=this.Ft.q[this.Mh];return a?a.s.id:null},setActive:function(a){webix.$$(a).show()}},webix.EventSystem,webix.NavigationButtons,webix.ui.view),webix.type(webix.ui.list,{name:"uploader",template:"#name#  {common.removeIcon()}{common.percent()}<div style='float:right'>#sizetext#</div>",percent:function(a){return"transfer"==a.status?"<div style='width:60px; text-align:center; float:right'>"+a.percent+"%</div>":"<div class='webix_upload_"+a.status+"'><span class='"+("error"==a.status?"error_icon":"fa-ok webix_icon")+"'></span></div>"},removeIcon:function(a){return"<div class='webix_remove_upload'><span class='cancel_icon'></span></div>"},on_click:{webix_remove_upload:function(a,b){webix.$$(this.config.uploader).files.remove(b)}}}),webix.UploadDriver={flash:{$render:function(a){window.swfobject||webix.require("legacy/swfobject.js",!0);var b=this.s;b.swfId=b.swfId||"webix_swf_"+webix.uid(),this.re().innerHTML+="<div class='webix_upload_flash'><div id='"+b.swfId+"'></div></div>",this._r=this.re().lastChild,swfobject.embedSWF(webix.codebase+"/legacy/uploader.swf",b.swfId,"100%","100%","9",null,{uploaderId:b.id,ID:b.swfId,enableLogs:b.enableLogs?"1":"",paramName:b.inputName,multiple:b.multiple?"Y":""},{wmode:"transparent"}),swfobject.getFlashPlayerVersion(),webix.event(this.x,"click",webix.bind(function(){var a=new Date;a-(this.ds||0)>250&&this.fileDialog()},this)),this.files.attachEvent("onBeforeDelete",webix.bind(this.as,this))},$applyFlash:function(a,b){return this[a].apply(this,b)},getSwfObject:function(){return swfobject.getObjectById(this.s.swfId)},fileDialog:function(){this.getSwfObject()&&this.getSwfObject().showDialog()},send:function(a){if("function"==typeof a&&(this.fs=a,a=0),!a){var b=this.files.data.order,c=!0;if(b.length)for(var d=0;d<b.length;d++)c=this.send(b[d])&&c;return void(c&&this.gs())}var e=this.files.getItem(a);return"client"===e.status&&(e.status="transfer",this.getSwfObject()&&this.getSwfObject().upload(a,this.s.upload,this.s.formData||{}),!0)},$beforeAddFileToQueue:function(a,b,c){var d=b.split(".").pop(),e=this.ks(c);return this.callEvent("onBeforeFileAdd",[{id:a,name:b,size:c,sizetext:e,type:d}])},$addFileToQueue:function(a,b,c){if(this.files.exists(a))return!1;this.s.multiple||this.files.clearAll();var d=b.split(".").pop(),e=this.ks(c),f={name:b,id:a,size:c,sizetext:e,type:d,status:"client"};this.files.add(f),this.callEvent("onAfterFileAdd",[f]),a&&this.s.autosend&&this.send(a)},stopUpload:function(a){this.as(a)},as:function(a){var b=this.files.getItem(a);this.getSwfObject().uploadStop(a),b.status="client"},$onUploadComplete:function(){this.s.autosend&&this.gs()},$onUploadSuccess:function(a,b,c){var d=this.files.getItem(a);d&&(d.status="server",d.progress=100,c.text&&"string"==typeof c.text&&(webix.DataDriver.json.toObject(c.text),webix.extend(d,c,!0)),this.callEvent("onFileUpload",[d,c]),this.callEvent("onChange",[]),this.files.updateItem(a))},$onUploadFail:function(a){var b=this.files.getItem(a);b.status="error",delete b.percent,this.files.updateItem(a),this.callEvent("onFileUploadError",[b,""])}},html5:{$render:function(a){if(this._r)return void this.w.appendChild(this._r);this.files.attachEvent("onBeforeDelete",this.as);var b={type:"file","class":"webix_hidden_upload",tabindex:-1};this.s.accept&&(b.accept=this.s.accept),this.s.multiple&&(b.multiple="true");var c=webix.html.create("input",b);this._r=this.w.appendChild(c),webix.event(this.x,"drop",webix.bind(function(a){this.bs(a),webix.html.preventEvent(a)},this)),webix.event(c,"change",webix.bind(function(){if(this.cs(c.files),webix.env.isIE){var a=document.createElement("form");a.appendChild(this._r),a.reset(),this.w.appendChild(c)}else c.value=""},this)),webix.event(this.x,"click",webix.bind(function(){var a=new Date;a-(this.ds||0)>250&&this.fileDialog()},this)),webix.event(this.x,"dragenter",webix.html.preventEvent),webix.event(this.x,"dragexit",webix.html.preventEvent),
webix.event(this.x,"dragover",webix.html.preventEvent)},bs:function(a){var b=a.dataTransfer.files;this.callEvent("onBeforeFileDrop",[b,a])&&this.cs(b),this.callEvent("onAfterFileDrop",[b,a])},fileDialog:function(a){this.ds=new Date,this.es=a;var b=this.x.getElementsByTagName("INPUT");b[b.length-1].click()},send:function(a,b){if("function"==typeof a&&(this.fs=a,a=0),!a){var c=this.files.data.order,d=!0;if(c.length)for(var e=0;e<c.length;e++)d=!this.send(c[e],b)&&d;return void(d&&this.gs())}var f=this.files.getItem(a);if("client"!==f.status)return!1;f.status="transfer";var g=new FormData;g.append(this.config.inputName,f.file);var h={};b=b||{};var i=new XMLHttpRequest;if(webix.callEvent("onBeforeAjax",["POST",this.s.upload,b,i,h,g])){for(var j in b)g.append(j,b[j]);f.xhr=i,i.upload.addEventListener("progress",webix.bind(function(b){this.$updateProgress(a,b.loaded/b.total*100)},this),!1),i.onload=webix.bind(function(b){i.aborted||this.is(a)},this),i.open("POST",this.s.upload,!0);for(var j in h)i.setRequestHeader(j,h[j]);i.send(g)}return this.$updateProgress(a,0),!0},is:function(a){var b=this.files.getItem(a);if(b){var c=null;200==b.xhr.status&&(c=webix.DataDriver[this.s.datatype||"json"].toObject(b.xhr.responseText)),c&&"error"!=c.status?this.js(a,c):(b.status="error",delete b.percent,this.files.updateItem(a),this.callEvent("onFileUploadError",[b,c])),delete b.xhr}},stopUpload:function(a){webix.bind(this.as,this.files)(a)},as:function(a){var b=this.getItem(a);"undefined"!=typeof b.xhr&&(b.xhr.aborted=!0,b.xhr.abort()),delete b.xhr,b.status="client"}}},webix.protoUI({name:"uploader",defaults:{autosend:!0,multiple:!0,inputName:"upload"},$cssName:"button",Ce:!0,send:function(){},fileDialog:function(){},stopUpload:function(){},$init:function(a){var b=webix.UploadDriver.html5;this.files=new webix.DataCollection,(webix.isUndefined(XMLHttpRequest)||webix.isUndefined((new XMLHttpRequest).upload))&&(b=webix.UploadDriver.flash),webix.extend(this,b,!0)},$setSize:function(a,b){webix.ui.view.prototype.$setSize.call(this,a,b)&&this.render()},apiOnly_setter:function(a){return webix.delay(this.render,this),this.$apiOnly=a},cs:function(a){for(var b=0;b<a.length;b++)this.addFile(a[b])},link_setter:function(a){return a&&webix.delay(function(){var a=webix.$$(this.s.link);a.sync&&a.filter?a.sync(this.files):a.setValues&&this.files.data.attachEvent("onStoreUpdated",function(){a.setValues(this)}),a.s.uploader=this.s.id},this),a},addFile:function(a,b,c){var d=null;"object"==typeof a&&(d=a,a=d.name,b=d.size);var e=this.ks(b);c=c||a.split(".").pop();var f={file:d,name:a,id:webix.uid(),size:b,sizetext:e,type:c,context:this.es,status:"client"};if(this.callEvent("onBeforeFileAdd",[f])){this.s.multiple||this.files.clearAll();var g=this.files.add(f);this.callEvent("onAfterFileAdd",[f]),g&&this.s.autosend&&this.send(g,this.s.formData)}},addDropZone:function(a,b){var c=webix.toNode(a),d="";b&&(d=" "+webix.html.createCss({content:'"'+b+'"'},":before"));var e="webix_drop_file"+d;webix.event(c,"dragover",webix.html.preventEvent),webix.event(c,"dragover",function(a){webix.html.addCss(c,e,!0)}),webix.event(c,"dragleave",function(a){webix.html.removeCss(c,e)}),webix.event(c,"drop",webix.bind(function(a){webix.html.removeCss(c,e);var b=a.dataTransfer;if(b&&b.files.length)for(var d=0;d<b.files.length;d++)this.addFile(b.files[d]);return webix.html.preventEvent(a)},this))},ks:function(a){for(var b=0;a>1024;)b++,a/=1024;return Math.round(100*a)/100+" "+webix.i18n.fileSize[b]},js:function(a,b){if("error"!=b.status){var c=this.files.getItem(a);c.status="server",c.progress=100,webix.extend(c,b,!0),this.callEvent("onFileUpload",[c,b]),this.callEvent("onChange",[]),this.files.updateItem(a)}this.isUploaded()&&this.gs(b)},gs:function(a){this.callEvent("onUploadComplete",[a]),this.fs&&(this.fs.call(this,a),this.fs=0)},isUploaded:function(){for(var a=this.files.data.order,b=0;b<a.length;b++)if("server"!=this.files.getItem(a[b]).status)return!1;return!0},$onUploadComplete:function(){},$updateProgress:function(a,b){var c=this.files.getItem(a);c.percent=Math.round(b),this.files.updateItem(a)},setValue:function(a){"string"==typeof a&&(a={value:a,status:"server"}),this.files.clearAll(),a&&this.files.parse(a),this.callEvent("onChange",[])},getValue:function(){var a=[];return this.files.data.each(function(b){"server"==b.status&&a.push(b.value||b.name)}),a.join(",")}},webix.ui.button),webix.html.addMeta=function(a,b){document.getElementsByTagName("head").item(0).appendChild(webix.html.create("meta",{name:a,content:b}))},function(){var a=function(){var a=!!(window.orientation%180);webix.ui.orientation!==a&&(webix.ui.orientation=a,webix.callEvent("onRotate",[a]))};webix.env.touch&&(webix.ui.orientation=!!((webix.isUndefined(window.orientation)?90:window.orientation)%180),webix.event(window,"onorientationchange"in window?"orientationchange":"resize",a)),webix.env.isFF&&window.matchMedia&&(window.matchMedia("(orientation: portrait)").addListener(function(){webix.ui.orientation=!1}),window.matchMedia("(orientation: landscape)").addListener(function(){webix.ui.orientation=!0})),webix.ui.fullScreen=function(){if(webix.env.touch){webix.html.addMeta("apple-mobile-web-app-capable","yes"),webix.html.addMeta("viewport","initial-scale=1, maximum-scale=1, user-scalable=no");var b=document.body.offsetHeight||document.body.scrollHeight,c=-1!=navigator.userAgent.indexOf("iPhone"),d=(-1!=navigator.userAgent.indexOf("iPad"),navigator.userAgent.match(/iPhone OS (\d+)/)),e=d&&d[1]>=7,f=c&&(356==b||208==b||306==b||158==b||444==b),g=568==window.screen.height,h=function(){var a=0,b=0;if(c&&!e)webix.ui.orientation?(a=g?568:480,b=f?268:300):(a=320,b=g?f?504:548:f?416:460);else if(webix.env.isAndroid){if(!webix.env.isFF){document.body.style.width=document.body.style.height="1px",document.body.style.overflow="hidden";var d=window.outerWidth/window.innerWidth;a=window.outerWidth/d,b=window.outerHeight/d}}else webix.env.isIEMobile||(a=window.innerWidth,b=window.innerHeight);b&&(document.body.style.height=b+"px",document.body.style.width=a+"px"),webix.ui.$freeze=!1,webix.ui.resize()},i=function(){webix.ui.$freeze=!0,webix.env.isSafari?h():webix.delay(h,null,[],500)};webix.attachEvent("onRotate",i),a(),webix.delay(i)}}}(),function(){if(window.jQuery){var a=jQuery,b=[],c=function(a){return a&&a.getAttribute?a.getAttribute("view_id"):void 0},d=function(d){return function(e){if("string"!=typeof e){var f=[];return this.each(function(){var a,b,b=c(this)||c(this.firstChild);if(b&&(a=webix.$$(b)),!a){var g=e?e.data:0;g&&(e.data=null);var h=webix.copy(e||{autoheight:!0,autowidth:!0});if(h.view=d,g&&(e.data=h.data=g),"table"===this.tagName.toLowerCase()){var i=webix.html.create("div",{id:this.getAttribute("id")||"","class":this.getAttribute("class")||""},"");this.parentNode.insertBefore(i,this),h.container=i,a=webix.ui(h),a.parse(this,"htmltable")}else h.container=this,a=webix.ui(h)}f.push(a)}),1===f.length?f[0]:f}return b[e]?b[e].apply(this,[]):void a.error("Method "+e+" does not exist on jQuery.".name)}},e=function(){for(var b in webix.ui){var c="webix_"+b;a.fn[c]||(a.fn[c]=d(b))}};e(),a(e)}}(),webix.history={track:function(a,b){this.ls(a,b);var c=webix.$$(a),d=function(){webix.history.ms||c.getValue&&webix.history.push(a,c.getValue())};c.getActiveId?c.attachEvent("onViewChange",d):c.attachEvent("onChange",d)},ns:function(a,b){webix.history.ms=1,a=webix.$$(a),a.callEvent("onBeforeHistoryNav",[b])&&a.setValue&&a.setValue(b),webix.history.ms=0},push:function(a,b,c){a=webix.$$(a);var d="";b&&(d="#!/"+b),webix.isUndefined(c)&&(c=a.getValue?a.getValue():b),window.history.pushState({webix:!0,id:a.s.id,value:c},"",d)},ls:function(a,b){webix.event(window,"popstate",function(a){a.state&&a.state.webix&&webix.history.ns(a.state.id,a.state.value)});var c=window.location.hash;webix.noanimate=!0,c&&0===c.indexOf("#!/")?webix.history.ns(a,c.replace("#!/","")):b&&(webix.history.push(a,b),webix.history.ns(a,b)),webix.noanimate=!1,this.ls=function(){}}},webix.protoUI({name:"fieldset",defaults:{borderless:!0},$init:function(a){this.x.className+=" webix_fieldset",this.x.innerHTML="<fieldset><legend></legend><div></div></fieldset>"},label_setter:function(a){return this.x.firstChild.childNodes[0].innerHTML=a,a},getChildViews:function(){return[this.os]},body_setter:function(a){return this.os=webix.ui(a,this.x.firstChild.childNodes[1]),this.os.Xb=this,a},getBody:function(){return this.os},$getSize:function(a,b){a+=18,b+=30;var c=this.ps=this.os.$getSize(a,b);return c},$setSize:function(a,b){webix.ui.view.prototype.$setSize.call(this,a,b)&&(b=Math.min(this.ps[3],b),a=Math.min(this.ps[1],a),this.os.$setSize(a-18,b-30))}},webix.ui.view),webix.protoUI({name:"slider",$touchCapture:!0,defaults:{min:0,max:100,value:50,step:1,title:!1,template:function(a,b){var c=b.qs="x"+webix.uid(),d="<div class='webix_slider_title'></div><div class='webix_slider_box'><div class='webix_slider_left'>&nbsp;</div><div class='webix_slider_right'></div><div class='webix_slider_handle' id='"+c+"'>&nbsp;</div></div>";return b.$renderInput(a,d,c)}},type_setter:function(a){this.x.className+=" webix_slider_"+a},title_setter:function(a){return"string"==typeof a?webix.template(a):a},rs:function(){return this.$view.querySelector(".webix_slider_handle")},oe:function(){var a=this.rs(),b=this.s;if(a){var c=this.Ee(b),d=b.value%b.step?Math.round(b.value/b.step)*b.step:b.value;d=Math.max(Math.min(d,b.max),b.min);var e=b.max-b.min,f=Math.ceil((c-20)*(d-b.min)/e),g=c-20-f;a.style.left=10+f-8+"px",a.parentNode.style.width=c+"px",g=Math.min(Math.max(g,2),c-22),f=Math.min(Math.max(f,2),c-22);var h=a.previousSibling;h.style.width=g+"px";var i=h.previousSibling;i.style.width=f+"px",this.s.title&&(a.parentNode.previousSibling.innerHTML=this.s.title(this.s,this))}},refresh:function(){this.oe()},$setValue:function(){this.refresh()},$getValue:function(){return this.s.value},$init:function(){webix.env.touch?this.attachEvent("onTouchStart",webix.bind(this.ss,this)):webix.event(this.x,"mousedown",webix.bind(this.ss,this))},ss:function(a){var b=a.target||a.srcElement;this.Ky&&this.Ky(a);var c=this.s.value;return webix.isArray(c)&&(c=webix.copy(c)),-1!=b.className.indexOf("webix_slider_handle")?(this.$x=c,this.ts.apply(this,arguments)):void(-1!=b.className.indexOf("webix_slider")&&(this.$x=c,this.s.value=this.us.apply(this,arguments),this.ts(a)))},ts:function(a){webix.env.touch?this.vs=[this.attachEvent("onTouchMove",webix.bind(this.ws,this)),this.attachEvent("onTouchEnd",webix.bind(this.xs,this))]:this.vs=[webix.event(document.body,"mousemove",webix.bind(this.ws,this)),webix.event(window,"mouseup",webix.bind(this.xs,this))],webix.html.addCss(document.body,"webix_noselect")},xs:function(a){this.vs&&(webix.env.touch?(webix.detachEvent(this.vs[0]),webix.detachEvent(this.vs[1])):(webix.eventRemove(this.vs[0]),webix.eventRemove(this.vs[1])),this.vs=[]),webix.html.removeCss(document.body,"webix_noselect");var b=this.s.value;webix.isArray(b)&&(b=webix.copy(b)),this.s.value=this.$x,this.setValue(b)},ws:function(a){this.s.value=this.us.apply(this,arguments),this.refresh(),this.callEvent("onSliderDrag",[])},us:function(a,b){var c=0;return c=webix.env.touch?b?b.x:a.x:webix.html.pos(a).x,this.ys(c)},ys:function(a){var b=this.s,c=b.max-b.min,d=webix.html.offset(this.rs().parentNode).x+10,e=this.Ee(b)-20,f=e?(a-d)*c/e:0;return f=Math.round((f+b.min)/b.step)*b.step,Math.max(Math.min(f,b.max),b.min)},De:function(){}},webix.ui.text),webix.proxy.offline={$proxy:!0,storage:webix.storage.local,cache:!1,data:"",zs:function(){this.cache||webix.env.offline||(webix.call("onOfflineMode",[]),webix.env.offline=!0)},As:function(){!this.cache&&webix.env.offline&&(webix.env.offline=!1,webix.call("onOnlineMode",[]))},load:function(a,b){var c={error:function(){var c=this.getCache()||this.data,d={responseText:c},e=webix.ajax.prototype.J(d);this.zs(),webix.ajax.$callback(a,b,c,e,d)},success:function(c,d,e){this.As(),webix.ajax.$callback(a,b,c,d,e),this.setCache(c)}};this.cache&&this.getCache()?c.error.call(this):this.source.$proxy?this.source.load(this,c):webix.ajax(this.source,c,this)},getCache:function(){return this.storage.get(this.Bs())},clearCache:function(){this.storage.remove(this.Bs())},setCache:function(a){this.storage.put(this.Bs(),a)},Bs:function(){return this.source.$proxy?this.source.source+"_$proxy$_data":this.source+"_$proxy$_data"},saveAll:function(a,b,c,d){this.setCache(a.serialize()),webix.ajax.$callback(a,d,"",b)},result:function(a,b,c,d,e){for(var f=0;f<e.length;f++)c.processResult({id:e[f].id,status:e[f].operation},{},{})}},webix.proxy.cache={init:function(){webix.extend(this,webix.proxy.offline)},cache:!0},webix.proxy.local={init:function(){webix.extend(this,webix.proxy.offline)},cache:!0,data:[]},window.angular&&function(){function a(a){var b=a.attr("id");return b||(b=webix.uid(),a.attr("id",b)),b}function b(a,c,d,e){if(!(e>10)){var f=a[0].firstChild;f&&1==f.nodeType&&(c=f.getAttribute("view_id")||c);var g=webix.$$(c);g?g.options_setter?(g.define("options",d),g.refresh()):(g.clearAll&&g.clearAll(),g.parse(d)):webix.delay(b,this,[a,c,d],100,e+1)}}angular.module("webix",[]).directive("webixUi",["$parse",function(b){return{restrict:"A",scope:!1,link:function(c,d,e,f){var g=e.webixUi,h=e.webixReady,i=e.webixWatch,j=null;a(d),d.ready(function(){if(!j){if(h&&(h=b(h)),d.bind("$destroy",function(){j&&j.destructor()}),g){var a=function(a){if(j&&j.destructor(),c[g]){var b=webix.copy(c[g]);b.$scope=c,d[0].innerHTML="",j=webix.ui(b,d[0]),h&&h(c,{root:j})}};"false"!==i&&c.$watch(g,a),a()}else{e.view||d.attr("view","rows");var f=webix.markup,k=f.attribute;f.attribute="",j="undefined"!=typeof e.webixRefresh?f.init(d[0],d[0],c):f.init(d[0],null,c),f.attribute=k,h&&h(c,{root:j})}c.$watch(function(){return d[0].offsetWidth+"."+d[0].offsetHeight},function(){j&&j.adjust()})}})}}}]).directive("webixShow",["$parse",function(b){return{restrict:"A",scope:!1,link:function(c,d,e,f){var g=b(e.webixShow),h=a(d);g(c)||d.attr("hidden","true"),c.$watch(e.webixShow,function(){var a=webix.$$(h);a&&(g(c)?(webix.$$(h).show(),d[0].removeAttribute("hidden")):webix.$$(h).hide())})}}}]).directive("webixEvent",["$parse",function(b){var c=function(a,c,d){var e=d.split("="),f=b(e[1]),g=e[0].trim();c.attachEvent(g,function(){return f(a,{id:arguments[0],details:arguments})})};return{restrict:"A",scope:!1,link:function(b,d,e,f){var g=e.webixEvent.split(";"),h=a(d);setTimeout(function(){var a=d[0].firstChild;a&&1==a.nodeType&&(h=a.getAttribute("view_id")||h);for(var e=webix.$$(h),f=0;f<g.length;f++)c(b,e,g[f])})}}}]).directive("webixElements",["$parse",function(b){return{restrict:"A",scope:!1,link:function(b,c,d,e){var f=d.webixElements,g=a(c);b.$watchCollection&&b.$watchCollection(f,function(a){setTimeout(function(){var b=webix.$$(g);b&&(b.define("elements",a),b.refresh())},1)})}}}]).directive("webixData",["$parse",function(c){return{restrict:"A",scope:!1,link:function(c,d,e,f){var g=e.webixData,h=a(d);c.$watchCollection&&c.$watchCollection(g,function(a){a&&setTimeout(function(){b(d,h,a,0)},1)})}}}])}(),window.Backbone&&function(){function a(a){a.Cs=!0,a.callEvent("onBeforeLoad",[]),a.blockEvent()}function b(a){a.unblockEvent(),a.Cs=!1,a.refresh()}var c={use_id:!1};webix.attachEvent("onUnSyncUnknown",function(a,b){for(var c=a.ab,d=a.It,e=0;e<c.length;e++)a.detachEvent(c[e]);for(var e=0;e<d.length;e++)b.off.apply(b,d[e])}),webix.attachEvent("onSyncUnknown",function(d,e,f){function g(a){if(c.use_id)return a;var b={};for(var d in a)"id"!=d&&(b[d]=a[d]);return b}function h(a){return c.use_id?a.id:a.cid}function i(a,b){for(var c=[],d=0;d<b.models.length;d++){var e=b.models[d],f=h(e),g=j(e);g.id=f,c.push(g)}a.clearAll(),a.df(c)}function j(a){if(c.get){for(var b={},d=0;d<c.get.length;d++){var e=c.get[d];b[e]=a.get(e)}return b}return a.toJSON()}f&&(c=f),c.get&&"string"==typeof c.get&&(c.get=c.get.split(","));for(var k=[["change",function(a,b){var c=h(a),e=d.pull[c]=j(a);e.id=c,d.pf&&d.pf(e),d.refresh(e.id)}],["remove",function(a,b){var c=h(a);d.pull[c]&&d.remove(c)}],["add",function(a,b){var c=h(a);if(!d.pull[c]){var e=j(a);e.id=c,d.qf&&d.qf(e),d.add(e)}}],["reset",function(a,b){i(d,e)}],["request",function(b){b instanceof Backbone.Collection&&a(d)}],["sync",function(a){a instanceof Backbone.Collection&&b(d)}],["error",function(a){a instanceof Backbone.Collection&&b(d)}]],l=0;l<k.length;l++)e.bind.apply(e,k[l]);var m=[d.attachEvent("onAfterAdd",function(a){if(!e.get(a)){var b=g(d.getItem(a)),c=new e.model(b),f=h(c);f!=a&&this.changeId(a,f),e.add(c),e.trigger("webix:add",c)}return!0}),d.attachEvent("onDataUpdate",function(a){var b=e.get(a),c=g(d.getItem(a));return b.set(c),e.trigger("webix:change",b),!0}),d.attachEvent("onAfterDelete",function(a){var b=e.get(a);return b&&(e.trigger("webix:remove",b),e.remove(a)),!0})];d.Ts=e,d.ab=m,d.It=k,(e.length||d.count())&&i(d,e)}),window.WebixView=Backbone.View.extend({initialize:function(a){this.options=a||{}},render:function(){this.beforeRender&&this.beforeRender.apply(this,arguments);var a,b=this.config||this.options.config;b.view&&webix.ui.hasMethod(b.view,"setPosition")||(a=window.$?$(this.el)[0]:this.el,a&&!a.config&&(a.innerHTML=""));var c=webix.copy(b);return c.$scope=this,this.root=webix.ui(c,a),this.afterRender&&this.afterRender.apply(this,arguments),this},destroy:function(){this.root&&this.root.destructor()},getRoot:function(){return this.root},getChild:function(a){return this.root.$$(a)}})}(),webix.ActiveContent={$init:function(a){if(a.activeContent){this.$ready.push(this.Ds),this.Es={},this.Fs={},this.Gs={},this.Hs={};for(var b in a.activeContent)if(this[b]=this.Is(b),a.activeContent[b].earlyInit){var c=webix.Xb;webix.Xb=null,this[b].call(this,{},this,a.activeContent),webix.Xb=c}}},Ds:function(){if(webix.event(this.$view,"blur",function(a){var b=a.target||a.srcElement;if("BUTTON"!=b.tagName){var c=webix.$$(a);if(c!==this&&c.getValue&&c.setValue){c.getNode(a);var d=c.getValue();d!=c.s.value&&c.setValue(d)}}},{bind:this,capture:!0}),this.filter){for(var a in this.s.activeContent)this.type[a]=this[a],this[a]=this.Js(a);this.attachEvent("onBeforeRender",function(){this.type.masterUI=this}),this.type.masterUI=this}},Js:function(a){return function(b){for(var c=this.Hs[a],d=c.s.id,e=this.getItemNode(b).getElementsByTagName("DIV"),f=0;f<e.length;f++)if(e[f].getAttribute("view_id")==d){c.x=c.y=e[f];break}return c}},Ks:function(a,b,c){return function(d){if(d)for(var e=d.target||d.srcElement;e;){if(e.getAttribute&&e.getAttribute("view_id")){if(a.y=a.x=a.$view=e,c.locate){var f=c.locate(e.parentNode),g=c.Gs[b][f];a.s.value=g,a.s.$masterId=f}return e}e=e.parentNode}return a.x}},Ls:function(a,b){return function(c){var d=b.data;if(b.filter){var e=b.locate(this.x.parentNode);d=b.getItem(e),this.refresh(),b.Fs[a][e]=this.x.outerHTML||(new XMLSerializer).serializeToString(this.x),b.Gs[a][e]=c}d[a]=c}},Is:function(a){return function(b,c,d){var e=c.Es?c:c.masterUI;if(!e.Es[a]){var f=document.createElement("DIV");d=d||e.s.activeContent;var g=webix.ui(d[a],f);f.firstChild.setAttribute("onclick","event.processed = true; if (webix.env.isIE8) event.srcElement.w_view = '"+g.s.id+"';"),g.getNode=e.Ks(g,a,e),g.attachEvent("onChange",e.Ls(a,e)),e.Hs[a]=g,e.Es[a]=f.innerHTML,e.Fs[a]={},e.Gs[a]={}}if(e.filter&&b[a]!=e.Gs[a]&&!webix.isUndefined(b[a])){var g=e.Hs[a];g.blockEvent(),g.$view.firstChild||g.refresh(),g.setValue(b[a]),g.refresh(),g.unblockEvent(),e.Gs[a][b.id]=b[a],e.Fs[a][b.id]=g.x.outerHTML||(new XMLSerializer).serializeToString(g.x)}return e.Fs[a][b.id]||e.Es[a]}}},webix.ProgressBar={$init:function(){webix.isUndefined(this.cu)&&this.attachEvent&&(this.attachEvent("onBeforeLoad",this.showProgress),this.attachEvent("onAfterLoad",this.hideProgress),this.cu=null)},showProgress:function(a){if(!this.cu){a=webix.extend({position:0,delay:2e3,type:"icon",icon:"refresh",hide:!1},a||{},!0);var b="icon"==a.type?"fa-"+a.icon+" fa-spin":"";if(this.cu=webix.html.create("DIV",{"class":"webix_progress_"+a.type},"<div class='webix_progress_state "+b+"'></div>"),this.setPosition||(this.x.style.position="relative"),webix.html.insertBefore(this.cu,this.x.firstChild,this.x),!webix.Touch.$active&&this.getScrollState){var c=this.getScrollState();this.x.scrollWidth!=this.$width&&(this.cu.style.left=c.x+"px"),this.x.scrollHeight!=this.$height&&("bottom"!=a.type?this.cu.style.top=c.y+"px":this.cu.style.top=c.y+this.$height-this.cu.offsetHeight+"px")}this.du=1}a&&"icon"!=a.type&&webix.delay(function(){if(this.cu){var b=a.position||1;if(this.cu.style[webix.env.transitionDuration]===webix.undefined&&a.delay){var c=0,d=0,e=b/a.delay*30,f=this;this.Oy&&(window.clearInterval(this.Oy),d=this.cu.firstChild.offsetWidth/this.cu.offsetWidth*100),this.Oy=window.setInterval(function(){30*c==a.delay?window.clearInterval(f.Oy):(f.cu&&f.cu.firstChild&&(f.cu.firstChild.style.width=d+c*e*b*100+"%"),c++)},30)}else this.cu.firstChild.style.width=100*b+"%",a.delay&&(this.cu.firstChild.style[webix.env.transitionDuration]=a.delay+"ms");a.hide&&webix.delay(this.hideProgress,this,[1],a.delay)}this.du=0},this)},hideProgress:function(a){this.du&&(a=!0),this.cu&&(a?(this.Oy&&window.clearInterval(this.Oy),webix.html.remove(this.cu),this.cu=null):this.showProgress({position:1.1,delay:300,hide:!0}))}},webix.protoUI({name:"video",$init:function(a){a.id||(a.id=webix.uid()),this.$ready.push(this.Ms)},Ms:function(){var a=this.s;if(this.w=webix.html.create("video",{"class":"webix_view_video",style:"width:100%;height:100%;",autobuffer:"autobuffer"},""),a.poster&&(this.w.poster=a.poster),a.src){"object"!=typeof a.src&&(a.src=[a.src]);for(var b=0;b<a.src.length;b++)this.w.innerHTML+=' <source src="'+a.src[b]+'">'}a.controls&&(this.w.controls=!0),a.autoplay&&(this.w.autoplay=!0),this.x.appendChild(this.w)},getVideo:function(){return this.w},defaults:{src:"",controls:!0}},webix.ui.view),webix.protoUI({name:"NonGPL",$init:function(){webix.message("GPL version does not support '"+this.name+"'","error",-1)}},webix.ui.view),webix.protoUI({name:"organogram"},webix.ui.NonGPL),webix.protoUI({name:"barcode"},webix.ui.NonGPL),webix.protoUI({name:"portlet"},webix.ui.NonGPL),webix.protoUI({name:"pdfviewer"},webix.ui.NonGPL),webix.protoUI({name:"pdfbar"},webix.ui.NonGPL),webix.protoUI({name:"excelviewer"},webix.ui.NonGPL),webix.protoUI({name:"excelbar"},webix.ui.NonGPL),webix.protoUI({name:"datasuggest"},webix.ui.NonGPL),webix.protoUI({name:"gridsuggest"},webix.ui.NonGPL),webix.protoUI({name:"multitext"},webix.ui.NonGPL),webix.protoUI({name:"multiselect"},webix.ui.NonGPL),webix.protoUI({name:"multicombo"},webix.ui.NonGPL),webix.protoUI({name:"multisuggest"},webix.ui.NonGPL),webix.protoUI({name:"checksuggest"},webix.ui.NonGPL),webix.protoUI({name:"treemap"},webix.ui.NonGPL),webix.protoUI({name:"rangeslider"},webix.ui.NonGPL),webix.protoUI({name:"rangechart"},webix.ui.NonGPL),webix.protoUI({name:"datalayout"},webix.ui.NonGPL),webix.protoUI({name:"abslayout"},webix.ui.NonGPL),webix.protoUI({name:"sidemenu",defaults:{padding:0,animate:!0,position:"left",width:200,borderless:!0},$init:function(){this.$view.className+=" webix_sidemenu"},position_setter:function(a){var b=this.s.position;return b&&webix.html.removeCss(this.$view," webix_sidemenu_"+b),webix.html.addCss(this.$view," webix_sidemenu_"+a),a},$getSize:function(){var a=webix.ui.window.prototype.$getSize.apply(this,arguments);return this.MA=a,a},$setSize:function(a,b){webix.ui.view.prototype.$setSize.call(this,a,b),a=this.bc-2*this.s.padding,b=this.dc-2*this.s.padding,this.w.style.padding=this.s.padding+"px",this.bd.style.display="none",this.ed.style.height=b+"px",this.gd.$setSize(a,b)},show:function(){return!!this.callEvent("onBeforeShow",arguments)&&(this.s.hidden=!1,this.x.style.zIndex=this.s.zIndex||webix.ui.zIndex(),(this.s.modal||this.my)&&(this.Md(!0),this.my=null),this.x.style.display="block",this.Qd(),this.s.position&&this.Td(),this.Ww=1,webix.delay(function(){this.Ww=0},this,[],webix.env.touch?400:100),this.config.autofocus&&(this.Vd=webix.UIManager.getFocus(),webix.UIManager.setFocus(this)),-1==webix.ui.et.find(this)&&webix.ui.et.push(this),void this.callEvent("onShow",[]))},Td:function(a){var b,c,d,e,f,g=0,h=0,i={};this.$view.style.position="fixed",d=window.innerWidth||document.documentElement.offsetWidth,e=window.innerHeight||document.documentElement.offsetHeight,b=this.MA[0]||d,c=this.MA[2]||e,f=this.s.position,"top"==f?b=d:"right"==f?(c=e,g=d-b):"bottom"==f?(b=d,h=e-c):c=e,i={left:g,top:h,width:b,height:c,maxWidth:d,maxHeight:e},"function"==typeof this.s.state&&this.s.state.call(this,i),this.NA=i,this.$setSize(i.width,i.height),"undefined"==typeof a&&this.OA()?(webix.html.removeCss(this.$view,"webix_animate",!0),this.Qf[this.s.position].beforeShow.call(this,i),webix.delay(function(){webix.html.addCss(this.$view,"webix_animate",!0)},this,null,1),webix.delay(function(){this.Qf[this.s.position].show.call(this,i)},this,null,10)):this.setPosition(i.left,i.top)},OA:function(){return webix.animate.isSupported()&&this.s.animate&&!(webix.env.isIE&&-1!=navigator.appVersion.indexOf("MSIE 9"))},hidden_setter:function(a){return a?this.hide(!0):this.show(),!!a},Qf:{left:{beforeShow:function(a){this.$view.style.left=-a.width+"px",this.$view.style.top=a.top+"px"},show:function(){this.$view.style.left="0px"},hide:function(a){this.$view.style.left=-a.width+"px"}},right:{beforeShow:function(a){this.$view.style.left="auto",this.$view.style.right=-a.width+"px",this.$view.style.top=a.top+"px"},show:function(){this.$view.style.right="0px"},hide:function(a){this.$view.style.right=-a.width+"px"}},top:{beforeShow:function(a){this.setPosition(a.left,a.top),this.$view.style.height="0px",this.ed.style.height="0px"},show:function(a){this.$view.style.height=a.height+"px",this.ed.style.height=a.height+"px"},hide:function(){this.$view.style.height="0px",this.ed.style.height="0px"}},bottom:{beforeShow:function(a){this.$view.style.left=a.left+"px",this.$view.style.top="auto";var b=a.bottom!=webix.undefined?a.bottom:a.maxHeight-a.top-a.height;this.$view.style.bottom=b+"px",this.$view.style.height="0px"},show:function(a){this.$view.style.height=a.height+"px"},hide:function(){this.$view.style.height="0px"}}},hide:function(a){if(!this.$destructed){this.s.modal&&this.Md(!1);var b=window.innerWidth||document.documentElement.offsetWidth,c=window.innerHeight||document.documentElement.offsetHeight;if(!a&&this.OA()&&b==this.NA.maxWidth&&c==this.NA.maxHeight){this.Qf[this.s.position].hide.call(this,this.NA);var d=webix.event(this.$view,webix.env.transitionEnd,webix.bind(function(a){this.Wd(),webix.eventRemove(d)},this))}else this.Wd();if(this.s.autofocus){var e=document.activeElement;e&&this.x&&this.x.contains(e)&&(webix.UIManager.setFocus(this.Vd),this.Vd=null)}this.ny()}}},webix.ui.popup),function(){function a(a,b){var c=[],d=0,e=0,f=a.getColumnConfig,g=b.columns,h=!!b.rawValues;if(!g)if(f)g=a.Aj;else{g=webix.copy(a.data.pull[a.data.order[0]]);for(var i in g)g[i]=!0;delete g.id}b.id&&c.push({id:"id",width:50,header:" ",template:function(a){return a.id}});for(var i in g){var j=g[i];if(!j.noExport){f&&a.Aj[i]&&(j=webix.extend(webix.extend({},j),a.Aj[i]));var k={id:j.id,template:(h?null:j.template)||function(a){return function(b){return b[a]}}(i),width:(j.width||200)*("excel"===b.gB?8.43/70:1),header:j.header!==!1?j.header||i:""};"string"==typeof k.header?k.header=[{text:k.header}]:k.header=webix.copy(k.header);for(var l=0;l<k.header.length;l++)k.header[l]=k.header[l]?k.header[l].contentId?"":k.header[l].text:"";if(d=Math.max(d,k.header.length),a.s.footer){var m=j.footer||"";m="string"==typeof m?[{text:m}]:webix.copy(m);for(var l=0;l<m.length;l++)m[l]?m[l]=m[l].contentId?a.getHeaderContent(m[l].contentId).getValue():m[l].text:m[l]="";k.footer=m,e=Math.max(e,k.footer.length)}c.push(k)}}for(var l=0;l<c.length;l++){for(var n=d-c[l].header.length,o=0;n>o;o++)c[l].header.push("");if(a.s.footer){n=e-c[l].footer.length;for(var o=0;n>o;o++)c[l].footer.push("")}}return c}function b(a,b,c){var d,e,f=!!b.filterHTML,g=/<[^>]*>/gi,h=[];if(b.header!==!1&&c.length&&"excel"===b.gB)for(var i=0;i<c[0].header.length;i++){e=[];for(var j=0;j<c.length;j++)d="",c[j].header[i]&&(d=c[j].header[i]),f&&(d=d.replace(g,"")),e.push(d);h.push(e)}var k="TreeStore"==a.data.name;if(a.data.each(function(b){for(var d=[],e=0;e<c.length;e++){var i=c[e],j=i.template(b,a.type,b[i.id],i,e);j||0===j||(j=""),f&&"string"==typeof j&&(k&&(j=j.replace(/<div class=.webix_tree_none.><\/div>/," - ")),j=j.replace(g,"")),d.push(j)}h.push(d)},a),b.footer!==!1)for(var l=c[0].footer?c[0].footer.length:0,m=0;l>m;m++){for(var n=[],j=0;j<c.length;j++){var o=c[j].footer[m];f&&(o=o.replace(g,"")),n.push(o)}"excel"===b.gB&&h.push(n)}return h}function c(a){for(var b=[],c=0;c<a.length;c++)b.push({wch:a[c].width});return b}function d(a){return Math.round(25569+a/864e5)}function e(a,b){var c=a.Rt,d=[];if(c){var e=b.xCorrection||0,f=b.yCorrection||0;for(var g in c){var h=c[g];for(var i in h){var j=a.getColumnIndex(i)-e,k=a.getIndexById(g)-f,l=j+h[i][0]-1,m=k+(h[i][1]-1);d.push({s:{c:j,r:k+1},e:{c:l,r:m+1}})}}}return d}function f(a,b,e){for(var f={},g={s:{c:1e7,r:1e7},e:{c:0,r:0}},h=0;h!=a.length;++h)for(var i=0;i!=a[h].length;++i){g.s.r>h&&(g.s.r=h),g.s.c>i&&(g.s.c=i),g.e.r<h&&(g.e.r=h),g.e.c<i&&(g.e.c=i);var k={v:a[h][i]};if(null!==k.v){var l=XLSX.utils.encode_cell({c:i,r:h});"number"==typeof k.v?k.t="n":"boolean"==typeof k.v?k.t="b":k.v instanceof Date?(k.t="n",k.z=XLSX.SSF[j][14],k.v=d(k.v)):k.t="s",f[l]=k}}return g.s.c<1e7&&(f["!ref"]=XLSX.utils.encode_range(g)),f["!cols"]=c(b),e.length&&(f["!merges"]=e),f}function g(a){for(var b=new ArrayBuffer(a.length),c=new Uint8Array(b),d=0;d!=a.length;++d)c[d]=255&a.charCodeAt(d);return b}function h(a,b,c,d){c.header=webix.isUndefined(c.header)||c.header===!0?{}:c.header,c.footer=webix.isUndefined(c.footer)||c.footer===!0?{}:c.footer,c.table=c.table||{};var e=c.width||595.296,f=c.height||841.896;if(c.orientation&&"landscape"===c.orientation&&(f=[e,e=f][0]),c.autowidth){e=80;for(var g=0;g<a.length;g++)e+=a[g].width}for(var h=new pdfjs.Document({padding:40,font:c.hB,threshold:256,width:e,height:f}),i=c.header===!1?0:a[0].header.length,j=c.footer!==!1&&a[0].footer?a[0].footer.length:0,k=[],g=0;g<a.length;g++)k[g]=a[g].width;var l=webix.extend(c.table,{borderWidth:1,height:20,lineHeight:1.1,borderColor:15658734,backgroundColor:16777215,color:6710886,textAlign:"left",paddingRight:10,paddingLeft:10,headerRows:i,widths:k.length?k:["100%"]}),m=h.table(l);if(i)for(var n=webix.extend(c.header,{borderRightColor:11587299,borderBottomColor:11587299,color:4868682,backgroundColor:13820911,height:27,lineHeight:1.2}),g=0;i>g;g++)for(var o=m.tr(n),p=0;p<a.length;p++)o.td(a[p].header[g].toString());for(var q=0;q<b.length;q++)for(var r=m.tr({}),s=0;s<b[q].length;s++)r.td(b[q][s]);if(j)for(var t=webix.extend(c.footer,{borderRightColor:15658734,borderBottomColor:15658734,backgroundColor:16448250,color:6710886,height:27,lineHeight:1.2}),g=0;j>g;g++)for(var u=m.tr(t),p=0;p<a.length;p++)u.td(a[p].footer[g].toString());if(c.docFooter!==!1){var v=h.footer();v.text({color:6710886,textAlign:"center"}).append(webix.i18n.dataExport.page||"Page").pageNumber().append("  "+(webix.i18n.dataExport.of||"of")+"  ").pageCount()}if(c.docHeader){"string"==typeof c.docHeader&&(c.docHeader={text:c.docHeader});var w=webix.extend(c.docHeader,{color:6710886,textAlign:"right"}),x=h.header({paddingBottom:10});x.text(w.text,w)}if(c.docHeaderImage){"string"==typeof c.docHeaderImage&&(c.docHeaderImage={url:c.docHeaderImage});var x=h.header({paddingBottom:10}),y=webix.extend(c.docHeaderImage,{align:"right"});pdfjs.load(c.docHeaderImage.url,function(a,b){if(!a){var e=new pdfjs.Image(b);x.image(e,y)}var f=h.render();d(f,c)})}else{var z=h.render();d(z,c)}}webix.toPNG=function(a,b){var c=webix.promise.defer();return webix.require(webix.cdn+"/extras/html2canvas.min.js",function(){var d=webix.$$(a);d&&d.$exportView&&(d=d.$exportView({}));var e=d?d.$view:webix.toNode(a),f=(b||"data")+".png";window.html2canvas(e).then(function(a){
var b=a.msToBlob?a.msToBlob():a.toDataURL("image/png");webix.html.download(b,f),a.remove(),c.resolve()})}),c},webix.toExcel=function(c,d){var h=webix.promise.defer(),i=webix.$$(c);return d=d||{},i.$exportView&&(i=i.$exportView(d)),webix.require(webix.cdn+"/extras/xlsx.core.min.js",function(){d.gB="excel";var c=a(i,d),j=b(i,d,c),k=d.spans?e(i,d):[],l=f(j,c,k),m={SheetNames:[],Sheets:[]},n=d.name||"Data";n=n.replace(/[\*\?\:\[\]\\\/]/g,"").substring(0,31),m.SheetNames.push(n),m.Sheets[n]=l;var o=XLSX.write(m,{bookType:"xlsx",bookSST:!1,type:"binary"}),p=(d.filename||n)+".xlsx",q=new Blob([g(o)],{type:"application/xlsx"});webix.html.download(q,p),h.resolve()}),h};var i;webix.toPDF=function(c,d){var e=webix.promise.defer();return webix.require(webix.cdn+"/extras/pdfjs.js",function(){var f=webix.$$(c);d=d||{},f.$exportView&&(f=f.$exportView(d)),d.gB="pdf",d.hB=i;var g=a(f,d),j=b(f,d,g),k=function(a,b){var c=(b.filename||"data")+".pdf",d=new Blob([a.toString()],{type:"application/pdf"});webix.html.download(d,c),e.resolve()};d.hB?h(g,j,d,k):pdfjs.load(webix.cdn+"/extras/pt-sans.regular.ttf",function(a,b){if(a)throw a;i=d.hB=new pdfjs.TTFFont(b),h(g,j,d,k)})}),e};var j="_table"}(),function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.cytoscape=a()}}(function(){var define,module,exports;return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict"},{}],2:[function(a,b,c){"use strict";var d=a("./util"),e=a("./is"),f=a("./promise"),g=function(a,b,c){var f=this._private=d.extend({duration:1e3},b,c);f.target=a,f.style=f.style||f.css,f.started=!1,f.playing=!1,f.hooked=!1,f.applying=!1,f.progress=0,f.completes=[],f.frames=[],f.complete&&e.fn(f.complete)&&f.completes.push(f.complete),this.length=1,this[0]=this},h=g.prototype;d.extend(h,{instanceString:function(){return"animation"},hook:function(){var a=this._private;if(!a.hooked){var b,c=a.target._private.animation;b=a.queue?c.queue:c.current,b.push(this),e.elementOrCollection(a.target)&&a.target.cy().addToAnimationPool(a.target),a.hooked=!0}return this},play:function(){var a=this._private;return 1===a.progress&&(a.progress=0),a.playing=!0,a.started=!1,a.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var a=this._private;return a.applying=!0,a.started=!1,a.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var a=this._private;return a.playing=!1,a.started=!1,this},stop:function(){var a=this._private;return a.playing=!1,a.started=!1,a.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(a){var b=this._private;return void 0===a?b.progress*b.duration:this.progress(a/b.duration)},progress:function(a){var b=this._private,c=b.playing;return void 0===a?b.progress:(c&&this.pause(),b.progress=a,b.started=!1,c&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var a=this._private,b=a.playing;b&&this.pause(),a.progress=1-a.progress,a.started=!1;var c=function(b,c){var d=a[b];null!=d&&(a[b]=a[c],a[c]=d)};if(c("zoom","startZoom"),c("pan","startPan"),c("position","startPosition"),a.style)for(var d=0;d<a.style.length;d++){var e=a.style[d],f=e.name,g=a.startStyle[f];a.startStyle[f]=e,a.style[d]=g}return b&&this.play(),this},promise:function(a){var b,c=this._private;switch(a){case"frame":b=c.frames;break;default:case"complete":case"completed":b=c.completes}return new f(function(a,c){b.push(function(){a()})})}}),h.complete=h.completed,b.exports=g},{"./is":83,"./promise":86,"./util":100}],3:[function(a,b,c){"use strict";var d=a("../../is"),e={aStar:function(a){var b=this;a=a||{};var c=function(a,b,d,e){if(a==b)return e.push(f.getElementById(b)),e;if(b in d){var g=d[b],h=o[b];return e.push(f.getElementById(b)),e.push(f.getElementById(h)),c(a,g,d,e)}},e=function(a,b){if(0!==a.length){for(var c=0,d=b[a[0]],e=1;e<a.length;e++){var f=b[a[e]];f<d&&(d=f,c=e)}return c}},f=this._private.cy;if(null!=a&&null!=a.root){var g=d.string(a.root)?this.filter(a.root)[0]:a.root[0];if(null!=a.goal){var h=d.string(a.goal)?this.filter(a.goal)[0]:a.goal[0];if(null!=a.heuristic&&d.fn(a.heuristic))var i=a.heuristic;else var i=function(){return 0};if(null!=a.weight&&d.fn(a.weight))var j=a.weight;else var j=function(a){return 1};if(null!=a.directed)var k=a.directed;else var k=!1;var l=[],m=[g.id()],n={},o={},p={},q={};p[g.id()]=0,q[g.id()]=i(g);for(var r=this.edges().stdFilter(function(a){return!a.isLoop()}),s=this.nodes(),t=0;m.length>0;){var u=e(m,q),v=f.getElementById(m[u]);if(t++,v.id()==h.id()){var w=c(g.id(),h.id(),n,[]);return w.reverse(),{found:!0,distance:p[v.id()],path:b.spawn(w),steps:t}}l.push(v.id()),m.splice(u,1);var x=v.connectedEdges();k&&(x=x.stdFilter(function(a){return a.data("source")===v.id()})),x=x.intersect(r);for(var y=0;y<x.length;y++){var z=x[y],A=z.connectedNodes().stdFilter(function(a){return a.id()!==v.id()}).intersect(s);if(l.indexOf(A.id())==-1){var B=p[v.id()]+j.apply(z,[z]);m.indexOf(A.id())!=-1?B<p[A.id()]&&(p[A.id()]=B,q[A.id()]=B+i(A),n[A.id()]=v.id()):(p[A.id()]=B,q[A.id()]=B+i(A),m.push(A.id()),n[A.id()]=v.id(),o[A.id()]=z.id())}}}return{found:!1,distance:void 0,path:void 0,steps:t}}}}};b.exports=e},{"../../is":83}],4:[function(a,b,c){"use strict";var d=a("../../is"),e=a("../../util"),f={bellmanFord:function(a){var b=this;if(a=a||{},null!=a.weight&&d.fn(a.weight))var c=a.weight;else var c=function(a){return 1};if(null!=a.directed)var f=a.directed;else var f=!1;if(null!=a.root){if(d.string(a.root))var g=this.filter(a.root)[0];else var g=a.root[0];for(var h=this._private.cy,i=this.edges().stdFilter(function(a){return!a.isLoop()}),j=this.nodes(),k=j.length,l={},m=0;m<k;m++)l[j[m].id()]=m;for(var n=[],o=[],p=[],m=0;m<k;m++)j[m].id()===g.id()?n[m]=0:n[m]=1/0,o[m]=void 0;for(var q=!1,m=1;m<k;m++){q=!1;for(var r=0;r<i.length;r++){var s=l[i[r].source().id()],t=l[i[r].target().id()],u=c.apply(i[r],[i[r]]),v=n[s]+u;if(v<n[t]&&(n[t]=v,o[t]=s,p[t]=i[r],q=!0),!f){var v=n[t]+u;v<n[s]&&(n[s]=v,o[s]=t,p[s]=i[r],q=!0)}}if(!q)break}if(q)for(var r=0;r<i.length;r++){var s=l[i[r].source().id()],t=l[i[r].target().id()],u=c.apply(i[r],[i[r]]);if(n[s]+u<n[t])return e.error("Graph contains a negative weight cycle for Bellman-Ford"),{pathTo:void 0,distanceTo:void 0,hasNegativeWeightCycle:!0}}for(var w=[],m=0;m<k;m++)w.push(j[m].id());var x={distanceTo:function(a){if(d.string(a))var b=h.filter(a)[0].id();else var b=a.id();return n[l[b]]},pathTo:function(a){var c=function(a,b,c,d,e,f){for(;;){if(e.push(h.getElementById(d[c])),e.push(f[c]),b===c)return e;var g=a[c];if("undefined"==typeof g)return;c=g}};if(d.string(a))var e=h.filter(a)[0].id();else var e=a.id();var f=[],i=c(o,l[g.id()],l[e],w,f,p);return null!=i&&i.reverse(),b.spawn(i)},hasNegativeWeightCycle:!1};return x}}};b.exports=f},{"../../is":83,"../../util":100}],5:[function(a,b,c){"use strict";var d=a("../../is"),e=a("../../heap"),f={betweennessCentrality:function(a){a=a||{};var b,c;d.fn(a.weight)?(c=a.weight,b=!0):b=!1;for(var f=null!=a.directed&&a.directed,g=this._private.cy,h=this.nodes(),i={},j={},k=0,l={set:function(a,b){j[a]=b,b>k&&(k=b)},get:function(a){return j[a]}},m=0;m<h.length;m++){var n=h[m],o=n.id();f?i[o]=n.outgoers().nodes():i[o]=n.openNeighborhood().nodes(),l.set(o,0)}for(var p=0;p<h.length;p++){for(var q=h[p].id(),r=[],s={},t={},u={},v=new e(function(a,b){return u[a]-u[b]}),m=0;m<h.length;m++){var o=h[m].id();s[o]=[],t[o]=0,u[o]=1/0}for(t[q]=1,u[q]=0,v.push(q);!v.empty();){var n=v.pop();if(r.push(n),b)for(var w=0;w<i[n].length;w++){var x,y=i[n][w],z=g.getElementById(n);x=z.edgesTo(y).length>0?z.edgesTo(y)[0]:y.edgesTo(z)[0];var A=c.apply(x,[x]);y=y.id(),u[y]>u[n]+A&&(u[y]=u[n]+A,v.nodes.indexOf(y)<0?v.push(y):v.updateItem(y),t[y]=0,s[y]=[]),u[y]==u[n]+A&&(t[y]=t[y]+t[n],s[y].push(n))}else for(var w=0;w<i[n].length;w++){var y=i[n][w].id();u[y]==1/0&&(v.push(y),u[y]=u[n]+1),u[y]==u[n]+1&&(t[y]=t[y]+t[n],s[y].push(n))}}for(var B={},m=0;m<h.length;m++)B[h[m].id()]=0;for(;r.length>0;)for(var y=r.pop(),w=0;w<s[y].length;w++){var n=s[y][w];B[n]=B[n]+t[n]/t[y]*(1+B[y]),y!=h[p].id()&&l.set(y,l.get(y)+B[y])}}var C={betweenness:function(a){if(d.string(a))var a=g.filter(a).id();else var a=a.id();return l.get(a)},betweennessNormalized:function(a){if(0==k)return 0;if(d.string(a))var a=g.filter(a).id();else var a=a.id();return l.get(a)/k}};return C.betweennessNormalised=C.betweennessNormalized,C}};f.bc=f.betweennessCentrality,b.exports=f},{"../../heap":81,"../../is":83}],6:[function(a,b,c){"use strict";var d=a("../../is"),e=function(a){return a={bfs:a.bfs||!a.dfs,dfs:a.dfs||!a.bfs},function(b,c,e){var f,g,h;d.plainObject(b)&&!d.elementOrCollection(b)&&(f=b,b=f.roots||f.root,c=f.visit,e=f.directed,g=f.std,h=f.thisArg),e=2!==arguments.length||d.fn(c)?e:c,c=d.fn(c)?c:function(){};for(var i,j=this._private.cy,k=b=d.string(b)?this.filter(b):b,l=[],m=[],n={},o={},p={},q=0,r=this.nodes(),s=this.edges(),t=0;t<k.length;t++)k[t].isNode()&&(l.unshift(k[t]),a.bfs&&(p[k[t].id()]=!0,m.push(k[t])),o[k[t].id()]=0);for(;0!==l.length;){var k=a.bfs?l.shift():l.pop();if(a.dfs){if(p[k.id()])continue;p[k.id()]=!0,m.push(k)}var u,v=o[k.id()],w=n[k.id()],x=null==w?void 0:w.connectedNodes().not(k)[0];if(u=g?c.call(h,k,w,x,q++,v):c.call(k,q++,v,k,w,x),u===!0){i=k;break}if(u===!1)break;for(var y=k.connectedEdges(e?function(){return this.data("source")===k.id()}:void 0).intersect(s),t=0;t<y.length;t++){var z=y[t],A=z.connectedNodes(function(){return this.id()!==k.id()}).intersect(r);0===A.length||p[A.id()]||(A=A[0],l.push(A),a.bfs&&(p[A.id()]=!0,m.push(A)),n[A.id()]=z,o[A.id()]=o[k.id()]+1)}}for(var B=[],t=0;t<m.length;t++){var C=m[t],D=n[C.id()];D&&B.push(D),B.push(C)}return{path:j.collection(B,{unique:!0}),found:j.collection(i)}}},f={breadthFirstSearch:e({bfs:!0}),depthFirstSearch:e({dfs:!0})};f.bfs=f.breadthFirstSearch,f.dfs=f.depthFirstSearch,b.exports=f},{"../../is":83}],7:[function(a,b,c){"use strict";var d=a("../../is"),e={closenessCentralityNormalized:function(a){a=a||{};var b=this.cy(),c=a.harmonic;void 0===c&&(c=!0);for(var e={},f=0,g=this.nodes(),h=this.floydWarshall({weight:a.weight,directed:a.directed}),i=0;i<g.length;i++){for(var j=0,k=0;k<g.length;k++)if(i!=k){var l=h.distance(g[i],g[k]);j+=c?1/l:l}c||(j=1/j),f<j&&(f=j),e[g[i].id()]=j}return{closeness:function(a){if(0==f)return 0;if(d.string(a))var a=b.filter(a)[0].id();else var a=a.id();return e[a]/f}}},closenessCentrality:function(a){if(a=a||{},null!=a.root){if(d.string(a.root))var b=this.filter(a.root)[0];else var b=a.root[0];if(null!=a.weight&&d.fn(a.weight))var c=a.weight;else var c=function(){return 1};if(null!=a.directed&&d.bool(a.directed))var e=a.directed;else var e=!1;var f=a.harmonic;void 0===f&&(f=!0);for(var g=this.dijkstra({root:b,weight:c,directed:e}),h=0,i=this.nodes(),j=0;j<i.length;j++)if(i[j].id()!=b.id()){var k=g.distanceTo(i[j]);h+=f?1/k:k}return f?h:1/h}}};e.cc=e.closenessCentrality,e.ccn=e.closenessCentralityNormalised=e.closenessCentralityNormalized,b.exports=e},{"../../is":83}],8:[function(a,b,c){"use strict";var d=a("../../is"),e=a("../../util"),f={degreeCentralityNormalized:function(a){a=a||{};var b=this.cy();if(null!=a.directed)var c=a.directed;else var c=!1;var f=this.nodes(),g=f.length;if(c){for(var h={},i={},j=0,k=0,l=0;l<g;l++){var m=f[l],n=this.degreeCentrality(e.extend({},a,{root:m}));j<n.indegree&&(j=n.indegree),k<n.outdegree&&(k=n.outdegree),h[m.id()]=n.indegree,i[m.id()]=n.outdegree}return{indegree:function(a){if(0==j)return 0;if(d.string(a))var a=b.filter(a)[0].id();else var a=a.id();return h[a]/j},outdegree:function(a){if(0==k)return 0;if(d.string(a))var a=b.filter(a)[0].id();else var a=a.id();return i[a]/k}}}for(var o={},p=0,l=0;l<g;l++){var m=f[l],n=this.degreeCentrality(e.extend({},a,{root:m}));p<n.degree&&(p=n.degree),o[m.id()]=n.degree}return{degree:function(a){if(0==p)return 0;if(d.string(a))var a=b.filter(a)[0].id();else var a=a.id();return o[a]/p}}},degreeCentrality:function(a){a=a||{};var b=this;if(null!=a&&null!=a.root){var c=d.string(a.root)?this.filter(a.root)[0]:a.root[0];if(null!=a.weight&&d.fn(a.weight))var e=a.weight;else var e=function(a){return 1};if(null!=a.directed)var f=a.directed;else var f=!1;if(null!=a.alpha&&d.number(a.alpha))var g=a.alpha;else g=0;if(f){for(var h=c.connectedEdges('edge[target = "'+c.id()+'"]').intersection(b),i=c.connectedEdges('edge[source = "'+c.id()+'"]').intersection(b),j=h.length,k=i.length,l=0,m=0,n=0;n<h.length;n++){var o=h[n];l+=e.apply(o,[o])}for(var n=0;n<i.length;n++){var o=i[n];m+=e.apply(o,[o])}return{indegree:Math.pow(j,1-g)*Math.pow(l,g),outdegree:Math.pow(k,1-g)*Math.pow(m,g)}}for(var p=c.connectedEdges().intersection(b),q=p.length,r=0,n=0;n<p.length;n++){var o=p[n];r+=e.apply(o,[o])}return{degree:Math.pow(q,1-g)*Math.pow(r,g)}}}};f.dc=f.degreeCentrality,f.dcn=f.degreeCentralityNormalised=f.degreeCentralityNormalized,b.exports=f},{"../../is":83,"../../util":100}],9:[function(a,b,c){"use strict";var d=a("../../is"),e=a("../../heap"),f={dijkstra:function(a,b,c){var f;d.plainObject(a)&&!d.elementOrCollection(a)&&(f=a,a=f.root,b=f.weight,c=f.directed);var g=this._private.cy;b=d.fn(b)?b:function(){return 1};for(var h=d.string(a)?this.filter(a)[0]:a[0],i={},j={},k={},l=this.edges().filter(function(){return!this.isLoop()}),m=this.nodes(),n=function(a){return i[a.id()]},o=function(a,b){i[a.id()]=b,p.updateItem(a)},p=new e(function(a,b){return n(a)-n(b)}),q=0;q<m.length;q++){var r=m[q];i[r.id()]=r.same(h)?0:1/0,p.push(r)}for(var s=function(a,d){for(var e,f=(c?a.edgesTo(d):a.edgesWith(d)).intersect(l),g=1/0,h=0;h<f.length;h++){var i=f[h],j=b.apply(i,[i]);(j<g||!e)&&(g=j,e=i)}return{edge:e,dist:g}};p.size()>0;){var t=p.pop(),u=n(t),v=t.id();if(k[v]=u,u===Math.Infinite)break;for(var w=t.neighborhood().intersect(m),q=0;q<w.length;q++){var x=w[q],y=x.id(),z=s(t,x),A=u+z.dist;A<n(x)&&(o(x,A),j[y]={node:t,edge:z.edge})}}return{distanceTo:function(a){var b=d.string(a)?m.filter(a)[0]:a[0];return k[b.id()]},pathTo:function(a){var b=d.string(a)?m.filter(a)[0]:a[0],c=[],e=b;if(b.length>0)for(c.unshift(b);j[e.id()];){var f=j[e.id()];c.unshift(f.edge),c.unshift(f.node),e=f.node}return g.collection(c)}}}};b.exports=f},{"../../heap":81,"../../is":83}],10:[function(a,b,c){"use strict";var d=a("../../is"),e={floydWarshall:function(a){a=a||{};var b=this.cy();if(null!=a.weight&&d.fn(a.weight))var c=a.weight;else var c=function(a){return 1};if(null!=a.directed)var e=a.directed;else var e=!1;for(var f=this.edges().stdFilter(function(a){return!a.isLoop()}),g=this.nodes(),h=g.length,i={},j=0;j<h;j++)i[g[j].id()]=j;for(var k=[],j=0;j<h;j++){for(var l=new Array(h),m=0;m<h;m++)j==m?l[m]=0:l[m]=1/0;k.push(l)}var n=[],o=[],p=function(a){for(var b=0;b<h;b++){for(var c=new Array(h),d=0;d<h;d++)c[d]=void 0;a.push(c)}};p(n),p(o);for(var j=0;j<f.length;j++){var q=i[f[j].source().id()],r=i[f[j].target().id()],s=c.apply(f[j],[f[j]]);k[q][r]>s&&(k[q][r]=s,n[q][r]=r,o[q][r]=f[j])}if(!e)for(var j=0;j<f.length;j++){var q=i[f[j].target().id()],r=i[f[j].source().id()],s=c.apply(f[j],[f[j]]);k[q][r]>s&&(k[q][r]=s,n[q][r]=r,o[q][r]=f[j])}for(var t=0;t<h;t++)for(var j=0;j<h;j++)for(var m=0;m<h;m++)k[j][t]+k[t][m]<k[j][m]&&(k[j][m]=k[j][t]+k[t][m],n[j][m]=n[j][t]);for(var u=[],j=0;j<h;j++)u.push(g[j].id());var v={distance:function(a,c){if(d.string(a))var e=b.filter(a)[0].id();else var e=a.id();if(d.string(c))var f=b.filter(c)[0].id();else var f=c.id();return k[i[e]][i[f]]},path:function(a,c){var e=function(a,c,d,e,f){if(a===c)return b.getElementById(e[a]);if(void 0!==d[a][c]){for(var g=[b.getElementById(e[a])],h=a;a!==c;){h=a,a=d[a][c];var i=f[h][a];g.push(i),g.push(b.getElementById(e[a]))}return g}};if(d.string(a))var f=b.filter(a)[0].id();else var f=a.id();if(d.string(c))var g=b.filter(c)[0].id();else var g=c.id();var h=e(i[f],i[g],n,u,o);return b.collection(h)}};return v}};b.exports=e},{"../../is":83}],11:[function(a,b,c){"use strict";var d=a("../../util"),e={};[a("./bfs-dfs"),a("./dijkstra"),a("./kruskal"),a("./a-star"),a("./floyd-warshall"),a("./bellman-ford"),a("./kerger-stein"),a("./page-rank"),a("./degree-centrality"),a("./closeness-centrality"),a("./betweenness-centrality")].forEach(function(a){d.extend(e,a)}),b.exports=e},{"../../util":100,"./a-star":3,"./bellman-ford":4,"./betweenness-centrality":5,"./bfs-dfs":6,"./closeness-centrality":7,"./degree-centrality":8,"./dijkstra":9,"./floyd-warshall":10,"./kerger-stein":12,"./kruskal":13,"./page-rank":14}],12:[function(a,b,c){"use strict";var d=a("../../util"),e={kargerStein:function(a){var b=this;a=a||{};var c=function(a,b,c){for(var d=c[a],e=d[1],f=d[2],g=b[e],h=b[f],i=c.filter(function(a){return(b[a[1]]!==g||b[a[2]]!==h)&&(b[a[1]]!==h||b[a[2]]!==g)}),j=0;j<i.length;j++){var k=i[j];k[1]===h?(i[j]=k.slice(0),i[j][1]=g):k[2]===h&&(i[j]=k.slice(0),i[j][2]=g)}for(var j=0;j<b.length;j++)b[j]===h&&(b[j]=g);return i},e=function(a,b,d,f){if(d<=f)return b;var g=Math.floor(Math.random()*b.length),h=c(g,a,b);return e(a,h,d-1,f)},f=this._private.cy,g=this.edges().stdFilter(function(a){return!a.isLoop()}),h=this.nodes(),i=h.length,j=g.length,k=Math.ceil(Math.pow(Math.log(i)/Math.LN2,2)),l=Math.floor(i/Math.sqrt(2));if(i<2)return void d.error("At least 2 nodes are required for Karger-Stein algorithm");for(var m={},n=0;n<i;n++)m[h[n].id()]=n;for(var o=[],n=0;n<j;n++){var p=g[n];o.push([n,m[p.source().id()],m[p.target().id()]])}for(var q,r=1/0,s=[],n=0;n<i;n++)s.push(n);for(var t=0;t<=k;t++){var u=s.slice(0),v=e(u,o,i,l),w=u.slice(0),x=e(u,v,l,2),y=e(w,v,l,2);x.length<=y.length&&x.length<r?(r=x.length,q=[x,u]):y.length<=x.length&&y.length<r&&(r=y.length,q=[y,w])}for(var z=q[0].map(function(a){return g[a[0]]}),A=[],B=[],C=q[1][0],n=0;n<q[1].length;n++){var D=q[1][n];D===C?A.push(h[n]):B.push(h[n])}var E={cut:b.spawn(f,z),partition1:b.spawn(A),partition2:b.spawn(B)};return E}};b.exports=e},{"../../util":100}],13:[function(a,b,c){"use strict";var d=a("../../is"),e={kruskal:function(a){function b(a){for(var b=0;b<f.length;b++){var c=f[b];if(c.anySame(a))return{eles:c,index:b}}}var c=this.cy();a=d.fn(a)?a:function(){return 1};for(var e=c.collection(c,[]),f=[],g=this.nodes(),h=0;h<g.length;h++)f.push(g[h].collection());for(var i=this.edges(),j=i.toArray().sort(function(b,c){var d=a.call(b,b),e=a.call(c,c);return d-e}),h=0;h<j.length;h++){var k=j[h],l=k.source()[0],m=k.target()[0],n=b(l),o=b(m);n.index!==o.index&&(e=e.add(k),f[n.index]=n.eles.add(o.eles),f.splice(o.index,1))}return g.add(e)}};b.exports=e},{"../../is":83}],14:[function(a,b,c){"use strict";var d=a("../../is"),e={pageRank:function(a){a=a||{};var b=function(a){for(var b=a.length,c=0,d=0;d<b;d++)c+=a[d];for(var d=0;d<b;d++)a[d]=a[d]/c};if(null!=a&&null!=a.dampingFactor)var c=a.dampingFactor;else var c=.8;if(null!=a&&null!=a.precision)var e=a.precision;else var e=1e-6;if(null!=a&&null!=a.iterations)var f=a.iterations;else var f=200;if(null!=a&&null!=a.weight&&d.fn(a.weight))var g=a.weight;else var g=function(a){return 1};for(var h=this._private.cy,i=this.edges().stdFilter(function(a){return!a.isLoop()}),j=this.nodes(),k=j.length,l=i.length,m={},n=0;n<k;n++)m[j[n].id()]=n;for(var o=[],p=[],q=(1-c)/k,n=0;n<k;n++){for(var r=[],s=0;s<k;s++)r.push(0);o.push(r),p.push(0)}for(var n=0;n<l;n++){var t=i[n],u=m[t.source().id()],v=m[t.target().id()],w=g.apply(t,[t]);o[v][u]+=w,p[u]+=w}for(var x=1/k+q,s=0;s<k;s++)if(0===p[s])for(var n=0;n<k;n++)o[n][s]=x;else for(var n=0;n<k;n++)o[n][s]=o[n][s]/p[s]+q;for(var y,z=[],A=[],n=0;n<k;n++)z.push(1),A.push(0);for(var B=0;B<f;B++){for(var C=A.slice(0),n=0;n<k;n++)for(var s=0;s<k;s++)C[n]+=o[n][s]*z[s];b(C),y=z,z=C;for(var D=0,n=0;n<k;n++)D+=Math.pow(y[n]-z[n],2);if(D<e)break}var E={rank:function(a){if(d.string(a))var b=h.filter(a)[0].id();else var b=a.id();return z[m[b]]}};return E}};b.exports=e},{"../../is":83}],15:[function(a,b,c){"use strict";var d=a("../define"),e={animate:d.animate(),animation:d.animation(),animated:d.animated(),clearQueue:d.clearQueue(),delay:d.delay(),delayAnimation:d.delayAnimation(),stop:d.stop()};b.exports=e},{"../define":44}],16:[function(a,b,c){"use strict";var d=a("../util"),e={classes:function(a){a=(a||"").match(/\S+/g)||[];for(var b=this,c=[],e={},f=0;f<a.length;f++){var g=a[f];e[g]=!0}for(var h=0;h<b.length;h++){for(var i=b[h],j=i._private,k=j.classes,l=!1,f=0;f<a.length;f++){var g=a[f],m=k[g];if(!m){l=!0;break}}if(!l)for(var a=Object.keys(k),f=0;f<a.length;f++){var n=a[f],m=k[n],o=e[n];if(m&&!o){l=!0;break}}l&&(j.classes=d.copy(e),c.push(i))}return c.length>0&&this.spawn(c).updateStyle().trigger("class"),b},addClass:function(a){return this.toggleClass(a,!0)},hasClass:function(a){var b=this[0];return!(null==b||!b._private.classes[a])},toggleClass:function(a,b){for(var c=a.match(/\S+/g)||[],d=this,e=[],f=0,g=d.length;f<g;f++)for(var h=d[f],i=!1,j=0;j<c.length;j++){var k=c[j],l=h._private.classes,m=l[k],n=b||void 0===b&&!m;n?(l[k]=!0,m||i||(e.push(h),i=!0)):(l[k]=!1,m&&!i&&(e.push(h),i=!0))}return e.length>0&&this.spawn(e).updateStyle().trigger("class"),d},removeClass:function(a){return this.toggleClass(a,!1)},flashClass:function(a,b){var c=this;if(null==b)b=250;else if(0===b)return c;return c.addClass(a),setTimeout(function(){c.removeClass(a)},b),c}};b.exports=e},{"../util":100}],17:[function(a,b,c){"use strict";var d={allAre:function(a){return this.filter(a).length===this.length},is:function(a){return this.filter(a).length>0},some:function(a,b){for(var c=0;c<this.length;c++){var d=b?a.apply(b,[this[c],c,this]):a(this[c],c,this);if(d)return!0}return!1},every:function(a,b){for(var c=0;c<this.length;c++){var d=b?a.apply(b,[this[c],c,this]):a(this[c],c,this);if(!d)return!1}return!0},same:function(a){return a=this.cy().collection(a),this.length===a.length&&this.intersect(a).length===this.length},anySame:function(a){return a=this.cy().collection(a),this.intersect(a).length>0},allAreNeighbors:function(a){return a=this.cy().collection(a),this.neighborhood().intersect(a).length===a.length}};d.allAreNeighbours=d.allAreNeighbors,b.exports=d},{}],18:[function(a,b,c){"use strict";var d={parent:function(a){for(var b=[],c=this._private.cy,d=0;d<this.length;d++){var e=this[d],f=c.getElementById(e._private.data.parent);f.size()>0&&b.push(f)}return this.spawn(b,{unique:!0}).filter(a)},parents:function(a){for(var b=[],c=this.parent();c.nonempty();){for(var d=0;d<c.length;d++){var e=c[d];b.push(e)}c=c.parent()}return this.spawn(b,{unique:!0}).filter(a)},commonAncestors:function(a){for(var b,c=0;c<this.length;c++){var d=this[c],e=d.parents();b=b||e,b=b.intersect(e)}return b.filter(a)},orphans:function(a){return this.stdFilter(function(a){return a.isNode()&&a.parent().empty()}).filter(a)},nonorphans:function(a){return this.stdFilter(function(a){return a.isNode()&&a.parent().nonempty()}).filter(a)},children:function(a){for(var b=[],c=0;c<this.length;c++){var d=this[c];b=b.concat(d._private.children)}return this.spawn(b,{unique:!0}).filter(a)},siblings:function(a){return this.parent().children().not(this).filter(a)},isParent:function(){var a=this[0];if(a)return 0!==a._private.children.length},isChild:function(){var a=this[0];if(a)return void 0!==a._private.data.parent&&0!==a.parent().length},descendants:function(a){function b(a){for(var d=0;d<a.length;d++){var e=a[d];c.push(e),e.children().nonempty()&&b(e.children())}}var c=[];return b(this.children()),this.spawn(c,{unique:!0}).filter(a)}};d.ancestors=d.parents,b.exports=d},{}],19:[function(a,b,c){"use strict";var d,e,f=a("../define");d=e={data:f.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:f.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:f.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:f.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:f.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:f.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var a=this[0];if(a)return a._private.data.id}},d.attr=d.data,d.removeAttr=d.removeData,b.exports=e},{"../define":44}],20:[function(a,b,c){"use strict";function d(a){return function(b){var c=this;if(void 0===b&&(b=!0),0!==c.length&&c.isNode()&&!c.removed()){for(var d=0,e=c[0],f=e._private.edges,g=0;g<f.length;g++){var h=f[g];!b&&h.isLoop()||(d+=a(e,h))}return d}}}function e(a,b){return function(c){for(var d,e=this.nodes(),f=0;f<e.length;f++){var g=e[f],h=g[a](c);void 0===h||void 0!==d&&!b(h,d)||(d=h)}return d}}var f=a("../util"),g={};f.extend(g,{degree:d(function(a,b){return b.source().same(b.target())?2:1}),indegree:d(function(a,b){return b.target().same(a)?1:0}),outdegree:d(function(a,b){return b.source().same(a)?1:0})}),f.extend(g,{minDegree:e("degree",function(a,b){return a<b}),maxDegree:e("degree",function(a,b){return a>b}),minIndegree:e("indegree",function(a,b){return a<b}),maxIndegree:e("indegree",function(a,b){return a>b}),minOutdegree:e("outdegree",function(a,b){return a<b}),maxOutdegree:e("outdegree",function(a,b){return a>b})}),f.extend(g,{totalDegree:function(a){for(var b=0,c=this.nodes(),d=0;d<c.length;d++)b+=c[d].degree(a);return b}}),b.exports=g},{"../util":100}],21:[function(a,b,c){"use strict";function d(a){return{includeNodes:i["default"](a.includeNodes,u.includeNodes),includeEdges:i["default"](a.includeEdges,u.includeEdges),includeLabels:i["default"](a.includeLabels,u.includeLabels),includeShadows:i["default"](a.includeShadows,u.includeShadows),includeOverlays:i["default"](a.includeOverlays,u.includeOverlays),useCache:i["default"](a.useCache,u.useCache)}}var e,f,g=a("../define"),h=a("../is"),i=a("../util"),j=a("../math");e=f={position:g.data({field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"rtrigger",allowGetting:!0,validKeys:["x","y"],onSet:function(a){var b=a.updateCompoundBounds();b.rtrigger("position")},canSet:function(a){return!a.locked()&&!a.isParent()}}),silentPosition:g.data({field:"position",bindingEvent:"position",allowBinding:!1,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!1,triggerFnName:"trigger",allowGetting:!0,validKeys:["x","y"],onSet:function(a){a.updateCompoundBounds()},canSet:function(a){return!a.locked()&&!a.isParent()}}),positions:function(a,b){if(h.plainObject(a))this.position(a);else if(h.fn(a)){for(var c=a,d=0;d<this.length;d++){var e=this[d],a=c.apply(e,[d,e]);if(a&&!e.locked()&&!e.isParent()){var f=e._private.position;f.x=a.x,f.y=a.y}}var g=this.updateCompoundBounds(),i=g.length>0?this.add(g):this;b?i.trigger("position"):i.rtrigger("position")}return this},silentPositions:function(a){return this.positions(a,!0)},renderedPosition:function(a,b){var c=this[0],d=this.cy(),e=d.zoom(),f=d.pan(),g=h.plainObject(a)?a:void 0,i=void 0!==g||void 0!==b&&h.string(a);if(c&&c.isNode()){if(!i){var j=c._private.position;return g={x:j.x*e+f.x,y:j.y*e+f.y},void 0===a?g:g[a]}for(var k=0;k<this.length;k++){var c=this[k];void 0!==b?c._private.position[a]=(b-f[a])/e:void 0!==g&&(c._private.position={x:(g.x-f.x)/e,y:(g.y-f.y)/e})}this.rtrigger("position")}else if(!i)return;return this},relativePosition:function(a,b){var c=this[0],d=this.cy(),e=h.plainObject(a)?a:void 0,f=void 0!==e||void 0!==b&&h.string(a),g=d.hasCompoundNodes();if(c&&c.isNode()){if(!f){var i=c._private.position,j=g?c.parent():null,k=j&&j.length>0,l=k;k&&(j=j[0]);var m=l?j._private.position:{x:0,y:0};return e={x:i.x-m.x,y:i.y-m.y},void 0===a?e:e[a]}for(var n=0;n<this.length;n++){var c=this[n],j=g?c.parent():null,k=j&&j.length>0,l=k;k&&(j=j[0]);var m=l?j._private.position:{x:0,y:0};void 0!==b?c._private.position[a]=b+m[a]:void 0!==e&&(c._private.position={x:e.x+m.x,y:e.y+m.y})}this.rtrigger("position")}else if(!f)return;return this},renderedBoundingBox:function(a){var b=this.boundingBox(a),c=this.cy(),d=c.zoom(),e=c.pan(),f=b.x1*d+e.x,g=b.x2*d+e.x,h=b.y1*d+e.y,i=b.y2*d+e.y;return{x1:f,x2:g,y1:h,y2:i,w:g-f,h:i-h}},updateCompoundBounds:function(){function a(a){if(a.isParent()){var b=a._private,d=a.children(),e="include"===a.pstyle("compound-sizing-wrt-labels").value,f=d.boundingBox({includeLabels:e,includeShadows:!1,includeOverlays:!1,useCache:!1}),g=b.position;b.autoWidth=f.w,g.x=(f.x1+f.x2)/2,b.autoHeight=f.h,g.y=(f.y1+f.y2)/2,c.push(a)}}var b=this.cy();if(!b.styleEnabled()||!b.hasCompoundNodes())return b.collection();for(var c=[],d=this;d.nonempty();){for(var e=0;e<d.length;e++){var f=d[e];a(f)}d=d.parent()}return this.spawn(c)}};var k=function(a){return a===1/0||a===-(1/0)?0:a},l=function(a,b,c,d,e){d-b!==0&&e-c!==0&&(a.x1=b<a.x1?b:a.x1,a.x2=d>a.x2?d:a.x2,a.y1=c<a.y1?c:a.y1,a.y2=e>a.y2?e:a.y2)},m=function(a,b){return l(a,b.x1,b.y1,b.x2,b.y2)},n=function(a,b,c){return i.getPrefixedProperty(a,b,c)},o=function(a,b,c,d){var e,f,g=b._private,h=g.rstyle,i=h.arrowWidth/2,j=b.pstyle(c+"-arrow-shape").value;"none"!==j&&("source"===c?(e=h.srcX,f=h.srcY):"target"===c?(e=h.tgtX,f=h.tgtY):(e=h.midX,f=h.midY),l(a,e-i,f-i,e+i,f+i))},p=function(a,b,c,d){var e;e=c?c+"-":"";var f=b._private,g=f.rstyle,h=b.pstyle(e+"label").strValue;if(h){var i,j,k,m,o=b.pstyle("text-halign"),p=b.pstyle("text-valign"),q=n(g,"labelWidth",c),r=n(g,"labelHeight",c),s=n(g,"labelX",c),t=n(g,"labelY",c),u=b.pstyle(e+"text-margin-x").pfValue,v=b.pstyle(e+"text-margin-y").pfValue,w=b.isEdge(),x=b.pstyle(e+"text-rotation"),y=b.pstyle("text-shadow-blur").pfValue/2,z=b.pstyle("text-shadow-offset-x").pfValue,A=b.pstyle("text-shadow-offset-y").pfValue,B=b.pstyle("text-shadow-opacity").value,C=b.pstyle("text-outline-width").pfValue,D=b.pstyle("text-border-width").pfValue,E=D/2,F=r,G=q,H=G/2,I=F/2;if(w)i=s-H,j=s+H,k=t-I,m=t+I;else{switch(o.value){case"left":i=s-G,j=s;break;case"center":i=s-H,j=s+H;break;case"right":i=s,j=s+G}switch(p.value){case"top":k=t-F,m=t;break;case"center":k=t-I,m=t+I;break;case"bottom":k=t,m=t+F}}var J=w&&"autorotate"===x.strValue,K=null!=x.pfValue&&0!==x.pfValue;if(J||K){var L=J?n(f.rstyle,"labelAngle",c):x.pfValue,M=Math.cos(L),N=Math.sin(L),O=function(a,b){return a-=s,b-=t,{x:a*M-b*N+s,y:a*N+b*M+t}},P=O(i,k),Q=O(i,m),R=O(j,k),S=O(j,m);i=Math.min(P.x,Q.x,R.x,S.x),j=Math.max(P.x,Q.x,R.x,S.x),k=Math.min(P.y,Q.y,R.y,S.y),m=Math.max(P.y,Q.y,R.y,S.y)}i+=u-Math.max(C,E),j+=u+Math.max(C,E),k+=v-Math.max(C,E),m+=v+Math.max(C,E),l(a,i,k,j,m),d.includeShadows&&B>0&&(i+=-y+z,j+=+y+z,k+=-y+A,m+=+y+A,l(a,i,k,j,m))}return a},q=function(a,b){var c,d,e,f,g,h,i=a._private.cy,m=i._private,n=m.styleEnabled,q={x1:1/0,y1:1/0,x2:-(1/0),y2:-(1/0)},r=a._private,s=n?a.pstyle("display").value:"element",t=a.isNode(),u=a.isEdge(),v="none"!==s;if(v){var w=0,x=0;n&&b.includeOverlays&&(w=a.pstyle("overlay-opacity").value,0!==w&&(x=a.pstyle("overlay-padding").value));var y=0,z=0;if(n&&(y=a.pstyle("width").pfValue,z=y/2),t&&b.includeNodes){var A=r.position;g=A.x,h=A.y;var y=a.outerWidth(),B=y/2,C=a.outerHeight(),D=C/2;c=g-B-x,d=g+B+x,e=h-D-x,f=h+D+x,l(q,c,e,d,f)}else if(u&&b.includeEdges){var E=r.rstyle||{};if(n&&(c=Math.min(E.srcX,E.midX,E.tgtX),d=Math.max(E.srcX,E.midX,E.tgtX),e=Math.min(E.srcY,E.midY,E.tgtY),
f=Math.max(E.srcY,E.midY,E.tgtY),c-=z,d+=z,e-=z,f+=z,l(q,c,e,d,f)),n&&"haystack"===a.pstyle("curve-style").strValue){var F=E.haystackPts;if(c=F[0].x,e=F[0].y,d=F[1].x,f=F[1].y,c>d){var G=c;c=d,d=G}if(e>f){var G=e;e=f,f=G}l(q,c-z,e-z,d+z,f+z)}else{for(var H=E.bezierPts||E.linePts||[],I=0;I<H.length;I++){var J=H[I];c=J.x-z,d=J.x+z,e=J.y-z,f=J.y+z,l(q,c,e,d,f)}if(0===H.length){var K=r.source,L=K._private,M=L.position,N=r.target,O=N._private,P=O.position;if(c=M.x,d=P.x,e=M.y,f=P.y,c>d){var G=c;c=d,d=G}if(e>f){var G=e;e=f,f=G}c-=z,d+=z,e-=z,f+=z,l(q,c,e,d,f)}}}if(n){if(c=q.x1,d=q.x2,e=q.y1,f=q.y2,b.includeShadows&&a.pstyle("shadow-opacity").value>0){var Q=a.pstyle("shadow-blur").pfValue/2,R=a.pstyle("shadow-offset-x").pfValue,S=a.pstyle("shadow-offset-y").pfValue;l(q,c-Q+R,e-Q+S,d+Q+R,f+Q+S)}l(q,c-x,e-x,d+x,f+x)}n&&b.includeEdges&&u&&(o(q,a,"mid-source",b),o(q,a,"mid-target",b),o(q,a,"source",b),o(q,a,"target",b)),n&&b.includeLabels&&(p(q,a,null,b),u&&(p(q,a,"source",b),p(q,a,"target",b)))}return q.x1=k(q.x1),q.y1=k(q.y1),q.x2=k(q.x2),q.y2=k(q.y2),q.w=k(q.x2-q.x1),q.h=k(q.y2-q.y1),q.w>0&&q.h>0&&v&&j.expandBoundingBox(q,1),q},r=function(a){return a?"t":"f"},s=function(a){var b="";return b+=r(a.incudeNodes),b+=r(a.includeEdges),b+=r(a.includeLabels),b+=r(a.includeShadows),b+=r(a.includeOverlays)},t=function(a,b){var c,d=a._private,e=a.cy().headless(),f=b===u?v:s(b);return b.useCache&&!e&&d.bbCache&&d.bbCache[f]?c=d.bbCache[f]:(c=q(a,b),e||(d.bbCache=d.bbCache||{},d.bbCache[f]=c)),c},u={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeShadows:!0,includeOverlays:!0,useCache:!0},v=s(u);f.recalculateRenderedStyle=function(a){var b=this.cy(),c=b.renderer(),d=b.styleEnabled();return c&&d&&c.recalculateRenderedStyle(this,a),this},f.boundingBox=function(a){if(1===this.length&&this[0]._private.bbCache&&(void 0===a||void 0===a.useCache||a.useCache===!0))return a=void 0===a?u:d(a),t(this[0],a);var b={x1:1/0,y1:1/0,x2:-(1/0),y2:-(1/0)};a=a||i.staticEmptyObject();var c=d(a),e=this,f=e.cy(),g=f.styleEnabled();g&&this.recalculateRenderedStyle(c.useCache);for(var h=0;h<e.length;h++){var j=e[h];g&&j.isEdge()&&"bezier"===j.pstyle("curve-style").strValue&&j.parallelEdges().recalculateRenderedStyle(c.useCache),m(b,t(j,c))}return b.x1=k(b.x1),b.y1=k(b.y1),b.x2=k(b.x2),b.y2=k(b.y2),b.w=k(b.x2-b.x1),b.h=k(b.y2-b.y1),b};var w=function(a){a.uppercaseName=i.capitalize(a.name),a.autoName="auto"+a.uppercaseName,a.labelName="label"+a.uppercaseName,a.outerName="outer"+a.uppercaseName,a.uppercaseOuterName=i.capitalize(a.outerName),e[a.name]=function(){var b=this[0],c=b._private,d=c.cy,e=d._private.styleEnabled;if(b){if(!e)return 1;if(b.isParent())return c[a.autoName]||0;var f=b.pstyle(a.name);switch(f.strValue){case"label":return c.rstyle[a.labelName]||0;default:return f.pfValue}}},e["outer"+a.uppercaseName]=function(){var b=this[0],c=b._private,d=c.cy,e=d._private.styleEnabled;if(b){if(e){var f=b[a.name](),g=b.pstyle("border-width").pfValue,h=2*b.pstyle("padding").pfValue;return f+g+h}return 1}},e["rendered"+a.uppercaseName]=function(){var b=this[0];if(b){var c=b[a.name]();return c*this.cy().zoom()}},e["rendered"+a.uppercaseOuterName]=function(){var b=this[0];if(b){var c=b[a.outerName]();return c*this.cy().zoom()}}};w({name:"width"}),w({name:"height"}),e.modelPosition=e.point=e.position,e.modelPositions=e.points=e.positions,e.renderedPoint=e.renderedPosition,e.relativePoint=e.relativePosition,e.boundingbox=e.boundingBox,e.renderedBoundingbox=e.renderedBoundingBox,b.exports=f},{"../define":44,"../is":83,"../math":85,"../util":100}],22:[function(a,b,c){"use strict";var d=a("../util"),e=a("../is"),f=function(a,b,c){var f=this;if(c=!(void 0!==c&&!c),void 0===a||void 0===b||!e.core(a))return void d.error("An element must have a core reference and parameters set");var g=b.group;if(null==g&&(g=b.data&&null!=b.data.source&&null!=b.data.target?"edges":"nodes"),"nodes"!==g&&"edges"!==g)return void d.error("An element must be of type `nodes` or `edges`; you specified `"+g+"`");if(this.length=1,this[0]=this,this._private={cy:a,single:!0,data:b.data||{},position:b.position||{},autoWidth:void 0,autoHeight:void 0,listeners:[],group:g,style:{},rstyle:{},styleCxts:[],removed:!0,selected:!!b.selected,selectable:void 0===b.selectable||!!b.selectable,locked:!!b.locked,grabbed:!1,grabbable:void 0===b.grabbable||!!b.grabbable,active:!1,classes:{},animation:{current:[],queue:[]},rscratch:{},scratch:b.scratch||{},edges:[],children:[],traversalCache:{}},b.renderedPosition){var h=b.renderedPosition,i=a.pan(),j=a.zoom();this._private.position={x:(h.x-i.x)/j,y:(h.y-i.y)/j}}if(e.string(b.classes))for(var k=b.classes.split(/\s+/),l=0,m=k.length;l<m;l++){var n=k[l];n&&""!==n&&(f._private.classes[n]=!0)}(b.style||b.css)&&a.style().applyBypass(this,b.style||b.css),(void 0===c||c)&&this.restore()};b.exports=f},{"../is":83,"../util":100}],23:[function(a,b,c){"use strict";var d=a("../define"),e={on:d.on(),one:d.on({unbindSelfOnTrigger:!0}),once:d.on({unbindAllBindersOnTrigger:!0}),off:d.off(),trigger:d.trigger(),rtrigger:function(a,b){if(0!==this.length)return this.cy().notify({type:a,eles:this}),this.trigger(a,b),this}};d.eventAliasesOn(e),b.exports=e},{"../define":44}],24:[function(a,b,c){"use strict";var d=a("../is"),e=a("../selector"),f={nodes:function(a){return this.filter(function(a,b){return b.isNode()}).filter(a)},edges:function(a){return this.filter(function(a,b){return b.isEdge()}).filter(a)},filter:function(a){if(void 0===a)return this;if(d.string(a)||d.elementOrCollection(a))return e(a).filter(this);if(d.fn(a)){for(var b=[],c=0;c<this.length;c++){var f=this[c];a.apply(f,[c,f])&&b.push(f)}return this.spawn(b)}return this.spawn()},not:function(a){if(a){d.string(a)&&(a=this.filter(a));for(var b=[],c=0;c<this.length;c++){var e=this[c],f=a._private.ids[e.id()];f||b.push(e)}return this.spawn(b)}return this},absoluteComplement:function(){var a=this._private.cy;return a.mutableElements().not(this)},intersect:function(a){if(d.string(a)){var b=a;return this.filter(b)}for(var c=[],e=this,f=a,g=this.length<a.length,h=g?f._private.ids:e._private.ids,i=g?e:f,j=0;j<i.length;j++){var k=i[j]._private.data.id,l=h[k];l&&c.push(l)}return this.spawn(c)},xor:function(a){var b=this._private.cy;d.string(a)&&(a=b.$(a));var c=[],e=this,f=a,g=function(a,b){for(var d=0;d<a.length;d++){var e=a[d],f=e._private.data.id,g=b._private.ids[f];g||c.push(e)}};return g(e,f),g(f,e),this.spawn(c)},diff:function(a){var b=this._private.cy;d.string(a)&&(a=b.$(a));var c=[],e=[],f=[],g=this,h=a,i=function(a,b,c){for(var d=0;d<a.length;d++){var e=a[d],g=e._private.data.id,h=b._private.ids[g];h?f.push(e):c.push(e)}};return i(g,h,c),i(h,g,e),{left:this.spawn(c,{unique:!0}),right:this.spawn(e,{unique:!0}),both:this.spawn(f,{unique:!0})}},add:function(a){var b=this._private.cy;if(!a)return this;if(d.string(a)){var c=a;a=b.mutableElements().filter(c)}for(var e=[],f=0;f<this.length;f++)e.push(this[f]);for(var f=0;f<a.length;f++){var g=!this._private.ids[a[f].id()];g&&e.push(a[f])}return this.spawn(e)},merge:function(a){var b=this._private,c=b.cy;if(!a)return this;if(a&&d.string(a)){var e=a;a=c.mutableElements().filter(e)}for(var f=0;f<a.length;f++){var g=a[f],h=g._private.data.id,i=!b.ids[h];if(i){var j=this.length++;this[j]=g,b.ids[h]=g,b.indexes[h]=j}else{var j=b.indexes[h];this[j]=g,b.ids[h]=g}}return this},unmergeOne:function(a){a=a[0];var b=this._private,c=a._private.data.id,d=b.indexes[c];if(null==d)return this;this[d]=void 0,b.ids[c]=void 0,b.indexes[c]=void 0;var e=d===this.length-1;if(this.length>1&&!e){var f=this.length-1,g=this[f],h=g._private.data.id;this[f]=void 0,this[d]=g,b.indexes[h]=d}return this.length--,this},unmerge:function(a){var b=this._private.cy;if(!a)return this;if(a&&d.string(a)){var c=a;a=b.mutableElements().filter(c)}for(var e=0;e<a.length;e++)this.unmergeOne(a[e]);return this},map:function(a,b){for(var c=[],d=this,e=0;e<d.length;e++){var f=d[e],g=b?a.apply(b,[f,e,d]):a(f,e,d);c.push(g)}return c},stdFilter:function(a,b){for(var c=[],d=this,e=0;e<d.length;e++){var f=d[e],g=b?a.apply(b,[f,e,d]):a(f,e,d);g&&c.push(f)}return this.spawn(c)},max:function(a,b){for(var c,d=-(1/0),e=this,f=0;f<e.length;f++){var g=e[f],h=b?a.apply(b,[g,f,e]):a(g,f,e);h>d&&(d=h,c=g)}return{value:d,ele:c}},min:function(a,b){for(var c,d=1/0,e=this,f=0;f<e.length;f++){var g=e[f],h=b?a.apply(b,[g,f,e]):a(g,f,e);h<d&&(d=h,c=g)}return{value:d,ele:c}}},g=f;g.u=g["|"]=g["+"]=g.union=g.or=g.add,g["\\"]=g["!"]=g["-"]=g.difference=g.relativeComplement=g.subtract=g.not,g.n=g["&"]=g["."]=g.and=g.intersection=g.intersect,g["^"]=g["(+)"]=g["(-)"]=g.symmetricDifference=g.symdiff=g.xor,g.fnFilter=g.filterFn=g.stdFilter,g.complement=g.abscomp=g.absoluteComplement,b.exports=f},{"../is":83,"../selector":87}],25:[function(a,b,c){"use strict";var d={isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source().id()===this.target().id()},isSimple:function(){return this.isEdge()&&this.source().id()!==this.target().id()},group:function(){var a=this[0];if(a)return a._private.group}};b.exports=d},{}],26:[function(a,b,c){"use strict";var d=a("../util"),e=a("../is"),f=a("./element"),g={generate:function(a,b,c){for(var e=null!=c?c:d.uuid();a.hasElementWithId(e);)e=d.uuid();return e}},h=function(a,b,c){if(void 0===a||!e.core(a))return void d.error("A collection must have a reference to the core");var h={},i={},j=!1;if(b){if(b.length>0&&e.plainObject(b[0])&&!e.element(b[0])){j=!0;for(var k=[],l={},m=0,n=b.length;m<n;m++){var o=b[m];null==o.data&&(o.data={});var p=o.data;if(null==p.id)p.id=g.generate(a,o);else if(a.hasElementWithId(p.id)||l[p.id])continue;var q=new f(a,o,(!1));k.push(q),l[p.id]=!0}b=k}}else b=[];this.length=0;for(var m=0,n=b.length;m<n;m++){var r=b[m];if(r){var s=r._private.data.id;(!c||c.unique&&!h[s])&&(h[s]=r,i[s]=this.length,this[this.length]=r,this.length++)}}this._private={cy:a,ids:h,indexes:i},j&&this.restore()},i=f.prototype=h.prototype;i.instanceString=function(){return"collection"},i.spawn=function(a,b,c){return e.core(a)||(c=b,b=a,a=this.cy()),new h(a,b,c)},i.spawnSelf=function(){return this.spawn(this)},i.cy=function(){return this._private.cy},i.element=function(){return this[0]},i.collection=function(){return e.collection(this)?this:new h(this._private.cy,[this])},i.unique=function(){return new h(this._private.cy,this,{unique:!0})},i.hasElementWithId=function(a){return!!this._private.ids[a]},i.getElementById=function(a){var b=this._private.cy,c=this._private.ids[a];return c?c:new h(b)},i.poolIndex=function(){var a=this._private.cy,b=a._private.elements,c=this._private.data.id;return b._private.indexes[c]},i.json=function(a){var b=this.element(),c=this.cy();if(null==b&&a)return this;if(null!=b){var f=b._private;if(e.plainObject(a)){c.startBatch(),a.data&&b.data(a.data),a.position&&b.position(a.position);var g=function(c,d,e){var g=a[c];null!=g&&g!==f[c]&&(g?b[d]():b[e]())};return g("removed","remove","restore"),g("selected","select","unselect"),g("selectable","selectify","unselectify"),g("locked","lock","unlock"),g("grabbable","grabify","ungrabify"),null!=a.classes&&b.classes(a.classes),c.endBatch(),this}if(void 0===a){var h={data:d.copy(f.data),position:d.copy(f.position),group:f.group,removed:f.removed,selected:f.selected,selectable:f.selectable,locked:f.locked,grabbable:f.grabbable,classes:null};return h.classes=Object.keys(f.classes).filter(function(a){return f.classes[a]}).join(" "),h}}},i.jsons=function(){for(var a=[],b=0;b<this.length;b++){var c=this[b],d=c.json();a.push(d)}return a},i.clone=function(){for(var a=this.cy(),b=[],c=0;c<this.length;c++){var d=this[c],e=d.json(),g=new f(a,e,(!1));b.push(g)}return new h(a,b)},i.copy=i.clone,i.restore=function(a){var b=this,c=b.cy(),f=c._private;void 0===a&&(a=!0);for(var i,j=[],k=[],l=0,m=b.length;l<m;l++){var n=b[l];n.removed()&&(n.isNode()?j.push(n):k.push(n))}i=j.concat(k);var l,o=function(){i.splice(l,1),l--};for(l=0;l<i.length;l++){var n=i[l],p=n._private,q=p.data;if(p.traversalCache=null,void 0===q.id)q.id=g.generate(c,n);else if(e.number(q.id))q.id=""+q.id;else{if(e.emptyString(q.id)||!e.string(q.id)){d.error("Can not create element with invalid string ID `"+q.id+"`"),o();continue}if(c.hasElementWithId(q.id)){d.error("Can not create second element with ID `"+q.id+"`"),o();continue}}var r=q.id;if(n.isNode()){var s=n,t=p.position;null==t.x&&(t.x=0),null==t.y&&(t.y=0)}if(n.isEdge()){for(var u=n,v=["source","target"],w=v.length,x=!1,y=0;y<w;y++){var z=v[y],A=q[z];e.number(A)&&(A=q[z]=""+q[z]),null==A||""===A?(d.error("Can not create edge `"+r+"` with unspecified "+z),x=!0):c.hasElementWithId(A)||(d.error("Can not create edge `"+r+"` with nonexistant "+z+" `"+A+"`"),x=!0)}if(x){o();continue}var B=c.getElementById(q.source),C=c.getElementById(q.target);B._private.edges.push(u),C._private.edges.push(u),u._private.source=B,u._private.target=C}p.ids={},p.ids[r]=n,p.indexes={},p.indexes[r]=n,p.removed=!1,c.addToPool(n)}for(var l=0;l<j.length;l++){var s=j[l],q=s._private.data;e.number(q.parent)&&(q.parent=""+q.parent);var D=q.parent,E=null!=D;if(E){var F=c.getElementById(D);if(F.empty())q.parent=void 0;else{for(var G=!1,H=F;!H.empty();){if(s.same(H)){G=!0,q.parent=void 0;break}H=H.parent()}G||(F[0]._private.children.push(s),s._private.parent=F[0],f.hasCompoundNodes=!0)}}}if(i.length>0){for(var I=new h(c,i),l=0;l<I.length;l++){var n=I[l];if(!n.isNode()){for(var J=n.parallelEdges(),y=0;y<J.length;y++)J[y]._private.traversalCache=null;n.source()[0]._private.traversalCache=null,n.target()[0]._private.traversalCache=null}}var K;K=f.hasCompoundNodes?I.add(I.connectedNodes()).add(I.parent()):I,K.updateStyle(a),a?I.rtrigger("add"):I.trigger("add")}return b},i.removed=function(){var a=this[0];return a&&a._private.removed},i.inside=function(){var a=this[0];return a&&!a._private.removed},i.remove=function(a){function b(a){for(var b=a._private.edges,c=0;c<b.length;c++)e(b[c])}function c(a){for(var b=a._private.children,c=0;c<b.length;c++)e(b[c])}function e(a){var d=m[a.id()];d||(m[a.id()]=!0,a.isNode()?(l.push(a),b(a),c(a)):l.unshift(a))}function f(a,b){var c=a._private.edges;d.removeFromArray(c,b),a._private.traversalCache=null}function g(a){for(var b=a.parallelEdges(),c=0;c<b.length;c++)b[c]._private.traversalCache=null}function i(a,b){b=b[0],a=a[0];var c=a._private.children,e=a.id();d.removeFromArray(c,b),r.ids[e]||(r.ids[e]=!0,r.push(a))}var j=this,k=[],l=[],m={},n=j._private.cy;void 0===a&&(a=!0);for(var o=0,p=j.length;o<p;o++){var q=j[o];e(q)}var r=[];r.ids={},n.removeFromPool(l);for(var o=0;o<l.length;o++){var q=l[o];if(q._private.removed=!0,k.push(q),q.isEdge()){var s=q.source()[0],t=q.target()[0];f(s,q),f(t,q),g(q)}else{var u=q.parent();0!==u.length&&i(u,q)}}var v=n._private.elements;n._private.hasCompoundNodes=!1;for(var o=0;o<v.length;o++){var q=v[o];if(q.isParent()){n._private.hasCompoundNodes=!0;break}}var w=new h(this.cy(),k);w.size()>0&&(a&&this.cy().notify({type:"remove",eles:w}),w.trigger("remove"));for(var o=0;o<r.length;o++){var q=r[o];q.removed()||q.updateStyle()}return new h(n,k)},i.move=function(a){var b=this._private.cy;if(void 0!==a.source||void 0!==a.target){var c=a.source,d=a.target,e=b.hasElementWithId(c),f=b.hasElementWithId(d);if(e||f){var g=this.jsons();this.remove();for(var h=0;h<g.length;h++){var i=g[h],j=this[h];"edges"===i.group&&(e&&(i.data.source=c),f&&(i.data.target=d),i.scratch=j._private.scratch)}return b.add(g)}}else if(void 0!==a.parent){var k=a.parent,l=null===k||b.hasElementWithId(k);if(l){var g=this.jsons(),m=this.descendants(),n=m.union(m.union(this).connectedEdges()).jsons();this.remove();for(var h=0;h<g.length;h++){var i=g[h],j=this[h];"nodes"===i.group&&(i.data.parent=null===k?void 0:k,i.scratch=j._private.scratch)}return b.add(g.concat(n))}}return this},[a("./algorithms"),a("./animation"),a("./class"),a("./comparators"),a("./compounds"),a("./data"),a("./degree"),a("./dimensions"),a("./events"),a("./filter"),a("./group"),a("./index"),a("./iteration"),a("./layout"),a("./style"),a("./switch-functions"),a("./traversing")].forEach(function(a){d.extend(i,a)}),b.exports=h},{"../is":83,"../util":100,"./algorithms":11,"./animation":15,"./class":16,"./comparators":17,"./compounds":18,"./data":19,"./degree":20,"./dimensions":21,"./element":22,"./events":23,"./filter":24,"./group":25,"./index":26,"./iteration":27,"./layout":28,"./style":29,"./switch-functions":30,"./traversing":31}],27:[function(a,b,c){"use strict";var d=a("../is"),e=a("./zsort"),f={each:function(a){if(d.fn(a))for(var b=0;b<this.length;b++){var c=this[b],e=a.apply(c,[b,c]);if(e===!1)break}return this},forEach:function(a,b){if(d.fn(a))for(var c=0;c<this.length;c++){var e=this[c],f=b?a.apply(b,[e,c,this]):a(e,c,this);if(f===!1)break}return this},toArray:function(){for(var a=[],b=0;b<this.length;b++)a.push(this[b]);return a},slice:function(a,b){var c=[],d=this.length;null==b&&(b=d),null==a&&(a=0),a<0&&(a=d+a),b<0&&(b=d+b);for(var e=a;e>=0&&e<b&&e<d;e++)c.push(this[e]);return this.spawn(c)},size:function(){return this.length},eq:function(a){return this[a]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(a){if(!d.fn(a))return this;var b=this.toArray().sort(a);return this.spawn(b)},sortByZIndex:function(){return this.sort(e)},zDepth:function(){var a=this[0];if(a){var b=a._private,c=b.group;if("nodes"===c){var d=b.data.parent?a.parents().size():0;return a.isParent()?d:Number.MAX_VALUE}var e=b.source,f=b.target,g=e.zDepth(),h=f.zDepth();return Math.max(g,h,0)}}};b.exports=f},{"../is":83,"./zsort":32}],28:[function(a,b,c){"use strict";var d=a("../is"),e=a("../util"),f=a("../promise"),g={layoutPositions:function(a,b,c){var e=this.nodes(),g=this.cy();if(a.trigger({type:"layoutstart",layout:a}),a.animations=[],b.animate){for(var h=0;h<e.length;h++){var i=e[h],j=c.call(i,h,i),k=i.position();d.number(k.x)&&d.number(k.y)||i.silentPosition({x:0,y:0});var l=i.animation({position:j,duration:b.animationDuration,easing:b.animationEasing});a.animations.push(l),l.play()}var m;g.on("step.*",m=function(){b.fit&&g.fit(b.eles,b.padding)}),a.one("layoutstop",function(){g.off("step.*",m)}),a.one("layoutready",b.ready),a.trigger({type:"layoutready",layout:a}),f.all(a.animations.map(function(a){return a.promise()})).then(function(){g.off("step.*",m),null!=b.zoom&&g.zoom(b.zoom),b.pan&&g.pan(b.pan),b.fit&&g.fit(b.eles,b.padding),a.one("layoutstop",b.stop),a.trigger({type:"layoutstop",layout:a})})}else e.positions(c),b.fit&&g.fit(b.eles,b.padding),null!=b.zoom&&g.zoom(b.zoom),b.pan&&g.pan(b.pan),a.one("layoutready",b.ready),a.trigger({type:"layoutready",layout:a}),a.one("layoutstop",b.stop),a.trigger({type:"layoutstop",layout:a});return this},layout:function(a){var b=this.cy();return b.layout(e.extend({},a,{eles:this})),this},makeLayout:function(a){var b=this.cy();return b.makeLayout(e.extend({},a,{eles:this}))}};g.createLayout=g.makeLayout,b.exports=g},{"../is":83,"../promise":86,"../util":100}],29:[function(a,b,c){"use strict";var d=a("../is"),e={updateStyle:function(a){var b=this._private.cy;if(!b.styleEnabled())return this;if(b._private.batchingStyle){var c=b._private.batchStyleEles;return c.merge(this),this}var d=b.hasCompoundNodes(),e=b.style(),f=this;if(a=!(!a&&void 0!==a),d&&(f=this.spawnSelf().merge(this.descendants()).merge(this.parents())),e.apply(f),d){f.updateCompoundBounds()}return a?f.rtrigger("style"):f.trigger("style"),this},updateMappers:function(a){var b=this._private.cy,c=b.style();if(a=!(!a&&void 0!==a),!b.styleEnabled())return this;c.updateMappers(this);var d=this.updateCompoundBounds(),e=d.length>0?this.add(d):this;return a?e.rtrigger("style"):e.trigger("style"),this},parsedStyle:function(a){var b=this[0];if(b.cy().styleEnabled())return b?b._private.style[a]||b.cy().style().getDefaultProperty(a):void 0},renderedStyle:function(a){var b=this.cy();if(!b.styleEnabled())return this;var c=this[0];if(c){var d=c.cy().style().getRenderedStyle(c);return void 0===a?d:d[a]}},style:function(a,b){var c=this.cy();if(!c.styleEnabled())return this;var e=!1,f=c.style();if(d.plainObject(a)){var g=a;f.applyBypass(this,g,e);var h=this.updateCompoundBounds(),i=h.length>0?this.add(h):this;i.rtrigger("style")}else if(d.string(a)){if(void 0===b){var j=this[0];return j?f.getStylePropertyValue(j,a):void 0}f.applyBypass(this,a,b,e);var h=this.updateCompoundBounds(),i=h.length>0?this.add(h):this;i.rtrigger("style")}else if(void 0===a){var j=this[0];return j?f.getRawStyle(j):void 0}return this},removeStyle:function(a){var b=this.cy();if(!b.styleEnabled())return this;var c=!1,d=b.style(),e=this;if(void 0===a)for(var f=0;f<e.length;f++){var g=e[f];d.removeAllBypasses(g,c)}else{a=a.split(/\s+/);for(var f=0;f<e.length;f++){var g=e[f];d.removeBypasses(g,a,c)}}var h=this.updateCompoundBounds(),i=h.length>0?this.add(h):this;return i.rtrigger("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},visible:function(){var a=this.cy();if(!a.styleEnabled())return!0;var b=this[0],c=a.hasCompoundNodes();if(b){if("visible"!==b.pstyle("visibility").value||"element"!==b.pstyle("display").value||0===b.pstyle("width").pfValue)return!1;if("nodes"===b._private.group){if(0===b.pstyle("height").pfValue)return!1;if(!c)return!0;var d=b._private.data.parent?b.parents():null;if(d)for(var e=0;e<d.length;e++){var f=d[e],g=f.pstyle("visibility").value,h=f.pstyle("display").value;if("visible"!==g||"element"!==h)return!1}return!0}var i=b._private.source,j=b._private.target;return i.visible()&&j.visible()}},hidden:function(){var a=this[0];if(a)return!a.visible()},effectiveOpacity:function(){var a=this.cy();if(!a.styleEnabled())return 1;var b=a.hasCompoundNodes(),c=this[0];if(c){var d=c._private,e=c.pstyle("opacity").value;if(!b)return e;var f=d.data.parent?c.parents():null;if(f)for(var g=0;g<f.length;g++){var h=f[g],i=h.pstyle("opacity").value;e=i*e}return e}},transparent:function(){var a=this.cy();if(!a.styleEnabled())return!1;var b=this[0],c=b.cy().hasCompoundNodes();return b?c?0===b.effectiveOpacity():0===b.pstyle("opacity").value:void 0},backgrounding:function(){var a=this.cy();if(!a.styleEnabled())return!1;var b=this[0];return!!b._private.backgrounding}};e.bypass=e.css=e.style,e.renderedCss=e.renderedStyle,e.removeBypass=e.removeCss=e.removeStyle,e.pstyle=e.parsedStyle,b.exports=e},{"../is":83}],30:[function(a,b,c){"use strict";function d(a){return function(){var b=arguments,c=[];if(2===b.length){var d=b[0],e=b[1];this.on(a.event,d,e)}else if(1===b.length){var e=b[0];this.on(a.event,e)}else if(0===b.length){for(var f=0;f<this.length;f++){var g=this[f],h=!a.ableField||g._private[a.ableField],i=g._private[a.field]!=a.value;if(a.overrideAble){var j=a.overrideAble(g);if(void 0!==j&&(h=j,!j))return this}h&&(g._private[a.field]=a.value,i&&c.push(g))}var k=this.spawn(c);k.updateStyle(),k.trigger(a.event)}return this}}function e(a){f[a.field]=function(){var b=this[0];if(b){if(a.overrideField){var c=a.overrideField(b);if(void 0!==c)return c}return b._private[a.field]}},f[a.on]=d({event:a.on,field:a.field,ableField:a.ableField,overrideAble:a.overrideAble,value:!0}),f[a.off]=d({event:a.off,field:a.field,ableField:a.ableField,overrideAble:a.overrideAble,value:!1})}var f={};e({field:"locked",overrideField:function(a){return!!a.cy().autolock()||void 0},on:"lock",off:"unlock"}),e({field:"grabbable",overrideField:function(a){return!a.cy().autoungrabify()&&void 0},on:"grabify",off:"ungrabify"}),e({field:"selected",ableField:"selectable",overrideAble:function(a){return!a.cy().autounselectify()&&void 0},on:"select",off:"unselect"}),e({field:"selectable",overrideField:function(a){return!a.cy().autounselectify()&&void 0},on:"selectify",off:"unselectify"}),f.deselect=f.unselect,f.grabbed=function(){var a=this[0];if(a)return a._private.grabbed},e({field:"active",on:"activate",off:"unactivate"}),f.inactive=function(){var a=this[0];if(a)return!a._private.active},b.exports=f},{}],31:[function(a,b,c){"use strict";function d(a){return function(b){for(var c=[],d=0;d<this.length;d++){var e=this[d],f=e._private[a.attr];f&&c.push(f)}return this.spawn(c,{unique:!0}).filter(b)}}function e(a){return function(b){var c=[],d=this._private.cy,e=a||{};h.string(b)&&(b=d.$(b));for(var f=this._private.ids,g=b._private.ids,i=0;i<b.length;i++)for(var j=b[i]._private.edges,k=0;k<j.length;k++){var l=j[k],m=l._private.data,n=f[m.source]&&g[m.target],o=g[m.source]&&f[m.target],p=n||o;if(p){if(e.thisIsSrc||e.thisIsTgt){if(e.thisIsSrc&&!n)continue;if(e.thisIsTgt&&!o)continue}c.push(l)}}return this.spawn(c,{unique:!0})}}function f(a){var b={codirected:!1};return a=g.extend({},b,a),function(b){for(var c=[],d=this.edges(),e=a,f=0;f<d.length;f++)for(var g=d[f],h=g._private,i=h.source,j=i._private.data.id,k=h.data.target,l=i._private.edges,m=0;m<l.length;m++){var n=l[m],o=n._private.data,p=o.target,q=o.source,r=p===k&&q===j,s=j===p&&k===q;(e.codirected&&r||!e.codirected&&(r||s))&&c.push(n)}return this.spawn(c,{unique:!0}).filter(b)}}var g=a("../util"),h=a("../is"),i={},j=function(a,b){return function(c,d,e,f){var g,i=c,j=this;if(null==i?g="null":h.elementOrCollection(i)&&1===i.length&&(g="#"+i.id()),1===j.length&&g){var k=j[0]._private,l=k.traversalCache=k.traversalCache||{},m=l[b]=l[b]||{},n=m[g];return n?n:m[g]=a.call(j,c,d,e,f)}return a.call(j,c,d,e,f)}},k=function(a){return function(b){for(var c=this,d=[],e=0;e<c.length;e++){var f=c[e];if(f.isNode()){for(var g=!1,h=f.connectedEdges(),i=0;i<h.length;i++){var j=h[i],k=j.source(),l=j.target();if(a.noIncomingEdges&&l===f&&k!==f||a.noOutgoingEdges&&k===f&&l!==f){g=!0;break}}g||d.push(f)}}return this.spawn(d,{unique:!0}).filter(b)}},l=function(a){return function(b){for(var c=this,d=[],e=0;e<c.length;e++){var f=c[e];if(f.isNode())for(var g=f.connectedEdges(),h=0;h<g.length;h++){var i=g[h],j=i.source(),k=i.target();a.outgoing&&j===f?(d.push(i),d.push(k)):a.incoming&&k===f&&(d.push(i),d.push(j))}}return this.spawn(d,{unique:!0}).filter(b)}},m=function(a){return function(b){for(var c=this,d=[],e={};;){var f=a.outgoing?c.outgoers():c.incomers();if(0===f.length)break;for(var g=!1,h=0;h<f.length;h++){var i=f[h],j=i.id();e[j]||(e[j]=!0,d.push(i),g=!0)}if(!g)break;c=f}return this.spawn(d,{unique:!0}).filter(b)}};g.extend(i,{roots:k({noIncomingEdges:!0}),leaves:k({noOutgoingEdges:!0}),outgoers:j(l({outgoing:!0}),"outgoers"),successors:m({outgoing:!0}),incomers:j(l({incoming:!0}),"incomers"),predecessors:m({incoming:!0})}),g.extend(i,{neighborhood:j(function(a){for(var b=[],c=this.nodes(),d=0;d<c.length;d++)for(var e=c[d],f=e.connectedEdges(),g=0;g<f.length;g++){var h=f[g],i=h.source(),j=h.target(),k=e===i?j:i;k.length>0&&b.push(k[0]),b.push(h[0])}return this.spawn(b,{unique:!0}).filter(a)},"neighborhood"),closedNeighborhood:function(a){return this.neighborhood().add(this).filter(a)},openNeighborhood:function(a){return this.neighborhood(a)}}),i.neighbourhood=i.neighborhood,i.closedNeighbourhood=i.closedNeighborhood,i.openNeighbourhood=i.openNeighborhood,g.extend(i,{source:j(function(a){var b,c=this[0];return c&&(b=c._private.source||c.cy().collection()),b&&a?b.filter(a):b},"source"),target:j(function(a){var b,c=this[0];return c&&(b=c._private.target||c.cy().collection()),b&&a?b.filter(a):b},"target"),sources:d({attr:"source"}),targets:d({attr:"target"})}),g.extend(i,{edgesWith:j(e(),"edgesWith",!0),edgesTo:j(e({thisIsSrc:!0}),"edgesTo",!0)}),g.extend(i,{connectedEdges:j(function(a){for(var b=[],c=this,d=0;d<c.length;d++){var e=c[d];if(e.isNode())for(var f=e._private.edges,g=0;g<f.length;g++){var h=f[g];b.push(h)}}return this.spawn(b,{unique:!0}).filter(a)},"connectedEdges"),connectedNodes:j(function(a){for(var b=[],c=this,d=0;d<c.length;d++){var e=c[d];e.isEdge()&&(b.push(e.source()[0]),b.push(e.target()[0]))}return this.spawn(b,{unique:!0}).filter(a)},"connectedNodes"),parallelEdges:j(f(),"parallelEdges"),codirectedEdges:j(f({codirected:!0}),"codirectedEdges")}),g.extend(i,{components:function(){var a=this,b=a.cy(),c=a.spawn(),d=a.nodes().spawnSelf(),e=[],f=function(a,b){c.merge(a),d.unmerge(a),b.merge(a)};if(d.empty())return a.spawn();do{var g=b.collection();e.push(g);var h=d[0];f(h,g),a.bfs({directed:!1,roots:h,visit:function(a,b,c,d,e){f(c,g)}})}while(d.length>0);return e.map(function(a){var b=a.connectedEdges().stdFilter(function(b){return a.anySame(b.source())&&a.anySame(b.target())});return a.union(b)})}}),b.exports=i},{"../is":83,"../util":100}],32:[function(a,b,c){"use strict";var d=function(a,b){var c=a.cy(),d=a.pstyle("z-index").value-b.pstyle("z-index").value,e=0,f=0,g=c.hasCompoundNodes(),h=a.isNode(),i=!h,j=b.isNode(),k=!j;g&&(e=a.zDepth(),f=b.zDepth());var l=e-f,m=0===l;return m?h&&k?1:i&&j?-1:0===d?a.poolIndex()-b.poolIndex():d:l};b.exports=d},{}],33:[function(a,b,c){"use strict";var d=a("../is"),e=a("../util"),f=a("../collection"),g=a("../collection/element"),h={add:function(a){var b,c=this;if(d.elementOrCollection(a)){var h=a;if(h._private.cy===c)b=h.restore();else{for(var i=[],j=0;j<h.length;j++){var k=h[j];i.push(k.json())}b=new f(c,i)}}else if(d.array(a)){var i=a;b=new f(c,i)}else if(d.plainObject(a)&&(d.array(a.nodes)||d.array(a.edges))){for(var l=a,i=[],m=["nodes","edges"],j=0,n=m.length;j<n;j++){var o=m[j],p=l[o];if(d.array(p))for(var q=0,r=p.length;q<r;q++){var s=e.extend({group:o},p[q]);i.push(s)}}b=new f(c,i)}else{var s=a;b=new g(c,s).collection()}return b},remove:function(a){if(d.elementOrCollection(a));else if(d.string(a)){var b=a;a=this.$(b)}return a.remove()},load:function(a,b,c){var f=this;f.notifications(!1);var g=f.mutableElements();g.length>0&&g.remove(),null!=a&&(d.plainObject(a)||d.array(a))&&f.add(a),f.one("layoutready",function(a){f.notifications(!0),f.trigger(a),f.notify({type:"load",eles:f.mutableElements()}),f.one("load",b),f.trigger("load")}).one("layoutstop",function(){f.one("done",c),f.trigger("done")});var h=e.extend({},f._private.options.layout);return h.eles=f.elements(),f.layout(h),this}};b.exports=h},{"../collection":26,"../collection/element":22,"../is":83,"../util":100}],34:[function(a,b,c){"use strict";var d=a("../define"),e=a("../util"),f=a("../is"),g={animate:d.animate(),animation:d.animation(),animated:d.animated(),clearQueue:d.clearQueue(),delay:d.delay(),delayAnimation:d.delayAnimation(),stop:d.stop(),addToAnimationPool:function(a){var b=this;b.styleEnabled()&&b._private.aniEles.merge(a)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){function a(){k._private.animationsRunning&&e.requestAnimationFrame(function(c){b(c),a()})}function b(a){function b(b,e){var h=b._private,i=h.animation.current,j=h.animation.queue,k=!1;if(0===i.length){var l=j.shift();l&&i.push(l)}for(var m=function(a){for(var b=a.length-1;b>=0;b--){var c=a[b];c()}a.splice(0,a.length)},n=i.length-1;n>=0;n--){var o=i[n],p=o._private;p.stopped?(i.splice(n,1),p.hooked=!1,p.playing=!1,p.started=!1,m(p.frames)):(p.playing||p.applying)&&(p.playing&&p.applying&&(p.applying=!1),p.started||c(b,o,a),d(b,o,a,e),f.fn(p.step)&&p.step.call(b,a),p.applying&&(p.applying=!1),m(p.frames),o.completed()&&(i.splice(n,1),p.hooked=!1,p.playing=!1,p.started=!1,m(p.completes)),k=!0)}return e||0!==i.length||0!==j.length||g.push(b),k}for(var e=k._private.aniEles,g=[],h=!1,i=0;i<e.length;i++){var j=e[i],l=b(j);h=h||l}var m=b(k,!0);if(h||m)if(e.length>0){var n=e.updateCompoundBounds().spawnSelf().merge(e);k.notify({type:"draw",eles:n})}else k.notify({type:"draw"});e.unmerge(g),k.trigger("step")}function c(a,b,c){var d=f.core(a),e=!d,g=a,h=b._private;if(e){var i=g._private.position;h.startPosition=h.startPosition||{x:i.x,y:i.y},h.startStyle=h.startStyle||l.getAnimationStartStyle(g,h.style)}if(d){var j=k._private.pan;h.startPan=h.startPan||{x:j.x,y:j.y},h.startZoom=null!=h.startZoom?h.startZoom:k._private.zoom}h.started=!0,h.startTime=c-h.progress*h.duration}function d(a,b,c,d){
var e=!d,h=a._private,i=b._private,k=i.easing,m=i.startTime;if(!i.easingImpl)if(null==k)i.easingImpl=p.linear;else{var n;if(f.string(k)){var o=l.parse("transition-timing-function",k);n=o.value}else n=k;var q,r;f.string(n)?(q=n,r=[]):(q=n[1],r=n.slice(2).map(function(a){return+a})),r.length>0?("spring"===q&&r.push(i.duration),i.easingImpl=p[q].apply(null,r)):i.easingImpl=p[q]}var s,t=i.easingImpl;if(s=0===i.duration?1:(c-m)/i.duration,i.applying&&(s=i.progress),s<0?s=0:s>1&&(s=1),null==i.delay){var u=i.startPosition,v=i.position,w=h.position;v&&e&&(g(u.x,v.x)&&(w.x=j(u.x,v.x,s,t)),g(u.y,v.y)&&(w.y=j(u.y,v.y,s,t)),a.trigger("position"));var x=i.startPan,y=i.pan,z=h.pan,A=null!=y&&d;A&&(g(x.x,y.x)&&(z.x=j(x.x,y.x,s,t)),g(x.y,y.y)&&(z.y=j(x.y,y.y,s,t)),a.trigger("pan"));var B=i.startZoom,C=i.zoom,D=null!=C&&d;D&&(g(B,C)&&(h.zoom=j(B,C,s,t)),a.trigger("zoom")),(A||D)&&a.trigger("viewport");var E=i.style;if(E&&E.length>0&&e){for(var F=0;F<E.length;F++){var G=E[F],q=G.name,H=G,I=i.startStyle[q],J=j(I,H,s,t);l.overrideBypass(a,q,J)}a.trigger("style")}}return i.progress=s,s}function g(a,b){return null!=a&&null!=b&&(!(!f.number(a)||!f.number(b))||!(!a||!b))}function h(a,b,c,d){function e(a,b){return 1-3*b+3*a}function f(a,b){return 3*b-6*a}function g(a){return 3*a}function h(a,b,c){return((e(b,c)*a+f(b,c))*a+g(b))*a}function i(a,b,c){return 3*e(b,c)*a*a+2*f(b,c)*a+g(b)}function j(b,d){for(var e=0;e<o;++e){var f=i(d,a,c);if(0===f)return d;var g=h(d,a,c)-b;d-=g/f}return d}function k(){for(var b=0;b<s;++b)w[b]=h(b*t,a,c)}function l(b,d,e){var f,g,i=0;do g=d+(e-d)/2,f=h(g,a,c)-b,f>0?e=g:d=g;while(Math.abs(f)>q&&++i<r);return g}function m(b){for(var d=0,e=1,f=s-1;e!==f&&w[e]<=b;++e)d+=t;--e;var g=(b-w[e])/(w[e+1]-w[e]),h=d+g*t,k=i(h,a,c);return k>=p?j(b,h):0===k?h:l(b,d,d+t)}function n(){x=!0,a===b&&c===d||k()}var o=4,p=.001,q=1e-7,r=10,s=11,t=1/(s-1),u="undefined"!=typeof Float32Array;if(4!==arguments.length)return!1;for(var v=0;v<4;++v)if("number"!=typeof arguments[v]||isNaN(arguments[v])||!isFinite(arguments[v]))return!1;a=Math.min(a,1),c=Math.min(c,1),a=Math.max(a,0),c=Math.max(c,0);var w=u?new Float32Array(s):new Array(s),x=!1,y=function(e){return x||n(),a===b&&c===d?e:0===e?0:1===e?1:h(m(e),b,d)};y.getControlPoints=function(){return[{x:a,y:b},{x:c,y:d}]};var z="generateBezier("+[a,b,c,d]+")";return y.toString=function(){return z},y}function i(a,b,c,d,e){var f=e(b,c,d);return null==a?f:((a.roundValue||a.color)&&(f=Math.round(f)),void 0!==a.min&&(f=Math.max(f,a.min)),void 0!==a.max&&(f=Math.min(f,a.max)),f)}function j(a,b,c,d){var e=null!=a.name?l.properties[a.name]:null,g=null!=e?e.type:null;c<0?c=0:c>1&&(c=1);var h,j;if(h=null!=a.pfValue||null!=a.value?null!=a.pfValue?a.pfValue:a.value:a,j=null!=b.pfValue||null!=b.value?null!=b.pfValue?b.pfValue:b.value:b,f.number(h)&&f.number(j))return i(g,h,j,c,d);if(f.array(h)&&f.array(j)){for(var k=[],m=0;m<j.length;m++){var n=h[m],o=j[m];if(null!=n&&null!=o){var p=i(g,n,o,c,d);k.push(p)}else k.push(o)}return k}}var k=this;if(k._private.animationsRunning=!0,k.styleEnabled()){var l=k.style(),m=k.renderer();m&&m.beforeRender?m.beforeRender(function(a,c){b(c)},m.beforeRenderPriorities.animations):a();var n=function(){function a(a){return-a.tension*a.x-a.friction*a.v}function b(b,c,d){var e={x:b.x+d.dx*c,v:b.v+d.dv*c,tension:b.tension,friction:b.friction};return{dx:e.v,dv:a(e)}}function c(c,d){var e={dx:c.v,dv:a(c)},f=b(c,.5*d,e),g=b(c,.5*d,f),h=b(c,d,g),i=1/6*(e.dx+2*(f.dx+g.dx)+h.dx),j=1/6*(e.dv+2*(f.dv+g.dv)+h.dv);return c.x=c.x+i*d,c.v=c.v+j*d,c}return function d(a,b,e){var f,g,h,i={x:-1,v:0,tension:null,friction:null},j=[0],k=0,l=1e-4,m=.016;for(a=parseFloat(a)||500,b=parseFloat(b)||20,e=e||null,i.tension=a,i.friction=b,f=null!==e,f?(k=d(a,b),g=k/e*m):g=m;;)if(h=c(h||i,g),j.push(1+h.x),k+=16,!(Math.abs(h.x)>l&&Math.abs(h.v)>l))break;return f?function(a){return j[a*(j.length-1)|0]}:k}}(),o=function(a,b,c,d){var e=h(a,b,c,d);return function(a,b,c){return a+(b-a)*e(c)}},p={linear:function(a,b,c){return a+(b-a)*c},ease:o(.25,.1,.25,1),"ease-in":o(.42,0,1,1),"ease-out":o(0,0,.58,1),"ease-in-out":o(.42,0,.58,1),"ease-in-sine":o(.47,0,.745,.715),"ease-out-sine":o(.39,.575,.565,1),"ease-in-out-sine":o(.445,.05,.55,.95),"ease-in-quad":o(.55,.085,.68,.53),"ease-out-quad":o(.25,.46,.45,.94),"ease-in-out-quad":o(.455,.03,.515,.955),"ease-in-cubic":o(.55,.055,.675,.19),"ease-out-cubic":o(.215,.61,.355,1),"ease-in-out-cubic":o(.645,.045,.355,1),"ease-in-quart":o(.895,.03,.685,.22),"ease-out-quart":o(.165,.84,.44,1),"ease-in-out-quart":o(.77,0,.175,1),"ease-in-quint":o(.755,.05,.855,.06),"ease-out-quint":o(.23,1,.32,1),"ease-in-out-quint":o(.86,0,.07,1),"ease-in-expo":o(.95,.05,.795,.035),"ease-out-expo":o(.19,1,.22,1),"ease-in-out-expo":o(1,0,0,1),"ease-in-circ":o(.6,.04,.98,.335),"ease-out-circ":o(.075,.82,.165,1),"ease-in-out-circ":o(.785,.135,.15,.86),spring:function(a,b,c){if(0===c)return p.linear;var d=n(a,b,c);return function(a,b,c){return a+(b-a)*d(c)}},"cubic-bezier":o}}}};b.exports=g},{"../define":44,"../is":83,"../util":100}],35:[function(a,b,c){"use strict";var d=a("../define"),e={on:d.on(),one:d.on({unbindSelfOnTrigger:!0}),once:d.on({unbindAllBindersOnTrigger:!0}),off:d.off(),trigger:d.trigger()};d.eventAliasesOn(e),b.exports=e},{"../define":44}],36:[function(a,b,c){"use strict";var d={png:function(a){var b=this._private.renderer;return a=a||{},b.png(a)},jpg:function(a){var b=this._private.renderer;return a=a||{},a.bg=a.bg||"#fff",b.jpg(a)}};d.jpeg=d.jpg,b.exports=d},{}],37:[function(a,b,c){"use strict";var d=a("../window"),e=a("../util"),f=a("../collection"),g=a("../is"),h=a("../promise"),i=a("../define"),j=function(a){var b=this;a=e.extend({},a);var c=a.container;c&&!g.htmlElement(c)&&g.htmlElement(c[0])&&(c=c[0]);var i=c?c._cyreg:null;i=i||{},i&&i.cy&&(i.cy.destroy(),i={});var j=i.readies=i.readies||[];c&&(c._cyreg=i),i.cy=b;var k=void 0!==d&&void 0!==c&&!a.headless,l=a;l.layout=e.extend({name:k?"grid":"null"},l.layout),l.renderer=e.extend({name:k?"canvas":"null"},l.renderer);var m=function(a,b,c){return void 0!==b?b:void 0!==c?c:a},n=this._private={container:c,ready:!1,initrender:!1,options:l,elements:new f(this),listeners:[],aniEles:new f(this),scratch:{},layout:null,renderer:null,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:m(!0,l.zoomingEnabled),userZoomingEnabled:m(!0,l.userZoomingEnabled),panningEnabled:m(!0,l.panningEnabled),userPanningEnabled:m(!0,l.userPanningEnabled),boxSelectionEnabled:m(!0,l.boxSelectionEnabled),autolock:m(!1,l.autolock,l.autolockNodes),autoungrabify:m(!1,l.autoungrabify,l.autoungrabifyNodes),autounselectify:m(!1,l.autounselectify),styleEnabled:void 0===l.styleEnabled?k:l.styleEnabled,zoom:g.number(l.zoom)?l.zoom:1,pan:{x:g.plainObject(l.pan)&&g.number(l.pan.x)?l.pan.x:0,y:g.plainObject(l.pan)&&g.number(l.pan.y)?l.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1},o=l.selectionType;void 0===o||"additive"!==o&&"single"!==o?n.selectionType="single":n.selectionType=o,g.number(l.minZoom)&&g.number(l.maxZoom)&&l.minZoom<l.maxZoom?(n.minZoom=l.minZoom,n.maxZoom=l.maxZoom):g.number(l.minZoom)&&void 0===l.maxZoom?n.minZoom=l.minZoom:g.number(l.maxZoom)&&void 0===l.minZoom&&(n.maxZoom=l.maxZoom);var p=function(a,b){var c=a.some(g.promise);return c?h.all(a).then(b):void b(a)};b.initRenderer(e.extend({hideEdgesOnViewport:l.hideEdgesOnViewport,textureOnViewport:l.textureOnViewport,wheelSensitivity:g.number(l.wheelSensitivity)&&l.wheelSensitivity>0?l.wheelSensitivity:1,motionBlur:void 0!==l.motionBlur&&l.motionBlur,motionBlurOpacity:void 0===l.motionBlurOpacity?.05:l.motionBlurOpacity,pixelRatio:g.number(l.pixelRatio)&&l.pixelRatio>0?l.pixelRatio:void 0,desktopTapThreshold:void 0===l.desktopTapThreshold?4:l.desktopTapThreshold,touchTapThreshold:void 0===l.touchTapThreshold?8:l.touchTapThreshold},l.renderer)),p([l.style,l.elements],function(a){var c=a[0],d=a[1];n.styleEnabled&&b.setStyle(c),l.initrender&&(b.on("initrender",l.initrender),b.on("initrender",function(){n.initrender=!0})),b.load(d,function(){b.startAnimationLoop(),n.ready=!0,g.fn(l.ready)&&b.on("ready",l.ready);for(var a=0;a<j.length;a++){var c=j[a];b.on("ready",c)}i&&(i.readies=[]),b.trigger("ready")},l.done)})},k=j.prototype;e.extend(k,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},ready:function(a){return this.isReady()?this.trigger("ready",[],a):this.on("ready",a),this},initrender:function(){return this._private.initrender},destroy:function(){var a=this;return a.stopAnimationLoop(),a.destroyRenderer(),a},hasElementWithId:function(a){return this._private.elements.hasElementWithId(a)},getElementById:function(a){return this._private.elements.getElementById(a)},selectionType:function(){return this._private.selectionType},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return"null"===this._private.options.renderer.name},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(a){return this._private.elements.merge(a),this},removeFromPool:function(a){return this._private.elements.unmerge(a),this},container:function(){return this._private.container},options:function(){return e.copy(this._private.options)},json:function(a){var b=this,c=b._private,d=b.mutableElements();if(g.plainObject(a)){if(b.startBatch(),a.elements){var f={},h=function(a,c){for(var d=0;d<a.length;d++){var g=a[d],h=g.data.id,i=b.getElementById(h);f[h]=!0,0!==i.length?i.json(g):c?b.add(e.extend({group:c},g)):b.add(g)}};if(g.array(a.elements))h(a.elements);else for(var i=["nodes","edges"],j=0;j<i.length;j++){var k=i[j],l=a.elements[k];g.array(l)&&h(l,k)}d.stdFilter(function(a){return!f[a.id()]}).remove()}a.style&&b.style(a.style),null!=a.zoom&&a.zoom!==c.zoom&&b.zoom(a.zoom),a.pan&&(a.pan.x===c.pan.x&&a.pan.y===c.pan.y||b.pan(a.pan));for(var m=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify"],j=0;j<m.length;j++){var n=m[j];null!=a[n]&&b[n](a[n])}return b.endBatch(),this}if(void 0===a){var o={};return o.elements={},d.forEach(function(a){var b=a.group();o.elements[b]||(o.elements[b]=[]),o.elements[b].push(a.json())}),this._private.styleEnabled&&(o.style=b.style().json()),o.zoomingEnabled=b._private.zoomingEnabled,o.userZoomingEnabled=b._private.userZoomingEnabled,o.zoom=b._private.zoom,o.minZoom=b._private.minZoom,o.maxZoom=b._private.maxZoom,o.panningEnabled=b._private.panningEnabled,o.userPanningEnabled=b._private.userPanningEnabled,o.pan=e.copy(b._private.pan),o.boxSelectionEnabled=b._private.boxSelectionEnabled,o.renderer=e.copy(b._private.options.renderer),o.hideEdgesOnViewport=b._private.options.hideEdgesOnViewport,o.textureOnViewport=b._private.options.textureOnViewport,o.wheelSensitivity=b._private.options.wheelSensitivity,o.motionBlur=b._private.options.motionBlur,o}},scratch:i.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0}),removeScratch:i.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0})}),[a("./add-remove"),a("./animation"),a("./events"),a("./export"),a("./layout"),a("./notification"),a("./renderer"),a("./search"),a("./style"),a("./viewport")].forEach(function(a){e.extend(k,a)}),b.exports=j},{"../collection":26,"../define":44,"../is":83,"../promise":86,"../util":100,"../window":107,"./add-remove":33,"./animation":34,"./events":35,"./export":36,"./layout":38,"./notification":39,"./renderer":40,"./search":41,"./style":42,"./viewport":43}],38:[function(a,b,c){"use strict";var d=a("../util"),e=a("../is"),f={layout:function(a){var b=this._private.prevLayout=null==a?this._private.prevLayout:this.makeLayout(a);return b.run(),this},makeLayout:function(a){var b=this;if(null==a)return void d.error("Layout options must be specified to make a layout");if(null==a.name)return void d.error("A `name` must be specified to make a layout");var c=a.name,f=b.extension("layout",c);if(null==f)return void d.error("Can not apply layout: No such layout `"+c+"` found; did you include its JS file?");var g;g=e.string(a.eles)?b.$(a.eles):null!=a.eles?a.eles:b.$();var h=new f(d.extend({},a,{cy:b,eles:g}));return h}};f.createLayout=f.makeLayout,b.exports=f},{"../is":83,"../util":100}],39:[function(a,b,c){"use strict";var d={notify:function(a){var b=this._private;if(b.batchingNotify){var c=b.batchNotifyEles,d=b.batchNotifyTypes;return a.eles&&c.merge(a.eles),void(d.ids[a.type]||(d.push(a.type),d.ids[a.type]=!0))}if(b.notificationsEnabled){var e=this.renderer();e&&e.notify(a)}},notifications:function(a){var b=this._private;return void 0===a?b.notificationsEnabled:void(b.notificationsEnabled=!!a)},noNotifications:function(a){this.notifications(!1),a(),this.notifications(!0)},startBatch:function(){var a=this._private;return null==a.batchCount&&(a.batchCount=0),0===a.batchCount&&(a.batchingStyle=a.batchingNotify=!0,a.batchStyleEles=this.collection(),a.batchNotifyEles=this.collection(),a.batchNotifyTypes=[],a.batchNotifyTypes.ids={}),a.batchCount++,this},endBatch:function(){var a=this._private;return a.batchCount--,0===a.batchCount&&(a.batchingStyle=!1,a.batchStyleEles.updateStyle(),a.batchingNotify=!1,this.notify({type:a.batchNotifyTypes,eles:a.batchNotifyEles})),this},batch:function(a){return this.startBatch(),a(),this.endBatch(),this},batchData:function(a){var b=this;return this.batch(function(){for(var c=Object.keys(a),d=0;d<c.length;d++){var e=c[d],f=a[e],g=b.getElementById(e);g.data(f)}})}};b.exports=d},{}],40:[function(a,b,c){"use strict";var d=a("../util"),e={renderTo:function(a,b,c,d){var e=this._private.renderer;return e.renderTo(a,b,c,d),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify({type:"draw"}),this},resize:function(){return this.invalidateSize(),this.notify({type:"resize"}),this.trigger("resize"),this},initRenderer:function(a){var b=this,c=b.extension("renderer",a.name);if(null==c)return void d.error("Can not initialise: No such renderer `%s` found; did you include its JS file?",a.name);var e=d.extend({},a,{cy:b});b._private.renderer=new c(e)},destroyRenderer:function(){var a=this;a.notify({type:"destroy"});var b=a.container();if(b)for(b._cyreg=null;b.childNodes.length>0;)b.removeChild(b.childNodes[0]);a._private.renderer=null},onRender:function(a){return this.on("render",a)},offRender:function(a){return this.off("render",a)}};e.invalidateDimensions=e.resize,b.exports=e},{"../util":100}],41:[function(a,b,c){"use strict";var d=a("../is"),e=a("../collection"),f={collection:function(a,b){return d.string(a)?this.$(a):d.elementOrCollection(a)?a.collection():d.array(a)?new e(this,a,b):new e(this)},nodes:function(a){var b=this.$(function(){return this.isNode()});return a?b.filter(a):b},edges:function(a){var b=this.$(function(){return this.isEdge()});return a?b.filter(a):b},$:function(a){var b=this._private.elements;return a?b.filter(a):b.spawnSelf()},mutableElements:function(){return this._private.elements}};f.elements=f.filter=f.$,b.exports=f},{"../collection":26,"../is":83}],42:[function(a,b,c){"use strict";var d=a("../is"),e=a("../style"),f={style:function(a){if(a){var b=this.setStyle(a);b.update()}return this._private.style},setStyle:function(a){var b=this._private;return d.stylesheet(a)?b.style=a.generateStyle(this):d.array(a)?b.style=e.fromJson(this,a):d.string(a)?b.style=e.fromString(this,a):b.style=e(this),b.style}};b.exports=f},{"../is":83,"../style":92}],43:[function(a,b,c){"use strict";var d=a("../is"),e=a("../window"),f={autolock:function(a){return void 0===a?this._private.autolock:(this._private.autolock=!!a,this)},autoungrabify:function(a){return void 0===a?this._private.autoungrabify:(this._private.autoungrabify=!!a,this)},autounselectify:function(a){return void 0===a?this._private.autounselectify:(this._private.autounselectify=!!a,this)},panningEnabled:function(a){return void 0===a?this._private.panningEnabled:(this._private.panningEnabled=!!a,this)},userPanningEnabled:function(a){return void 0===a?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!a,this)},zoomingEnabled:function(a){return void 0===a?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!a,this)},userZoomingEnabled:function(a){return void 0===a?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!a,this)},boxSelectionEnabled:function(a){return void 0===a?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!a,this)},pan:function(){var a,b,c,e,f,g=arguments,h=this._private.pan;switch(g.length){case 0:return h;case 1:if(d.string(g[0]))return a=g[0],h[a];if(d.plainObject(g[0])){if(!this._private.panningEnabled)return this;c=g[0],e=c.x,f=c.y,d.number(e)&&(h.x=e),d.number(f)&&(h.y=f),this.trigger("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;a=g[0],b=g[1],"x"!==a&&"y"!==a||!d.number(b)||(h[a]=b),this.trigger("pan viewport")}return this.notify({type:"viewport"}),this},panBy:function(a){var b,c,e,f,g,h=arguments,i=this._private.pan;if(!this._private.panningEnabled)return this;switch(h.length){case 1:d.plainObject(h[0])&&(e=h[0],f=e.x,g=e.y,d.number(f)&&(i.x+=f),d.number(g)&&(i.y+=g),this.trigger("pan viewport"));break;case 2:b=h[0],c=h[1],"x"!==b&&"y"!==b||!d.number(c)||(i[b]+=c),this.trigger("pan viewport")}return this.notify({type:"viewport"}),this},fit:function(a,b){var c=this.getFitViewport(a,b);if(c){var d=this._private;d.zoom=c.zoom,d.pan=c.pan,this.trigger("pan zoom viewport"),this.notify({type:"viewport"})}return this},getFitViewport:function(a,b){if(d.number(a)&&void 0===b&&(b=a,a=void 0),this._private.panningEnabled&&this._private.zoomingEnabled){var c;if(d.string(a)){var e=a;a=this.$(e)}else if(d.boundingBox(a)){var f=a;c={x1:f.x1,y1:f.y1,x2:f.x2,y2:f.y2},c.w=c.x2-c.x1,c.h=c.y2-c.y1}else d.elementOrCollection(a)||(a=this.mutableElements());c=c||a.boundingBox();var g,h=this.width(),i=this.height();if(b=d.number(b)?b:0,!isNaN(h)&&!isNaN(i)&&h>0&&i>0&&!isNaN(c.w)&&!isNaN(c.h)&&c.w>0&&c.h>0){g=Math.min((h-2*b)/c.w,(i-2*b)/c.h),g=g>this._private.maxZoom?this._private.maxZoom:g,g=g<this._private.minZoom?this._private.minZoom:g;var j={x:(h-g*(c.x1+c.x2))/2,y:(i-g*(c.y1+c.y2))/2};return{zoom:g,pan:j}}}},minZoom:function(a){return void 0===a?this._private.minZoom:(d.number(a)&&(this._private.minZoom=a),this)},maxZoom:function(a){return void 0===a?this._private.maxZoom:(d.number(a)&&(this._private.maxZoom=a),this)},zoom:function(a){var b,c;if(void 0===a)return this._private.zoom;if(d.number(a))c=a;else if(d.plainObject(a)){if(c=a.level,a.position){var e=a.position,f=this._private.pan,g=this._private.zoom;b={x:e.x*g+f.x,y:e.y*g+f.y}}else a.renderedPosition&&(b=a.renderedPosition);if(b&&!this._private.panningEnabled)return this}if(!this._private.zoomingEnabled)return this;if(!d.number(c)||b&&(!d.number(b.x)||!d.number(b.y)))return this;if(c=c>this._private.maxZoom?this._private.maxZoom:c,c=c<this._private.minZoom?this._private.minZoom:c,b){var h=this._private.pan,i=this._private.zoom,j=c,k={x:-j/i*(b.x-h.x)+b.x,y:-j/i*(b.y-h.y)+b.y};this._private.zoom=c,this._private.pan=k;var l=h.x!==k.x||h.y!==k.y;this.trigger(" zoom "+(l?" pan ":"")+" viewport ")}else this._private.zoom=c,this.trigger("zoom viewport");return this.notify({type:"viewport"}),this},viewport:function(a){var b=this._private,c=!0,e=!0,f=[],g=!1,h=!1;if(!a)return this;if(d.number(a.zoom)||(c=!1),d.plainObject(a.pan)||(e=!1),!c&&!e)return this;if(c){var i=a.zoom;i<b.minZoom||i>b.maxZoom||!b.zoomingEnabled?g=!0:(b.zoom=i,f.push("zoom"))}if(e&&(!g||!a.cancelOnFailedZoom)&&b.panningEnabled){var j=a.pan;d.number(j.x)&&(b.pan.x=j.x,h=!1),d.number(j.y)&&(b.pan.y=j.y,h=!1),h||f.push("pan")}return f.length>0&&(f.push("viewport"),this.trigger(f.join(" ")),this.notify({type:"viewport"})),this},center:function(a){var b=this.getCenterPan(a);return b&&(this._private.pan=b,this.trigger("pan viewport"),this.notify({type:"viewport"})),this},getCenterPan:function(a,b){if(this._private.panningEnabled){if(d.string(a)){var c=a;a=this.mutableElements().filter(c)}else d.elementOrCollection(a)||(a=this.mutableElements());var e=a.boundingBox(),f=this.width(),g=this.height();b=void 0===b?this._private.zoom:b;var h={x:(f-b*(e.x1+e.x2))/2,y:(g-b*(e.y1+e.y2))/2};return h}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},invalidateSize:function(){this._private.sizeCache=null},size:function(){var a=this._private,b=a.container;return a.sizeCache=a.sizeCache||(b?function(){var a=b.getBoundingClientRect(),c=e.getComputedStyle(b),d=function(a){return parseFloat(c.getPropertyValue(a))};return{width:a.width-d("padding-left")-d("padding-right")-d("border-left-width")-d("border-right-width"),height:a.height-d("padding-top")-d("padding-bottom")-d("border-top-width")-d("border-bottom-width")}}():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var a=this._private.pan,b=this._private.zoom,c=this.renderedExtent(),d={x1:(c.x1-a.x)/b,x2:(c.x2-a.x)/b,y1:(c.y1-a.y)/b,y2:(c.y2-a.y)/b};return d.w=d.x2-d.x1,d.h=d.y2-d.y1,d},renderedExtent:function(){var a=this.width(),b=this.height();return{x1:0,y1:0,x2:a,y2:b,w:a,h:b}}};f.centre=f.center,f.autolockNodes=f.autolock,f.autoungrabifyNodes=f.autoungrabify,b.exports=f},{"../is":83,"../window":107}],44:[function(a,b,c){"use strict";var d=a("./util"),e=a("./is"),f=a("./selector"),g=a("./promise"),h=a("./event"),i=a("./animation"),j={data:function(a){var b={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,onSet:function(a){},canSet:function(a){return!0}};return a=d.extend({},b,a),function(b,c){var d=a,f=this,g=void 0!==f.length,h=g?f:[f],i=g?f[0]:f;if(e.string(b)){if(d.allowGetting&&void 0===c){var j;return i&&(j=i._private[d.field][b]),j}if(d.allowSetting&&void 0!==c){var k=!d.immutableKeys[b];if(k){for(var l=0,m=h.length;l<m;l++)d.canSet(h[l])&&(h[l]._private[d.field][b]=c);d.updateStyle&&f.updateStyle(),d.onSet(f),d.settingTriggersEvent&&f[d.triggerFnName](d.settingEvent)}}}else if(d.allowSetting&&e.plainObject(b)){for(var n,o,p=b,q=Object.keys(p),l=0;l<q.length;l++){n=q[l],o=p[n];var k=!d.immutableKeys[n];if(k)for(var r=0;r<h.length;r++){var s=h[r];d.canSet(s)&&(s._private[d.field][n]=o)}}d.updateStyle&&f.updateStyle(),d.onSet(f),d.settingTriggersEvent&&f[d.triggerFnName](d.settingEvent)}else if(d.allowBinding&&e.fn(b)){var t=b;f.on(d.bindingEvent,t)}else if(d.allowGetting&&void 0===b){var j;return i&&(j=i._private[d.field]),j}return f}},removeData:function(a){var b={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return a=d.extend({},b,a),function(b){var c=a,d=this,f=void 0!==d.length,g=f?d:[d];if(e.string(b)){for(var h=b.split(/\s+/),i=h.length,j=0;j<i;j++){var k=h[j];if(!e.emptyString(k)){var l=!c.immutableKeys[k];if(l)for(var m=0,n=g.length;m<n;m++)g[m]._private[c.field][k]=void 0}}c.triggerEvent&&d[c.triggerFnName](c.event)}else if(void 0===b){for(var m=0,n=g.length;m<n;m++)for(var o=g[m]._private[c.field],h=Object.keys(o),j=0;j<h.length;j++){var k=h[j],p=!c.immutableKeys[k];p&&(o[k]=void 0)}c.triggerEvent&&d[c.triggerFnName](c.event)}return d}},event:{regex:/(\w+)(\.(?:\w+|\*))?/,universalNamespace:".*",optionalTypeRegex:/(\w+)?(\.(?:\w+|\*))?/,falseCallback:function(){return!1}},on:function(a){var b={unbindSelfOnTrigger:!1,unbindAllBindersOnTrigger:!1};return a=d.extend({},b,a),function(b,c,d,g){var h=this,i=void 0!==h.length,k=i?h:[h],l=e.string(b),m=a;if(e.plainObject(c)?(g=d,d=c,c=void 0):(e.fn(c)||c===!1)&&(g=c,d=void 0,c=void 0),(e.fn(d)||d===!1)&&(g=d,d=void 0),!e.fn(g)&&g!==!1&&l)return h;if(l){var n={};n[b]=g,b=n}for(var o=Object.keys(b),p=0;p<o.length;p++){var q=o[p];if(g=b[q],g===!1&&(g=j.event.falseCallback),e.fn(g)){q=q.split(/\s+/);for(var r=0;r<q.length;r++){var s=q[r];if(!e.emptyString(s)){var t=s.match(j.event.regex);if(t)for(var u=t[1],v=t[2]?t[2]:void 0,w={callback:g,data:d,delegated:!!c,selector:c,selObj:new f(c),type:u,namespace:v,unbindSelfOnTrigger:m.unbindSelfOnTrigger,unbindAllBindersOnTrigger:m.unbindAllBindersOnTrigger,binders:k},x=0;x<k.length;x++){var y=k[x]._private=k[x]._private||{};y.listeners=y.listeners||[],y.listeners.push(w)}}}}}return h}},eventAliasesOn:function(a){var b=a;b.addListener=b.listen=b.bind=b.on,b.removeListener=b.unlisten=b.unbind=b.off,b.emit=b.trigger,b.pon=b.promiseOn=function(a,b){var c=this,d=Array.prototype.slice.call(arguments,0);return new g(function(a,b){var e=function(b){c.off.apply(c,g),a(b)},f=d.concat([e]),g=f.concat([]);c.on.apply(c,f)})}},off:function(a){var b={};return a=d.extend({},b,a),function(a,b,c){var d=this,f=void 0!==d.length,g=f?d:[d],h=e.string(a);if(0===arguments.length){for(var i=0;i<g.length;i++)g[i]._private=g[i]._private||{},t.listeners=[];return d}if((e.fn(b)||b===!1)&&(c=b,b=void 0),h){var k={};k[a]=c,a=k}for(var l=Object.keys(a),m=0;m<l.length;m++){var n=l[m];c=a[n],c===!1&&(c=j.event.falseCallback),n=n.split(/\s+/);for(var o=0;o<n.length;o++){var p=n[o];if(!e.emptyString(p)){var q=p.match(j.event.optionalTypeRegex);if(q)for(var r=q[1]?q[1]:void 0,s=q[2]?q[2]:void 0,i=0;i<g.length;i++)for(var t=g[i]._private=g[i]._private||{},u=t.listeners=t.listeners||[],v=0;v<u.length;v++){var w=u[v],x=!s||s===w.namespace,y=!r||w.type===r,z=!c||c===w.callback,A=x&&y&&z;A&&(u.splice(v,1),v--)}}}}return d}},trigger:function(a){var b={};return a=d.extend({},b,a),function(b,c,d){var f=this,g=void 0!==f.length,i=g?f:[f],k=e.string(b),l=e.plainObject(b),m=e.event(b),n=this._private=this._private||{},o=n.cy||(e.core(this)?this:null),p=!!o&&o.hasCompoundNodes();if(k){var q=b.split(/\s+/);b=[];for(var r=0;r<q.length;r++){var s=q[r];if(!e.emptyString(s)){var t=s.match(j.event.regex),u=t[1],v=t[2]?t[2]:void 0;b.push({type:u,namespace:v})}}}else if(l){var w=b;b=[w]}c?e.array(c)||(c=[c]):c=[];for(var r=0;r<b.length;r++)for(var x=b[r],y=0;y<i.length;y++){var s,z=i[y],n=z._private=z._private||{},A=n.listeners=n.listeners||[],B=e.element(z),C=B||a.layout;if(m?(s=x,s.cyTarget=s.cyTarget||z,s.cy=s.cy||o):s=new h(x,{cyTarget:z,cy:o,namespace:x.namespace}),x.layout&&(s.layout=x.layout),a.layout&&(s.layout=z),s.cyPosition){var D=s.cyPosition,E=o.zoom(),F=o.pan();s.cyRenderedPosition={x:D.x*E+F.x,y:D.y*E+F.y}}d&&(A=[{namespace:s.namespace,type:s.type,callback:d}]);for(var G=0;G<A.length;G++){var H=A[G],I=!H.namespace||H.namespace===s.namespace||H.namespace===j.event.universalNamespace,J=H.type===s.type,K=!H.delegated||z!==s.cyTarget&&e.element(s.cyTarget)&&H.selObj.matches(s.cyTarget),L=I&&J&&K;if(L){var M=[s];if(M=M.concat(c),H.data?s.data=H.data:s.data=void 0,(H.unbindSelfOnTrigger||H.unbindAllBindersOnTrigger)&&(A.splice(G,1),G--),H.unbindAllBindersOnTrigger)for(var N=H.binders,O=0;O<N.length;O++){var P=N[O];if(P&&P!==z)for(var Q=P._private.listeners,R=0;R<Q.length;R++){var S=Q[R];S===H&&(Q.splice(R,1),R--)}}var T=H.delegated?s.cyTarget:z,U=H.callback.apply(T,M);(U===!1||s.isPropagationStopped())&&(C=!1,U===!1&&(s.stopPropagation(),s.preventDefault()))}}if(C){var V=p?z._private.parent:null,W=null!=V&&0!==V.length;W?(V=V[0],V.trigger(s)):o.trigger(s)}}return f}},animated:function(a){var b={};return a=d.extend({},b,a),function(){var a=this,b=void 0!==a.length,c=b?a:[a],d=this._private.cy||this;if(!d.styleEnabled())return!1;var e=c[0];return e?e._private.animation.current.length>0:void 0}},clearQueue:function(a){var b={};return a=d.extend({},b,a),function(){var a=this,b=void 0!==a.length,c=b?a:[a],d=this._private.cy||this;if(!d.styleEnabled())return this;for(var e=0;e<c.length;e++){var f=c[e];f._private.animation.queue=[]}return this}},delay:function(a){var b={};return a=d.extend({},b,a),function(a,b){var c=this._private.cy||this;return c.styleEnabled()?this.animate({delay:a,duration:a,complete:b}):this}},delayAnimation:function(a){var b={};return a=d.extend({},b,a),function(a,b){var c=this._private.cy||this;return c.styleEnabled()?this.animation({delay:a,duration:a,complete:b}):this}},animation:function(a){var b={};return a=d.extend({},b,a),function(a,b){var c=this,e=void 0!==c.length,f=e?c:[c],g=this._private.cy||this,h=!e,j=!h;if(!g.styleEnabled())return this;var k=g.style();a=d.extend({},a,b);var l=0===Object.keys(a).length;if(l)return new i(f[0],a);switch(void 0===a.duration&&(a.duration=400),a.duration){case"slow":a.duration=600;break;case"fast":a.duration=200}if(j&&(a.style=k.getPropsList(a.style||a.css),a.css=void 0),a.renderedPosition&&j){var m=a.renderedPosition,n=g.pan(),o=g.zoom();a.position={x:(m.x-n.x)/o,y:(m.y-n.y)/o}}if(a.panBy&&h){var p=a.panBy,q=g.pan();a.pan={x:q.x+p.x,y:q.y+p.y}}var r=a.center||a.centre;if(r&&h){var s=g.getCenterPan(r.eles,a.zoom);s&&(a.pan=s)}if(a.fit&&h){var t=a.fit,u=g.getFitViewport(t.eles||t.boundingBox,t.padding);u&&(a.pan=u.pan,a.zoom=u.zoom)}return new i(f[0],a)}},animate:function(a){var b={};return a=d.extend({},b,a),function(a,b){var c=this,e=void 0!==c.length,f=e?c:[c],g=this._private.cy||this;if(!g.styleEnabled())return this;b&&(a=d.extend({},a,b));for(var h=0;h<f.length;h++){var i=f[h],j=i.animated()&&(void 0===a.queue||a.queue),k=i.animation(a,j?{queue:!0}:void 0);k.play()}return this}},stop:function(a){var b={};return a=d.extend({},b,a),function(a,b){var c=this,d=void 0!==c.length,e=d?c:[c],f=this._private.cy||this;if(!f.styleEnabled())return this;for(var g=0;g<e.length;g++){for(var h=e[g],i=h._private,j=i.animation.current,k=0;k<j.length;k++){var l=j[k],m=l._private;b&&(m.duration=0)}a&&(i.animation.queue=[]),b||(i.animation.current=[])}return f.notify({eles:this,type:"draw"}),this}}};b.exports=j},{"./animation":2,"./event":45,"./is":83,"./promise":86,"./selector":87,"./util":100}],45:[function(a,b,c){"use strict";function d(){return!1}function e(){return!0}var f=function(a,b){return this instanceof f?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented?e:d):this.type=a,b&&(this.type=void 0!==b.type?b.type:this.type,this.cy=b.cy,this.cyTarget=b.cyTarget,this.cyPosition=b.cyPosition,this.cyRenderedPosition=b.cyRenderedPosition,this.namespace=b.namespace,this.layout=b.layout,this.data=b.data,this.message=b.message),void(this.timeStamp=a&&a.timeStamp||Date.now())):new f(a,b)};f.prototype={instanceString:function(){return"event"},preventDefault:function(){this.isDefaultPrevented=e;var a=this.originalEvent;a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){this.isPropagationStopped=e;var a=this.originalEvent;a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=e,this.stopPropagation()},isDefaultPrevented:d,isPropagationStopped:d,isImmediatePropagationStopped:d},b.exports=f},{}],46:[function(a,b,c){"use strict";function d(a,b,c){var d=c,f=function(c){h.error("Can not register `"+b+"` for `"+a+"` since `"+c+"` already exists in the prototype and can not be overridden")};if("core"===a){if(k.prototype[b])return f(b);k.prototype[b]=c}else if("collection"===a){if(j.prototype[b])return f(b);j.prototype[b]=c}else if("layout"===a){for(var g=function(a){this.options=a,c.call(this,a),m.plainObject(this._private)||(this._private={}),this._private.cy=a.cy,this._private.listeners=[]},l=g.prototype=Object.create(c.prototype),o=[],p=0;p<o.length;p++){var q=o[p];l[q]=l[q]||function(){return this}}l.start&&!l.run?l.run=function(){return this.start(),this}:!l.start&&l.run&&(l.start=function(){return this.run(),this});var r=c.prototype.stop;l.stop=function(){var a=this.options;if(a&&a.animate){var b=this.animations;if(b)for(var c=0;c<b.length;c++)b[c].stop()}return r?r.call(this):this.trigger("layoutstop"),this},l.destroy||(l.destroy=function(){return this}),l.on=i.on({layout:!0}),l.one=i.on({layout:!0,unbindSelfOnTrigger:!0}),l.once=i.on({layout:!0,
unbindAllBindersOnTrigger:!0}),l.off=i.off({layout:!0}),l.trigger=i.trigger({layout:!0}),i.eventAliasesOn(l),d=g}else if("renderer"===a&&"null"!==b&&"base"!==b){var s=e("renderer","base"),t=s.prototype,u=c,v=c.prototype,w=function(){s.apply(this,arguments),u.apply(this,arguments)},x=w.prototype;for(var y in t){var z=t[y],A=null!=v[y];if(A)return f(y);x[y]=z}for(var y in v)x[y]=v[y];t.clientFunctions.forEach(function(a){x[a]=x[a]||function(){h.error("Renderer does not implement `renderer."+a+"()` on its prototype")}}),d=w}return h.setMap({map:n,keys:[a,b],value:d})}function e(a,b){return h.getMap({map:n,keys:[a,b]})}function f(a,b,c,d,e){return h.setMap({map:o,keys:[a,b,c,d],value:e})}function g(a,b,c,d){return h.getMap({map:o,keys:[a,b,c,d]})}var h=a("./util"),i=a("./define"),j=a("./collection"),k=a("./core"),l=a("./extensions"),m=a("./is"),n={},o={},p=function(){return 2===arguments.length?e.apply(null,arguments):3===arguments.length?d.apply(null,arguments):4===arguments.length?g.apply(null,arguments):5===arguments.length?f.apply(null,arguments):void h.error("Invalid extension access syntax")};k.prototype.extension=p,l.forEach(function(a){a.extensions.forEach(function(b){d(a.type,b.name,b.impl)})}),b.exports=p},{"./collection":26,"./core":37,"./define":44,"./extensions":47,"./is":83,"./util":100}],47:[function(a,b,c){"use strict";b.exports=[{type:"layout",extensions:a("./layout")},{type:"renderer",extensions:a("./renderer")}]},{"./layout":53,"./renderer":78}],48:[function(a,b,c){"use strict";function d(a){this.options=e.extend({},h,a)}var e=a("../../util"),f=a("../../math"),g=a("../../is"),h={fit:!0,directed:!1,padding:30,circle:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,roots:void 0,maximalAdjustments:0,animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};d.prototype.run=function(){var a,b=this.options,c=b,d=b.cy,e=c.eles,h=e.nodes().not(":parent"),i=e,j=f.makeBoundingBox(c.boundingBox?c.boundingBox:{x1:0,y1:0,w:d.width(),h:d.height()});if(g.elementOrCollection(c.roots))a=c.roots;else if(g.array(c.roots)){for(var k=[],l=0;l<c.roots.length;l++){var m=c.roots[l],n=d.getElementById(m);k.push(n)}a=d.collection(k)}else if(g.string(c.roots))a=d.$(c.roots);else if(c.directed)a=h.roots();else{for(var o=[],p=h;p.length>0;){var q=d.collection();e.bfs({roots:p[0],visit:function(a,b,c,d,e){q=q.add(c)},directed:!1}),p=p.not(q),o.push(q)}a=d.collection();for(var l=0;l<o.length;l++){var r=o[l],s=r.maxDegree(!1),t=r.filter(function(){return this.degree(!1)===s});a=a.add(t)}}var u=[],v={},w={},x={},y={},z={};i.bfs({roots:a,directed:c.directed,visit:function(a,b,c,d,e){var f=this[0],g=f.id();if(u[b]||(u[b]=[]),u[b].push(f),v[g]=!0,w[g]=b,x[g]=e,y[g]=d,e){var h=e.id(),i=z[h]=z[h]||[];i.push(c)}}});for(var A=[],l=0;l<h.length;l++){var n=h[l];v[n.id()]||A.push(n)}for(var B=3*A.length,C=0;0!==A.length&&C<B;){for(var D=A.shift(),E=D.neighborhood().nodes(),F=!1,l=0;l<E.length;l++){var G=w[E[l].id()];if(void 0!==G){u[G].push(D),F=!0;break}}F||A.push(D),C++}for(;0!==A.length;){var D=A.shift(),F=!1;F||(0===u.length&&u.push([]),u[0].push(D))}var H=function(){for(var a=0;a<u.length;a++)for(var b=u[a],c=0;c<b.length;c++){var d=b[c];d._private.scratch.breadthfirst={depth:a,index:c}}};H();for(var I=function(a){for(var b,c=a.connectedEdges(function(){return this.data("target")===a.id()}),d=a._private.scratch.breadthfirst,e=0,f=0;f<c.length;f++){var g=c[f],h=g.source()[0],i=h._private.scratch.breadthfirst;d.depth<=i.depth&&e<i.depth&&(e=i.depth,b=h)}return b},J=0;J<c.maximalAdjustments;J++){for(var K=u.length,L=[],l=0;l<K;l++)for(var G=u[l],M=G.length,N=0;N<M;N++){var n=G[N],O=n._private.scratch.breadthfirst,P=I(n);P&&(O.intEle=P,L.push(n))}for(var l=0;l<L.length;l++){var n=L[l],O=n._private.scratch.breadthfirst,P=O.intEle,Q=P._private.scratch.breadthfirst;u[O.depth].splice(O.index,1);for(var R=Q.depth+1;R>u.length-1;)u.push([]);u[R].push(n),O.depth=R,O.index=u[R].length-1}H()}var S=0;if(c.avoidOverlap){for(var l=0;l<h.length;l++){var T=h[l],U=T.boundingBox(),V=U.w,W=U.h;S=Math.max(S,V,W)}S*=c.spacingFactor}for(var X={},Y=function(a){if(X[a.id()])return X[a.id()];for(var b=a._private.scratch.breadthfirst.depth,c=a.neighborhood().nodes().not(":parent").intersection(h),d=0,e=0,f=0;f<c.length;f++){var g=c[f],i=g._private.scratch.breadthfirst,j=i.index,k=i.depth,l=u[k].length;(b>k||0===b)&&(d+=j/l,e++)}return e=Math.max(1,e),d/=e,0===e&&(d=void 0),X[a.id()]=d,d},Z=function(a,b){var c=Y(a),d=Y(b);return c-d},$=0;$<3;$++){for(var l=0;l<u.length;l++)u[l]=u[l].sort(Z);H()}for(var _=0,l=0;l<u.length;l++)_=Math.max(u[l].length,_);for(var aa={x:j.x1+j.w/2,y:j.x1+j.h/2},ba=function(a,b){var d=a._private.scratch.breadthfirst,e=d.depth,f=d.index,g=u[e].length,h=Math.max(j.w/(g+1),S),i=Math.max(j.h/(u.length+1),S),k=Math.min(j.w/2/u.length,j.h/2/u.length);if(k=Math.max(k,S),c.circle){if(c.circle){var l=k*e+k-(u.length>0&&u[0].length<=3?k/2:0),m=2*Math.PI/u[e].length*f;return 0===e&&1===u[0].length&&(l=1),{x:aa.x+l*Math.cos(m),y:aa.y+l*Math.sin(m)}}return{x:aa.x+(f+1-(g+1)/2)*h,y:(e+1)*i}}var n={x:aa.x+(f+1-(g+1)/2)*h,y:(e+1)*i};return b?n:n},ca={},l=u.length-1;l>=0;l--)for(var G=u[l],N=0;N<G.length;N++){var D=G[N];ca[D.id()]=ba(D,l===u.length-1)}return h.layoutPositions(this,c,function(){return ca[this.id()]}),this},b.exports=d},{"../../is":83,"../../math":85,"../../util":100}],49:[function(a,b,c){"use strict";function d(a){this.options=e.extend({},h,a)}var e=a("../../util"),f=a("../../math"),g=a("../../is"),h={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};d.prototype.run=function(){var a=this.options,b=a,c=a.cy,d=b.eles,e=void 0!==b.counterclockwise?!b.counterclockwise:b.clockwise,h=d.nodes().not(":parent");b.sort&&(h=h.sort(b.sort));for(var i,j=f.makeBoundingBox(b.boundingBox?b.boundingBox:{x1:0,y1:0,w:c.width(),h:c.height()}),k={x:j.x1+j.w/2,y:j.y1+j.h/2},l=void 0===b.sweep?2*Math.PI-2*Math.PI/h.length:b.sweep,m=l/Math.max(1,h.length-1),n=0,o=0;o<h.length;o++){var p=h[o],q=p.boundingBox(),r=q.w,s=q.h;n=Math.max(n,r,s)}if(i=g.number(b.radius)?b.radius:h.length<=1?0:Math.min(j.h,j.w)/2-n,h.length>1&&b.avoidOverlap){n*=1.75;var t=Math.cos(m)-Math.cos(0),u=Math.sin(m)-Math.sin(0),v=Math.sqrt(n*n/(t*t+u*u));i=Math.max(v,i)}var w=function(a,c){var d=b.startAngle+a*m*(e?1:-1),f=i*Math.cos(d),g=i*Math.sin(d),h={x:k.x+f,y:k.y+g};return h};return h.layoutPositions(this,b,w),this},b.exports=d},{"../../is":83,"../../math":85,"../../util":100}],50:[function(a,b,c){"use strict";function d(a){this.options=e.extend({},g,a)}var e=a("../../util"),f=a("../../math"),g={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,height:void 0,width:void 0,concentric:function(a){return a.degree()},levelWidth:function(a){return a.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};d.prototype.run=function(){for(var a=this.options,b=a,c=void 0!==b.counterclockwise?!b.counterclockwise:b.clockwise,d=a.cy,e=b.eles,g=e.nodes().not(":parent"),h=f.makeBoundingBox(b.boundingBox?b.boundingBox:{x1:0,y1:0,w:d.width(),h:d.height()}),i={x:h.x1+h.w/2,y:h.y1+h.h/2},j=[],k=b.startAngle,l=0,m=0;m<g.length;m++){var n,o=g[m];n=b.concentric.apply(o,[o]),j.push({value:n,node:o}),o._private.scratch.concentric=n}g.updateStyle();for(var m=0;m<g.length;m++){var o=g[m],p=o.boundingBox();l=Math.max(l,p.w,p.h)}j.sort(function(a,b){return b.value-a.value});for(var q=b.levelWidth(g),r=[[]],s=r[0],m=0;m<j.length;m++){var t=j[m];if(s.length>0){var u=Math.abs(s[0].value-t.value);u>=q&&(s=[],r.push(s))}s.push(t)}var v=l+b.minNodeSpacing;if(!b.avoidOverlap){var w=r.length>0&&r[0].length>1,x=Math.min(h.w,h.h)/2-v,y=x/(r.length+w?1:0);v=Math.min(v,y)}for(var z=0,m=0;m<r.length;m++){var A=r[m],B=void 0===b.sweep?2*Math.PI-2*Math.PI/A.length:b.sweep,C=A.dTheta=B/Math.max(1,A.length-1);if(A.length>1&&b.avoidOverlap){var D=Math.cos(C)-Math.cos(0),E=Math.sin(C)-Math.sin(0),F=Math.sqrt(v*v/(D*D+E*E));z=Math.max(F,z)}A.r=z,z+=v}if(b.equidistant){for(var G=0,z=0,m=0;m<r.length;m++){var A=r[m],H=A.r-z;G=Math.max(G,H)}z=0;for(var m=0;m<r.length;m++){var A=r[m];0===m&&(z=A.r),A.r=z,z+=G}}for(var I={},m=0;m<r.length;m++)for(var A=r[m],C=A.dTheta,z=A.r,J=0;J<A.length;J++){var t=A[J],k=b.startAngle+(c?1:-1)*C*J,K={x:i.x+z*Math.cos(k),y:i.y+z*Math.sin(k)};I[t.node.id()]=K}return g.layoutPositions(this,b,function(){var a=this.id();return I[a]}),this},b.exports=d},{"../../math":85,"../../util":100}],51:[function(a,b,c){"use strict";function d(a){this.options=f.extend({},j,a),this.options.layout=this}var e,f=a("../../util"),g=a("../../math"),h=a("../../thread"),i=a("../../is"),j={ready:function(){},stop:function(){},animate:!0,animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,randomize:!1,componentSpacing:100,nodeRepulsion:function(a){return 4e5},nodeOverlap:10,idealEdgeLength:function(a){return 10},edgeElasticity:function(a){return 100},nestingFactor:5,gravity:80,numIter:1e3,initialTemp:200,coolingFactor:.95,minTemp:1,useMultitasking:!0};d.prototype.run=function(){var a=this.options,b=a.cy,c=this,d=this.thread;d&&!d.stopped()||(d=this.thread=h({disabled:!a.useMultitasking})),c.stopped=!1,c.trigger({type:"layoutstart",layout:c}),e=!0===a.debug;var g=k(b,c,a);e&&n(g),a.randomize&&o(g,b);var i=Date.now(),j=!1,l=function(c){c=c||{},j&&!c.next||!c.force&&Date.now()-i<a.animationThreshold||(j=!0,f.requestAnimationFrame(function(){p(g,b,a),!0===a.fit&&b.fit(a.padding),j=!1,c.next&&c.next()}))};d.on("message",function(a){var b=a.message;g.layoutNodes=b,l()}),d.pass({layoutInfo:g,options:{animate:a.animate,refresh:a.refresh,componentSpacing:a.componentSpacing,nodeOverlap:a.nodeOverlap,nestingFactor:a.nestingFactor,gravity:a.gravity,numIter:a.numIter,initialTemp:a.initialTemp,coolingFactor:a.coolingFactor,minTemp:a.minTemp}}).run(function(a){var b,c=a.layoutInfo,d=a.options,e=!1,f=function(a,b,c){g(a,b),k(a,b),l(a,b),m(a,b),n(a,b)},g=function(a,b){for(var c=0;c<a.graphSet.length;c++)for(var d=a.graphSet[c],e=d.length,f=0;f<e;f++)for(var g=a.layoutNodes[a.idToIndex[d[f]]],i=f+1;i<e;i++){var j=a.layoutNodes[a.idToIndex[d[i]]];h(g,j,a,b)}},h=function(a,b,c,d){var e=a.cmptId,f=b.cmptId;if(e===f||c.isCompound){var g=b.positionX-a.positionX,h=b.positionY-a.positionY;if(0!==g||0!==h){var k=i(a,b,g,h);if(k>0)var l=d.nodeOverlap*k,m=Math.sqrt(g*g+h*h),n=l*g/m,o=l*h/m;else var p=j(a,g,h),q=j(b,-1*g,-1*h),r=q.x-p.x,s=q.y-p.y,t=r*r+s*s,m=Math.sqrt(t),l=(a.nodeRepulsion+b.nodeRepulsion)/t,n=l*r/m,o=l*s/m;a.isLocked||(a.offsetX-=n,a.offsetY-=o),b.isLocked||(b.offsetX+=n,b.offsetY+=o)}}},i=function(a,b,c,d){if(c>0)var e=a.maxX-b.minX;else var e=b.maxX-a.minX;if(d>0)var f=a.maxY-b.minY;else var f=b.maxY-a.minY;return e>=0&&f>=0?Math.sqrt(e*e+f*f):0},j=function(a,b,c){var d=a.positionX,e=a.positionY,f=a.height||1,g=a.width||1,h=c/b,i=f/g,j={};return 0===b&&0<c?(j.x=d,j.y=e+f/2,j):0===b&&0>c?(j.x=d,j.y=e+f/2,j):0<b&&-1*i<=h&&h<=i?(j.x=d+g/2,j.y=e+g*c/2/b,j):0>b&&-1*i<=h&&h<=i?(j.x=d-g/2,j.y=e-g*c/2/b,j):0<c&&(h<=-1*i||h>=i)?(j.x=d+f*b/2/c,j.y=e+f/2,j):0>c&&(h<=-1*i||h>=i)?(j.x=d-f*b/2/c,j.y=e-f/2,j):j},k=function(a,b){for(var c=0;c<a.edgeSize;c++){var d=a.layoutEdges[c],e=a.idToIndex[d.sourceId],f=a.layoutNodes[e],g=a.idToIndex[d.targetId],h=a.layoutNodes[g],i=h.positionX-f.positionX,k=h.positionY-f.positionY;if(0===i&&0===k)return;var l=j(f,i,k),m=j(h,-1*i,-1*k),n=m.x-l.x,o=m.y-l.y,p=Math.sqrt(n*n+o*o),q=Math.pow(d.idealLength-p,2)/d.elasticity;if(0!==p)var r=q*n/p,s=q*o/p;else var r=0,s=0;f.isLocked||(f.offsetX+=r,f.offsetY+=s),h.isLocked||(h.offsetX-=r,h.offsetY-=s)}},l=function(a,b){for(var c=1,d=0;d<a.graphSet.length;d++){var e=a.graphSet[d],f=e.length;if(0===d)var g=a.clientHeight/2,h=a.clientWidth/2;else var i=a.layoutNodes[a.idToIndex[e[0]]],j=a.layoutNodes[a.idToIndex[i.parentId]],g=j.positionX,h=j.positionY;for(var k=0;k<f;k++){var l=a.layoutNodes[a.idToIndex[e[k]]];if(!l.isLocked){var m=g-l.positionX,n=h-l.positionY,o=Math.sqrt(m*m+n*n);if(o>c){var p=b.gravity*m/o,q=b.gravity*n/o;l.offsetX+=p,l.offsetY+=q}}}}},m=function(a,b){var c=[],d=0,e=-1;for(c.push.apply(c,a.graphSet[0]),e+=a.graphSet[0].length;d<=e;){var f=c[d++],g=a.idToIndex[f],h=a.layoutNodes[g],i=h.children;if(0<i.length&&!h.isLocked){for(var j=h.offsetX,k=h.offsetY,l=0;l<i.length;l++){var m=a.layoutNodes[a.idToIndex[i[l]]];m.offsetX+=j,m.offsetY+=k,c[++e]=i[l]}h.offsetX=0,h.offsetY=0}}},n=function(a,b){for(var c=0;c<a.nodeSize;c++){var d=a.layoutNodes[c];0<d.children.length&&(d.maxX=void 0,d.minX=void 0,d.maxY=void 0,d.minY=void 0)}for(var c=0;c<a.nodeSize;c++){var d=a.layoutNodes[c];if(!(0<d.children.length||d.isLocked)){var e=o(d.offsetX,d.offsetY,a.temperature);d.positionX+=e.x,d.positionY+=e.y,d.offsetX=0,d.offsetY=0,d.minX=d.positionX-d.width,d.maxX=d.positionX+d.width,d.minY=d.positionY-d.height,d.maxY=d.positionY+d.height,p(d,a)}}for(var c=0;c<a.nodeSize;c++){var d=a.layoutNodes[c];0<d.children.length&&!d.isLocked&&(d.positionX=(d.maxX+d.minX)/2,d.positionY=(d.maxY+d.minY)/2,d.width=d.maxX-d.minX,d.height=d.maxY-d.minY)}},o=function(a,b,c){var d=Math.sqrt(a*a+b*b);if(d>c)var e={x:c*a/d,y:c*b/d};else var e={x:a,y:b};return e},p=function(a,b){var c=a.parentId;if(null!=c){var d=b.layoutNodes[b.idToIndex[c]],e=!1;return(null==d.maxX||a.maxX+d.padRight>d.maxX)&&(d.maxX=a.maxX+d.padRight,e=!0),(null==d.minX||a.minX-d.padLeft<d.minX)&&(d.minX=a.minX-d.padLeft,e=!0),(null==d.maxY||a.maxY+d.padBottom>d.maxY)&&(d.maxY=a.maxY+d.padBottom,e=!0),(null==d.minY||a.minY-d.padTop<d.minY)&&(d.minY=a.minY-d.padTop,e=!0),e?p(d,b):void 0}},q=function(a,b){for(var d=c.layoutNodes,e=[],f=0;f<d.length;f++){var g=d[f],h=g.cmptId,i=e[h]=e[h]||[];i.push(g)}for(var j=0,f=0;f<e.length;f++){var k=e[f];if(k){k.x1=1/0,k.x2=-(1/0),k.y1=1/0,k.y2=-(1/0);for(var l=0;l<k.length;l++){var m=k[l];k.x1=Math.min(k.x1,m.positionX-m.width/2),k.x2=Math.max(k.x2,m.positionX+m.width/2),k.y1=Math.min(k.y1,m.positionY-m.height/2),k.y2=Math.max(k.y2,m.positionY+m.height/2)}k.w=k.x2-k.x1,k.h=k.y2-k.y1,j+=k.w*k.h}}e.sort(function(a,b){return b.w*b.h-a.w*a.h});for(var n=0,o=0,p=0,q=0,r=Math.sqrt(j)*c.clientWidth/c.clientHeight,f=0;f<e.length;f++){var k=e[f];if(k){for(var l=0;l<k.length;l++){var m=k[l];m.isLocked||(m.positionX+=n,m.positionY+=o)}n+=k.w+b.componentSpacing,p+=k.w+b.componentSpacing,q=Math.max(q,k.h),p>r&&(o+=q+b.componentSpacing,n=0,p=0,q=0)}}},r=function(a){return!e&&(f(c,d,a),c.temperature=c.temperature*d.coolingFactor,!(c.temperature<d.minTemp))},s=0;do{for(var t=0;t<d.refresh&&s<d.numIter;){var b=r(s);if(!b)break;t++,s++}d.animate&&broadcast(c.layoutNodes)}while(b&&s+1<d.numIter);return q(c,d),c}).then(function(a){g.layoutNodes=a.layoutNodes,d.stop(),m()});var m=function(){l({force:!0,next:function(){c.one("layoutstop",a.stop),c.trigger({type:"layoutstop",layout:c})}})};return this},d.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.trigger("layoutstop"),this},d.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var k=function(a,b,c){for(var d=c.eles.edges(),e=c.eles.nodes(),f={isCompound:a.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:e.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:d.size(),temperature:c.initialTemp,clientWidth:a.width(),clientHeight:a.width(),boundingBox:g.makeBoundingBox(c.boundingBox?c.boundingBox:{x1:0,y1:0,w:a.width(),h:a.height()})},h=c.eles.components(),j={},k=0;k<h.length;k++)for(var m=h[k],n=0;n<m.length;n++){var o=m[n];j[o.id()]=k}for(var k=0;k<f.nodeSize;k++){var p=e[k],q=p.boundingBox(),r={};r.isLocked=p.locked(),r.id=p.data("id"),r.parentId=p.data("parent"),r.cmptId=j[p.id()],r.children=[],r.positionX=p.position("x"),r.positionY=p.position("y"),r.offsetX=0,r.offsetY=0,r.height=q.w,r.width=q.h,r.maxX=r.positionX+r.width/2,r.minX=r.positionX-r.width/2,r.maxY=r.positionY+r.height/2,r.minY=r.positionY-r.height/2,r.padLeft=parseFloat(p.style("padding")),r.padRight=parseFloat(p.style("padding")),r.padTop=parseFloat(p.style("padding")),r.padBottom=parseFloat(p.style("padding")),r.nodeRepulsion=i.fn(c.nodeRepulsion)?c.nodeRepulsion.call(p,p):c.nodeRepulsion,f.layoutNodes.push(r),f.idToIndex[r.id]=k}for(var s=[],t=0,u=-1,v=[],k=0;k<f.nodeSize;k++){var p=f.layoutNodes[k],w=p.parentId;null!=w?f.layoutNodes[f.idToIndex[w]].children.push(p.id):(s[++u]=p.id,v.push(p.id))}for(f.graphSet.push(v);t<=u;){var x=s[t++],y=f.idToIndex[x],o=f.layoutNodes[y],z=o.children;if(z.length>0){f.graphSet.push(z);for(var k=0;k<z.length;k++)s[++u]=z[k]}}for(var k=0;k<f.graphSet.length;k++)for(var A=f.graphSet[k],n=0;n<A.length;n++){var B=f.idToIndex[A[n]];f.indexToGraph[B]=k}for(var k=0;k<f.edgeSize;k++){var C=d[k],D={};D.id=C.data("id"),D.sourceId=C.data("source"),D.targetId=C.data("target");var E=i.fn(c.idealEdgeLength)?c.idealEdgeLength.call(C,C):c.idealEdgeLength,F=i.fn(c.edgeElasticity)?c.edgeElasticity.call(C,C):c.edgeElasticity,G=f.idToIndex[D.sourceId],H=f.idToIndex[D.targetId],I=f.indexToGraph[G],J=f.indexToGraph[H];if(I!=J){for(var K=l(D.sourceId,D.targetId,f),L=f.graphSet[K],M=0,r=f.layoutNodes[G];-1===L.indexOf(r.id);)r=f.layoutNodes[f.idToIndex[r.parentId]],M++;for(r=f.layoutNodes[H];-1===L.indexOf(r.id);)r=f.layoutNodes[f.idToIndex[r.parentId]],M++;E*=M*c.nestingFactor}D.idealLength=E,D.elasticity=F,f.layoutEdges.push(D)}return f},l=function(a,b,c){var d=m(a,b,0,c);return 2>d.count?0:d.graph},m=function(a,b,c,d){var e=d.graphSet[c];if(-1<e.indexOf(a)&&-1<e.indexOf(b))return{count:2,graph:c};for(var f=0,g=0;g<e.length;g++){var h=e[g],i=d.idToIndex[h],j=d.layoutNodes[i].children;if(0!==j.length){var k=d.indexToGraph[d.idToIndex[j[0]]],l=m(a,b,k,d);if(0!==l.count){if(1!==l.count)return l;if(f++,2===f)break}}}return{count:f,graph:c}},n=function(a){if(e){console.debug("layoutNodes:");for(var b=0;b<a.nodeSize;b++){var c=a.layoutNodes[b],d="\nindex: "+b+"\nId: "+c.id+"\nChildren: "+c.children.toString()+"\nparentId: "+c.parentId+"\npositionX: "+c.positionX+"\npositionY: "+c.positionY+"\nOffsetX: "+c.offsetX+"\nOffsetY: "+c.offsetY+"\npadLeft: "+c.padLeft+"\npadRight: "+c.padRight+"\npadTop: "+c.padTop+"\npadBottom: "+c.padBottom;console.debug(d)}console.debug("idToIndex");for(var b in a.idToIndex)console.debug("Id: "+b+"\nIndex: "+a.idToIndex[b]);console.debug("Graph Set");for(var f=a.graphSet,b=0;b<f.length;b++)console.debug("Set : "+b+": "+f[b].toString());for(var d="IndexToGraph",b=0;b<a.indexToGraph.length;b++)d+="\nIndex : "+b+" Graph: "+a.indexToGraph[b];console.debug(d),d="Layout Edges";for(var b=0;b<a.layoutEdges.length;b++){var g=a.layoutEdges[b];d+="\nEdge Index: "+b+" ID: "+g.id+" SouceID: "+g.sourceId+" TargetId: "+g.targetId+" Ideal Length: "+g.idealLength}console.debug(d),d="nodeSize: "+a.nodeSize,d+="\nedgeSize: "+a.edgeSize,d+="\ntemperature: "+a.temperature,console.debug(d)}},o=function(a,b){for(var c=a.clientWidth,d=a.clientHeight,e=0;e<a.nodeSize;e++){var f=a.layoutNodes[e];0!==f.children.length||f.isLocked||(f.positionX=Math.random()*c,f.positionY=Math.random()*d)}},p=function(a,b,c){var d=c.layout,e=c.eles.nodes(),f=a.boundingBox,g={x1:1/0,x2:-(1/0),y1:1/0,y2:-(1/0)};c.boundingBox&&(e.forEach(function(b){var c=a.layoutNodes[a.idToIndex[b.data("id")]];g.x1=Math.min(g.x1,c.positionX),g.x2=Math.max(g.x2,c.positionX),g.y1=Math.min(g.y1,c.positionY),g.y2=Math.max(g.y2,c.positionY)}),g.w=g.x2-g.x1,g.h=g.y2-g.y1),e.positions(function(b,d){var e=a.layoutNodes[a.idToIndex[d.data("id")]];if(c.boundingBox){var h=(e.positionX-g.x1)/g.w,i=(e.positionY-g.y1)/g.h;return{x:f.x1+h*f.w,y:f.y1+i*f.h}}return{x:e.positionX,y:e.positionY}}),!0!==a.ready&&(a.ready=!0,d.one("layoutready",c.ready),d.trigger({type:"layoutready",layout:this}))};b.exports=d},{"../../is":83,"../../math":85,"../../thread":98,"../../util":100}],52:[function(a,b,c){"use strict";function d(a){this.options=e.extend({},g,a)}var e=a("../../util"),f=a("../../math"),g={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:function(a){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};d.prototype.run=function(){var a=this.options,b=a,c=a.cy,d=b.eles,e=d.nodes().not(":parent");b.sort&&(e=e.sort(b.sort));var g=f.makeBoundingBox(b.boundingBox?b.boundingBox:{x1:0,y1:0,w:c.width(),h:c.height()});if(0===g.h||0===g.w)e.layoutPositions(this,b,function(){return{x:g.x1,y:g.y1}});else{var h=e.size(),i=Math.sqrt(h*g.h/g.w),j=Math.round(i),k=Math.round(g.w/g.h*i),l=function(a){if(null==a)return Math.min(j,k);var b=Math.min(j,k);b==j?j=a:k=a},m=function(a){if(null==a)return Math.max(j,k);var b=Math.max(j,k);b==j?j=a:k=a},n=b.rows,o=null!=b.cols?b.cols:b.columns;if(null!=n&&null!=o)j=n,k=o;else if(null!=n&&null==o)j=n,k=Math.ceil(h/j);else if(null==n&&null!=o)k=o,j=Math.ceil(h/k);else if(k*j>h){var p=l(),q=m();(p-1)*q>=h?l(p-1):(q-1)*p>=h&&m(q-1)}else for(;k*j<h;){var p=l(),q=m();(q+1)*p>=h?m(q+1):l(p+1)}var r=g.w/k,s=g.h/j;if(b.condense&&(r=0,s=0),b.avoidOverlap)for(var t=0;t<e.length;t++){var u=e[t],v=u._private.position;null!=v.x&&null!=v.y||(v.x=0,v.y=0);var w=u.boundingBox(),x=b.avoidOverlapPadding,y=w.w+x,z=w.h+x;r=Math.max(r,y),s=Math.max(s,z)}for(var A={},B=function(a,b){return!!A["c-"+a+"-"+b]},C=function(a,b){A["c-"+a+"-"+b]=!0},D=0,E=0,F=function(){E++,E>=k&&(E=0,D++)},G={},t=0;t<e.length;t++){var u=e[t],H=b.position(u);if(H&&(void 0!==H.row||void 0!==H.col)){var v={row:H.row,col:H.col};if(void 0===v.col)for(v.col=0;B(v.row,v.col);)v.col++;else if(void 0===v.row)for(v.row=0;B(v.row,v.col);)v.row++;G[u.id()]=v,C(v.row,v.col)}}var I=function(a,b){var c,d;if(b.locked()||b.isParent())return!1;var e=G[b.id()];if(e)c=e.col*r+r/2+g.x1,d=e.row*s+s/2+g.y1;else{for(;B(D,E);)F();c=E*r+r/2+g.x1,d=D*s+s/2+g.y1,C(D,E),F()}return{x:c,y:d}};e.layoutPositions(this,b,I)}return this},b.exports=d},{"../../math":85,"../../util":100}],53:[function(a,b,c){"use strict";b.exports=[{name:"breadthfirst",impl:a("./breadthfirst")},{name:"circle",impl:a("./circle")},{name:"concentric",impl:a("./concentric")},{name:"cose",impl:a("./cose")},{name:"grid",impl:a("./grid")},{name:"null",impl:a("./null")},{name:"preset",impl:a("./preset")},{name:"random",impl:a("./random")}]},{"./breadthfirst":48,"./circle":49,"./concentric":50,"./cose":51,"./grid":52,"./null":54,"./preset":55,"./random":56}],54:[function(a,b,c){"use strict";function d(a){this.options=e.extend({},f,a)}var e=a("../../util"),f={ready:function(){},stop:function(){}};d.prototype.run=function(){var a=this.options,b=a.eles,c=this;a.cy;return c.trigger("layoutstart"),b.nodes().positions(function(){return{x:0,y:0}}),c.one("layoutready",a.ready),c.trigger("layoutready"),c.one("layoutstop",a.stop),c.trigger("layoutstop"),this},d.prototype.stop=function(){return this},b.exports=d},{"../../util":100}],55:[function(a,b,c){"use strict";function d(a){this.options=e.extend({},g,a)}var e=a("../../util"),f=a("../../is"),g={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};d.prototype.run=function(){function a(a){if(null==b.positions)return null;if(e)return b.positions.apply(a,[a]);var c=b.positions[a._private.data.id];return null==c?null:c}var b=this.options,c=b.eles,d=c.nodes(),e=f.fn(b.positions);return d.layoutPositions(this,b,function(b,c){var d=a(c);return!c.locked()&&null!=d&&d}),this},b.exports=d},{"../../is":83,"../../util":100}],56:[function(a,b,c){"use strict";function d(a){this.options=e.extend({},g,a)}var e=a("../../util"),f=a("../../math"),g={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};d.prototype.run=function(){var a=this.options,b=a.cy,c=a.eles,d=c.nodes().not(":parent"),e=f.makeBoundingBox(a.boundingBox?a.boundingBox:{x1:0,y1:0,w:b.width(),h:b.height()}),g=function(a,b){return{x:e.x1+Math.round(Math.random()*e.w),y:e.y1+Math.round(Math.random()*e.h)}};return d.layoutPositions(this,a,g),this},b.exports=d},{"../../math":85,"../../util":100}],57:[function(a,b,c){"use strict";var d=a("../../../math"),e=a("../../../is"),f=a("../../../util"),g={};g.arrowShapeWidth=.3,g.registerArrowShapes=function(){var a=this.arrowShapes={},b=this,c=function(a,b,c,d,e,f){var g=e.x-c/2-f,h=e.x+c/2+f,i=e.y-c/2-f,j=e.y+c/2+f,k=g<=a&&a<=h&&i<=b&&b<=j;return k},g=function(a,b,c,d,e){var f=a*Math.cos(d)-b*Math.sin(d),g=a*Math.sin(d)+b*Math.cos(d),h=f*c,i=g*c,j=h+e.x,k=i+e.y;return{x:j,y:k}},h=function(a,b,c,d){for(var e=[],f=0;f<a.length;f+=2){var h=a[f],i=a[f+1];e.push(g(h,i,b,c,d))}return e},i=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];b.push(d.x,d.y)}return b},j=function(g,j){e.string(j)&&(j=a[j]),a[g]=f.extend({name:g,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(a,b,c,e,f,g){var j=i(h(this.points,c+2*g,e,f)),k=d.pointInsidePolygonPoints(a,b,j);return k},roughCollide:c,draw:function(a,c,d,e){var f=h(this.points,c,d,e);b.arrowShapeImpl("polygon")(a,f)},spacing:function(a){return 0},gap:function(a){return 2*a.pstyle("width").pfValue}},j)};j("none",{collide:f.falsify,roughCollide:f.falsify,draw:f.noop,spacing:f.zeroify,gap:f.zeroify}),j("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),j("arrow","triangle"),j("triangle-backcurve",{points:a.triangle.points,controlPoint:[0,-.15],roughCollide:c,draw:function(a,c,d,e){var f=h(this.points,c,d,e),i=this.controlPoint,j=g(i[0],i[1],c,d,e);b.arrowShapeImpl(this.name)(a,f,j)},gap:function(a){return a.pstyle("width").pfValue}}),j("triangle-tee",{points:[-.15,-.3,0,0,.15,-.3,-.15,-.3],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(a,b,c,e,f,g){var j=i(h(this.points,c+2*g,e,f)),k=i(h(this.pointsTee,c+2*g,e,f)),l=d.pointInsidePolygonPoints(a,b,j)||d.pointInsidePolygonPoints(a,b,k);return l},draw:function(a,c,d,e){var f=h(this.points,c,d,e),g=h(this.pointsTee,c,d,e);b.arrowShapeImpl(this.name)(a,f,g)}}),j("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(a){return a.pstyle("width").pfValue}}),j("circle",{radius:.15,collide:function(a,b,c,d,e,f){var g=e,h=Math.pow(g.x-a,2)+Math.pow(g.y-b,2)<=Math.pow((c+2*f)*this.radius,2);return h},draw:function(a,c,d,e){b.arrowShapeImpl(this.name)(a,e.x,e.y,this.radius*c)},spacing:function(a){return b.getArrowWidth(a.pstyle("width").pfValue)*this.radius}}),j("inhibitor",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(a){return 1},gap:function(a){return 1}}),j("tee","inhibitor"),j("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),j("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(a){return a.pstyle("width").pfValue}})},b.exports=g},{"../../../is":83,"../../../math":85,"../../../util":100}],58:[function(a,b,c){"use strict";function d(a,b,c){for(var d=function(a,b,c,d){return e.qbezierAt(a,b,c,d)},f=b._private,g=f.rstyle.bezierPts,h=0;h<a.bezierProjPcts.length;h++){var i=a.bezierProjPcts[h];g.push({x:d(c[0],c[2],c[4],i),y:d(c[1],c[3],c[5],i)})}}var e=a("../../../math"),f=a("../../../is"),g=a("../../../util"),h=a("../../../collection/zsort"),i=a("../../../window"),j={};j.registerCalculationListeners=function(){var a=this.cy,b=a.collection(),c=this,d=function(a,c){b.merge(a);for(var d=0;d<a.length;d++){var e=a[d],f=e._private,g=f.rstyle;g.clean=!1,f.bbCache=null;var h=g.dirtyEvents=g.dirtyEvents||{length:0};h[c.type]||(h[c.type]=!0,h.length++)}};c.binder(a).on("position.* style.* free.*","node",function(b){var c=b.cyTarget;if(d(c,b),d(c.connectedEdges(),b),a.hasCompoundNodes()){var e=c.parents();d(e,b),d(e.connectedEdges(),b)}}).on("add.* background.*","node",function(a){var b=a.cyTarget;d(b,a)}).on("add.* style.*","edge",function(a){var b=a.cyTarget;d(b,a),d(b.parallelEdges(),a)}).on("remove.*","edge",function(a){for(var b=a.cyTarget,c=b.parallelEdges(),e=0;e<c.length;e++){var f=c[e];f.removed()||d(f,a)}});var e=function(d){if(d){var e=c.onUpdateEleCalcsFns;if(e)for(var f=0;f<e.length;f++){var g=e[f];g(d,b)}c.recalculateRenderedStyle(b,!1);for(var f=0;f<b.length;f++)b[f]._private.rstyle.dirtyEvents=null;b=a.collection()}};c.beforeRender(e,c.beforeRenderPriorities.eleCalcs)},j.onUpdateEleCalcs=function(a){var b=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];b.push(a)},j.recalculateRenderedStyle=function(a,b){var c=[],d=[];if(!this.destroyed){void 0===b&&(b=!0);for(var e=0;e<a.length;e++){var f=a[e],g=f._private,h=g.rstyle;b&&h.clean||f.removed()||("nodes"===g.group?d.push(f):c.push(f),h.clean=!0)}for(var e=0;e<d.length;e++){var f=d[e],g=f._private,h=g.rstyle,i=g.position;this.recalculateNodeLabelProjection(f),h.nodeX=i.x,h.nodeY=i.y,h.nodeW=f.pstyle("width").pfValue,h.nodeH=f.pstyle("height").pfValue}this.recalculateEdgeProjections(c);for(var e=0;e<c.length;e++){var f=c[e],g=f._private,h=g.rstyle,j=g.rscratch;this.recalculateEdgeLabelProjections(f),h.srcX=j.arrowStartX,h.srcY=j.arrowStartY,h.tgtX=j.arrowEndX,h.tgtY=j.arrowEndY,h.midX=j.midX,h.midY=j.midY,h.labelAngle=j.labelAngle,h.sourceLabelAngle=j.sourceLabelAngle,h.targetLabelAngle=j.targetLabelAngle}}},j.projectIntoViewport=function(a,b){var c=this.cy,d=this.findContainerClientCoords(),e=d[0],f=d[1],g=c.pan(),h=c.zoom(),i=(a-e-g.x)/h,j=(b-f-g.y)/h;return[i,j]},j.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var a=this.container,b=a.getBoundingClientRect(),c=i.getComputedStyle(a),d=function(a){return parseFloat(c.getPropertyValue(a))},e={left:d("padding-left")+d("border-left-width"),right:d("padding-right")+d("border-right-width"),top:d("padding-top")+d("border-top-width"),bottom:d("padding-bottom")+d("border-bottom-width")};return this.containerBB=[b.left+e.left,b.top+e.top,b.right-b.left-e.left-e.right,b.bottom-b.top-e.top-e.bottom]},j.invalidateContainerClientCoordsCache=function(){this.containerBB=null},j.findNearestElement=function(a,b,c,d){return this.findNearestElements(a,b,c,d)[0]},j.findNearestElements=function(a,b,c,d){function f(a,b){if(a.isNode()){if(m)return;m=a,q.push(a)}if(a.isEdge()&&(null==b||b<w))if(l){if(l.pstyle("z-index").value===a.pstyle("z-index").value)for(var c=0;c<q.length;c++)if(q[c].isEdge()){q[c]=a,l=a,w=null!=b?b:w;break}}else q.push(a),l=a,w=null!=b?b:w}function h(d){var e=d._private;if("no"!==d.pstyle("events").strValue){var g=d.outerWidth()+2*u,h=d.outerHeight()+2*u,i=g/2,j=h/2,k=e.position;if(k.x-i<=a&&a<=k.x+i&&k.y-j<=b&&b<=k.y+j){var l=!c||d.visible()&&!d.transparent();if(c&&!l)return;var m=o.nodeShapes[n.getNodeShape(d)];if(m.checkPoint(a,b,0,g,h,k.x,k.y))return f(d,0),!0}}}function i(d){var g=d._private;if("no"!==d.pstyle("events").strValue){var i,j,k=g.rscratch,l=d.pstyle("width").pfValue,m=l/2+t,p=m*m,r=2*m,u=g.source,v=g.target,w=!1,x=function(){if(void 0!==j)return j;if(!c)return j=!0,!0;var a=d.visible()&&!d.transparent();return a?(j=!0,!0):(j=!1,!1)};if("segments"===k.edgeType||"straight"===k.edgeType||"haystack"===k.edgeType){for(var y=k.allpts,z=0;z+3<y.length;z+=2)if((w=e.inLineVicinity(a,b,y[z],y[z+1],y[z+2],y[z+3],r))&&x()&&p>(i=e.sqdistToFiniteLine(a,b,y[z],y[z+1],y[z+2],y[z+3])))return f(d,i),!0}else if("bezier"===k.edgeType||"multibezier"===k.edgeType||"self"===k.edgeType||"compound"===k.edgeType)for(var y=k.allpts,z=0;z+5<k.allpts.length;z+=4)if((w=e.inBezierVicinity(a,b,y[z],y[z+1],y[z+2],y[z+3],y[z+4],y[z+5],r))&&x()&&p>(i=e.sqdistToQuadraticBezier(a,b,y[z],y[z+1],y[z+2],y[z+3],y[z+4],y[z+5])))return f(d,i),!0;if(x())for(var u=u||g.source,v=v||g.target,A=n.getArrowWidth(l),B=[{name:"source",x:k.arrowStartX,y:k.arrowStartY,angle:k.srcArrowAngle},{name:"target",x:k.arrowEndX,y:k.arrowEndY,angle:k.tgtArrowAngle},{name:"mid-source",x:k.midX,y:k.midY,angle:k.midsrcArrowAngle},{name:"mid-target",x:k.midX,y:k.midY,angle:k.midtgtArrowAngle}],z=0;z<B.length;z++){var C=B[z],D=o.arrowShapes[d.pstyle(C.name+"-arrow-shape").value];if(D.roughCollide(a,b,A,C.angle,{x:C.x,y:C.y},t)&&D.collide(a,b,A,C.angle,{x:C.x,y:C.y},t))return f(d),!0}s&&q.length>0&&(h(u),
h(v))}}function j(a,b,c){return g.getPrefixedProperty(a,b,c)}function k(c,d){var g,h=c._private,i=v;g=d?d+"-":"";var k=c.pstyle(g+"label").value,l="yes"===c.pstyle("text-events").strValue;if(l&&k){var m=h.rstyle,n=c.pstyle("text-border-width").pfValue,o=j(m,"labelWidth",d)+n/2+2*i,p=j(m,"labelHeight",d)+n/2+2*i,q=j(m,"labelX",d),r=j(m,"labelY",d),s=j(h.rscratch,"labelAngle",d),t=q-o/2,u=q+o/2,w=r-p/2,x=r+p/2;if(s){var y=Math.cos(s),z=Math.sin(s),A=function(a,b){return a-=q,b-=r,{x:a*y-b*z+q,y:a*z+b*y+r}},B=A(t,w),C=A(t,x),D=A(u,w),E=A(u,x),F=[B.x,B.y,D.x,D.y,E.x,E.y,C.x,C.y];if(e.pointInsidePolygonPoints(a,b,F))return f(c),!0}else{var G={w:o,h:p,x1:t,x2:u,y1:w,y2:x};if(e.inBoundingBox(G,a,b))return f(c),!0}}}for(var l,m,n=this,o=this,p=o.getCachedZSortedEles(),q=[],r=o.cy.zoom(),s=o.cy.hasCompoundNodes(),t=(d?24:8)/r,u=(d?8:2)/r,v=(d?8:2)/r,w=1/0,x=p.length-1;x>=0;x--){var y=p[x];y.isNode()?h(y)||k(y):i(y)||k(y)||k(y,"source")||k(y,"target")}return q},j.getAllInBox=function(a,b,c,d){var f=this.getCachedZSortedEles(),g=f.nodes,h=f.edges,i=[],j=Math.min(a,c),k=Math.max(a,c),l=Math.min(b,d),m=Math.max(b,d);a=j,c=k,b=l,d=m;for(var n=e.makeBoundingBox({x1:a,y1:b,x2:c,y2:d}),o=0;o<g.length;o++){var p=g[o],q=p.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1,includeShadows:!1});e.boundingBoxesIntersect(n,q)&&i.push(g[o])}for(var r=0;r<h.length;r++){var s=h[r],t=s._private,u=t.rscratch;if((null==u.startX||null==u.startY||e.inBoundingBox(n,u.startX,u.startY))&&(null==u.endX||null==u.endY||e.inBoundingBox(n,u.endX,u.endY)))if("bezier"===u.edgeType||"multibezier"===u.edgeType||"self"===u.edgeType||"compound"===u.edgeType||"segments"===u.edgeType||"haystack"===u.edgeType){for(var v=t.rstyle.bezierPts||t.rstyle.linePts||t.rstyle.haystackPts,w=!0,o=0;o<v.length;o++)if(!e.pointInBoundingBox(n,v[o])){w=!1;break}w&&i.push(s)}else"haystack"!==u.edgeType&&"straight"!==u.edgeType||i.push(s)}return i},j.getNodeShape=function(a){var b=this,c=a.pstyle("shape").value;if(a.isParent())return"rectangle"===c||"roundrectangle"===c?c:"rectangle";if("polygon"===c){var d=a.pstyle("shape-polygon-points").value;return b.nodeShapes.makePolygon(d).name}return c},j.updateCachedZSortedEles=function(){this.getCachedZSortedEles(!0)},j.updateCachedGrabbedEles=function(){var a=this.cachedZSortedEles;a.drag=[],a.nondrag=[];for(var b=[],c=0;c<a.length;c++){var d=a[c],e=d._private.rscratch;d.grabbed()&&!d.isParent()?b.push(d):e.inDragLayer?a.drag.push(d):a.nondrag.push(d)}for(var c=0;c<b.length;c++){var d=b[c];a.drag.push(d)}},j.getCachedZSortedEles=function(a){if(a||!this.cachedZSortedEles){var b=this.cy.mutableElements(),c=[];c.nodes=[],c.edges=[];for(var d=0;d<b.length;d++){var e=b[d];(e.animated()||e.visible()&&!e.transparent())&&(c.push(e),e.isNode()?c.nodes.push(e):c.edges.push(e))}c.sort(h),this.cachedZSortedEles=c,this.updateCachedGrabbedEles()}else c=this.cachedZSortedEles;return c},j.projectLines=function(a){var b=a._private,c=b.rscratch,e=c.edgeType;if(b.rstyle.bezierPts=null,b.rstyle.linePts=null,b.rstyle.haystackPts=null,"multibezier"===e||"bezier"===e||"self"===e||"compound"===e)for(var f=(b.rstyle.bezierPts=[],0);f+5<c.allpts.length;f+=4)d(this,a,c.allpts.slice(f,f+6));else if("segments"===e)for(var g=b.rstyle.linePts=[],f=0;f+1<c.allpts.length;f+=2)g.push({x:c.allpts[f],y:c.allpts[f+1]});else if("haystack"===e){var h=c.haystackPts;b.rstyle.haystackPts=[{x:h[0],y:h[1]},{x:h[2],y:h[3]}]}b.rstyle.arrowWidth=this.getArrowWidth(a.pstyle("width").pfValue)*this.arrowShapeWidth},j.projectBezier=j.projectLines,j.recalculateNodeLabelProjection=function(a){var b=a.pstyle("label").strValue;if(!f.emptyString(b)){var c,d,e=a._private,g=a.width(),h=a.height(),i=a.pstyle("padding").pfValue,j=e.position,k=a.pstyle("text-halign").strValue,l=a.pstyle("text-valign").strValue,m=e.rscratch,n=e.rstyle;switch(k){case"left":c=j.x-g/2-i;break;case"right":c=j.x+g/2+i;break;default:c=j.x}switch(l){case"top":d=j.y-h/2-i;break;case"bottom":d=j.y+h/2+i;break;default:d=j.y}m.labelX=c,m.labelY=d,n.labelX=c,n.labelY=d,this.applyLabelDimensions(a)}},j.recalculateEdgeLabelProjections=function(a){var b,c=a._private,d=c.rscratch,f=this,h={mid:a.pstyle("label").strValue,source:a.pstyle("source-label").strValue,target:a.pstyle("target-label").strValue};if(h.mid||h.source||h.target){b={x:d.midX,y:d.midY};var i=function(a,b,d){g.setPrefixedProperty(c.rscratch,a,b,d),g.setPrefixedProperty(c.rstyle,a,b,d)};i("labelX",null,b.x),i("labelY",null,b.y);var j=function(){function a(a,b,c,d,f){var g=e.dist(b,c),h=a.segments[a.segments.length-1],i={p0:b,p1:c,t0:d,t1:f,startDist:h?h.startDist+h.length:0,length:g};a.segments.push(i),a.length+=g}if(j.cache)return j.cache;for(var b=[],g=0;g+5<d.allpts.length;g+=4){var h={x:d.allpts[g],y:d.allpts[g+1]},i={x:d.allpts[g+2],y:d.allpts[g+3]},k={x:d.allpts[g+4],y:d.allpts[g+5]};b.push({p0:h,p1:i,p2:k,startDist:0,length:0,segments:[]})}for(var l=c.rstyle.bezierPts,m=f.bezierProjPcts.length,g=0;g<b.length;g++){var n=b[g],o=b[g-1];o&&(n.startDist=o.startDist+o.length),a(n,n.p0,l[g*m],0,f.bezierProjPcts[0]);for(var p=0;p<m-1;p++)a(n,l[g*m+p],l[g*m+p+1],f.bezierProjPcts[p],f.bezierProjPcts[p+1]);a(n,l[g*m+m-1],n.p2,f.bezierProjPcts[m-1],1)}return j.cache=b},k=function(c){var f,g="source"===c;if(h[c]){var k=a.pstyle(c+"-text-offset").pfValue,l=function(a,b){var c=b.x-a.x,d=b.y-a.y;return Math.atan(d/c)},m=function(a,b,c,d){var f=e.bound(0,d-.001,1),g=e.bound(0,d+.001,1),h=e.qbezierPtAt(a,b,c,f),i=e.qbezierPtAt(a,b,c,g);return l(h,i)};switch(d.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var n,o=j(),p=0,q=0,r=0;r<o.length;r++){for(var s=o[g?r:o.length-1-r],t=0;t<s.segments.length;t++){var u=s.segments[g?t:s.segments.length-1-t],v=r===o.length-1&&t===s.segments.length-1;if(p=q,q+=u.length,q>=k||v){n={cp:s,segment:u};break}}if(n)break}var s=n.cp,u=n.segment,w=(k-p)/u.length,x=u.t1-u.t0,y=g?u.t0+x*w:u.t1-x*w;y=e.bound(0,y,1),b=e.qbezierPtAt(s.p0,s.p1,s.p2,y),f=m(s.p0,s.p1,s.p2,y,b);break;case"straight":case"segments":case"haystack":for(var z,A,B,C,D=0,E=d.allpts.length,r=0;r+3<E&&(g?(B={x:d.allpts[r],y:d.allpts[r+1]},C={x:d.allpts[r+2],y:d.allpts[r+3]}):(B={x:d.allpts[E-2-r],y:d.allpts[E-1-r]},C={x:d.allpts[E-4-r],y:d.allpts[E-3-r]}),z=e.dist(B,C),A=D,D+=z,!(D>=k));r+=2);var F=k-A,y=F/z;y=e.bound(0,y,1),b=e.lineAt(B,C,y),f=l(B,C)}i("labelX",c,b.x),i("labelY",c,b.y),i("labelAutoAngle",c,f)}};k("source"),k("target"),this.applyLabelDimensions(a)}},j.applyLabelDimensions=function(a){this.applyPrefixedLabelDimensions(a),a.isEdge()&&(this.applyPrefixedLabelDimensions(a,"source"),this.applyPrefixedLabelDimensions(a,"target"))},j.applyPrefixedLabelDimensions=function(a,b){var c=a._private,d=this.getLabelText(a,b),e=this.calculateLabelDimensions(a,d);g.setPrefixedProperty(c.rstyle,"labelWidth",b,e.width),g.setPrefixedProperty(c.rscratch,"labelWidth",b,e.width),g.setPrefixedProperty(c.rstyle,"labelHeight",b,e.height),g.setPrefixedProperty(c.rscratch,"labelHeight",b,e.height)},j.getLabelText=function(a,b){var c=a._private,d=b?b+"-":"",e=a.pstyle(d+"label").strValue,f=a.pstyle("text-transform").value,h=function(a,d){return d?(g.setPrefixedProperty(c.rscratch,a,b,d),d):g.getPrefixedProperty(c.rscratch,a,b)};if("none"==f||("uppercase"==f?e=e.toUpperCase():"lowercase"==f&&(e=e.toLowerCase())),"wrap"===a.pstyle("text-wrap").value){var i=h("labelKey");if(i&&h("labelWrapKey")===i)return h("labelWrapCachedText");for(var j=e.split("\n"),k=a.pstyle("text-max-width").pfValue,l=[],m=0;m<j.length;m++){var n=j[m],o=this.calculateLabelDimensions(a,n,"line="+n),p=o.width;if(p>k){for(var q=n.split(/\s+/),r="",s=0;s<q.length;s++){var t=q[s],u=0===r.length?t:r+" "+t,v=this.calculateLabelDimensions(a,u,"testLine="+u),w=v.width;w<=k?r+=t+" ":(l.push(r),r=t+" ")}r.match(/^\s+$/)||l.push(r)}else l.push(n)}h("labelWrapCachedLines",l),e=h("labelWrapCachedText",l.join("\n")),h("labelWrapKey",i)}return e},j.calculateLabelDimensions=function(a,b,c){var d=this,e=a._private.labelStyleKey+"$@$"+b;c&&(e+="$@$"+c);var f=d.labelDimCache||(d.labelDimCache={});if(f[e])return f[e];var g=1,h=a.pstyle("font-style").strValue,i=g*a.pstyle("font-size").pfValue+"px",j=a.pstyle("font-family").strValue,k=a.pstyle("font-weight").strValue,l=this.labelCalcDiv;l||(l=this.labelCalcDiv=document.createElement("div"),document.body.appendChild(l));var m=l.style;return m.fontFamily=j,m.fontStyle=h,m.fontSize=i,m.fontWeight=k,m.position="absolute",m.left="-9999px",m.top="-9999px",m.zIndex="-1",m.visibility="hidden",m.pointerEvents="none",m.padding="0",m.lineHeight="1","wrap"===a.pstyle("text-wrap").value?m.whiteSpace="pre":m.whiteSpace="normal",l.textContent=b,f[e]={width:Math.ceil(l.clientWidth/g),height:Math.ceil(l.clientHeight/g)},f[e]},j.recalculateEdgeProjections=function(a){this.findEdgeControlPoints(a)},j.findEdgeControlPoints=function(a){if(a&&0!==a.length){for(var b,c=this,d=c.cy,g=d.hasCompoundNodes(),h={},i=[],j=[],k=0;k<a.length;k++){var l=a[k],m=l._private,n=m.data,o=l.pstyle("curve-style").value,p="unbundled-bezier"===o||"segments"===o;if("none"!==l.pstyle("display").value)if("haystack"!==o){var q=n.source,r=n.target;b=q>r?r+"$-$"+q:q+"$-$"+r,p&&(b="unbundled$-$"+n.id),null==h[b]&&(h[b]=[],i.push(b)),h[b].push(l),p&&(h[b].hasUnbundled=!0)}else j.push(l)}for(var s,t,u,v,w,x,y,z,A,B,C,D,E,F,G=0;G<i.length;G++){b=i[G];var H=h[b];if(H.sort(function(a,b){return a.poolIndex()-b.poolIndex()}),s=H[0]._private.source,t=H[0]._private.target,!H.hasUnbundled&&s.id()>t.id()){var I=s;s=t,t=I}if(u=s._private,v=t._private,w=u.position,x=v.position,y=s.outerWidth(),z=s.outerHeight(),A=t.outerWidth(),B=t.outerHeight(),C=c.nodeShapes[this.getNodeShape(s)],D=c.nodeShapes[this.getNodeShape(t)],F=!1,H.length>1&&s!==t||H.hasUnbundled){var J=C.intersectLine(w.x,w.y,y,z,x.x,x.y,0),K=D.intersectLine(x.x,x.y,A,B,w.x,w.y,0),L={x1:J[0],x2:K[0],y1:J[1],y2:K[1]},M={x1:w.x,x2:x.x,y1:w.y,y2:x.y},N=K[1]-J[1],O=K[0]-J[0],P=Math.sqrt(O*O+N*N),Q={x:O,y:N},R={x:Q.x/P,y:Q.y/P};E={x:-R.y,y:R.x},D.checkPoint(J[0],J[1],0,A,B,x.x,x.y)&&C.checkPoint(K[0],K[1],0,y,z,w.x,w.y)&&(E={},F=!0)}for(var l,S,T,k=0;k<H.length;k++){l=H[k],S=l._private,T=S.rscratch;var U=T.lastEdgeIndex,V=k,W=T.lastNumEdges,X=H.length,o=l.pstyle("curve-style").value,Y=l.pstyle("control-point-distances"),Z=l.pstyle("control-point-weights"),$=Y&&Z?Math.min(Y.value.length,Z.value.length):1,_=l.pstyle("control-point-step-size").pfValue,aa=Y?Y.pfValue[0]:void 0,ba=Z.value[0],p="unbundled-bezier"===o||"segments"===o,ca=l.pstyle("edge-distances").value,da=l.pstyle("segment-weights"),ea=l.pstyle("segment-distances"),fa=Math.min(da.pfValue.length,ea.pfValue.length),ga=T.lastSrcCtlPtX,ha=w.x,ia=T.lastSrcCtlPtY,ja=w.y,ka=T.lastSrcCtlPtW,la=s.outerWidth(),ma=T.lastSrcCtlPtH,na=s.outerHeight(),oa=T.lastTgtCtlPtX,pa=x.x,qa=T.lastTgtCtlPtY,ra=x.y,sa=T.lastTgtCtlPtW,ta=t.outerWidth(),ua=T.lastTgtCtlPtH,va=t.outerHeight(),wa=T.lastCurveStyle,xa=o,ya=T.lastCtrlptDists,za=Y?Y.strValue:null,Aa=T.lastCtrlptWs,Ba=Z.strValue,Ca=T.lastSegmentWs,Da=da.strValue,Ea=T.lastSegmentDs,Fa=ea.strValue,Ga=T.lastStepSize,Ha=_,Ia=T.lastEdgeDistances,Ja=ca;if(F?T.badBezier=!0:T.badBezier=!1,ga!==ha||ia!==ja||ka!==la||ma!==na||oa!==pa||qa!==ra||sa!==ta||ua!==va||wa!==xa||ya!==za||Aa!==Ba||Ca!==Da||Ea!==Fa||Ga!==Ha||Ia!==Ja||!(U===V&&W===X||p)){if(T.lastSrcCtlPtX=ha,T.lastSrcCtlPtY=ja,T.lastSrcCtlPtW=la,T.lastSrcCtlPtH=na,T.lastTgtCtlPtX=pa,T.lastTgtCtlPtY=ra,T.lastTgtCtlPtW=ta,T.lastTgtCtlPtH=va,T.lastEdgeIndex=V,T.lastNumEdges=X,T.lastCurveStyle=xa,T.lastCtrlptDists=za,T.lastCtrlptWs=Ba,T.lastSegmentDs=Fa,T.lastSegmentWs=Da,T.lastStepSize=Ha,T.lastEdgeDistances=Ja,s===t){T.edgeType="self";var Ka=k,La=_;p&&(Ka=0,La=aa),T.ctrlpts=[w.x,w.y-(1+Math.pow(z,1.12)/100)*La*(Ka/3+1),w.x-(1+Math.pow(y,1.12)/100)*La*(Ka/3+1),w.y]}else if(g&&(s.isParent()||s.isChild()||t.isParent()||t.isChild())&&(s.parents().anySame(t)||t.parents().anySame(s))){T.edgeType="compound",T.badBezier=!1;var Ka=k,La=_;p&&(Ka=0,La=aa);var Ma=50,Na={x:w.x-y/2,y:w.y-z/2},Oa={x:x.x-A/2,y:x.y-B/2},Pa={x:Math.min(Na.x,Oa.x),y:Math.min(Na.y,Oa.y)},Qa=.5,Ra=Math.max(Qa,Math.log(.01*y)),Sa=Math.max(Qa,Math.log(.01*A));T.ctrlpts=[Pa.x,Pa.y-(1+Math.pow(Ma,1.12)/100)*La*(Ka/3+1)*Ra,Pa.x-(1+Math.pow(Ma,1.12)/100)*La*(Ka/3+1)*Sa,Pa.y]}else if("segments"===o){T.edgeType="segments",T.segpts=[];for(var Ta=0;Ta<fa;Ta++){var Ua=da.pfValue[Ta],Va=ea.pfValue[Ta],Wa=1-Ua,Xa=Ua,Ya="node-position"===ca?M:L,Za={x:Ya.x1*Wa+Ya.x2*Xa,y:Ya.y1*Wa+Ya.y2*Xa};T.segpts.push(Za.x+E.x*Va,Za.y+E.y*Va)}}else if(H.length%2!==1||k!==Math.floor(H.length/2)||p){var $a=p;T.edgeType=$a?"multibezier":"bezier",T.ctrlpts=[];for(var _a=0;_a<$;_a++){var ab,bb=(.5-H.length/2+k)*_,cb=e.signum(bb);$a&&(aa=Y?Y.pfValue[_a]:_,ba=Z.value[_a]),ab=p?aa:void 0!==aa?cb*aa:void 0;var db=void 0!==ab?ab:bb,Wa=1-ba,Xa=ba,Ya="node-position"===ca?M:L,Za={x:Ya.x1*Wa+Ya.x2*Xa,y:Ya.y1*Wa+Ya.y2*Xa};T.ctrlpts.push(Za.x+E.x*db,Za.y+E.y*db)}}else T.edgeType="straight";this.findEndpoints(l);var eb=!f.number(T.startX)||!f.number(T.startY),fb=!f.number(T.arrowStartX)||!f.number(T.arrowStartY),gb=!f.number(T.endX)||!f.number(T.endY),hb=!f.number(T.arrowEndX)||!f.number(T.arrowEndY),ib=3,jb=this.getArrowWidth(l.pstyle("width").pfValue)*this.arrowShapeWidth,kb=ib*jb;if("bezier"===T.edgeType){var lb=e.dist({x:T.ctrlpts[0],y:T.ctrlpts[1]},{x:T.startX,y:T.startY}),mb=lb<kb,nb=e.dist({x:T.ctrlpts[0],y:T.ctrlpts[1]},{x:T.endX,y:T.endY}),ob=nb<kb,pb=!1;if(eb||fb||mb){pb=!0;var qb={x:T.ctrlpts[0]-w.x,y:T.ctrlpts[1]-w.y},rb=Math.sqrt(qb.x*qb.x+qb.y*qb.y),sb={x:qb.x/rb,y:qb.y/rb},tb=Math.max(y,z),ub={x:T.ctrlpts[0]+2*sb.x*tb,y:T.ctrlpts[1]+2*sb.y*tb},vb=C.intersectLine(w.x,w.y,y,z,ub.x,ub.y,0);mb?(T.ctrlpts[0]=T.ctrlpts[0]+sb.x*(kb-lb),T.ctrlpts[1]=T.ctrlpts[1]+sb.y*(kb-lb)):(T.ctrlpts[0]=vb[0]+sb.x*kb,T.ctrlpts[1]=vb[1]+sb.y*kb)}if(gb||hb||ob){pb=!0;var qb={x:T.ctrlpts[0]-x.x,y:T.ctrlpts[1]-x.y},rb=Math.sqrt(qb.x*qb.x+qb.y*qb.y),sb={x:qb.x/rb,y:qb.y/rb},tb=Math.max(y,z),ub={x:T.ctrlpts[0]+2*sb.x*tb,y:T.ctrlpts[1]+2*sb.y*tb},wb=D.intersectLine(x.x,x.y,A,B,ub.x,ub.y,0);ob?(T.ctrlpts[0]=T.ctrlpts[0]+sb.x*(kb-nb),T.ctrlpts[1]=T.ctrlpts[1]+sb.y*(kb-nb)):(T.ctrlpts[0]=wb[0]+sb.x*kb,T.ctrlpts[1]=wb[1]+sb.y*kb)}pb&&this.findEndpoints(l)}if("multibezier"===T.edgeType||"bezier"===T.edgeType||"self"===T.edgeType||"compound"===T.edgeType){T.allpts=[],T.allpts.push(T.startX,T.startY);for(var _a=0;_a+1<T.ctrlpts.length;_a+=2)T.allpts.push(T.ctrlpts[_a],T.ctrlpts[_a+1]),_a+3<T.ctrlpts.length&&T.allpts.push((T.ctrlpts[_a]+T.ctrlpts[_a+2])/2,(T.ctrlpts[_a+1]+T.ctrlpts[_a+3])/2);T.allpts.push(T.endX,T.endY);var xb,yb;T.ctrlpts.length/2%2===0?(xb=T.allpts.length/2-1,T.midX=T.allpts[xb],T.midY=T.allpts[xb+1]):(xb=T.allpts.length/2-3,yb=.5,T.midX=e.qbezierAt(T.allpts[xb],T.allpts[xb+2],T.allpts[xb+4],yb),T.midY=e.qbezierAt(T.allpts[xb+1],T.allpts[xb+3],T.allpts[xb+5],yb))}else if("straight"===T.edgeType)T.allpts=[T.startX,T.startY,T.endX,T.endY],T.midX=(T.startX+T.endX+T.arrowStartX+T.arrowEndX)/4,T.midY=(T.startY+T.endY+T.arrowStartY+T.arrowEndY)/4;else if("segments"===T.edgeType)if(T.allpts=[],T.allpts.push(T.startX,T.startY),T.allpts.push.apply(T.allpts,T.segpts),T.allpts.push(T.endX,T.endY),T.segpts.length%4===0){var zb=T.segpts.length/2,Ab=zb-2;T.midX=(T.segpts[Ab]+T.segpts[zb])/2,T.midY=(T.segpts[Ab+1]+T.segpts[zb+1])/2}else{var Ab=T.segpts.length/2-1;T.midX=T.segpts[Ab],T.midY=T.segpts[Ab+1]}this.projectLines(l),this.calculateArrowAngles(l),this.recalculateEdgeLabelProjections(l),this.calculateLabelAngles(l)}}}for(var k=0;k<j.length;k++){var l=j[k],m=l._private,Bb=m.rscratch,T=Bb;if(!Bb.haystack){var Cb=2*Math.random()*Math.PI;Bb.source={x:Math.cos(Cb),y:Math.sin(Cb)};var Cb=2*Math.random()*Math.PI;Bb.target={x:Math.cos(Cb),y:Math.sin(Cb)}}var s=m.source,t=m.target,w=s._private.position,x=t._private.position,y=s.width(),A=t.width(),z=s.height(),B=t.height(),tb=l.pstyle("haystack-radius").value,Db=tb/2;T.haystackPts=T.allpts=[T.source.x*y*Db+w.x,T.source.y*z*Db+w.y,T.target.x*A*Db+x.x,T.target.y*B*Db+x.y],T.midX=(T.allpts[0]+T.allpts[2])/2,T.midY=(T.allpts[1]+T.allpts[3])/2,Bb.edgeType="haystack",Bb.haystack=!0,this.projectLines(l),this.calculateArrowAngles(l),this.recalculateEdgeLabelProjections(l),this.calculateLabelAngles(l)}return h}};var k=function(a,b){return Math.atan2(b,a)-Math.PI/2};j.calculateArrowAngles=function(a){var b,c,d,f,g,h,i=a._private.rscratch,j="haystack"===i.edgeType,l="multibezier"===i.edgeType,m="segments"===i.edgeType,n="compound"===i.edgeType,o="self"===i.edgeType,p=a._private.source._private.position,q=a._private.target._private.position;j?(d=i.haystackPts[0],f=i.haystackPts[1],g=i.haystackPts[2],h=i.haystackPts[3]):(d=i.arrowStartX,f=i.arrowStartY,g=i.arrowEndX,h=i.arrowEndY),b=p.x-d,c=p.y-f,i.srcArrowAngle=k(b,c);var r=i.midX,s=i.midY;if(j&&(r=(d+g)/2,s=(f+h)/2),b=g-d,c=h-f,o)b=-1,c=1;else if(m){var t=i.allpts;if(t.length/2%2===0){var u=t.length/2,v=u-2;b=t[u]-t[v],c=t[u+1]-t[v+1]}else{var u=t.length/2-1,v=u-2,w=u+2;b=t[u]-t[v],c=t[u+1]-t[v+1]}}else if(l||n){var x,y,z,A,t=i.allpts,B=i.ctrlpts;if(B.length/2%2===0){var C=t.length/2-1,D=C+2,E=D+2;x=e.qbezierAt(t[C],t[D],t[E],0),y=e.qbezierAt(t[C+1],t[D+1],t[E+1],0),z=e.qbezierAt(t[C],t[D],t[E],1e-4),A=e.qbezierAt(t[C+1],t[D+1],t[E+1],1e-4)}else{var D=t.length/2-1,C=D-2,E=D+2;x=e.qbezierAt(t[C],t[D],t[E],.4999),y=e.qbezierAt(t[C+1],t[D+1],t[E+1],.4999),z=e.qbezierAt(t[C],t[D],t[E],.5),A=e.qbezierAt(t[C+1],t[D+1],t[E+1],.5)}b=z-x,c=A-y}if(i.midtgtArrowAngle=k(b,c),i.midDispX=b,i.midDispY=c,b*=-1,c*=-1,m){var t=i.allpts;if(t.length/2%2===0);else{var u=t.length/2-1,w=u+2;b=-(t[w]-t[u]),c=-(t[w+1]-t[u+1])}}i.midsrcArrowAngle=k(b,c),b=q.x-g,c=q.y-h,i.tgtArrowAngle=k(b,c)},j.calculateLabelAngles=function(a){var b=a._private,c=b.rscratch,d=a.isEdge(),e=a.pstyle("text-rotation"),f=e.strValue;"none"===f?c.labelAngle=c.sourceLabelAngle=c.targetLabelAngle=0:d&&"autorotate"===f?(c.labelAngle=Math.atan(c.midDispY/c.midDispX),c.sourceLabelAngle=c.sourceLabelAutoAngle,c.targetLabelAngle=c.targetLabelAutoAngle):"autorotate"===f?c.labelAngle=c.sourceLabelAngle=c.targetLabelAngle=0:c.labelAngle=c.sourceLabelAngle=c.targetLabelAngle=e.pfValue},j.findEndpoints=function(a){var b,c,d,g=this,h=a.source()[0],i=a.target()[0],j=h._private,k=i._private,l=j.position,m=k.position,n=a.pstyle("target-arrow-shape").value,o=a.pstyle("source-arrow-shape").value,p=a._private.rscratch,q=p.edgeType,r="bezier"===q||"multibezier"===q||"self"===q||"compound"===q,s="bezier"!==q,t="straight"===q||"segments"===q,u="segments"===q,v=r||s||t;if(r){var w=[p.ctrlpts[0],p.ctrlpts[1]],x=s?[p.ctrlpts[p.ctrlpts.length-2],p.ctrlpts[p.ctrlpts.length-1]]:w;c=x,d=w}else if(t){var y=u?p.segpts.slice(0,2):[m.x,m.y],z=u?p.segpts.slice(p.segpts.length-2):[l.x,l.y];c=z,d=y}b=g.nodeShapes[this.getNodeShape(i)].intersectLine(m.x,m.y,i.outerWidth(),i.outerHeight(),c[0],c[1],0);var A=e.shortenIntersection(b,c,g.arrowShapes[n].spacing(a)),B=e.shortenIntersection(b,c,g.arrowShapes[n].gap(a));p.endX=B[0],p.endY=B[1],p.arrowEndX=A[0],p.arrowEndY=A[1],b=g.nodeShapes[this.getNodeShape(h)].intersectLine(l.x,l.y,h.outerWidth(),h.outerHeight(),d[0],d[1],0);var C=e.shortenIntersection(b,d,g.arrowShapes[o].spacing(a)),D=e.shortenIntersection(b,d,g.arrowShapes[o].gap(a));p.startX=D[0],p.startY=D[1],p.arrowStartX=C[0],p.arrowStartY=C[1],v&&(f.number(p.startX)&&f.number(p.startY)&&f.number(p.endX)&&f.number(p.endY)?p.badLine=!1:p.badLine=!0)},j.getArrowWidth=j.getArrowHeight=function(a){var b=this.arrowWidthCache=this.arrowWidthCache||{},c=b[a];return c?c:(c=Math.max(Math.pow(13.37*a,.9),29),b[a]=c,c)},b.exports=j},{"../../../collection/zsort":32,"../../../is":83,"../../../math":85,"../../../util":100,"../../../window":107}],59:[function(a,b,c){"use strict";var d={};d.getCachedImage=function(a,b,c){var d=this,e=d.imageCache=d.imageCache||{},f=e[a];if(f)return f.image.complete||f.image.addEventListener("load",c),f.image;f=e[a]=e[a]||{};var g=f.image=new Image;g.addEventListener("load",c);var h="data:",i=a.substring(0,h.length).toLowerCase()===h;return i||(g.crossOrigin=b),g.src=a,g},b.exports=d},{}],60:[function(a,b,c){"use strict";var d=a("../../../is"),e=a("../../../util"),f=function(a){this.init(a)},g=f,h=g.prototype;h.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],h.init=function(a){var b=this;b.options=a,b.cy=a.cy,b.container=a.cy.container(),b.selection=[void 0,void 0,void 0,void 0,0],b.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],b.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},b.dragData={possibleDragElements:[]},b.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},b.redraws=0,b.showFps=a.showFps,b.hideEdgesOnViewport=a.hideEdgesOnViewport,b.hideLabelsOnViewport=a.hideLabelsOnViewport,b.textureOnViewport=a.textureOnViewport,b.wheelSensitivity=a.wheelSensitivity,b.motionBlurEnabled=a.motionBlur,b.forcedPixelRatio=a.pixelRatio,b.motionBlur=a.motionBlur,b.motionBlurOpacity=a.motionBlurOpacity,b.motionBlurTransparency=1-b.motionBlurOpacity,b.motionBlurPxRatio=1,b.mbPxRBlurry=1,b.minMbLowQualFrames=4,b.fullQualityMb=!1,b.clearedForMotionBlur=[],b.desktopTapThreshold=a.desktopTapThreshold,b.desktopTapThreshold2=a.desktopTapThreshold*a.desktopTapThreshold,b.touchTapThreshold=a.touchTapThreshold,b.touchTapThreshold2=a.touchTapThreshold*a.touchTapThreshold,b.tapholdDuration=500,b.bindings=[],b.beforeRenderCallbacks=[],b.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:100},b.registerNodeShapes(),b.registerArrowShapes(),b.registerCalculationListeners(),b.load()},h.notify=function(a){var b,c=this;if(!this.destroyed){b=d.array(a.type)?a.type:[a.type];for(var e={},f=0;f<b.length;f++){var g=b[f];e[g]=!0}if(e.destroy)return void c.destroy();(e.add||e.remove||e.load||e.style)&&c.updateCachedZSortedEles(),e.viewport&&c.redrawHint("select",!0),(e.load||e.resize)&&(c.invalidateContainerClientCoordsCache(),c.matchCanvasSize(c.container)),c.redrawHint("eles",!0),c.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}},h.destroy=function(){var a=this;a.destroyed=!0,a.cy.stopAnimationLoop();for(var b=0;b<a.bindings.length;b++){var c=a.bindings[b],d=c,e=d.target;(e.off||e.removeEventListener).apply(e,d.args)}if(a.bindings=[],a.beforeRenderCallbacks=[],a.onUpdateEleCalcsFns=[],a.removeObserver&&a.removeObserver.disconnect(),a.styleObserver&&a.styleObserver.disconnect(),a.labelCalcDiv)try{document.body.removeChild(a.labelCalcDiv)}catch(f){}},[a("./arrow-shapes"),a("./coord-ele-math"),a("./images"),a("./load-listeners"),a("./node-shapes"),a("./redraw")].forEach(function(a){e.extend(h,a)}),b.exports=g},{"../../../is":83,"../../../util":100,"./arrow-shapes":57,"./coord-ele-math":58,"./images":59,"./load-listeners":61,"./node-shapes":62,"./redraw":63}],61:[function(a,b,c){"use strict";var d=a("../../../window"),e=d?d.document:null,f=a("../../../is"),g=a("../../../util"),h=a("../../../math"),i=a("../../../event"),j={};j.registerBinding=function(a,b,c,d){var e=Array.prototype.slice.apply(arguments,[1]),f=this.binder(a);return f.on.apply(f,e)},j.binder=function(a){var b=this,c=a===d||a===e||a===e.body||f.domElement(a);if(null==b.supportsPassiveEvents){var g=!1;try{var h=Object.defineProperty({},"passive",{get:function(){g=!0}});d.addEventListener("test",null,h)}catch(i){}b.supportsPassiveEvents=g}var j=function(d,e,f){var g=Array.prototype.slice.call(arguments);return c&&b.supportsPassiveEvents&&(g[2]={capture:null!=f&&f,passive:!1,once:!1}),b.bindings.push({target:a,args:g}),(a.addEventListener||a.on).apply(a,g),this};return{on:j,addEventListener:j,addListener:j,bind:j}},j.nodeIsDraggable=function(a){return a&&a.isNode()&&!a.locked()&&a.grabbable()},j.nodeIsGrabbable=function(a){return this.nodeIsDraggable(a)&&0!==a.pstyle("opacity").value&&"visible"===a.pstyle("visibility").value&&"element"===a.pstyle("display").value},j.load=function(){var a=this,b=function(b,c,d,e){null==b&&(b=a.cy);for(var f=0;f<c.length;f++){var h=c[f],j=new i(d,g.extend({type:h},e));b.trigger(j)}},c=function(a){return a.shiftKey||a.metaKey||a.ctrlKey},e=function(b,c){var d=!0;if(a.cy.hasCompoundNodes()&&b&&b.isEdge())for(var e=0;c&&e<c.length;e++){var b=c[e];if(b.isNode()&&b.isParent()){d=!1;break}}else d=!0;return d},j=function(b){var c;if(b.addToList&&a.cy.hasCompoundNodes()){if(!b.addToList.hasId){b.addToList.hasId={};for(var d=0;d<b.addToList.length;d++){var e=b.addToList[d];b.addToList.hasId[e.id()]=!0}}c=b.addToList.hasId}return c||{}},k=function(a){a[0]._private.grabbed=!0},l=function(a){a[0]._private.grabbed=!1},m=function(a){a[0]._private.rscratch.inDragLayer=!0},n=function(a){a[0]._private.rscratch.inDragLayer=!1},o=function(a){a[0]._private.rscratch.isGrabTarget=!0},p=function(a){a[0]._private.rscratch.isGrabTarget=!1},q=function(a,b){var c=j(b);c[a.id()]||(b.addToList.push(a),c[a.id()]=!0,k(a))},r=function(a,b){if(a.cy().hasCompoundNodes()&&(null!=b.inDragLayer||null!=b.addToList)){var c=a.descendants();b.inDragLayer&&(c.forEach(m),c.connectedEdges().forEach(m)),b.addToList&&c.forEach(function(a){q(a,b)})}},s=function(b,c){c=c||{};var d=b.cy().hasCompoundNodes();c.inDragLayer&&(b.forEach(m),b.neighborhood().stdFilter(function(a){return!d||a.isEdge()}).forEach(m)),c.addToList&&b.forEach(function(a){q(a,c)}),r(b,c),v(b,{inDragLayer:c.inDragLayer}),a.updateCachedGrabbedEles()},t=s,u=function(b){b&&(b.hasId={},a.getCachedZSortedEles().forEach(function(a){l(a),n(a),p(a)}),a.updateCachedGrabbedEles())},v=function(a,b){if((null!=b.inDragLayer||null!=b.addToList)&&a.cy().hasCompoundNodes()){var c=a.ancestors().orphans();if(!c.same(a)){var d=c.descendants().spawnSelf().merge(c).unmerge(a).unmerge(a.descendants()),e=d.connectedEdges();b.inDragLayer&&(e.forEach(m),d.forEach(m)),b.addToList&&d.forEach(function(a){q(a,b)})}}},w="undefined"!=typeof MutationObserver;w?(a.removeObserver=new MutationObserver(function(b){for(var c=0;c<b.length;c++){var d=b[c],e=d.removedNodes;if(e)for(var f=0;f<e.length;f++){var g=e[f];if(g===a.container){a.destroy();break}}}}),a.container.parentNode&&a.removeObserver.observe(a.container.parentNode,{childList:!0})):a.registerBinding(a.container,"DOMNodeRemoved",function(b){a.destroy()});var x=g.debounce(function(){a.cy.invalidateSize(),a.invalidateContainerClientCoordsCache(),a.matchCanvasSize(a.container),a.redrawHint("eles",!0),a.redrawHint("drag",!0),a.redraw()},100);w&&(a.styleObserver=new MutationObserver(x),a.styleObserver.observe(a.container,{attributes:!0})),a.registerBinding(d,"resize",x);for(var y=function(b){a.registerBinding(b,"scroll",function(b){a.invalidateContainerClientCoordsCache()})},z=a.cy.container();y(z),z.parentNode;)z=z.parentNode;a.registerBinding(a.container,"contextmenu",function(a){a.preventDefault()});var A=function(){return 0!==a.selection[4]},B=function(b){for(var c=a.findContainerClientCoords(),d=c[0],e=c[1],f=c[2],g=c[3],h=b.touches?b.touches:[b],i=!1,j=0;j<h.length;j++){var k=h[j];if(d<=k.clientX&&k.clientX<=d+f&&e<=k.clientY&&k.clientY<=e+g){i=!0;break}}if(!i)return!1;for(var l=a.container,m=b.target,n=m.parentNode,o=!1;n;){if(n===l){o=!0;break}n=n.parentNode}return!!o};a.registerBinding(a.container,"mousedown",function(c){if(B(c)){c.preventDefault(),a.hoverData.capture=!0,a.hoverData.which=c.which;var d=a.cy,e=[c.clientX,c.clientY],f=a.projectIntoViewport(e[0],e[1]),g=a.selection,h=a.findNearestElements(f[0],f[1],!0,!1),j=h[0],k=a.dragData.possibleDragElements;a.hoverData.mdownPos=f,a.hoverData.mdownGPos=e;var l=function(){a.hoverData.tapholdCancelled=!1,clearTimeout(a.hoverData.tapholdTimeout),a.hoverData.tapholdTimeout=setTimeout(function(){if(!a.hoverData.tapholdCancelled){var b=a.hoverData.down;b?b.trigger(new i(c,{type:"taphold",cyPosition:{x:f[0],y:f[1]}})):d.trigger(new i(c,{type:"taphold",cyPosition:{x:f[0],y:f[1]}}))}},a.tapholdDuration)};if(3==c.which){a.hoverData.cxtStarted=!0;var m=new i(c,{type:"cxttapstart",cyPosition:{x:f[0],y:f[1]}});j?(j.activate(),j.trigger(m),a.hoverData.down=j):d.trigger(m),a.hoverData.downTime=(new Date).getTime(),a.hoverData.cxtDragged=!1}else if(1==c.which){if(j&&j.activate(),null!=j&&a.nodeIsGrabbable(j)){var n=new i(c,{type:"grab",cyPosition:{x:f[0],y:f[1]}});if(o(j),j.selected()){if(j.selected()){k=a.dragData.possibleDragElements=[];var p=d.$(function(){return this.isNode()&&this.selected()&&a.nodeIsGrabbable(this)});s(p,{addToList:k}),j.trigger(n)}}else k=a.dragData.possibleDragElements=[],t(j,{addToList:k}),j.trigger(n);a.redrawHint("eles",!0),a.redrawHint("drag",!0)}a.hoverData.down=j,a.hoverData.downs=h,a.hoverData.downTime=(new Date).getTime(),b(j,["mousedown","tapstart","vmousedown"],c,{cyPosition:{x:f[0],y:f[1]}}),null==j?(g[4]=1,a.data.bgActivePosistion={x:f[0],y:f[1]},a.redrawHint("select",!0),a.redraw()):j.isEdge()&&(g[4]=1),l()}g[0]=g[2]=f[0],g[1]=g[3]=f[1]}},!1),a.registerBinding(d,"mousemove",function(d){var g=a.hoverData.capture;if(g||B(d)){var j=!1,k=a.cy,l=k.zoom(),m=[d.clientX,d.clientY],n=a.projectIntoViewport(m[0],m[1]),o=a.hoverData.mdownPos,p=a.hoverData.mdownGPos,q=a.selection,r=null;a.hoverData.draggingEles||a.hoverData.dragging||a.hoverData.selecting||(r=a.findNearestElement(n[0],n[1],!0,!1));var t,u=a.hoverData.last,v=a.hoverData.down,w=[n[0]-q[2],n[1]-q[3]],x=a.dragData.possibleDragElements;if(p){var y=m[0]-p[0],z=y*y,A=m[1]-p[1],C=A*A,D=z+C;a.hoverData.isOverThresholdDrag=t=D>=a.desktopTapThreshold2}var E=c(d);t&&(a.hoverData.tapholdCancelled=!0);var F=function(){var b=a.hoverData.dragDelta=a.hoverData.dragDelta||[];0===b.length?(b.push(w[0]),b.push(w[1])):(b[0]+=w[0],b[1]+=w[1])};if(j=!0,b(r,["mousemove","vmousemove","tapdrag"],d,{cyPosition:{x:n[0],y:n[1]}}),3===a.hoverData.which){if(t){var G=new i(d,{type:"cxtdrag",cyPosition:{x:n[0],y:n[1]}});v?v.trigger(G):k.trigger(G),a.hoverData.cxtDragged=!0,a.hoverData.cxtOver&&r===a.hoverData.cxtOver||(a.hoverData.cxtOver&&a.hoverData.cxtOver.trigger(new i(d,{type:"cxtdragout",cyPosition:{x:n[0],y:n[1]}})),a.hoverData.cxtOver=r,r&&r.trigger(new i(d,{type:"cxtdragover",cyPosition:{x:n[0],y:n[1]}})))}}else if(a.hoverData.dragging){if(j=!0,k.panningEnabled()&&k.userPanningEnabled()){var H;if(a.hoverData.justStartedPan){var I=a.hoverData.mdownPos;H={x:(n[0]-I[0])*l,y:(n[1]-I[1])*l},a.hoverData.justStartedPan=!1}else H={x:w[0]*l,y:w[1]*l};k.panBy(H),a.hoverData.dragged=!0}n=a.projectIntoViewport(d.clientX,d.clientY)}else if(1!=q[4]||null!=v&&!v.isEdge()){if(v&&v.isEdge()&&v.active()&&v.unactivate(),v&&v.grabbed()||r==u||(u&&b(u,["mouseout","tapdragout"],d,{cyPosition:{x:n[0],y:n[1]}}),r&&b(r,["mouseover","tapdragover"],d,{cyPosition:{x:n[0],y:n[1]}}),a.hoverData.last=r),v&&a.nodeIsDraggable(v))if(t){var J=!a.dragData.didDrag;J&&a.redrawHint("eles",!0),a.dragData.didDrag=!0;var K=[];a.hoverData.draggingEles||s(k.collection(x),{inDragLayer:!0});for(var L=0;L<x.length;L++){var M=x[L];if(a.nodeIsDraggable(M)&&M.grabbed()){var N=M._private.position;if(K.push(M),f.number(w[0])&&f.number(w[1])){var O=!M.isParent();if(O&&(N.x+=w[0],N.y+=w[1]),J){var P=a.hoverData.dragDelta;O&&P&&f.number(P[0])&&f.number(P[1])&&(N.x+=P[0],N.y+=P[1])}}}}a.hoverData.draggingEles=!0;var Q=k.collection(K);Q.updateCompoundBounds(),Q.trigger("position drag"),a.redrawHint("drag",!0),a.redraw()}else F();j=!0}else if(t){if(a.hoverData.dragging||!k.boxSelectionEnabled()||!E&&k.panningEnabled()&&k.userPanningEnabled()){if(!a.hoverData.selecting&&k.panningEnabled()&&k.userPanningEnabled()){var R=e(v,a.hoverData.downs);R&&(a.hoverData.dragging=!0,a.hoverData.justStartedPan=!0,q[4]=0,a.data.bgActivePosistion=h.array2point(o),a.redrawHint("select",!0),a.redraw())}}else a.data.bgActivePosistion=void 0,a.hoverData.selecting||k.trigger("boxstart"),a.hoverData.selecting=!0,a.redrawHint("select",!0),a.redraw();v&&v.isEdge()&&v.active()&&v.unactivate()}return q[2]=n[0],q[3]=n[1],j?(d.stopPropagation&&d.stopPropagation(),d.preventDefault&&d.preventDefault(),
!1):void 0}},!1),a.registerBinding(d,"mouseup",function(d){var e=a.hoverData.capture;if(e){a.hoverData.capture=!1;var f=a.cy,g=a.projectIntoViewport(d.clientX,d.clientY),h=a.selection,j=a.findNearestElement(g[0],g[1],!0,!1),k=a.dragData.possibleDragElements,l=a.hoverData.down,m=c(d);if(a.data.bgActivePosistion&&(a.redrawHint("select",!0),a.redraw()),a.hoverData.tapholdCancelled=!0,a.data.bgActivePosistion=void 0,l&&l.unactivate(),3===a.hoverData.which){var n=new i(d,{type:"cxttapend",cyPosition:{x:g[0],y:g[1]}});if(l?l.trigger(n):f.trigger(n),!a.hoverData.cxtDragged){var o=new i(d,{type:"cxttap",cyPosition:{x:g[0],y:g[1]}});l?l.trigger(o):f.trigger(o)}a.hoverData.cxtDragged=!1,a.hoverData.which=null}else if(1===a.hoverData.which){if(null!=l||a.dragData.didDrag||a.hoverData.selecting||a.hoverData.dragged||c(d)||(f.$(function(){return this.selected()}).unselect(),k.length>0&&a.redrawHint("eles",!0),a.dragData.possibleDragElements=k=[]),b(j,["mouseup","tapend","vmouseup"],d,{cyPosition:{x:g[0],y:g[1]}}),a.dragData.didDrag||a.hoverData.dragged||a.hoverData.selecting||a.hoverData.isOverThresholdDrag||b(l,["click","tap","vclick"],d,{cyPosition:{x:g[0],y:g[1]}}),j!=l||a.dragData.didDrag||a.hoverData.selecting||null!=j&&j._private.selectable&&(a.hoverData.dragging||("additive"===f.selectionType()||m?j.selected()?j.unselect():j.select():m||(f.$(":selected").unmerge(j).unselect(),j.select())),a.redrawHint("eles",!0)),a.hoverData.selecting){var p=f.collection(a.getAllInBox(h[0],h[1],h[2],h[3]));a.redrawHint("select",!0),p.length>0&&a.redrawHint("eles",!0),f.trigger("boxend");var q=function(a){return a.selectable()&&!a.selected()};"additive"===f.selectionType()?p.trigger("box").stdFilter(q).select().trigger("boxselect"):(m||f.$(":selected").unmerge(p).unselect(),p.trigger("box").stdFilter(q).select().trigger("boxselect")),a.redraw()}if(a.hoverData.dragging&&(a.hoverData.dragging=!1,a.redrawHint("select",!0),a.redrawHint("eles",!0),a.redraw()),!h[4]){a.redrawHint("drag",!0),a.redrawHint("eles",!0);var r=l&&l.grabbed();u(k),r&&l.trigger("free")}}h[4]=0,a.hoverData.down=null,a.hoverData.cxtStarted=!1,a.hoverData.draggingEles=!1,a.hoverData.selecting=!1,a.hoverData.isOverThresholdDrag=!1,a.dragData.didDrag=!1,a.hoverData.dragged=!1,a.hoverData.dragDelta=[],a.hoverData.mdownPos=null,a.hoverData.mdownGPos=null}},!1);var C=function(b){if(!a.scrollingPage){var c=a.cy,d=a.projectIntoViewport(b.clientX,b.clientY),e=[d[0]*c.zoom()+c.pan().x,d[1]*c.zoom()+c.pan().y];if(a.hoverData.draggingEles||a.hoverData.dragging||a.hoverData.cxtStarted||A())return void b.preventDefault();if(c.panningEnabled()&&c.userPanningEnabled()&&c.zoomingEnabled()&&c.userZoomingEnabled()){b.preventDefault(),a.data.wheelZooming=!0,clearTimeout(a.data.wheelTimeout),a.data.wheelTimeout=setTimeout(function(){a.data.wheelZooming=!1,a.redrawHint("eles",!0),a.redraw()},150);var f;f=null!=b.deltaY?b.deltaY/-250:null!=b.wheelDeltaY?b.wheelDeltaY/1e3:b.wheelDelta/1e3,f*=a.wheelSensitivity;var g=1===b.deltaMode;g&&(f*=33),c.zoom({level:c.zoom()*Math.pow(10,f),renderedPosition:{x:e[0],y:e[1]}})}}};a.registerBinding(a.container,"wheel",C,!0),a.registerBinding(d,"scroll",function(b){a.scrollingPage=!0,clearTimeout(a.scrollingPageTimeout),a.scrollingPageTimeout=setTimeout(function(){a.scrollingPage=!1},250)},!0),a.registerBinding(a.container,"mouseout",function(b){var c=a.projectIntoViewport(b.clientX,b.clientY);a.cy.trigger(new i(b,{type:"mouseout",cyPosition:{x:c[0],y:c[1]}}))},!1),a.registerBinding(a.container,"mouseover",function(b){var c=a.projectIntoViewport(b.clientX,b.clientY);a.cy.trigger(new i(b,{type:"mouseover",cyPosition:{x:c[0],y:c[1]}}))},!1);var D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R=function(a,b,c,d){return Math.sqrt((c-a)*(c-a)+(d-b)*(d-b))},S=function(a,b,c,d){return(c-a)*(c-a)+(d-b)*(d-b)};a.registerBinding(a.container,"touchstart",Q=function(c){if(B(c)){a.touchData.capture=!0,a.data.bgActivePosistion=void 0;var d=a.cy,e=a.touchData.now,f=a.touchData.earlier;if(c.touches[0]){var g=a.projectIntoViewport(c.touches[0].clientX,c.touches[0].clientY);e[0]=g[0],e[1]=g[1]}if(c.touches[1]){var g=a.projectIntoViewport(c.touches[1].clientX,c.touches[1].clientY);e[2]=g[0],e[3]=g[1]}if(c.touches[2]){var g=a.projectIntoViewport(c.touches[2].clientX,c.touches[2].clientY);e[4]=g[0],e[5]=g[1]}if(c.touches[1]){u(a.dragData.touchDragEles);var h=a.findContainerClientCoords();L=h[0],M=h[1],N=h[2],O=h[3],D=c.touches[0].clientX-L,E=c.touches[0].clientY-M,F=c.touches[1].clientX-L,G=c.touches[1].clientY-M,P=0<=D&&D<=N&&0<=F&&F<=N&&0<=E&&E<=O&&0<=G&&G<=O;var j=d.pan(),k=d.zoom();H=R(D,E,F,G),I=S(D,E,F,G),J=[(D+F)/2,(E+G)/2],K=[(J[0]-j.x)/k,(J[1]-j.y)/k];var l=200,m=l*l;if(I<m&&!c.touches[2]){var n=a.findNearestElement(e[0],e[1],!0,!0),p=a.findNearestElement(e[2],e[3],!0,!0);return n&&n.isNode()?(n.activate().trigger(new i(c,{type:"cxttapstart",cyPosition:{x:e[0],y:e[1]}})),a.touchData.start=n):p&&p.isNode()?(p.activate().trigger(new i(c,{type:"cxttapstart",cyPosition:{x:e[0],y:e[1]}})),a.touchData.start=p):d.trigger(new i(c,{type:"cxttapstart",cyPosition:{x:e[0],y:e[1]}})),a.touchData.start&&(a.touchData.start._private.grabbed=!1),a.touchData.cxt=!0,a.touchData.cxtDragged=!1,a.data.bgActivePosistion=void 0,void a.redraw()}}if(c.touches[2]);else if(c.touches[1]);else if(c.touches[0]){var q=a.findNearestElements(e[0],e[1],!0,!0),r=q[0];if(null!=r&&(r.activate(),a.touchData.start=r,a.touchData.starts=q,a.nodeIsGrabbable(r))){var v=a.dragData.touchDragEles=[];if(a.redrawHint("eles",!0),a.redrawHint("drag",!0),r.selected()){var w=d.$(function(){return this.selected()&&a.nodeIsGrabbable(this)});s(w,{addToList:v})}else t(r,{addToList:v});o(r),r.trigger(new i(c,{type:"grab",cyPosition:{x:e[0],y:e[1]}}))}b(r,["touchstart","tapstart","vmousedown"],c,{cyPosition:{x:e[0],y:e[1]}}),null==r&&(a.data.bgActivePosistion={x:g[0],y:g[1]},a.redrawHint("select",!0),a.redraw()),a.touchData.singleTouchMoved=!1,a.touchData.singleTouchStartTime=+new Date,clearTimeout(a.touchData.tapholdTimeout),a.touchData.tapholdTimeout=setTimeout(function(){a.touchData.singleTouchMoved!==!1||a.pinching||a.touchData.selecting||(b(a.touchData.start,["taphold"],c,{cyPosition:{x:e[0],y:e[1]}}),a.touchData.start||d.$(":selected").unselect())},a.tapholdDuration)}if(c.touches.length>=1){for(var x=a.touchData.startPosition=[],y=0;y<e.length;y++)x[y]=f[y]=e[y];var z=c.touches[0];a.touchData.startGPosition=[z.clientX,z.clientY]}}},!1);var T;a.registerBinding(d,"touchmove",T=function(c){var d=a.touchData.capture;if(d||B(c)){var g=a.selection,j=a.cy,k=a.touchData.now,l=a.touchData.earlier,m=j.zoom();if(c.touches[0]){var n=a.projectIntoViewport(c.touches[0].clientX,c.touches[0].clientY);k[0]=n[0],k[1]=n[1]}if(c.touches[1]){var n=a.projectIntoViewport(c.touches[1].clientX,c.touches[1].clientY);k[2]=n[0],k[3]=n[1]}if(c.touches[2]){var n=a.projectIntoViewport(c.touches[2].clientX,c.touches[2].clientY);k[4]=n[0],k[5]=n[1]}var o,p=a.touchData.startGPosition;if(d&&c.touches[0]&&p){for(var q=[],r=0;r<k.length;r++)q[r]=k[r]-l[r];var t=c.touches[0].clientX-p[0],v=t*t,w=c.touches[0].clientY-p[1],x=w*w,y=v+x;o=y>=a.touchTapThreshold2}if(d&&a.touchData.cxt){c.preventDefault();var z=c.touches[0].clientX-L,A=c.touches[0].clientY-M,C=c.touches[1].clientX-L,J=c.touches[1].clientY-M,N=S(z,A,C,J),O=N/I,Q=150,T=Q*Q,U=1.5,V=U*U;if(O>=V||N>=T){a.touchData.cxt=!1,a.data.bgActivePosistion=void 0,a.redrawHint("select",!0);var W=new i(c,{type:"cxttapend",cyPosition:{x:k[0],y:k[1]}});a.touchData.start?(a.touchData.start.unactivate().trigger(W),a.touchData.start=null):j.trigger(W)}}if(d&&a.touchData.cxt){var W=new i(c,{type:"cxtdrag",cyPosition:{x:k[0],y:k[1]}});a.data.bgActivePosistion=void 0,a.redrawHint("select",!0),a.touchData.start?a.touchData.start.trigger(W):j.trigger(W),a.touchData.start&&(a.touchData.start._private.grabbed=!1),a.touchData.cxtDragged=!0;var X=a.findNearestElement(k[0],k[1],!0,!0);a.touchData.cxtOver&&X===a.touchData.cxtOver||(a.touchData.cxtOver&&a.touchData.cxtOver.trigger(new i(c,{type:"cxtdragout",cyPosition:{x:k[0],y:k[1]}})),a.touchData.cxtOver=X,X&&X.trigger(new i(c,{type:"cxtdragover",cyPosition:{x:k[0],y:k[1]}})))}else if(d&&c.touches[2]&&j.boxSelectionEnabled())c.preventDefault(),a.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,a.touchData.selecting||j.trigger("boxstart"),a.touchData.selecting=!0,a.redrawHint("select",!0),g&&0!==g.length&&void 0!==g[0]?(g[2]=(k[0]+k[2]+k[4])/3,g[3]=(k[1]+k[3]+k[5])/3):(g[0]=(k[0]+k[2]+k[4])/3,g[1]=(k[1]+k[3]+k[5])/3,g[2]=(k[0]+k[2]+k[4])/3+1,g[3]=(k[1]+k[3]+k[5])/3+1),g[4]=1,a.touchData.selecting=!0,a.redraw();else if(d&&c.touches[1]&&j.zoomingEnabled()&&j.panningEnabled()&&j.userZoomingEnabled()&&j.userPanningEnabled()){c.preventDefault(),a.data.bgActivePosistion=void 0,a.redrawHint("select",!0);var Y=a.dragData.touchDragEles;if(Y){a.redrawHint("drag",!0);for(var Z=0;Z<Y.length;Z++){var $=Y[Z]._private;$.grabbed=!1,$.rscratch.inDragLayer=!1}}var z=c.touches[0].clientX-L,A=c.touches[0].clientY-M,C=c.touches[1].clientX-L,J=c.touches[1].clientY-M,_=R(z,A,C,J),aa=_/H;if(P){var ba=z-D,ca=A-E,da=C-F,ea=J-G,fa=(ba+da)/2,ga=(ca+ea)/2,ha=j.zoom(),ia=ha*aa,ja=j.pan(),ka=K[0]*ha+ja.x,la=K[1]*ha+ja.y,ma={x:-ia/ha*(ka-ja.x-fa)+ka,y:-ia/ha*(la-ja.y-ga)+la};if(a.touchData.start&&a.touchData.start.active()){var Y=a.dragData.touchDragEles;u(Y),a.redrawHint("drag",!0),a.redrawHint("eles",!0),a.touchData.start.unactivate().trigger("free")}j.viewport({zoom:ia,pan:ma,cancelOnFailedZoom:!0}),H=_,D=z,E=A,F=C,G=J,a.pinching=!0}if(c.touches[0]){var n=a.projectIntoViewport(c.touches[0].clientX,c.touches[0].clientY);k[0]=n[0],k[1]=n[1]}if(c.touches[1]){var n=a.projectIntoViewport(c.touches[1].clientX,c.touches[1].clientY);k[2]=n[0],k[3]=n[1]}if(c.touches[2]){var n=a.projectIntoViewport(c.touches[2].clientX,c.touches[2].clientY);k[4]=n[0],k[5]=n[1]}}else if(c.touches[0]){var X,na=a.touchData.start,oa=a.touchData.last;if(a.hoverData.draggingEles||a.swipePanning||(X=a.findNearestElement(k[0],k[1],!0,!0)),d&&null!=na&&c.preventDefault(),d&&null!=na&&a.nodeIsDraggable(na))if(o){var Y=a.dragData.touchDragEles,pa=!a.dragData.didDrag;pa&&s(j.collection(Y),{inDragLayer:!0});for(var qa=0;qa<Y.length;qa++){var ra=Y[qa];if(a.nodeIsDraggable(ra)&&ra.grabbed()){a.dragData.didDrag=!0;var sa=ra._private.position,ta=!ra.isParent();if(ta&&f.number(q[0])&&f.number(q[1])&&(sa.x+=q[0],sa.y+=q[1]),pa){a.redrawHint("eles",!0);var ua=a.touchData.dragDelta;ta&&ua&&f.number(ua[0])&&f.number(ua[1])&&(sa.x+=ua[0],sa.y+=ua[1])}}}var va=j.collection(Y);va.updateCompoundBounds(),va.trigger("position drag"),a.hoverData.draggingEles=!0,a.redrawHint("drag",!0),a.touchData.startPosition[0]==l[0]&&a.touchData.startPosition[1]==l[1]&&a.redrawHint("eles",!0),a.redraw()}else{var ua=a.touchData.dragDelta=a.touchData.dragDelta||[];0===ua.length?(ua.push(q[0]),ua.push(q[1])):(ua[0]+=q[0],ua[1]+=q[1])}if(b(na||X,["touchmove","tapdrag","vmousemove"],c,{cyPosition:{x:k[0],y:k[1]}}),na&&na.grabbed()||X==oa||(oa&&oa.trigger(new i(c,{type:"tapdragout",cyPosition:{x:k[0],y:k[1]}})),X&&X.trigger(new i(c,{type:"tapdragover",cyPosition:{x:k[0],y:k[1]}}))),a.touchData.last=X,d)for(var Z=0;Z<k.length;Z++)k[Z]&&a.touchData.startPosition[Z]&&o&&(a.touchData.singleTouchMoved=!0);if(d&&(null==na||na.isEdge())&&j.panningEnabled()&&j.userPanningEnabled()){var wa=e(na,a.touchData.starts);wa&&(c.preventDefault(),a.swipePanning?j.panBy({x:q[0]*m,y:q[1]*m}):o&&(a.swipePanning=!0,j.panBy({x:t*m,y:w*m}),na&&(na.unactivate(),a.data.bgActivePosistion||(a.data.bgActivePosistion=h.array2point(a.touchData.startPosition)),a.redrawHint("select",!0),a.touchData.start=null)));var n=a.projectIntoViewport(c.touches[0].clientX,c.touches[0].clientY);k[0]=n[0],k[1]=n[1]}}for(var r=0;r<k.length;r++)l[r]=k[r]}},!1);var U;a.registerBinding(d,"touchcancel",U=function(b){var c=a.touchData.start;a.touchData.capture=!1,c&&c.unactivate()});var V;if(a.registerBinding(d,"touchend",V=function(c){var d=a.touchData.start,e=a.touchData.capture;if(e){a.touchData.capture=!1,c.preventDefault();var f=a.selection;a.swipePanning=!1,a.hoverData.draggingEles=!1;var g=a.cy,h=g.zoom(),j=a.touchData.now,k=a.touchData.earlier;if(c.touches[0]){var l=a.projectIntoViewport(c.touches[0].clientX,c.touches[0].clientY);j[0]=l[0],j[1]=l[1]}if(c.touches[1]){var l=a.projectIntoViewport(c.touches[1].clientX,c.touches[1].clientY);j[2]=l[0],j[3]=l[1]}if(c.touches[2]){var l=a.projectIntoViewport(c.touches[2].clientX,c.touches[2].clientY);j[4]=l[0],j[5]=l[1]}d&&d.unactivate();var m;if(a.touchData.cxt){if(m=new i(c,{type:"cxttapend",cyPosition:{x:j[0],y:j[1]}}),d?d.trigger(m):g.trigger(m),!a.touchData.cxtDragged){var n=new i(c,{type:"cxttap",cyPosition:{x:j[0],y:j[1]}});d?d.trigger(n):g.trigger(n)}return a.touchData.start&&(a.touchData.start._private.grabbed=!1),a.touchData.cxt=!1,a.touchData.start=null,void a.redraw()}if(!c.touches[2]&&g.boxSelectionEnabled()&&a.touchData.selecting){a.touchData.selecting=!1;var o=g.collection(a.getAllInBox(f[0],f[1],f[2],f[3]));f[0]=void 0,f[1]=void 0,f[2]=void 0,f[3]=void 0,f[4]=0,a.redrawHint("select",!0),g.trigger("boxend");var p=function(a){return a.selectable()&&!a.selected()};o.trigger("box").stdFilter(p).select().trigger("boxselect"),o.nonempty()&&a.redrawHint("eles",!0),a.redraw()}if(null!=d&&d.unactivate(),c.touches[2])a.data.bgActivePosistion=void 0,a.redrawHint("select",!0);else if(c.touches[1]);else if(c.touches[0]);else if(!c.touches[0]){a.data.bgActivePosistion=void 0,a.redrawHint("select",!0);var q=a.dragData.touchDragEles;if(null!=d){var r=d._private.grabbed;u(q),a.redrawHint("drag",!0),a.redrawHint("eles",!0),r&&d.trigger("free"),b(d,["touchend","tapend","vmouseup","tapdragout"],c,{cyPosition:{x:j[0],y:j[1]}}),d.unactivate(),a.touchData.start=null}else{var s=a.findNearestElement(j[0],j[1],!0,!0);b(s,["touchend","tapend","vmouseup","tapdragout"],c,{cyPosition:{x:j[0],y:j[1]}})}var t=a.touchData.startPosition[0]-j[0],v=t*t,w=a.touchData.startPosition[1]-j[1],x=w*w,y=v+x,z=y*h*h;null!=d&&!a.dragData.didDrag&&d._private.selectable&&z<a.touchTapThreshold2&&!a.pinching&&("single"===g.selectionType()?(g.$(":selected").unmerge(d).unselect(),d.select()):d.selected()?d.unselect():d.select(),a.redrawHint("eles",!0)),a.touchData.singleTouchMoved||b(d,["tap","vclick"],c,{cyPosition:{x:j[0],y:j[1]}}),a.touchData.singleTouchMoved=!0}for(var A=0;A<j.length;A++)k[A]=j[A];a.dragData.didDrag=!1,0===c.touches.length&&(a.touchData.dragDelta=[],a.touchData.startPosition=null,a.touchData.startGPosition=null),c.touches.length<2&&(a.pinching=!1,a.redrawHint("eles",!0),a.redraw())}},!1),"undefined"==typeof TouchEvent){var W=[],X=function(a){return{clientX:a.clientX,clientY:a.clientY,force:1,identifier:a.pointerId,pageX:a.pageX,pageY:a.pageY,radiusX:a.width/2,radiusY:a.height/2,screenX:a.screenX,screenY:a.screenY,target:a.target}},Y=function(a){return{event:a,touch:X(a)}},Z=function(a){W.push(Y(a))},$=function(a){for(var b=0;b<W.length;b++){var c=W[b];if(c.event.pointerId===a.pointerId)return void W.splice(b,1)}},_=function(a){var b=W.filter(function(b){return b.event.pointerId===a.pointerId})[0];b.event=a,b.touch=X(a)},aa=function(a){a.touches=W.map(function(a){return a.touch})};a.registerBinding(a.container,"pointerdown",function(a){"mouse"!==a.pointerType&&(a.preventDefault(),Z(a),aa(a),Q(a))}),a.registerBinding(a.container,"pointerup",function(a){"mouse"!==a.pointerType&&($(a),aa(a),V(a))}),a.registerBinding(a.container,"pointercancel",function(a){"mouse"!==a.pointerType&&($(a),aa(a),U(a))}),a.registerBinding(a.container,"pointermove",function(a){"mouse"!==a.pointerType&&(a.preventDefault(),_(a),aa(a),T(a))})}},b.exports=j},{"../../../event":45,"../../../is":83,"../../../math":85,"../../../util":100,"../../../window":107}],62:[function(a,b,c){"use strict";var d=a("../../../math"),e={};e.generatePolygon=function(a,b){return this.nodeShapes[a]={renderer:this,name:a,points:b,draw:function(a,b,c,d,e){this.renderer.nodeShapeImpl("polygon",a,b,c,d,e,this.points)},intersectLine:function(a,b,c,e,f,g,h){return d.polygonIntersectLine(f,g,this.points,a,b,c/2,e/2,h)},checkPoint:function(a,b,c,e,f,g,h){return d.pointInsidePolygon(a,b,this.points,g,h,e,f,[0,-1],c)}}},e.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(a,b,c,d,e){this.renderer.nodeShapeImpl(this.name,a,b,c,d,e)},intersectLine:function(a,b,c,e,f,g,h){return d.intersectLineEllipse(f,g,a,b,c/2+h,e/2+h)},checkPoint:function(a,b,c,d,e,f,g){return a-=f,b-=g,a/=d/2+c,b/=e/2+c,a*a+b*b<=1}}},e.generateRoundRectangle=function(){return this.nodeShapes.roundrectangle={renderer:this,name:"roundrectangle",points:d.generateUnitNgonPointsFitToSquare(4,0),draw:function(a,b,c,d,e){this.renderer.nodeShapeImpl(this.name,a,b,c,d,e)},intersectLine:function(a,b,c,e,f,g,h){return d.roundRectangleIntersectLine(f,g,a,b,c,e,h)},checkPoint:function(a,b,c,e,f,g,h){var i=d.getRoundRectangleRadius(e,f);if(d.pointInsidePolygon(a,b,this.points,g,h,e,f-2*i,[0,-1],c))return!0;if(d.pointInsidePolygon(a,b,this.points,g,h,e-2*i,f,[0,-1],c))return!0;var j=function(a,b,c,d,e,f,g){return a-=c,b-=d,a/=e/2+g,b/=f/2+g,a*a+b*b<=1};return!!j(a,b,g-e/2+i,h-f/2+i,2*i,2*i,c)||(!!j(a,b,g+e/2-i,h-f/2+i,2*i,2*i,c)||(!!j(a,b,g+e/2-i,h+f/2-i,2*i,2*i,c)||!!j(a,b,g-e/2+i,h+f/2-i,2*i,2*i,c)))}}},e.registerNodeShapes=function(){var a=this.nodeShapes={},b=this;this.generateEllipse(),this.generatePolygon("triangle",d.generateUnitNgonPointsFitToSquare(3,0)),this.generatePolygon("rectangle",d.generateUnitNgonPointsFitToSquare(4,0)),a.square=a.rectangle,this.generateRoundRectangle(),this.generatePolygon("diamond",[0,1,1,0,0,-1,-1,0]),this.generatePolygon("pentagon",d.generateUnitNgonPointsFitToSquare(5,0)),this.generatePolygon("hexagon",d.generateUnitNgonPointsFitToSquare(6,0)),this.generatePolygon("heptagon",d.generateUnitNgonPointsFitToSquare(7,0)),this.generatePolygon("octagon",d.generateUnitNgonPointsFitToSquare(8,0));var c=new Array(20),e=d.generateUnitNgonPoints(5,0),f=d.generateUnitNgonPoints(5,Math.PI/5),g=.5*(3-Math.sqrt(5));g*=1.57;for(var h=0;h<f.length/2;h++)f[2*h]*=g,f[2*h+1]*=g;for(var h=0;h<5;h++)c[4*h]=e[2*h],c[4*h+1]=e[2*h+1],c[4*h+2]=f[2*h],c[4*h+3]=f[2*h+1];c=d.fitPolygonToSquare(c),this.generatePolygon("star",c),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),a.makePolygon=function(a){var c,d=a.join("$"),e="polygon-"+d;return(c=this[e])?c:b.generatePolygon(e,a)}},b.exports=e},{"../../../math":85}],63:[function(a,b,c){"use strict";var d=a("../../../util"),e={};e.timeToRender=function(){return this.redrawTotalTime/this.redrawCount},e.redraw=function(a){a=a||d.staticEmptyObject();var b=this;void 0===b.averageRedrawTime&&(b.averageRedrawTime=0),void 0===b.lastRedrawTime&&(b.lastRedrawTime=0),void 0===b.lastDrawTime&&(b.lastDrawTime=0),b.requestedFrame=!0,b.renderOptions=a},e.beforeRender=function(a,b){if(!this.destroyed){b=b||0;var c=this.beforeRenderCallbacks;c.push({fn:a,priority:b}),c.sort(function(a,b){return b.priority-a.priority})}};var f=function(a,b,c){for(var d=a.beforeRenderCallbacks,e=0;e<d.length;e++)d[e].fn(b,c)};e.startRenderLoop=function(){var a=this;if(!a.renderLoopStarted){a.renderLoopStarted=!0;var b=function(c){if(!a.destroyed){if(a.requestedFrame&&!a.skipFrame){f(a,!0,c);var e=d.performanceNow();a.render(a.renderOptions);var g=a.lastDrawTime=d.performanceNow();void 0===a.averageRedrawTime&&(a.averageRedrawTime=g-e),void 0===a.redrawCount&&(a.redrawCount=0),a.redrawCount++,void 0===a.redrawTotalTime&&(a.redrawTotalTime=0);var h=g-e;a.redrawTotalTime+=h,a.lastRedrawTime=h,a.averageRedrawTime=a.averageRedrawTime/2+h/2,a.requestedFrame=!1}else f(a,!1,c);a.skipFrame=!1,d.requestAnimationFrame(b)}};d.requestAnimationFrame(b)}},b.exports=e},{"../../../util":100}],64:[function(a,b,c){"use strict";var d,e={};e.arrowShapeImpl=function(a){return(d||(d={polygon:function(a,b){for(var c=0;c<b.length;c++){var d=b[c];a.lineTo(d.x,d.y)}},"triangle-backcurve":function(a,b,c){for(var d,e=0;e<b.length;e++){var f=b[e];0===e&&(d=f),a.lineTo(f.x,f.y)}a.quadraticCurveTo(c.x,c.y,d.x,d.y)},"triangle-tee":function(a,b,c){a.beginPath&&a.beginPath();for(var d=b,e=0;e<d.length;e++){var f=d[e];a.lineTo(f.x,f.y)}a.closePath&&a.closePath(),a.beginPath&&a.beginPath();var g=c,h=c[0];a.moveTo(h.x,h.y);for(var e=0;e<g.length;e++){var f=g[e];a.lineTo(f.x,f.y)}a.closePath&&a.closePath()},circle:function(a,b,c,d){a.arc(b,c,d,0,2*Math.PI,!1)}}))[a]},b.exports=e},{}],65:[function(a,b,c){"use strict";var d={};d.drawEdge=function(a,b,c,d,e){var f=b._private.rscratch,g=this.usePaths();if(!f.badLine&&!isNaN(f.allpts[0])&&b.visible()){var h;c&&(h=c,a.translate(-h.x1,-h.y1));var i=b.pstyle("overlay-padding").pfValue,j=b.pstyle("overlay-opacity").value,k=b.pstyle("overlay-color").value;if(e){if(0===j)return;this.strokeStyle(a,k[0],k[1],k[2],j),a.lineCap="round","self"!=f.edgeType||g||(a.lineCap="butt")}else{var l=b.pstyle("line-color").value;this.strokeStyle(a,l[0],l[1],l[2],b.pstyle("opacity").value),a.lineCap="butt"}a.lineJoin="round";var m=b.pstyle("width").pfValue+(e?2*i:0),n=e?"solid":b.pstyle("line-style").value;a.lineWidth=m;var o=b.pstyle("shadow-blur").pfValue,p=b.pstyle("shadow-opacity").value,q=b.pstyle("shadow-color").value,r=b.pstyle("shadow-offset-x").pfValue,s=b.pstyle("shadow-offset-y").pfValue;this.shadowStyle(a,q,e?0:p,o,r,s),this.drawEdgePath(b,a,f.allpts,n,m),this.drawArrowheads(a,b,e),this.shadowStyle(a,"transparent",0),e||this.drawEdge(a,b,!1,d,!0),this.drawElementText(a,b,d),c&&a.translate(h.x1,h.y1)}},d.drawEdgePath=function(a,b,c,d,e){var f,g=a._private.rscratch,h=b,i=!1,j=this.usePaths();if(j){var k=c.join("$"),l=g.pathCacheKey&&g.pathCacheKey===k;l?(f=b=g.pathCache,i=!0):(f=b=new Path2D,g.pathCacheKey=k,g.pathCache=f)}if(h.setLineDash)switch(d){case"dotted":h.setLineDash([1,1]);break;case"dashed":h.setLineDash([6,3]);break;case"solid":h.setLineDash([])}if(!i&&!g.badLine)switch(b.beginPath&&b.beginPath(),b.moveTo(c[0],c[1]),g.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var m=2;m+3<c.length;m+=4)b.quadraticCurveTo(c[m],c[m+1],c[m+2],c[m+3]);break;case"straight":case"segments":case"haystack":for(var m=2;m+1<c.length;m+=2)b.lineTo(c[m],c[m+1])}b=h,j?b.stroke(f):b.stroke(),b.setLineDash&&b.setLineDash([])},d.drawArrowheads=function(a,b,c){if(!c){var d=b._private.rscratch,e="haystack"===d.edgeType;e||this.drawArrowhead(a,b,"source",d.arrowStartX,d.arrowStartY,d.srcArrowAngle),this.drawArrowhead(a,b,"mid-target",d.midX,d.midY,d.midtgtArrowAngle),this.drawArrowhead(a,b,"mid-source",d.midX,d.midY,d.midsrcArrowAngle),e||this.drawArrowhead(a,b,"target",d.arrowEndX,d.arrowEndY,d.tgtArrowAngle)}},d.drawArrowhead=function(a,b,c,d,e,f){if(!(isNaN(d)||null==d||isNaN(e)||null==e||isNaN(f)||null==f)){var g=this,h=b.pstyle(c+"-arrow-shape").value;if("none"!==h){var i=a.globalCompositeOperation,j="hollow"===b.pstyle(c+"-arrow-fill").value?"both":"filled",k=b.pstyle(c+"-arrow-fill").value,l=b.pstyle("opacity").value;"half-triangle-overshot"===h&&(k="hollow",j="hollow"),1===l&&"hollow"!==k||(a.globalCompositeOperation="destination-out",g.fillStyle(a,255,255,255,1),g.strokeStyle(a,255,255,255,1),g.drawArrowShape(b,c,a,j,b.pstyle("width").pfValue,b.pstyle(c+"-arrow-shape").value,d,e,f),a.globalCompositeOperation=i);var m=b.pstyle(c+"-arrow-color").value;g.fillStyle(a,m[0],m[1],m[2],l),g.strokeStyle(a,m[0],m[1],m[2],l),g.drawArrowShape(b,c,a,k,b.pstyle("width").pfValue,b.pstyle(c+"-arrow-shape").value,d,e,f)}}},d.drawArrowShape=function(a,b,c,d,e,f,g,h,i){var j,k=this,l=this.usePaths(),m=a._private.rscratch,n=!1,o=c,p={x:g,y:h},q=this.getArrowWidth(e),r=k.arrowShapes[f];if(l){var s=q+"$"+f+"$"+i+"$"+g+"$"+h;m.arrowPathCacheKey=m.arrowPathCacheKey||{},m.arrowPathCache=m.arrowPathCache||{};var t=m.arrowPathCacheKey[b]===s;t?(j=c=m.arrowPathCache[b],n=!0):(j=c=new Path2D,m.arrowPathCacheKey[b]=s,m.arrowPathCache[b]=j)}c.beginPath&&c.beginPath(),n||r.draw(c,q,i,p),!r.leavePathOpen&&c.closePath&&c.closePath(),c=o,"filled"!==d&&"both"!==d||(l?c.fill(j):c.fill()),"hollow"!==d&&"both"!==d||(c.lineWidth=r.matchEdgeWidth?e:1,c.lineJoin="miter",l?c.stroke(j):c.stroke())},b.exports=d},{}],66:[function(a,b,c){"use strict";var d=a("../../../math"),e={};e.drawElement=function(a,b,c,d){var e=this;b.isNode()?e.drawNode(a,b,c,d):e.drawEdge(a,b,c,d)},e.drawCachedElement=function(a,b,c,e){var f=this,g=b.boundingBox();if(0!==g.w&&0!==g.h&&(!e||d.boundingBoxesIntersect(g,e))){var h=f.data.eleTxrCache.getElement(b,g,c);h?a.drawImage(h.texture.canvas,h.x,0,h.width,h.height,g.x1,g.y1,g.w,g.h):f.drawElement(a,b)}},e.drawElements=function(a,b){for(var c=this,d=0;d<b.length;d++){var e=b[d];c.drawElement(a,e)}},e.drawCachedElements=function(a,b,c,d){for(var e=this,f=0;f<b.length;f++){var g=b[f];e.drawCachedElement(a,g,c,d)}},e.drawCachedNodes=function(a,b,c,d){for(var e=this,f=0;f<b.length;f++){var g=b[f];g.isNode()&&e.drawCachedElement(a,g,c,d)}},e.drawLayeredElements=function(a,b,c,d){var e=this,f=e.data.lyrTxrCache.getLayers(b,c);if(f)for(var g=0;g<f.length;g++){var h=f[g],i=h.bb;0!==i.w&&0!==i.h&&a.drawImage(h.canvas,i.x1,i.y1,i.w,i.h)}else e.drawCachedElements(a,b,c,d)},b.exports=e},{"../../../math":85}],67:[function(a,b,c){"use strict";var d={};d.safeDrawImage=function(a,b,c,d,e,f,g,h,i,j){var k=this;try{a.drawImage(b,c,d,e,f,g,h,i,j)}catch(l){k.redrawHint("eles",!0),k.redrawHint("drag",!0),k.drawingImage=!0,k.redraw()}},d.drawInscribedImage=function(a,b,c){var d=this,e=c._private.position.x,f=c._private.position.y,g=c.pstyle("background-fit").value,h=c.pstyle("background-position-x"),i=c.pstyle("background-position-y"),j=c.pstyle("background-repeat").value,k=c.width(),l=c.height(),m=c._private.rscratch,n=c.pstyle("background-clip").value,o="node"===n,p=c.pstyle("background-image-opacity").value,q=b.width||b.cachedW,r=b.height||b.cachedH;null!=q&&null!=r||(document.body.appendChild(b),q=b.cachedW=b.width||b.offsetWidth,r=b.cachedH=b.height||b.offsetHeight,document.body.removeChild(b));var s=q,t=r,u=c.pstyle("background-width");"auto"!==u.value&&(s="%"===u.units?u.value/100*k:u.pfValue);var v=c.pstyle("background-height");if("auto"!==v.value&&(t="%"===v.units?v.value/100*l:v.pfValue),0!==s&&0!==t){if("contain"===g){var w=Math.min(k/s,l/t);s*=w,t*=w}else if("cover"===g){var w=Math.max(k/s,l/t);s*=w,t*=w}var x=e-k/2;x+="%"===h.units?(k-s)*h.value/100:h.pfValue;var y=f-l/2;y+="%"===i.units?(l-t)*i.value/100:i.pfValue,m.pathCache&&(x-=e,y-=f,e=0,f=0);var z=a.globalAlpha;if(a.globalAlpha=p,"no-repeat"===j)o&&(a.save(),m.pathCache?a.clip(m.pathCache):(d.nodeShapes[d.getNodeShape(c)].draw(a,e,f,k,l),a.clip())),d.safeDrawImage(a,b,0,0,q,r,x,y,s,t),o&&a.restore();else{var A=a.createPattern(b,j);a.fillStyle=A,d.nodeShapes[d.getNodeShape(c)].draw(a,e,f,k,l),a.translate(x,y),a.fill(),a.translate(-x,-y)}a.globalAlpha=z}},b.exports=d},{}],68:[function(a,b,c){"use strict";function d(a,b,c,d,e,f){var f=f||5;a.beginPath(),a.moveTo(b+f,c),a.lineTo(b+d-f,c),a.quadraticCurveTo(b+d,c,b+d,c+f),a.lineTo(b+d,c+e-f),a.quadraticCurveTo(b+d,c+e,b+d-f,c+e),a.lineTo(b+f,c+e),a.quadraticCurveTo(b,c+e,b,c+e-f),a.lineTo(b,c+f),a.quadraticCurveTo(b,c,b+f,c),a.closePath(),a.fill()}var e=a("../../../util"),f=a("../../../math"),g={};g.eleTextBiggerThanMin=function(a,b){if(!b){var c=a.cy().zoom(),d=this.getPixelRatio(),e=Math.ceil(f.log2(c*d));b=Math.pow(2,e)}var g=a.pstyle("font-size").pfValue*b,h=a.pstyle("min-zoomed-font-size").pfValue;return!(g<h)},g.drawElementText=function(a,b,c){var d=this;if(void 0===c){if(!d.eleTextBiggerThanMin(b))return}else if(!c)return;if(b.isNode()){var e=b.pstyle("label");if(!e||!e.value)return;var f=b.pstyle("text-halign").strValue;b.pstyle("text-valign").strValue;switch(f){case"left":a.textAlign="right";break;case"right":a.textAlign="left";break;default:a.textAlign="center"}a.textBaseline="bottom"}else{var e=b.pstyle("label"),g=b.pstyle("source-label"),h=b.pstyle("target-label");if(!(e&&e.value||g&&g.value||h&&h.value))return;a.textAlign="center",a.textBaseline="bottom"}d.drawText(a,b),b.isEdge()&&(d.drawText(a,b,"source"),d.drawText(a,b,"target"))},g.drawNodeText=g.drawEdgeText=g.drawElementText,g.getFontCache=function(a){var b;this.fontCaches=this.fontCaches||[];for(var c=0;c<this.fontCaches.length;c++)if(b=this.fontCaches[c],b.context===a)return b;return b={context:a},this.fontCaches.push(b),b},g.setupTextStyle=function(a,b){var c=b.effectiveOpacity(),d=b.pstyle("font-style").strValue,e=b.pstyle("font-size").pfValue+"px",f=b.pstyle("font-family").strValue,g=b.pstyle("font-weight").strValue,h=b.pstyle("text-opacity").value*b.pstyle("opacity").value*c,i=b.pstyle("text-outline-opacity").value*h,j=b.pstyle("color").value,k=b.pstyle("text-outline-color").value,l=b.pstyle("text-shadow-blur").pfValue,m=b.pstyle("text-shadow-opacity").value,n=b.pstyle("text-shadow-color").value,o=b.pstyle("text-shadow-offset-x").pfValue,p=b.pstyle("text-shadow-offset-y").pfValue,q=b._private.fontKey,r=this.getFontCache(a);r.key!==q&&(a.font=d+" "+g+" "+e+" "+f,r.key=q),a.lineJoin="round",this.fillStyle(a,j[0],j[1],j[2],h),this.strokeStyle(a,k[0],k[1],k[2],i),this.shadowStyle(a,n,m,l,o,p)},g.drawText=function(a,b,c){var f=b._private,g=f.rscratch,h=b.effectiveOpacity();if(0!==h&&0!==b.pstyle("text-opacity").value){var i=e.getPrefixedProperty(g,"labelX",c),j=e.getPrefixedProperty(g,"labelY",c),k=this.getLabelText(b,c);if(null!=k&&""!==k&&!isNaN(i)&&!isNaN(j)){this.setupTextStyle(a,b);var l=c?c+"-":"",m=e.getPrefixedProperty(g,"labelWidth",c),n=e.getPrefixedProperty(g,"labelHeight",c),o=e.getPrefixedProperty(g,"labelAngle",c),p=b.pstyle(l+"text-margin-x").pfValue,q=b.pstyle(l+"text-margin-y").pfValue,r=b.isEdge(),s=(b.isNode(),b.pstyle("text-halign").value),t=b.pstyle("text-valign").value;r&&(s="center",t="center"),i+=p,j+=q;var u,v=b.pstyle("text-rotation");if(u="autorotate"===v.strValue?r?o:0:"none"===v.strValue?0:v.pfValue,0!==u){var w=i,x=j;a.translate(w,x),a.rotate(u),i=0,j=0}switch(t){case"top":break;case"center":j+=n/2;break;case"bottom":j+=n}var y=b.pstyle("text-background-opacity").value,z=b.pstyle("text-border-opacity").value,A=b.pstyle("text-border-width").pfValue;if(y>0||A>0&&z>0){var B=i;switch(s){case"left":B-=m;break;case"center":B-=m/2;break;case"right":}var C=j-n;if(y>0){var D=a.fillStyle,E=b.pstyle("text-background-color").value;a.fillStyle="rgba("+E[0]+","+E[1]+","+E[2]+","+y*h+")";var F=b.pstyle("text-background-shape").strValue;"roundrectangle"==F?d(a,B,C,m,n,2):a.fillRect(B,C,m,n),a.fillStyle=D}if(A>0&&z>0){var G=a.strokeStyle,H=a.lineWidth,I=b.pstyle("text-border-color").value,J=b.pstyle("text-border-style").value;if(a.strokeStyle="rgba("+I[0]+","+I[1]+","+I[2]+","+z*h+")",a.lineWidth=A,a.setLineDash)switch(J){case"dotted":a.setLineDash([1,1]);break;case"dashed":a.setLineDash([4,2]);break;case"double":a.lineWidth=A/4,a.setLineDash([]);break;case"solid":a.setLineDash([])}if(a.strokeRect(B,C,m,n),"double"===J){var K=A/2;a.strokeRect(B+K,C+K,m-2*K,n-2*K)}a.setLineDash&&a.setLineDash([]),a.lineWidth=H,a.strokeStyle=G}}var L=2*b.pstyle("text-outline-width").pfValue;if(L>0&&(a.lineWidth=L),"wrap"===b.pstyle("text-wrap").value){var M=e.getPrefixedProperty(g,"labelWrapCachedLines",c),N=n/M.length;switch(t){case"top":j-=(M.length-1)*N;break;case"center":case"bottom":j-=(M.length-1)*N}for(var O=0;O<M.length;O++)L>0&&a.strokeText(M[O],i,j),a.fillText(M[O],i,j),j+=N}else L>0&&a.strokeText(k,i,j),a.fillText(k,i,j);0!==u&&(a.rotate(-u),a.translate(-w,-x)),this.shadowStyle(a,"transparent",0)}}},b.exports=g},{"../../../math":85,"../../../util":100}],69:[function(a,b,c){"use strict";var d=a("../../../is"),e={};e.drawNode=function(a,b,c,e){var f,g,h=this,i=b._private.rscratch,j=b._private,k=k||j.position;if(d.number(k.x)&&d.number(k.y)&&b.visible()){var l,m=b.effectiveOpacity(),n=this.usePaths(),o=!1,p=b.pstyle("padding").pfValue;f=b.width()+2*p,g=b.height()+2*p,a.lineWidth=b.pstyle("border-width").pfValue;var q;c&&(q=c,a.translate(-q.x1,-q.y1));var r,s=b.pstyle("background-image"),t=s.value[2]||s.value[1];
if(void 0!==t){var u=b.pstyle("background-image-crossorigin").value;r=this.getCachedImage(t,u,function(){b.trigger("background"),h.redrawHint("eles",!0),h.redrawHint("drag",!0),h.drawingImage=!0,h.redraw()});var v=j.backgrounding;j.backgrounding=!r.complete,v!==j.backgrounding&&b.updateStyle(!1)}var w=b.pstyle("background-color").value,x=b.pstyle("border-color").value,y=b.pstyle("border-style").value;this.fillStyle(a,w[0],w[1],w[2],b.pstyle("background-opacity").value*m),this.strokeStyle(a,x[0],x[1],x[2],b.pstyle("border-opacity").value*m);var z=b.pstyle("shadow-blur").pfValue,A=b.pstyle("shadow-opacity").value,B=b.pstyle("shadow-color").value,C=b.pstyle("shadow-offset-x").pfValue,D=b.pstyle("shadow-offset-y").pfValue;if(this.shadowStyle(a,B,A,z,C,D),a.lineJoin="miter",a.setLineDash)switch(y){case"dotted":a.setLineDash([1,1]);break;case"dashed":a.setLineDash([4,2]);break;case"solid":case"double":a.setLineDash([])}var E=b.pstyle("shape").strValue,F=b.pstyle("shape-polygon-points").pfValue;if(n){var G=E+"$"+f+"$"+g+("polygon"===E?"$"+F.join("$"):"");a.translate(k.x,k.y),i.pathCacheKey===G?(l=i.pathCache,o=!0):(l=new Path2D,i.pathCacheKey=G,i.pathCache=l)}if(!o){var H=k;n&&(H={x:0,y:0}),h.nodeShapes[this.getNodeShape(b)].draw(l||a,H.x,H.y,f,g)}n?a.fill(l):a.fill(),this.shadowStyle(a,"transparent",0),void 0!==t&&r.complete&&this.drawInscribedImage(a,r,b);var I=b.pstyle("background-blacken").value,J=b.pstyle("border-width").pfValue;if(this.hasPie(b)&&(this.drawPie(a,b,m),0===I&&0===J||n||h.nodeShapes[this.getNodeShape(b)].draw(a,k.x,k.y,f,g)),I>0?(this.fillStyle(a,0,0,0,I),n?a.fill(l):a.fill()):I<0&&(this.fillStyle(a,255,255,255,-I),n?a.fill(l):a.fill()),J>0&&(n?a.stroke(l):a.stroke(),"double"===y)){a.lineWidth=b.pstyle("border-width").pfValue/3;var K=a.globalCompositeOperation;a.globalCompositeOperation="destination-out",n?a.stroke(l):a.stroke(),a.globalCompositeOperation=K}n&&a.translate(-k.x,-k.y),a.setLineDash&&a.setLineDash([]),h.drawElementText(a,b,e);var L=b.pstyle("overlay-padding").pfValue,M=b.pstyle("overlay-opacity").value,N=b.pstyle("overlay-color").value;M>0&&(this.fillStyle(a,N[0],N[1],N[2],M),h.nodeShapes.roundrectangle.draw(a,b._private.position.x,b._private.position.y,f+2*L,g+2*L),a.fill()),c&&a.translate(q.x1,q.y1)}},e.hasPie=function(a){return a=a[0],a._private.hasPie},e.drawPie=function(a,b,c,d){b=b[0];var e=b._private,f=b.cy().style(),g=b.pstyle("pie-size"),h=b.width(),i=b.height(),d=d||e.position,j=d.x,k=d.y,l=Math.min(h,i)/2,m=0,n=this.usePaths();n&&(j=0,k=0),"%"===g.units?l=l*g.value/100:void 0!==g.pfValue&&(l=g.pfValue/2);for(var o=1;o<=f.pieBackgroundN;o++){var p=b.pstyle("pie-"+o+"-background-size").value,q=b.pstyle("pie-"+o+"-background-color").value,r=b.pstyle("pie-"+o+"-background-opacity").value*c,s=p/100;s+m>1&&(s=1-m);var t=1.5*Math.PI+2*Math.PI*m,u=2*Math.PI*s,v=t+u;0===p||m>=1||m+s>1||(a.beginPath(),a.moveTo(j,k),a.arc(j,k,l,t,v),a.closePath(),this.fillStyle(a,q[0],q[1],q[2],r),a.fill(),m+=s)}},b.exports=e},{"../../../is":83}],70:[function(a,b,c){"use strict";var d={},e=a("../../../util"),f=100;d.getPixelRatio=function(){var a=this.data.contexts[0];if(null!=this.forcedPixelRatio)return this.forcedPixelRatio;var b=a.backingStorePixelRatio||a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/b},d.paintCache=function(a){for(var b,c=this.paintCaches=this.paintCaches||[],d=!0,e=0;e<c.length;e++)if(b=c[e],b.context===a){d=!1;break}return d&&(b={context:a},c.push(b)),b},d.fillStyle=function(a,b,c,d,e){a.fillStyle="rgba("+b+","+c+","+d+","+e+")"},d.strokeStyle=function(a,b,c,d,e){a.strokeStyle="rgba("+b+","+c+","+d+","+e+")"},d.shadowStyle=function(a,b,c,d,e,f){var g=this.cy.zoom();c>0?(a.shadowBlur=d*g,a.shadowColor="rgba("+b[0]+","+b[1]+","+b[2]+","+c+")",a.shadowOffsetX=e*g,a.shadowOffsetY=f*g):(a.shadowBlur=0,a.shadowColor="transparent",a.shadowOffsetX=0,a.shadowOffsetY=0)},d.matchCanvasSize=function(a){var b=this,c=b.data,d=b.findContainerClientCoords(),e=d[2],f=d[3],g=b.getPixelRatio(),h=b.motionBlurPxRatio;a!==b.data.bufferCanvases[b.MOTIONBLUR_BUFFER_NODE]&&a!==b.data.bufferCanvases[b.MOTIONBLUR_BUFFER_DRAG]||(g=h);var i,j=e*g,k=f*g;if(j!==b.canvasWidth||k!==b.canvasHeight){b.fontCaches=null;var l=c.canvasContainer;l.style.width=e+"px",l.style.height=f+"px";for(var m=0;m<b.CANVAS_LAYERS;m++)i=c.canvases[m],i.width=j,i.height=k,i.style.width=e+"px",i.style.height=f+"px";for(var m=0;m<b.BUFFER_COUNT;m++)i=c.bufferCanvases[m],i.width=j,i.height=k,i.style.width=e+"px",i.style.height=f+"px";b.textureMult=1,g<=1&&(i=c.bufferCanvases[b.TEXTURE_BUFFER],b.textureMult=2,i.width=j*b.textureMult,i.height=k*b.textureMult),b.canvasWidth=j,b.canvasHeight=k}},d.renderTo=function(a,b,c,d){this.render({forcedContext:a,forcedZoom:b,forcedPan:c,drawAllLayers:!0,forcedPxRatio:d})},d.render=function(a){function b(a,b,c,d,e){var f=a.globalCompositeOperation;a.globalCompositeOperation="destination-out",k.fillStyle(a,255,255,255,k.motionBlurTransparency),a.fillRect(b,c,d,e),a.globalCompositeOperation=f}function c(a,c){var e,f,h,l;k.clearingMotionBlur||a!==n.bufferContexts[k.MOTIONBLUR_BUFFER_NODE]&&a!==n.bufferContexts[k.MOTIONBLUR_BUFFER_DRAG]?(e=A,f=y,h=k.canvasWidth,l=k.canvasHeight):(e={x:z.x*r,y:z.y*r},f=x*r,h=k.canvasWidth*r,l=k.canvasHeight*r),a.setTransform(1,0,0,1,0,0),"motionBlur"===c?b(a,0,0,h,l):d||void 0!==c&&!c||a.clearRect(0,0,h,l),g||(a.translate(e.x,e.y),a.scale(f,f)),j&&a.translate(j.x,j.y),i&&a.scale(i,i)}a=a||e.staticEmptyObject();var d=a.forcedContext,g=a.drawAllLayers,h=a.drawOnlyNodeLayer,i=a.forcedZoom,j=a.forcedPan,k=this,l=void 0===a.forcedPxRatio?this.getPixelRatio():a.forcedPxRatio,m=k.cy,n=k.data,o=n.canvasNeedsRedraw,p=k.textureOnViewport&&!d&&(k.pinching||k.hoverData.dragging||k.swipePanning||k.data.wheelZooming),q=void 0!==a.motionBlur?a.motionBlur:k.motionBlur,r=k.motionBlurPxRatio,s=m.hasCompoundNodes(),t=k.hoverData.draggingEles,u=!(!k.hoverData.selecting&&!k.touchData.selecting);q=q&&!d&&k.motionBlurEnabled&&!u;var v=q;d||(k.prevPxRatio!==l&&(k.invalidateContainerClientCoordsCache(),k.matchCanvasSize(k.container),k.redrawHint("eles",!0),k.redrawHint("drag",!0)),k.prevPxRatio=l),!d&&k.motionBlurTimeout&&clearTimeout(k.motionBlurTimeout),q&&(null==k.mbFrames&&(k.mbFrames=0),k.drawingImage||k.mbFrames++,k.mbFrames<3&&(v=!1),k.mbFrames>k.minMbLowQualFrames&&(k.motionBlurPxRatio=k.mbPxRBlurry)),k.clearingMotionBlur&&(k.motionBlurPxRatio=1),k.textureDrawLastFrame&&!p&&(o[k.NODE]=!0,o[k.SELECT_BOX]=!0);var w=m.style()._private.coreStyle,x=m.zoom(),y=void 0!==i?i:x,z=m.pan(),A={x:z.x,y:z.y},B={zoom:x,pan:{x:z.x,y:z.y}},C=k.prevViewport,D=void 0===C||B.zoom!==C.zoom||B.pan.x!==C.pan.x||B.pan.y!==C.pan.y;D||t&&!s||(k.motionBlurPxRatio=1),j&&(A=j),y*=l,A.x*=l,A.y*=l;var E=k.getCachedZSortedEles();if(p||(k.textureDrawLastFrame=!1),p){k.textureDrawLastFrame=!0;var F;if(!k.textureCache){k.textureCache={},F=k.textureCache.bb=m.mutableElements().boundingBox(),k.textureCache.texture=k.data.bufferCanvases[k.TEXTURE_BUFFER];var G=k.data.bufferContexts[k.TEXTURE_BUFFER];G.setTransform(1,0,0,1,0,0),G.clearRect(0,0,k.canvasWidth*k.textureMult,k.canvasHeight*k.textureMult),k.render({forcedContext:G,drawOnlyNodeLayer:!0,forcedPxRatio:l*k.textureMult});var B=k.textureCache.viewport={zoom:m.zoom(),pan:m.pan(),width:k.canvasWidth,height:k.canvasHeight};B.mpan={x:(0-B.pan.x)/B.zoom,y:(0-B.pan.y)/B.zoom}}o[k.DRAG]=!1,o[k.NODE]=!1;var H=n.contexts[k.NODE],I=k.textureCache.texture,B=k.textureCache.viewport;F=k.textureCache.bb,H.setTransform(1,0,0,1,0,0),q?b(H,0,0,B.width,B.height):H.clearRect(0,0,B.width,B.height);var J=w["outside-texture-bg-color"].value,K=w["outside-texture-bg-opacity"].value;k.fillStyle(H,J[0],J[1],J[2],K),H.fillRect(0,0,B.width,B.height);var x=m.zoom();c(H,!1),H.clearRect(B.mpan.x,B.mpan.y,B.width/B.zoom/l,B.height/B.zoom/l),H.drawImage(I,B.mpan.x,B.mpan.y,B.width/B.zoom/l,B.height/B.zoom/l)}else k.textureOnViewport&&!d&&(k.textureCache=null);var L=m.extent(),M=k.pinching||k.hoverData.dragging||k.swipePanning||k.data.wheelZooming||k.hoverData.draggingEles,N=k.hideEdgesOnViewport&&M,O=[];if(O[k.NODE]=!o[k.NODE]&&q&&!k.clearedForMotionBlur[k.NODE]||k.clearingMotionBlur,O[k.NODE]&&(k.clearedForMotionBlur[k.NODE]=!0),O[k.DRAG]=!o[k.DRAG]&&q&&!k.clearedForMotionBlur[k.DRAG]||k.clearingMotionBlur,O[k.DRAG]&&(k.clearedForMotionBlur[k.DRAG]=!0),o[k.NODE]||g||h||O[k.NODE]){var P=q&&!O[k.NODE]&&1!==r,H=d||(P?k.data.bufferContexts[k.MOTIONBLUR_BUFFER_NODE]:n.contexts[k.NODE]),Q=q&&!P?"motionBlur":void 0;c(H,Q),N?k.drawCachedNodes(H,E.nondrag,l,L):k.drawLayeredElements(H,E.nondrag,l,L),g||q||(o[k.NODE]=!1)}if(!h&&(o[k.DRAG]||g||O[k.DRAG])){var P=q&&!O[k.DRAG]&&1!==r,H=d||(P?k.data.bufferContexts[k.MOTIONBLUR_BUFFER_DRAG]:n.contexts[k.DRAG]);c(H,q&&!P?"motionBlur":void 0),N?k.drawCachedNodes(H,E.drag,l,L):k.drawCachedElements(H,E.drag,l,L),g||q||(o[k.DRAG]=!1)}if(k.showFps||!h&&o[k.SELECT_BOX]&&!g){var H=d||n.contexts[k.SELECT_BOX];if(c(H),1==k.selection[4]&&(k.hoverData.selecting||k.touchData.selecting)){var x=k.cy.zoom(),R=w["selection-box-border-width"].value/x;H.lineWidth=R,H.fillStyle="rgba("+w["selection-box-color"].value[0]+","+w["selection-box-color"].value[1]+","+w["selection-box-color"].value[2]+","+w["selection-box-opacity"].value+")",H.fillRect(k.selection[0],k.selection[1],k.selection[2]-k.selection[0],k.selection[3]-k.selection[1]),R>0&&(H.strokeStyle="rgba("+w["selection-box-border-color"].value[0]+","+w["selection-box-border-color"].value[1]+","+w["selection-box-border-color"].value[2]+","+w["selection-box-opacity"].value+")",H.strokeRect(k.selection[0],k.selection[1],k.selection[2]-k.selection[0],k.selection[3]-k.selection[1]))}if(n.bgActivePosistion&&!k.hoverData.selecting){var x=k.cy.zoom(),S=n.bgActivePosistion;H.fillStyle="rgba("+w["active-bg-color"].value[0]+","+w["active-bg-color"].value[1]+","+w["active-bg-color"].value[2]+","+w["active-bg-opacity"].value+")",H.beginPath(),H.arc(S.x,S.y,w["active-bg-size"].pfValue/x,0,2*Math.PI),H.fill()}var T=k.lastRedrawTime;if(k.showFps&&T){T=Math.round(T);var U=Math.round(1e3/T);H.setTransform(1,0,0,1,0,0),H.fillStyle="rgba(255, 0, 0, 0.75)",H.strokeStyle="rgba(255, 0, 0, 0.75)",H.lineWidth=1,H.fillText("1 frame = "+T+" ms = "+U+" fps",0,20);var V=60;H.strokeRect(0,30,250,20),H.fillRect(0,30,250*Math.min(U/V,1),20)}g||(o[k.SELECT_BOX]=!1)}if(q&&1!==r){var W=n.contexts[k.NODE],X=k.data.bufferCanvases[k.MOTIONBLUR_BUFFER_NODE],Y=n.contexts[k.DRAG],Z=k.data.bufferCanvases[k.MOTIONBLUR_BUFFER_DRAG],$=function(a,c,d){a.setTransform(1,0,0,1,0,0),d||!v?a.clearRect(0,0,k.canvasWidth,k.canvasHeight):b(a,0,0,k.canvasWidth,k.canvasHeight);var e=r;a.drawImage(c,0,0,k.canvasWidth*e,k.canvasHeight*e,0,0,k.canvasWidth,k.canvasHeight)};(o[k.NODE]||O[k.NODE])&&($(W,X,O[k.NODE]),o[k.NODE]=!1),(o[k.DRAG]||O[k.DRAG])&&($(Y,Z,O[k.DRAG]),o[k.DRAG]=!1)}k.prevViewport=B,k.clearingMotionBlur&&(k.clearingMotionBlur=!1,k.motionBlurCleared=!0,k.motionBlur=!0),q&&(k.motionBlurTimeout=setTimeout(function(){k.motionBlurTimeout=null,k.clearedForMotionBlur[k.NODE]=!1,k.clearedForMotionBlur[k.DRAG]=!1,k.motionBlur=!1,k.clearingMotionBlur=!p,k.mbFrames=0,o[k.NODE]=!0,o[k.DRAG]=!0,k.redraw()},f)),k.drawingImage=!1,d||k.initrender||(k.initrender=!0,m.trigger("initrender")),d||m.trigger("render")},b.exports=d},{"../../../util":100}],71:[function(a,b,c){"use strict";var d=a("../../../math"),e={};e.drawPolygonPath=function(a,b,c,d,e,f){var g=d/2,h=e/2;a.beginPath&&a.beginPath(),a.moveTo(b+g*f[0],c+h*f[1]);for(var i=1;i<f.length/2;i++)a.lineTo(b+g*f[2*i],c+h*f[2*i+1]);a.closePath()},e.drawRoundRectanglePath=function(a,b,c,e,f){var g=e/2,h=f/2,i=d.getRoundRectangleRadius(e,f);a.beginPath&&a.beginPath(),a.moveTo(b,c-h),a.arcTo(b+g,c-h,b+g,c,i),a.arcTo(b+g,c+h,b,c+h,i),a.arcTo(b-g,c+h,b-g,c,i),a.arcTo(b-g,c-h,b,c-h,i),a.lineTo(b,c-h),a.closePath()};for(var f=Math.sin(0),g=Math.cos(0),h={},i={},j=Math.PI/40,k=0*Math.PI;k<2*Math.PI;k+=j)h[k]=Math.sin(k),i[k]=Math.cos(k);e.drawEllipsePath=function(a,b,c,d,e){if(a.beginPath&&a.beginPath(),a.ellipse)a.ellipse(b,c,d/2,e/2,0,0,2*Math.PI);else for(var k,l,m=d/2,n=e/2,o=0*Math.PI;o<2*Math.PI;o+=j)k=b-m*h[o]*f+m*i[o]*g,l=c+n*i[o]*f+n*h[o]*g,0===o?a.moveTo(k,l):a.lineTo(k,l);a.closePath()},b.exports=e},{"../../../math":85}],72:[function(a,b,c){"use strict";var d=a("../../../math"),e=a("../../../util"),f=a("../../../heap"),g=a("./texture-cache-defs"),h=25,i=50,j=-4,k=2,l=3.99,m=8,n=1024,o=1024,p=1024,q=.5,r=.8,s=10,t=!1,u=!1,v=.15,w=.1,x=.9,y=.9,z=100,A=1,B={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},C=function(a){var b=this;b.renderer=a,b.onDequeues=[],b.setupDequeueing()},D=C.prototype;D.reasons=B,D.getTextureQueue=function(a){var b=this;return b.eleImgCaches=b.eleImgCaches||{},b.eleImgCaches[a]=b.eleImgCaches[a]||[]},D.getRetiredTextureQueue=function(a){var b=this,c=b.eleImgCaches.retired=b.eleImgCaches.retired||{},d=c[a]=c[a]||[];return d},D.getElementQueue=function(){var a=this,b=a.eleCacheQueue=a.eleCacheQueue||new f(function(a,b){return b.reqs-a.reqs});return b},D.getElementIdToQueue=function(){var a=this,b=a.eleIdToCacheQueue=a.eleIdToCacheQueue||{};return b},D.getElement=function(a,b,c,e,f){var g=this,n=this.renderer,q=a._private.rscratch,r=n.cy.zoom();if(0===b.w||0===b.h)return null;if(null==e&&(e=Math.ceil(d.log2(r*c))),e<j)e=j;else if(r>=l||e>k)return null;var s=Math.pow(2,e),v=b.h*s,w=b.w*s,x=q.imgCaches=q.imgCaches||{},y=x[e];if(y)return y;var z;if(z=v<=h?h:v<=i?i:Math.ceil(v/i)*i,v>p||w>o||!t&&a.isEdge()||!u&&a.isParent())return null;var A=g.getTextureQueue(z),C=A[A.length-2],D=function(){return g.recycleTexture(z,w)||g.addTexture(z,w)};C||(C=A[A.length-1]),C||(C=D()),C.width-C.usedWidth<w&&(C=D());for(var E,F=n.eleTextBiggerThanMin(a,s),G=function(a){return a&&a.scaledLabelShown===F},H=f&&f===B.dequeue,I=f&&f===B.highQuality,J=f&&f===B.downscale,K=e+1;K<=k;K++){var L=x[K];if(L){E=L;break}}var M=E&&E.level===e+1?E:null,N=function(){C.context.drawImage(M.texture.canvas,M.x,0,M.width,M.height,C.usedWidth,0,w,v)};if(C.context.setTransform(1,0,0,1,0,0),C.context.clearRect(C.usedWidth,0,w,z),G(M))N();else if(G(E)){if(!I)return g.queueElement(a,b,E.level-1),E;for(var K=E.level;K>e;K--)M=g.getElement(a,b,c,K,B.downscale);N()}else{var O;if(!H&&!I&&!J)for(var K=e-1;K>=j;K--){var L=x[K];if(L){O=L;break}}if(G(O))return g.queueElement(a,b,e),O;C.context.translate(C.usedWidth,0),C.context.scale(s,s),n.drawElement(C.context,a,b,F),C.context.scale(1/s,1/s),C.context.translate(-C.usedWidth,0)}return y=x[e]={ele:a,x:C.usedWidth,texture:C,level:e,scale:s,width:w,height:v,scaledLabelShown:F},C.usedWidth+=Math.ceil(w+m),C.eleCaches.push(y),g.checkTextureFullness(C),y},D.invalidateElement=function(a){var b=this,c=a._private.rscratch.imgCaches;if(c)for(var d=j;d<=k;d++){var f=c[d];if(f){var g=f.texture;g.invalidatedWidth+=f.width,c[d]=null,e.removeFromArray(g.eleCaches,f),b.checkTextureUtility(g)}}},D.checkTextureUtility=function(a){a.invalidatedWidth>=q*a.width&&this.retireTexture(a)},D.checkTextureFullness=function(a){var b=this,c=b.getTextureQueue(a.height);a.usedWidth/a.width>r&&a.fullnessChecks>=s?e.removeFromArray(c,a):a.fullnessChecks++},D.retireTexture=function(a){var b=this,c=a.height,d=b.getTextureQueue(c);e.removeFromArray(d,a),a.retired=!0;for(var f=a.eleCaches,g=0;g<f.length;g++){var h=f[g],i=h.ele,j=h.level,k=i._private.rscratch.imgCaches;k&&(k[j]=null)}e.clearArray(f);var l=b.getRetiredTextureQueue(c);l.push(a)},D.addTexture=function(a,b){var c=this,d=c.getTextureQueue(a),e={};return d.push(e),e.eleCaches=[],e.height=a,e.width=Math.max(n,b),e.usedWidth=0,e.invalidatedWidth=0,e.fullnessChecks=0,e.canvas=document.createElement("canvas"),e.canvas.width=e.width,e.canvas.height=e.height,e.context=e.canvas.getContext("2d"),e},D.recycleTexture=function(a,b){for(var c=this,d=c.getTextureQueue(a),f=c.getRetiredTextureQueue(a),g=0;g<f.length;g++){var h=f[g];if(h.width>=b)return h.retired=!1,h.usedWidth=0,h.invalidatedWidth=0,h.fullnessChecks=0,e.clearArray(h.eleCaches),h.context.setTransform(1,0,0,1,0,0),h.context.clearRect(0,0,h.width,h.height),e.removeFromArray(f,h),d.push(h),h}},D.queueElement=function(a,b,c){var e=this,f=e.getElementQueue(),g=e.getElementIdToQueue(),h=a.id(),i=g[h];if(i)i.level=Math.max(i.level,c),i.reqs++,f.updateItem(i);else{var j={ele:a,bb:b,position:d.copyPosition(a.position()),level:c,reqs:1};a.isEdge()&&(j.positions={source:d.copyPosition(a.source().position()),target:d.copyPosition(a.target().position())}),f.push(j),g[h]=j}},D.dequeue=function(a){for(var b=this,c=b.getElementQueue(),e=b.getElementIdToQueue(),f=[],g=0;g<A&&c.size()>0;g++){var h=c.pop();e[h.ele.id()]=null,f.push(h);var i,j=h.ele;i=(!j.isEdge()||d.arePositionsSame(j.source().position(),h.positions.source)&&d.arePositionsSame(j.target().position(),h.positions.target))&&d.arePositionsSame(j.position(),h.position)?h.bb:j.boundingBox(),b.getElement(h.ele,i,a,h.level,B.dequeue)}return f},D.onDequeue=function(a){this.onDequeues.push(a)},D.offDequeue=function(a){e.removeFromArray(this.onDequeues,a)},D.setupDequeueing=g.setupDequeueing({deqRedrawThreshold:z,deqCost:v,deqAvgCost:w,deqNoDrawCost:x,deqFastCost:y,deq:function(a,b,c){return a.dequeue(b,c)},onDeqd:function(a,b){for(var c=0;c<a.onDequeues.length;c++){var d=a.onDequeues[c];d(b)}},shouldRedraw:function(a,b,c,e){for(var f=0;f<b.length;f++){var g=b[f].bb;if(d.boundingBoxesIntersect(g,e))return!0}return!1},priority:function(a){return a.renderer.beforeRenderPriorities.eleTxrDeq}}),b.exports=C},{"../../../heap":81,"../../../math":85,"../../../util":100,"./texture-cache-defs":77}],73:[function(a,b,c){"use strict";var d=a("../../../is"),e={};e.createBuffer=function(a,b){var c=document.createElement("canvas");return c.width=a,c.height=b,[c,c.getContext("2d")]},e.bufferCanvasImage=function(a){var b=this.cy,c=b.mutableElements(),e=c.boundingBox(),f=this.findContainerClientCoords(),g=a.full?Math.ceil(e.w):f[2],h=a.full?Math.ceil(e.h):f[3],i=d.number(a.maxWidth)||d.number(a.maxHeight),j=this.getPixelRatio(),k=1;if(void 0!==a.scale)g*=a.scale,h*=a.scale,k=a.scale;else if(i){var l=1/0,m=1/0;d.number(a.maxWidth)&&(l=k*a.maxWidth/g),d.number(a.maxHeight)&&(m=k*a.maxHeight/h),k=Math.min(l,m),g*=k,h*=k}i||(g*=j,h*=j,k*=j);var n=document.createElement("canvas");n.width=g,n.height=h,n.style.width=g+"px",n.style.height=h+"px";var o=n.getContext("2d");if(g>0&&h>0){o.clearRect(0,0,g,h),a.bg&&(o.fillStyle=a.bg,o.rect(0,0,g,h),o.fill()),o.globalCompositeOperation="source-over";var p=this.getCachedZSortedEles();if(a.full)o.translate(-e.x1*k,-e.y1*k),o.scale(k,k),this.drawElements(o,p);else{var q=b.pan(),r={x:q.x*k,y:q.y*k};k*=b.zoom(),o.translate(r.x,r.y),o.scale(k,k),this.drawElements(o,p)}}return n},e.png=function(a){return this.bufferCanvasImage(a).toDataURL("image/png")},e.jpg=function(a){return this.bufferCanvasImage(a).toDataURL("image/jpeg")},b.exports=e},{"../../../is":83}],74:[function(a,b,c){"use strict";function d(a){var b=this;b.data={canvases:new Array(j.CANVAS_LAYERS),contexts:new Array(j.CANVAS_LAYERS),canvasNeedsRedraw:new Array(j.CANVAS_LAYERS),bufferCanvases:new Array(j.BUFFER_COUNT),bufferContexts:new Array(j.CANVAS_LAYERS)},b.data.canvasContainer=document.createElement("div");var c=b.data.canvasContainer.style;b.data.canvasContainer.setAttribute("style","-webkit-tap-highlight-color: rgba(0,0,0,0);"),c.position="relative",c.zIndex="0",c.overflow="hidden";var d=a.cy.container();d.appendChild(b.data.canvasContainer),d.setAttribute("style",(d.getAttribute("style")||"")+"-webkit-tap-highlight-color: rgba(0,0,0,0);");for(var e=0;e<j.CANVAS_LAYERS;e++){var i=b.data.canvases[e]=document.createElement("canvas");b.data.contexts[e]=i.getContext("2d"),i.setAttribute("style","-webkit-user-select: none; -moz-user-select: -moz-none; user-select: none; -webkit-tap-highlight-color: rgba(0,0,0,0); outline-style: none;"+(f.ms()?" -ms-touch-action: none; touch-action: none; ":"")),i.style.position="absolute",i.setAttribute("data-id","layer"+e),i.style.zIndex=String(j.CANVAS_LAYERS-e),b.data.canvasContainer.appendChild(i),b.data.canvasNeedsRedraw[e]=!1}b.data.topCanvas=b.data.canvases[0],b.data.canvases[j.NODE].setAttribute("data-id","layer"+j.NODE+"-node"),b.data.canvases[j.SELECT_BOX].setAttribute("data-id","layer"+j.SELECT_BOX+"-selectbox"),b.data.canvases[j.DRAG].setAttribute("data-id","layer"+j.DRAG+"-drag");for(var e=0;e<j.BUFFER_COUNT;e++)b.data.bufferCanvases[e]=document.createElement("canvas"),b.data.bufferContexts[e]=b.data.bufferCanvases[e].getContext("2d"),b.data.bufferCanvases[e].style.position="absolute",b.data.bufferCanvases[e].setAttribute("data-id","buffer"+e),b.data.bufferCanvases[e].style.zIndex=String(-e-1),b.data.bufferCanvases[e].style.visibility="hidden";b.pathsEnabled=!0,b.data.eleTxrCache=new g(b),b.data.lyrTxrCache=new h(b,b.data.eleTxrCache),b.onUpdateEleCalcs(function(a,c){for(var d=0;d<c.length;d++){var e=c[d],f=e._private.rstyle,g=f.dirtyEvents;e.isNode()&&g&&1===g.length&&g.position||b.data.eleTxrCache.invalidateElement(e)}c.length>0&&b.data.lyrTxrCache.invalidateElements(c)})}var e=a("../../../util"),f=a("../../../is"),g=a("./ele-texture-cache"),h=a("./layered-texture-cache"),i=d,j=d.prototype;j.CANVAS_LAYERS=3,j.SELECT_BOX=0,j.DRAG=1,j.NODE=2,j.BUFFER_COUNT=3,j.TEXTURE_BUFFER=0,j.MOTIONBLUR_BUFFER_NODE=1,j.MOTIONBLUR_BUFFER_DRAG=2,j.redrawHint=function(a,b){var c=this;switch(a){case"eles":c.data.canvasNeedsRedraw[j.NODE]=b;break;case"drag":c.data.canvasNeedsRedraw[j.DRAG]=b;break;case"select":c.data.canvasNeedsRedraw[j.SELECT_BOX]=b}};var k="undefined"!=typeof Path2D;j.path2dEnabled=function(a){return void 0===a?this.pathsEnabled:void(this.pathsEnabled=!!a)},j.usePaths=function(){return k&&this.pathsEnabled},[a("./arrow-shapes"),a("./drawing-elements"),a("./drawing-edges"),a("./drawing-images"),a("./drawing-label-text"),a("./drawing-nodes"),a("./drawing-redraw"),a("./drawing-shapes"),a("./export-image"),a("./node-shapes")].forEach(function(a){e.extend(j,a)}),b.exports=i},{"../../../is":83,"../../../util":100,"./arrow-shapes":64,"./drawing-edges":65,"./drawing-elements":66,"./drawing-images":67,"./drawing-label-text":68,"./drawing-nodes":69,"./drawing-redraw":70,"./drawing-shapes":71,"./ele-texture-cache":72,"./export-image":73,"./layered-texture-cache":75,"./node-shapes":76}],75:[function(a,b,c){"use strict";function d(a,b){null!=a.imageSmoothingEnabled?a.imageSmoothingEnabled=b:(a.webkitImageSmoothingEnabled=b,a.mozImageSmoothingEnabled=b,a.msImageSmoothingEnabled=b)}var e=a("../../../util"),f=a("../../../math"),g=a("../../../heap"),h=a("../../../is"),i=a("./texture-cache-defs"),j=1,k=-4,l=2,m=3.99,n=50,o=50,p=!0,q=.15,r=.1,s=.9,t=.9,u=1,v=250,w=16e6,x=!0,y=!0,z=!0,A=function(a,b){var c=this,d=c.renderer=a;c.layersByLevel={},c.firstGet=!0,c.lastInvalidationTime=e.performanceNow()-2*v,c.skipping=!1,d.beforeRender(function(a,b){b-c.lastInvalidationTime<=v?c.skipping=!0:c.skipping=!1});var f=function(a,b){return b.reqs-a.reqs};c.layersQueue=new g(f),c.eleTxrCache=b,c.setupEleCacheInvalidation(),c.setupDequeueing()},B=A.prototype,C=0,D=Math.pow(2,53)-1;B.makeLayer=function(a,b){var c=Math.pow(2,b),d=Math.ceil(a.w*c),e=Math.ceil(a.h*c),f=document.createElement("canvas");f.width=d,f.height=e;var g={id:C=++C%D,bb:a,level:b,width:d,height:e,canvas:f,context:f.getContext("2d"),eles:[],elesQueue:[],reqs:0},h=g.context,i=-g.bb.x1,j=-g.bb.y1;return h.scale(c,c),h.translate(i,j),g},B.getLayers=function(a,b,c){var d=this,g=d.renderer,h=g.cy,i=h.zoom(),n=d.firstGet;if(d.firstGet=!1,null==c)if(c=Math.ceil(f.log2(i*b)),c<k)c=k;else if(i>=m||c>l)return null;d.validateLayersElesOrdering(c,a);var o,p,q=d.layersByLevel,r=Math.pow(2,c),s=q[c]=q[c]||[],t=d.levelIsComplete(c,a),u=function(){var b=function(b){if(d.validateLayersElesOrdering(b,a),d.levelIsComplete(b,a))return p=q[b],!0},f=function(a){if(!p)for(var d=c+a;k<=d&&d<=l&&!b(d);d+=a);};f(1),f(-1);for(var g=s.length-1;g>=0;g--){var h=s[g];h.invalid&&e.removeFromArray(s,h)}};if(t)return s;u();var v=function(){if(!o){o=f.makeBoundingBox();for(var b=0;b<a.length;b++)f.updateBoundingBox(o,a[b].boundingBox())}return o},y=function(a){a=a||{};var b=a.after;v();var e=o.w*r*(o.h*r);if(e>w)return null;var f=d.makeLayer(o,c);if(null!=b){var g=s.indexOf(b)+1;s.splice(g,0,f)}else(void 0===a.insert||a.insert)&&s.unshift(f);return f};if(d.skipping&&!n)return null;for(var z=null,A=a.length/j,B=x&&!n,C=0;C<a.length;C++){var D=a[C],E=D._private.rscratch,F=E.imgLayerCaches=E.imgLayerCaches||{},G=F[c];if(G)z=G;else{if((!z||z.eles.length>=A||!f.boundingBoxInBoundingBox(z.bb,D.boundingBox()))&&(z=y({insert:!0,after:z}),!z))return null;p||B?d.queueLayer(z,D):d.drawEleInLayer(z,D,c,b),z.eles.push(D),F[c]=z}}return p?p:B?null:s},B.getEleLevelForLayerLevel=function(a,b){return a},B.drawEleInLayer=function(a,b,c,e){var f=this,g=this.renderer,h=a.context,i=b.boundingBox();if(0!==i.w&&0!==i.h){var j=f.eleTxrCache,k=y?j.reasons.highQuality:void 0;c=f.getEleLevelForLayerLevel(c,e);var l=z?j.getElement(b,i,null,c,k):null;l?(p&&d(h,!1),h.drawImage(l.texture.canvas,l.x,0,l.width,l.height,i.x1,i.y1,i.w,i.h),p&&d(h,!0)):g.drawElement(h,b)}},B.levelIsComplete=function(a,b){var c=this,d=c.layersByLevel[a];if(!d||0===d.length)return!1;for(var e=0,f=0;f<d.length;f++){var g=d[f];if(g.reqs>0)return!1;if(g.invalid)return!1;e+=g.eles.length}return e===b.length},B.validateLayersElesOrdering=function(a,b){var c=this.layersByLevel[a];if(c)for(var d=0;d<c.length;d++){for(var e=c[d],f=-1,g=0;g<b.length;g++)if(e.eles[0]===b[g]){f=g;break}if(f<0)this.invalidateLayer(e);else for(var h=f,g=0;g<e.eles.length;g++)if(e.eles[g]!==b[h+g]){this.invalidateLayer(e);break}}},B.updateElementsInLayers=function(a,b){for(var c=this,d=h.element(a[0]),e=0;e<a.length;e++)for(var f=d?null:a[e],g=d?a[e]:a[e].ele,i=g._private.rscratch,j=i.imgLayerCaches=i.imgLayerCaches||{},m=k;m<=l;m++){var n=j[m];n&&(f&&c.getEleLevelForLayerLevel(n.level)!==f.level||b(n,g,f))}},B.haveLayers=function(){for(var a=this,b=!1,c=k;c<=l;c++){var d=a.layersByLevel[c];if(d&&d.length>0){b=!0;break}}return b},B.invalidateElements=function(a){var b=this;b.lastInvalidationTime=e.performanceNow(),0!==a.length&&b.haveLayers()&&b.updateElementsInLayers(a,function(a,c,d){b.invalidateLayer(a)})},B.invalidateLayer=function(a){if(this.lastInvalidationTime=e.performanceNow(),!a.invalid){var b=a.level,c=a.eles,d=this.layersByLevel[b];e.removeFromArray(d,a),a.elesQueue=[],a.invalid=!0,a.replacement&&(a.replacement.invalid=!0);for(var f=0;f<c.length;f++){var g=c[f]._private.rscratch.imgLayerCaches;g&&(g[b]=null)}}},B.refineElementTextures=function(a){var b=this;b.updateElementsInLayers(a,function(a,c,d){var e=a.replacement;if(e||(e=a.replacement=b.makeLayer(a.bb,a.level),e.replaces=a,e.eles=a.eles),!e.reqs)for(var f=0;f<e.eles.length;f++)b.queueLayer(e,e.eles[f])})},B.setupEleCacheInvalidation=function(){var a=this,b=[];if(z){var c=e.debounce(function(){a.refineElementTextures(b),b=[]},o);a.eleTxrCache.onDequeue(function(a){for(var d=0;d<a.length;d++)b.push(a[d]);c()})}},B.queueLayer=function(a,b){var c=this,d=c.layersQueue,e=a.elesQueue,f=e.hasId=e.hasId||{};if(!a.replacement){if(b){if(f[b.id()])return;e.push(b),f[b.id()]=!0}a.reqs?(a.reqs++,d.updateItem(a)):(a.reqs=1,d.push(a))}},B.dequeue=function(a){for(var b=this,c=b.layersQueue,d=[],e=0;e<u&&0!==c.size();){var f=c.peek();if(f.replacement)c.pop();else if(f.replaces&&f!==f.replaces.replacement)c.pop();else if(f.invalid)c.pop();else{var g=f.elesQueue.shift();g&&(b.drawEleInLayer(f,g,f.level,a),e++),0===d.length&&d.push(!0),0===f.elesQueue.length&&(c.pop(),f.reqs=0,f.replaces&&b.applyLayerReplacement(f),b.requestRedraw())}}return d},B.applyLayerReplacement=function(a){var b=this,c=b.layersByLevel[a.level],d=a.replaces,e=c.indexOf(d);if(!(e<0||d.invalid)){c[e]=a;for(var f=0;f<a.eles.length;f++){var g=a.eles[f]._private,h=g.imgLayerCaches=g.imgLayerCaches||{};h&&(h[a.level]=a)}b.requestRedraw()}},B.requestRedraw=e.debounce(function(){var a=this.renderer;a.redrawHint("eles",!0),a.redrawHint("drag",!0),a.redraw()},100),B.setupDequeueing=i.setupDequeueing({deqRedrawThreshold:n,deqCost:q,deqAvgCost:r,deqNoDrawCost:s,deqFastCost:t,deq:function(a,b){return a.dequeue(b)},onDeqd:e.noop,shouldRedraw:e.trueify,priority:function(a){return a.renderer.beforeRenderPriorities.lyrTxrDeq}}),b.exports=A},{"../../../heap":81,"../../../is":83,"../../../math":85,"../../../util":100,"./texture-cache-defs":77}],76:[function(a,b,c){"use strict";var d={};d.nodeShapeImpl=function(a,b,c,d,e,f,g){switch(a){case"ellipse":return this.drawEllipsePath(b,c,d,e,f);case"polygon":return this.drawPolygonPath(b,c,d,e,f,g);case"roundrectangle":return this.drawRoundRectanglePath(b,c,d,e,f)}},b.exports=d},{}],77:[function(a,b,c){"use strict";var d=a("../../../util"),e=1e3/60;b.exports={setupDequeueing:function(a){return function(){var b=this,c=this.renderer;if(!b.dequeueingSetup){b.dequeueingSetup=!0;var f=d.debounce(function(){c.redrawHint("eles",!0),c.redrawHint("drag",!0),c.redraw()},a.deqRedrawThreshold),g=function(g,h){for(var i=d.performanceNow(),j=c.averageRedrawTime,k=c.lastRedrawTime,l=[],m=c.cy.extent(),n=c.getPixelRatio();;){var o=d.performanceNow(),p=o-i,q=o-h;if(k<e){var r=e-(g?j:0);if(q>=a.deqFastCost*r)break}else if(g){if(p>=a.deqCost*k||p>=a.deqAvgCost*j)break}else if(q>=a.deqNoDrawCost*e)break;var s=a.deq(b,n,m);if(!(s.length>0))break;for(var t=0;t<s.length;t++)l.push(s[t])}l.length>0&&(a.onDeqd(b,l),!g&&a.shouldRedraw(b,l,n,m)&&f())},h=a.priority||d.noop;c.beforeRender(g,h(b))}}}}},{"../../../util":100}],78:[function(a,b,c){"use strict";b.exports=[{name:"null",impl:a("./null")},{name:"base",impl:a("./base")},{name:"canvas",impl:a("./canvas")}]},{"./base":60,"./canvas":74,"./null":79}],79:[function(a,b,c){"use strict";function d(a){this.options=a,this.notifications=0}var e=function(){};d.prototype={recalculateRenderedStyle:e,notify:function(){this.notifications++},init:e},b.exports=d},{}],80:[function(a,b,c){"use strict";var d=a("./is"),e=a("./util"),f=a("./thread"),g=a("./promise"),h=a("./define"),i=function(b){if(!(this instanceof i))return new i(b);this._private={pass:[]};var c=4;if(d.number(b),"undefined"!=typeof navigator&&null!=navigator.hardwareConcurrency)b=navigator.hardwareConcurrency;else try{b=a("os").cpus().length}catch(e){b=c}for(var g=0;g<b;g++)this[g]=new f;this.length=b},j=i.prototype;e.extend(j,{instanceString:function(){return"fabric"},require:function(a,b){for(var c=0;c<this.length;c++){var d=this[c];d.require(a,b)}return this},random:function(){var a=Math.round((this.length-1)*Math.random()),b=this[a];return b},run:function(a){var b=this._private.pass.shift();return this.random().pass(b).run(a)},message:function(a){return this.random().message(a)},broadcast:function(a){for(var b=0;b<this.length;b++){var c=this[b];c.message(a)}return this},stop:function(){for(var a=0;a<this.length;a++){var b=this[a];b.stop()}return this},pass:function(a){var b=this._private.pass;if(!d.array(a))throw"Only arrays may be used with fabric.pass()";return b.push(a),this},spreadSize:function(){var a=Math.ceil(this._private.pass[0].length/this.length);return a=Math.max(1,a)},spread:function(a){for(var b=this,c=b._private,d=b.spreadSize(),e=c.pass.shift().concat([]),f=[],h=0;h<this.length;h++){var i=this[h],j=e.splice(0,d),k=i.pass(j).run(a);f.push(k);var l=0===e.length;if(l)break}return g.all(f).then(function(a){for(var b=[],c=0,d=0;d<a.length;d++)for(var e=a[d],f=0;f<e.length;f++){var g=e[f];b[c++]=g}return b})},map:function(a){var b=this;return b.require(a,"_$_$_fabmap"),b.spread(function(a){var b=[],c=resolve;resolve=function(a){b.push(a)};for(var d=0;d<a.length;d++){var e=b.length,f=_$_$_fabmap(a[d]),g=e===b.length;g&&b.push(f)}return resolve=c,b})},filter:function(a){var b=this._private,c=b.pass[0];return this.map(a).then(function(a){for(var b=[],d=0;d<c.length;d++){var e=c[d],f=a[d];f&&b.push(e)}return b})},sort:function(a){var b=this,c=this._private.pass[0].length,d=this.spreadSize();
return a=a||function(a,b){return a<b?-1:a>b?1:0},b.require(a,"_$_$_cmp"),b.spread(function(a){var b=a.sort(_$_$_cmp);resolve(b)}).then(function(b){for(var e=function(d,e,f){e=Math.min(e,c),f=Math.min(f,c);for(var g=d,h=e,i=[],j=g;j<f;j++){var k=b[d],l=b[e];d<h&&(e>=f||a(k,l)<=0)?(i.push(k),d++):(i.push(l),e++)}for(var j=0;j<i.length;j++){var m=g+j;b[m]=i[j]}},f=d;f<c;f*=2)for(var g=0;g<c;g+=2*f)e(g,g+f,g+2*f);return b})}});var k=function(a){return a=a||{},function(b,c){var d=this._private.pass.shift();return this.random().pass(d)[a.threadFn](b,c)}};e.extend(j,{randomMap:k({threadFn:"map"}),reduce:k({threadFn:"reduce"}),reduceRight:k({threadFn:"reduceRight"})});var l=j;l.promise=l.run,l.terminate=l.halt=l.stop,l.include=l.require,e.extend(j,{on:h.on(),one:h.on({unbindSelfOnTrigger:!0}),off:h.off(),trigger:h.trigger()}),h.eventAliasesOn(j),b.exports=i},{"./define":44,"./is":83,"./promise":86,"./thread":98,"./util":100,os:void 0}],81:[function(a,b,c){"use strict";var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;f=Math.floor,m=Math.min,e=function(a,b){return a<b?-1:a>b?1:0},l=function(a,b,c,d,g){var h;if(null==c&&(c=0),null==g&&(g=e),c<0)throw new Error("lo must be non-negative");for(null==d&&(d=a.length);c<d;)h=f((c+d)/2),g(b,a[h])<0?d=h:c=h+1;return[].splice.apply(a,[c,c-c].concat(b)),b},i=function(a,b,c){return null==c&&(c=e),a.push(b),q(a,0,a.length-1,c)},h=function(a,b){var c,d;return null==b&&(b=e),c=a.pop(),a.length?(d=a[0],a[0]=c,r(a,0,b)):d=c,d},k=function(a,b,c){var d;return null==c&&(c=e),d=a[0],a[0]=b,r(a,0,c),d},j=function(a,b,c){var d;return null==c&&(c=e),a.length&&c(a[0],b)<0&&(d=[a[0],b],b=d[0],a[0]=d[1],r(a,0,c)),b},g=function(a,b){var c,d,g,h,i,j;for(null==b&&(b=e),h=function(){j=[];for(var b=0,c=f(a.length/2);0<=c?b<c:b>c;0<=c?b++:b--)j.push(b);return j}.apply(this).reverse(),i=[],d=0,g=h.length;d<g;d++)c=h[d],i.push(r(a,c,b));return i},p=function(a,b,c){var d;if(null==c&&(c=e),d=a.indexOf(b),d!==-1)return q(a,0,d,c),r(a,d,c)},n=function(a,b,c){var d,f,h,i,k;if(null==c&&(c=e),f=a.slice(0,b),!f.length)return f;for(g(f,c),k=a.slice(b),h=0,i=k.length;h<i;h++)d=k[h],j(f,d,c);return f.sort(c).reverse()},o=function(a,b,c){var d,f,i,j,k,n,o,p,q,r;if(null==c&&(c=e),10*b<=a.length){if(j=a.slice(0,b).sort(c),!j.length)return j;for(i=j[j.length-1],p=a.slice(b),k=0,o=p.length;k<o;k++)d=p[k],c(d,i)<0&&(l(j,d,0,null,c),j.pop(),i=j[j.length-1]);return j}for(g(a,c),r=[],f=n=0,q=m(b,a.length);0<=q?n<q:n>q;f=0<=q?++n:--n)r.push(h(a,c));return r},q=function(a,b,c,d){var f,g,h;for(null==d&&(d=e),f=a[c];c>b&&(h=c-1>>1,g=a[h],d(f,g)<0);)a[c]=g,c=h;return a[c]=f},r=function(a,b,c){var d,f,g,h,i;for(null==c&&(c=e),f=a.length,i=b,g=a[b],d=2*b+1;d<f;)h=d+1,h<f&&!(c(a[d],a[h])<0)&&(d=h),a[b]=a[d],b=d,d=2*b+1;return a[b]=g,q(a,i,b,c)},d=function(){function a(a){this.cmp=null!=a?a:e,this.nodes=[]}return a.push=i,a.pop=h,a.replace=k,a.pushpop=j,a.heapify=g,a.updateItem=p,a.nlargest=n,a.nsmallest=o,a.prototype.push=function(a){return i(this.nodes,a,this.cmp)},a.prototype.pop=function(){return h(this.nodes,this.cmp)},a.prototype.peek=function(){return this.nodes[0]},a.prototype.contains=function(a){return this.nodes.indexOf(a)!==-1},a.prototype.replace=function(a){return k(this.nodes,a,this.cmp)},a.prototype.pushpop=function(a){return j(this.nodes,a,this.cmp)},a.prototype.heapify=function(){return g(this.nodes,this.cmp)},a.prototype.updateItem=function(a){return p(this.nodes,a,this.cmp)},a.prototype.clear=function(){return this.nodes=[]},a.prototype.empty=function(){return 0===this.nodes.length},a.prototype.size=function(){return this.nodes.length},a.prototype.clone=function(){var b;return b=new a,b.nodes=this.nodes.slice(0),b},a.prototype.toArray=function(){return this.nodes.slice(0)},a.prototype.insert=a.prototype.push,a.prototype.top=a.prototype.peek,a.prototype.front=a.prototype.peek,a.prototype.has=a.prototype.contains,a.prototype.copy=a.prototype.clone,a}(),b.exports=d},{}],82:[function(a,b,c){"use strict";a("./-preamble");var d=a("./window"),e=a("./is"),f=a("./core"),g=a("./extension"),h=a("./jquery-plugin"),i=a("./stylesheet"),j=a("./thread"),k=a("./fabric"),l=function(a){return void 0===a&&(a={}),e.plainObject(a)?new f(a):e.string(a)?g.apply(g,arguments):void 0};l.version=a("./version"),d&&d.jQuery&&h(d.jQuery,l),l.registerJquery=function(a){h(a,l)},l.stylesheet=l.Stylesheet=i,l.thread=l.Thread=j,l.fabric=l.Fabric=k,b.exports=l},{"./-preamble":1,"./core":37,"./extension":46,"./fabric":80,"./is":83,"./jquery-plugin":84,"./stylesheet":97,"./thread":98,"./version":106,"./window":107}],83:[function(a,b,c){"use strict";var d=a("./window"),e=d?d.navigator:null,f=d?d.document:null,g="string",h=typeof{},i="function",j=typeof HTMLElement,k=function(a){return a&&a.instanceString&&l.fn(a.instanceString)?a.instanceString():null},l={defined:function(a){return null!=a},string:function(a){return null!=a&&typeof a==g},fn:function(a){return null!=a&&typeof a===i},array:function(a){return Array.isArray?Array.isArray(a):null!=a&&a instanceof Array},plainObject:function(a){return null!=a&&typeof a===h&&!l.array(a)&&a.constructor===Object},object:function(a){return null!=a&&typeof a===h},number:function(a){return null!=a&&"number"==typeof a&&!isNaN(a)},integer:function(a){return l.number(a)&&Math.floor(a)===a},bool:function(a){return null!=a&&typeof a==typeof!0},htmlElement:function(a){return"undefined"===j?void 0:null!=a&&a instanceof HTMLElement},elementOrCollection:function(a){return l.element(a)||l.collection(a)},element:function(a){return"collection"===k(a)&&a._private.single},collection:function(a){return"collection"===k(a)&&!a._private.single},core:function(a){return"core"===k(a)},style:function(a){return"style"===k(a)},stylesheet:function(a){return"stylesheet"===k(a)},event:function(a){return"event"===k(a)},thread:function(a){return"thread"===k(a)},fabric:function(a){return"fabric"===k(a)},emptyString:function(a){return void 0===a||null===a||!(""!==a&&!a.match(/^\s+$/))},nonemptyString:function(a){return!(!a||!l.string(a)||""===a||a.match(/^\s+$/))},domElement:function(a){return"undefined"!=typeof HTMLElement&&a instanceof HTMLElement},boundingBox:function(a){return l.plainObject(a)&&l.number(a.x1)&&l.number(a.x2)&&l.number(a.y1)&&l.number(a.y2)},promise:function(a){return l.object(a)&&l.fn(a.then)},touch:function(){return d&&("ontouchstart"in d||d.DocumentTouch&&f instanceof DocumentTouch)},gecko:function(){return d&&("undefined"!=typeof InstallTrigger||"MozAppearance"in f.documentElement.style)},webkit:function(){return d&&("undefined"!=typeof webkitURL||"WebkitAppearance"in f.documentElement.style)},chromium:function(){return d&&"undefined"!=typeof chrome},khtml:function(){return e&&e.vendor.match(/kde/i)},khtmlEtc:function(){return l.khtml()||l.webkit()||l.chromium()},ms:function(){return e&&e.userAgent.match(/msie|trident|edge/i)},windows:function(){return e&&e.appVersion.match(/Win/i)},mac:function(){return e&&e.appVersion.match(/Mac/i)},linux:function(){return e&&e.appVersion.match(/Linux/i)},unix:function(){return e&&e.appVersion.match(/X11/i)}};b.exports=l},{"./window":107}],84:[function(a,b,c){"use strict";var d=a("./is"),e=function(a){var b=a[0]._cyreg=a[0]._cyreg||{};return b},f=function(a,b){a&&(a.fn.cytoscape||(a.fn.cytoscape=function(c){var f=a(this);if("get"===c)return e(f).cy;if(d.fn(c)){var g=c,h=e(f).cy;if(h&&h.isReady())h.trigger("ready",[],g);else{var i=e(f),j=i.readies=i.readies||[];j.push(g)}}else if(d.plainObject(c))return f.each(function(){var d=a.extend({},c,{container:a(this)[0]});b(d)})},a.cytoscape=b,null==a.fn.cy&&null==a.cy&&(a.fn.cy=a.fn.cytoscape,a.cy=a.cytoscape)))};b.exports=f},{"./is":83}],85:[function(a,b,c){"use strict";var d={};d.arePositionsSame=function(a,b){return a.x===b.x&&a.y===b.y},d.copyPosition=function(a){return{x:a.x,y:a.y}},d.array2point=function(a){return{x:a[0],y:a[1]}},d.deg2rad=function(a){return Math.PI*a/180},d.log2=Math.log2||function(a){return Math.log(a)/Math.log(2)},d.signum=function(a){return a>0?1:a<0?-1:0},d.dist=function(a,b){return Math.sqrt(d.sqdist(a,b))},d.sqdist=function(a,b){var c=b.x-a.x,d=b.y-a.y;return c*c+d*d},d.qbezierAt=function(a,b,c,d){return(1-d)*(1-d)*a+2*(1-d)*d*b+d*d*c},d.qbezierPtAt=function(a,b,c,e){return{x:d.qbezierAt(a.x,b.x,c.x,e),y:d.qbezierAt(a.y,b.y,c.y,e)}},d.lineAt=function(a,b,c,e){var f={x:b.x-a.x,y:b.y-a.y},g=d.dist(a,b),h={x:f.x/g,y:f.y/g};c=null==c?0:c;var e=null!=e?e:c*g;return{x:a.x+h.x*e,y:a.y+h.y*e}},d.lineAtDist=function(a,b,c){return d.lineAt(a,b,void 0,c)},d.triangleAngle=function(a,b,c){var e=d.dist(b,c),f=d.dist(a,c),g=d.dist(a,b);return Math.acos((e*e+f*f-g*g)/(2*e*f))},d.bound=function(a,b,c){return Math.max(a,Math.min(c,b))},d.makeBoundingBox=function(a){if(null==a)return{x1:1/0,y1:1/0,x2:-(1/0),y2:-(1/0),w:0,h:0};if(null!=a.x1&&null!=a.y1){if(null!=a.x2&&null!=a.y2&&a.x2>=a.x1&&a.y2>=a.y1)return{x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2,w:a.x2-a.x1,h:a.y2-a.y1};if(null!=a.w&&null!=a.h&&a.w>=0&&a.h>=0)return{x1:a.x1,y1:a.y1,x2:a.x1+a.w,y2:a.y1+a.h,w:a.w,h:a.h}}},d.updateBoundingBox=function(a,b){a.x1=Math.min(a.x1,b.x1),a.x2=Math.max(a.x2,b.x2),a.w=a.x2-a.x1,a.y1=Math.min(a.y1,b.y1),a.y2=Math.max(a.y2,b.y2),a.h=a.y2-a.y1},d.expandBoundingBox=function(a,b){return a.x1-=b,a.x2+=b,a.y1-=b,a.y2+=b,a.w=a.x2-a.x1,a.h=a.y2-a.y1,a},d.boundingBoxesIntersect=function(a,b){return!(a.x1>b.x2)&&(!(b.x1>a.x2)&&(!(a.x2<b.x1)&&(!(b.x2<a.x1)&&(!(a.y2<b.y1)&&(!(b.y2<a.y1)&&(!(a.y1>b.y2)&&!(b.y1>a.y2)))))))},d.inBoundingBox=function(a,b,c){return a.x1<=b&&b<=a.x2&&a.y1<=c&&c<=a.y2},d.pointInBoundingBox=function(a,b){return this.inBoundingBox(a,b.x,b.y)},d.boundingBoxInBoundingBox=function(a,b){return d.inBoundingBox(a,b.x1,b.y1)&&d.inBoundingBox(a,b.x2,b.y2)},d.roundRectangleIntersectLine=function(a,b,c,d,e,f,g){var h,i=this.getRoundRectangleRadius(e,f),j=e/2,k=f/2,l=c-j+i-g,m=d-k-g,n=c+j-i+g,o=m;if(h=this.finiteLinesIntersect(a,b,c,d,l,m,n,o,!1),h.length>0)return h;var p=c+j+g,q=d-k+i-g,r=p,s=d+k-i+g;if(h=this.finiteLinesIntersect(a,b,c,d,p,q,r,s,!1),h.length>0)return h;var t=c-j+i-g,u=d+k+g,v=c+j-i+g,w=u;if(h=this.finiteLinesIntersect(a,b,c,d,t,u,v,w,!1),h.length>0)return h;var x=c-j-g,y=d-k+i-g,z=x,A=d+k-i+g;if(h=this.finiteLinesIntersect(a,b,c,d,x,y,z,A,!1),h.length>0)return h;var B,C=c-j+i,D=d-k+i;if(B=this.intersectLineCircle(a,b,c,d,C,D,i+g),B.length>0&&B[0]<=C&&B[1]<=D)return[B[0],B[1]];var E=c+j-i,F=d-k+i;if(B=this.intersectLineCircle(a,b,c,d,E,F,i+g),B.length>0&&B[0]>=E&&B[1]<=F)return[B[0],B[1]];var G=c+j-i,H=d+k-i;if(B=this.intersectLineCircle(a,b,c,d,G,H,i+g),B.length>0&&B[0]>=G&&B[1]>=H)return[B[0],B[1]];var I=c-j+i,J=d+k-i;return B=this.intersectLineCircle(a,b,c,d,I,J,i+g),B.length>0&&B[0]<=I&&B[1]>=J?[B[0],B[1]]:[]},d.inLineVicinity=function(a,b,c,d,e,f,g){var h=g,i=Math.min(c,e),j=Math.max(c,e),k=Math.min(d,f),l=Math.max(d,f);return i-h<=a&&a<=j+h&&k-h<=b&&b<=l+h},d.inBezierVicinity=function(a,b,c,d,e,f,g,h,i){var j={x1:Math.min(c,g,e)-i,x2:Math.max(c,g,e)+i,y1:Math.min(d,h,f)-i,y2:Math.max(d,h,f)+i};return!(a<j.x1||a>j.x2||b<j.y1||b>j.y2)},d.solveCubic=function(a,b,c,d,e){b/=a,c/=a,d/=a;var f,g,h,i,j,k,l,m;return g=(3*c-b*b)/9,h=-(27*d)+b*(9*c-2*(b*b)),h/=54,f=g*g*g+h*h,e[1]=0,l=b/3,f>0?(j=h+Math.sqrt(f),j=j<0?-Math.pow(-j,1/3):Math.pow(j,1/3),k=h-Math.sqrt(f),k=k<0?-Math.pow(-k,1/3):Math.pow(k,1/3),e[0]=-l+j+k,l+=(j+k)/2,e[4]=e[2]=-l,l=Math.sqrt(3)*(-k+j)/2,e[3]=l,void(e[5]=-l)):(e[5]=e[3]=0,0===f?(m=h<0?-Math.pow(-h,1/3):Math.pow(h,1/3),e[0]=-l+2*m,void(e[4]=e[2]=-(m+l))):(g=-g,i=g*g*g,i=Math.acos(h/Math.sqrt(i)),m=2*Math.sqrt(g),e[0]=-l+m*Math.cos(i/3),e[2]=-l+m*Math.cos((i+2*Math.PI)/3),void(e[4]=-l+m*Math.cos((i+4*Math.PI)/3))))},d.sqdistToQuadraticBezier=function(a,b,c,d,e,f,g,h){var i=1*c*c-4*c*e+2*c*g+4*e*e-4*e*g+g*g+d*d-4*d*f+2*d*h+4*f*f-4*f*h+h*h,j=9*c*e-3*c*c-3*c*g-6*e*e+3*e*g+9*d*f-3*d*d-3*d*h-6*f*f+3*f*h,k=3*c*c-6*c*e+c*g-c*a+2*e*e+2*e*a-g*a+3*d*d-6*d*f+d*h-d*b+2*f*f+2*f*b-h*b,l=1*c*e-c*c+c*a-e*a+d*f-d*d+d*b-f*b,m=[];this.solveCubic(i,j,k,l,m);for(var n=1e-7,o=[],p=0;p<6;p+=2)Math.abs(m[p+1])<n&&m[p]>=0&&m[p]<=1&&o.push(m[p]);o.push(1),o.push(0);for(var q,r,s,t,u=-1,v=0;v<o.length;v++)r=Math.pow(1-o[v],2)*c+2*(1-o[v])*o[v]*e+o[v]*o[v]*g,s=Math.pow(1-o[v],2)*d+2*(1-o[v])*o[v]*f+o[v]*o[v]*h,t=Math.pow(r-a,2)+Math.pow(s-b,2),u>=0?t<u&&(u=t,q=o[v]):(u=t,q=o[v]);return u},d.sqdistToFiniteLine=function(a,b,c,d,e,f){var g=[a-c,b-d],h=[e-c,f-d],i=h[0]*h[0]+h[1]*h[1],j=g[0]*g[0]+g[1]*g[1],k=g[0]*h[0]+g[1]*h[1],l=k*k/i;return k<0?j:l>i?(a-e)*(a-e)+(b-f)*(b-f):j-l},d.pointInsidePolygonPoints=function(a,b,c){for(var d,e,f,g,h,i=0,j=0,k=0;k<c.length/2;k++)if(d=c[2*k],e=c[2*k+1],k+1<c.length/2?(f=c[2*(k+1)],g=c[2*(k+1)+1]):(f=c[2*(k+1-c.length/2)],g=c[2*(k+1-c.length/2)+1]),d==a&&f==a);else{if(!(d>=a&&a>=f||d<=a&&a<=f))continue;h=(a-d)/(f-d)*(g-e)+e,h>b&&i++,h<b&&j++}return i%2!==0},d.pointInsidePolygon=function(a,b,c,e,f,g,h,i,j){var k,l=new Array(c.length);null!=i[0]?(k=Math.atan(i[1]/i[0]),i[0]<0?k+=Math.PI/2:k=-k-Math.PI/2):k=i;for(var m=Math.cos(-k),n=Math.sin(-k),o=0;o<l.length/2;o++)l[2*o]=g/2*(c[2*o]*m-c[2*o+1]*n),l[2*o+1]=h/2*(c[2*o+1]*m+c[2*o]*n),l[2*o]+=e,l[2*o+1]+=f;var p;if(j>0){var q=this.expandPolygon(l,-j);p=this.joinLines(q)}else p=l;return d.pointInsidePolygonPoints(a,b,p)},d.joinLines=function(a){for(var b,c,d,e,f,g,h,i,j=new Array(a.length/2),k=0;k<a.length/4;k++){b=a[4*k],c=a[4*k+1],d=a[4*k+2],e=a[4*k+3],k<a.length/4-1?(f=a[4*(k+1)],g=a[4*(k+1)+1],h=a[4*(k+1)+2],i=a[4*(k+1)+3]):(f=a[0],g=a[1],h=a[2],i=a[3]);var l=this.finiteLinesIntersect(b,c,d,e,f,g,h,i,!0);j[2*k]=l[0],j[2*k+1]=l[1]}return j},d.expandPolygon=function(a,b){for(var c,d,e,f,g=new Array(2*a.length),h=0;h<a.length/2;h++){c=a[2*h],d=a[2*h+1],h<a.length/2-1?(e=a[2*(h+1)],f=a[2*(h+1)+1]):(e=a[0],f=a[1]);var i=f-d,j=-(e-c),k=Math.sqrt(i*i+j*j),l=i/k,m=j/k;g[4*h]=c+l*b,g[4*h+1]=d+m*b,g[4*h+2]=e+l*b,g[4*h+3]=f+m*b}return g},d.intersectLineEllipse=function(a,b,c,d,e,f){var g=c-a,h=d-b;g/=e,h/=f;var i=Math.sqrt(g*g+h*h),j=i-1;if(j<0)return[];var k=j/i;return[(c-a)*k+a,(d-b)*k+b]},d.intersectLineCircle=function(a,b,c,d,e,f,g){var h=[c-a,d-b],i=[e,f],j=[a-e,b-f],k=h[0]*h[0]+h[1]*h[1],l=2*(j[0]*h[0]+j[1]*h[1]),i=j[0]*j[0]+j[1]*j[1]-g*g,m=l*l-4*k*i;if(m<0)return[];var n=(-l+Math.sqrt(m))/(2*k),o=(-l-Math.sqrt(m))/(2*k),p=Math.min(n,o),q=Math.max(n,o),r=[];if(p>=0&&p<=1&&r.push(p),q>=0&&q<=1&&r.push(q),0===r.length)return[];var s=r[0]*h[0]+a,t=r[0]*h[1]+b;if(r.length>1){if(r[0]==r[1])return[s,t];var u=r[1]*h[0]+a,v=r[1]*h[1]+b;return[s,t,u,v]}return[s,t]},d.findCircleNearPoint=function(a,b,c,d,e){var f=d-a,g=e-b,h=Math.sqrt(f*f+g*g),i=f/h,j=g/h;return[a+i*c,b+j*c]},d.findMaxSqDistanceToOrigin=function(a){for(var b,c=1e-6,d=0;d<a.length/2;d++)b=a[2*d]*a[2*d]+a[2*d+1]*a[2*d+1],b>c&&(c=b);return c},d.midOfThree=function(a,b,c){return b<=a&&a<=c||c<=a&&a<=b?a:a<=b&&b<=c||c<=b&&b<=a?b:c},d.finiteLinesIntersect=function(a,b,c,d,e,f,g,h,i){var j=a-e,k=c-a,l=g-e,m=b-f,n=d-b,o=h-f,p=l*m-o*j,q=k*m-n*j,r=o*k-l*n;if(0!==r){var s=p/r,t=q/r,u=.001,v=0-u,w=1+u;return v<=s&&s<=w&&v<=t&&t<=w?[a+s*k,b+s*n]:i?[a+s*k,b+s*n]:[]}return 0===p||0===q?this.midOfThree(a,c,g)===g?[g,h]:this.midOfThree(a,c,e)===e?[e,f]:this.midOfThree(e,g,c)===c?[c,d]:[]:[]},d.polygonIntersectLine=function(a,b,c,e,f,g,h,i){for(var j,k=[],l=new Array(c.length),m=0;m<l.length/2;m++)l[2*m]=c[2*m]*g+e,l[2*m+1]=c[2*m+1]*h+f;var n;if(i>0){var o=d.expandPolygon(l,-i);n=d.joinLines(o)}else n=l;for(var p,q,r,s,m=0;m<n.length/2;m++)p=n[2*m],q=n[2*m+1],m<n.length/2-1?(r=n[2*(m+1)],s=n[2*(m+1)+1]):(r=n[0],s=n[1]),j=this.finiteLinesIntersect(a,b,e,f,p,q,r,s),0!==j.length&&k.push(j[0],j[1]);return k},d.shortenIntersection=function(a,b,c){var d=[a[0]-b[0],a[1]-b[1]],e=Math.sqrt(d[0]*d[0]+d[1]*d[1]),f=(e-c)/e;return f<0&&(f=1e-5),[b[0]+f*d[0],b[1]+f*d[1]]},d.generateUnitNgonPointsFitToSquare=function(a,b){var c=d.generateUnitNgonPoints(a,b);return c=d.fitPolygonToSquare(c)},d.fitPolygonToSquare=function(a){for(var b,c,d=a.length/2,e=1/0,f=1/0,g=-(1/0),h=-(1/0),i=0;i<d;i++)b=a[2*i],c=a[2*i+1],e=Math.min(e,b),g=Math.max(g,b),f=Math.min(f,c),h=Math.max(h,c);for(var j=2/(g-e),k=2/(h-f),i=0;i<d;i++)b=a[2*i]=a[2*i]*j,c=a[2*i+1]=a[2*i+1]*k,e=Math.min(e,b),g=Math.max(g,b),f=Math.min(f,c),h=Math.max(h,c);if(f<-1)for(var i=0;i<d;i++)c=a[2*i+1]=a[2*i+1]+(-1-f);return a},d.generateUnitNgonPoints=function(a,b){var c=1/a*2*Math.PI,d=a%2===0?Math.PI/2+c/2:Math.PI/2;d+=b;for(var e,f,g,h=new Array(2*a),i=0;i<a;i++)e=i*c+d,f=h[2*i]=Math.cos(e),g=h[2*i+1]=Math.sin(-e);return h},d.getRoundRectangleRadius=function(a,b){return Math.min(a/4,b/4,8)},b.exports=d},{}],86:[function(a,b,c){"use strict";var d=0,e=1,f=2,g=function(a){return this instanceof g?(this.id="Thenable/1.0.7",this.state=d,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},void("function"==typeof a&&a.call(this,this.fulfill.bind(this),this.reject.bind(this)))):new g(a)};g.prototype={fulfill:function(a){return h(this,e,"fulfillValue",a)},reject:function(a){return h(this,f,"rejectReason",a)},then:function(a,b){var c=this,d=new g;return c.onFulfilled.push(k(a,d,"fulfill")),c.onRejected.push(k(b,d,"reject")),i(c),d.proxy}};var h=function(a,b,c,e){return a.state===d&&(a.state=b,a[c]=e,i(a)),a},i=function(a){a.state===e?j(a,"onFulfilled",a.fulfillValue):a.state===f&&j(a,"onRejected",a.rejectReason)},j=function(a,b,c){if(0!==a[b].length){var d=a[b];a[b]=[];var e=function(){for(var a=0;a<d.length;a++)d[a](c)};"function"==typeof setImmediate?setImmediate(e):setTimeout(e,0)}},k=function(a,b,c){return function(d){if("function"!=typeof a)b[c].call(b,d);else{var e;try{e=a(d)}catch(f){return void b.reject(f)}l(b,e)}}},l=function(a,b){if(a===b||a.proxy===b)return void a.reject(new TypeError("cannot resolve promise with itself"));var c;if("object"==typeof b&&null!==b||"function"==typeof b)try{c=b.then}catch(d){return void a.reject(d)}if("function"!=typeof c)a.fulfill(b);else{var e=!1;try{c.call(b,function(c){e||(e=!0,c===b?a.reject(new TypeError("circular thenable chain")):l(a,c))},function(b){e||(e=!0,a.reject(b))})}catch(d){e||a.reject(d)}}};g.all=function(a){return new g(function(b,c){for(var d=new Array(a.length),e=0,f=function(c,f){d[c]=f,e++,e===a.length&&b(d)},g=0;g<a.length;g++)!function(b){var d=a[b],e=null!=d&&null!=d.then;if(e)d.then(function(a){f(b,a)},function(a){c(a)});else{var g=d;f(b,g)}}(g)})},g.resolve=function(a){return new g(function(b,c){b(a)})},g.reject=function(a){return new g(function(b,c){c(a)})},b.exports="undefined"!=typeof Promise?Promise:g},{}],87:[function(a,b,c){"use strict";var d=a("./is"),e=a("./util"),f=function(a){if(!(this instanceof f))return new f(a);var b=this;b._private={selectorText:null,invalid:!0};var c=function(){return{classes:[],colonSelectors:[],data:[],group:null,ids:[],meta:[],collection:null,filter:null,parent:null,ancestor:null,subject:null,child:null,descendant:null}};if(!a||d.string(a)&&a.match(/^\s*$/))b.length=0;else if("*"===a||"edge"===a||"node"===a)b[0]=c(),b[0].group="*"===a?a:a+"s",b[0].groupOnly=!0,b._private.invalid=!1,b._private.selectorText=a,b.length=1;else if(d.elementOrCollection(a)){var g=a.collection();b[0]=c(),b[0].collection=g,b.length=1}else if(d.fn(a))b[0]=c(),b[0].filter=a,b.length=1;else{if(!d.string(a))return void e.error("A selector must be created from a string; found "+a);var h=null,i={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:'"(?:\\\\"|[^"])*"|'+"'(?:\\\\'|[^'])*'",number:e.regex.number,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$"};i.variable="(?:[\\w-]|(?:\\\\"+i.metaChar+"))+",i.value=i.string+"|"+i.number,i.className=i.variable,i.id=i.variable;for(var j=function(a){return a.replace(new RegExp("\\\\("+i.metaChar+")","g"),function(a,b,c,d){return b})},k=i.comparatorOp.split("|"),l=0;l<k.length;l++){var m=k[l];i.comparatorOp+="|@"+m}for(var k=i.comparatorOp.split("|"),l=0;l<k.length;l++){var m=k[l];m.indexOf("!")>=0||"="!==m&&(i.comparatorOp+="|\\!"+m)}var n=[{name:"group",query:!0,regex:"(node|edge|\\*)",populate:function(a){this.group="*"===a?a:a+"s"}},{name:"state",query:!0,regex:"(:selected|:unselected|:locked|:unlocked|:visible|:hidden|:transparent|:grabbed|:free|:removed|:inside|:grabbable|:ungrabbable|:animated|:unanimated|:selectable|:unselectable|:orphan|:nonorphan|:parent|:child|:loop|:simple|:active|:inactive|:touch|:backgrounding|:nonbackgrounding)",populate:function(a){this.colonSelectors.push(a)}},{name:"id",query:!0,regex:"\\#("+i.id+")",populate:function(a){this.ids.push(j(a))}},{name:"className",query:!0,regex:"\\.("+i.className+")",populate:function(a){this.classes.push(j(a))}},{name:"dataExists",query:!0,regex:"\\[\\s*("+i.variable+")\\s*\\]",populate:function(a){this.data.push({field:j(a)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+i.variable+")\\s*("+i.comparatorOp+")\\s*("+i.value+")\\s*\\]",populate:function(a,b,c){var d=null!=new RegExp("^"+i.string+"$").exec(c);c=d?c.substring(1,c.length-1):parseFloat(c),this.data.push({field:j(a),operator:b,value:c})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+i.boolOp+")\\s*("+i.variable+")\\s*\\]",populate:function(a,b){this.data.push({field:j(b),operator:a})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+i.meta+")\\s*("+i.comparatorOp+")\\s*("+i.number+")\\s*\\]\\]",populate:function(a,b,c){this.meta.push({field:j(a),operator:b,value:parseFloat(c)})}},{name:"nextQuery",separator:!0,regex:i.separator,populate:function(){b[++l]=c(),h=null}},{name:"child",separator:!0,regex:i.child,populate:function(){var a=c();a.parent=this,a.subject=h,b[l]=a}},{name:"descendant",separator:!0,regex:i.descendant,populate:function(){var a=c();a.ancestor=this,a.subject=h,b[l]=a}},{name:"subject",modifier:!0,regex:i.subject,populate:function(){return null!=h&&this.subject!=this?(e.error("Redefinition of subject in selector `"+a+"`"),!1):(h=this,void(this.subject=this))}}];b._private.selectorText=a;var o=a,l=0,p=function(a){for(var b,c,e,f=0;f<n.length;f++){var g=n[f],h=g.name;if(!d.fn(a)||a(h,g)){var i=o.match(new RegExp("^"+g.regex));if(null!=i){c=i,b=g,e=h;var j=i[0];o=o.substring(j.length);break}}}return{expr:b,match:c,name:e}},q=function(){var a=o.match(/^\s+/);if(a){var b=a[0];o=o.substring(b.length)}};for(b[0]=c(),q();;){var r=p();if(null==r.expr)return void e.error("The selector `"+a+"`is invalid");for(var s=[],t=1;t<r.match.length;t++)s.push(r.match[t]);var u=r.expr.populate.apply(b[l],s);if(u===!1)return;if(o.match(/^\s*$/))break}b.length=l+1;for(var t=0;t<b.length;t++){var v=b[t];if(null!=v.subject){for(;v.subject!=v;)if(null!=v.parent){var w=v.parent,x=v;x.parent=null,w.child=x,v=w}else{if(null==v.ancestor){e.error("When adjusting references for the selector `"+v+"`, neither parent nor ancestor was found");break}var y=v.ancestor,z=v;z.ancestor=null,y.descendant=z,v=y}b[t]=v.subject}}}b._private.invalid=!1},g=f.prototype;g.size=function(){return this.length},g.eq=function(a){return this[a]};var h=function(a,b){var c=b._private;if(a.groupOnly)return"*"===a.group||a.group===c.group;if(null!=a.group&&"*"!=a.group&&a.group!=c.group)return!1;for(var e=b.cy(),f=!0,g=0;g<a.colonSelectors.length;g++){var i=a.colonSelectors[g];switch(i){case":selected":f=b.selected();break;case":unselected":f=!b.selected();break;case":selectable":f=b.selectable();break;case":unselectable":f=!b.selectable();break;case":locked":f=b.locked();break;case":unlocked":f=!b.locked();break;case":visible":f=b.visible();break;case":hidden":f=!b.visible();break;case":transparent":f=b.transparent();break;case":grabbed":f=b.grabbed();break;case":free":f=!b.grabbed();break;case":removed":f=b.removed();break;case":inside":f=!b.removed();break;case":grabbable":f=b.grabbable();break;case":ungrabbable":f=!b.grabbable();break;case":animated":f=b.animated();break;case":unanimated":f=!b.animated();break;case":parent":f=b.isNode()&&b.children().nonempty();break;case":child":case":nonorphan":f=b.isNode()&&b.parent().nonempty();break;case":orphan":f=b.isNode()&&b.parent().empty();break;case":loop":f=b.isEdge()&&b.data("source")===b.data("target");break;case":simple":f=b.isEdge()&&b.data("source")!==b.data("target");break;case":active":f=b.active();break;case":inactive":f=!b.active();break;case":touch":f=d.touch();break;case":backgrounding":f=b.backgrounding();break;case":nonbackgrounding":f=!b.backgrounding()}if(!f)break}if(!f)return!1;for(var j=!0,g=0;g<a.ids.length;g++){var k=a.ids[g],l=c.data.id;if(j=j&&k==l,!j)break}if(!j)return!1;for(var m=!0,g=0;g<a.classes.length;g++){var n=a.classes[g];if(m=m&&b.hasClass(n),!m)break}if(!m)return!1;var o=function(b){for(var c=!0,e=0;e<a[b.name].length;e++){var f,g=a[b.name][e],h=g.operator,i=g.value,j=g.field;if(null!=h&&null!=i){var k=b.fieldValue(j),l=d.string(k)||d.number(k)?""+k:"",m=""+i,n=!1;h.indexOf("@")>=0&&(l=l.toLowerCase(),m=m.toLowerCase(),h=h.replace("@",""),n=!0);var o=!1;h.indexOf("!")>=0&&(h=h.replace("!",""),o=!0),n&&(i=m.toLowerCase(),k=l.toLowerCase());var p=!1;switch(h){case"*=":f=l.indexOf(m)>=0;break;case"$=":f=l.indexOf(m,l.length-m.length)>=0;break;case"^=":f=0===l.indexOf(m);break;case"=":f=k===i;break;case">":p=!0,f=k>i;break;case">=":p=!0,f=k>=i;break;case"<":p=!0,f=k<i;break;case"<=":p=!0,f=k<=i;break;default:f=!1}!o||null==k&&p||(f=!f)}else if(null!=h)switch(h){case"?":f=b.fieldTruthy(j);break;case"!":f=!b.fieldTruthy(j);break;case"^":f=b.fieldUndefined(j)}else f=!b.fieldUndefined(j);if(!f){c=!1;break}}return c},p=o({name:"data",fieldValue:function(a){return c.data[a]},fieldUndefined:function(a){return void 0===c.data[a]},fieldTruthy:function(a){return!!c.data[a]}});if(!p)return!1;var q=o({name:"meta",fieldValue:function(a){return b[a]()},fieldUndefined:function(a){return null==b[a]()},fieldTruthy:function(a){return!!b[a]()}});if(!q)return!1;if(null!=a.collection){var r=a.collection.hasElementWithId(b.id());if(!r)return!1}if(null!=a.filter&&0===b.collection().filter(a.filter).size())return!1;var s=function(a,b){if(null!=a){var c=!1;if(!e.hasCompoundNodes())return!1;b=b();for(var d=0;d<b.length;d++)if(h(a,b[d])){c=!0;break}return c}return!0};return!!s(a.parent,function(){return b.parent()})&&(!!s(a.ancestor,function(){return b.parents()})&&(!!s(a.child,function(){return b.children()})&&!!s(a.descendant,function(){return b.descendants()})))};g.filter=function(a){var b=this,c=a.cy();if(b._private.invalid)return c.collection();var d=function(a,c){for(var d=0;d<b.length;d++){var e=b[d];if(h(e,c))return!0}return!1};null==b._private.selectorText&&(d=function(){return!0});var e=a.filter(d);return e},g.matches=function(a){var b=this;if(b._private.invalid)return!1;for(var c=0;c<b.length;c++){var d=b[c];if(h(d,a))return!0}return!1},g.toString=g.selector=function(){for(var a="",b=function(a){return null==a?"":a},c=function(a){return d.string(a)?'"'+a+'"':b(a)},e=function(a){return" "+a+" "},f=function(a){var d="";a.subject===a&&(d+="$");var h=b(a.group);d+=h.substring(0,h.length-1);for(var i=0;i<a.data.length;i++){var j=a.data[i];d+=j.value?"["+j.field+e(b(j.operator))+c(j.value)+"]":"["+b(j.operator)+j.field+"]"}for(var i=0;i<a.meta.length;i++){var k=a.meta[i];d+="[["+k.field+e(b(k.operator))+c(k.value)+"]]"}for(var i=0;i<a.colonSelectors.length;i++){var l=a.colonSelectors[g];d+=l}for(var i=0;i<a.ids.length;i++){var l="#"+a.ids[g];d+=l}for(var i=0;i<a.classes.length;i++){var l="."+a.classes[i];d+=l}return null!=a.parent&&(d=f(a.parent)+" > "+d),null!=a.ancestor&&(d=f(a.ancestor)+" "+d),null!=a.child&&(d+=" > "+f(a.child)),null!=a.descendant&&(d+=" "+f(a.descendant)),d},g=0;g<this.length;g++){var h=this[g];a+=f(h),this.length>1&&g<this.length-1&&(a+=", ")}return a},b.exports=f},{"./is":83,"./util":100}],88:[function(a,b,c){"use strict";var d=a("../util"),e=a("../is"),f=a("../promise"),g={};g.apply=function(a){var b=this,c=b._private;c.newStyle&&(c.contextStyles={},c.propDiffs={},b.cleanElements(a,!0));for(var d=0;d<a.length;d++){var e=a[d],f=b.getContextMeta(e),g=b.getContextStyle(f),h=b.applyContextStyle(f,g,e);c.newStyle||b.updateTransitions(e,h.diffProps),b.updateStyleHints(e)}c.newStyle=!1},g.getPropertiesDiff=function(a,b){var c=this,d=c._private.propDiffs=c._private.propDiffs||{},e=a+"-"+b,f=d[e];if(f)return f;for(var g=[],h={},i=0;i<c.length;i++){var j=c[i],k="t"===a[i],l="t"===b[i],m=k!==l,n=j.mappedProperties.length>0;if(m||n){var o;m&&n?o=j.properties:m?o=j.properties:n&&(o=j.mappedProperties);for(var p=0;p<o.length;p++){for(var q=o[p],r=q.name,s=!1,t=i+1;t<c.length;t++){var u=c[t],v="t"===b[t];if(v&&(s=null!=u.properties[q.name]))break}h[r]||s||(h[r]=!0,g.push(r))}}}return d[e]=g,g},g.getContextMeta=function(a){var b,c=this,d="",e=a._private.styleCxtKey||"";c._private.newStyle&&(e="");for(var f=0;f<c.length;f++){var g=c[f],h=g.selector&&g.selector.matches(a);d+=h?"t":"f"}return b=c.getPropertiesDiff(e,d),a._private.styleCxtKey=d,{key:d,diffPropNames:b}},g.getContextStyle=function(a){var b=a.key,c=this,d=this._private.contextStyles=this._private.contextStyles||{};if(d[b])return d[b];for(var e={_private:{key:b}},f=0;f<c.length;f++){var g=c[f],h="t"===b[f];if(h)for(var i=0;i<g.properties.length;i++){var j=g.properties[i],k=e[j.name]=j;k.context=g}}return d[b]=e,e},g.applyContextStyle=function(a,b,c){for(var d=this,e=a.diffPropNames,f={},g=0;g<e.length;g++){var h=e[g],i=b[h],j=c.pstyle(h);if(!i){if(!j)continue;i=j.bypass?{name:h,deleteBypassed:!0}:{name:h,"delete":!0}}if(j!==i){var k=f[h]={prev:j};d.applyParsedProperty(c,i),k.next=c.pstyle(h),k.next&&k.next.bypass&&(k.next=k.next.bypassed)}}return{diffProps:f}},g.updateStyleHints=function(a){var b=a._private,c=this;if(!a.removed()){var d=!1;if("nodes"===b.group)for(var e=1;e<=c.pieBackgroundN;e++){var f=a.pstyle("pie-"+e+"-background-size").value;if(f>0){d=!0;break}}b.hasPie=d;var g=a.pstyle("text-transform").strValue,h=a.pstyle("label").strValue,i=a.pstyle("source-label").strValue,j=a.pstyle("target-label").strValue,k=a.pstyle("font-style").strValue,f=a.pstyle("font-size").pfValue+"px",l=a.pstyle("font-family").strValue,m=a.pstyle("font-weight").strValue,n=a.pstyle("text-valign").strValue,o=a.pstyle("text-valign").strValue,p=a.pstyle("text-outline-width").pfValue,q=a.pstyle("text-wrap").strValue,r=a.pstyle("text-max-width").pfValue,s=k+"$"+f+"$"+l+"$"+m+"$"+g+"$"+n+"$"+o+"$"+p+"$"+q+"$"+r;b.labelStyleKey=s,b.sourceLabelKey=s+"$"+i,b.targetLabelKey=s+"$"+j,b.labelKey=s+"$"+h,b.fontKey=k+"$"+m+"$"+f+"$"+l,b.styleKey=Date.now()}},g.applyParsedProperty=function(a,b){var c,f,g=this,h=b,i=a._private.style,j=g.types,k=g.properties[h.name].type,l=h.bypass,m=i[h.name],n=m&&m.bypass,o=a._private;if("curve-style"===b.name&&"haystack"===b.value&&a.isEdge()&&(a.isLoop()||a.source().isParent()||a.target().isParent())&&(h=b=this.parse(b.name,"bezier",l)),h["delete"])return i[h.name]=void 0,!0;if(h.deleteBypassed)return!m||!!m.bypass&&(m.bypassed=void 0,!0);if(h.deleteBypass)return!m||!!m.bypass&&(i[h.name]=m.bypassed,!0);var p=function(){d.error("Do not assign mappings to elements without corresponding data (e.g. ele `"+a.id()+"` for property `"+h.name+"` with data field `"+h.field+"`); try a `["+h.field+"]` selector to limit scope to elements with `"+h.field+"` defined")};switch(h.mapped){case j.mapData:case j.mapLayoutData:case j.mapScratch:var c,q=h.mapped===j.mapLayoutData,r=h.mapped===j.mapScratch,s=h.field.split(".");c=r||q?o.scratch:o.data;for(var t=0;t<s.length&&c;t++){var u=s[t];c=c[u]}var v;if(v=e.number(c)?(c-h.fieldMin)/(h.fieldMax-h.fieldMin):0,v<0?v=0:v>1&&(v=1),k.color){var w=h.valueMin[0],x=h.valueMax[0],y=h.valueMin[1],z=h.valueMax[1],A=h.valueMin[2],B=h.valueMax[2],C=null==h.valueMin[3]?1:h.valueMin[3],D=null==h.valueMax[3]?1:h.valueMax[3],E=[Math.round(w+(x-w)*v),Math.round(y+(z-y)*v),Math.round(A+(B-A)*v),Math.round(C+(D-C)*v)];f={bypass:h.bypass,name:h.name,value:E,strValue:"rgb("+E[0]+", "+E[1]+", "+E[2]+")"}}else{if(!k.number)return!1;var F=h.valueMin+(h.valueMax-h.valueMin)*v;f=this.parse(h.name,F,h.bypass,!0);
}f||(f=this.parse(h.name,m.strValue,h.bypass,!0)),f||p(),f.mapping=h,h=f;break;case j.data:case j.layoutData:case j.scratch:var c,q=h.mapped===j.layoutData,r=h.mapped===j.scratch,s=h.field.split(".");if(c=r||q?o.scratch:o.data)for(var t=0;t<s.length;t++){var u=s[t];c=c[u]}if(f=this.parse(h.name,c,h.bypass,!0),!f){var G=m?m.strValue:"";f=this.parse(h.name,G,h.bypass,!0)}f||p(),f.mapping=h,h=f;break;case j.fn:var H=h.value,I=H(a);f=this.parse(h.name,I,h.bypass,!0),f.mapping=h,h=f;break;case void 0:break;default:return!1}return l?(n?h.bypassed=m.bypassed:h.bypassed=m,i[h.name]=h):n?m.bypassed=h:i[h.name]=h,!0},g.cleanElements=function(a,b){for(var c=this,d=c.properties,e=0;e<a.length;e++){var f=a[e];if(b)for(var g=f._private.style,h=0;h<d.length;h++){var i=d[h],j=g[i.name];j&&(j.bypass?j.bypassed=null:g[i.name]=null)}else f._private.style={}}},g.update=function(){var a=this._private.cy,b=a.mutableElements();b.updateStyle()},g.updateMappers=function(a){for(var b=this,c=0;c<a.length;c++){for(var d=a[c],e=d._private.style,f=0;f<b.properties.length;f++){var g=b.properties[f],h=e[g.name];if(h&&h.mapping){var i=h.mapping;this.applyParsedProperty(d,i)}}this.updateStyleHints(d)}},g.updateTransitions=function(a,b,c){var d=this,g=a._private,h=a.pstyle("transition-property").value,i=a.pstyle("transition-duration").pfValue,j=a.pstyle("transition-delay").pfValue;if(h.length>0&&i>0){for(var k={},l=!1,m=0;m<h.length;m++){var n=h[m],o=a.pstyle(n),p=b[n];if(p){var q,r=p.prev,s=r,t=null!=p.next?p.next:o,u=!1,v=1e-6;s&&(e.number(s.pfValue)&&e.number(t.pfValue)?(u=t.pfValue-s.pfValue,q=s.pfValue+v*u):e.number(s.value)&&e.number(t.value)?(u=t.value-s.value,q=s.value+v*u):e.array(s.value)&&e.array(t.value)&&(u=s.value[0]!==t.value[0]||s.value[1]!==t.value[1]||s.value[2]!==t.value[2],q=s.strValue),u&&(k[n]=t.strValue,this.applyBypass(a,n,q),l=!0))}}if(!l)return;g.transitioning=!0,new f(function(b){j>0?a.delayAnimation(j).play().promise().then(b):b()}).then(function(){return a.animation({style:k,duration:i,easing:a.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){d.removeBypasses(a,h),a.rtrigger("style"),g.transitioning=!1})}else g.transitioning&&(this.removeBypasses(a,h),a.rtrigger("style"),g.transitioning=!1)},b.exports=g},{"../is":83,"../promise":86,"../util":100}],89:[function(a,b,c){"use strict";var d=a("../is"),e=a("../util"),f={};f.applyBypass=function(a,b,c,f){var g=this,h=[],i=!0;if("*"===b||"**"===b){if(void 0!==c)for(var j=0;j<g.properties.length;j++){var k=g.properties[j],b=k.name,l=this.parse(b,c,!0);l&&h.push(l)}}else if(d.string(b)){var l=this.parse(b,c,!0);l&&h.push(l)}else{if(!d.plainObject(b))return!1;var m=b;f=c;for(var j=0;j<g.properties.length;j++){var k=g.properties[j],b=k.name,c=m[b];if(void 0===c&&(c=m[e.dash2camel(b)]),void 0!==c){var l=this.parse(b,c,!0);l&&h.push(l)}}}if(0===h.length)return!1;for(var n=!1,j=0;j<a.length;j++){for(var o,p=a[j],q={},r=0;r<h.length;r++){var k=h[r];if(f){var s=p.pstyle(k.name);o=q[k.name]={prev:s}}n=this.applyParsedProperty(p,k)||n,f&&(o.next=p.pstyle(k.name))}n&&this.updateStyleHints(p),f&&this.updateTransitions(p,q,i)}return n},f.overrideBypass=function(a,b,c){b=e.camel2dash(b);for(var d=0;d<a.length;d++){var f=a[d],g=f._private.style[b],h=this.properties[b].type,i=h.color,j=h.mutiple;g&&g.bypass?(g.value=c,null!=g.pfValue&&(g.pfValue=c),i?g.strValue="rgb("+c.join(",")+")":j?g.strValue=c.join(" "):g.strValue=""+c):this.applyBypass(f,b,c)}},f.removeAllBypasses=function(a,b){return this.removeBypasses(a,this.propertyNames,b)},f.removeBypasses=function(a,b,c){for(var d=!0,e=0;e<a.length;e++){for(var f=a[e],g={},h=0;h<b.length;h++){var i=b[h],j=this.properties[i],k=f.pstyle(j.name);if(k&&k.bypass){var l="",m=this.parse(i,l,!0),n=g[j.name]={prev:k};this.applyParsedProperty(f,m),n.next=f.pstyle(j.name)}}this.updateStyleHints(f),c&&this.updateTransitions(f,g,d)}},b.exports=f},{"../is":83,"../util":100}],90:[function(a,b,c){"use strict";var d=a("../window"),e={};e.getEmSizeInPixels=function(){var a=this.containerCss("font-size");return null!=a?parseFloat(a):1},e.containerCss=function(a){var b=this._private.cy,c=b.container();if(d&&c&&d.getComputedStyle)return d.getComputedStyle(c).getPropertyValue(a)},b.exports=e},{"../window":107}],91:[function(a,b,c){"use strict";var d=a("../util"),e=a("../is"),f={};f.getRenderedStyle=function(a){return this.getRawStyle(a,!0)},f.getRawStyle=function(a,b){var c=this,a=a[0];if(a){for(var e={},f=0;f<c.properties.length;f++){var g=c.properties[f],h=c.getStylePropertyValue(a,g.name,b);h&&(e[g.name]=h,e[d.dash2camel(g.name)]=h)}return e}},f.getStylePropertyValue=function(a,b,c){var d=this,a=a[0];if(a){var e=d.properties[b];e.alias&&(e=e.pointsTo);var f=e.type,g=a.pstyle(e.name),h=a.cy().zoom();if(g){var i=g.units?f.implicitUnits||"px":null,j=i?[].concat(g.pfValue).map(function(a){return a*(c?h:1)+i}).join(" "):g.strValue;return j}}},f.getAnimationStartStyle=function(a,b){for(var c={},d=0;d<b.length;d++){var f=b[d],g=f.name,h=a.pstyle(g);void 0!==h&&(h=e.plainObject(h)?this.parse(g,h.strValue):this.parse(g,h)),h&&(c[g]=h)}return c},f.getPropsList=function(a){var b=this,c=[],e=a,f=b.properties;if(e)for(var g=Object.keys(e),h=0;h<g.length;h++){var i=g[h],j=e[i],k=f[i]||f[d.camel2dash(i)],l=this.parse(k.name,j);l&&c.push(l)}return c},b.exports=f},{"../is":83,"../util":100}],92:[function(a,b,c){"use strict";var d=a("../is"),e=a("../util"),f=a("../selector"),g=function(a){return this instanceof g?d.core(a)?(this._private={cy:a,coreStyle:{}},this.length=0,void this.resetToDefault()):void e.error("A style must have a core reference"):new g(a)},h=g.prototype;h.instanceString=function(){return"style"},h.clear=function(){for(var a=0;a<this.length;a++)this[a]=void 0;this.length=0;var b=this._private;return b.newStyle=!0,this},h.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},h.core=function(){return this._private.coreStyle},h.selector=function(a){var b="core"===a?null:new f(a),c=this.length++;return this[c]={selector:b,properties:[],mappedProperties:[],index:c},this},h.css=function(){var a=this,b=arguments;switch(b.length){case 1:for(var c=b[0],d=0;d<a.properties.length;d++){var f=a.properties[d],g=c[f.name];void 0===g&&(g=c[e.dash2camel(f.name)]),void 0!==g&&this.cssRule(f.name,g)}break;case 2:this.cssRule(b[0],b[1])}return this},h.style=h.css,h.cssRule=function(a,b){var c=this.parse(a,b);if(c){var d=this.length-1;this[d].properties.push(c),this[d].properties[c.name]=c,c.name.match(/pie-(\d+)-background-size/)&&c.value&&(this._private.hasPie=!0),c.mapped&&this[d].mappedProperties.push(c);var e=!this[d].selector;e&&(this._private.coreStyle[c.name]=c)}return this},g.fromJson=function(a,b){var c=new g(a);return c.fromJson(b),c},g.fromString=function(a,b){return new g(a).fromString(b)},[a("./apply"),a("./bypass"),a("./container"),a("./get-for-ele"),a("./json"),a("./string-sheet"),a("./properties"),a("./parse")].forEach(function(a){e.extend(h,a)}),g.types=h.types,g.properties=h.properties,b.exports=g},{"../is":83,"../selector":87,"../util":100,"./apply":88,"./bypass":89,"./container":90,"./get-for-ele":91,"./json":93,"./parse":94,"./properties":95,"./string-sheet":96}],93:[function(a,b,c){"use strict";var d={};d.applyFromJson=function(a){for(var b=this,c=0;c<a.length;c++){var d=a[c],e=d.selector,f=d.style||d.css,g=Object.keys(f);b.selector(e);for(var h=0;h<g.length;h++){var i=g[h],j=f[i];b.css(i,j)}}return b},d.fromJson=function(a){var b=this;return b.resetToDefault(),b.applyFromJson(a),b},d.json=function(){for(var a=[],b=this.defaultLength;b<this.length;b++){for(var c=this[b],d=c.selector,e=c.properties,f={},g=0;g<e.length;g++){var h=e[g];f[h.name]=h.strValue}a.push({selector:d?d.toString():"core",style:f})}return a},b.exports=d},{}],94:[function(a,b,c){"use strict";var d=a("../util"),e=a("../is"),f=a("../math"),g={};g.parse=function(a,b,c,f){var g=this;if(e.fn(b))return g.parseImpl(a,b,c,f);var h,i=[a,b,c,f].join("$"),j=g.propCache=g.propCache||{};return(h=j[i])||(h=j[i]=g.parseImpl(a,b,c,f)),h=d.copy(h),h&&(h.value=d.copy(h.value)),h};var h=function(a,b,c,g){var h=this;a=d.camel2dash(a);var i=h.properties[a],j=b,k=h.types;if(!i)return null;if(void 0===b||null===b)return null;i.alias&&(i=i.pointsTo,a=i.name);var l=e.string(b);l&&(b=b.trim());var m=i.type;if(!m)return null;if(c&&(""===b||null===b))return{name:a,value:b,bypass:!0,deleteBypass:!0};if(e.fn(b))return{name:a,value:b,strValue:"fn",mapped:k.fn,bypass:c};var n,o,p,q,r,s;if(!l||g);else{if((n=new RegExp(k.data.regex).exec(b))||(p=new RegExp(k.layoutData.regex).exec(b))||(r=new RegExp(k.scratch.regex).exec(b))){if(c)return!1;var t;return t=n?k.data:p?k.layoutData:k.scratch,n=n||p||r,{name:a,value:n,strValue:""+b,mapped:t,field:n[1],bypass:c}}if((o=new RegExp(k.mapData.regex).exec(b))||(q=new RegExp(k.mapLayoutData.regex).exec(b))||(s=new RegExp(k.mapScratch.regex).exec(b))){if(c)return!1;if(m.multiple)return!1;var t;if(t=o?k.mapData:q?k.mapLayoutData:k.mapScratch,o=o||q||s,!m.color&&!m.number)return!1;var u=this.parse(a,o[4]);if(!u||u.mapped)return!1;var v=this.parse(a,o[5]);if(!v||v.mapped)return!1;if(u.value===v.value)return!1;if(m.color){var w=u.value,x=v.value,y=!(w[0]!==x[0]||w[1]!==x[1]||w[2]!==x[2]||w[3]!==x[3]&&(null!=w[3]&&1!==w[3]||null!=x[3]&&1!==x[3]));if(y)return!1}return{name:a,value:o,strValue:""+b,mapped:t,field:o[1],fieldMin:parseFloat(o[2]),fieldMax:parseFloat(o[3]),valueMin:u.value,valueMax:v.value,bypass:c}}}if(m.multiple&&"multiple"!==g){var z;if(z=l?b.split(/\s+/):e.array(b)?b:[b],m.evenMultiple&&z.length%2!==0)return null;var A=z.map(function(b){var d=h.parse(a,b,c,"multiple");return null!=d.pfValue?d.pfValue:d.value});return{name:a,value:A,pfValue:A,strValue:A.join(" "),bypass:c,units:m.number&&!m.unitless?m.implicitUnits||"px":void 0}}var B=function(){for(var d=0;d<m.enums.length;d++){var e=m.enums[d];if(e===b)return{name:a,value:b,strValue:""+b,bypass:c}}return null};if(m.number){var C,D="px";if(m.units&&(C=m.units),m.implicitUnits&&(D=m.implicitUnits),!m.unitless)if(l){var E="px|em"+(m.allowPercent?"|\\%":"");C&&(E=C);var F=b.match("^("+d.regex.number+")("+E+")?$");F&&(b=F[1],C=F[2]||D)}else C&&!m.implicitUnits||(C=D);if(b=parseFloat(b),isNaN(b)&&void 0===m.enums)return null;if(isNaN(b)&&void 0!==m.enums)return b=j,B();if(m.integer&&!e.integer(b))return null;if(void 0!==m.min&&b<m.min||void 0!==m.max&&b>m.max)return null;var G={name:a,value:b,strValue:""+b+(C?C:""),units:C,bypass:c};return m.unitless||"px"!==C&&"em"!==C?G.pfValue=b:G.pfValue="px"!==C&&C?this.getEmSizeInPixels()*b:b,"ms"!==C&&"s"!==C||(G.pfValue="ms"===C?b:1e3*b),"deg"!==C&&"rad"!==C||(G.pfValue="rad"===C?b:f.deg2rad(b)),G}if(m.propList){var H=[],I=""+b;if("none"===I);else{for(var J=I.split(","),K=0;K<J.length;K++){var L=J[K].trim();h.properties[L]&&H.push(L)}if(0===H.length)return null}return{name:a,value:H,strValue:0===H.length?"none":H.join(", "),bypass:c}}if(m.color){var M=d.color2tuple(b);return M?{name:a,value:M,strValue:""+b,bypass:c}:null}if(m.regex||m.regexes){if(m.enums){var N=B();if(N)return N}for(var O=m.regexes?m.regexes:[m.regex],K=0;K<O.length;K++){var P=new RegExp(O[K]),Q=P.exec(b);if(Q)return{name:a,value:Q,strValue:""+b,bypass:c}}return null}return m.string?{name:a,value:""+b,strValue:""+b,bypass:c}:m.enums?B():null};g.parseImpl=h,b.exports=g},{"../is":83,"../math":85,"../util":100}],95:[function(a,b,c){"use strict";var d=a("../util"),e={};!function(){var a=d.regex.number,b=d.regex.rgbaNoBackRefs,c=d.regex.hslaNoBackRefs,f=d.regex.hex3,g=d.regex.hex6,h=function(a){return"^"+a+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},i=function(d){var e=a+"|\\w+|"+b+"|"+c+"|"+f+"|"+g;return"^"+d+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+a+")\\s*\\,\\s*("+a+")\\s*,\\s*("+e+")\\s*\\,\\s*("+e+")\\)$"};e.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizes:{number:!0,multiple:!0},bgSize:{number:!0,min:0,allowPercent:!0},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"]},bgPos:{number:!0,allowPercent:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"]},bgFit:{enums:["none","contain","cover"]},bgCrossOrigin:{enums:["anonymous","use-credentials"]},bgClip:{enums:["none","node"]},color:{color:!0},bool:{enums:["yes","no"]},lineStyle:{enums:["solid","dotted","dashed"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontVariant:{enums:["small-caps","normal"]},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap"]},textBackgroundShape:{enums:["rectangle","roundrectangle"]},nodeShape:{enums:["rectangle","roundrectangle","ellipse","triangle","square","pentagon","hexagon","heptagon","octagon","star","diamond","vee","rhomboid","polygon"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","triangle-backcurve","half-triangle-overshot","vee","square","circle","diamond","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},text:{string:!0},data:{mapping:!0,regex:h("data")},layoutData:{mapping:!0,regex:h("layoutData")},scratch:{mapping:!0,regex:h("scratch")},mapData:{mapping:!0,regex:i("mapData")},mapLayoutData:{mapping:!0,regex:i("mapLayoutData")},mapScratch:{mapping:!0,regex:i("mapScratch")},fn:{mapping:!0,fn:!0},url:{regex:"url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)|none|(.+)$"},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position"]},easing:{regexes:["^(spring)\\s*\\(\\s*("+a+")\\s*,\\s*("+a+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+a+")\\s*,\\s*("+a+")\\s*,\\s*("+a+")\\s*,\\s*("+a+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]}};var j=e.types,k=e.properties=[{name:"label",type:j.text},{name:"text-rotation",type:j.textRotation},{name:"text-margin-x",type:j.bidirectionalSize},{name:"text-margin-y",type:j.bidirectionalSize},{name:"source-label",type:j.text},{name:"source-text-rotation",type:j.textRotation},{name:"source-text-margin-x",type:j.bidirectionalSize},{name:"source-text-margin-y",type:j.bidirectionalSize},{name:"source-text-offset",type:j.size},{name:"target-label",type:j.text},{name:"target-text-rotation",type:j.textRotation},{name:"target-text-margin-x",type:j.bidirectionalSize},{name:"target-text-margin-y",type:j.bidirectionalSize},{name:"target-text-offset",type:j.size},{name:"text-valign",type:j.valign},{name:"text-halign",type:j.halign},{name:"color",type:j.color},{name:"text-outline-color",type:j.color},{name:"text-outline-width",type:j.size},{name:"text-outline-opacity",type:j.zeroOneNumber},{name:"text-opacity",type:j.zeroOneNumber},{name:"text-background-color",type:j.color},{name:"text-background-margin",type:j.size},{name:"text-background-opacity",type:j.zeroOneNumber},{name:"text-border-opacity",type:j.zeroOneNumber},{name:"text-border-color",type:j.color},{name:"text-border-width",type:j.size},{name:"text-border-style",type:j.borderStyle},{name:"text-background-shape",type:j.textBackgroundShape},{name:"text-transform",type:j.textTransform},{name:"text-wrap",type:j.textWrap},{name:"text-max-width",type:j.size},{name:"text-events",type:j.bool},{name:"font-family",type:j.fontFamily},{name:"font-style",type:j.fontStyle},{name:"font-weight",type:j.fontWeight},{name:"font-size",type:j.size},{name:"min-zoomed-font-size",type:j.size},{name:"events",type:j.bool},{name:"display",type:j.display},{name:"visibility",type:j.visibility},{name:"opacity",type:j.zeroOneNumber},{name:"z-index",type:j.nonNegativeInt},{name:"overlay-padding",type:j.size},{name:"overlay-color",type:j.color},{name:"overlay-opacity",type:j.zeroOneNumber},{name:"shadow-blur",type:j.size},{name:"shadow-color",type:j.color},{name:"shadow-opacity",type:j.zeroOneNumber},{name:"shadow-offset-x",type:j.bidirectionalSize},{name:"shadow-offset-y",type:j.bidirectionalSize},{name:"text-shadow-blur",type:j.size},{name:"text-shadow-color",type:j.color},{name:"text-shadow-opacity",type:j.zeroOneNumber},{name:"text-shadow-offset-x",type:j.bidirectionalSize},{name:"text-shadow-offset-y",type:j.bidirectionalSize},{name:"transition-property",type:j.propList},{name:"transition-duration",type:j.time},{name:"transition-delay",type:j.time},{name:"transition-timing-function",type:j.easing},{name:"height",type:j.nodeSize},{name:"width",type:j.nodeSize},{name:"shape",type:j.nodeShape},{name:"shape-polygon-points",type:j.polygonPointList},{name:"background-color",type:j.color},{name:"background-opacity",type:j.zeroOneNumber},{name:"background-blacken",type:j.nOneOneNumber},{name:"padding",type:j.size},{name:"border-color",type:j.color},{name:"border-opacity",type:j.zeroOneNumber},{name:"border-width",type:j.size},{name:"border-style",type:j.borderStyle},{name:"background-image",type:j.url},{name:"background-image-crossorigin",type:j.bgCrossOrigin},{name:"background-image-opacity",type:j.zeroOneNumber},{name:"background-position-x",type:j.bgPos},{name:"background-position-y",type:j.bgPos},{name:"background-repeat",type:j.bgRepeat},{name:"background-fit",type:j.bgFit},{name:"background-clip",type:j.bgClip},{name:"background-width",type:j.bgWH},{name:"background-height",type:j.bgWH},{name:"position",type:j.position},{name:"compound-sizing-wrt-labels",type:j.compoundIncludeLabels},{name:"line-style",type:j.lineStyle},{name:"line-color",type:j.color},{name:"curve-style",type:j.curveStyle},{name:"haystack-radius",type:j.zeroOneNumber},{name:"control-point-step-size",type:j.size},{name:"control-point-distances",type:j.bidirectionalSizes},{name:"control-point-weights",type:j.numbers},{name:"segment-distances",type:j.bidirectionalSizes},{name:"segment-weights",type:j.numbers},{name:"edge-distances",type:j.edgeDistances},{name:"selection-box-color",type:j.color},{name:"selection-box-opacity",type:j.zeroOneNumber},{name:"selection-box-border-color",type:j.color},{name:"selection-box-border-width",type:j.size},{name:"active-bg-color",type:j.color},{name:"active-bg-opacity",type:j.zeroOneNumber},{name:"active-bg-size",type:j.size},{name:"outside-texture-bg-color",type:j.color},{name:"outside-texture-bg-opacity",type:j.zeroOneNumber}],l=e.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];e.pieBackgroundN=16,k.push({name:"pie-size",type:j.bgSize});for(var m=1;m<=e.pieBackgroundN;m++)k.push({name:"pie-"+m+"-background-color",type:j.color}),k.push({name:"pie-"+m+"-background-size",type:j.percent}),k.push({name:"pie-"+m+"-background-opacity",type:j.zeroOneNumber});var n=e.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:j.arrowShape},{name:"arrow-color",type:j.color},{name:"arrow-fill",type:j.arrowFill}].forEach(function(a){n.forEach(function(b){var c=b+"-"+a.name,d=a.type;k.push({name:c,type:d})})},{}),e.propertyNames=k.map(function(a){return a.name});for(var m=0;m<k.length;m++){var o=k[m];k[o.name]=o}for(var m=0;m<l.length;m++){var p=l[m],q=k[p.pointsTo],r={name:p.name,alias:!0,pointsTo:q};k.push(r),k[p.name]=r}}(),e.getDefaultProperty=function(a){return this.getDefaultProperties()[a]},e.getDefaultProperties=d.memoize(function(){for(var a=d.extend({events:"yes","text-events":"no","text-valign":"top","text-halign":"center",color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-margin":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","text-background-shape":"rectangle","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"shadow-opacity":0,"shadow-color":"#000","shadow-blur":10,"shadow-offset-x":0,"shadow-offset-y":0,"text-shadow-opacity":0,"text-shadow-color":"#000","text-shadow-blur":5,"text-shadow-offset-x":0,"text-shadow-offset-y":0,"transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-position-x":"50%","background-position-y":"50%","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1",padding:0,position:"origin","compound-sizing-wrt-labels":"include"},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(a,b){for(var c=1;c<=e.pieBackgroundN;c++){var d=b.name.replace("{{i}}",c),f=b.value;a[d]=f}return a},{}),{"line-style":"solid","line-color":"#999","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"edge-distances":"intersection","curve-style":"bezier","haystack-radius":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"}].reduce(function(a,b){return e.arrowPrefixes.forEach(function(c){var d=c+"-"+b.name,e=b.value;a[d]=e}),a},{})),b={},c=0;c<this.properties.length;c++){var f=this.properties[c];if(!f.pointsTo){var g=f.name,h=a[g],i=this.parse(g,h);b[g]=i}}return b}),e.addDefaultStylesheet=function(){this.selector("$node > node").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3,"curve-style":"haystack"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector("node:parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}).selector("core").css({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125}),this.defaultLength=this.length},b.exports=e},{"../util":100}],96:[function(a,b,c){"use strict";var d=a("../util"),e=a("../selector"),f={};f.applyFromString=function(a){function b(){k=k.length>f.length?k.substr(f.length):""}function c(){g=g.length>h.length?g.substr(h.length):""}var f,g,h,i=this,j=this,k=""+a;for(k=k.replace(/[\/][*](\s|.)+?[*][\/]/g,"");;){var l=k.match(/^\s*$/);if(l)break;var m=k.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!m){d.error("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+k);break}f=m[0];var n=m[1];if("core"!==n){var o=new e(n);if(o._private.invalid){d.error("Skipping parsing of block: Invalid selector found in string stylesheet: "+n),b();continue}}var p=m[2],q=!1;g=p;for(var r=[];;){var l=g.match(/^\s*$/);if(l)break;var s=g.match(/^\s*(.+?)\s*:\s*(.+?)\s*;/);if(!s){d.error("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+p),q=!0;break}h=s[0];var t=s[1],u=s[2],v=i.properties[t];if(v){var w=j.parse(t,u);w?(r.push({name:t,val:u}),c()):(d.error("Skipping property: Invalid property definition in: "+h),c())}else d.error("Skipping property: Invalid property name in: "+h),c()}if(q){b();break}j.selector(n);for(var x=0;x<r.length;x++){var v=r[x];j.css(v.name,v.val)}b()}return j},f.fromString=function(a){var b=this;return b.resetToDefault(),b.applyFromString(a),b},b.exports=f},{"../selector":87,"../util":100}],97:[function(a,b,c){"use strict";var d=a("./is"),e=a("./util"),f=a("./style"),g=function(){return this instanceof g?void(this.length=0):new g},h=g.prototype;h.instanceString=function(){return"stylesheet"},h.selector=function(a){var b=this.length++;return this[b]={selector:a,properties:[]},this},h.css=function(a,b){var c=this.length-1;if(d.string(a))this[c].properties.push({name:a,value:b});else if(d.plainObject(a))for(var g=a,h=0;h<f.properties.length;h++){var i=f.properties[h],j=g[i.name];if(void 0===j&&(j=g[e.dash2camel(i.name)]),void 0!==j){var a=i.name,b=j;this[c].properties.push({name:a,value:b})}}return this},h.style=h.css,h.generateStyle=function(a){for(var b=new f(a),c=0;c<this.length;c++){var d=this[c],e=d.selector,g=d.properties;b.selector(e);for(var h=0;h<g.length;h++){var i=g[h];b.css(i.name,i.value)}}return b},b.exports=g},{"./is":83,"./style":92,"./util":100}],98:[function(_dereq_,module,exports){"use strict";var window=_dereq_("./window"),util=_dereq_("./util"),Promise=_dereq_("./promise"),Event=_dereq_("./event"),define=_dereq_("./define"),is=_dereq_("./is"),Thread=function(a){if(!(this instanceof Thread))return new Thread(a);var b=this._private={requires:[],files:[],queue:null,pass:[],disabled:!1};is.plainObject(a)&&null!=a.disabled&&(b.disabled=!!a.disabled)},thdfn=Thread.prototype,stringifyFieldVal=function(a){var b=is.fn(a)?a.toString():"JSON.parse('"+JSON.stringify(a)+"')";return b},fnAsRequire=function(a){var b,c;is.object(a)&&a.fn?(b=fnAs(a.fn,a.name),c=a.name,a=a.fn):is.fn(a)?(b=a.toString(),c=a.name):is.string(a)?b=a:is.object(a)&&(b=a.proto?"":a.name+" = {};",c=a.name,a=a.obj),b+="\n";var d=function(a,c){if(a.prototype){var d=!1;for(var e in a.prototype){d=!0;break}d&&(b+=fnAsRequire({name:c,obj:a,proto:!0},a))}};if(a.prototype&&null!=c)for(var e in a.prototype){var f="",g=a.prototype[e],h=stringifyFieldVal(g),i=c+".prototype."+e;f+=i+" = "+h+";\n",f&&(b+=f),d(g,i)}if(!is.string(a))for(var e in a){var j="";if(a.hasOwnProperty(e)){var g=a[e],h=stringifyFieldVal(g),i=c+'["'+e+'"]';j+=i+" = "+h+";\n"}j&&(b+=j),d(g,i)}return b},isPathStr=function(a){return is.string(a)&&a.match(/\.js$/)};util.extend(thdfn,{instanceString:function(){return"thread"},require:function(a,b){var c=this._private.requires;if(isPathStr(a))return this._private.files.push(a),this;if(b)a=is.fn(a)?{name:b,fn:a}:{name:b,obj:a};else if(is.fn(a)){if(!a.name)throw'The function name could not be automatically determined.  Use thread.require( someFunction, "someFunction" )';a={name:a.name,fn:a}}return c.push(a),this},pass:function(a){return this._private.pass.push(a),this},run:function(fn,pass){var self=this,_p=this._private;if(pass=pass||_p.pass.shift(),_p.stopped)throw"Attempted to run a stopped thread!  Start a new thread or do not stop the existing thread and reuse it.";if(_p.running)return _p.queue=_p.queue.then(function(){return self.run(fn,pass)});var useWW=null!=window&&!_p.disabled,useNode=!window&&"undefined"!=typeof module&&!_p.disabled;self.trigger("run");var runP=new Promise(function(resolve,reject){_p.running=!0;var threadTechAlreadyExists=_p.ran,fnImplStr=is.string(fn)?fn:fn.toString(),fnStr="\n"+_p.requires.map(function(a){return fnAsRequire(a)}).concat(_p.files.map(function(a){if(useWW){var b=function(a){return a.match(/^\.\//)||a.match(/^\.\./)?window.location.origin+window.location.pathname+a:a.match(/^\//)?window.location.origin+"/"+a:a};return'importScripts("'+b(a)+'");'}if(useNode)return'eval( require("fs").readFileSync("'+a+'", { encoding: "utf8" }) );';throw"External file `"+a+"` can not be required without any threading technology."})).concat(["( function(){","var ret = ("+fnImplStr+")("+JSON.stringify(pass)+");","if( ret !== undefined ){ resolve(ret); }","} )()\n"]).join("\n");if(_p.requires=[],_p.files=[],useWW){var fnBlob,fnUrl;if(!threadTechAlreadyExists){var fnPre=fnStr+"";fnStr=["function _ref_(o){ return eval(o); };","function broadcast(m){ return message(m); };","function message(m){ postMessage(m); };","function listen(fn){",'  self.addEventListener("message", function(m){ ','    if( typeof m === "object" && (m.data.$$eval || m.data === "$$start") ){',"    } else { ","      fn( m.data );","    }","  });","};",'self.addEventListener("message", function(m){  if( m.data.$$eval ){ eval( m.data.$$eval ); }  });',"function resolve(v){ postMessage({ $$resolve: v }); };","function reject(v){ postMessage({ $$reject: v }); };"].join("\n"),fnStr+=fnPre,fnBlob=new Blob([fnStr],{type:"application/javascript"}),fnUrl=window.URL.createObjectURL(fnBlob)}var ww=_p.webworker=_p.webworker||new Worker(fnUrl);threadTechAlreadyExists&&ww.postMessage({$$eval:fnStr});var cb;ww.addEventListener("message",cb=function(a){var b=is.object(a)&&is.object(a.data);b&&"$$resolve"in a.data?(ww.removeEventListener("message",cb),resolve(a.data.$$resolve)):b&&"$$reject"in a.data?(ww.removeEventListener("message",cb),reject(a.data.$$reject)):self.trigger(new Event(a,{type:"message",message:a.data}))},!1),threadTechAlreadyExists||ww.postMessage("$$start")}else if(useNode){_p.child||(_p.child=_dereq_("child_process").fork(_dereq_("path").join(__dirname,"thread-node-fork")));var child=_p.child,cb;child.on("message",cb=function(a){is.object(a)&&"$$resolve"in a?(child.removeListener("message",cb),resolve(a.$$resolve)):is.object(a)&&"$$reject"in a?(child.removeListener("message",cb),reject(a.$$reject)):self.trigger(new Event({},{type:"message",message:a}))}),child.send({$$eval:fnStr})}else{var promiseResolve=resolve,promiseReject=reject,timer=_p.timer=_p.timer||{listeners:[],exec:function(){fnStr=["function _ref_(o){ return eval(o); };","function broadcast(m){ return message(m); };",'function message(m){ self.trigger( new Event({}, { type: "message", message: m }) ); };',"function listen(fn){ timer.listeners.push( fn ); };","function resolve(v){ promiseResolve(v); };","function reject(v){ promiseReject(v); };"].join("\n")+fnStr,
eval(fnStr)},message:function(a){for(var b=timer.listeners,c=0;c<b.length;c++){var d=b[c];d(a)}}};timer.exec()}}).then(function(a){return _p.running=!1,_p.ran=!0,self.trigger("ran"),a});return null==_p.queue&&(_p.queue=runP),runP},message:function(a){var b=this._private;return b.webworker&&b.webworker.postMessage(a),b.child&&b.child.send(a),b.timer&&b.timer.message(a),this},stop:function(){var a=this._private;return a.webworker&&a.webworker.terminate(),a.child&&a.child.kill(),a.timer,a.stopped=!0,this.trigger("stop")},stopped:function(){return this._private.stopped}});var fnAs=function(a,b){var c=a.toString();return c=c.replace(/function\s*?\S*?\s*?\(/,"function "+b+"(")},defineFnal=function(a){return a=a||{},function(b,c){var d=fnAs(b,"_$_$_"+a.name);return this.require(d),this.run(["function( data ){","  var origResolve = resolve;","  var res = [];","  ","  resolve = function( val ){","    res.push( val );","  };","  ","  var ret = data."+a.name+"( _$_$_"+a.name+(arguments.length>1?", "+JSON.stringify(c):"")+" );","  ","  resolve = origResolve;","  resolve( res.length > 0 ? res : ret );","}"].join("\n"))}};util.extend(thdfn,{reduce:defineFnal({name:"reduce"}),reduceRight:defineFnal({name:"reduceRight"}),map:defineFnal({name:"map"})});var fn=thdfn;fn.promise=fn.run,fn.terminate=fn.halt=fn.stop,fn.include=fn.require,util.extend(thdfn,{on:define.on(),one:define.on({unbindSelfOnTrigger:!0}),off:define.off(),trigger:define.trigger()}),define.eventAliasesOn(thdfn),module.exports=Thread},{"./define":44,"./event":45,"./is":83,"./promise":86,"./util":100,"./window":107,child_process:void 0,path:void 0}],99:[function(a,b,c){"use strict";var d=a("../is");b.exports={hex2tuple:function(a){if((4===a.length||7===a.length)&&"#"===a[0]){var b,c,d,e=4===a.length,f=16;return e?(b=parseInt(a[1]+a[1],f),c=parseInt(a[2]+a[2],f),d=parseInt(a[3]+a[3],f)):(b=parseInt(a[1]+a[2],f),c=parseInt(a[3]+a[4],f),d=parseInt(a[5]+a[6],f)),[b,c,d]}},hsl2tuple:function(a){function b(a,b,c){return c<0&&(c+=1),c>1&&(c-=1),c<1/6?a+6*(b-a)*c:c<.5?b:c<2/3?a+(b-a)*(2/3-c)*6:a}var c,d,e,f,g,h,i,j,k=new RegExp("^"+this.regex.hsla+"$").exec(a);if(k){if(d=parseInt(k[1]),d<0?d=(360- -1*d%360)%360:d>360&&(d%=360),d/=360,e=parseFloat(k[2]),e<0||e>100)return;if(e/=100,f=parseFloat(k[3]),f<0||f>100)return;if(f/=100,g=k[4],void 0!==g&&(g=parseFloat(g),g<0||g>1))return;if(0===e)h=i=j=Math.round(255*f);else{var l=f<.5?f*(1+e):f+e-f*e,m=2*f-l;h=Math.round(255*b(m,l,d+1/3)),i=Math.round(255*b(m,l,d)),j=Math.round(255*b(m,l,d-1/3))}c=[h,i,j,g]}return c},rgb2tuple:function(a){var b,c=new RegExp("^"+this.regex.rgba+"$").exec(a);if(c){b=[];for(var d=[],e=1;e<=3;e++){var f=c[e];if("%"===f[f.length-1]&&(d[e]=!0),f=parseFloat(f),d[e]&&(f=f/100*255),f<0||f>255)return;b.push(Math.floor(f))}var g=d[1]||d[2]||d[3],h=d[1]&&d[2]&&d[3];if(g&&!h)return;var i=c[4];if(void 0!==i){if(i=parseFloat(i),i<0||i>1)return;b.push(i)}}return b},colorname2tuple:function(a){return this.colors[a.toLowerCase()]},color2tuple:function(a){return(d.array(a)?a:null)||this.colorname2tuple(a)||this.hex2tuple(a)||this.rgb2tuple(a)||this.hsl2tuple(a)},colors:{transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}}},{"../is":83}],100:[function(a,b,c){"use strict";var d=a("../is"),e=a("../math"),f={trueify:function(){return!0},falsify:function(){return!1},zeroify:function(){return 0},noop:function(){},error:function(a){console.error?(console.error.apply(console,arguments),console.trace&&console.trace()):(console.log.apply(console,arguments),console.trace&&console.trace())},clone:function(a){return this.extend({},a)},copy:function(a){return null==a?a:d.array(a)?a.slice():d.plainObject(a)?this.clone(a):a},clonePosition:function(a){return{x:a.x,y:a.y}},uuid:function(a,b){for(b=a="";a++<36;b+=51*a&52?(15^a?8^Math.random()*(20^a?16:4):4).toString(16):"-");return b}};f.makeBoundingBox=e.makeBoundingBox.bind(e),f._staticEmptyObject={},f.staticEmptyObject=function(){return f._staticEmptyObject},f.extend=null!=Object.assign?Object.assign.bind(Object):function(a){for(var b=arguments,c=1;c<b.length;c++){var d=b[c];if(d)for(var e=Object.keys(d),f=0;f<e.length;f++){var g=e[f];a[g]=d[g]}}return a},f["default"]=function(a,b){return void 0===a?b:a},f.removeFromArray=function(a,b,c){for(var d=a.length;d>=0&&(a[d]!==b||(a.splice(d,1),c));d--);},f.clearArray=function(a){a.splice(0,a.length)},f.getPrefixedProperty=function(a,b,c){return c&&(b=this.prependCamel(c,b)),a[b]},f.setPrefixedProperty=function(a,b,c,d){c&&(b=this.prependCamel(c,b)),a[b]=d},[a("./colors"),a("./maps"),{memoize:a("./memoize")},a("./regex"),a("./strings"),a("./timing")].forEach(function(a){f.extend(f,a)}),b.exports=f},{"../is":83,"../math":85,"./colors":99,"./maps":101,"./memoize":102,"./regex":103,"./strings":104,"./timing":105}],101:[function(a,b,c){"use strict";var d=a("../is");b.exports={mapEmpty:function(a){var b=!0;return null!=a?0===Object.keys(a).length:b},pushMap:function(a){var b=this.getMap(a);null==b?this.setMap(this.extend({},a,{value:[a.value]})):b.push(a.value)},setMap:function(a){for(var b,c=a.map,e=a.keys,f=e.length,g=0;g<f;g++){var b=e[g];d.plainObject(b)&&this.error("Tried to set map with object key"),g<e.length-1?(null==c[b]&&(c[b]={}),c=c[b]):c[b]=a.value}},getMap:function(a){for(var b=a.map,c=a.keys,e=c.length,f=0;f<e;f++){var g=c[f];if(d.plainObject(g)&&this.error("Tried to get map with object key"),b=b[g],null==b)return b}return b},deleteMap:function(a){for(var b=a.map,c=a.keys,e=c.length,f=a.keepChildren,g=0;g<e;g++){var h=c[g];d.plainObject(h)&&this.error("Tried to delete map with object key");var i=g===a.keys.length-1;if(i)if(f)for(var j=Object.keys(b),k=0;k<j.length;k++){var l=j[k];f[l]||(b[l]=void 0)}else b[h]=void 0;else b=b[h]}}}},{"../is":83}],102:[function(a,b,c){"use strict";b.exports=function(a,b){b||(b=function(){if(1===arguments.length)return arguments[0];if(0===arguments.length)return"undefined";for(var a=[],b=0;b<arguments.length;b++)a.push(arguments[b]);return a.join("$")});var c=function(){var d,e=this,f=arguments,g=b.apply(e,f),h=c.cache;return(d=h[g])||(d=h[g]=a.apply(e,f)),d};return c.cache={},c}},{}],103:[function(a,b,c){"use strict";var d="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",e="rgb[a]?\\(("+d+"[%]?)\\s*,\\s*("+d+"[%]?)\\s*,\\s*("+d+"[%]?)(?:\\s*,\\s*("+d+"))?\\)",f="rgb[a]?\\((?:"+d+"[%]?)\\s*,\\s*(?:"+d+"[%]?)\\s*,\\s*(?:"+d+"[%]?)(?:\\s*,\\s*(?:"+d+"))?\\)",g="hsl[a]?\\(("+d+")\\s*,\\s*("+d+"[%])\\s*,\\s*("+d+"[%])(?:\\s*,\\s*("+d+"))?\\)",h="hsl[a]?\\((?:"+d+")\\s*,\\s*(?:"+d+"[%])\\s*,\\s*(?:"+d+"[%])(?:\\s*,\\s*(?:"+d+"))?\\)",i="\\#[0-9a-fA-F]{3}",j="\\#[0-9a-fA-F]{6}";b.exports={regex:{number:d,rgba:e,rgbaNoBackRefs:f,hsla:g,hslaNoBackRefs:h,hex3:i,hex6:j}}},{}],104:[function(a,b,c){"use strict";var d=a("./memoize"),e=a("../is");b.exports={camel2dash:d(function(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}),dash2camel:d(function(a){return a.replace(/(-\w)/g,function(a){return a[1].toUpperCase()})}),prependCamel:d(function(a,b){return a+b[0].toUpperCase()+b.substring(1)},function(a,b){return a+"$"+b}),capitalize:function(a){return e.emptyString(a)?a:a.charAt(0).toUpperCase()+a.substring(1)}}},{"../is":83,"./memoize":102}],105:[function(a,b,c){"use strict";var d=a("../window"),e=a("../is"),f=d?d.performance:null,g={},h=f&&f.now?function(){return f.now()}:function(){return Date.now()},i=function(){if(d){if(d.requestAnimationFrame)return function(a){d.requestAnimationFrame(a)};if(d.mozRequestAnimationFrame)return function(a){d.mozRequestAnimationFrame(a)};if(d.webkitRequestAnimationFrame)return function(a){d.webkitRequestAnimationFrame(a)};if(d.msRequestAnimationFrame)return function(a){d.msRequestAnimationFrame(a)}}return function(a){a&&setTimeout(function(){a(h())},1e3/60)}}();g.requestAnimationFrame=function(a){i(a)},g.performanceNow=h,g.throttle=function(a,b,c){var d=!0,f=!0;return c===!1?d=!1:e.plainObject(c)&&(d="leading"in c?c.leading:d,f="trailing"in c?c.trailing:f),c=c||{},c.leading=d,c.maxWait=b,c.trailing=f,g.debounce(a,b,c)},g.now=function(){return Date.now()},g.debounce=function(a,b,c){var d,f,g,h,i,j,k,l=this,m=0,n=!1,o=!0;if(e.fn(a)){if(b=Math.max(0,b)||0,c===!0){var p=!0;o=!1}else e.plainObject(c)&&(p=c.leading,n="maxWait"in c&&(Math.max(b,c.maxWait)||0),o="trailing"in c?c.trailing:o);var q=function(){var c=b-(l.now()-h);if(c<=0){f&&clearTimeout(f);var e=k;f=j=k=void 0,e&&(m=l.now(),g=a.apply(i,d),j||f||(d=i=null))}else j=setTimeout(q,c)},r=function(){j&&clearTimeout(j),f=j=k=void 0,(o||n!==b)&&(m=l.now(),g=a.apply(i,d),j||f||(d=i=null))};return function(){if(d=arguments,h=l.now(),i=this,k=o&&(j||!p),n===!1)var c=p&&!j;else{f||p||(m=h);var e=n-(h-m),s=e<=0;s?(f&&(f=clearTimeout(f)),m=h,g=a.apply(i,d)):f||(f=setTimeout(r,e))}return s&&j?j=clearTimeout(j):j||b===n||(j=setTimeout(q,b)),c&&(s=!0,g=a.apply(i,d)),!s||j||f||(d=i=null),g}}},b.exports=g},{"../is":83,"../window":107}],106:[function(a,b,c){b.exports="2.7.19"},{}],107:[function(a,b,c){b.exports="undefined"==typeof window?null:window},{}]},{},[82])(82)}),function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.cytoscapeCoseBilkent=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(){}var e=a("./FDLayoutConstants");for(var f in e)d[f]=e[f];d.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,d.DEFAULT_RADIAL_SEPARATION=e.DEFAULT_EDGE_LENGTH,d.DEFAULT_COMPONENT_SEPERATION=60,d.TILE=!0,d.TILING_PADDING_VERTICAL=10,d.TILING_PADDING_HORIZONTAL=10,b.exports=d},{"./FDLayoutConstants":10}],2:[function(a,b,c){function d(a,b,c){e.call(this,a,b,c)}var e=a("./FDLayoutEdge");d.prototype=Object.create(e.prototype);for(var f in e)d[f]=e[f];b.exports=d},{"./FDLayoutEdge":11}],3:[function(a,b,c){function d(a,b,c){e.call(this,a,b,c)}var e=a("./LGraph");d.prototype=Object.create(e.prototype);for(var f in e)d[f]=e[f];b.exports=d},{"./LGraph":19}],4:[function(a,b,c){function d(a){e.call(this,a)}var e=a("./LGraphManager");d.prototype=Object.create(e.prototype);for(var f in e)d[f]=e[f];b.exports=d},{"./LGraphManager":20}],5:[function(a,b,c){function d(){e.call(this),this.toBeTiled={}}var e=a("./FDLayout"),f=a("./CoSEGraphManager"),g=a("./CoSEGraph"),h=a("./CoSENode"),i=a("./CoSEEdge"),j=a("./CoSEConstants"),k=a("./FDLayoutConstants"),l=a("./LayoutConstants"),m=a("./Point"),n=a("./PointD"),o=a("./Layout"),p=a("./Integer"),q=a("./IGeometry"),r=a("./LGraph"),s=a("./Transform");d.prototype=Object.create(e.prototype);for(var t in e)d[t]=e[t];d.prototype.newGraphManager=function(){var a=new f(this);return this.graphManager=a,a},d.prototype.newGraph=function(a){return new g(null,this.graphManager,a)},d.prototype.newNode=function(a){return new h(this.graphManager,a)},d.prototype.newEdge=function(a){return new i(null,null,a)},d.prototype.initParameters=function(){e.prototype.initParameters.call(this,arguments),this.isSubLayout||(j.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=j.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=j.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.springConstant=k.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=k.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=k.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=k.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=k.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=k.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR)},d.prototype.layout=function(){var a=l.DEFAULT_CREATE_BENDS_AS_NEEDED;return a&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},d.prototype.classicLayout=function(){if(this.calculateNodesToApplyGravitationTo(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),!this.incremental){var a=this.getFlatForest();a.length>0?this.positionNodesRadially(a):this.positionNodesRandomly()}return this.initSpringEmbedder(),this.runSpringEmbedder(),!0},d.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations)return!0;if(this.totalIterations%k.CONVERGENCE_CHECK_PERIOD==0){if(this.isConverged())return!0;this.coolingFactor=this.initialCoolingFactor*((this.maxIterations-this.totalIterations)/this.maxIterations),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},d.prototype.getPositionsData=function(){for(var a=this.graphManager.getAllNodes(),b={},c=0;c<a.length;c++){var d=a[c].rect,e=a[c].id;b[e]={id:e,x:d.getCenterX(),y:d.getCenterY(),w:d.width,h:d.height}}return b},d.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var a=!1;if("during"===k.ANIMATE)this.emit("layoutstarted");else{for(;!a;)a=this.tick();this.graphManager.updateBounds()}},d.prototype.calculateNodesToApplyGravitationTo=function(){var a,b,c=[],d=this.graphManager.getGraphs(),e=d.length;for(b=0;b<e;b++)a=d[b],a.updateConnected(),a.isConnected||(c=c.concat(a.getNodes()));this.graphManager.setAllNodesToApplyGravitation(c)},d.prototype.createBendpoints=function(){var a=[];a=a.concat(this.graphManager.getAllEdges());var b,c=new HashSet;for(b=0;b<a.length;b++){var d=a[b];if(!c.contains(d)){var e=d.getSource(),f=d.getTarget();if(e==f)d.getBendpoints().push(new n),d.getBendpoints().push(new n),this.createDummyNodesForBendpoints(d),c.add(d);else{var g=[];if(g=g.concat(e.getEdgeListToNode(f)),g=g.concat(f.getEdgeListToNode(e)),!c.contains(g[0])){if(g.length>1){var h;for(h=0;h<g.length;h++){var i=g[h];i.getBendpoints().push(new n),this.createDummyNodesForBendpoints(i)}}c.addAll(list)}}}if(c.size()==a.length)break}},d.prototype.positionNodesRadially=function(a){for(var b=new m(0,0),c=Math.ceil(Math.sqrt(a.length)),e=0,f=0,g=0,h=new n(0,0),i=0;i<a.length;i++){i%c==0&&(g=0,f=e,0!=i&&(f+=j.DEFAULT_COMPONENT_SEPERATION),e=0);var k=a[i],p=o.findCenterOfTree(k);b.x=g,b.y=f,h=d.radialLayout(k,p,b),h.y>e&&(e=Math.floor(h.y)),g=Math.floor(h.x+j.DEFAULT_COMPONENT_SEPERATION)}this.transform(new n(l.WORLD_CENTER_X-h.x/2,l.WORLD_CENTER_Y-h.y/2))},d.radialLayout=function(a,b,c){var e=Math.max(this.maxDiagonalInTree(a),j.DEFAULT_RADIAL_SEPARATION);d.branchRadialLayout(b,null,0,359,0,e);var f=r.calculateBounds(a),g=new s;g.setDeviceOrgX(f.getMinX()),g.setDeviceOrgY(f.getMinY()),g.setWorldOrgX(c.x),g.setWorldOrgY(c.y);for(var h=0;h<a.length;h++){var i=a[h];i.transform(g)}var k=new n(f.getMaxX(),f.getMaxY());return g.inverseTransformPoint(k)},d.branchRadialLayout=function(a,b,c,e,f,g){var h=(e-c+1)/2;h<0&&(h+=180);var i=(h+c)%360,j=i*q.TWO_PI/360,k=(Math.cos(j),f*Math.cos(j)),l=f*Math.sin(j);a.setCenter(k,l);var m=[];m=m.concat(a.getEdges());var n=m.length;null!=b&&n--;for(var o,p=0,r=m.length,s=a.getEdgesBetween(b);s.length>1;){var t=s[0];s.splice(0,1);var u=m.indexOf(t);u>=0&&m.splice(u,1),r--,n--}o=null!=b?(m.indexOf(s[0])+1)%r:0;for(var v=Math.abs(e-c)/n,w=o;p!=n;w=++w%r){var x=m[w].getOtherEnd(a);if(x!=b){var y=(c+p*v)%360,z=(y+v)%360;d.branchRadialLayout(x,a,y,z,f+g,g),p++}}},d.maxDiagonalInTree=function(a){for(var b=p.MIN_VALUE,c=0;c<a.length;c++){var d=a[c],e=d.getDiagonal();e>b&&(b=e)}return b},d.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},d.prototype.groupZeroDegreeMembers=function(){var a=this,b={};this.memberGroups={},this.idToDummyNode={};for(var c=[],d=this.graphManager.getAllNodes(),e=0;e<d.length;e++){var f=d[e],g=f.getParent();0!==this.getNodeDegreeWithChildren(f)||void 0!=g.id&&this.getToBeTiled(g)||c.push(f)}for(var e=0;e<c.length;e++){var f=c[e],i=f.getParent().id;"undefined"==typeof b[i]&&(b[i]=[]),b[i]=b[i].concat(f)}Object.keys(b).forEach(function(c){if(b[c].length>1){var d="DummyCompound_"+c;a.memberGroups[d]=b[c];var e=b[c][0].getParent(),f=new h(a.graphManager);f.id=d,f.paddingLeft=e.paddingLeft||0,f.paddingRight=e.paddingRight||0,f.paddingBottom=e.paddingBottom||0,f.paddingTop=e.paddingTop||0,a.idToDummyNode[d]=f;var g=a.getGraphManager().add(a.newGraph(),f),i=e.getChild();i.add(f);for(var j=0;j<b[c].length;j++){var k=b[c][j];i.remove(k),g.add(k)}}})},d.prototype.clearCompounds=function(){var a={},b={};this.performDFSOnCompounds();for(var c=0;c<this.compoundOrder.length;c++)b[this.compoundOrder[c].id]=this.compoundOrder[c],a[this.compoundOrder[c].id]=[].concat(this.compoundOrder[c].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[c].getChild()),this.compoundOrder[c].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(a,b)},d.prototype.clearZeroDegreeMembers=function(){var a=this,b=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(c){var d=a.idToDummyNode[c];b[c]=a.tileNodes(a.memberGroups[c],d.paddingLeft+d.paddingRight),d.rect.width=b[c].width,d.rect.height=b[c].height})},d.prototype.repopulateCompounds=function(){for(var a=this.compoundOrder.length-1;a>=0;a--){var b=this.compoundOrder[a],c=b.id,d=b.paddingLeft,e=b.paddingTop;this.adjustLocations(this.tiledMemberPack[c],b.rect.x,b.rect.y,d,e)}},d.prototype.repopulateZeroDegreeMembers=function(){var a=this,b=this.tiledZeroDegreePack;Object.keys(b).forEach(function(c){var d=a.idToDummyNode[c],e=d.paddingLeft,f=d.paddingTop;a.adjustLocations(b[c],d.rect.x,d.rect.y,e,f)})},d.prototype.getToBeTiled=function(a){var b=a.id;if(null!=this.toBeTiled[b])return this.toBeTiled[b];var c=a.getChild();if(null==c)return this.toBeTiled[b]=!1,!1;for(var d=c.getNodes(),e=0;e<d.length;e++){var f=d[e];if(this.getNodeDegree(f)>0)return this.toBeTiled[b]=!1,!1;if(null!=f.getChild()){if(!this.getToBeTiled(f))return this.toBeTiled[b]=!1,!1}else this.toBeTiled[f.id]=!1}return this.toBeTiled[b]=!0,!0},d.prototype.getNodeDegree=function(a){for(var b=(a.id,a.getEdges()),c=0,d=0;d<b.length;d++){var e=b[d];e.getSource().id!==e.getTarget().id&&(c+=1)}return c},d.prototype.getNodeDegreeWithChildren=function(a){var b=this.getNodeDegree(a);if(null==a.getChild())return b;for(var c=a.getChild().getNodes(),d=0;d<c.length;d++){var e=c[d];b+=this.getNodeDegreeWithChildren(e)}return b},d.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},d.prototype.fillCompexOrderByDFS=function(a){for(var b=0;b<a.length;b++){var c=a[b];null!=c.getChild()&&this.fillCompexOrderByDFS(c.getChild().getNodes()),this.getToBeTiled(c)&&this.compoundOrder.push(c)}},d.prototype.adjustLocations=function(a,b,c,d,e){b+=d,c+=e;for(var f=b,g=0;g<a.rows.length;g++){var h=a.rows[g];b=f;for(var i=0,j=0;j<h.length;j++){var k=h[j];k.rect.x=b,k.rect.y=c,b+=k.rect.width+a.horizontalPadding,k.rect.height>i&&(i=k.rect.height)}c+=i+a.verticalPadding}},d.prototype.tileCompoundMembers=function(a,b){var c=this;this.tiledMemberPack=[],Object.keys(a).forEach(function(d){var e=b[d];c.tiledMemberPack[d]=c.tileNodes(a[d],e.paddingLeft+e.paddingRight),e.rect.width=c.tiledMemberPack[d].width+20,e.rect.height=c.tiledMemberPack[d].height+20})},d.prototype.tileNodes=function(a,b){var c=j.TILING_PADDING_VERTICAL,d=j.TILING_PADDING_HORIZONTAL,e={rows:[],rowWidth:[],rowHeight:[],width:20,height:20,verticalPadding:c,horizontalPadding:d};a.sort(function(a,b){return a.rect.width*a.rect.height>b.rect.width*b.rect.height?-1:a.rect.width*a.rect.height<b.rect.width*b.rect.height?1:0});for(var f=0;f<a.length;f++){var g=a[f];0==e.rows.length?this.insertNodeToRow(e,g,0,b):this.canAddHorizontal(e,g.rect.width,g.rect.height)?this.insertNodeToRow(e,g,this.getShortestRowIndex(e),b):this.insertNodeToRow(e,g,e.rows.length,b),this.shiftToLastRow(e)}return e},d.prototype.insertNodeToRow=function(a,b,c,d){var e=d;if(c==a.rows.length){var f=[];a.rows.push(f),a.rowWidth.push(e),a.rowHeight.push(0)}var g=a.rowWidth[c]+b.rect.width;a.rows[c].length>0&&(g+=a.horizontalPadding),a.rowWidth[c]=g,a.width<g&&(a.width=g);var h=b.rect.height;c>0&&(h+=a.verticalPadding);var i=0;h>a.rowHeight[c]&&(i=a.rowHeight[c],a.rowHeight[c]=h,i=a.rowHeight[c]-i),a.height+=i,a.rows[c].push(b)},d.prototype.getShortestRowIndex=function(a){for(var b=-1,c=Number.MAX_VALUE,d=0;d<a.rows.length;d++)a.rowWidth[d]<c&&(b=d,c=a.rowWidth[d]);return b},d.prototype.getLongestRowIndex=function(a){for(var b=-1,c=Number.MIN_VALUE,d=0;d<a.rows.length;d++)a.rowWidth[d]>c&&(b=d,c=a.rowWidth[d]);return b},d.prototype.canAddHorizontal=function(a,b,c){var d=this.getShortestRowIndex(a);if(d<0)return!0;var e=a.rowWidth[d];if(e+a.horizontalPadding+b<=a.width)return!0;var f=0;a.rowHeight[d]<c&&d>0&&(f=c+a.verticalPadding-a.rowHeight[d]);var g;g=a.width-e>=b+a.horizontalPadding?(a.height+f)/(e+b+a.horizontalPadding):(a.height+f)/a.width,f=c+a.verticalPadding;var h;return h=a.width<b?(a.height+f)/b:(a.height+f)/a.width,h<1&&(h=1/h),g<1&&(g=1/g),g<h},d.prototype.shiftToLastRow=function(a){var b=this.getLongestRowIndex(a),c=a.rowWidth.length-1,d=a.rows[b],e=d[d.length-1],f=e.width+a.horizontalPadding;if(a.width-a.rowWidth[c]>f&&b!=c){d.splice(-1,1),a.rows[c].push(e),a.rowWidth[b]=a.rowWidth[b]-f,a.rowWidth[c]=a.rowWidth[c]+f,a.width=a.rowWidth[instance.getLongestRowIndex(a)];for(var g=Number.MIN_VALUE,h=0;h<d.length;h++)d[h].height>g&&(g=d[h].height);b>0&&(g+=a.verticalPadding);var i=a.rowHeight[b]+a.rowHeight[c];a.rowHeight[b]=g,a.rowHeight[c]<e.height+a.verticalPadding&&(a.rowHeight[c]=e.height+a.verticalPadding);var j=a.rowHeight[b]+a.rowHeight[c];a.height+=j-i,this.shiftToLastRow(a)}},d.prototype.tilingPreLayout=function(){j.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},d.prototype.tilingPostLayout=function(){j.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},b.exports=d},{"./CoSEConstants":1,"./CoSEEdge":2,"./CoSEGraph":3,"./CoSEGraphManager":4,"./CoSENode":6,"./FDLayout":9,"./FDLayoutConstants":10,"./IGeometry":15,"./Integer":17,"./LGraph":19,"./Layout":23,"./LayoutConstants":24,"./Point":25,"./PointD":26,"./Transform":29}],6:[function(a,b,c){function d(a,b,c,d){e.call(this,a,b,c,d)}var e=a("./FDLayoutNode"),f=a("./IMath");d.prototype=Object.create(e.prototype);for(var g in e)d[g]=e[g];d.prototype.move=function(){var a=this.graphManager.getLayout();this.displacementX=a.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX),this.displacementY=a.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY),Math.abs(this.displacementX)>a.coolingFactor*a.maxNodeDisplacement&&(this.displacementX=a.coolingFactor*a.maxNodeDisplacement*f.sign(this.displacementX)),Math.abs(this.displacementY)>a.coolingFactor*a.maxNodeDisplacement&&(this.displacementY=a.coolingFactor*a.maxNodeDisplacement*f.sign(this.displacementY)),null==this.child?this.moveBy(this.displacementX,this.displacementY):0==this.child.getNodes().length?this.moveBy(this.displacementX,this.displacementY):this.propogateDisplacementToChildren(this.displacementX,this.displacementY),a.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},d.prototype.propogateDisplacementToChildren=function(a,b){for(var c,d=this.getChild().getNodes(),e=0;e<d.length;e++)c=d[e],null==c.getChild()?(c.moveBy(a,b),c.displacementX+=a,c.displacementY+=b):c.propogateDisplacementToChildren(a,b)},d.prototype.setPred1=function(a){this.pred1=a},d.prototype.getPred1=function(){return pred1},d.prototype.getPred2=function(){return pred2},d.prototype.setNext=function(a){this.next=a},d.prototype.getNext=function(){return next},d.prototype.setProcessed=function(a){this.processed=a},d.prototype.isProcessed=function(){return processed},b.exports=d},{"./FDLayoutNode":12,"./IMath":16}],7:[function(a,b,c){function d(a,b){this.width=0,this.height=0,null!==a&&null!==b&&(this.height=b,this.width=a)}d.prototype.getWidth=function(){return this.width},d.prototype.setWidth=function(a){this.width=a},d.prototype.getHeight=function(){return this.height},d.prototype.setHeight=function(a){this.height=a},b.exports=d},{}],8:[function(a,b,c){function d(){this.listeners=[]}var e=d.prototype;e.addListener=function(a,b){this.listeners.push({event:a,callback:b})},e.removeListener=function(a,b){for(var c=this.listeners.length;c>=0;c--){var d=this.listeners[c];d.event===a&&d.callback===b&&this.listeners.splice(c,1)}},e.emit=function(a,b){for(var c=0;c<this.listeners.length;c++){var d=this.listeners[c];a===d.event&&d.callback(b)}},b.exports=d},{}],9:[function(a,b,c){function d(){e.call(this),this.useSmartIdealEdgeLengthCalculation=f.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.idealEdgeLength=f.DEFAULT_EDGE_LENGTH,this.springConstant=f.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=f.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=f.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=f.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=f.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=f.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*f.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=f.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=f.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=f.MAX_ITERATIONS}var e=a("./Layout"),f=a("./FDLayoutConstants"),g=a("./LayoutConstants"),h=a("./IGeometry"),i=a("./IMath");d.prototype=Object.create(e.prototype);for(var j in e)d[j]=e[j];d.prototype.initParameters=function(){e.prototype.initParameters.call(this,arguments),this.layoutQuality==g.DRAFT_QUALITY?(this.displacementThresholdPerNode+=.3,this.maxIterations*=.8):this.layoutQuality==g.PROOF_QUALITY&&(this.displacementThresholdPerNode-=.3,this.maxIterations*=1.2),this.totalIterations=0,this.notAnimatedIterations=0},d.prototype.calcIdealEdgeLengths=function(){for(var a,b,c,d,e,h,i=this.getGraphManager().getAllEdges(),j=0;j<i.length;j++)a=i[j],a.idealLength=this.idealEdgeLength,a.isInterGraph&&(c=a.getSource(),d=a.getTarget(),e=a.getSourceInLca().getEstimatedSize(),h=a.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(a.idealLength+=e+h-2*g.SIMPLE_NODE_SIZE),b=a.getLca().getInclusionTreeDepth(),a.idealLength+=f.DEFAULT_EDGE_LENGTH*f.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(c.getInclusionTreeDepth()+d.getInclusionTreeDepth()-2*b))},d.prototype.initSpringEmbedder=function(){this.incremental?this.maxNodeDisplacement=f.MAX_NODE_DISPLACEMENT_INCREMENTAL:(this.coolingFactor=1,this.initialCoolingFactor=1,this.maxNodeDisplacement=f.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(5*this.getAllNodes().length,this.maxIterations),this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},d.prototype.calcSpringForces=function(){for(var a,b=this.getAllEdges(),c=0;c<b.length;c++)a=b[c],this.calcSpringForce(a,a.idealLength)},d.prototype.calcRepulsionForces=function(){var a,b,c,d,e=this.getAllNodes();for(a=0;a<e.length;a++)for(c=e[a],b=a+1;b<e.length;b++)d=e[b],c.getOwner()==d.getOwner()&&this.calcRepulsionForce(c,d)},d.prototype.calcGravitationalForces=function(){for(var a,b=this.getAllNodesToApplyGravitation(),c=0;c<b.length;c++)a=b[c],this.calcGravitationalForce(a)},d.prototype.moveNodes=function(){for(var a,b=this.getAllNodes(),c=0;c<b.length;c++)a=b[c],a.move()},d.prototype.calcSpringForce=function(a,b){var c,d,e,f,g=a.getSource(),h=a.getTarget();if(this.uniformLeafNodeSizes&&null==g.getChild()&&null==h.getChild())a.updateLengthSimple();else if(a.updateLength(),a.isOverlapingSourceAndTarget)return;c=a.getLength(),d=this.springConstant*(c-b),e=d*(a.lengthX/c),f=d*(a.lengthY/c),g.springForceX+=e,g.springForceY+=f,h.springForceX-=e,h.springForceY-=f},d.prototype.calcRepulsionForce=function(a,b){var c,d,e,g,j,k,l,m=a.getRect(),n=b.getRect(),o=new Array(2),p=new Array(4);m.intersects(n)?(h.calcSeparationAmount(m,n,o,f.DEFAULT_EDGE_LENGTH/2),
k=o[0],l=o[1]):(this.uniformLeafNodeSizes&&null==a.getChild()&&null==b.getChild()?(c=n.getCenterX()-m.getCenterX(),d=n.getCenterY()-m.getCenterY()):(h.getIntersection(m,n,p),c=p[2]-p[0],d=p[3]-p[1]),Math.abs(c)<f.MIN_REPULSION_DIST&&(c=i.sign(c)*f.MIN_REPULSION_DIST),Math.abs(d)<f.MIN_REPULSION_DIST&&(d=i.sign(d)*f.MIN_REPULSION_DIST),e=c*c+d*d,g=Math.sqrt(e),j=this.repulsionConstant/e,k=j*c/g,l=j*d/g),a.repulsionForceX-=k,a.repulsionForceY-=l,b.repulsionForceX+=k,b.repulsionForceY+=l},d.prototype.calcGravitationalForce=function(a){var b,c,d,e,f,g,h,i;b=a.getOwner(),c=(b.getRight()+b.getLeft())/2,d=(b.getTop()+b.getBottom())/2,e=a.getCenterX()-c,f=a.getCenterY()-d,g=Math.abs(e),h=Math.abs(f),a.getOwner()==this.graphManager.getRoot()?(Math.floor(80),i=Math.floor(b.getEstimatedSize()*this.gravityRangeFactor),(g>i||h>i)&&(a.gravitationForceX=-this.gravityConstant*e,a.gravitationForceY=-this.gravityConstant*f)):(i=Math.floor(b.getEstimatedSize()*this.compoundGravityRangeFactor),(g>i||h>i)&&(a.gravitationForceX=-this.gravityConstant*e*this.compoundGravityConstant,a.gravitationForceY=-this.gravityConstant*f*this.compoundGravityConstant))},d.prototype.isConverged=function(){var a,b=!1;return this.totalIterations>this.maxIterations/3&&(b=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),a=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,a||b},d.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},d.prototype.calcRepulsionRange=function(){return 0},b.exports=d},{"./FDLayoutConstants":10,"./IGeometry":15,"./IMath":16,"./Layout":23,"./LayoutConstants":24}],10:[function(a,b,c){function d(){}var e=a("./LayoutConstants");for(var f in e)d[f]=e[f];d.MAX_ITERATIONS=2500,d.DEFAULT_EDGE_LENGTH=50,d.DEFAULT_SPRING_STRENGTH=.45,d.DEFAULT_REPULSION_STRENGTH=4500,d.DEFAULT_GRAVITY_STRENGTH=.4,d.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,d.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,d.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,d.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,d.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,d.DEFAULT_COOLING_FACTOR_INCREMENTAL=.8,d.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,d.MAX_NODE_DISPLACEMENT=3*d.MAX_NODE_DISPLACEMENT_INCREMENTAL,d.MIN_REPULSION_DIST=d.DEFAULT_EDGE_LENGTH/10,d.CONVERGENCE_CHECK_PERIOD=100,d.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,d.MIN_EDGE_LENGTH=1,d.GRID_CALCULATION_CHECK_PERIOD=10,b.exports=d},{"./LayoutConstants":24}],11:[function(a,b,c){function d(a,b,c){e.call(this,a,b,c),this.idealLength=f.DEFAULT_EDGE_LENGTH}var e=a("./LEdge"),f=a("./FDLayoutConstants");d.prototype=Object.create(e.prototype);for(var g in e)d[g]=e[g];b.exports=d},{"./FDLayoutConstants":10,"./LEdge":18}],12:[function(a,b,c){function d(a,b,c,d){e.call(this,a,b,c,d),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}var e=a("./LNode");d.prototype=Object.create(e.prototype);for(var f in e)d[f]=e[f];d.prototype.setGridCoordinates=function(a,b,c,d){this.startX=a,this.finishX=b,this.startY=c,this.finishY=d},b.exports=d},{"./LNode":22}],13:[function(a,b,c){function d(){this.map={},this.keys=[]}var e=a("./UniqueIDGeneretor");d.prototype.put=function(a,b){var c=e.createID(a);this.contains(c)||(this.map[c]=b,this.keys.push(a))},d.prototype.contains=function(a){e.createID(a);return null!=this.map[a]},d.prototype.get=function(a){var b=e.createID(a);return this.map[b]},d.prototype.keySet=function(){return this.keys},b.exports=d},{"./UniqueIDGeneretor":30}],14:[function(a,b,c){function d(){this.set={}}var e=a("./UniqueIDGeneretor");d.prototype.add=function(a){var b=e.createID(a);this.contains(b)||(this.set[b]=a)},d.prototype.remove=function(a){delete this.set[e.createID(a)]},d.prototype.clear=function(){this.set={}},d.prototype.contains=function(a){return this.set[e.createID(a)]==a},d.prototype.isEmpty=function(){return 0===this.size()},d.prototype.size=function(){return Object.keys(this.set).length},d.prototype.addAllTo=function(a){for(var b=Object.keys(this.set),c=b.length,d=0;d<c;d++)a.push(this.set[b[d]])},d.prototype.size=function(){return Object.keys(this.set).length},d.prototype.addAll=function(a){for(var b=a.length,c=0;c<b;c++){var d=a[c];this.add(d)}},b.exports=d},{"./UniqueIDGeneretor":30}],15:[function(a,b,c){function d(){}d.calcSeparationAmount=function(a,b,c,e){if(!a.intersects(b))throw"assert failed";var f=new Array(2);d.decideDirectionsForOverlappingNodes(a,b,f),c[0]=Math.min(a.getRight(),b.getRight())-Math.max(a.x,b.x),c[1]=Math.min(a.getBottom(),b.getBottom())-Math.max(a.y,b.y),a.getX()<=b.getX()&&a.getRight()>=b.getRight()?c[0]+=Math.min(b.getX()-a.getX(),a.getRight()-b.getRight()):b.getX()<=a.getX()&&b.getRight()>=a.getRight()&&(c[0]+=Math.min(a.getX()-b.getX(),b.getRight()-a.getRight())),a.getY()<=b.getY()&&a.getBottom()>=b.getBottom()?c[1]+=Math.min(b.getY()-a.getY(),a.getBottom()-b.getBottom()):b.getY()<=a.getY()&&b.getBottom()>=a.getBottom()&&(c[1]+=Math.min(a.getY()-b.getY(),b.getBottom()-a.getBottom()));var g=Math.abs((b.getCenterY()-a.getCenterY())/(b.getCenterX()-a.getCenterX()));b.getCenterY()==a.getCenterY()&&b.getCenterX()==a.getCenterX()&&(g=1);var h=g*c[0],i=c[1]/g;c[0]<i?i=c[0]:h=c[1],c[0]=-1*f[0]*(i/2+e),c[1]=-1*f[1]*(h/2+e)},d.decideDirectionsForOverlappingNodes=function(a,b,c){a.getCenterX()<b.getCenterX()?c[0]=-1:c[0]=1,a.getCenterY()<b.getCenterY()?c[1]=-1:c[1]=1},d.getIntersection2=function(a,b,c){var e=a.getCenterX(),f=a.getCenterY(),g=b.getCenterX(),h=b.getCenterY();if(a.intersects(b))return c[0]=e,c[1]=f,c[2]=g,c[3]=h,!0;var i=a.getX(),j=a.getY(),k=a.getRight(),l=a.getX(),m=a.getBottom(),n=a.getRight(),o=a.getWidthHalf(),p=a.getHeightHalf(),q=b.getX(),r=b.getY(),s=b.getRight(),t=b.getX(),u=b.getBottom(),v=b.getRight(),w=b.getWidthHalf(),x=b.getHeightHalf(),y=!1,z=!1;if(e==g){if(f>h)return c[0]=e,c[1]=j,c[2]=g,c[3]=u,!1;if(f<h)return c[0]=e,c[1]=m,c[2]=g,c[3]=r,!1}else if(f==h){if(e>g)return c[0]=i,c[1]=f,c[2]=s,c[3]=h,!1;if(e<g)return c[0]=k,c[1]=f,c[2]=q,c[3]=h,!1}else{var A,B,C,D,E,F,G=a.height/a.width,H=b.height/b.width,I=(h-f)/(g-e);if(-G==I?e>g?(c[0]=l,c[1]=m,y=!0):(c[0]=k,c[1]=j,y=!0):G==I&&(e>g?(c[0]=i,c[1]=j,y=!0):(c[0]=n,c[1]=m,y=!0)),-H==I?g>e?(c[2]=t,c[3]=u,z=!0):(c[2]=s,c[3]=r,z=!0):H==I&&(g>e?(c[2]=q,c[3]=r,z=!0):(c[2]=v,c[3]=u,z=!0)),y&&z)return!1;if(e>g?f>h?(A=d.getCardinalDirection(G,I,4),B=d.getCardinalDirection(H,I,2)):(A=d.getCardinalDirection(-G,I,3),B=d.getCardinalDirection(-H,I,1)):f>h?(A=d.getCardinalDirection(-G,I,1),B=d.getCardinalDirection(-H,I,3)):(A=d.getCardinalDirection(G,I,2),B=d.getCardinalDirection(H,I,4)),!y)switch(A){case 1:D=j,C=e+-p/I,c[0]=C,c[1]=D;break;case 2:C=n,D=f+o*I,c[0]=C,c[1]=D;break;case 3:D=m,C=e+p/I,c[0]=C,c[1]=D;break;case 4:C=l,D=f+-o*I,c[0]=C,c[1]=D}if(!z)switch(B){case 1:F=r,E=g+-x/I,c[2]=E,c[3]=F;break;case 2:E=v,F=h+w*I,c[2]=E,c[3]=F;break;case 3:F=u,E=g+x/I,c[2]=E,c[3]=F;break;case 4:E=t,F=h+-w*I,c[2]=E,c[3]=F}}return!1},d.getCardinalDirection=function(a,b,c){return a>b?c:1+c%4},d.getIntersection=function(a,b,c,e){if(null==e)return d.getIntersection2(a,b,c);var f,g,h,i,j,k,l,m,n,o=a.x,p=a.y,q=b.x,r=b.y,s=c.x,t=c.y,u=e.x,v=e.y;return h=r-p,j=o-q,l=q*p-o*r,i=v-t,k=s-u,m=u*t-s*v,n=h*k-i*j,0==n?null:(f=(j*m-k*l)/n,g=(i*l-h*m)/n,new Point(f,g))},d.HALF_PI=.5*Math.PI,d.ONE_AND_HALF_PI=1.5*Math.PI,d.TWO_PI=2*Math.PI,d.THREE_PI=3*Math.PI,b.exports=d},{}],16:[function(a,b,c){function d(){}d.sign=function(a){return a>0?1:a<0?-1:0},d.floor=function(a){return a<0?Math.ceil(a):Math.floor(a)},d.ceil=function(a){return a<0?Math.floor(a):Math.ceil(a)},b.exports=d},{}],17:[function(a,b,c){function d(){}d.MAX_VALUE=2147483647,d.MIN_VALUE=-2147483648,b.exports=d},{}],18:[function(a,b,c){function d(a,b,c){e.call(this,c),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=c,this.bendpoints=[],this.source=a,this.target=b}var e=a("./LGraphObject"),f=a("./IGeometry"),g=a("./IMath");d.prototype=Object.create(e.prototype);for(var h in e)d[h]=e[h];d.prototype.getSource=function(){return this.source},d.prototype.getTarget=function(){return this.target},d.prototype.isInterGraph=function(){return this.isInterGraph},d.prototype.getLength=function(){return this.length},d.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},d.prototype.getBendpoints=function(){return this.bendpoints},d.prototype.getLca=function(){return this.lca},d.prototype.getSourceInLca=function(){return this.sourceInLca},d.prototype.getTargetInLca=function(){return this.targetInLca},d.prototype.getOtherEnd=function(a){if(this.source===a)return this.target;if(this.target===a)return this.source;throw"Node is not incident with this edge"},d.prototype.getOtherEndInGraph=function(a,b){for(var c=this.getOtherEnd(a),d=b.getGraphManager().getRoot();;){if(c.getOwner()==b)return c;if(c.getOwner()==d)break;c=c.getOwner().getParent()}return null},d.prototype.updateLength=function(){var a=new Array(4);this.isOverlapingSourceAndTarget=f.getIntersection(this.target.getRect(),this.source.getRect(),a),this.isOverlapingSourceAndTarget||(this.lengthX=a[0]-a[2],this.lengthY=a[1]-a[3],Math.abs(this.lengthX)<1&&(this.lengthX=g.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=g.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},d.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=g.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=g.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},b.exports=d},{"./IGeometry":15,"./IMath":16,"./LGraphObject":21}],19:[function(a,b,c){function d(a,b,c){e.call(this,c),this.estimatedSize=f.MIN_VALUE,this.margin=g.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=a,null!=b&&b instanceof h?this.graphManager=b:null!=b&&b instanceof Layout&&(this.graphManager=b.graphManager)}var e=a("./LGraphObject"),f=a("./Integer"),g=a("./LayoutConstants"),h=a("./LGraphManager"),i=a("./LNode"),j=a("./HashSet"),k=a("./RectangleD"),l=a("./Point");d.prototype=Object.create(e.prototype);for(var m in e)d[m]=e[m];d.prototype.getNodes=function(){return this.nodes},d.prototype.getEdges=function(){return this.edges},d.prototype.getGraphManager=function(){return this.graphManager},d.prototype.getParent=function(){return this.parent},d.prototype.getLeft=function(){return this.left},d.prototype.getRight=function(){return this.right},d.prototype.getTop=function(){return this.top},d.prototype.getBottom=function(){return this.bottom},d.prototype.isConnected=function(){return this.isConnected},d.prototype.add=function(a,b,c){if(null==b&&null==c){var d=a;if(null==this.graphManager)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(d)>-1)throw"Node already in graph!";return d.owner=this,this.getNodes().push(d),d}var e=a;if(!(this.getNodes().indexOf(b)>-1&&this.getNodes().indexOf(c)>-1))throw"Source or target not in graph!";if(b.owner!=c.owner||b.owner!=this)throw"Both owners must be this graph!";return b.owner!=c.owner?null:(e.source=b,e.target=c,e.isInterGraph=!1,this.getEdges().push(e),b.edges.push(e),c!=b&&c.edges.push(e),e)},d.prototype.remove=function(a){var b=a;if(a instanceof i){if(null==b)throw"Node is null!";if(null==b.owner||b.owner!=this)throw"Owner graph is invalid!";if(null==this.graphManager)throw"Owner graph manager is invalid!";for(var c,d=b.edges.slice(),e=d.length,f=0;f<e;f++)c=d[f],c.isInterGraph?this.graphManager.remove(c):c.source.owner.remove(c);var g=this.nodes.indexOf(b);if(g==-1)throw"Node not in owner node list!";this.nodes.splice(g,1)}else if(a instanceof LEdge){var c=a;if(null==c)throw"Edge is null!";if(null==c.source||null==c.target)throw"Source and/or target is null!";if(null==c.source.owner||null==c.target.owner||c.source.owner!=this||c.target.owner!=this)throw"Source and/or target owner is invalid!";var h=c.source.edges.indexOf(c),j=c.target.edges.indexOf(c);if(!(h>-1&&j>-1))throw"Source and/or target doesn't know this edge!";c.source.edges.splice(h,1),c.target!=c.source&&c.target.edges.splice(j,1);var g=c.source.owner.getEdges().indexOf(c);if(g==-1)throw"Not in owner's edge list!";c.source.owner.getEdges().splice(g,1)}},d.prototype.updateLeftTop=function(){for(var a,b,c=f.MAX_VALUE,d=f.MAX_VALUE,e=this.getNodes(),g=e.length,h=0;h<g;h++){var i=e[h];a=Math.floor(i.getTop()),b=Math.floor(i.getLeft()),c>a&&(c=a),d>b&&(d=b)}return c==f.MAX_VALUE?null:(this.left=d-this.margin,this.top=c-this.margin,new l(this.left,this.top))},d.prototype.updateBounds=function(a){for(var b,c,d,e,g=f.MAX_VALUE,h=-f.MAX_VALUE,i=f.MAX_VALUE,j=-f.MAX_VALUE,l=this.nodes,m=l.length,n=0;n<m;n++){var o=l[n];a&&null!=o.child&&o.updateBounds(),b=Math.floor(o.getLeft()),c=Math.floor(o.getRight()),d=Math.floor(o.getTop()),e=Math.floor(o.getBottom()),g>b&&(g=b),h<c&&(h=c),i>d&&(i=d),j<e&&(j=e)}var p=new k(g,i,h-g,j-i);g==f.MAX_VALUE&&(this.left=Math.floor(this.parent.getLeft()),this.right=Math.floor(this.parent.getRight()),this.top=Math.floor(this.parent.getTop()),this.bottom=Math.floor(this.parent.getBottom())),this.left=p.x-this.margin,this.right=p.x+p.width+this.margin,this.top=p.y-this.margin,this.bottom=p.y+p.height+this.margin},d.calculateBounds=function(a){for(var b,c,d,e,g=f.MAX_VALUE,h=-f.MAX_VALUE,i=f.MAX_VALUE,j=-f.MAX_VALUE,l=a.length,m=0;m<l;m++){var n=a[m];b=Math.floor(n.getLeft()),c=Math.floor(n.getRight()),d=Math.floor(n.getTop()),e=Math.floor(n.getBottom()),g>b&&(g=b),h<c&&(h=c),i>d&&(i=d),j<e&&(j=e)}var o=new k(g,i,h-g,j-i);return o},d.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},d.prototype.getEstimatedSize=function(){if(this.estimatedSize==f.MIN_VALUE)throw"assert failed";return this.estimatedSize},d.prototype.calcEstimatedSize=function(){for(var a=0,b=this.nodes,c=b.length,d=0;d<c;d++){var e=b[d];a+=e.calcEstimatedSize()}return 0==a?this.estimatedSize=g.EMPTY_COMPOUND_NODE_SIZE:this.estimatedSize=Math.floor(a/Math.sqrt(this.nodes.length)),Math.floor(this.estimatedSize)},d.prototype.updateConnected=function(){var a=this;if(0==this.nodes.length)return void(this.isConnected=!0);var b,c,d=[],e=new j,f=this.nodes[0];for(d=d.concat(f.withChildren());d.length>0;){f=d.shift(),e.add(f),b=f.getEdges();for(var g=b.length,h=0;h<g;h++){var i=b[h];c=i.getOtherEndInGraph(f,this),null==c||e.contains(c)||(d=d.concat(c.withChildren()))}}if(this.isConnected=!1,e.size()>=this.nodes.length){var k=0,g=e.size();Object.keys(e.set).forEach(function(b){var c=e.set[b];c.owner==a&&k++}),k==this.nodes.length&&(this.isConnected=!0)}},b.exports=d},{"./HashSet":14,"./Integer":17,"./LGraphManager":20,"./LGraphObject":21,"./LNode":22,"./LayoutConstants":24,"./Point":25,"./RectangleD":28}],20:[function(a,b,c){function d(b){e=a("./LGraph"),this.layout=b,this.graphs=[],this.edges=[]}var e,f=a("./LEdge");d.prototype.addRoot=function(){var a=this.layout.newGraph(),b=this.layout.newNode(null),c=this.add(a,b);return this.setRootGraph(c),this.rootGraph},d.prototype.add=function(a,b,c,d,e){if(null==c&&null==d&&null==e){if(null==a)throw"Graph is null!";if(null==b)throw"Parent node is null!";if(this.graphs.indexOf(a)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(a),null!=a.parent)throw"Already has a parent!";if(null!=b.child)throw"Already has a child!";return a.parent=b,b.child=a,a}e=c,d=b,c=a;var f=d.getOwner(),g=e.getOwner();if(null==f||f.getGraphManager()!=this)throw"Source not in this graph mgr!";if(null==g||g.getGraphManager()!=this)throw"Target not in this graph mgr!";if(f==g)return c.isInterGraph=!1,f.add(c,d,e);if(c.isInterGraph=!0,c.source=d,c.target=e,this.edges.indexOf(c)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(c),null==c.source||null==c.target)throw"Edge source and/or target is null!";if(c.source.edges.indexOf(c)!=-1||c.target.edges.indexOf(c)!=-1)throw"Edge already in source and/or target incidency list!";return c.source.edges.push(c),c.target.edges.push(c),c},d.prototype.remove=function(a){if(a instanceof e){var b=a;if(b.getGraphManager()!=this)throw"Graph not in this graph mgr";if(b!=this.rootGraph&&(null==b.parent||b.parent.graphManager!=this))throw"Invalid parent node!";var c=[];c=c.concat(b.getEdges());for(var d,g=c.length,h=0;h<g;h++)d=c[h],b.remove(d);var i=[];i=i.concat(b.getNodes());var j;g=i.length;for(var h=0;h<g;h++)j=i[h],b.remove(j);b==this.rootGraph&&this.setRootGraph(null);var k=this.graphs.indexOf(b);this.graphs.splice(k,1),b.parent=null}else if(a instanceof f){if(d=a,null==d)throw"Edge is null!";if(!d.isInterGraph)throw"Not an inter-graph edge!";if(null==d.source||null==d.target)throw"Source and/or target is null!";if(d.source.edges.indexOf(d)==-1||d.target.edges.indexOf(d)==-1)throw"Source and/or target doesn't know this edge!";var k=d.source.edges.indexOf(d);if(d.source.edges.splice(k,1),k=d.target.edges.indexOf(d),d.target.edges.splice(k,1),null==d.source.owner||null==d.source.owner.getGraphManager())throw"Edge owner graph or owner graph manager is null!";if(d.source.owner.getGraphManager().edges.indexOf(d)==-1)throw"Not in owner graph manager's edge list!";var k=d.source.owner.getGraphManager().edges.indexOf(d);d.source.owner.getGraphManager().edges.splice(k,1)}},d.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},d.prototype.getGraphs=function(){return this.graphs},d.prototype.getAllNodes=function(){if(null==this.allNodes){for(var a=[],b=this.getGraphs(),c=b.length,d=0;d<c;d++)a=a.concat(b[d].getNodes());this.allNodes=a}return this.allNodes},d.prototype.resetAllNodes=function(){this.allNodes=null},d.prototype.resetAllEdges=function(){this.allEdges=null},d.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},d.prototype.getAllEdges=function(){if(null==this.allEdges){for(var a=[],b=this.getGraphs(),c=(b.length,0);c<b.length;c++)a=a.concat(b[c].getEdges());a=a.concat(this.edges),this.allEdges=a}return this.allEdges},d.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},d.prototype.setAllNodesToApplyGravitation=function(a){if(null!=this.allNodesToApplyGravitation)throw"assert failed";this.allNodesToApplyGravitation=a},d.prototype.getRoot=function(){return this.rootGraph},d.prototype.setRootGraph=function(a){if(a.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=a,null==a.parent&&(a.parent=this.layout.newNode("Root node"))},d.prototype.getLayout=function(){return this.layout},d.prototype.isOneAncestorOfOther=function(a,b){if(null==a||null==b)throw"assert failed";if(a==b)return!0;for(var c,d=a.getOwner();;){if(c=d.getParent(),null==c)break;if(c==b)return!0;if(d=c.getOwner(),null==d)break}for(d=b.getOwner();;){if(c=d.getParent(),null==c)break;if(c==a)return!0;if(d=c.getOwner(),null==d)break}return!1},d.prototype.calcLowestCommonAncestors=function(){for(var a,b,c,d,e,f=this.getAllEdges(),g=f.length,h=0;h<g;h++)if(a=f[h],b=a.source,c=a.target,a.lca=null,a.sourceInLca=b,a.targetInLca=c,b!=c){for(d=b.getOwner();null==a.lca;){for(e=c.getOwner();null==a.lca;){if(e==d){a.lca=e;break}if(e==this.rootGraph)break;if(null!=a.lca)throw"assert failed";a.targetInLca=e.getParent(),e=a.targetInLca.getOwner()}if(d==this.rootGraph)break;null==a.lca&&(a.sourceInLca=d.getParent(),d=a.sourceInLca.getOwner())}if(null==a.lca)throw"assert failed"}else a.lca=b.getOwner()},d.prototype.calcLowestCommonAncestor=function(a,b){if(a==b)return a.getOwner();for(var c=a.getOwner();;){if(null==c)break;for(var d=b.getOwner();;){if(null==d)break;if(d==c)return d;d=d.getParent().getOwner()}c=c.getParent().getOwner()}return c},d.prototype.calcInclusionTreeDepths=function(a,b){null==a&&null==b&&(a=this.rootGraph,b=1);for(var c,d=a.getNodes(),e=d.length,f=0;f<e;f++)c=d[f],c.inclusionTreeDepth=b,null!=c.child&&this.calcInclusionTreeDepths(c.child,b+1)},d.prototype.includesInvalidEdge=function(){for(var a,b=this.edges.length,c=0;c<b;c++)if(a=this.edges[c],this.isOneAncestorOfOther(a.source,a.target))return!0;return!1},b.exports=d},{"./LEdge":18,"./LGraph":19}],21:[function(a,b,c){function d(a){this.vGraphObject=a}b.exports=d},{}],22:[function(a,b,c){function d(a,b,c,d){null==c&&null==d&&(d=b),e.call(this,d),null!=a.graphManager&&(a=a.graphManager),this.estimatedSize=f.MIN_VALUE,this.inclusionTreeDepth=f.MAX_VALUE,this.vGraphObject=d,this.edges=[],this.graphManager=a,null!=c&&null!=b?this.rect=new g(b.x,b.y,c.width,c.height):this.rect=new g}var e=a("./LGraphObject"),f=a("./Integer"),g=a("./RectangleD"),h=a("./LayoutConstants"),i=a("./RandomSeed"),j=a("./PointD"),k=a("./HashSet");d.prototype=Object.create(e.prototype);for(var l in e)d[l]=e[l];d.prototype.getEdges=function(){return this.edges},d.prototype.getChild=function(){return this.child},d.prototype.getOwner=function(){if(null!=this.owner&&!(null==this.owner||this.owner.getNodes().indexOf(this)>-1))throw"assert failed";return this.owner},d.prototype.getWidth=function(){return this.rect.width},d.prototype.setWidth=function(a){this.rect.width=a},d.prototype.getHeight=function(){return this.rect.height},d.prototype.setHeight=function(a){this.rect.height=a},d.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},d.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},d.prototype.getCenter=function(){return new j(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},d.prototype.getLocation=function(){return new j(this.rect.x,this.rect.y)},d.prototype.getRect=function(){return this.rect},d.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},d.prototype.setRect=function(a,b){this.rect.x=a.x,this.rect.y=a.y,this.rect.width=b.width,this.rect.height=b.height},d.prototype.setCenter=function(a,b){this.rect.x=a-this.rect.width/2,this.rect.y=b-this.rect.height/2},d.prototype.setLocation=function(a,b){this.rect.x=a,this.rect.y=b},d.prototype.moveBy=function(a,b){this.rect.x+=a,this.rect.y+=b},d.prototype.getEdgeListToNode=function(a){var b=[],c=this;return c.edges.forEach(function(d){if(d.target==a){if(d.source!=c)throw"Incorrect edge source!";b.push(d)}}),b},d.prototype.getEdgesBetween=function(a){var b=[],c=this;return c.edges.forEach(function(d){if(d.source!=c&&d.target!=c)throw"Incorrect edge source and/or target";d.target!=a&&d.source!=a||b.push(d)}),b},d.prototype.getNeighborsList=function(){var a=new k,b=this;return b.edges.forEach(function(c){if(c.source==b)a.add(c.target);else{if(c.target!=b)throw"Incorrect incidency!";a.add(c.source)}}),a},d.prototype.withChildren=function(){var a,b=[];if(b.push(this),null!=this.child)for(var c=this.child.getNodes(),d=0;d<c.length;d++)a=c[d],b=b.concat(a.withChildren());return b},d.prototype.getEstimatedSize=function(){if(this.estimatedSize==f.MIN_VALUE)throw"assert failed";return this.estimatedSize},d.prototype.calcEstimatedSize=function(){return null==this.child?this.estimatedSize=Math.floor((this.rect.width+this.rect.height)/2):(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},d.prototype.scatter=function(){var a,b,c=-h.INITIAL_WORLD_BOUNDARY,d=h.INITIAL_WORLD_BOUNDARY;a=h.WORLD_CENTER_X+i.nextDouble()*(d-c)+c;var e=-h.INITIAL_WORLD_BOUNDARY,f=h.INITIAL_WORLD_BOUNDARY;b=h.WORLD_CENTER_Y+i.nextDouble()*(f-e)+e,this.rect.x=a,this.rect.y=b},d.prototype.updateBounds=function(){if(null==this.getChild())throw"assert failed";if(0!=this.getChild().getNodes().length){var a=this.getChild();a.updateBounds(!0),this.rect.x=a.getLeft(),this.rect.y=a.getTop(),this.setWidth(a.getRight()-a.getLeft()),this.setHeight(a.getBottom()-a.getTop())}},d.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==f.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},d.prototype.transform=function(a){var b=this.rect.x;b>h.WORLD_BOUNDARY?b=h.WORLD_BOUNDARY:b<-h.WORLD_BOUNDARY&&(b=-h.WORLD_BOUNDARY);var c=this.rect.y;c>h.WORLD_BOUNDARY?c=h.WORLD_BOUNDARY:c<-h.WORLD_BOUNDARY&&(c=-h.WORLD_BOUNDARY);var d=new j(b,c),e=a.inverseTransformPoint(d);this.setLocation(e.x,e.y)},d.prototype.getLeft=function(){return this.rect.x},d.prototype.getRight=function(){return this.rect.x+this.rect.width},d.prototype.getTop=function(){return this.rect.y},d.prototype.getBottom=function(){return this.rect.y+this.rect.height},d.prototype.getParent=function(){return null==this.owner?null:this.owner.getParent()},b.exports=d},{"./HashSet":14,"./Integer":17,"./LGraphObject":21,"./LayoutConstants":24,"./PointD":26,"./RandomSeed":27,"./RectangleD":28}],23:[function(a,b,c){function d(a){m.call(this),this.layoutQuality=e.DEFAULT_QUALITY,this.createBendsAsNeeded=e.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=e.DEFAULT_INCREMENTAL,this.animationOnLayout=e.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=e.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=e.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=e.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new f,this.graphManager=new g(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,null!=a&&(this.isRemoteUse=a)}var e=a("./LayoutConstants"),f=a("./HashMap"),g=a("./LGraphManager"),h=a("./LNode"),i=a("./LEdge"),j=a("./LGraph"),k=a("./PointD"),l=a("./Transform"),m=a("./Emitter"),n=a("./HashSet");d.RANDOM_SEED=1,d.prototype=Object.create(m.prototype),d.prototype.getGraphManager=function(){return this.graphManager},d.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},d.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},d.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},d.prototype.newGraphManager=function(){var a=new g(this);return this.graphManager=a,a},d.prototype.newGraph=function(a){return new j(null,this.graphManager,a)},d.prototype.newNode=function(a){return new h(this.graphManager,a)},d.prototype.newEdge=function(a){return new i(null,null,a)},d.prototype.runLayout=function(){this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters();var a;if(null==this.graphManager.getRoot()||0==this.graphManager.getRoot().getNodes().length||this.graphManager.includesInvalidEdge())a=!1;else{var b=0;if(this.isSubLayout||(b=(new Date).getTime()),a=this.layout(),!this.isSubLayout){(new Date).getTime()}}return a&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,a},d.prototype.doPostLayout=function(){this.transform(),this.update()},d.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var a,b=this.graphManager.getAllEdges(),c=0;c<b.length;c++)a=b[c];for(var d,e=this.graphManager.getRoot().getNodes(),c=0;c<e.length;c++)d=e[c];this.update(this.graphManager.getRoot())}},d.prototype.update=function(a){if(null==a)this.update2();else if(a instanceof h){var b=a;if(null!=b.getChild())for(var c=b.getChild().getNodes(),d=0;d<c.length;d++)update(c[d]);if(null!=b.vGraphObject){var e=b.vGraphObject;e.update(b)}}else if(a instanceof i){var f=a;if(null!=f.vGraphObject){var g=f.vGraphObject;g.update(f)}}else if(a instanceof j){var k=a;if(null!=k.vGraphObject){var l=k.vGraphObject;l.update(k)}}},d.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=e.DEFAULT_QUALITY,this.animationDuringLayout=e.DEFAULT_ANIMATION_ON_LAYOUT,this.animationPeriod=e.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=e.DEFAULT_ANIMATION_DURING_LAYOUT,this.incremental=e.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=e.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=e.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(animationOnLayout=!1)},d.prototype.transform=function(a){if(void 0==a)this.transform(new k(0,0));else{var b=new l,c=this.graphManager.getRoot().updateLeftTop();if(null!=c){b.setWorldOrgX(a.x),b.setWorldOrgY(a.y),b.setDeviceOrgX(c.x),b.setDeviceOrgY(c.y);for(var d,e=this.getAllNodes(),f=0;f<e.length;f++)d=e[f],d.transform(b)}}},d.prototype.positionNodesRandomly=function(a){if(void 0==a)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var b,c,d=a.getNodes(),e=0;e<d.length;e++)b=d[e],c=b.getChild(),null==c?b.scatter():0==c.getNodes().length?b.scatter():(this.positionNodesRandomly(c),b.updateBounds())},d.prototype.getFlatForest=function(){for(var a=[],b=!0,c=this.graphManager.getRoot().getNodes(),d=!0,e=0;e<c.length;e++)null!=c[e].getChild()&&(d=!1);if(!d)return a;var g=new n,h=[],i=new f,j=[];for(j=j.concat(c);j.length>0&&b;){for(h.push(j[0]);h.length>0&&b;){var k=h[0];h.splice(0,1),g.add(k);for(var l=k.getEdges(),e=0;e<l.length;e++){var m=l[e].getOtherEnd(k);if(i.get(k)!=m){if(g.contains(m)){b=!1;break}h.push(m),i.put(m,k)}}}if(b){var o=[];g.addAllTo(o),a.push(o);for(var e=0;e<o.length;e++){var p=o[e],q=j.indexOf(p);q>-1&&j.splice(q,1)}g=new n,i=new f}else a=[]}return a},d.prototype.createDummyNodesForBendpoints=function(a){for(var b=[],c=a.source,d=this.graphManager.calcLowestCommonAncestor(a.source,a.target),e=0;e<a.bendpoints.length;e++){var f=this.newNode(null);f.setRect(new Point(0,0),new Dimension(1,1)),d.add(f);var g=this.newEdge(null);this.graphManager.add(g,c,f),b.add(f),c=f}var g=this.newEdge(null);return this.graphManager.add(g,c,a.target),this.edgeToDummyNodes.put(a,b),a.isInterGraph()?this.graphManager.remove(a):d.remove(a),b},d.prototype.createBendpointsFromDummyNodes=function(){var a=[];a=a.concat(this.graphManager.getAllEdges()),a=this.edgeToDummyNodes.keySet().concat(a);for(var b=0;b<a.length;b++){var c=a[b];if(c.bendpoints.length>0){for(var d=this.edgeToDummyNodes.get(c),e=0;e<d.length;e++){var f=d[e],g=new k(f.getCenterX(),f.getCenterY()),h=c.bendpoints.get(e);h.x=g.x,h.y=g.y,f.getOwner().remove(f)}this.graphManager.add(c,c.source,c.target)}}},d.transform=function(a,b,c,d){if(void 0!=c&&void 0!=d){var e=b;if(a<=50){var f=b/c;e-=(b-f)/50*(50-a)}else{var g=b*d;e+=(g-b)/50*(a-50)}return e}var h,i;return a<=50?(h=9*b/500,i=b/10):(h=9*b/50,i=-8*b),h*a+i},d.findCenterOfTree=function(a){var b=[];b=b.concat(a);var c=[],d=new f,e=!1,g=null;1!=b.length&&2!=b.length||(e=!0,g=b[0]);for(var h=0;h<b.length;h++){var i=b[h],j=i.getNeighborsList().size();d.put(i,i.getNeighborsList().size()),1==j&&c.push(i)}var k=[];for(k=k.concat(c);!e;){var l=[];l=l.concat(k),k=[];for(var h=0;h<b.length;h++){var i=b[h],m=b.indexOf(i);m>=0&&b.splice(m,1);var n=i.getNeighborsList();Object.keys(n.set).forEach(function(a){var b=n.set[a];if(c.indexOf(b)<0){var e=d.get(b),f=e-1;1==f&&k.push(b),d.put(b,f)}})}c=c.concat(k),1!=b.length&&2!=b.length||(e=!0,g=b[0])}return g},d.prototype.setGraphManager=function(a){this.graphManager=a},b.exports=d},{"./Emitter":8,"./HashMap":13,"./HashSet":14,"./LEdge":18,"./LGraph":19,"./LGraphManager":20,"./LNode":22,"./LayoutConstants":24,"./PointD":26,"./Transform":29}],24:[function(a,b,c){function d(){}d.PROOF_QUALITY=0,d.DEFAULT_QUALITY=1,d.DRAFT_QUALITY=2,d.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,d.DEFAULT_INCREMENTAL=!1,d.DEFAULT_ANIMATION_ON_LAYOUT=!0,d.DEFAULT_ANIMATION_DURING_LAYOUT=!1,d.DEFAULT_ANIMATION_PERIOD=50,d.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,d.DEFAULT_GRAPH_MARGIN=15,d.SIMPLE_NODE_SIZE=40,d.SIMPLE_NODE_HALF_SIZE=d.SIMPLE_NODE_SIZE/2,d.EMPTY_COMPOUND_NODE_SIZE=40,d.MIN_EDGE_LENGTH=1,d.WORLD_BOUNDARY=1e6,d.INITIAL_WORLD_BOUNDARY=d.WORLD_BOUNDARY/1e3,d.WORLD_CENTER_X=1200,d.WORLD_CENTER_Y=900,b.exports=d},{}],25:[function(a,b,c){function d(a,b,c){this.x=null,
this.y=null,null==a&&null==b&&null==c?(this.x=0,this.y=0):"number"==typeof a&&"number"==typeof b&&null==c?(this.x=a,this.y=b):"Point"==a.constructor.name&&null==b&&null==c&&(c=a,this.x=c.x,this.y=c.y)}d.prototype.getX=function(){return this.x},d.prototype.getY=function(){return this.y},d.prototype.getLocation=function(){return new d(this.x,this.y)},d.prototype.setLocation=function(a,b,c){"Point"==a.constructor.name&&null==b&&null==c?(c=a,this.setLocation(c.x,c.y)):"number"==typeof a&&"number"==typeof b&&null==c&&(parseInt(a)==a&&parseInt(b)==b?this.move(a,b):(this.x=Math.floor(a+.5),this.y=Math.floor(b+.5)))},d.prototype.move=function(a,b){this.x=a,this.y=b},d.prototype.translate=function(a,b){this.x+=a,this.y+=b},d.prototype.equals=function(a){if("Point"==a.constructor.name){var b=a;return this.x==b.x&&this.y==b.y}return this==a},d.prototype.toString=function(){return(new d).constructor.name+"[x="+this.x+",y="+this.y+"]"},b.exports=d},{}],26:[function(a,b,c){function d(a,b){null==a&&null==b?(this.x=0,this.y=0):(this.x=a,this.y=b)}d.prototype.getX=function(){return this.x},d.prototype.getY=function(){return this.y},d.prototype.setX=function(a){this.x=a},d.prototype.setY=function(a){this.y=a},d.prototype.getDifference=function(a){return new DimensionD(this.x-a.x,this.y-a.y)},d.prototype.getCopy=function(){return new d(this.x,this.y)},d.prototype.translate=function(a){return this.x+=a.width,this.y+=a.height,this},b.exports=d},{}],27:[function(a,b,c){function d(){}d.seed=1,d.x=0,d.nextDouble=function(){return d.x=1e4*Math.sin(d.seed++),d.x-Math.floor(d.x)},b.exports=d},{}],28:[function(a,b,c){function d(a,b,c,d){this.x=0,this.y=0,this.width=0,this.height=0,null!=a&&null!=b&&null!=c&&null!=d&&(this.x=a,this.y=b,this.width=c,this.height=d)}d.prototype.getX=function(){return this.x},d.prototype.setX=function(a){this.x=a},d.prototype.getY=function(){return this.y},d.prototype.setY=function(a){this.y=a},d.prototype.getWidth=function(){return this.width},d.prototype.setWidth=function(a){this.width=a},d.prototype.getHeight=function(){return this.height},d.prototype.setHeight=function(a){this.height=a},d.prototype.getRight=function(){return this.x+this.width},d.prototype.getBottom=function(){return this.y+this.height},d.prototype.intersects=function(a){return!(this.getRight()<a.x)&&(!(this.getBottom()<a.y)&&(!(a.getRight()<this.x)&&!(a.getBottom()<this.y)))},d.prototype.getCenterX=function(){return this.x+this.width/2},d.prototype.getMinX=function(){return this.getX()},d.prototype.getMaxX=function(){return this.getX()+this.width},d.prototype.getCenterY=function(){return this.y+this.height/2},d.prototype.getMinY=function(){return this.getY()},d.prototype.getMaxY=function(){return this.getY()+this.height},d.prototype.getWidthHalf=function(){return this.width/2},d.prototype.getHeightHalf=function(){return this.height/2},b.exports=d},{}],29:[function(a,b,c){function d(a,b){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}var e=a("./PointD");d.prototype.getWorldOrgX=function(){return this.lworldOrgX},d.prototype.setWorldOrgX=function(a){this.lworldOrgX=a},d.prototype.getWorldOrgY=function(){return this.lworldOrgY},d.prototype.setWorldOrgY=function(a){this.lworldOrgY=a},d.prototype.getWorldExtX=function(){return this.lworldExtX},d.prototype.setWorldExtX=function(a){this.lworldExtX=a},d.prototype.getWorldExtY=function(){return this.lworldExtY},d.prototype.setWorldExtY=function(a){this.lworldExtY=a},d.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},d.prototype.setDeviceOrgX=function(a){this.ldeviceOrgX=a},d.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},d.prototype.setDeviceOrgY=function(a){this.ldeviceOrgY=a},d.prototype.getDeviceExtX=function(){return this.ldeviceExtX},d.prototype.setDeviceExtX=function(a){this.ldeviceExtX=a},d.prototype.getDeviceExtY=function(){return this.ldeviceExtY},d.prototype.setDeviceExtY=function(a){this.ldeviceExtY=a},d.prototype.transformX=function(a){var b=0,c=this.lworldExtX;return 0!=c&&(b=this.ldeviceOrgX+(a-this.lworldOrgX)*this.ldeviceExtX/c),b},d.prototype.transformY=function(a){var b=0,c=this.lworldExtY;return 0!=c&&(b=this.ldeviceOrgY+(a-this.lworldOrgY)*this.ldeviceExtY/c),b},d.prototype.inverseTransformX=function(a){var b=0,c=this.ldeviceExtX;return 0!=c&&(b=this.lworldOrgX+(a-this.ldeviceOrgX)*this.lworldExtX/c),b},d.prototype.inverseTransformY=function(a){var b=0,c=this.ldeviceExtY;return 0!=c&&(b=this.lworldOrgY+(a-this.ldeviceOrgY)*this.lworldExtY/c),b},d.prototype.inverseTransformPoint=function(a){var b=new e(this.inverseTransformX(a.x),this.inverseTransformY(a.y));return b},b.exports=d},{"./PointD":26}],30:[function(a,b,c){function d(){}d.lastID=0,d.createID=function(a){return d.isPrimitive(a)?a:null!=a.uniqueID?a.uniqueID:(a.uniqueID=d.getString(),d.lastID++,a.uniqueID)},d.getString=function(a){return null==a&&(a=d.lastID),"Object#"+a},d.isPrimitive=function(a){var b=typeof a;return null==a||"object"!=b&&"function"!=b},b.exports=d},{}],31:[function(a,b,c){"use strict";function d(a,b){var c={};for(var d in a)c[d]=a[d];for(var d in b)c[d]=b[d];return c}function e(a){this.options=d(m,a),n(this.options)}var f=a("./DimensionD"),g=(a("./HashMap"),a("./HashSet"),a("./IGeometry"),a("./IMath"),a("./Integer"),a("./Point"),a("./PointD")),h=(a("./RandomSeed"),a("./RectangleD"),a("./Transform"),a("./UniqueIDGeneretor"),a("./LGraphObject"),a("./LGraph"),a("./LEdge"),a("./LGraphManager"),a("./LNode"),a("./Layout"),a("./LayoutConstants")),i=(a("./FDLayout"),a("./FDLayoutConstants")),j=(a("./FDLayoutEdge"),a("./FDLayoutNode"),a("./CoSEConstants")),k=(a("./CoSEEdge"),a("./CoSEGraph"),a("./CoSEGraphManager"),a("./CoSELayout")),l=a("./CoSENode"),m={ready:function(){},stop:function(){},refresh:30,fit:!0,padding:10,paddingCompound:15,randomize:!0,nodeRepulsion:4500,idealEdgeLength:50,edgeElasticity:.45,nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,animate:"end",animationDuration:500,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.8},n=function(a){null!=a.nodeRepulsion&&(j.DEFAULT_REPULSION_STRENGTH=i.DEFAULT_REPULSION_STRENGTH=a.nodeRepulsion),null!=a.idealEdgeLength&&(j.DEFAULT_EDGE_LENGTH=i.DEFAULT_EDGE_LENGTH=a.idealEdgeLength),null!=a.edgeElasticity&&(j.DEFAULT_SPRING_STRENGTH=i.DEFAULT_SPRING_STRENGTH=a.edgeElasticity),null!=a.nestingFactor&&(j.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=i.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=a.nestingFactor),null!=a.gravity&&(j.DEFAULT_GRAVITY_STRENGTH=i.DEFAULT_GRAVITY_STRENGTH=a.gravity),null!=a.numIter&&(j.MAX_ITERATIONS=i.MAX_ITERATIONS=a.numIter),null!=a.paddingCompound&&(j.DEFAULT_GRAPH_MARGIN=i.DEFAULT_GRAPH_MARGIN=h.DEFAULT_GRAPH_MARGIN=a.paddingCompound),null!=a.gravityRange&&(j.DEFAULT_GRAVITY_RANGE_FACTOR=i.DEFAULT_GRAVITY_RANGE_FACTOR=a.gravityRange),null!=a.gravityCompound&&(j.DEFAULT_COMPOUND_GRAVITY_STRENGTH=i.DEFAULT_COMPOUND_GRAVITY_STRENGTH=a.gravityCompound),null!=a.gravityRangeCompound&&(j.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=i.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=a.gravityRangeCompound),null!=a.initialEnergyOnIncremental&&(j.DEFAULT_COOLING_FACTOR_INCREMENTAL=i.DEFAULT_COOLING_FACTOR_INCREMENTAL=a.initialEnergyOnIncremental),j.DEFAULT_INCREMENTAL=i.DEFAULT_INCREMENTAL=h.DEFAULT_INCREMENTAL=!a.randomize,j.ANIMATE=i.ANIMATE=a.animate,j.TILE=a.tile,j.TILING_PADDING_VERTICAL="function"==typeof a.tilingPaddingVertical?a.tilingPaddingVertical.call():a.tilingPaddingVertical,j.TILING_PADDING_HORIZONTAL="function"==typeof a.tilingPaddingHorizontal?a.tilingPaddingHorizontal.call():a.tilingPaddingHorizontal};e.prototype.run=function(){var a,b,c=this.options,d=(this.idToLNode={},this.layout=new k),e=this;this.cy=this.options.cy,this.cy.trigger({type:"layoutstart",layout:this});var f=d.newGraphManager();this.gm=f;var g=this.options.eles.nodes(),h=this.options.eles.edges();this.root=f.addRoot(),this.processChildrenList(this.root,this.getTopMostNodes(g),d);for(var i=0;i<h.length;i++){var j=h[i],l=this.idToLNode[j.data("source")],m=this.idToLNode[j.data("target")],n=f.add(d.newEdge(),l,m);n.id=j.id()}var o=function(a,b){"number"==typeof a&&(a=b);var c=a.data("id"),d=e.idToLNode[c];return{x:d.getRect().getCenterX(),y:d.getRect().getCenterY()}},p=function(){for(var d,f=function(){c.fit&&c.cy.fit(c.eles.nodes(),c.padding),a||(a=!0,e.cy.one("layoutready",c.ready),e.cy.trigger({type:"layoutready",layout:e}))},g=e.options.refresh,h=0;h<g&&!d;h++)d=e.layout.tick();if(d)return e.options.eles.nodes().positions(o),f(),e.cy.one("layoutstop",e.options.stop),e.cy.trigger("layoutstop"),e.cy.trigger({type:"layoutstop",layout:e}),b&&cancelAnimationFrame(b),e.options.eles.nodes().removeScratch("coseBilkent"),void(a=!1);var i=e.layout.getPositionsData();c.eles.nodes().positions(function(a,b){"number"==typeof a&&(a=b);for(var c=a.id(),d=i[c],e=a;null==d;)d=i[e.data("parent")]||i["DummyCompound_"+e.data("parent")],i[c]=d,e=e.parent()[0];return{x:d.x,y:d.y}}),f(),b=requestAnimationFrame(p)};return d.addListener("layoutstarted",function(){"during"===e.options.animate&&(b=requestAnimationFrame(p))}),d.runLayout(),"during"!==this.options.animate&&setTimeout(function(){e.options.eles.nodes().not(":parent").layoutPositions(e,e.options,o),e.options.eles.nodes().removeScratch("coseBilkent"),a=!1},0),this},e.prototype.getTopMostNodes=function(a){for(var b={},c=0;c<a.length;c++)b[a[c].id()]=!0;var d=a.filter(function(a,c){"number"==typeof a&&(a=c);for(var d=a.parent()[0];null!=d;){if(b[d.id()])return!1;d=d.parent()[0]}return!0});return d},e.prototype.processChildrenList=function(a,b,c){for(var d=b.length,e=0;e<d;e++){var h=b[e];this.options.eles.nodes().length;var i,j=h.children();if(i=null!=h.width()&&null!=h.height()?a.add(new l(c.graphManager,new g(h.position("x")-h.width()/2,h.position("y")-h.height()/2),new f(parseFloat(h.width()),parseFloat(h.height())))):a.add(new l(this.graphManager)),i.id=h.data("id"),i.paddingLeft=parseInt(h.css("padding-left")),i.paddingTop=parseInt(h.css("padding-top")),i.paddingRight=parseInt(h.css("padding-right")),i.paddingBottom=parseInt(h.css("padding-bottom")),this.idToLNode[h.data("id")]=i,isNaN(i.rect.x)&&(i.rect.x=0),isNaN(i.rect.y)&&(i.rect.y=0),null!=j&&j.length>0){var k;k=c.getGraphManager().add(c.newGraph(),i),this.processChildrenList(k,j,c)}}},e.prototype.stop=function(){return this.stopped=!0,this.trigger("layoutstop"),this},b.exports=function(a){return e}},{"./CoSEConstants":1,"./CoSEEdge":2,"./CoSEGraph":3,"./CoSEGraphManager":4,"./CoSELayout":5,"./CoSENode":6,"./DimensionD":7,"./FDLayout":9,"./FDLayoutConstants":10,"./FDLayoutEdge":11,"./FDLayoutNode":12,"./HashMap":13,"./HashSet":14,"./IGeometry":15,"./IMath":16,"./Integer":17,"./LEdge":18,"./LGraph":19,"./LGraphManager":20,"./LGraphObject":21,"./LNode":22,"./Layout":23,"./LayoutConstants":24,"./Point":25,"./PointD":26,"./RandomSeed":27,"./RectangleD":28,"./Transform":29,"./UniqueIDGeneretor":30}],32:[function(a,b,c){"use strict";var d=a("./Layout"),e=function(a){var b=d(a);a("layout","cose-bilkent",b)};"undefined"!=typeof cytoscape&&e(cytoscape),b.exports=e},{"./Layout":31}]},{},[32])(32)}),function(a,b,c){!function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):jQuery&&!jQuery.fn.qtip&&a(jQuery)}(function(d){"use strict";function e(a,b,c,e){this.id=c,this.target=a,this.tooltip=F,this.elements={target:a},this._id=S+"-"+c,this.timers={img:{}},this.options=b,this.plugins={},this.cache={event:{},target:d(),disabled:E,attr:e,onTooltip:E,lastClass:""},this.rendered=this.destroyed=this.disabled=this.waiting=this.hiddenDuringWait=this.positioning=this.triggering=E}function f(a){return a===F||"object"!==d.type(a)}function g(a){return!(d.isFunction(a)||a&&a.attr||a.length||"object"===d.type(a)&&(a.jquery||a.then))}function h(a){var b,c,e,h;return f(a)?E:(f(a.metadata)&&(a.metadata={type:a.metadata}),"content"in a&&(b=a.content,f(b)||b.jquery||b.done?(c=g(b)?E:b,b=a.content={text:c}):c=b.text,"ajax"in b&&(e=b.ajax,h=e&&e.once!==E,delete b.ajax,b.text=function(a,b){var f=c||d(this).attr(b.options.content.attr)||"Loading...",g=d.ajax(d.extend({},e,{context:b})).then(e.success,F,e.error).then(function(a){return a&&h&&b.set("content.text",a),a},function(a,c,d){b.destroyed||0===a.status||b.set("content.text",c+": "+d)});return h?f:(b.set("content.text",f),g)}),"title"in b&&(d.isPlainObject(b.title)&&(b.button=b.title.button,b.title=b.title.text),g(b.title||E)&&(b.title=E))),"position"in a&&f(a.position)&&(a.position={my:a.position,at:a.position}),"show"in a&&f(a.show)&&(a.show=a.show.jquery?{target:a.show}:a.show===D?{ready:D}:{event:a.show}),"hide"in a&&f(a.hide)&&(a.hide=a.hide.jquery?{target:a.hide}:{event:a.hide}),"style"in a&&f(a.style)&&(a.style={classes:a.style}),d.each(R,function(){this.sanitize&&this.sanitize(a)}),a)}function i(a,b){for(var c,d=0,e=a,f=b.split(".");e=e[f[d++]];)d<f.length&&(c=e);return[c||a,f.pop()]}function j(a,b){var c,d,e;for(c in this.checks)if(this.checks.hasOwnProperty(c))for(d in this.checks[c])this.checks[c].hasOwnProperty(d)&&(e=new RegExp(d,"i").exec(a))&&(b.push(e),("builtin"===c||this.plugins[c])&&this.checks[c][d].apply(this.plugins[c]||this,b))}function k(a){return V.concat("").join(a?"-"+a+" ":" ")}function l(a,b){return b>0?setTimeout(d.proxy(a,this),b):void a.call(this)}function m(a){this.tooltip.hasClass(aa)||(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this.timers.show=l.call(this,function(){this.toggle(D,a)},this.options.show.delay))}function n(a){if(!this.tooltip.hasClass(aa)&&!this.destroyed){var b=d(a.relatedTarget),c=b.closest(W)[0]===this.tooltip[0],e=b[0]===this.options.show.target[0];if(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this!==b[0]&&"mouse"===this.options.position.target&&c||this.options.hide.fixed&&/mouse(out|leave|move)/.test(a.type)&&(c||e))try{a.preventDefault(),a.stopImmediatePropagation()}catch(f){}else this.timers.hide=l.call(this,function(){this.toggle(E,a)},this.options.hide.delay,this)}}function o(a){!this.tooltip.hasClass(aa)&&this.options.hide.inactive&&(clearTimeout(this.timers.inactive),this.timers.inactive=l.call(this,function(){this.hide(a)},this.options.hide.inactive))}function p(a){this.rendered&&this.tooltip[0].offsetWidth>0&&this.reposition(a)}function q(a,c,e){d(b.body).delegate(a,(c.split?c:c.join("."+S+" "))+"."+S,function(){var a=y.api[d.attr(this,U)];a&&!a.disabled&&e.apply(a,arguments)})}function r(a,c,f){var g,i,j,k,l,m=d(b.body),n=a[0]===b?m:a,o=a.metadata?a.metadata(f.metadata):F,p="html5"===f.metadata.type&&o?o[f.metadata.name]:F,q=a.data(f.metadata.name||"qtipopts");try{q="string"==typeof q?d.parseJSON(q):q}catch(r){}if(k=d.extend(D,{},y.defaults,f,"object"==typeof q?h(q):F,h(p||o)),i=k.position,k.id=c,"boolean"==typeof k.content.text){if(j=a.attr(k.content.attr),k.content.attr===E||!j)return E;k.content.text=j}if(i.container.length||(i.container=m),i.target===E&&(i.target=n),k.show.target===E&&(k.show.target=n),k.show.solo===D&&(k.show.solo=i.container.closest("body")),k.hide.target===E&&(k.hide.target=n),k.position.viewport===D&&(k.position.viewport=i.container),i.container=i.container.eq(0),i.at=new A(i.at,D),i.my=new A(i.my),a.data(S))if(k.overwrite)a.qtip("destroy",!0);else if(k.overwrite===E)return E;return a.attr(T,c),k.suppress&&(l=a.attr("title"))&&a.removeAttr("title").attr(ca,l).attr("title",""),g=new e(a,k,c,(!!j)),a.data(S,g),g}function s(a){return a.charAt(0).toUpperCase()+a.slice(1)}function t(a,b){var d,e,f=b.charAt(0).toUpperCase()+b.slice(1),g=(b+" "+va.join(f+" ")+f).split(" "),h=0;if(ua[b])return a.css(ua[b]);for(;d=g[h++];)if((e=a.css(d))!==c)return ua[b]=d,e}function u(a,b){return Math.ceil(parseFloat(t(a,b)))}function v(a,b){this._ns="tip",this.options=b,this.offset=b.offset,this.size=[b.width,b.height],this.qtip=a,this.init(a)}function w(a,b){this.options=b,this._ns="-modal",this.qtip=a,this.init(a)}function x(a){this._ns="ie6",this.qtip=a,this.init(a)}var y,z,A,B,C,D=!0,E=!1,F=null,G="x",H="y",I="width",J="height",K="top",L="left",M="bottom",N="right",O="center",P="flipinvert",Q="shift",R={},S="qtip",T="data-hasqtip",U="data-qtip-id",V=["ui-widget","ui-tooltip"],W="."+S,X="click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" "),Y=S+"-fixed",Z=S+"-default",$=S+"-focus",_=S+"-hover",aa=S+"-disabled",ba="_replacedByqTip",ca="oldtitle",da={ie:function(){var a,c;for(a=4,c=b.createElement("div");(c.innerHTML="<!--[if gt IE "+a+"]><i></i><![endif]-->")&&c.getElementsByTagName("i")[0];a+=1);return a>4?a:NaN}(),iOS:parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||E};z=e.prototype,z._when=function(a){return d.when.apply(d,a)},z.render=function(a){if(this.rendered||this.destroyed)return this;var b=this,c=this.options,e=this.cache,f=this.elements,g=c.content.text,h=c.content.title,i=c.content.button,j=c.position,k=[];return d.attr(this.target[0],"aria-describedby",this._id),e.posClass=this._createPosClass((this.position={my:j.my,at:j.at}).my),this.tooltip=f.tooltip=d("<div/>",{id:this._id,"class":[S,Z,c.style.classes,e.posClass].join(" "),width:c.style.width||"",height:c.style.height||"",tracking:"mouse"===j.target&&j.adjust.mouse,role:"alert","aria-live":"polite","aria-atomic":E,"aria-describedby":this._id+"-content","aria-hidden":D}).toggleClass(aa,this.disabled).attr(U,this.id).data(S,this).appendTo(j.container).append(f.content=d("<div />",{"class":S+"-content",id:this._id+"-content","aria-atomic":D})),this.rendered=-1,this.positioning=D,h&&(this._createTitle(),d.isFunction(h)||k.push(this._updateTitle(h,E))),i&&this._createButton(),d.isFunction(g)||k.push(this._updateContent(g,E)),this.rendered=D,this._setWidget(),d.each(R,function(a){var c;"render"===this.initialize&&(c=this(b))&&(b.plugins[a]=c)}),this._unassignEvents(),this._assignEvents(),this._when(k).then(function(){b._trigger("render"),b.positioning=E,b.hiddenDuringWait||!c.show.ready&&!a||b.toggle(D,e.event,E),b.hiddenDuringWait=E}),y.api[this.id]=this,this},z.destroy=function(a){function b(){if(!this.destroyed){this.destroyed=D;var a,b=this.target,c=b.attr(ca);this.rendered&&this.tooltip.stop(1,0).find("*").remove().end().remove(),d.each(this.plugins,function(){this.destroy&&this.destroy()});for(a in this.timers)this.timers.hasOwnProperty(a)&&clearTimeout(this.timers[a]);b.removeData(S).removeAttr(U).removeAttr(T).removeAttr("aria-describedby"),this.options.suppress&&c&&b.attr("title",c).removeAttr(ca),this._unassignEvents(),this.options=this.elements=this.cache=this.timers=this.plugins=this.mouse=F,delete y.api[this.id]}}return this.destroyed?this.target:(a===D&&"hide"!==this.triggering||!this.rendered?b.call(this):(this.tooltip.one("tooltiphidden",d.proxy(b,this)),!this.triggering&&this.hide()),this.target)},B=z.checks={builtin:{"^id$":function(a,b,c,e){var f=c===D?y.nextid:c,g=S+"-"+f;f!==E&&f.length>0&&!d("#"+g).length?(this._id=g,this.rendered&&(this.tooltip[0].id=this._id,this.elements.content[0].id=this._id+"-content",this.elements.title[0].id=this._id+"-title")):a[b]=e},"^prerender":function(a,b,c){c&&!this.rendered&&this.render(this.options.show.ready)},"^content.text$":function(a,b,c){this._updateContent(c)},"^content.attr$":function(a,b,c,d){this.options.content.text===this.target.attr(d)&&this._updateContent(this.target.attr(c))},"^content.title$":function(a,b,c){return c?(c&&!this.elements.title&&this._createTitle(),void this._updateTitle(c)):this._removeTitle()},"^content.button$":function(a,b,c){this._updateButton(c)},"^content.title.(text|button)$":function(a,b,c){this.set("content."+b,c)},"^position.(my|at)$":function(a,b,c){"string"==typeof c&&(this.position[b]=a[b]=new A(c,"at"===b))},"^position.container$":function(a,b,c){this.rendered&&this.tooltip.appendTo(c)},"^show.ready$":function(a,b,c){c&&(!this.rendered&&this.render(D)||this.toggle(D))},"^style.classes$":function(a,b,c,d){this.rendered&&this.tooltip.removeClass(d).addClass(c)},"^style.(width|height)":function(a,b,c){this.rendered&&this.tooltip.css(b,c)},"^style.widget|content.title":function(){this.rendered&&this._setWidget()},"^style.def":function(a,b,c){this.rendered&&this.tooltip.toggleClass(Z,!!c)},"^events.(render|show|move|hide|focus|blur)$":function(a,b,c){this.rendered&&this.tooltip[(d.isFunction(c)?"":"un")+"bind"]("tooltip"+b,c)},"^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)":function(){if(this.rendered){var a=this.options.position;this.tooltip.attr("tracking","mouse"===a.target&&a.adjust.mouse),this._unassignEvents(),this._assignEvents()}}}},z.get=function(a){if(this.destroyed)return this;var b=i(this.options,a.toLowerCase()),c=b[0][b[1]];return c.precedance?c.string():c};var ea=/^position\.(my|at|adjust|target|container|viewport)|style|content|show\.ready/i,fa=/^prerender|show\.ready/i;z.set=function(a,b){if(this.destroyed)return this;var c,e=this.rendered,f=E,g=this.options;return"string"==typeof a?(c=a,a={},a[c]=b):a=d.extend({},a),d.each(a,function(b,c){if(e&&fa.test(b))return void delete a[b];var h,j=i(g,b.toLowerCase());h=j[0][j[1]],j[0][j[1]]=c&&c.nodeType?d(c):c,f=ea.test(b)||f,a[b]=[j[0],j[1],c,h]}),h(g),this.positioning=D,d.each(a,d.proxy(j,this)),this.positioning=E,this.rendered&&this.tooltip[0].offsetWidth>0&&f&&this.reposition("mouse"===g.position.target?F:this.cache.event),this},z._update=function(a,b){var c=this,e=this.cache;return this.rendered&&a?(d.isFunction(a)&&(a=a.call(this.elements.target,e.event,this)||""),d.isFunction(a.then)?(e.waiting=D,a.then(function(a){return e.waiting=E,c._update(a,b)},F,function(a){return c._update(a,b)})):a===E||!a&&""!==a?E:(a.jquery&&a.length>0?b.empty().append(a.css({display:"block",visibility:"visible"})):b.html(a),this._waitForContent(b).then(function(a){c.rendered&&c.tooltip[0].offsetWidth>0&&c.reposition(e.event,!a.length)}))):E},z._waitForContent=function(a){var b=this.cache;return b.waiting=D,(d.fn.imagesLoaded?a.imagesLoaded():(new d.Deferred).resolve([])).done(function(){b.waiting=E}).promise()},z._updateContent=function(a,b){this._update(a,this.elements.content,b)},z._updateTitle=function(a,b){this._update(a,this.elements.title,b)===E&&this._removeTitle(E)},z._createTitle=function(){var a=this.elements,b=this._id+"-title";a.titlebar&&this._removeTitle(),a.titlebar=d("<div />",{"class":S+"-titlebar "+(this.options.style.widget?k("header"):"")}).append(a.title=d("<div />",{id:b,"class":S+"-title","aria-atomic":D})).insertBefore(a.content).delegate(".qtip-close","mousedown keydown mouseup keyup mouseout",function(a){d(this).toggleClass("ui-state-active ui-state-focus","down"===a.type.substr(-4))}).delegate(".qtip-close","mouseover mouseout",function(a){d(this).toggleClass("ui-state-hover","mouseover"===a.type)}),this.options.content.button&&this._createButton()},z._removeTitle=function(a){var b=this.elements;b.title&&(b.titlebar.remove(),b.titlebar=b.title=b.button=F,a!==E&&this.reposition())},z._createPosClass=function(a){return S+"-pos-"+(a||this.options.position.my).abbrev()},z.reposition=function(c,e){if(!this.rendered||this.positioning||this.destroyed)return this;this.positioning=D;var f,g,h,i,j=this.cache,k=this.tooltip,l=this.options.position,m=l.target,n=l.my,o=l.at,p=l.viewport,q=l.container,r=l.adjust,s=r.method.split(" "),t=k.outerWidth(E),u=k.outerHeight(E),v=0,w=0,x=k.css("position"),y={left:0,top:0},z=k[0].offsetWidth>0,A=c&&"scroll"===c.type,B=d(a),C=q[0].ownerDocument,F=this.mouse;if(d.isArray(m)&&2===m.length)o={x:L,y:K},y={left:m[0],top:m[1]};else if("mouse"===m)o={x:L,y:K},(!r.mouse||this.options.hide.distance)&&j.origin&&j.origin.pageX?c=j.origin:!c||c&&("resize"===c.type||"scroll"===c.type)?c=j.event:F&&F.pageX&&(c=F),"static"!==x&&(y=q.offset()),C.body.offsetWidth!==(a.innerWidth||C.documentElement.clientWidth)&&(g=d(b.body).offset()),y={left:c.pageX-y.left+(g&&g.left||0),top:c.pageY-y.top+(g&&g.top||0)},r.mouse&&A&&F&&(y.left-=(F.scrollX||0)-B.scrollLeft(),y.top-=(F.scrollY||0)-B.scrollTop());else{if("event"===m?c&&c.target&&"scroll"!==c.type&&"resize"!==c.type?j.target=d(c.target):c.target||(j.target=this.elements.target):"event"!==m&&(j.target=d(m.jquery?m:this.elements.target)),m=j.target,m=d(m).eq(0),0===m.length)return this;m[0]===b||m[0]===a?(v=da.iOS?a.innerWidth:m.width(),w=da.iOS?a.innerHeight:m.height(),m[0]===a&&(y={top:(p||m).scrollTop(),left:(p||m).scrollLeft()})):R.imagemap&&m.is("area")?f=R.imagemap(this,m,o,R.viewport?s:E):R.svg&&m&&m[0].ownerSVGElement?f=R.svg(this,m,o,R.viewport?s:E):(v=m.outerWidth(E),w=m.outerHeight(E),y=m.offset()),f&&(v=f.width,w=f.height,g=f.offset,y=f.position),y=this.reposition.offset(m,y,q),(da.iOS>3.1&&da.iOS<4.1||da.iOS>=4.3&&da.iOS<4.33||!da.iOS&&"fixed"===x)&&(y.left-=B.scrollLeft(),y.top-=B.scrollTop()),(!f||f&&f.adjustable!==E)&&(y.left+=o.x===N?v:o.x===O?v/2:0,y.top+=o.y===M?w:o.y===O?w/2:0)}return y.left+=r.x+(n.x===N?-t:n.x===O?-t/2:0),y.top+=r.y+(n.y===M?-u:n.y===O?-u/2:0),R.viewport?(h=y.adjusted=R.viewport(this,y,l,v,w,t,u),g&&h.left&&(y.left+=g.left),g&&h.top&&(y.top+=g.top),h.my&&(this.position.my=h.my)):y.adjusted={left:0,top:0},j.posClass!==(i=this._createPosClass(this.position.my))&&(j.posClass=i,k.removeClass(j.posClass).addClass(i)),this._trigger("move",[y,p.elem||p],c)?(delete y.adjusted,e===E||!z||isNaN(y.left)||isNaN(y.top)||"mouse"===m||!d.isFunction(l.effect)?k.css(y):d.isFunction(l.effect)&&(l.effect.call(k,this,d.extend({},y)),k.queue(function(a){d(this).css({opacity:"",height:""}),da.ie&&this.style.removeAttribute("filter"),a()})),this.positioning=E,this):this},z.reposition.offset=function(a,c,e){function f(a,b){c.left+=b*a.scrollLeft(),c.top+=b*a.scrollTop()}if(!e[0])return c;var g,h,i,j,k=d(a[0].ownerDocument),l=!!da.ie&&"CSS1Compat"!==b.compatMode,m=e[0];do"static"!==(h=d.css(m,"position"))&&("fixed"===h?(i=m.getBoundingClientRect(),f(k,-1)):(i=d(m).position(),i.left+=parseFloat(d.css(m,"borderLeftWidth"))||0,i.top+=parseFloat(d.css(m,"borderTopWidth"))||0),c.left-=i.left+(parseFloat(d.css(m,"marginLeft"))||0),c.top-=i.top+(parseFloat(d.css(m,"marginTop"))||0),g||"hidden"===(j=d.css(m,"overflow"))||"visible"===j||(g=d(m)));while(m=m.offsetParent);return g&&(g[0]!==k[0]||l)&&f(g,1),c};var ga=(A=z.reposition.Corner=function(a,b){a=(""+a).replace(/([A-Z])/," $1").replace(/middle/gi,O).toLowerCase(),this.x=(a.match(/left|right/i)||a.match(/center/)||["inherit"])[0].toLowerCase(),this.y=(a.match(/top|bottom|center/i)||["inherit"])[0].toLowerCase(),this.forceY=!!b;var c=a.charAt(0);this.precedance="t"===c||"b"===c?H:G}).prototype;ga.invert=function(a,b){this[a]=this[a]===L?N:this[a]===N?L:b||this[a]},ga.string=function(a){var b=this.x,c=this.y,d=b!==c?"center"===b||"center"!==c&&(this.precedance===H||this.forceY)?[c,b]:[b,c]:[b];return a!==!1?d.join(" "):d},ga.abbrev=function(){var a=this.string(!1);return a[0].charAt(0)+(a[1]&&a[1].charAt(0)||"")},ga.clone=function(){return new A(this.string(),this.forceY)},z.toggle=function(a,c){var e=this.cache,f=this.options,g=this.tooltip;if(c){if(/over|enter/.test(c.type)&&e.event&&/out|leave/.test(e.event.type)&&f.show.target.add(c.target).length===f.show.target.length&&g.has(c.relatedTarget).length)return this;e.event=d.event.fix(c)}if(this.waiting&&!a&&(this.hiddenDuringWait=D),!this.rendered)return a?this.render(1):this;if(this.destroyed||this.disabled)return this;var h,i,j,k=a?"show":"hide",l=this.options[k],m=this.options.position,n=this.options.content,o=this.tooltip.css("width"),p=this.tooltip.is(":visible"),q=a||1===l.target.length,r=!c||l.target.length<2||e.target[0]===c.target;return(typeof a).search("boolean|number")&&(a=!p),h=!g.is(":animated")&&p===a&&r,i=h?F:!!this._trigger(k,[90]),this.destroyed?this:(i!==E&&a&&this.focus(c),!i||h?this:(d.attr(g[0],"aria-hidden",!a),a?(this.mouse&&(e.origin=d.event.fix(this.mouse)),d.isFunction(n.text)&&this._updateContent(n.text,E),d.isFunction(n.title)&&this._updateTitle(n.title,E),!C&&"mouse"===m.target&&m.adjust.mouse&&(d(b).bind("mousemove."+S,this._storeMouse),C=D),o||g.css("width",g.outerWidth(E)),this.reposition(c,arguments[2]),o||g.css("width",""),l.solo&&("string"==typeof l.solo?d(l.solo):d(W,l.solo)).not(g).not(l.target).qtip("hide",new d.Event("tooltipsolo"))):(clearTimeout(this.timers.show),delete e.origin,C&&!d(W+'[tracking="true"]:visible',l.solo).not(g).length&&(d(b).unbind("mousemove."+S),C=E),this.blur(c)),j=d.proxy(function(){a?(da.ie&&g[0].style.removeAttribute("filter"),g.css("overflow",""),"string"==typeof l.autofocus&&d(this.options.show.autofocus,g).focus(),this.options.show.target.trigger("qtip-"+this.id+"-inactive")):g.css({display:"",visibility:"",opacity:"",left:"",top:""}),this._trigger(a?"visible":"hidden")},this),l.effect===E||q===E?(g[k](),j()):d.isFunction(l.effect)?(g.stop(1,1),l.effect.call(g,this),g.queue("fx",function(a){j(),a()})):g.fadeTo(90,a?1:0,j),a&&l.target.trigger("qtip-"+this.id+"-inactive"),this))},z.show=function(a){return this.toggle(D,a)},z.hide=function(a){return this.toggle(E,a)},z.focus=function(a){if(!this.rendered||this.destroyed)return this;var b=d(W),c=this.tooltip,e=parseInt(c[0].style.zIndex,10),f=y.zindex+b.length;return c.hasClass($)||this._trigger("focus",[f],a)&&(e!==f&&(b.each(function(){this.style.zIndex>e&&(this.style.zIndex=this.style.zIndex-1)}),b.filter("."+$).qtip("blur",a)),c.addClass($)[0].style.zIndex=f),this},z.blur=function(a){return!this.rendered||this.destroyed?this:(this.tooltip.removeClass($),this._trigger("blur",[this.tooltip.css("zIndex")],a),this)},z.disable=function(a){return this.destroyed?this:("toggle"===a?a=!(this.rendered?this.tooltip.hasClass(aa):this.disabled):"boolean"!=typeof a&&(a=D),this.rendered&&this.tooltip.toggleClass(aa,a).attr("aria-disabled",a),this.disabled=!!a,this)},z.enable=function(){return this.disable(E)},z._createButton=function(){var a=this,b=this.elements,c=b.tooltip,e=this.options.content.button,f="string"==typeof e,g=f?e:"Close tooltip";b.button&&b.button.remove(),e.jquery?b.button=e:b.button=d("<a />",{"class":"qtip-close "+(this.options.style.widget?"":S+"-icon"),title:g,"aria-label":g}).prepend(d("<span />",{"class":"ui-icon ui-icon-close",html:"&times;"})),b.button.appendTo(b.titlebar||c).attr("role","button").click(function(b){return c.hasClass(aa)||a.hide(b),E})},z._updateButton=function(a){if(!this.rendered)return E;var b=this.elements.button;a?this._createButton():b.remove()},z._setWidget=function(){var a=this.options.style.widget,b=this.elements,c=b.tooltip,d=c.hasClass(aa);c.removeClass(aa),aa=a?"ui-state-disabled":"qtip-disabled",c.toggleClass(aa,d),c.toggleClass("ui-helper-reset "+k(),a).toggleClass(Z,this.options.style.def&&!a),b.content&&b.content.toggleClass(k("content"),a),b.titlebar&&b.titlebar.toggleClass(k("header"),a),b.button&&b.button.toggleClass(S+"-icon",!a)},z._storeMouse=function(a){return(this.mouse=d.event.fix(a)).type="mousemove",this},z._bind=function(a,b,c,e,f){if(a&&c&&b.length){var g="."+this._id+(e?"-"+e:"");return d(a).bind((b.split?b:b.join(g+" "))+g,d.proxy(c,f||this)),this}},z._unbind=function(a,b){return a&&d(a).unbind("."+this._id+(b?"-"+b:"")),this},z._trigger=function(a,b,c){var e=new d.Event("tooltip"+a);return e.originalEvent=c&&d.extend({},c)||this.cache.event||F,this.triggering=a,this.tooltip.trigger(e,[this].concat(b||[])),this.triggering=E,!e.isDefaultPrevented()},z._bindEvents=function(a,b,c,e,f,g){var h=c.filter(e).add(e.filter(c)),i=[];h.length&&(d.each(b,function(b,c){var e=d.inArray(c,a);e>-1&&i.push(a.splice(e,1)[0])}),i.length&&(this._bind(h,i,function(a){var b=!!this.rendered&&this.tooltip[0].offsetWidth>0;(b?g:f).call(this,a)}),c=c.not(h),e=e.not(h))),this._bind(c,a,f),this._bind(e,b,g)},z._assignInitialEvents=function(a){function b(a){return this.disabled||this.destroyed?E:(this.cache.event=a&&d.event.fix(a),this.cache.target=a&&d(a.target),clearTimeout(this.timers.show),
void(this.timers.show=l.call(this,function(){this.render("object"==typeof a||c.show.ready)},c.prerender?0:c.show.delay)))}var c=this.options,e=c.show.target,f=c.hide.target,g=c.show.event?d.trim(""+c.show.event).split(" "):[],h=c.hide.event?d.trim(""+c.hide.event).split(" "):[];this._bind(this.elements.target,["remove","removeqtip"],function(){this.destroy(!0)},"destroy"),/mouse(over|enter)/i.test(c.show.event)&&!/mouse(out|leave)/i.test(c.hide.event)&&h.push("mouseleave"),this._bind(e,"mousemove",function(a){this._storeMouse(a),this.cache.onTarget=D}),this._bindEvents(g,h,e,f,b,function(){return this.timers?void clearTimeout(this.timers.show):E}),(c.show.ready||c.prerender)&&b.call(this,a)},z._assignEvents=function(){var c=this,e=this.options,f=e.position,g=this.tooltip,h=e.show.target,i=e.hide.target,j=f.container,k=f.viewport,l=d(b),q=d(a),r=e.show.event?d.trim(""+e.show.event).split(" "):[],s=e.hide.event?d.trim(""+e.hide.event).split(" "):[];d.each(e.events,function(a,b){c._bind(g,"toggle"===a?["tooltipshow","tooltiphide"]:["tooltip"+a],b,null,g)}),/mouse(out|leave)/i.test(e.hide.event)&&"window"===e.hide.leave&&this._bind(l,["mouseout","blur"],function(a){/select|option/.test(a.target.nodeName)||a.relatedTarget||this.hide(a)}),e.hide.fixed?i=i.add(g.addClass(Y)):/mouse(over|enter)/i.test(e.show.event)&&this._bind(i,"mouseleave",function(){clearTimeout(this.timers.show)}),(""+e.hide.event).indexOf("unfocus")>-1&&this._bind(j.closest("html"),["mousedown","touchstart"],function(a){var b=d(a.target),c=this.rendered&&!this.tooltip.hasClass(aa)&&this.tooltip[0].offsetWidth>0,e=b.parents(W).filter(this.tooltip[0]).length>0;b[0]===this.target[0]||b[0]===this.tooltip[0]||e||this.target.has(b[0]).length||!c||this.hide(a)}),"number"==typeof e.hide.inactive&&(this._bind(h,"qtip-"+this.id+"-inactive",o,"inactive"),this._bind(i.add(g),y.inactiveEvents,o)),this._bindEvents(r,s,h,i,m,n),this._bind(h.add(g),"mousemove",function(a){if("number"==typeof e.hide.distance){var b=this.cache.origin||{},c=this.options.hide.distance,d=Math.abs;(d(a.pageX-b.pageX)>=c||d(a.pageY-b.pageY)>=c)&&this.hide(a)}this._storeMouse(a)}),"mouse"===f.target&&f.adjust.mouse&&(e.hide.event&&this._bind(h,["mouseenter","mouseleave"],function(a){return this.cache?void(this.cache.onTarget="mouseenter"===a.type):E}),this._bind(l,"mousemove",function(a){this.rendered&&this.cache.onTarget&&!this.tooltip.hasClass(aa)&&this.tooltip[0].offsetWidth>0&&this.reposition(a)})),(f.adjust.resize||k.length)&&this._bind(d.event.special.resize?k:q,"resize",p),f.adjust.scroll&&this._bind(q.add(f.container),"scroll",p)},z._unassignEvents=function(){var c=this.options,e=c.show.target,f=c.hide.target,g=d.grep([this.elements.target[0],this.rendered&&this.tooltip[0],c.position.container[0],c.position.viewport[0],c.position.container.closest("html")[0],a,b],function(a){return"object"==typeof a});e&&e.toArray&&(g=g.concat(e.toArray())),f&&f.toArray&&(g=g.concat(f.toArray())),this._unbind(g)._unbind(g,"destroy")._unbind(g,"inactive")},d(function(){q(W,["mouseenter","mouseleave"],function(a){var b="mouseenter"===a.type,c=d(a.currentTarget),e=d(a.relatedTarget||a.target),f=this.options;b?(this.focus(a),c.hasClass(Y)&&!c.hasClass(aa)&&clearTimeout(this.timers.hide)):"mouse"===f.position.target&&f.position.adjust.mouse&&f.hide.event&&f.show.target&&!e.closest(f.show.target[0]).length&&this.hide(a),c.toggleClass(_,b)}),q("["+U+"]",X,o)}),y=d.fn.qtip=function(a,b,e){var f=(""+a).toLowerCase(),g=F,i=d.makeArray(arguments).slice(1),j=i[i.length-1],k=this[0]?d.data(this[0],S):F;return!arguments.length&&k||"api"===f?k:"string"==typeof a?(this.each(function(){var a=d.data(this,S);if(!a)return D;if(j&&j.timeStamp&&(a.cache.event=j),!b||"option"!==f&&"options"!==f)a[f]&&a[f].apply(a,i);else{if(e===c&&!d.isPlainObject(b))return g=a.get(b),E;a.set(b,e)}}),g!==F?g:this):"object"!=typeof a&&arguments.length?void 0:(k=h(d.extend(D,{},a)),this.each(function(a){var b,c;return c=d.isArray(k.id)?k.id[a]:k.id,c=!c||c===E||c.length<1||y.api[c]?y.nextid++:c,b=r(d(this),c,k),b===E?D:(y.api[c]=b,d.each(R,function(){"initialize"===this.initialize&&this(b)}),void b._assignInitialEvents(j))}))},d.qtip=e,y.api={},d.each({attr:function(a,b){if(this.length){var c=this[0],e="title",f=d.data(c,"qtip");if(a===e&&f&&f.options&&"object"==typeof f&&"object"==typeof f.options&&f.options.suppress)return arguments.length<2?d.attr(c,ca):(f&&f.options.content.attr===e&&f.cache.attr&&f.set("content.text",b),this.attr(ca,b))}return d.fn["attr"+ba].apply(this,arguments)},clone:function(a){var b=d.fn["clone"+ba].apply(this,arguments);return a||b.filter("["+ca+"]").attr("title",function(){return d.attr(this,ca)}).removeAttr(ca),b}},function(a,b){if(!b||d.fn[a+ba])return D;var c=d.fn[a+ba]=d.fn[a];d.fn[a]=function(){return b.apply(this,arguments)||c.apply(this,arguments)}}),d.ui||(d["cleanData"+ba]=d.cleanData,d.cleanData=function(a){for(var b,c=0;(b=d(a[c])).length;c++)if(b.attr(T))try{b.triggerHandler("removeqtip")}catch(e){}d["cleanData"+ba].apply(this,arguments)}),y.version="3.0.3",y.nextid=0,y.inactiveEvents=X,y.zindex=15e3,y.defaults={prerender:E,id:E,overwrite:D,suppress:D,content:{text:D,attr:"title",title:E,button:E},position:{my:"top left",at:"bottom right",target:E,container:E,viewport:E,adjust:{x:0,y:0,mouse:D,scroll:D,resize:D,method:"flipinvert flipinvert"},effect:function(a,b){d(this).animate(b,{duration:200,queue:E})}},show:{target:E,event:"mouseenter",effect:D,delay:90,solo:E,ready:E,autofocus:E},hide:{target:E,event:"mouseleave",effect:D,delay:0,fixed:E,inactive:E,leave:"window",distance:E},style:{classes:"",widget:E,width:E,height:E,def:D},events:{render:F,move:F,show:F,hide:F,toggle:F,visible:F,hidden:F,focus:F,blur:F}};var ha,ia,ja,ka,la,ma="margin",na="border",oa="color",pa="background-color",qa="transparent",ra=" !important",sa=!!b.createElement("canvas").getContext,ta=/rgba?\(0, 0, 0(, 0)?\)|transparent|#123456/i,ua={},va=["Webkit","O","Moz","ms"];sa?(ka=a.devicePixelRatio||1,la=function(){var a=b.createElement("canvas").getContext("2d");return a.backingStorePixelRatio||a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||1}(),ja=ka/la):ia=function(a,b,c){return"<qtipvml:"+a+' xmlns="urn:schemas-microsoft.com:vml" class="qtip-vml" '+(b||"")+' style="behavior: url(#default#VML); '+(c||"")+'" />'},d.extend(v.prototype,{init:function(a){var b,c;c=this.element=a.elements.tip=d("<div />",{"class":S+"-tip"}).prependTo(a.tooltip),sa?(b=d("<canvas />").appendTo(this.element)[0].getContext("2d"),b.lineJoin="miter",b.miterLimit=1e5,b.save()):(b=ia("shape",'coordorigin="0,0"',"position:absolute;"),this.element.html(b+b),a._bind(d("*",c).add(c),["click","mousedown"],function(a){a.stopPropagation()},this._ns)),a._bind(a.tooltip,"tooltipmove",this.reposition,this._ns,this),this.create()},_swapDimensions:function(){this.size[0]=this.options.height,this.size[1]=this.options.width},_resetDimensions:function(){this.size[0]=this.options.width,this.size[1]=this.options.height},_useTitle:function(a){var b=this.qtip.elements.titlebar;return b&&(a.y===K||a.y===O&&this.element.position().top+this.size[1]/2+this.options.offset<b.outerHeight(D))},_parseCorner:function(a){var b=this.qtip.options.position.my;return a===E||b===E?a=E:a===D?a=new A(b.string()):a.string||(a=new A(a),a.fixed=D),a},_parseWidth:function(a,b,c){var d=this.qtip.elements,e=na+s(b)+"Width";return(c?u(c,e):u(d.content,e)||u(this._useTitle(a)&&d.titlebar||d.content,e)||u(d.tooltip,e))||0},_parseRadius:function(a){var b=this.qtip.elements,c=na+s(a.y)+s(a.x)+"Radius";return da.ie<9?0:u(this._useTitle(a)&&b.titlebar||b.content,c)||u(b.tooltip,c)||0},_invalidColour:function(a,b,c){var d=a.css(b);return!d||c&&d===a.css(c)||ta.test(d)?E:d},_parseColours:function(a){var b=this.qtip.elements,c=this.element.css("cssText",""),e=na+s(a[a.precedance])+s(oa),f=this._useTitle(a)&&b.titlebar||b.content,g=this._invalidColour,h=[];return h[0]=g(c,pa)||g(f,pa)||g(b.content,pa)||g(b.tooltip,pa)||c.css(pa),h[1]=g(c,e,oa)||g(f,e,oa)||g(b.content,e,oa)||g(b.tooltip,e,oa)||b.tooltip.css(e),d("*",c).add(c).css("cssText",pa+":"+qa+ra+";"+na+":0"+ra+";"),h},_calculateSize:function(a){var b,c,d,e=a.precedance===H,f=this.options.width,g=this.options.height,h="c"===a.abbrev(),i=(e?f:g)*(h?.5:1),j=Math.pow,k=Math.round,l=Math.sqrt(j(i,2)+j(g,2)),m=[this.border/i*l,this.border/g*l];return m[2]=Math.sqrt(j(m[0],2)-j(this.border,2)),m[3]=Math.sqrt(j(m[1],2)-j(this.border,2)),b=l+m[2]+m[3]+(h?0:m[0]),c=b/l,d=[k(c*f),k(c*g)],e?d:d.reverse()},_calculateTip:function(a,b,c){c=c||1,b=b||this.size;var d=b[0]*c,e=b[1]*c,f=Math.ceil(d/2),g=Math.ceil(e/2),h={br:[0,0,d,e,d,0],bl:[0,0,d,0,0,e],tr:[0,e,d,0,d,e],tl:[0,0,0,e,d,e],tc:[0,e,f,0,d,e],bc:[0,0,d,0,f,e],rc:[0,0,d,g,0,e],lc:[d,0,d,e,0,g]};return h.lt=h.br,h.rt=h.bl,h.lb=h.tr,h.rb=h.tl,h[a.abbrev()]},_drawCoords:function(a,b){a.beginPath(),a.moveTo(b[0],b[1]),a.lineTo(b[2],b[3]),a.lineTo(b[4],b[5]),a.closePath()},create:function(){var a=this.corner=(sa||da.ie)&&this._parseCorner(this.options.corner);return this.enabled=!!this.corner&&"c"!==this.corner.abbrev(),this.enabled&&(this.qtip.cache.corner=a.clone(),this.update()),this.element.toggle(this.enabled),this.corner},update:function(b,c){if(!this.enabled)return this;var e,f,g,h,i,j,k,l,m=this.qtip.elements,n=this.element,o=n.children(),p=this.options,q=this.size,r=p.mimic,s=Math.round;b||(b=this.qtip.cache.corner||this.corner),r===E?r=b:(r=new A(r),r.precedance=b.precedance,"inherit"===r.x?r.x=b.x:"inherit"===r.y?r.y=b.y:r.x===r.y&&(r[b.precedance]=b[b.precedance])),f=r.precedance,b.precedance===G?this._swapDimensions():this._resetDimensions(),e=this.color=this._parseColours(b),e[1]!==qa?(l=this.border=this._parseWidth(b,b[b.precedance]),p.border&&l<1&&!ta.test(e[1])&&(e[0]=e[1]),this.border=l=p.border!==D?p.border:l):this.border=l=0,k=this.size=this._calculateSize(b),n.css({width:k[0],height:k[1],lineHeight:k[1]+"px"}),j=b.precedance===H?[s(r.x===L?l:r.x===N?k[0]-q[0]-l:(k[0]-q[0])/2),s(r.y===K?k[1]-q[1]:0)]:[s(r.x===L?k[0]-q[0]:0),s(r.y===K?l:r.y===M?k[1]-q[1]-l:(k[1]-q[1])/2)],sa?(g=o[0].getContext("2d"),g.restore(),g.save(),g.clearRect(0,0,6e3,6e3),h=this._calculateTip(r,q,ja),i=this._calculateTip(r,this.size,ja),o.attr(I,k[0]*ja).attr(J,k[1]*ja),o.css(I,k[0]).css(J,k[1]),this._drawCoords(g,i),g.fillStyle=e[1],g.fill(),g.translate(j[0]*ja,j[1]*ja),this._drawCoords(g,h),g.fillStyle=e[0],g.fill()):(h=this._calculateTip(r),h="m"+h[0]+","+h[1]+" l"+h[2]+","+h[3]+" "+h[4]+","+h[5]+" xe",j[2]=l&&/^(r|b)/i.test(b.string())?8===da.ie?2:1:0,o.css({coordsize:k[0]+l+" "+k[1]+l,antialias:""+(r.string().indexOf(O)>-1),left:j[0]-j[2]*Number(f===G),top:j[1]-j[2]*Number(f===H),width:k[0]+l,height:k[1]+l}).each(function(a){var b=d(this);b[b.prop?"prop":"attr"]({coordsize:k[0]+l+" "+k[1]+l,path:h,fillcolor:e[0],filled:!!a,stroked:!a}).toggle(!(!l&&!a)),!a&&b.html(ia("stroke",'weight="'+2*l+'px" color="'+e[1]+'" miterlimit="1000" joinstyle="miter"'))})),a.opera&&setTimeout(function(){m.tip.css({display:"inline-block",visibility:"visible"})},1),c!==E&&this.calculate(b,k)},calculate:function(a,b){if(!this.enabled)return E;var c,e,f=this,g=this.qtip.elements,h=this.element,i=this.options.offset,j={};return a=a||this.corner,c=a.precedance,b=b||this._calculateSize(a),e=[a.x,a.y],c===G&&e.reverse(),d.each(e,function(d,e){var h,k,l;e===O?(h=c===H?L:K,j[h]="50%",j[ma+"-"+h]=-Math.round(b[c===H?0:1]/2)+i):(h=f._parseWidth(a,e,g.tooltip),k=f._parseWidth(a,e,g.content),l=f._parseRadius(a),j[e]=Math.max(-f.border,d?k:i+(l>h?l:-h)))}),j[a[c]]-=b[c===G?0:1],h.css({margin:"",top:"",bottom:"",left:"",right:""}).css(j),j},reposition:function(a,b,d){function e(a,b,c,d,e){a===Q&&j.precedance===b&&k[d]&&j[c]!==O?j.precedance=j.precedance===G?H:G:a!==Q&&k[d]&&(j[b]=j[b]===O?k[d]>0?d:e:j[b]===d?e:d)}function f(a,b,e){j[a]===O?p[ma+"-"+b]=o[a]=g[ma+"-"+b]-k[b]:(h=g[e]!==c?[k[b],-g[b]]:[-k[b],g[b]],(o[a]=Math.max(h[0],h[1]))>h[0]&&(d[b]-=k[b],o[b]=E),p[g[e]!==c?e:b]=o[a])}if(this.enabled){var g,h,i=b.cache,j=this.corner.clone(),k=d.adjusted,l=b.options.position.adjust.method.split(" "),m=l[0],n=l[1]||l[0],o={left:E,top:E,x:0,y:0},p={};this.corner.fixed!==D&&(e(m,G,H,L,N),e(n,H,G,K,M),j.string()===i.corner.string()&&i.cornerTop===k.top&&i.cornerLeft===k.left||this.update(j,E)),g=this.calculate(j),g.right!==c&&(g.left=-g.right),g.bottom!==c&&(g.top=-g.bottom),g.user=this.offset,o.left=m===Q&&!!k.left,o.left&&f(G,L,N),o.top=n===Q&&!!k.top,o.top&&f(H,K,M),this.element.css(p).toggle(!(o.x&&o.y||j.x===O&&o.y||j.y===O&&o.x)),d.left-=g.left.charAt?g.user:m!==Q||o.top||!o.left&&!o.top?g.left+this.border:0,d.top-=g.top.charAt?g.user:n!==Q||o.left||!o.left&&!o.top?g.top+this.border:0,i.cornerLeft=k.left,i.cornerTop=k.top,i.corner=j.clone()}},destroy:function(){this.qtip._unbind(this.qtip.tooltip,this._ns),this.qtip.elements.tip&&this.qtip.elements.tip.find("*").remove().end().remove()}}),ha=R.tip=function(a){return new v(a,a.options.style.tip)},ha.initialize="render",ha.sanitize=function(a){if(a.style&&"tip"in a.style){var b=a.style.tip;"object"!=typeof b&&(b=a.style.tip={corner:b}),/string|boolean/i.test(typeof b.corner)||(b.corner=D)}},B.tip={"^position.my|style.tip.(corner|mimic|border)$":function(){this.create(),this.qtip.reposition()},"^style.tip.(height|width)$":function(a){this.size=[a.width,a.height],this.update(),this.qtip.reposition()},"^content.title|style.(classes|widget)$":function(){this.update()}},d.extend(D,y.defaults,{style:{tip:{corner:D,mimic:E,width:6,height:6,border:D,offset:0}}});var wa,xa,ya="qtip-modal",za="."+ya;xa=function(){function a(a){if(d.expr[":"].focusable)return d.expr[":"].focusable;var b,c,e,f=!isNaN(d.attr(a,"tabindex")),g=a.nodeName&&a.nodeName.toLowerCase();return"area"===g?(b=a.parentNode,c=b.name,!(!a.href||!c||"map"!==b.nodeName.toLowerCase())&&(e=d("img[usemap=#"+c+"]")[0],!!e&&e.is(":visible"))):/input|select|textarea|button|object/.test(g)?!a.disabled:"a"===g?a.href||f:f}function c(a){j.length<1&&a.length?a.not("body").blur():j.first().focus()}function e(a){if(h.is(":visible")){var b,e=d(a.target),g=f.tooltip,i=e.closest(W);b=i.length<1?E:parseInt(i[0].style.zIndex,10)>parseInt(g[0].style.zIndex,10),b||e.closest(W)[0]===g[0]||c(e)}}var f,g,h,i=this,j={};d.extend(i,{init:function(){return h=i.elem=d("<div />",{id:"qtip-overlay",html:"<div></div>",mousedown:function(){return E}}).hide(),d(b.body).bind("focusin"+za,e),d(b).bind("keydown"+za,function(a){f&&f.options.show.modal.escape&&27===a.keyCode&&f.hide(a)}),h.bind("click"+za,function(a){f&&f.options.show.modal.blur&&f.hide(a)}),i},update:function(b){f=b,j=b.options.show.modal.stealfocus!==E?b.tooltip.find("*").filter(function(){return a(this)}):[]},toggle:function(a,e,j){var k=a.tooltip,l=a.options.show.modal,m=l.effect,n=e?"show":"hide",o=h.is(":visible"),p=d(za).filter(":visible:not(:animated)").not(k);return i.update(a),e&&l.stealfocus!==E&&c(d(":focus")),h.toggleClass("blurs",l.blur),e&&h.appendTo(b.body),h.is(":animated")&&o===e&&g!==E||!e&&p.length?i:(h.stop(D,E),d.isFunction(m)?m.call(h,e):m===E?h[n]():h.fadeTo(parseInt(j,10)||90,e?1:0,function(){e||h.hide()}),e||h.queue(function(a){h.css({left:"",top:""}),d(za).length||h.detach(),a()}),g=e,f.destroyed&&(f=F),i)}}),i.init()},xa=new xa,d.extend(w.prototype,{init:function(a){var b=a.tooltip;return this.options.on?(a.elements.overlay=xa.elem,b.addClass(ya).css("z-index",y.modal_zindex+d(za).length),a._bind(b,["tooltipshow","tooltiphide"],function(a,c,e){var f=a.originalEvent;if(a.target===b[0])if(f&&"tooltiphide"===a.type&&/mouse(leave|enter)/.test(f.type)&&d(f.relatedTarget).closest(xa.elem[0]).length)try{a.preventDefault()}catch(g){}else(!f||f&&"tooltipsolo"!==f.type)&&this.toggle(a,"tooltipshow"===a.type,e)},this._ns,this),a._bind(b,"tooltipfocus",function(a,c){if(!a.isDefaultPrevented()&&a.target===b[0]){var e=d(za),f=y.modal_zindex+e.length,g=parseInt(b[0].style.zIndex,10);xa.elem[0].style.zIndex=f-1,e.each(function(){this.style.zIndex>g&&(this.style.zIndex-=1)}),e.filter("."+$).qtip("blur",a.originalEvent),b.addClass($)[0].style.zIndex=f,xa.update(c);try{a.preventDefault()}catch(h){}}},this._ns,this),void a._bind(b,"tooltiphide",function(a){a.target===b[0]&&d(za).filter(":visible").not(b).last().qtip("focus",a)},this._ns,this)):this},toggle:function(a,b,c){return a&&a.isDefaultPrevented()?this:void xa.toggle(this.qtip,!!b,c)},destroy:function(){this.qtip.tooltip.removeClass(ya),this.qtip._unbind(this.qtip.tooltip,this._ns),xa.toggle(this.qtip,E),delete this.qtip.elements.overlay}}),wa=R.modal=function(a){return new w(a,a.options.show.modal)},wa.sanitize=function(a){a.show&&("object"!=typeof a.show.modal?a.show.modal={on:!!a.show.modal}:"undefined"==typeof a.show.modal.on&&(a.show.modal.on=D))},y.modal_zindex=y.zindex-200,wa.initialize="render",B.modal={"^show.modal.(on|blur)$":function(){this.destroy(),this.init(),this.qtip.elems.overlay.toggle(this.qtip.tooltip[0].offsetWidth>0)}},d.extend(D,y.defaults,{show:{modal:{on:E,effect:D,blur:D,stealfocus:D,escape:D}}}),R.viewport=function(c,d,e,f,g,h,i){function j(a,b,c,e,f,g,h,i,j){var k=d[f],s=u[a],t=v[a],w=c===Q,x=s===f?j:s===g?-j:-j/2,y=t===f?i:t===g?-i:-i/2,z=q[f]+r[f]-(n?0:m[f]),A=z-k,B=k+j-(h===I?o:p)-z,C=x-(u.precedance===a||s===u[b]?y:0)-(t===O?i/2:0);return w?(C=(s===f?1:-1)*x,d[f]+=A>0?A:B>0?-B:0,d[f]=Math.max(-m[f]+r[f],k-C,Math.min(Math.max(-m[f]+r[f]+(h===I?o:p),k+C),d[f],"center"===s?k-x:1e9))):(e*=c===P?2:0,A>0&&(s!==f||B>0)?(d[f]-=C+e,l.invert(a,f)):B>0&&(s!==g||A>0)&&(d[f]-=(s===O?-C:C)+e,l.invert(a,g)),d[f]<q[f]&&-d[f]>B&&(d[f]=k,l=u.clone())),d[f]-k}var k,l,m,n,o,p,q,r,s=e.target,t=c.elements.tooltip,u=e.my,v=e.at,w=e.adjust,x=w.method.split(" "),y=x[0],z=x[1]||x[0],A=e.viewport,B=e.container,C={left:0,top:0};return A.jquery&&s[0]!==a&&s[0]!==b.body&&"none"!==w.method?(m=B.offset()||C,n="static"===B.css("position"),k="fixed"===t.css("position"),o=A[0]===a?A.width():A.outerWidth(E),p=A[0]===a?A.height():A.outerHeight(E),q={left:k?0:A.scrollLeft(),top:k?0:A.scrollTop()},r=A.offset()||C,"shift"===y&&"shift"===z||(l=u.clone()),C={left:"none"!==y?j(G,H,y,w.x,L,N,I,f,h):0,top:"none"!==z?j(H,G,z,w.y,K,M,J,g,i):0,my:l}):C},R.polys={polygon:function(a,b){var c,d,e,f={width:0,height:0,position:{top:1e10,right:0,bottom:0,left:1e10},adjustable:E},g=0,h=[],i=1,j=1,k=0,l=0;for(g=a.length;g--;)c=[parseInt(a[--g],10),parseInt(a[g+1],10)],c[0]>f.position.right&&(f.position.right=c[0]),c[0]<f.position.left&&(f.position.left=c[0]),c[1]>f.position.bottom&&(f.position.bottom=c[1]),c[1]<f.position.top&&(f.position.top=c[1]),h.push(c);if(d=f.width=Math.abs(f.position.right-f.position.left),e=f.height=Math.abs(f.position.bottom-f.position.top),"c"===b.abbrev())f.position={left:f.position.left+f.width/2,top:f.position.top+f.height/2};else{for(;d>0&&e>0&&i>0&&j>0;)for(d=Math.floor(d/2),e=Math.floor(e/2),b.x===L?i=d:b.x===N?i=f.width-d:i+=Math.floor(d/2),b.y===K?j=e:b.y===M?j=f.height-e:j+=Math.floor(e/2),g=h.length;g--&&!(h.length<2);)k=h[g][0]-f.position.left,l=h[g][1]-f.position.top,(b.x===L&&k>=i||b.x===N&&k<=i||b.x===O&&(k<i||k>f.width-i)||b.y===K&&l>=j||b.y===M&&l<=j||b.y===O&&(l<j||l>f.height-j))&&h.splice(g,1);f.position={left:h[0][0],top:h[0][1]}}return f},rect:function(a,b,c,d){return{width:Math.abs(c-a),height:Math.abs(d-b),position:{left:Math.min(a,c),top:Math.min(b,d)}}},_angles:{tc:1.5,tr:7/4,tl:5/4,bc:.5,br:.25,bl:.75,rc:2,lc:1,c:0},ellipse:function(a,b,c,d,e){var f=R.polys._angles[e.abbrev()],g=0===f?0:c*Math.cos(f*Math.PI),h=d*Math.sin(f*Math.PI);return{width:2*c-Math.abs(g),height:2*d-Math.abs(h),position:{left:a+g,top:b+h},adjustable:E}},circle:function(a,b,c,d){return R.polys.ellipse(a,b,c,c,d)}},R.svg=function(a,c,e){for(var f,g,h,i,j,k,l,m,n,o=c[0],p=d(o.ownerSVGElement),q=o.ownerDocument,r=(parseInt(c.css("stroke-width"),10)||0)/2;!o.getBBox;)o=o.parentNode;if(!o.getBBox||!o.parentNode)return E;switch(o.nodeName){case"ellipse":case"circle":m=R.polys.ellipse(o.cx.baseVal.value,o.cy.baseVal.value,(o.rx||o.r).baseVal.value+r,(o.ry||o.r).baseVal.value+r,e);break;case"line":case"polygon":case"polyline":for(l=o.points||[{x:o.x1.baseVal.value,y:o.y1.baseVal.value},{x:o.x2.baseVal.value,y:o.y2.baseVal.value}],m=[],k=-1,i=l.numberOfItems||l.length;++k<i;)j=l.getItem?l.getItem(k):l[k],m.push.apply(m,[j.x,j.y]);m=R.polys.polygon(m,e);break;default:m=o.getBBox(),m={width:m.width,height:m.height,position:{left:m.x,top:m.y}}}return n=m.position,p=p[0],p.createSVGPoint&&(g=o.getScreenCTM(),l=p.createSVGPoint(),l.x=n.left,l.y=n.top,h=l.matrixTransform(g),n.left=h.x,n.top=h.y),q!==b&&"mouse"!==a.position.target&&(f=d((q.defaultView||q.parentWindow).frameElement).offset(),f&&(n.left+=f.left,n.top+=f.top)),q=d(q),n.left+=q.scrollLeft(),n.top+=q.scrollTop(),m},R.imagemap=function(a,b,c){b.jquery||(b=d(b));var e,f,g,h,i,j=(b.attr("shape")||"rect").toLowerCase().replace("poly","polygon"),k=d('img[usemap="#'+b.parent("map").attr("name")+'"]'),l=d.trim(b.attr("coords")),m=l.replace(/,$/,"").split(",");if(!k.length)return E;if("polygon"===j)h=R.polys.polygon(m,c);else{if(!R.polys[j])return E;for(g=-1,i=m.length,f=[];++g<i;)f.push(parseInt(m[g],10));h=R.polys[j].apply(this,f.concat(c))}return e=k.offset(),e.left+=Math.ceil((k.outerWidth(E)-k.width())/2),e.top+=Math.ceil((k.outerHeight(E)-k.height())/2),h.position.left+=e.left,h.position.top+=e.top,h};var Aa,Ba='<iframe class="qtip-bgiframe" frameborder="0" tabindex="-1" src="javascript:\'\';"  style="display:block; position:absolute; z-index:-1; filter:alpha(opacity=0); -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";"></iframe>';d.extend(x.prototype,{_scroll:function(){var b=this.qtip.elements.overlay;b&&(b[0].style.top=d(a).scrollTop()+"px")},init:function(c){var e=c.tooltip;d("select, object").length<1&&(this.bgiframe=c.elements.bgiframe=d(Ba).appendTo(e),c._bind(e,"tooltipmove",this.adjustBGIFrame,this._ns,this)),this.redrawContainer=d("<div/>",{id:S+"-rcontainer"}).appendTo(b.body),c.elements.overlay&&c.elements.overlay.addClass("qtipmodal-ie6fix")&&(c._bind(a,["scroll","resize"],this._scroll,this._ns,this),c._bind(e,["tooltipshow"],this._scroll,this._ns,this)),this.redraw()},adjustBGIFrame:function(){var a,b,c=this.qtip.tooltip,d={height:c.outerHeight(E),width:c.outerWidth(E)},e=this.qtip.plugins.tip,f=this.qtip.elements.tip;b=parseInt(c.css("borderLeftWidth"),10)||0,b={left:-b,top:-b},e&&f&&(a="x"===e.corner.precedance?[I,L]:[J,K],b[a[1]]-=f[a[0]]()),this.bgiframe.css(b).css(d)},redraw:function(){if(this.qtip.rendered<1||this.drawing)return this;var a,b,c,d,e=this.qtip.tooltip,f=this.qtip.options.style,g=this.qtip.options.position.container;return this.qtip.drawing=1,f.height&&e.css(J,f.height),f.width?e.css(I,f.width):(e.css(I,"").appendTo(this.redrawContainer),b=e.width(),b%2<1&&(b+=1),c=e.css("maxWidth")||"",d=e.css("minWidth")||"",a=(c+d).indexOf("%")>-1?g.width()/100:0,c=(c.indexOf("%")>-1?a:1*parseInt(c,10))||b,d=(d.indexOf("%")>-1?a:1*parseInt(d,10))||0,b=c+d?Math.min(Math.max(b,d),c):b,e.css(I,Math.round(b)).appendTo(g)),this.drawing=0,this},destroy:function(){this.bgiframe&&this.bgiframe.remove(),this.qtip._unbind([a,this.qtip.tooltip],this._ns)}}),Aa=R.ie6=function(a){return 6===da.ie?new x(a):E},Aa.initialize="render",B.ie6={"^content|style$":function(){this.redraw()}}})}(window,document),function(a,b){"use strict";function c(a,b){function c(a,c){var d=a.scratch().qtip,f=b.extend({},c);f.id||(f.id="cy-qtip-target-"+(Date.now()+Math.round(1e4*Math.random()))),d.$domEle||(d.$domEle=k),f.position=f.position||{},f.position.container=f.position.container||b(document.body),f.position.viewport=f.position.viewport||b(document.body),f.position.target=[0,0],f.position.my=f.position.my||"top center",f.position.at=f.position.at||"bottom center";var j=f.position.adjust=f.position.adjust||{};return j.method=j.method||"flip",j.mouse=!1,f.show=f.show||{},h(f.show.event)&&(f.show.event="tap"),f.hide=f.hide||{},f.hide.cyViewport=void 0===f.hide.cyViewport||f.hide.cyViewport,h(f.hide.event)&&(f.hide.event="unfocus"),f.overwrite=!1,f.content&&(e(f.content)||g(f.content)?f.content=i(f.content,a):f.content={text:i(f.content.text,a),title:i(f.content.title,a)}),f}function d(a,b,c){var d=c,f=e(a.pan),g=!f,h=g&&a.isNode(),i=f?a:a.cy(),j=i.container().getBoundingClientRect(),k=h?a.renderedPosition():d?d.renderedPosition||d.cyRenderedPosition:void 0;if(k&&null!=k.x&&!isNaN(k.x)){var l=h?a.renderedBoundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1,includeShadows:!1}):{x1:k.x-1,x2:k.x+1,w:3,y1:k.y-1,y2:k.y+1,h:3};0===b.$domEle.parent().length&&b.$domEle.appendTo(document.body),b.$domEle.css({width:l.w,height:l.h,top:l.y1+j.top+window.pageYOffset,left:l.x1+j.left+window.pageXOffset,position:"absolute","pointer-events":"none",background:"red","z-index":99999999,opacity:.5,visibility:"hidden"}),b.api.set("position.target",b.$domEle)}}var k=b("<div></div>"),l=250;k.css({"z-index":-1,position:"absolute"}),a("collection","qtip",function(a){var b=this,e=this.cy();e.container();return"api"===a?this.scratch().qtip.api:(b.each(function(b,g){f(b)&&(b=g);var h=b.scratch(),i=h.qtip=h.qtip||{},k=c(b,a);k.position.adjust;i.$domEle.qtip(k);var m=i.api=i.$domEle.qtip("api");i.$domEle.removeData("qtip"),d(b,i),b.on(k.show.event,function(a){d(b,i,a),m.show()}),b.on(k.hide.event,function(a){m.hide()}),k.hide.cyViewport&&e.on("viewport",j(function(){m.hide()},l,{leading:!0})),k.position.adjust.cyViewport&&e.on("pan zoom",j(function(a){d(b,i,a),m.reposition()},l,{trailing:!0}))}),this)}),a("core","qtip",function(a){var b=this;b.container();if("api"===a)return this.scratch().qtip.api;var e=b.scratch(),f=e.qtip=e.qtip||{},g=c(b,a);f.$domEle.qtip(g);var h=f.api=f.$domEle.qtip("api");return f.$domEle.removeData("qtip"),b.on(g.show.event,function(a){g.show.cyBgOnly&&(!g.show.cyBgOnly||a.target!==b&&a.cyTarget!==b)||(d(b,f,a),h.show())}),b.on(g.hide.event,function(a){g.hide.cyBgOnly&&(!g.hide.cyBgOnly||a.target!==b&&a.cyTarget!==b)||h.hide()}),g.hide.cyViewport&&b.on("viewport",j(function(){h.hide()},l,{leading:!0})),this})}var d=function(a){return null!=a&&"object"==typeof a},e=function(a){return null!=a&&"function"==typeof a},f=function(a){return null!=a&&"number"==typeof a},g=function(a){return null!=a&&"string"==typeof a},h=function(a){return void 0===a},i=function(a,b){return e(a)?function(c,d){return a.apply(b,[c,d])}:a},j=function(a,b,c){var f,g,h,i,j,k,l,m=0,n=!1,o=!0;if(e(a)){if(b=Math.max(0,b)||0,c===!0){var p=!0;o=!1}else d(c)&&(p=c.leading,n="maxWait"in c&&(Math.max(b,c.maxWait)||0),o="trailing"in c?c.trailing:o);var q=function(){var c=b-(Date.now()-i);if(c<=0){g&&clearTimeout(g);var d=l;g=k=l=void 0,d&&(m=Date.now(),h=a.apply(j,f),k||g||(f=j=null))}else k=setTimeout(q,c)},r=function(){k&&clearTimeout(k),g=k=l=void 0,(o||n!==b)&&(m=Date.now(),h=a.apply(j,f),k||g||(f=j=null))};return function(){if(f=arguments,i=Date.now(),j=this,l=o&&(k||!p),n===!1)var c=p&&!k;else{g||p||(m=i);var d=n-(i-m),e=d<=0;e?(g&&(g=clearTimeout(g)),m=i,h=a.apply(j,f)):g||(g=setTimeout(r,d))}return e&&k?k=clearTimeout(k):k||b===n||(k=setTimeout(q,b)),c&&(e=!0,h=a.apply(j,f)),!e||k||g||(f=j=null),h}}};"undefined"!=typeof module&&module.exports?module.exports=function(a){var b=window.jQuery,d=window.$,e=window.jQuery=window.$=require("jquery");require("qtip2");c(a,e),window.jQuery=b,window.$=d}:"undefined"!=typeof define&&define.amd&&define("cytoscape-qtip",function(){return c}),a&&b&&c(b,a)}("undefined"!=typeof jQuery?jQuery:null,"undefined"!=typeof cytoscape?cytoscape:null),$(document).ready(function(){var a=cytoscape({container:$("#interactionnetworkdiv"),elements:JSON.parse(document.getElementById("interactionnetworkdata").value),userZoomingEnabled:!1,layout:{name:"cose-bilkent"},style:[{selector:"node[main]",style:{height:30,width:function(a){return 10*a.data("id").length+20},shape:"roundrectangle","background-color":"#216869",label:"data(id)","text-halign":"center","text-valign":"center"}},{selector:"node[!main]",style:{height:30,width:function(a){return 10*a.data("id").length+20},shape:"roundrectangle","background-color":"#9cc5a1",label:"data(id)","text-halign":"center","text-valign":"center"}},{selector:"edge",style:{width:3,"curve-style":"bezier","line-color":"#000","target-arrow-color":"#000","target-arrow-shape":"none"}},{selector:'edge[type="Transcriptional_regulatory"]',style:{"line-color":"#A7A37E","target-arrow-color":"#A7A37E","target-arrow-shape":"triangle"}},{selector:'edge[type="Metabolic"]',style:{"line-color":"#046380","target-arrow-color":"#046380","target-arrow-shape":"none"}},{selector:'edge[type="PPI"]',style:{"line-color":"#002F2F","target-arrow-color":"#002F2F","target-arrow-shape":"none"}}]});a.fit(),interactionnetworkcontrolldiv=webix.ui({container:"interactionnetworkcontrolldiv",view:"form",borderless:!0,paddingY:5,paddingX:10,cols:[{view:"button",label:"Download image",width:200,click:function(){webix.html.download(a.png(),"SalmoNet_"+document.getElementById("uniprot").innerHTML+".png")}},{view:"button",type:"iconButton",icon:"arrows-alt",align:"right",width:35,click:function(){a.fit()}},{view:"button",type:"iconButton",icon:"plus",width:35,align:"right",click:function(){a.zoom(a.zoom()+.5)}},{view:"button",type:"iconButton",icon:"minus",width:35,align:"right",click:function(){a.zoom(a.zoom()-.5)}}]}),a.elements("edge").qtip({content:function(){return this.data("type")+" interaction between "+this.source().data("id")+" and "+this.target().data("id")},position:{my:"top center",at:"bottom center"},style:{classes:"qtip-bootstrap",tip:{width:16,height:8}},show:{event:"mouseover"},hide:{event:"mouseout"}}),interactionnetworkcontrolldiv.define("width",$("#interactionnetworkcontrolldiv").width()),interactionnetworkcontrolldiv.resize()}),$(window).resize(function(){interactionnetworkcontrolldiv.define("width",$("#interactionnetworkcontrolldiv").width()),interactionnetworkcontrolldiv.resize()}),$(document).ready(function(){interactiontablediv=webix.ui({container:"interactiontablediv",autowidth:!0,rows:[{id:"interactiontable",view:"datatable",css:"salmonet_table",columns:[{id:"data0",header:["Interactor",{content:"textFilter"}],css:"rank",adjust:!0},{id:"data1",header:["Interactor",{content:"textFilter"}],adjust:!0},{id:"data2",header:"Source <a style='color: #1F2421 !important;' class='uk-icon-justify uk-icon-question-circle' href=\"#legendmodal\" data-uk-modal></a>",fillspace:!0},{id:"data3",header:["Layer",{content:"selectFilter"}],adjust:!0},{id:"data4",header:"MI-score",fillspace:!0},{id:"data5",header:"Interaction Detection Methods",fillspace:!0},{id:"data6",hidden:!0},{id:"data7",hidden:!0},{id:"data8",hidden:!0},{id:"data9",hidden:!0},{id:"data10",hidden:!0},{id:"data11",hidden:!0},{id:"data12",hidden:!0},{id:"data13",hidden:!0},{id:"data14",hidden:!0},{id:"data15",hidden:!0}],height:450,autowidth:!0,datatype:"csv",data:document.getElementById("interactiontabledata").value},{view:"form",css:"toolbar",paddingY:5,paddingX:10,autowidth:!0,cols:[{view:"button",label:"Download table",width:200,click:function(){webix.toExcel($$("interactiontable"),{filename:"SalmoNet_"+document.getElementById("uniprot").innerHTML,name:"{{ .Params.genename }}",columns:{data0:{header:"node_a_genename"},data1:{header:"node_b_genename"},data12:{header:"source"},data13:{header:"references(pubmedID)"},data3:{header:"layer"},data4:{header:"node_a_locus"},data5:{header:"node_b_locus"},data6:{header:"node_a_oma_id"},data7:{header:"node_b_oma_id"},data8:{header:"node_a_ortholog_group"},data9:{header:"node_b_ortholog_group"},data10:{header:"node_a_strain"},data11:{header:"node_b_strain"}}})}}]}]}),$(window).width()<850&&$$("interactiontable").hideColumn("data2")}),$(window).resize(function(){$(window).width()<850&&$$("interactiontable").hideColumn("data2"),$(window).width()>=850&&$$("interactiontable").showColumn("data2")}),$(function(){dtable=new webix.ui({container:"browsetable",id:"dtable",view:"datatable",css:"salmonet_table protein_link",columns:[{id:"uniprot",map:"#data1#",header:["OMA Identifier",{content:"textFilter"}],width:150},{id:"genename",
map:"#data2#",header:["Gene name/Locus tag (old)",{content:"textFilter"}],width:250},{id:"locus_old",map:"#data4#",header:["Locus tag (old)",{content:"textFilter"}],width:250},{id:"locus",map:"#data3#",header:["Locus tag (new)",{content:"textFilter"}],width:250},{id:"numort",map:"#data5#",header:["Number of","Homologs"],width:150},{id:"numint",map:"#data6#",header:["Number of","Interactions"],width:150}],resizeColumn:!0,datatype:"csv",url:data_url_prefix+"data/nodes.csv",autoheight:!0,autowidth:!0,pager:{css:"salmonet_table",template:"{common.prev()}{common.next()}Page {common.page()} from #limit#",container:"paging_here",size:25,group:5},hover:"browse_row_hover",on:{onItemClick:function(a,b,c){window.location.href=data_url_prefix+"protein/"+dtable.getItem(a.row).uniprot.toLowerCase()+"/"}}}),webix.extend($$("dtable"),webix.ProgressBar);var a=[{view:"label",label:"Select a <i>Salmonella</i> strain:"},{view:"select",name:"strain",options:data_url_prefix+"data/strain_select.json"}];strain_select_form=new webix.ui({css:"salmonet_form",container:"strain_select_div",id:"strain_select_form",view:"form",scroll:!1,width:300,elements:a}),$$("strain_select_form").elements.strain.attachEvent("onChange",function(a,b){$$("dtable").showProgress({type:"bottom",delay:3e3,hide:!0}),dtable.clearAll(),dtable.load(data_url_prefix+"data/nodes"+a+".csv"),$$("dtable").refresh()}),$(window).resize(function(){$(window).width()<1050&&(dtable.hideColumn("numort"),dtable.hideColumn("numint")),$(window).width()>=1050&&(dtable.showColumn("numort"),dtable.showColumn("numint")),$(window).width()<850&&(dtable.setColumnWidth("uniprot",80),dtable.setColumnWidth("genename",120),dtable.setColumnWidth("locus",120)),$(window).width()>=850&&(dtable.setColumnWidth("uniprot",150),dtable.setColumnWidth("genename",250),dtable.setColumnWidth("locus",250))}),$(window).width()<1050&&(dtable.hideColumn("numort"),dtable.hideColumn("numint")),$(window).width()<850&&(dtable.setColumnWidth("uniprot",80),dtable.setColumnWidth("genename",120),dtable.setColumnWidth("locus",120))});