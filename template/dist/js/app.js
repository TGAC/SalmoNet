!function(a,b){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){"use strict";function c(a,b){b=b||_;var c=b.createElement("script");c.text=a,b.head.appendChild(c).parentNode.removeChild(c)}function d(a){var b=!!a&&"length"in a&&a.length,c=ma.type(a);return"function"!==c&&!ma.isWindow(a)&&("array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a)}function e(a,b,c){if(ma.isFunction(b))return ma.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return ma.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(wa.test(b))return ma.filter(b,a,c);b=ma.filter(b,a)}return ma.grep(a,function(a){return ea.call(b,a)>-1!==c&&1===a.nodeType})}function f(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}function g(a){var b={};return ma.each(a.match(Ca)||[],function(a,c){b[c]=!0}),b}function h(a){return a}function i(a){throw a}function j(a,b,c){var d;try{a&&ma.isFunction(d=a.promise)?d.call(a).done(b).fail(c):a&&ma.isFunction(d=a.then)?d.call(a,b,c):b.call(void 0,a)}catch(a){c.call(void 0,a)}}function k(){_.removeEventListener("DOMContentLoaded",k),a.removeEventListener("load",k),ma.ready()}function l(){this.expando=ma.expando+l.uid++}function m(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(Ka,"-$&").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c||"false"!==c&&("null"===c?null:+c+""===c?+c:Ja.test(c)?JSON.parse(c):c)}catch(e){}Ia.set(a,b,c)}else c=void 0;return c}function n(a,b,c,d){var e,f=1,g=20,h=d?function(){return d.cur()}:function(){return ma.css(a,b,"")},i=h(),j=c&&c[3]||(ma.cssNumber[b]?"":"px"),k=(ma.cssNumber[b]||"px"!==j&&+i)&&Ma.exec(ma.css(a,b));if(k&&k[3]!==j){j=j||k[3],c=c||[],k=+i||1;do f=f||".5",k/=f,ma.style(a,b,k+j);while(f!==(f=h()/i)&&1!==f&&--g)}return c&&(k=+k||+i||0,e=c[1]?k+(c[1]+1)*c[2]:+c[2],d&&(d.unit=j,d.start=k,d.end=e)),e}function o(a){var b,c=a.ownerDocument,d=a.nodeName,e=Qa[d];return e?e:(b=c.body.appendChild(c.createElement(d)),e=ma.css(b,"display"),b.parentNode.removeChild(b),"none"===e&&(e="block"),Qa[d]=e,e)}function p(a,b){for(var c,d,e=[],f=0,g=a.length;f<g;f++)d=a[f],d.style&&(c=d.style.display,b?("none"===c&&(e[f]=Ha.get(d,"display")||null,e[f]||(d.style.display="")),""===d.style.display&&Oa(d)&&(e[f]=o(d))):"none"!==c&&(e[f]="none",Ha.set(d,"display",c)));for(f=0;f<g;f++)null!=e[f]&&(a[f].style.display=e[f]);return a}function q(a,b){var c="undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName(b||"*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&ma.nodeName(a,b)?ma.merge([a],c):c}function r(a,b){for(var c=0,d=a.length;c<d;c++)Ha.set(a[c],"globalEval",!b||Ha.get(b[c],"globalEval"))}function s(a,b,c,d,e){for(var f,g,h,i,j,k,l=b.createDocumentFragment(),m=[],n=0,o=a.length;n<o;n++)if(f=a[n],f||0===f)if("object"===ma.type(f))ma.merge(m,f.nodeType?[f]:f);else if(Va.test(f)){for(g=g||l.appendChild(b.createElement("div")),h=(Sa.exec(f)||["",""])[1].toLowerCase(),i=Ua[h]||Ua._default,g.innerHTML=i[1]+ma.htmlPrefilter(f)+i[2],k=i[0];k--;)g=g.lastChild;ma.merge(m,g.childNodes),g=l.firstChild,g.textContent=""}else m.push(b.createTextNode(f));for(l.textContent="",n=0;f=m[n++];)if(d&&ma.inArray(f,d)>-1)e&&e.push(f);else if(j=ma.contains(f.ownerDocument,f),g=q(l.appendChild(f),"script"),j&&r(g),c)for(k=0;f=g[k++];)Ta.test(f.type||"")&&c.push(f);return l}function t(){return!0}function u(){return!1}function v(){try{return _.activeElement}catch(a){}}function w(a,b,c,d,e,f){var g,h;if("object"==typeof b){"string"!=typeof c&&(d=d||c,c=void 0);for(h in b)w(a,h,c,d,b[h],f);return a}if(null==d&&null==e?(e=c,d=c=void 0):null==e&&("string"==typeof c?(e=d,d=void 0):(e=d,d=c,c=void 0)),e===!1)e=u;else if(!e)return a;return 1===f&&(g=e,e=function(a){return ma().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=ma.guid++)),a.each(function(){ma.event.add(this,b,e,d,c)})}function x(a,b){return ma.nodeName(a,"table")&&ma.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a:a}function y(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function z(a){var b=bb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function A(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(Ha.hasData(a)&&(f=Ha.access(a),g=Ha.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;c<d;c++)ma.event.add(b,e,j[e][c])}Ia.hasData(a)&&(h=Ia.access(a),i=ma.extend({},h),Ia.set(b,i))}}function B(a,b){var c=b.nodeName.toLowerCase();"input"===c&&Ra.test(a.type)?b.checked=a.checked:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue)}function C(a,b,d,e){b=ca.apply([],b);var f,g,h,i,j,k,l=0,m=a.length,n=m-1,o=b[0],p=ma.isFunction(o);if(p||m>1&&"string"==typeof o&&!ka.checkClone&&ab.test(o))return a.each(function(c){var f=a.eq(c);p&&(b[0]=o.call(this,c,f.html())),C(f,b,d,e)});if(m&&(f=s(b,a[0].ownerDocument,!1,a,e),g=f.firstChild,1===f.childNodes.length&&(f=g),g||e)){for(h=ma.map(q(f,"script"),y),i=h.length;l<m;l++)j=f,l!==n&&(j=ma.clone(j,!0,!0),i&&ma.merge(h,q(j,"script"))),d.call(a[l],j,l);if(i)for(k=h[h.length-1].ownerDocument,ma.map(h,z),l=0;l<i;l++)j=h[l],Ta.test(j.type||"")&&!Ha.access(j,"globalEval")&&ma.contains(k,j)&&(j.src?ma._evalUrl&&ma._evalUrl(j.src):c(j.textContent.replace(cb,""),k))}return a}function D(a,b,c){for(var d,e=b?ma.filter(b,a):a,f=0;null!=(d=e[f]);f++)c||1!==d.nodeType||ma.cleanData(q(d)),d.parentNode&&(c&&ma.contains(d.ownerDocument,d)&&r(q(d,"script")),d.parentNode.removeChild(d));return a}function E(a,b,c){var d,e,f,g,h=a.style;return c=c||fb(a),c&&(g=c.getPropertyValue(b)||c[b],""!==g||ma.contains(a.ownerDocument,a)||(g=ma.style(a,b)),!ka.pixelMarginRight()&&eb.test(g)&&db.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function F(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}function G(a){if(a in kb)return a;for(var b=a[0].toUpperCase()+a.slice(1),c=jb.length;c--;)if(a=jb[c]+b,a in kb)return a}function H(a,b,c){var d=Ma.exec(b);return d?Math.max(0,d[2]-(c||0))+(d[3]||"px"):b}function I(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;f<4;f+=2)"margin"===c&&(g+=ma.css(a,c+Na[f],!0,e)),d?("content"===c&&(g-=ma.css(a,"padding"+Na[f],!0,e)),"margin"!==c&&(g-=ma.css(a,"border"+Na[f]+"Width",!0,e))):(g+=ma.css(a,"padding"+Na[f],!0,e),"padding"!==c&&(g+=ma.css(a,"border"+Na[f]+"Width",!0,e)));return g}function J(a,b,c){var d,e=!0,f=fb(a),g="border-box"===ma.css(a,"boxSizing",!1,f);if(a.getClientRects().length&&(d=a.getBoundingClientRect()[b]),d<=0||null==d){if(d=E(a,b,f),(d<0||null==d)&&(d=a.style[b]),eb.test(d))return d;e=g&&(ka.boxSizingReliable()||d===a.style[b]),d=parseFloat(d)||0}return d+I(a,b,c||(g?"border":"content"),e,f)+"px"}function K(a,b,c,d,e){return new K.prototype.init(a,b,c,d,e)}function L(){mb&&(a.requestAnimationFrame(L),ma.fx.tick())}function M(){return a.setTimeout(function(){lb=void 0}),lb=ma.now()}function N(a,b){var c,d=0,e={height:a};for(b=b?1:0;d<4;d+=2-b)c=Na[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function O(a,b,c){for(var d,e=(R.tweeners[b]||[]).concat(R.tweeners["*"]),f=0,g=e.length;f<g;f++)if(d=e[f].call(c,b,a))return d}function P(a,b,c){var d,e,f,g,h,i,j,k,l="width"in b||"height"in b,m=this,n={},o=a.style,q=a.nodeType&&Oa(a),r=Ha.get(a,"fxshow");c.queue||(g=ma._queueHooks(a,"fx"),null==g.unqueued&&(g.unqueued=0,h=g.empty.fire,g.empty.fire=function(){g.unqueued||h()}),g.unqueued++,m.always(function(){m.always(function(){g.unqueued--,ma.queue(a,"fx").length||g.empty.fire()})}));for(d in b)if(e=b[d],nb.test(e)){if(delete b[d],f=f||"toggle"===e,e===(q?"hide":"show")){if("show"!==e||!r||void 0===r[d])continue;q=!0}n[d]=r&&r[d]||ma.style(a,d)}if(i=!ma.isEmptyObject(b),i||!ma.isEmptyObject(n)){l&&1===a.nodeType&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=r&&r.display,null==j&&(j=Ha.get(a,"display")),k=ma.css(a,"display"),"none"===k&&(j?k=j:(p([a],!0),j=a.style.display||j,k=ma.css(a,"display"),p([a]))),("inline"===k||"inline-block"===k&&null!=j)&&"none"===ma.css(a,"float")&&(i||(m.done(function(){o.display=j}),null==j&&(k=o.display,j="none"===k?"":k)),o.display="inline-block")),c.overflow&&(o.overflow="hidden",m.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]})),i=!1;for(d in n)i||(r?"hidden"in r&&(q=r.hidden):r=Ha.access(a,"fxshow",{display:j}),f&&(r.hidden=!q),q&&p([a],!0),m.done(function(){q||p([a]),Ha.remove(a,"fxshow");for(d in n)ma.style(a,d,n[d])})),i=O(q?r[d]:0,d,m),d in r||(r[d]=i.start,q&&(i.end=i.start,i.start=0))}}function Q(a,b){var c,d,e,f,g;for(c in a)if(d=ma.camelCase(c),e=b[d],f=a[c],ma.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=ma.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function R(a,b,c){var d,e,f=0,g=R.prefilters.length,h=ma.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=lb||M(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;g<i;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),f<1&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:ma.extend({},b),opts:ma.extend(!0,{specialEasing:{},easing:ma.easing._default},c),originalProperties:b,originalOptions:c,startTime:lb||M(),duration:c.duration,tweens:[],createTween:function(b,c){var d=ma.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;c<d;c++)j.tweens[c].run(1);return b?(h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j,b])):h.rejectWith(a,[j,b]),this}}),k=j.props;for(Q(k,j.opts.specialEasing);f<g;f++)if(d=R.prefilters[f].call(j,a,k,j.opts))return ma.isFunction(d.stop)&&(ma._queueHooks(j.elem,j.opts.queue).stop=ma.proxy(d.stop,d)),d;return ma.map(k,O,j),ma.isFunction(j.opts.start)&&j.opts.start.call(a,j),ma.fx.timer(ma.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function S(a){return a.getAttribute&&a.getAttribute("class")||""}function T(a,b,c,d){var e;if(ma.isArray(b))ma.each(b,function(b,e){c||Ab.test(a)?d(a,e):T(a+"["+("object"==typeof e&&null!=e?b:"")+"]",e,c,d)});else if(c||"object"!==ma.type(b))d(a,b);else for(e in b)T(a+"["+e+"]",b[e],c,d)}function U(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(Ca)||[];if(ma.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function V(a,b,c,d){function e(h){var i;return f[h]=!0,ma.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||g||f[j]?g?!(i=j):void 0:(b.dataTypes.unshift(j),e(j),!1)}),i}var f={},g=a===Mb;return e(b.dataTypes[0])||!f["*"]&&e("*")}function W(a,b){var c,d,e=ma.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&ma.extend(!0,a,d),a}function X(a,b,c){for(var d,e,f,g,h=a.contents,i=a.dataTypes;"*"===i[0];)i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}if(f)return f!==i[0]&&i.unshift(f),c[f]}function Y(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}function Z(a){return ma.isWindow(a)?a:9===a.nodeType&&a.defaultView}var $=[],_=a.document,aa=Object.getPrototypeOf,ba=$.slice,ca=$.concat,da=$.push,ea=$.indexOf,fa={},ga=fa.toString,ha=fa.hasOwnProperty,ia=ha.toString,ja=ia.call(Object),ka={},la="3.0.0",ma=function(a,b){return new ma.fn.init(a,b)},na=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,oa=/^-ms-/,pa=/-([a-z])/g,qa=function(a,b){return b.toUpperCase()};ma.fn=ma.prototype={jquery:la,constructor:ma,length:0,toArray:function(){return ba.call(this)},get:function(a){return null!=a?a<0?this[a+this.length]:this[a]:ba.call(this)},pushStack:function(a){var b=ma.merge(this.constructor(),a);return b.prevObject=this,b},each:function(a){return ma.each(this,a)},map:function(a){return this.pushStack(ma.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(ba.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(a<0?b:0);return this.pushStack(c>=0&&c<b?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:da,sort:$.sort,splice:$.splice},ma.extend=ma.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||ma.isFunction(g)||(g={}),h===i&&(g=this,h--);h<i;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(ma.isPlainObject(d)||(e=ma.isArray(d)))?(e?(e=!1,f=c&&ma.isArray(c)?c:[]):f=c&&ma.isPlainObject(c)?c:{},g[b]=ma.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},ma.extend({expando:"jQuery"+(la+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===ma.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){var b=ma.type(a);return("number"===b||"string"===b)&&!isNaN(a-parseFloat(a))},isPlainObject:function(a){var b,c;return!(!a||"[object Object]"!==ga.call(a))&&(!(b=aa(a))||(c=ha.call(b,"constructor")&&b.constructor,"function"==typeof c&&ia.call(c)===ja))},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?fa[ga.call(a)]||"object":typeof a},globalEval:function(a){c(a)},camelCase:function(a){return a.replace(oa,"ms-").replace(pa,qa)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b){var c,e=0;if(d(a))for(c=a.length;e<c&&b.call(a[e],e,a[e])!==!1;e++);else for(e in a)if(b.call(a[e],e,a[e])===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(na,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(d(Object(a))?ma.merge(c,"string"==typeof a?[a]:a):da.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:ea.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;d<c;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;f<g;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var e,f,g=0,h=[];if(d(a))for(e=a.length;g<e;g++)f=b(a[g],g,c),null!=f&&h.push(f);else for(g in a)f=b(a[g],g,c),null!=f&&h.push(f);return ca.apply([],h)},guid:1,proxy:function(a,b){var c,d,e;if("string"==typeof b&&(c=a[b],b=a,a=c),ma.isFunction(a))return d=ba.call(arguments,2),e=function(){return a.apply(b||this,d.concat(ba.call(arguments)))},e.guid=a.guid=a.guid||ma.guid++,e},now:Date.now,support:ka}),"function"==typeof Symbol&&(ma.fn[Symbol.iterator]=$[Symbol.iterator]),ma.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){fa["[object "+b+"]"]=b.toLowerCase()});var ra=function(a){function b(a,b,c,d){var e,f,g,h,i,j,k,m=b&&b.ownerDocument,o=b?b.nodeType:9;if(c=c||[],"string"!=typeof a||!a||1!==o&&9!==o&&11!==o)return c;if(!d&&((b?b.ownerDocument||b:P)!==H&&G(b),b=b||H,J)){if(11!==o&&(i=ra.exec(a)))if(e=i[1]){if(9===o){if(!(g=b.getElementById(e)))return c;if(g.id===e)return c.push(g),c}else if(m&&(g=m.getElementById(e))&&N(b,g)&&g.id===e)return c.push(g),c}else{if(i[2])return $.apply(c,b.getElementsByTagName(a)),c;if((e=i[3])&&w.getElementsByClassName&&b.getElementsByClassName)return $.apply(c,b.getElementsByClassName(e)),c}if(w.qsa&&!U[a+" "]&&(!K||!K.test(a))){if(1!==o)m=b,k=a;else if("object"!==b.nodeName.toLowerCase()){for((h=b.getAttribute("id"))?h=h.replace(va,wa):b.setAttribute("id",h=O),j=A(a),f=j.length;f--;)j[f]="#"+h+" "+n(j[f]);k=j.join(","),m=sa.test(a)&&l(b.parentNode)||b}if(k)try{return $.apply(c,m.querySelectorAll(k)),c}catch(p){}finally{h===O&&b.removeAttribute("id")}}}return C(a.replace(ha,"$1"),b,c,d)}function c(){function a(c,d){return b.push(c+" ")>x.cacheLength&&delete a[b.shift()],a[c+" "]=d}var b=[];return a}function d(a){return a[O]=!0,a}function e(a){var b=H.createElement("fieldset");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function f(a,b){for(var c=a.split("|"),d=c.length;d--;)x.attrHandle[c[d]]=b}function g(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&a.sourceIndex-b.sourceIndex;if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function h(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function i(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function j(a){return function(b){return"label"in b&&b.disabled===a||"form"in b&&b.disabled===a||"form"in b&&b.disabled===!1&&(b.isDisabled===a||b.isDisabled!==!a&&("label"in b||!ya(b))!==a)}}function k(a){return d(function(b){return b=+b,d(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function l(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}function m(){}function n(a){for(var b=0,c=a.length,d="";b<c;b++)d+=a[b].value;return d}function o(a,b,c){var d=b.dir,e=b.next,f=e||d,g=c&&"parentNode"===f,h=R++;return b.first?function(b,c,e){for(;b=b[d];)if(1===b.nodeType||g)return a(b,c,e)}:function(b,c,i){var j,k,l,m=[Q,h];if(i){for(;b=b[d];)if((1===b.nodeType||g)&&a(b,c,i))return!0}else for(;b=b[d];)if(1===b.nodeType||g)if(l=b[O]||(b[O]={}),k=l[b.uniqueID]||(l[b.uniqueID]={}),e&&e===b.nodeName.toLowerCase())b=b[d]||b;else{if((j=k[f])&&j[0]===Q&&j[1]===h)return m[2]=j[2];if(k[f]=m,m[2]=a(b,c,i))return!0}}}function p(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function q(a,c,d){for(var e=0,f=c.length;e<f;e++)b(a,c[e],d);return d}function r(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;h<i;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function s(a,b,c,e,f,g){return e&&!e[O]&&(e=s(e)),f&&!f[O]&&(f=s(f,g)),d(function(d,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=d||q(b||"*",h.nodeType?[h]:h,[]),s=!a||!d&&b?p:r(p,m,a,h,i),t=c?f||(d?a:o||e)?[]:g:s;if(c&&c(s,t,h,i),e)for(j=r(t,n),e(j,[],h,i),k=j.length;k--;)(l=j[k])&&(t[n[k]]=!(s[n[k]]=l));if(d){if(f||a){if(f){for(j=[],k=t.length;k--;)(l=t[k])&&j.push(s[k]=l);f(null,t=[],j,i)}for(k=t.length;k--;)(l=t[k])&&(j=f?aa(d,l):m[k])>-1&&(d[j]=!(g[j]=l))}}else t=r(t===g?t.splice(o,t.length):t),f?f(null,g,t,i):$.apply(g,t)})}function t(a){for(var b,c,d,e=a.length,f=x.relative[a[0].type],g=f||x.relative[" "],h=f?1:0,i=o(function(a){return a===b},g,!0),j=o(function(a){return aa(b,a)>-1},g,!0),k=[function(a,c,d){var e=!f&&(d||c!==D)||((b=c).nodeType?i(a,c,d):j(a,c,d));return b=null,e}];h<e;h++)if(c=x.relative[a[h].type])k=[o(p(k),c)];else{if(c=x.filter[a[h].type].apply(null,a[h].matches),c[O]){for(d=++h;d<e&&!x.relative[a[d].type];d++);return s(h>1&&p(k),h>1&&n(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(ha,"$1"),c,h<d&&t(a.slice(h,d)),d<e&&t(a=a.slice(d)),d<e&&n(a))}k.push(c)}return p(k)}function u(a,c){var e=c.length>0,f=a.length>0,g=function(d,g,h,i,j){var k,l,m,n=0,o="0",p=d&&[],q=[],s=D,t=d||f&&x.find.TAG("*",j),u=Q+=null==s?1:Math.random()||.1,v=t.length;for(j&&(D=g===H||g||j);o!==v&&null!=(k=t[o]);o++){if(f&&k){for(l=0,g||k.ownerDocument===H||(G(k),h=!J);m=a[l++];)if(m(k,g||H,h)){i.push(k);break}j&&(Q=u)}e&&((k=!m&&k)&&n--,d&&p.push(k))}if(n+=o,e&&o!==n){for(l=0;m=c[l++];)m(p,q,g,h);if(d){if(n>0)for(;o--;)p[o]||q[o]||(q[o]=Y.call(i));q=r(q)}$.apply(i,q),j&&!d&&q.length>0&&n+c.length>1&&b.uniqueSort(i)}return j&&(Q=u,D=s),p};return e?d(g):g}var v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O="sizzle"+1*new Date,P=a.document,Q=0,R=0,S=c(),T=c(),U=c(),V=function(a,b){return a===b&&(F=!0),0},W={}.hasOwnProperty,X=[],Y=X.pop,Z=X.push,$=X.push,_=X.slice,aa=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},ba="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ca="[\\x20\\t\\r\\n\\f]",da="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",ea="\\["+ca+"*("+da+")(?:"+ca+"*([*^$|!~]?=)"+ca+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+da+"))|)"+ca+"*\\]",fa=":("+da+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ea+")*)|.*)\\)|)",ga=new RegExp(ca+"+","g"),ha=new RegExp("^"+ca+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ca+"+$","g"),ia=new RegExp("^"+ca+"*,"+ca+"*"),ja=new RegExp("^"+ca+"*([>+~]|"+ca+")"+ca+"*"),ka=new RegExp("="+ca+"*([^\\]'\"]*?)"+ca+"*\\]","g"),la=new RegExp(fa),ma=new RegExp("^"+da+"$"),na={ID:new RegExp("^#("+da+")"),CLASS:new RegExp("^\\.("+da+")"),TAG:new RegExp("^("+da+"|[*])"),ATTR:new RegExp("^"+ea),PSEUDO:new RegExp("^"+fa),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ca+"*(even|odd|(([+-]|)(\\d*)n|)"+ca+"*(?:([+-]|)"+ca+"*(\\d+)|))"+ca+"*\\)|)","i"),bool:new RegExp("^(?:"+ba+")$","i"),needsContext:new RegExp("^"+ca+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ca+"*((?:-\\d)?\\d*)"+ca+"*\\)|)(?=[^-]|$)","i")},oa=/^(?:input|select|textarea|button)$/i,pa=/^h\d$/i,qa=/^[^{]+\{\s*\[native \w/,ra=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,sa=/[+~]/,ta=new RegExp("\\\\([\\da-f]{1,6}"+ca+"?|("+ca+")|.)","ig"),ua=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:d<0?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},va=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,wa=function(a,b){return b?"\0"===a?"ï¿½":a.slice(0,-1)+"\\"+a.charCodeAt(a.length-1).toString(16)+" ":"\\"+a},xa=function(){G()},ya=o(function(a){return a.disabled===!0},{dir:"parentNode",next:"legend"});try{$.apply(X=_.call(P.childNodes),P.childNodes),X[P.childNodes.length].nodeType}catch(za){$={apply:X.length?function(a,b){Z.apply(a,_.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}w=b.support={},z=b.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return!!b&&"HTML"!==b.nodeName},G=b.setDocument=function(a){var b,c,d=a?a.ownerDocument||a:P;return d!==H&&9===d.nodeType&&d.documentElement?(H=d,I=H.documentElement,J=!z(H),P!==H&&(c=H.defaultView)&&c.top!==c&&(c.addEventListener?c.addEventListener("unload",xa,!1):c.attachEvent&&c.attachEvent("onunload",xa)),w.attributes=e(function(a){return a.className="i",!a.getAttribute("className")}),w.getElementsByTagName=e(function(a){return a.appendChild(H.createComment("")),!a.getElementsByTagName("*").length}),w.getElementsByClassName=qa.test(H.getElementsByClassName),w.getById=e(function(a){return I.appendChild(a).id=O,!H.getElementsByName||!H.getElementsByName(O).length}),w.getById?(x.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&J){var c=b.getElementById(a);return c?[c]:[]}},x.filter.ID=function(a){var b=a.replace(ta,ua);return function(a){return a.getAttribute("id")===b}}):(delete x.find.ID,x.filter.ID=function(a){var b=a.replace(ta,ua);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),x.find.TAG=w.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):w.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},x.find.CLASS=w.getElementsByClassName&&function(a,b){if("undefined"!=typeof b.getElementsByClassName&&J)return b.getElementsByClassName(a)},L=[],K=[],(w.qsa=qa.test(H.querySelectorAll))&&(e(function(a){I.appendChild(a).innerHTML="<a id='"+O+"'></a><select id='"+O+"-\r\\' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&K.push("[*^$]="+ca+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||K.push("\\["+ca+"*(?:value|"+ba+")"),a.querySelectorAll("[id~="+O+"-]").length||K.push("~="),a.querySelectorAll(":checked").length||K.push(":checked"),a.querySelectorAll("a#"+O+"+*").length||K.push(".#.+[+~]")}),e(function(a){a.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var b=H.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&K.push("name"+ca+"*[*^$|!~]?="),2!==a.querySelectorAll(":enabled").length&&K.push(":enabled",":disabled"),I.appendChild(a).disabled=!0,2!==a.querySelectorAll(":disabled").length&&K.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),K.push(",.*:")})),(w.matchesSelector=qa.test(M=I.matches||I.webkitMatchesSelector||I.mozMatchesSelector||I.oMatchesSelector||I.msMatchesSelector))&&e(function(a){w.disconnectedMatch=M.call(a,"*"),M.call(a,"[s!='']:x"),L.push("!=",fa)}),K=K.length&&new RegExp(K.join("|")),L=L.length&&new RegExp(L.join("|")),b=qa.test(I.compareDocumentPosition),N=b||qa.test(I.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},V=b?function(a,b){if(a===b)return F=!0,0;var c=!a.compareDocumentPosition-!b.compareDocumentPosition;return c?c:(c=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&c||!w.sortDetached&&b.compareDocumentPosition(a)===c?a===H||a.ownerDocument===P&&N(P,a)?-1:b===H||b.ownerDocument===P&&N(P,b)?1:E?aa(E,a)-aa(E,b):0:4&c?-1:1)}:function(a,b){if(a===b)return F=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,h=[a],i=[b];if(!e||!f)return a===H?-1:b===H?1:e?-1:f?1:E?aa(E,a)-aa(E,b):0;if(e===f)return g(a,b);for(c=a;c=c.parentNode;)h.unshift(c);for(c=b;c=c.parentNode;)i.unshift(c);for(;h[d]===i[d];)d++;return d?g(h[d],i[d]):h[d]===P?-1:i[d]===P?1:0},H):H},b.matches=function(a,c){return b(a,null,null,c)},b.matchesSelector=function(a,c){if((a.ownerDocument||a)!==H&&G(a),c=c.replace(ka,"='$1']"),w.matchesSelector&&J&&!U[c+" "]&&(!L||!L.test(c))&&(!K||!K.test(c)))try{var d=M.call(a,c);if(d||w.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return b(c,H,null,[a]).length>0},b.contains=function(a,b){return(a.ownerDocument||a)!==H&&G(a),N(a,b)},b.attr=function(a,b){(a.ownerDocument||a)!==H&&G(a);var c=x.attrHandle[b.toLowerCase()],d=c&&W.call(x.attrHandle,b.toLowerCase())?c(a,b,!J):void 0;return void 0!==d?d:w.attributes||!J?a.getAttribute(b):(d=a.getAttributeNode(b))&&d.specified?d.value:null},b.escape=function(a){return(a+"").replace(va,wa)},b.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},b.uniqueSort=function(a){var b,c=[],d=0,e=0;if(F=!w.detectDuplicates,E=!w.sortStable&&a.slice(0),a.sort(V),F){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return E=null,a},y=b.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=y(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d++];)c+=y(b);return c},x=b.selectors={cacheLength:50,createPseudo:d,match:na,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ta,ua),a[3]=(a[3]||a[4]||a[5]||"").replace(ta,ua),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return na.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&la.test(c)&&(b=A(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ta,ua).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=S[a+" "];return b||(b=new RegExp("(^|"+ca+")"+a+"("+ca+"|$)"))&&S(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,c,d){return function(e){var f=b.attr(e,a);return null==f?"!="===c:!c||(f+="","="===c?f===d:"!="===c?f!==d:"^="===c?d&&0===f.indexOf(d):"*="===c?d&&f.indexOf(d)>-1:"$="===c?d&&f.slice(-d.length)===d:"~="===c?(" "+f.replace(ga," ")+" ").indexOf(d)>-1:"|="===c&&(f===d||f.slice(0,d.length+1)===d+"-"))}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h,t=!1;if(q){if(f){for(;p;){for(m=b;m=m[p];)if(h?m.nodeName.toLowerCase()===r:1===m.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(m=q,l=m[O]||(m[O]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===Q&&j[1],t=n&&j[2],m=n&&q.childNodes[n];m=++n&&m&&m[p]||(t=n=0)||o.pop();)if(1===m.nodeType&&++t&&m===b){k[a]=[Q,n,t];break}}else if(s&&(m=b,l=m[O]||(m[O]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===Q&&j[1],t=n),t===!1)for(;(m=++n&&m&&m[p]||(t=n=0)||o.pop())&&((h?m.nodeName.toLowerCase()!==r:1!==m.nodeType)||!++t||(s&&(l=m[O]||(m[O]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),k[a]=[Q,t]),m!==b)););return t-=e,t===d||t%d===0&&t/d>=0}}},PSEUDO:function(a,c){var e,f=x.pseudos[a]||x.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return f[O]?f(c):f.length>1?(e=[a,a,"",c],x.setFilters.hasOwnProperty(a.toLowerCase())?d(function(a,b){for(var d,e=f(a,c),g=e.length;g--;)d=aa(a,e[g]),a[d]=!(b[d]=e[g])}):function(a){return f(a,0,e)}):f}},pseudos:{not:d(function(a){var b=[],c=[],e=B(a.replace(ha,"$1"));return e[O]?d(function(a,b,c,d){for(var f,g=e(a,null,d,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,d,f){return b[0]=a,e(b,null,f,c),b[0]=null,!c.pop()}}),has:d(function(a){return function(c){return b(a,c).length>0}}),contains:d(function(a){return a=a.replace(ta,ua),function(b){return(b.textContent||b.innerText||y(b)).indexOf(a)>-1}}),lang:d(function(a){return ma.test(a||"")||b.error("unsupported lang: "+a),a=a.replace(ta,ua).toLowerCase(),function(b){var c;do if(c=J?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===I},focus:function(a){return a===H.activeElement&&(!H.hasFocus||H.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:j(!1),disabled:j(!0),checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){
for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!x.pseudos.empty(a)},header:function(a){return pa.test(a.nodeName)},input:function(a){return oa.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:k(function(){return[0]}),last:k(function(a,b){return[b-1]}),eq:k(function(a,b,c){return[c<0?c+b:c]}),even:k(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:k(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:k(function(a,b,c){for(var d=c<0?c+b:c;--d>=0;)a.push(d);return a}),gt:k(function(a,b,c){for(var d=c<0?c+b:c;++d<b;)a.push(d);return a})}},x.pseudos.nth=x.pseudos.eq;for(v in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[v]=h(v);for(v in{submit:!0,reset:!0})x.pseudos[v]=i(v);return m.prototype=x.filters=x.pseudos,x.setFilters=new m,A=b.tokenize=function(a,c){var d,e,f,g,h,i,j,k=T[a+" "];if(k)return c?0:k.slice(0);for(h=a,i=[],j=x.preFilter;h;){d&&!(e=ia.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),d=!1,(e=ja.exec(h))&&(d=e.shift(),f.push({value:d,type:e[0].replace(ha," ")}),h=h.slice(d.length));for(g in x.filter)!(e=na[g].exec(h))||j[g]&&!(e=j[g](e))||(d=e.shift(),f.push({value:d,type:g,matches:e}),h=h.slice(d.length));if(!d)break}return c?h.length:h?b.error(a):T(a,i).slice(0)},B=b.compile=function(a,b){var c,d=[],e=[],f=U[a+" "];if(!f){for(b||(b=A(a)),c=b.length;c--;)f=t(b[c]),f[O]?d.push(f):e.push(f);f=U(a,u(e,d)),f.selector=a}return f},C=b.select=function(a,b,c,d){var e,f,g,h,i,j="function"==typeof a&&a,k=!d&&A(a=j.selector||a);if(c=c||[],1===k.length){if(f=k[0]=k[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&w.getById&&9===b.nodeType&&J&&x.relative[f[1].type]){if(b=(x.find.ID(g.matches[0].replace(ta,ua),b)||[])[0],!b)return c;j&&(b=b.parentNode),a=a.slice(f.shift().value.length)}for(e=na.needsContext.test(a)?0:f.length;e--&&(g=f[e],!x.relative[h=g.type]);)if((i=x.find[h])&&(d=i(g.matches[0].replace(ta,ua),sa.test(f[0].type)&&l(b.parentNode)||b))){if(f.splice(e,1),a=d.length&&n(f),!a)return $.apply(c,d),c;break}}return(j||B(a,k))(d,b,!J,c,!b||sa.test(a)&&l(b.parentNode)||b),c},w.sortStable=O.split("").sort(V).join("")===O,w.detectDuplicates=!!F,G(),w.sortDetached=e(function(a){return 1&a.compareDocumentPosition(H.createElement("fieldset"))}),e(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||f("type|href|height|width",function(a,b,c){if(!c)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),w.attributes&&e(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||f("value",function(a,b,c){if(!c&&"input"===a.nodeName.toLowerCase())return a.defaultValue}),e(function(a){return null==a.getAttribute("disabled")})||f(ba,function(a,b,c){var d;if(!c)return a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),b}(a);ma.find=ra,ma.expr=ra.selectors,ma.expr[":"]=ma.expr.pseudos,ma.uniqueSort=ma.unique=ra.uniqueSort,ma.text=ra.getText,ma.isXMLDoc=ra.isXML,ma.contains=ra.contains,ma.escapeSelector=ra.escape;var sa=function(a,b,c){for(var d=[],e=void 0!==c;(a=a[b])&&9!==a.nodeType;)if(1===a.nodeType){if(e&&ma(a).is(c))break;d.push(a)}return d},ta=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},ua=ma.expr.match.needsContext,va=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,wa=/^.[^:#\[\.,]*$/;ma.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?ma.find.matchesSelector(d,a)?[d]:[]:ma.find.matches(a,ma.grep(b,function(a){return 1===a.nodeType}))},ma.fn.extend({find:function(a){var b,c,d=this.length,e=this;if("string"!=typeof a)return this.pushStack(ma(a).filter(function(){for(b=0;b<d;b++)if(ma.contains(e[b],this))return!0}));for(c=this.pushStack([]),b=0;b<d;b++)ma.find(a,e[b],c);return d>1?ma.uniqueSort(c):c},filter:function(a){return this.pushStack(e(this,a||[],!1))},not:function(a){return this.pushStack(e(this,a||[],!0))},is:function(a){return!!e(this,"string"==typeof a&&ua.test(a)?ma(a):a||[],!1).length}});var xa,ya=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,za=ma.fn.init=function(a,b,c){var d,e;if(!a)return this;if(c=c||xa,"string"==typeof a){if(d="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:ya.exec(a),!d||!d[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(d[1]){if(b=b instanceof ma?b[0]:b,ma.merge(this,ma.parseHTML(d[1],b&&b.nodeType?b.ownerDocument||b:_,!0)),va.test(d[1])&&ma.isPlainObject(b))for(d in b)ma.isFunction(this[d])?this[d](b[d]):this.attr(d,b[d]);return this}return e=_.getElementById(d[2]),e&&(this[0]=e,this.length=1),this}return a.nodeType?(this[0]=a,this.length=1,this):ma.isFunction(a)?void 0!==c.ready?c.ready(a):a(ma):ma.makeArray(a,this)};za.prototype=ma.fn,xa=ma(_);var Aa=/^(?:parents|prev(?:Until|All))/,Ba={children:!0,contents:!0,next:!0,prev:!0};ma.fn.extend({has:function(a){var b=ma(a,this),c=b.length;return this.filter(function(){for(var a=0;a<c;a++)if(ma.contains(this,b[a]))return!0})},closest:function(a,b){var c,d=0,e=this.length,f=[],g="string"!=typeof a&&ma(a);if(!ua.test(a))for(;d<e;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&ma.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?ma.uniqueSort(f):f)},index:function(a){return a?"string"==typeof a?ea.call(ma(a),this[0]):ea.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(ma.uniqueSort(ma.merge(this.get(),ma(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),ma.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return sa(a,"parentNode")},parentsUntil:function(a,b,c){return sa(a,"parentNode",c)},next:function(a){return f(a,"nextSibling")},prev:function(a){return f(a,"previousSibling")},nextAll:function(a){return sa(a,"nextSibling")},prevAll:function(a){return sa(a,"previousSibling")},nextUntil:function(a,b,c){return sa(a,"nextSibling",c)},prevUntil:function(a,b,c){return sa(a,"previousSibling",c)},siblings:function(a){return ta((a.parentNode||{}).firstChild,a)},children:function(a){return ta(a.firstChild)},contents:function(a){return a.contentDocument||ma.merge([],a.childNodes)}},function(a,b){ma.fn[a]=function(c,d){var e=ma.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=ma.filter(d,e)),this.length>1&&(Ba[a]||ma.uniqueSort(e),Aa.test(a)&&e.reverse()),this.pushStack(e)}});var Ca=/\S+/g;ma.Callbacks=function(a){a="string"==typeof a?g(a):ma.extend({},a);var b,c,d,e,f=[],h=[],i=-1,j=function(){for(e=a.once,d=b=!0;h.length;i=-1)for(c=h.shift();++i<f.length;)f[i].apply(c[0],c[1])===!1&&a.stopOnFalse&&(i=f.length,c=!1);a.memory||(c=!1),b=!1,e&&(f=c?[]:"")},k={add:function(){return f&&(c&&!b&&(i=f.length-1,h.push(c)),function d(b){ma.each(b,function(b,c){ma.isFunction(c)?a.unique&&k.has(c)||f.push(c):c&&c.length&&"string"!==ma.type(c)&&d(c)})}(arguments),c&&!b&&j()),this},remove:function(){return ma.each(arguments,function(a,b){for(var c;(c=ma.inArray(b,f,c))>-1;)f.splice(c,1),c<=i&&i--}),this},has:function(a){return a?ma.inArray(a,f)>-1:f.length>0},empty:function(){return f&&(f=[]),this},disable:function(){return e=h=[],f=c="",this},disabled:function(){return!f},lock:function(){return e=h=[],c||b||(f=c=""),this},locked:function(){return!!e},fireWith:function(a,c){return e||(c=c||[],c=[a,c.slice?c.slice():c],h.push(c),b||j()),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!d}};return k},ma.extend({Deferred:function(b){var c=[["notify","progress",ma.Callbacks("memory"),ma.Callbacks("memory"),2],["resolve","done",ma.Callbacks("once memory"),ma.Callbacks("once memory"),0,"resolved"],["reject","fail",ma.Callbacks("once memory"),ma.Callbacks("once memory"),1,"rejected"]],d="pending",e={state:function(){return d},always:function(){return f.done(arguments).fail(arguments),this},"catch":function(a){return e.then(null,a)},pipe:function(){var a=arguments;return ma.Deferred(function(b){ma.each(c,function(c,d){var e=ma.isFunction(a[d[4]])&&a[d[4]];f[d[1]](function(){var a=e&&e.apply(this,arguments);a&&ma.isFunction(a.promise)?a.promise().progress(b.notify).done(b.resolve).fail(b.reject):b[d[0]+"With"](this,e?[a]:arguments)})}),a=null}).promise()},then:function(b,d,e){function f(b,c,d,e){return function(){var j=this,k=arguments,l=function(){var a,l;if(!(b<g)){if(a=d.apply(j,k),a===c.promise())throw new TypeError("Thenable self-resolution");l=a&&("object"==typeof a||"function"==typeof a)&&a.then,ma.isFunction(l)?e?l.call(a,f(g,c,h,e),f(g,c,i,e)):(g++,l.call(a,f(g,c,h,e),f(g,c,i,e),f(g,c,h,c.notifyWith))):(d!==h&&(j=void 0,k=[a]),(e||c.resolveWith)(j,k))}},m=e?l:function(){try{l()}catch(a){ma.Deferred.exceptionHook&&ma.Deferred.exceptionHook(a,m.stackTrace),b+1>=g&&(d!==i&&(j=void 0,k=[a]),c.rejectWith(j,k))}};b?m():(ma.Deferred.getStackHook&&(m.stackTrace=ma.Deferred.getStackHook()),a.setTimeout(m))}}var g=0;return ma.Deferred(function(a){c[0][3].add(f(0,a,ma.isFunction(e)?e:h,a.notifyWith)),c[1][3].add(f(0,a,ma.isFunction(b)?b:h)),c[2][3].add(f(0,a,ma.isFunction(d)?d:i))}).promise()},promise:function(a){return null!=a?ma.extend(a,e):e}},f={};return ma.each(c,function(a,b){var g=b[2],h=b[5];e[b[1]]=g.add,h&&g.add(function(){d=h},c[3-a][2].disable,c[0][2].lock),g.add(b[3].fire),f[b[0]]=function(){return f[b[0]+"With"](this===f?void 0:this,arguments),this},f[b[0]+"With"]=g.fireWith}),e.promise(f),b&&b.call(f,f),f},when:function(a){var b=arguments.length,c=b,d=Array(c),e=ba.call(arguments),f=ma.Deferred(),g=function(a){return function(c){d[a]=this,e[a]=arguments.length>1?ba.call(arguments):c,--b||f.resolveWith(d,e)}};if(b<=1&&(j(a,f.done(g(c)).resolve,f.reject),"pending"===f.state()||ma.isFunction(e[c]&&e[c].then)))return f.then();for(;c--;)j(e[c],g(c),f.reject);return f.promise()}});var Da=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;ma.Deferred.exceptionHook=function(b,c){a.console&&a.console.warn&&b&&Da.test(b.name)&&a.console.warn("jQuery.Deferred exception: "+b.message,b.stack,c)};var Ea=ma.Deferred();ma.fn.ready=function(a){return Ea.then(a),this},ma.extend({isReady:!1,readyWait:1,holdReady:function(a){a?ma.readyWait++:ma.ready(!0)},ready:function(a){(a===!0?--ma.readyWait:ma.isReady)||(ma.isReady=!0,a!==!0&&--ma.readyWait>0||Ea.resolveWith(_,[ma]))}}),ma.ready.then=Ea.then,"complete"===_.readyState||"loading"!==_.readyState&&!_.documentElement.doScroll?a.setTimeout(ma.ready):(_.addEventListener("DOMContentLoaded",k),a.addEventListener("load",k));var Fa=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===ma.type(c)){e=!0;for(h in c)Fa(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,ma.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(ma(a),c)})),b))for(;h<i;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},Ga=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};l.uid=1,l.prototype={cache:function(a){var b=a[this.expando];return b||(b={},Ga(a)&&(a.nodeType?a[this.expando]=b:Object.defineProperty(a,this.expando,{value:b,configurable:!0}))),b},set:function(a,b,c){var d,e=this.cache(a);if("string"==typeof b)e[ma.camelCase(b)]=c;else for(d in b)e[ma.camelCase(d)]=b[d];return e},get:function(a,b){return void 0===b?this.cache(a):a[this.expando]&&a[this.expando][ma.camelCase(b)]},access:function(a,b,c){return void 0===b||b&&"string"==typeof b&&void 0===c?this.get(a,b):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d=a[this.expando];if(void 0!==d){if(void 0!==b){ma.isArray(b)?b=b.map(ma.camelCase):(b=ma.camelCase(b),b=b in d?[b]:b.match(Ca)||[]),c=b.length;for(;c--;)delete d[b[c]]}(void 0===b||ma.isEmptyObject(d))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){var b=a[this.expando];return void 0!==b&&!ma.isEmptyObject(b)}};var Ha=new l,Ia=new l,Ja=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ka=/[A-Z]/g;ma.extend({hasData:function(a){return Ia.hasData(a)||Ha.hasData(a)},data:function(a,b,c){return Ia.access(a,b,c)},removeData:function(a,b){Ia.remove(a,b)},_data:function(a,b,c){return Ha.access(a,b,c)},_removeData:function(a,b){Ha.remove(a,b)}}),ma.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=Ia.get(f),1===f.nodeType&&!Ha.get(f,"hasDataAttrs"))){for(c=g.length;c--;)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=ma.camelCase(d.slice(5)),m(f,d,e[d])));Ha.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){Ia.set(this,a)}):Fa(this,function(b){var c;if(f&&void 0===b){if(c=Ia.get(f,a),void 0!==c)return c;if(c=m(f,a),void 0!==c)return c}else this.each(function(){Ia.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){Ia.remove(this,a)})}}),ma.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=Ha.get(a,b),c&&(!d||ma.isArray(c)?d=Ha.access(a,b,ma.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=ma.queue(a,b),d=c.length,e=c.shift(),f=ma._queueHooks(a,b),g=function(){ma.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return Ha.get(a,c)||Ha.access(a,c,{empty:ma.Callbacks("once memory").add(function(){Ha.remove(a,[b+"queue",c])})})}}),ma.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?ma.queue(this[0],a):void 0===b?this:this.each(function(){var c=ma.queue(this,a,b);ma._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&ma.dequeue(this,a)})},dequeue:function(a){return this.each(function(){ma.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=ma.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};for("string"!=typeof a&&(b=a,a=void 0),a=a||"fx";g--;)c=Ha.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var La=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ma=new RegExp("^(?:([+-])=|)("+La+")([a-z%]*)$","i"),Na=["Top","Right","Bottom","Left"],Oa=function(a,b){return a=b||a,"none"===a.style.display||""===a.style.display&&ma.contains(a.ownerDocument,a)&&"none"===ma.css(a,"display")},Pa=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e},Qa={};ma.fn.extend({show:function(){return p(this,!0)},hide:function(){return p(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){Oa(this)?ma(this).show():ma(this).hide()})}});var Ra=/^(?:checkbox|radio)$/i,Sa=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Ta=/^$|\/(?:java|ecma)script/i,Ua={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ua.optgroup=Ua.option,Ua.tbody=Ua.tfoot=Ua.colgroup=Ua.caption=Ua.thead,Ua.th=Ua.td;var Va=/<|&#?\w+;/;!function(){var a=_.createDocumentFragment(),b=a.appendChild(_.createElement("div")),c=_.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),ka.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",ka.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var Wa=_.documentElement,Xa=/^key/,Ya=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Za=/^([^.]*)(?:\.(.+)|)/;ma.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=Ha.get(a);if(q)for(c.handler&&(f=c,c=f.handler,e=f.selector),e&&ma.find.matchesSelector(Wa,e),c.guid||(c.guid=ma.guid++),(i=q.events)||(i=q.events={}),(g=q.handle)||(g=q.handle=function(b){return"undefined"!=typeof ma&&ma.event.triggered!==b.type?ma.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(Ca)||[""],j=b.length;j--;)h=Za.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n&&(l=ma.event.special[n]||{},n=(e?l.delegateType:l.bindType)||n,l=ma.event.special[n]||{},k=ma.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&ma.expr.match.needsContext.test(e),namespace:o.join(".")},f),(m=i[n])||(m=i[n]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,o,g)!==!1||a.addEventListener&&a.addEventListener(n,g)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),ma.event.global[n]=!0)},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=Ha.hasData(a)&&Ha.get(a);if(q&&(i=q.events)){for(b=(b||"").match(Ca)||[""],j=b.length;j--;)if(h=Za.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=ma.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;f--;)k=m[f],!e&&p!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||ma.removeEvent(a,n,q.handle),delete i[n])}else for(n in i)ma.event.remove(a,n+b[j],c,d,!0);ma.isEmptyObject(i)&&Ha.remove(a,"handle events")}},dispatch:function(a){var b,c,d,e,f,g,h=ma.event.fix(a),i=new Array(arguments.length),j=(Ha.get(this,"events")||{})[h.type]||[],k=ma.event.special[h.type]||{};for(i[0]=h,b=1;b<arguments.length;b++)i[b]=arguments[b];if(h.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,h)!==!1){for(g=ma.event.handlers.call(this,h,j),b=0;(e=g[b++])&&!h.isPropagationStopped();)for(h.currentTarget=e.elem,c=0;(f=e.handlers[c++])&&!h.isImmediatePropagationStopped();)h.rnamespace&&!h.rnamespace.test(f.namespace)||(h.handleObj=f,h.data=f.data,d=((ma.event.special[f.origType]||{}).handle||f.handler).apply(e.elem,i),void 0!==d&&(h.result=d)===!1&&(h.preventDefault(),h.stopPropagation()));return k.postDispatch&&k.postDispatch.call(this,h),h.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&("click"!==a.type||isNaN(a.button)||a.button<1))for(;i!==this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(d=[],c=0;c<h;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?ma(e,this).index(i)>-1:ma.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},addProp:function(a,b){Object.defineProperty(ma.Event.prototype,a,{enumerable:!0,configurable:!0,get:ma.isFunction(b)?function(){if(this.originalEvent)return b(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[a]},set:function(b){Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:b})}})},fix:function(a){return a[ma.expando]?a:new ma.Event(a)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==v()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===v()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&ma.nodeName(this,"input"))return this.click(),!1},_default:function(a){return ma.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}},ma.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)},ma.Event=function(a,b){return this instanceof ma.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?t:u,this.target=a.target&&3===a.target.nodeType?a.target.parentNode:a.target,this.currentTarget=a.currentTarget,this.relatedTarget=a.relatedTarget):this.type=a,b&&ma.extend(this,b),this.timeStamp=a&&a.timeStamp||ma.now(),void(this[ma.expando]=!0)):new ma.Event(a,b)},ma.Event.prototype={constructor:ma.Event,isDefaultPrevented:u,isPropagationStopped:u,isImmediatePropagationStopped:u,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=t,a&&!this.isSimulated&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=t,a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=t,a&&!this.isSimulated&&a.stopImmediatePropagation(),this.stopPropagation()}},ma.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(a){var b=a.button;return null==a.which&&Xa.test(a.type)?null!=a.charCode?a.charCode:a.keyCode:!a.which&&void 0!==b&&Ya.test(a.type)?1&b?1:2&b?3:4&b?2:0:a.which}},ma.event.addProp),ma.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){ma.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return e&&(e===d||ma.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),ma.fn.extend({on:function(a,b,c,d){return w(this,a,b,c,d)},one:function(a,b,c,d){return w(this,a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,ma(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return b!==!1&&"function"!=typeof b||(c=b,b=void 0),c===!1&&(c=u),this.each(function(){ma.event.remove(this,a,c,b)})}});var $a=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,_a=/<script|<style|<link/i,ab=/checked\s*(?:[^=]|=\s*.checked.)/i,bb=/^true\/(.*)/,cb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;ma.extend({htmlPrefilter:function(a){return a.replace($a,"<$1></$2>")},clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=ma.contains(a.ownerDocument,a);if(!(ka.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||ma.isXMLDoc(a)))for(g=q(h),f=q(a),d=0,e=f.length;d<e;d++)B(f[d],g[d]);if(b)if(c)for(f=f||q(a),g=g||q(h),d=0,e=f.length;d<e;d++)A(f[d],g[d]);else A(a,h);return g=q(h,"script"),g.length>0&&r(g,!i&&q(a,"script")),h},cleanData:function(a){for(var b,c,d,e=ma.event.special,f=0;void 0!==(c=a[f]);f++)if(Ga(c)){if(b=c[Ha.expando]){if(b.events)for(d in b.events)e[d]?ma.event.remove(c,d):ma.removeEvent(c,d,b.handle);c[Ha.expando]=void 0}c[Ia.expando]&&(c[Ia.expando]=void 0)}}}),ma.fn.extend({detach:function(a){return D(this,a,!0)},remove:function(a){return D(this,a)},text:function(a){return Fa(this,function(a){return void 0===a?ma.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=a)})},null,a,arguments.length)},append:function(){return C(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=x(this,a);b.appendChild(a)}})},prepend:function(){return C(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=x(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return C(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return C(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(ma.cleanData(q(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null!=a&&a,b=null==b?a:b,this.map(function(){return ma.clone(this,a,b)})},html:function(a){return Fa(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!_a.test(a)&&!Ua[(Sa.exec(a)||["",""])[1].toLowerCase()]){a=ma.htmlPrefilter(a);try{for(;c<d;c++)b=this[c]||{},1===b.nodeType&&(ma.cleanData(q(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return C(this,arguments,function(b){var c=this.parentNode;ma.inArray(this,a)<0&&(ma.cleanData(q(this)),c&&c.replaceChild(b,this))},a)}}),ma.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){ma.fn[a]=function(a){for(var c,d=[],e=ma(a),f=e.length-1,g=0;g<=f;g++)c=g===f?this:this.clone(!0),ma(e[g])[b](c),da.apply(d,c.get());return this.pushStack(d)}});var db=/^margin/,eb=new RegExp("^("+La+")(?!px)[a-z%]+$","i"),fb=function(b){var c=b.ownerDocument.defaultView;return c&&c.opener||(c=a),c.getComputedStyle(b)};!function(){function b(){if(h){h.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",h.innerHTML="",Wa.appendChild(g);var b=a.getComputedStyle(h);c="1%"!==b.top,f="2px"===b.marginLeft,d="4px"===b.width,h.style.marginRight="50%",e="4px"===b.marginRight,Wa.removeChild(g),h=null}}var c,d,e,f,g=_.createElement("div"),h=_.createElement("div");h.style&&(h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",ka.clearCloneStyle="content-box"===h.style.backgroundClip,g.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",g.appendChild(h),ma.extend(ka,{pixelPosition:function(){return b(),c},boxSizingReliable:function(){return b(),d},pixelMarginRight:function(){return b(),e},reliableMarginLeft:function(){return b(),f}}))}();var gb=/^(none|table(?!-c[ea]).+)/,hb={position:"absolute",visibility:"hidden",display:"block"},ib={letterSpacing:"0",fontWeight:"400"},jb=["Webkit","Moz","ms"],kb=_.createElement("div").style;ma.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=E(a,"opacity");return""===c?"1":c}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=ma.camelCase(b),i=a.style;return b=ma.cssProps[h]||(ma.cssProps[h]=G(h)||h),g=ma.cssHooks[b]||ma.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=Ma.exec(c))&&e[1]&&(c=n(a,b,e),f="number"),null!=c&&c===c&&("number"===f&&(c+=e&&e[3]||(ma.cssNumber[h]?"":"px")),ka.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=ma.camelCase(b);return b=ma.cssProps[h]||(ma.cssProps[h]=G(h)||h),g=ma.cssHooks[b]||ma.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=E(a,b,d)),"normal"===e&&b in ib&&(e=ib[b]),""===c||c?(f=parseFloat(e),c===!0||isFinite(f)?f||0:e):e}}),ma.each(["height","width"],function(a,b){ma.cssHooks[b]={get:function(a,c,d){if(c)return!gb.test(ma.css(a,"display"))||a.getClientRects().length&&a.getBoundingClientRect().width?J(a,b,d):Pa(a,hb,function(){return J(a,b,d)})},set:function(a,c,d){var e,f=d&&fb(a),g=d&&I(a,b,d,"border-box"===ma.css(a,"boxSizing",!1,f),f);return g&&(e=Ma.exec(c))&&"px"!==(e[3]||"px")&&(a.style[b]=c,c=ma.css(a,b)),H(a,c,g)}}}),ma.cssHooks.marginLeft=F(ka.reliableMarginLeft,function(a,b){if(b)return(parseFloat(E(a,"marginLeft"))||a.getBoundingClientRect().left-Pa(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px"}),ma.each({margin:"",padding:"",border:"Width"},function(a,b){ma.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];d<4;d++)e[a+Na[d]+b]=f[d]||f[d-2]||f[0];return e}},db.test(a)||(ma.cssHooks[a+b].set=H)}),ma.fn.extend({css:function(a,b){return Fa(this,function(a,b,c){var d,e,f={},g=0;if(ma.isArray(b)){for(d=fb(a),e=b.length;g<e;g++)f[b[g]]=ma.css(a,b[g],!1,d);return f}return void 0!==c?ma.style(a,b,c):ma.css(a,b)},a,b,arguments.length>1)}}),ma.Tween=K,K.prototype={constructor:K,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||ma.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(ma.cssNumber[c]?"":"px")},cur:function(){var a=K.propHooks[this.prop];return a&&a.get?a.get(this):K.propHooks._default.get(this)},run:function(a){var b,c=K.propHooks[this.prop];return this.options.duration?this.pos=b=ma.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):K.propHooks._default.set(this),this}},K.prototype.init.prototype=K.prototype,K.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=ma.css(a.elem,a.prop,""),b&&"auto"!==b?b:0)},set:function(a){ma.fx.step[a.prop]?ma.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[ma.cssProps[a.prop]]&&!ma.cssHooks[a.prop]?a.elem[a.prop]=a.now:ma.style(a.elem,a.prop,a.now+a.unit)}}},K.propHooks.scrollTop=K.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},ma.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"},ma.fx=K.prototype.init,ma.fx.step={};var lb,mb,nb=/^(?:toggle|show|hide)$/,ob=/queueHooks$/;ma.Animation=ma.extend(R,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);return n(c.elem,a,Ma.exec(b),c),c}]},tweener:function(a,b){ma.isFunction(a)?(b=a,a=["*"]):a=a.match(Ca);for(var c,d=0,e=a.length;d<e;d++)c=a[d],R.tweeners[c]=R.tweeners[c]||[],R.tweeners[c].unshift(b)},prefilters:[P],prefilter:function(a,b){b?R.prefilters.unshift(a):R.prefilters.push(a)}}),ma.speed=function(a,b,c){var d=a&&"object"==typeof a?ma.extend({},a):{complete:c||!c&&b||ma.isFunction(a)&&a,duration:a,easing:c&&b||b&&!ma.isFunction(b)&&b};return ma.fx.off||_.hidden?d.duration=0:d.duration="number"==typeof d.duration?d.duration:d.duration in ma.fx.speeds?ma.fx.speeds[d.duration]:ma.fx.speeds._default,null!=d.queue&&d.queue!==!0||(d.queue="fx"),d.old=d.complete,d.complete=function(){ma.isFunction(d.old)&&d.old.call(this),d.queue&&ma.dequeue(this,d.queue)},d},ma.fn.extend({fadeTo:function(a,b,c,d){return this.filter(Oa).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=ma.isEmptyObject(a),f=ma.speed(b,c,d),g=function(){var b=R(this,ma.extend({},a),f);(e||Ha.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=ma.timers,g=Ha.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&ob.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));!b&&c||ma.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=Ha.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=ma.timers,g=d?d.length:0;for(c.finish=!0,ma.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;b<g;b++)d[b]&&d[b].finish&&d[b].finish.call(this);
delete c.finish})}}),ma.each(["toggle","show","hide"],function(a,b){var c=ma.fn[b];ma.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(N(b,!0),a,d,e)}}),ma.each({slideDown:N("show"),slideUp:N("hide"),slideToggle:N("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){ma.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),ma.timers=[],ma.fx.tick=function(){var a,b=0,c=ma.timers;for(lb=ma.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||ma.fx.stop(),lb=void 0},ma.fx.timer=function(a){ma.timers.push(a),a()?ma.fx.start():ma.timers.pop()},ma.fx.interval=13,ma.fx.start=function(){mb||(mb=a.requestAnimationFrame?a.requestAnimationFrame(L):a.setInterval(ma.fx.tick,ma.fx.interval))},ma.fx.stop=function(){a.cancelAnimationFrame?a.cancelAnimationFrame(mb):a.clearInterval(mb),mb=null},ma.fx.speeds={slow:600,fast:200,_default:400},ma.fn.delay=function(b,c){return b=ma.fx?ma.fx.speeds[b]||b:b,c=c||"fx",this.queue(c,function(c,d){var e=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(e)}})},function(){var a=_.createElement("input"),b=_.createElement("select"),c=b.appendChild(_.createElement("option"));a.type="checkbox",ka.checkOn=""!==a.value,ka.optSelected=c.selected,a=_.createElement("input"),a.value="t",a.type="radio",ka.radioValue="t"===a.value}();var pb,qb=ma.expr.attrHandle;ma.fn.extend({attr:function(a,b){return Fa(this,ma.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){ma.removeAttr(this,a)})}}),ma.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return"undefined"==typeof a.getAttribute?ma.prop(a,b,c):(1===f&&ma.isXMLDoc(a)||(e=ma.attrHooks[b.toLowerCase()]||(ma.expr.match.bool.test(b)?pb:void 0)),void 0!==c?null===c?void ma.removeAttr(a,b):e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:(a.setAttribute(b,c+""),c):e&&"get"in e&&null!==(d=e.get(a,b))?d:(d=ma.find.attr(a,b),null==d?void 0:d))},attrHooks:{type:{set:function(a,b){if(!ka.radioValue&&"radio"===b&&ma.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},removeAttr:function(a,b){var c,d=0,e=b&&b.match(Ca);if(e&&1===a.nodeType)for(;c=e[d++];)a.removeAttribute(c)}}),pb={set:function(a,b,c){return b===!1?ma.removeAttr(a,c):a.setAttribute(c,c),c}},ma.each(ma.expr.match.bool.source.match(/\w+/g),function(a,b){var c=qb[b]||ma.find.attr;qb[b]=function(a,b,d){var e,f,g=b.toLowerCase();return d||(f=qb[g],qb[g]=e,e=null!=c(a,b,d)?g:null,qb[g]=f),e}});var rb=/^(?:input|select|textarea|button)$/i,sb=/^(?:a|area)$/i;ma.fn.extend({prop:function(a,b){return Fa(this,ma.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[ma.propFix[a]||a]})}}),ma.extend({prop:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return 1===f&&ma.isXMLDoc(a)||(b=ma.propFix[b]||b,e=ma.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=ma.find.attr(a,"tabindex");return b?parseInt(b,10):rb.test(a.nodeName)||sb.test(a.nodeName)&&a.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),ka.optSelected||(ma.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}}),ma.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ma.propFix[this.toLowerCase()]=this});var tb=/[\t\r\n\f]/g;ma.fn.extend({addClass:function(a){var b,c,d,e,f,g,h,i=0;if(ma.isFunction(a))return this.each(function(b){ma(this).addClass(a.call(this,b,S(this)))});if("string"==typeof a&&a)for(b=a.match(Ca)||[];c=this[i++];)if(e=S(c),d=1===c.nodeType&&(" "+e+" ").replace(tb," ")){for(g=0;f=b[g++];)d.indexOf(" "+f+" ")<0&&(d+=f+" ");h=ma.trim(d),e!==h&&c.setAttribute("class",h)}return this},removeClass:function(a){var b,c,d,e,f,g,h,i=0;if(ma.isFunction(a))return this.each(function(b){ma(this).removeClass(a.call(this,b,S(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof a&&a)for(b=a.match(Ca)||[];c=this[i++];)if(e=S(c),d=1===c.nodeType&&(" "+e+" ").replace(tb," ")){for(g=0;f=b[g++];)for(;d.indexOf(" "+f+" ")>-1;)d=d.replace(" "+f+" "," ");h=ma.trim(d),e!==h&&c.setAttribute("class",h)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):ma.isFunction(a)?this.each(function(c){ma(this).toggleClass(a.call(this,c,S(this),b),b)}):this.each(function(){var b,d,e,f;if("string"===c)for(d=0,e=ma(this),f=a.match(Ca)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else void 0!==a&&"boolean"!==c||(b=S(this),b&&Ha.set(this,"__className__",b),this.setAttribute&&this.setAttribute("class",b||a===!1?"":Ha.get(this,"__className__")||""))})},hasClass:function(a){var b,c,d=0;for(b=" "+a+" ";c=this[d++];)if(1===c.nodeType&&(" "+S(c)+" ").replace(tb," ").indexOf(b)>-1)return!0;return!1}});var ub=/\r/g,vb=/[\x20\t\r\n\f]+/g;ma.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=ma.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,ma(this).val()):a,null==e?e="":"number"==typeof e?e+="":ma.isArray(e)&&(e=ma.map(e,function(a){return null==a?"":a+""})),b=ma.valHooks[this.type]||ma.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=ma.valHooks[e.type]||ma.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(ub,""):null==c?"":c)}}}),ma.extend({valHooks:{option:{get:function(a){var b=ma.find.attr(a,"value");return null!=b?b:ma.trim(ma.text(a)).replace(vb," ")}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type,g=f?null:[],h=f?e+1:d.length,i=e<0?h:f?e:0;i<h;i++)if(c=d[i],(c.selected||i===e)&&!c.disabled&&(!c.parentNode.disabled||!ma.nodeName(c.parentNode,"optgroup"))){if(b=ma(c).val(),f)return b;g.push(b)}return g},set:function(a,b){for(var c,d,e=a.options,f=ma.makeArray(b),g=e.length;g--;)d=e[g],(d.selected=ma.inArray(ma.valHooks.option.get(d),f)>-1)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),ma.each(["radio","checkbox"],function(){ma.valHooks[this]={set:function(a,b){if(ma.isArray(b))return a.checked=ma.inArray(ma(a).val(),b)>-1}},ka.checkOn||(ma.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var wb=/^(?:focusinfocus|focusoutblur)$/;ma.extend(ma.event,{trigger:function(b,c,d,e){var f,g,h,i,j,k,l,m=[d||_],n=ha.call(b,"type")?b.type:b,o=ha.call(b,"namespace")?b.namespace.split("."):[];if(g=h=d=d||_,3!==d.nodeType&&8!==d.nodeType&&!wb.test(n+ma.event.triggered)&&(n.indexOf(".")>-1&&(o=n.split("."),n=o.shift(),o.sort()),j=n.indexOf(":")<0&&"on"+n,b=b[ma.expando]?b:new ma.Event(n,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=o.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:ma.makeArray(c,[b]),l=ma.event.special[n]||{},e||!l.trigger||l.trigger.apply(d,c)!==!1)){if(!e&&!l.noBubble&&!ma.isWindow(d)){for(i=l.delegateType||n,wb.test(i+n)||(g=g.parentNode);g;g=g.parentNode)m.push(g),h=g;h===(d.ownerDocument||_)&&m.push(h.defaultView||h.parentWindow||a)}for(f=0;(g=m[f++])&&!b.isPropagationStopped();)b.type=f>1?i:l.bindType||n,k=(Ha.get(g,"events")||{})[b.type]&&Ha.get(g,"handle"),k&&k.apply(g,c),k=j&&g[j],k&&k.apply&&Ga(g)&&(b.result=k.apply(g,c),b.result===!1&&b.preventDefault());return b.type=n,e||b.isDefaultPrevented()||l._default&&l._default.apply(m.pop(),c)!==!1||!Ga(d)||j&&ma.isFunction(d[n])&&!ma.isWindow(d)&&(h=d[j],h&&(d[j]=null),ma.event.triggered=n,d[n](),ma.event.triggered=void 0,h&&(d[j]=h)),b.result}},simulate:function(a,b,c){var d=ma.extend(new ma.Event,c,{type:a,isSimulated:!0});ma.event.trigger(d,null,b)}}),ma.fn.extend({trigger:function(a,b){return this.each(function(){ma.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c)return ma.event.trigger(a,b,c,!0)}}),ma.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(a,b){ma.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),ma.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),ka.focusin="onfocusin"in a,ka.focusin||ma.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){ma.event.simulate(b,a.target,ma.event.fix(a))};ma.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=Ha.access(d,b);e||d.addEventListener(a,c,!0),Ha.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=Ha.access(d,b)-1;e?Ha.access(d,b,e):(d.removeEventListener(a,c,!0),Ha.remove(d,b))}}});var xb=a.location,yb=ma.now(),zb=/\?/;ma.parseXML=function(b){var c;if(!b||"string"!=typeof b)return null;try{c=(new a.DOMParser).parseFromString(b,"text/xml")}catch(d){c=void 0}return c&&!c.getElementsByTagName("parsererror").length||ma.error("Invalid XML: "+b),c};var Ab=/\[\]$/,Bb=/\r?\n/g,Cb=/^(?:submit|button|image|reset|file)$/i,Db=/^(?:input|select|textarea|keygen)/i;ma.param=function(a,b){var c,d=[],e=function(a,b){var c=ma.isFunction(b)?b():b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(null==c?"":c)};if(ma.isArray(a)||a.jquery&&!ma.isPlainObject(a))ma.each(a,function(){e(this.name,this.value)});else for(c in a)T(c,a[c],b,e);return d.join("&")},ma.fn.extend({serialize:function(){return ma.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=ma.prop(this,"elements");return a?ma.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!ma(this).is(":disabled")&&Db.test(this.nodeName)&&!Cb.test(a)&&(this.checked||!Ra.test(a))}).map(function(a,b){var c=ma(this).val();return null==c?null:ma.isArray(c)?ma.map(c,function(a){return{name:b.name,value:a.replace(Bb,"\r\n")}}):{name:b.name,value:c.replace(Bb,"\r\n")}}).get()}});var Eb=/%20/g,Fb=/#.*$/,Gb=/([?&])_=[^&]*/,Hb=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ib=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Jb=/^(?:GET|HEAD)$/,Kb=/^\/\//,Lb={},Mb={},Nb="*/".concat("*"),Ob=_.createElement("a");Ob.href=xb.href,ma.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:xb.href,type:"GET",isLocal:Ib.test(xb.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Nb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":ma.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?W(W(a,ma.ajaxSettings),b):W(ma.ajaxSettings,a)},ajaxPrefilter:U(Lb),ajaxTransport:U(Mb),ajax:function(b,c){function d(b,c,d,h){var j,m,n,u,v,w=c;k||(k=!0,i&&a.clearTimeout(i),e=void 0,g=h||"",x.readyState=b>0?4:0,j=b>=200&&b<300||304===b,d&&(u=X(o,x,d)),u=Y(o,u,x,j),j?(o.ifModified&&(v=x.getResponseHeader("Last-Modified"),v&&(ma.lastModified[f]=v),v=x.getResponseHeader("etag"),v&&(ma.etag[f]=v)),204===b||"HEAD"===o.type?w="nocontent":304===b?w="notmodified":(w=u.state,m=u.data,n=u.error,j=!n)):(n=w,!b&&w||(w="error",b<0&&(b=0))),x.status=b,x.statusText=(c||w)+"",j?r.resolveWith(p,[m,w,x]):r.rejectWith(p,[x,w,n]),x.statusCode(t),t=void 0,l&&q.trigger(j?"ajaxSuccess":"ajaxError",[x,o,j?m:n]),s.fireWith(p,[x,w]),l&&(q.trigger("ajaxComplete",[x,o]),--ma.active||ma.event.trigger("ajaxStop")))}"object"==typeof b&&(c=b,b=void 0),c=c||{};var e,f,g,h,i,j,k,l,m,n,o=ma.ajaxSetup({},c),p=o.context||o,q=o.context&&(p.nodeType||p.jquery)?ma(p):ma.event,r=ma.Deferred(),s=ma.Callbacks("once memory"),t=o.statusCode||{},u={},v={},w="canceled",x={readyState:0,getResponseHeader:function(a){var b;if(k){if(!h)for(h={};b=Hb.exec(g);)h[b[1].toLowerCase()]=b[2];b=h[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return k?g:null},setRequestHeader:function(a,b){return null==k&&(a=v[a.toLowerCase()]=v[a.toLowerCase()]||a,u[a]=b),this},overrideMimeType:function(a){return null==k&&(o.mimeType=a),this},statusCode:function(a){var b;if(a)if(k)x.always(a[x.status]);else for(b in a)t[b]=[t[b],a[b]];return this},abort:function(a){var b=a||w;return e&&e.abort(b),d(0,b),this}};if(r.promise(x),o.url=((b||o.url||xb.href)+"").replace(Kb,xb.protocol+"//"),o.type=c.method||c.type||o.method||o.type,o.dataTypes=(o.dataType||"*").toLowerCase().match(Ca)||[""],null==o.crossDomain){j=_.createElement("a");try{j.href=o.url,j.href=j.href,o.crossDomain=Ob.protocol+"//"+Ob.host!=j.protocol+"//"+j.host}catch(y){o.crossDomain=!0}}if(o.data&&o.processData&&"string"!=typeof o.data&&(o.data=ma.param(o.data,o.traditional)),V(Lb,o,c,x),k)return x;l=ma.event&&o.global,l&&0===ma.active++&&ma.event.trigger("ajaxStart"),o.type=o.type.toUpperCase(),o.hasContent=!Jb.test(o.type),f=o.url.replace(Fb,""),o.hasContent?o.data&&o.processData&&0===(o.contentType||"").indexOf("application/x-www-form-urlencoded")&&(o.data=o.data.replace(Eb,"+")):(n=o.url.slice(f.length),o.data&&(f+=(zb.test(f)?"&":"?")+o.data,delete o.data),o.cache===!1&&(f=f.replace(Gb,""),n=(zb.test(f)?"&":"?")+"_="+yb++ +n),o.url=f+n),o.ifModified&&(ma.lastModified[f]&&x.setRequestHeader("If-Modified-Since",ma.lastModified[f]),ma.etag[f]&&x.setRequestHeader("If-None-Match",ma.etag[f])),(o.data&&o.hasContent&&o.contentType!==!1||c.contentType)&&x.setRequestHeader("Content-Type",o.contentType),x.setRequestHeader("Accept",o.dataTypes[0]&&o.accepts[o.dataTypes[0]]?o.accepts[o.dataTypes[0]]+("*"!==o.dataTypes[0]?", "+Nb+"; q=0.01":""):o.accepts["*"]);for(m in o.headers)x.setRequestHeader(m,o.headers[m]);if(o.beforeSend&&(o.beforeSend.call(p,x,o)===!1||k))return x.abort();if(w="abort",s.add(o.complete),x.done(o.success),x.fail(o.error),e=V(Mb,o,c,x)){if(x.readyState=1,l&&q.trigger("ajaxSend",[x,o]),k)return x;o.async&&o.timeout>0&&(i=a.setTimeout(function(){x.abort("timeout")},o.timeout));try{k=!1,e.send(u,d)}catch(y){if(k)throw y;d(-1,y)}}else d(-1,"No Transport");return x},getJSON:function(a,b,c){return ma.get(a,b,c,"json")},getScript:function(a,b){return ma.get(a,void 0,b,"script")}}),ma.each(["get","post"],function(a,b){ma[b]=function(a,c,d,e){return ma.isFunction(c)&&(e=e||d,d=c,c=void 0),ma.ajax(ma.extend({url:a,type:b,dataType:e,data:c,success:d},ma.isPlainObject(a)&&a))}}),ma._evalUrl=function(a){return ma.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},ma.fn.extend({wrapAll:function(a){var b;return this[0]&&(ma.isFunction(a)&&(a=a.call(this[0])),b=ma(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this)),this},wrapInner:function(a){return ma.isFunction(a)?this.each(function(b){ma(this).wrapInner(a.call(this,b))}):this.each(function(){var b=ma(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=ma.isFunction(a);return this.each(function(c){ma(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(a){return this.parent(a).not("body").each(function(){ma(this).replaceWith(this.childNodes)}),this}}),ma.expr.pseudos.hidden=function(a){return!ma.expr.pseudos.visible(a)},ma.expr.pseudos.visible=function(a){return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)},ma.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(b){}};var Pb={0:200,1223:204},Qb=ma.ajaxSettings.xhr();ka.cors=!!Qb&&"withCredentials"in Qb,ka.ajax=Qb=!!Qb,ma.ajaxTransport(function(b){var c,d;if(ka.cors||Qb&&!b.crossDomain)return{send:function(e,f){var g,h=b.xhr();if(h.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(g in b.xhrFields)h[g]=b.xhrFields[g];b.mimeType&&h.overrideMimeType&&h.overrideMimeType(b.mimeType),b.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");for(g in e)h.setRequestHeader(g,e[g]);c=function(a){return function(){c&&(c=d=h.onload=h.onerror=h.onabort=h.onreadystatechange=null,"abort"===a?h.abort():"error"===a?"number"!=typeof h.status?f(0,"error"):f(h.status,h.statusText):f(Pb[h.status]||h.status,h.statusText,"text"!==(h.responseType||"text")||"string"!=typeof h.responseText?{binary:h.response}:{text:h.responseText},h.getAllResponseHeaders()))}},h.onload=c(),d=h.onerror=c("error"),void 0!==h.onabort?h.onabort=d:h.onreadystatechange=function(){4===h.readyState&&a.setTimeout(function(){c&&d()})},c=c("abort");try{h.send(b.hasContent&&b.data||null)}catch(i){if(c)throw i}},abort:function(){c&&c()}}}),ma.ajaxPrefilter(function(a){a.crossDomain&&(a.contents.script=!1)}),ma.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return ma.globalEval(a),a}}}),ma.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),ma.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=ma("<script>").prop({charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),_.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Rb=[],Sb=/(=)\?(?=&|$)|\?\?/;ma.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Rb.pop()||ma.expando+"_"+yb++;return this[a]=!0,a}}),ma.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Sb.test(b.url)?"url":"string"==typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Sb.test(b.data)&&"data");if(h||"jsonp"===b.dataTypes[0])return e=b.jsonpCallback=ma.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Sb,"$1"+e):b.jsonp!==!1&&(b.url+=(zb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||ma.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){void 0===f?ma(a).removeProp(e):a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Rb.push(e)),g&&ma.isFunction(f)&&f(g[0]),g=f=void 0}),"script"}),ka.createHTMLDocument=function(){var a=_.implementation.createHTMLDocument("").body;return a.innerHTML="<form></form><form></form>",2===a.childNodes.length}(),ma.parseHTML=function(a,b,c){if("string"!=typeof a)return[];"boolean"==typeof b&&(c=b,b=!1);var d,e,f;return b||(ka.createHTMLDocument?(b=_.implementation.createHTMLDocument(""),d=b.createElement("base"),d.href=_.location.href,b.head.appendChild(d)):b=_),e=va.exec(a),f=!c&&[],e?[b.createElement(e[1])]:(e=s([a],b,f),f&&f.length&&ma(f).remove(),ma.merge([],e.childNodes))},ma.fn.load=function(a,b,c){var d,e,f,g=this,h=a.indexOf(" ");return h>-1&&(d=ma.trim(a.slice(h)),a=a.slice(0,h)),ma.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&ma.ajax({url:a,type:e||"GET",dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?ma("<div>").append(ma.parseHTML(a)).find(d):a)}).always(c&&function(a,b){g.each(function(){c.apply(this,f||[a.responseText,b,a])})}),this},ma.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){ma.fn[b]=function(a){return this.on(b,a)}}),ma.expr.pseudos.animated=function(a){return ma.grep(ma.timers,function(b){return a===b.elem}).length},ma.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=ma.css(a,"position"),l=ma(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=ma.css(a,"top"),i=ma.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),ma.isFunction(b)&&(b=b.call(a,c,ma.extend({},h))),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},ma.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){ma.offset.setOffset(this,a,b)});var b,c,d,e,f=this[0];if(f)return f.getClientRects().length?(d=f.getBoundingClientRect(),d.width||d.height?(e=f.ownerDocument,c=Z(e),b=e.documentElement,{top:d.top+c.pageYOffset-b.clientTop,left:d.left+c.pageXOffset-b.clientLeft}):d):{top:0,left:0}},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===ma.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),ma.nodeName(a[0],"html")||(d=a.offset()),d={top:d.top+ma.css(a[0],"borderTopWidth",!0),left:d.left+ma.css(a[0],"borderLeftWidth",!0)}),{top:b.top-d.top-ma.css(c,"marginTop",!0),left:b.left-d.left-ma.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent;a&&"static"===ma.css(a,"position");)a=a.offsetParent;return a||Wa})}}),ma.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c="pageYOffset"===b;ma.fn[a]=function(d){return Fa(this,function(a,d,e){var f=Z(a);return void 0===e?f?f[b]:a[d]:void(f?f.scrollTo(c?f.pageXOffset:e,c?e:f.pageYOffset):a[d]=e)},a,d,arguments.length)}}),ma.each(["top","left"],function(a,b){ma.cssHooks[b]=F(ka.pixelPosition,function(a,c){if(c)return c=E(a,b),eb.test(c)?ma(a).position()[b]+"px":c})}),ma.each({Height:"height",Width:"width"},function(a,b){ma.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){ma.fn[d]=function(e,f){var g=arguments.length&&(c||"boolean"!=typeof e),h=c||(e===!0||f===!0?"margin":"border");return Fa(this,function(b,c,e){var f;return ma.isWindow(b)?0===d.indexOf("outer")?b["inner"+a]:b.document.documentElement["client"+a]:9===b.nodeType?(f=b.documentElement,Math.max(b.body["scroll"+a],f["scroll"+a],b.body["offset"+a],f["offset"+a],f["client"+a])):void 0===e?ma.css(b,c,h):ma.style(b,c,e,h)},b,g?e:void 0,g)}})}),ma.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}}),ma.parseJSON=JSON.parse,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ma});var Tb=a.jQuery,Ub=a.$;return ma.noConflict=function(b){return a.$===ma&&(a.$=Ub),b&&a.jQuery===ma&&(a.jQuery=Tb),ma},b||(a.jQuery=a.$=ma),ma}),window.webix||(webix={}),webix.version="3.3.17",webix.codebase="./",webix.name="core",webix.cdn="//cdn.webix.com",webix.clone=function(a){var b=webix.clone.a;return b.prototype=a,new b},webix.clone.a=function(){},webix.extend=function(a,b,c){if(a.$protoWait)return webix.PowerArray.insertAt.call(a.$protoWait,b,1),a;for(var d in b)(!a[d]||c)&&(a[d]=b[d]);return b.defaults&&webix.extend(a.defaults,b.defaults),b.$init&&b.$init.call(a),a},webix.copy=function(a){var b;arguments.length>1?(b=arguments[0],a=arguments[1]):b=webix.isArray(a)?[]:{};for(var c in a){var d=a[c];d&&"object"==typeof d?webix.isDate(d)?b[c]=new Date(d):(b[c]=webix.isArray(d)?[]:{},webix.copy(b[c],d)):b[c]=d}return b},webix.single=function(a){var b=null,c=function(c){return b||(b=new a({})),b.c&&b.c.apply(b,arguments),b};return c},webix.protoUI=function(){var a=arguments,b=a[0].name,c=function(a){if(!c)return webix.ui[b].prototype;var d=c.$protoWait;if(d){for(var e=[d[0]],f=1;f<d.length;f++)e[f]=d[f],e[f].$protoWait&&(e[f]=e[f].call(webix,e[f].name)),e[f].prototype&&e[f].prototype.name&&(webix.ui[e[f].prototype.name]=e[f]);if(webix.ui[b]=webix.proto.apply(webix,e),c.d)for(var f=0;f<c.d.length;f++)webix.type(webix.ui[b],c.d[f]);c=d=null}return this!=webix?new webix.ui[b](a):webix.ui[b]};return c.$protoWait=Array.prototype.slice.call(arguments,0),webix.ui[b]=c},webix.proto=function(){for(var a=arguments,b=a[0],c=!!b.$init,d=[],e=a.length-1;e>0;e--){if("function"==typeof a[e]&&(a[e]=a[e].prototype),a[e].$init&&d.push(a[e].$init),a[e].defaults){var f=a[e].defaults;b.defaults||(b.defaults={});for(var g in f)webix.isUndefined(b.defaults[g])&&(b.defaults[g]=f[g])}if(a[e].type&&b.type)for(var g in a[e].type)b.type[g]||(b.type[g]=a[e].type[g]);for(var h in a[e])b[h]||b[h]===!1||(b[h]=a[e][h])}c&&d.push(b.$init),b.$init=function(){for(var a=0;a<d.length;a++)d[a].apply(this,arguments)},b.$skin&&b.$skin();var i=function(a){this.$ready=[],this.$init(a),this.e&&this.e(a,this.defaults);for(var b=0;b<this.$ready.length;b++)this.$ready[b].call(this)};return i.prototype=b,b=a=null,i},webix.bind=function(a,b){return function(){return a.apply(b,arguments)}},webix.require=function(a,b,c){var d=webix.promise.defer();if(b&&b!==!0&&(d=d.then(function(){b.call(c||this)})),webix.require.disabled)return d.resolve(),d;if("string"==typeof a){if(webix.f[a]!==!0){var e=a;if(a.toString().match(/^([a-z]+\:)*\/\//i)||(e=webix.codebase+a),".css"==a.substr(a.length-4)){var f=webix.html.create("LINK",{type:"text/css",rel:"stylesheet",href:e});return document.getElementsByTagName("head")[0].appendChild(f),d.resolve(),d}b===!0?(webix.exec(webix.ajax().sync().get(e).responseText),webix.f[a]=!0):webix.f[a]?webix.f[a].push(d):(webix.f[a]=[d],webix.ajax(e,function(b){webix.exec(b);var c=webix.f[a];webix.f[a]=!0;for(var d=0;d<c.length;d++)c[d].resolve()}))}else d.resolve();return d}var g=a.length||0;if(g){var h=function(){g?(g--,webix.require(a[a.length-g-1],h,c)):d.resolve()};h()}else{for(var i in a)g++;var h=function(){g--,0===g&&d.resolve()};for(var i in a)webix.require(i,h,c)}},webix.f={},webix.exec=function(a){window.execScript?window.execScript(a):window.eval(a)},webix.wrap=function(a,b){return a?function(){var c=a.apply(this,arguments);return b.apply(this,arguments),c}:b},webix.isUndefined=function(a){return"undefined"==typeof a},webix.delay=function(a,b,c,d){return window.setTimeout(function(){if(!b||!b.$destructed){var d=a.apply(b,c||[]);return a=b=c=null,d}},d||1)},webix.once=function(a){var b=!0;return function(){b&&(b=!1,a.apply(this,arguments))}},webix.uid=function(){return this.g||(this.g=(new Date).valueOf()),this.g++,this.g},webix.toNode=function(a){return"string"==typeof a?document.getElementById(a):a},webix.toArray=function(a){return webix.extend(a||[],webix.PowerArray,!0)},webix.toFunctor=function(str,scope){if("string"==typeof str){var method=str.replace("()","");return scope&&scope[method]?scope[method]:window[method]||eval(str)}return str},webix.isArray=function(a){return Array.isArray?Array.isArray(a):"[object Array]"===Object.prototype.toString.call(a)},webix.isDate=function(a){return a instanceof Date},webix.h={},webix.event=function(a,b,c,d){d=d||{},a=webix.toNode(a);var e=d.id||webix.uid();return d.bind&&(c=webix.bind(c,d.bind)),webix.h[e]=[a,b,c],a.addEventListener?a.addEventListener(b,c,!!d.capture):a.attachEvent&&a.attachEvent("on"+b,webix.h[e][2]=function(){return c.apply(a,arguments)}),e},webix.eventRemove=function(a){if(a){var b=webix.h[a];b[0].removeEventListener?b[0].removeEventListener(b[1],b[2],!1):b[0].detachEvent&&b[0].detachEvent("on"+b[1],b[2]),delete this.h[a]}},webix.EventSystem={$init:function(){this.i||(this.i={},this.j={},this.k={})},blockEvent:function(){this.i.l=!0},unblockEvent:function(){this.i.l=!1},mapEvent:function(a){webix.extend(this.k,a,!0)},on_setter:function(a){if(a)for(var b in a){var c=webix.toFunctor(a[b],this.$scope),d=b.indexOf("->");-1!==d?this[b.substr(0,d)].attachEvent(b.substr(d+2),webix.bind(c,this)):this.attachEvent(b,c)}},callEvent:function(a,b){if(this.i.l)return!0;a=a.toLowerCase();var c=this.i[a.toLowerCase()],d=!0;if(c)for(var e=0;e<c.length;e++)c[e].apply(this,b||[])===!1&&(d=!1);if(this.k[a]){var f=this.k[a];f.$eventSource=this,f.callEvent(a,b)||(d=!1),f.$eventSource=null}return d},attachEvent:function(a,b,c){a=a.toLowerCase(),c=c||webix.uid(),b=webix.toFunctor(b,this.$scope);var d=this.i[a]||webix.toArray();return arguments[3]?d.unshift(b):d.push(b),this.i[a]=d,this.j[c]={f:b,t:a},c},detachEvent:function(a){if(this.j[a]){var b=this.j[a].t,c=this.j[a].f,d=this.i[b];d.remove(c),delete this.j[a]}},hasEvent:function(a){a=a.toLowerCase();var b=this.i[a];return!(!b||!b.length)}},webix.extend(webix,webix.EventSystem,!0),webix.PowerArray={removeAt:function(a,b){a>=0&&this.splice(a,b||1)},remove:function(a){this.removeAt(this.find(a))},insertAt:function(a,b){if(b||0===b){var c=this.splice(b,this.length-b);this[b]=a,this.push.apply(this,c)}else this.push(a)},find:function(a){for(var b=0;b<this.length;b++)if(a==this[b])return b;return-1},each:function(a,b){for(var c=0;c<this.length;c++)a.call(b||this,this[c])},map:function(a,b){for(var c=0;c<this.length;c++)this[c]=a.call(b||this,this[c]);return this},filter:function(a,b){for(var c=0;c<this.length;c++)a.call(b||this,this[c])||(this.splice(c,1),c--);return this}},webix.env={},function(){if(webix.env.strict=!!window.webix_strict,webix.env.https="https:"===document.location.protocol,(-1!=navigator.userAgent.indexOf("Mobile")||-1!=navigator.userAgent.indexOf("Windows Phone"))&&(webix.env.mobile=!0),(webix.env.mobile||-1!=navigator.userAgent.indexOf("iPad")||-1!=navigator.userAgent.indexOf("Android"))&&(webix.env.touch=!0),-1!=navigator.userAgent.indexOf("Opera"))webix.env.isOpera=!0;else{if(webix.env.isIE=!!document.all||-1!==navigator.userAgent.indexOf("Trident"),webix.env.isIE){var a=parseFloat(navigator.appVersion.split("MSIE")[1]);8==a&&(webix.env.isIE8=!0)}webix.env.isEdge=-1!=navigator.userAgent.indexOf("Edge"),webix.env.isFF=-1!=navigator.userAgent.indexOf("Firefox"),webix.env.isWebKit=-1!=navigator.userAgent.indexOf("KHTML"),webix.env.isSafari=webix.env.isWebKit&&-1!=navigator.userAgent.indexOf("Mac")}-1!=navigator.userAgent.toLowerCase().indexOf("android")&&(webix.env.isAndroid=!0,navigator.userAgent.toLowerCase().indexOf("trident")&&(webix.env.isAndroid=!1,webix.env.isIEMobile=!0)),webix.env.transform=!1,webix.env.transition=!1;for(var b=-1,c=["","webkit","Moz","O","ms"],d=["","-webkit-","-Moz-","-o-","-ms-"],e=document.createElement("DIV"),f=0;f<c.length;f++){var g=c[f]?c[f]+"Transform":"transform";if("undefined"!=typeof e.style[g]){b=f;break}}if(b>-1){webix.env.cssPrefix=d[b];var h=webix.env.jsPrefix=c[b];webix.env.transform=h?h+"Transform":"transform",webix.env.transition=h?h+"Transition":"transition",webix.env.transitionDuration=h?h+"TransitionDuration":"transitionDuration",e.style[webix.env.transform]="translate3d(0,0,0)",webix.env.translate=e.style[webix.env.transform]?"translate3d":"translate",webix.env.transitionEnd="-Moz-"==webix.env.cssPrefix?"transitionend":h?h+"TransitionEnd":"transitionend"}webix.env.pointerevents=!webix.env.isIE||null!==new RegExp("Trident/.*rv:11").exec(navigator.userAgent)}(),webix.env.svg=function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}(),webix.html={m:0,denySelect:function(){webix.m||(webix.m=document.onselectstart),document.onselectstart=webix.html.stopEvent},allowSelect:function(){0!==webix.m&&(document.onselectstart=webix.m||null),webix.m=0},index:function(a){for(var b=0;a=a.previousSibling;)b++;return b},n:{},createCss:function(a,b){var c="";b=b||"";for(var d in a)c+=d+":"+a[d]+";";var e=this.n[c+b];return e||(e="s"+webix.uid(),this.addStyle("."+e+(b||"")+"{"+c+"}"),this.n[c+b]=e),e},addStyle:function(a){var b=this.ky;b||(b=this.ky=document.createElement("style"),b.setAttribute("type","text/css"),b.setAttribute("media","screen"),document.getElementsByTagName("head")[0].appendChild(b)),b.styleSheet?b.styleSheet.cssText+=a:b.appendChild(document.createTextNode(a))},create:function(a,b,c){b=b||{};var d=document.createElement(a);for(var e in b)d.setAttribute(e,b[e]);return b.style&&(d.style.cssText=b.style),b["class"]&&(d.className=b["class"]),c&&(d.innerHTML=c),d},getValue:function(a){
return a=webix.toNode(a),a?webix.isUndefined(a.value)?a.innerHTML:a.value:""},remove:function(a){if(a instanceof Array)for(var b=0;b<a.length;b++)this.remove(a[b]);else a&&a.parentNode&&a.parentNode.removeChild(a)},insertBefore:function(a,b,c){a&&(b&&b.parentNode?b.parentNode.insertBefore(a,b):c.appendChild(a))},locate:function(a,b){var c;for(a.tagName?c=a:(a=a||event,c=a.target||a.srcElement);c;){if(c.getAttribute){var d=c.getAttribute(b);if(d)return d}c=c.parentNode}return null},offset:function(a){if(a.getBoundingClientRect){var b=a.getBoundingClientRect(),c=document.body,d=document.documentElement,e=window.pageYOffset||d.scrollTop||c.scrollTop,f=window.pageXOffset||d.scrollLeft||c.scrollLeft,g=d.clientTop||c.clientTop||0,h=d.clientLeft||c.clientLeft||0,i=b.top+e-g,j=b.left+f-h;return{y:Math.round(i),x:Math.round(j),width:a.offsetWidth,height:a.offsetHeight}}for(var i=0,j=0;a;)i+=parseInt(a.offsetTop,10),j+=parseInt(a.offsetLeft,10),a=a.offsetParent;return{y:i,x:j,width:a.offsetHeight,height:a.offsetWidth}},posRelative:function(a){return a=a||event,webix.isUndefined(a.offsetX)?{x:a.layerX,y:a.layerY}:{x:a.offsetX,y:a.offsetY}},pos:function(a){if(a=a||event,a.touches&&a.touches[0]&&(a=a.touches[0]),a.pageX||a.pageY)return{x:a.pageX,y:a.pageY};var b=webix.env.isIE&&"BackCompat"!=document.compatMode?document.documentElement:document.body;return{x:a.clientX+b.scrollLeft-b.clientLeft,y:a.clientY+b.scrollTop-b.clientTop}},preventEvent:function(a){return a&&a.preventDefault&&a.preventDefault(),a&&(a.returnValue=!1),webix.html.stopEvent(a)},stopEvent:function(a){return a=a||event,a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0,!1},addCss:function(a,b,c){c&&-1!==a.className.indexOf(b)||(a.className+=" "+b)},removeCss:function(a,b){a.className=a.className.replace(RegExp(" "+b,"g"),"")},getTextSize:function(a,b){var c=webix.html.create("DIV",{"class":"webix_view webix_measure_size "+(b||"")},"");c.style.cssText="width:1px; height:1px; visibility:hidden; position:absolute; top:0px; left:0px; overflow:hidden; white-space:nowrap;",document.body.appendChild(c);for(var d="object"!=typeof a?[a]:a,e=0,f=0,g=0;g<d.length;g++)c.innerHTML=d[g],e=Math.max(e,c.scrollWidth),f=Math.max(f,c.scrollHeight);return webix.html.remove(c),{width:e,height:f}},download:function(a,b){var c=!1;if("object"==typeof a){if(window.navigator.msSaveBlob)return window.navigator.msSaveBlob(a,b);if(webix.env.isSafari){var d=new FileReader;return d.onloadend=function(){var a=d.result;webix.html.download("data:attachment/file"+a.slice(a.search(/[,;]/)),b)},void d.readAsDataURL(a)}a=window.URL.createObjectURL(a),c=!0}var e=document.createElement("a");e.href=a,e.download=b,document.body.appendChild(e),e.click(),webix.delay(function(){c&&window.URL.revokeObjectURL(a),document.body.removeChild(e),e.remove()})},TC:function(a){if(!a)return"";var b=a.className||"";return b.baseVal&&(b=b.baseVal),b.indexOf||(b=""),b}},webix.ready=function(a){this.o?a.call():this.p.push(a)},webix.p=[],function(){var a=document.getElementsByTagName("SCRIPT");a.length&&(a=(a[a.length-1].getAttribute("src")||"").split("/"),a.splice(a.length-1,1),webix.codebase=a.slice(0,a.length).join("/")+"/");var b=function(){webix.env.isIE&&(document.body.className+=" webix_ie"),webix.callEvent("onReady",[])},c=function(){webix.o=!0,window.webix_ready&&webix.isArray(webix_ready)&&(webix.p=webix_ready.concat(webix.p));for(var a=0;a<webix.p.length;a++)webix.p[a].call();webix.p=[]};webix.attachEvent("onReady",function(a){a?c():webix.delay(c)}),"complete"==document.readyState?b():webix.event(window,"load",b)}(),webix.locale=webix.locale||{},webix.ready(function(){webix.event(document.body,"click",function(a){webix.callEvent("onClick",[a||event])})}),webix.editStop=function(){webix.callEvent("onEditEnd",[])},function(a){function b(a,b){var c=this;c.promise=c,c.state="pending",c.val=null,c.fn=a||null,c.er=b||null,c.next=[]}var c="undefined"!=typeof setImmediate?setImmediate:function(a){setTimeout(a,0)};b.prototype.resolve=function(a){var b=this;"pending"===b.state&&(b.val=a,b.state="resolving",c(function(){b.fire()}))},b.prototype.reject=function(a){var b=this;"pending"===b.state&&(b.val=a,b.state="rejecting",c(function(){b.fire()}))},b.prototype.then=function(a,c){var d=this,e=new b(a,c);return d.next.push(e),"resolved"===d.state&&e.resolve(d.val),"rejected"===d.state&&e.reject(d.val),e},b.prototype.fail=function(a){return this.then(null,a)},b.prototype.finish=function(a){var b=this;if(b.state=a,"resolved"===b.state)for(var c=0;c<b.next.length;c++)b.next[c].resolve(b.val);if("rejected"===b.state){for(var c=0;c<b.next.length;c++)b.next[c].reject(b.val);if(webix.assert&&!b.next.length)throw b.val}},b.prototype.thennable=function(a,b,c,d,e){var f=this;if(e=e||f.val,"object"==typeof e&&"function"==typeof a)try{var g=0;a.call(e,function(a){0===g++&&b(a)},function(a){0===g++&&c(a)})}catch(h){c(h)}else d(e)},b.prototype.fire=function(){var a,b=this;try{a=b.val&&b.val.then}catch(c){return b.val=c,b.state="rejecting",b.fire()}b.thennable(a,function(a){b.val=a,b.state="resolving",b.fire()},function(a){b.val=a,b.state="rejecting",b.fire()},function(c){if(b.val=c,"resolving"===b.state&&"function"==typeof b.fn)try{b.val=b.fn.call(void 0,b.val)}catch(d){return b.val=d,b.finish("rejected")}if("rejecting"===b.state&&"function"==typeof b.er)try{b.val=b.er.call(void 0,b.val),b.state="resolving"}catch(d){return b.val=d,b.finish("rejected")}return b.val===b?(b.val=TypeError(),b.finish("rejected")):void b.thennable(a,function(a){b.val=a,b.finish("resolved")},function(a){b.val=a,b.finish("rejected")},function(a){b.val=a,"resolving"===b.state?b.finish("resolved"):b.finish("rejected")})})},b.prototype.done=function(){if(this.state=!this.next)throw this.val;return null},b.prototype.nodeify=function(a){return"function"==typeof a?this.then(function(b){try{a(null,b)}catch(c){setImmediate(function(){throw c})}return b},function(b){try{a(b)}catch(c){setImmediate(function(){throw c})}return b}):this},b.prototype.spread=function(a,b){return this.all().then(function(b){return"function"==typeof a&&a.apply(null,b)},b)},b.prototype.all=function(){var a=this;return this.then(function(c){function d(){++f===g&&e.resolve(c)}var e=new b;if(!(c instanceof Array))return e.reject(TypeError),e;for(var f=0,g=c.length,h=0,i=c.length;i>h;h++){var j,k=c[h];try{j=k&&k.then}catch(l){e.reject(l);break}!function(b){a.thennable(j,function(a){c[b]=a,d()},function(a){c[b]=a,d()},function(){d()},k)}(h)}return e})};var d={all:function(a){var c=new b(null,null);return c.resolve(a),c.all()},defer:function(){return new b(null,null)},fcall:function(){var a=new b,c=Array.apply([],arguments),d=c.shift();try{var e=d.apply(null,c);a.resolve(e)}catch(f){a.reject(f)}return a},nfcall:function(){var a=new b,c=Array.apply([],arguments),d=c.shift();try{c.push(function(b,c){return b?a.reject(b):a.resolve(c)}),d.apply(null,c)}catch(e){a.reject(e)}return a}};a.promise=d}(webix),function(){function a(a,c,d){var e={name:c,data:d,key:i},g=webix.promise.defer();return k.push([a,e,g]),h||(h=setTimeout(b,1)),g.sync=function(){return e.sync=!0,f(a,e)},g}function b(){for(var a=[],b=[],c="",d=0;d<k.length;d++){var f=k[d];f[1].sync||(j.multicall?(c=f[0],a.push(f[1]),b.push(f)):e.apply(this,f))}k=[],h=!1,j.multicall&&a.length&&e(c,{data:a,key:i,multicall:!0},b)}function c(a,b){if(j.multicall)for(var c=0;c<a.length;c++)a[c][2].resolve(b[c]);else a.resolve(b)}function d(a,b){if(j.multicall)for(var c=0;c<a.length;c++)a[c][2].reject(b);else a.reject(b)}function e(a,b,e){var f=webix.ajax();b.data=f.stringify(b.data),f.post(a,b).then(function(a){var b=g(a.text());b?c(e,b.data):d(e,a.text())},function(a){d(e,a)}),webix.callEvent("onRemoteCall",[e,b])}function f(a,b,c){var d=webix.ajax();return webix.callEvent("onRemoteCall",[null,b]),b.data=d.stringify(b.data),g(d.sync().post(a,b).responseText).data}function g(a){return webix.DataDriver.json.toObject.call(j,a)}var h,i="",j={timeout:30,parseDates:!0,multicall:!0},k=[],l=webix.remote=function(a,b,c,d){if(!b){var e=document.getElementsByTagName("script");b=e[e.length-1].src}c=c||l,d=d||"";for(var f in a)if("$key"==f)i=a.$key;else if(0===f.indexOf("$"))l[f]=a[f];else if("object"==typeof a[f]){var g=c[f]={};l(a[f],b,g,f+".")}else c[f]=m(b,d+f)},m=function(b,c){return function(){return a(b,c,[].splice.call(arguments,0))}};l.config=j,l.flush=b}(),webix.skin={},webix.skin.air={topLayout:"wide",barHeight:34,tabbarHeight:36,rowHeight:34,toolbarHeight:22,listItemHeight:28,inputHeight:34,inputPadding:2,menuHeight:34,menuMargin:0,labelTopHeight:16,layoutMargin:{space:10,wide:4,clean:0,head:4,line:-1,toolbar:4,form:8},layoutPadding:{space:10,wide:0,clean:0,head:0,line:0,toolbar:4,form:8},tabMargin:0,calendarHeight:70,padding:0,optionHeight:27},webix.skin.aircompact={topLayout:"wide",barHeight:24,tabbarHeight:26,rowHeight:26,toolbarHeight:22,listItemHeight:28,inputHeight:29,inputPadding:2,menuHeight:25,menuMargin:0,labelTopHeight:16,layoutMargin:{space:10,wide:4,clean:0,head:4,line:-1,toolbar:4,form:8},layoutPadding:{space:10,wide:0,clean:0,head:0,line:0,toolbar:4,form:8},tabMargin:0,calendarHeight:70,padding:0,optionHeight:23},webix.skin.web={name:"web",topLayout:"space",barHeight:28,tabbarHeight:30,rowHeight:30,toolbarHeight:22,listItemHeight:28,inputHeight:28,inputPadding:2,menuMargin:0,menuHeight:27,labelTopHeight:16,layoutMargin:{space:10,wide:4,clean:0,head:4,line:-1,toolbar:4,form:8,accordion:9},layoutPadding:{space:10,wide:0,clean:0,head:0,line:0,toolbar:4,form:8,accordion:0},tabMargin:3,tabTopOffset:3,calendarHeight:70,padding:0,optionHeight:22},webix.skin.clouds={topLayout:"wide",barHeight:36,tabbarHeight:46,rowHeight:34,toolbarHeight:22,listItemHeight:32,inputHeight:30,inputPadding:2,menuHeight:34,labelTopHeight:16,layoutMargin:{space:10,wide:4,clean:0,head:4,line:-1,toolbar:4,form:8},layoutPadding:{space:10,wide:0,clean:0,head:0,line:0,toolbar:4,form:8},tabMargin:2,tabOffset:0,tabBottomOffset:10,calendarHeight:70,padding:0},webix.skin.terrace={topLayout:"space",barHeight:37,tabbarHeight:39,rowHeight:38,toolbarHeight:22,listItemHeight:28,inputHeight:30,inputPadding:2,menuMargin:0,menuHeight:32,labelTopHeight:16,layoutMargin:{space:20,wide:20,clean:0,head:4,line:-1,toolbar:4,form:8},layoutPadding:{space:20,wide:0,clean:0,head:0,line:0,toolbar:4,form:8},tabMargin:2,tabOffset:0,calendarHeight:70,padding:17,optionHeight:24},webix.skin.metro={topLayout:"space",barHeight:36,tabbarHeight:46,rowHeight:34,toolbarHeight:36,listItemHeight:32,inputHeight:30,buttonHeight:45,inputPadding:2,menuHeight:36,labelTopHeight:16,layoutMargin:{space:10,wide:4,clean:0,head:4,line:-1,toolbar:4,form:8,accordion:9},layoutPadding:{space:10,wide:0,clean:0,head:0,line:0,toolbar:0,form:8,accordion:0},tabMargin:2,tabOffset:0,tabBottomOffset:10,calendarHeight:70,padding:0,optionHeight:23},webix.skin.light={topLayout:"space",barHeight:36,tabbarHeight:46,rowHeight:32,toolbarHeight:36,listItemHeight:32,inputHeight:34,buttonHeight:45,inputPadding:3,menuHeight:36,labelTopHeight:16,layoutMargin:{space:15,wide:15,clean:0,head:4,line:-1,toolbar:4,form:8,accordion:10},layoutPadding:{space:15,wide:0,clean:0,head:0,line:0,toolbar:0,form:8,accordion:0},tabMargin:2,tabOffset:0,tabBottomOffset:10,calendarHeight:70,padding:0,optionHeight:27},webix.skin.glamour={topLayout:"space",barHeight:39,tabbarHeight:39,rowHeight:32,toolbarHeight:39,listItemHeight:32,inputHeight:34,buttonHeight:34,inputPadding:3,menuHeight:36,labelTopHeight:16,layoutMargin:{space:15,wide:15,clean:0,head:4,line:-1,toolbar:4,form:8,accordion:10},layoutPadding:{space:15,wide:0,clean:0,head:0,line:0,toolbar:3,form:8,accordion:0},tabMargin:1,tabOffset:0,tabBottomOffset:1,calendarHeight:70,padding:0,optionHeight:27},webix.skin.touch={topLayout:"space",barHeight:42,tabbarHeight:50,rowHeight:42,toolbarHeight:42,listItemHeight:42,inputHeight:42,inputPadding:4,menuHeight:42,labelTopHeight:24,unitHeaderHeight:34,layoutMargin:{space:10,wide:4,clean:0,head:4,line:-1,toolbar:0,form:0,accordion:9},layoutPadding:{space:10,wide:0,clean:0,head:0,line:0,toolbar:4,form:8,accordion:0},tabMargin:2,tabOffset:0,tabBottomOffset:10,calendar:{headerHeight:70,timepickerHeight:35,height:310,width:300},padding:0,customCheckbox:!0,customRadio:!0,optionHeight:32},webix.skin.flat={topLayout:"space",barHeight:46,tabbarHeight:46,rowHeight:34,toolbarHeight:46,listItemHeight:34,inputHeight:38,buttonHeight:38,inputPadding:3,menuHeight:34,labelTopHeight:22,propertyItemHeight:28,layoutMargin:{space:10,wide:10,clean:0,head:4,line:-1,toolbar:4,form:8,accordion:10},layoutPadding:{space:10,wide:0,clean:0,head:0,line:0,toolbar:4,form:17,accordion:0},tabMargin:4,tabOffset:0,tabBottomOffset:6,tabTopOffset:1,customCheckbox:!0,customRadio:!0,calendarHeight:70,padding:0,accordionType:"accordion",optionHeight:32},webix.skin.compact={topLayout:"space",barHeight:34,tabbarHeight:34,rowHeight:24,toolbarHeight:34,listItemHeight:28,inputHeight:30,buttonHeight:30,inputPadding:3,menuHeight:28,labelTopHeight:16,layoutMargin:{space:5,wide:5,clean:0,head:4,line:-1,toolbar:4,form:4,accordion:5},layoutPadding:{space:5,wide:0,clean:0,head:0,line:0,toolbar:2,form:12,accordion:0},tabMargin:3,tabOffset:0,tabBottomOffset:3,tabTopOffset:1,customCheckbox:!0,customRadio:!0,calendarHeight:70,padding:0,accordionType:"accordion",optionHeight:23},webix.skin.material={topLayout:"space",barHeight:45,tabbarHeight:47,rowHeight:38,toolbarHeight:22,listItemHeight:34,inputHeight:38,buttonHeight:38,inputPadding:2,menuMargin:0,menuHeight:34,labelTopHeight:16,propertyItemHeight:34,layoutMargin:{material:10,space:10,wide:10,clean:0,head:4,line:-1,toolbar:4,form:16,accordion:0},layoutPadding:{material:10,space:10,wide:0,clean:0,head:0,line:0,toolbar:4,form:16,accordion:0},tabMargin:0,tabOffset:0,tabBottomOffset:0,tabTopOffset:0,customCheckbox:!0,customRadio:!0,calendarHeight:70,padding:0,accordionType:"accordion"},webix.skin.set=function(a){if(webix.skin.$active=webix.skin[a],webix.skin.$name=a,webix.ui)for(var b in webix.ui){var c=webix.ui[b];c&&c.prototype&&c.prototype.$skin&&c.prototype.$skin(c.prototype)}},webix.skin.set(window.webix_skin||"flat"),webix.Destruction={$init:function(){webix.destructors.push(this)},destructor:function(){var a=this.s;if(this.di&&this.editCancel(),this.callEvent&&this.callEvent("onDestruct",[]),this.destructor=function(){},this.getChildViews){var b=this.getChildViews();if(b)for(var c=0;c<b.length;c++)b[c].destructor();if(this.Ns)for(var c=0;c<this.Ns.length;c++)this.Ns[c].destructor()}if(delete webix.ui.views[a.id],a.$id){var d=this.getTopParentView();d&&d.oC&&d.oC(a.$id)}this.t=null,this.u=null,this.v=null,this.w&&(this.w.innerHTML="",this.w.t=null),this.x&&this.x.parentNode&&this.x.parentNode.removeChild(this.x),this.data&&this.data.destructor&&this.data.destructor(),this.unbind&&this.unbind(),this.data=null,this.x=this.$view=this.w=this.y=null,this.i=this.j={},webix.UIManager.A==this&&(webix.UIManager.A=null);var e=a.url;e&&e.$proxy&&e.release&&e.release(),this.$scope=null,this.$destructed=!0}},webix.destructors=[],webix.event(window,"unload",function(){webix.callEvent("unload",[]),webix.B=!0;for(var a=0;a<webix.destructors.length;a++)webix.destructors[a].destructor();webix.destructors=[],webix.ui.et=webix.toArray();for(var b in webix.h){var c=webix.h[b];c[0].removeEventListener?c[0].removeEventListener(c[1],c[2],!1):c[0].detachEvent&&c[0].detachEvent("on"+c[1],c[2]),delete webix.h[b]}}),function(){var a={},b={},c=new RegExp("(\\r\\n|\\n)","g"),d=new RegExp('(\\")',"g"),e=new RegExp("(\\\\)","g"),f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},g=/[&<>"'`]/g,h=function(a){return f[a]||"&amp;"};webix.template=function(f){if("function"==typeof f)return f;if(a[f])return a[f];if(f=(f||"").toString(),-1!=f.indexOf("->")){var g=f.split("->");switch(g[0]){case"html":f=webix.html.getValue(g[1]);break;case"http":f=(new webix.ajax).sync().get(g[1],{uid:webix.uid()}).responseText}}if(f=(f||"").toString(),webix.env.strict){if(!b[f]){b[f]=[];var h=[];if(f.replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g,function(a,b,c,d,e){h.push({pos:e,str:a,fn:function(a,e){return a[b]?c:d}})}),f.replace(/\{common\.([^}\(]*)\}/g,function(a,b,c){h.push({pos:c,str:a,fn:function(a,c){return c[b]||""}})}),f.replace(/\{common\.([^\}\(]*)\(\)\}/g,function(a,b,c){h.push({pos:c,str:a,fn:function(a,c){return c[b]?c[b].apply(this,arguments):""}})}),f.replace(/\{obj\.([^:}]*)\}/g,function(a,b,c){h.push({pos:c,str:a,fn:function(a,c){return a[b]}})}),f.replace("{obj}",function(a,b,c){h.push({pos:c,str:a,fn:function(a,b){return a}})}),f.replace(/#([^#'";, ]+)#/gi,function(a,b,c){"!"==b.charAt(0)?h.push({pos:c,str:a,fn:function(a,c){return b=b.substr(1),-1!=b.indexOf(".")&&(a=webix.CodeParser.collapseNames(a)),webix.template.escape(a[b.substr(1)])}}):h.push({pos:c,str:a,fn:function(a,c){return-1!=b.indexOf(".")&&(a=webix.CodeParser.collapseNames(a)),a[b]}})}),h.sort(function(a,b){return a.pos>b.pos?1:-1}),h.length){for(var i=0,j=function(a,c,d){b[a].push(function(){return a.slice(c,d)})},k=0;k<h.length;k++){var l=h[k].pos;j(f,i,l),b[f].push(h[k].fn),i=l+h[k].str.length}j(f,i,f.length)}else b[f].push(function(){return f})}return function(){for(var a="",c=0;c<b[f].length;c++)a+=b[f][c].apply(this,arguments);return a}}f=f.replace(e,"\\\\"),f=f.replace(c,"\\n"),f=f.replace(d,'\\"'),f=f.replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g,'"+(obj.$1?"$2":"$3")+"'),f=f.replace(/\{common\.([^}\(]*)\}/g,"\"+(common.$1||'')+\""),f=f.replace(/\{common\.([^\}\(]*)\(\)\}/g,'"+(common.$1?common.$1.apply(this, arguments):"")+"'),f=f.replace(/\{obj\.([^}]*)\}/g,'"+(obj.$1)+"'),f=f.replace("{obj}",'"+obj+"'),f=f.replace(/#([^#'";, ]+)#/gi,function(a,b){return"!"==b.charAt(0)?'"+webix.template.escape(obj.'+b.substr(1)+')+"':'"+(obj.'+b+')+"'});try{a[f]=Function("obj","common",'return "'+f+'";')}catch(m){}return a[f]},webix.template.escape=function(a){return a===webix.undefined||null===a?"":(a.toString()||"").replace(g,h)},webix.template.empty=function(){return""},webix.template.bind=function(a){return webix.bind(webix.template(a),this)},webix.type=function(a,b){if(a.$protoWait)return a.d||(a.d=[]),void a.d.push(b);"function"==typeof a&&(a=a.prototype),a.types||(a.types={"default":a.type},a.type.name="default");var c=b.name,d=a.type;c&&(d=a.types[c]=webix.clone(b.baseType?a.types[b.baseType]:a.type));for(var e in b)0===e.indexOf("template")?d[e]=webix.template(b[e]):d[e]=b[e];return c}}(),webix.Settings={$init:function(){this.s=this.config={}},define:function(a,b){return"object"==typeof a?this.C(a):this.D(a,b)},D:function(a,b){var c=this[a+"_setter"];return this.s[a]=c?c.call(this,b,a):b},C:function(a){if(a)for(var b in a)this.D(b,a[b])},e:function(a,b){var c={};b&&(c=webix.extend(c,b)),"object"!=typeof a||a.tagName||webix.extend(c,a,!0),this.C(c)},E:function(a,b){for(var c in b)switch(typeof a[c]){case"object":a[c]=this.E(a[c]||{},b[c]);break;case"undefined":a[c]=b[c]}return a}},webix.proxy=function(a,b,c){var d=webix.copy(webix.proxy[a]);return d.source=b,c&&webix.extend(d,c,!0),d.init&&d.init(),d},webix.proxy.$parse=function(a){if("string"==typeof a&&-1!=a.indexOf("->")){var b=a.split("->");return webix.proxy(b[0],b[1])}return a},webix.proxy.post={$proxy:!0,load:function(a,b,c){c=webix.extend(c||{},this.params||{},!0),webix.ajax().bind(a).post(this.source,c,b)}},webix.proxy.sync={$proxy:!0,load:function(a,b){webix.ajax().sync().bind(a).get(this.source,null,b)}},webix.proxy.connector={$proxy:!0,connectorName:"!nativeeditor_status",load:function(a,b){webix.ajax(this.source,b,a)},saveAll:function(a,b,c,d){for(var e=this.source,f={},g=[],h=0;h<b.length;h++){var i=b[h];g.push(i.id);for(var j in i.data)0!==j.indexOf("$")&&(f[i.id+"_"+j]=i.data[j]);f[i.id+"_"+this.connectorName]=i.operation}f.ids=g.join(","),f.webix_security=webix.securityKey,e+=-1==e.indexOf("?")?"?":"&",e+="editing=true",webix.ajax().post(e,f,d)},result:function(a,b,c,d,e,f){if(e=e.xml(),!e)return c.yr(null,d,e,f);var g=e.data.action;g.length||(g=[g]);for(var h=[],i=0;i<g.length;i++){var j=g[i];h.push(j),j.status=j.type,j.id=j.sid,j.newid=j.tid,c.processResult(j,j,{text:d,data:e,loader:f})}return h}},webix.proxy.rest={$proxy:!0,load:function(a,b){webix.ajax(this.source,b,a)},save:function(a,b,c,d){return webix.proxy.rest.dC.call(this,a,b,c,d,webix.ajax())},dC:function(a,b,c,d,e){var f=this.source;f+="/"==f.charAt(f.length-1)?"":"/";var g=b.operation,h=b.data;"insert"==g&&delete h.id,"update"==g?e.put(f+h.id,h,d):"delete"==g?e.del(f+h.id,h,d):e.post(f,h,d)}},webix.proxy.json={$proxy:!0,load:function(a,b){webix.ajax(this.source,b,a)},save:function(a,b,c,d){var e=webix.ajax().headers({"Content-Type":"application/json"});return webix.proxy.rest.dC.call(this,a,b,c,d,e)}},webix.proxy.faye={$proxy:!0,init:function(){this.clientId=this.clientId||webix.uid()},load:function(a){var b=this.clientId;this.client.subscribe(this.source,function(c){c.clientId!=b&&webix.dp(a).ignore(function(){if("delete"==c.operation)a.remove(c.data.id);else if("insert"==c.operation)a.add(c.data);else if("update"==c.operation){var b=a.getItem(c.data.id);b&&(webix.extend(b,c.data,!0),a.refresh(b.id))}})})},save:function(a,b,c,d){b.clientId=this.clientId,this.client.publish(this.source,b)}},webix.proxy.indexdb={$proxy:!0,create:function(a,b,c,d){this.source=a+"/",this.F(d,c,function(a){var c=a.target.result;for(var d in b)for(var e=b[d],f=c.createObjectStore(d,{keyPath:"id",autoIncrement:!0}),g=0;g<e.length;g++)f.put(e[g])})},F:function(a,b,c){if(-1!=this.source.indexOf("/")){var d=this.source.split("/");this.source=d[1],b=b||d[2];var e,f=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB;e=b?f.open(d[0],b):f.open(d[0]),c&&(e.onupgradeneeded=c),e.onerror=function(){},e.onblocked=function(){},e.onsuccess=webix.bind(function(b){this.db=b.target.result,a&&a.call(this)},this)}else this.db?a.call(this):webix.delay(this.F,this,[a],50)},load:function(a,b){this.F(function(){var c=this.db.transaction(this.source).objectStore(this.source),d=[];c.openCursor().onsuccess=function(c){var e=c.target.result;e?(d.push(e.value),e["continue"]()):(a.parse(d),webix.ajax.$callback(a,b,"[]",d))}})},save:function(a,b,c,d){this.F(function(){var a,d=b.operation,e=b.data,f=b.id,g=this.db.transaction([this.source],"readwrite").objectStore(this.source);"delete"==d?a=g["delete"](f):"update"==d?a=g.put(e):"insert"==d&&(delete e.id,a=g.add(e)),a.onsuccess=function(a){var e={status:d,id:b.id};"insert"==d&&(e.newid=a.target.result),c.processResult(e,e)}})}},webix.proxy.binary={$proxy:!0,load:function(a,b){var c=this.source.split("@"),d=c[0].split(".").pop();return webix.ajax().response("arraybuffer").get(c[0]).then(function(e){var f={ext:d,dataurl:c[1]};webix.ajax.$callback(a,b,"",{data:e,options:f},-1)})}},webix.ajax=function(a,b,c){return 0!==arguments.length?(new webix.ajax).get(a,b,c):this.getXHR?this:new webix.ajax},webix.ajax.count=0,webix.ajax.prototype={master:null,getXHR:function(){return new XMLHttpRequest},stringify:function(a){var b=Date.prototype.toJSON;Date.prototype.toJSON=function(){return webix.i18n.parseFormatStr(this)};var c;return c=a instanceof Date?a.toJSON():JSON.stringify(a),Date.prototype.toJSON=b,c},G:function(a,b,c,d){var e;b&&(webix.isArray(b)||"function"==typeof(b.success||b.error||b))&&(e=c,c=b,b=null);var f=webix.promise.defer(),g=this.getXHR();webix.isArray(c)||(c=[c]),c.push({success:function(a,b){f.resolve(b)},error:function(a,b){f.reject(g)}});var h=this.I||{};if(webix.callEvent("onBeforeAjax",[d,a,b,g,h,null,f])){var i=!1;if("GET"!==d){var j=!1;for(var k in h)"content-type"==k.toString().toLowerCase()&&(j=!0,"application/json"==h[k]&&(i=!0));j||(h["Content-Type"]="application/x-www-form-urlencoded")}if("object"==typeof b)if(i)b=this.stringify(b);else{var l=[];for(var m in b){var n=b[m];(null===n||n===webix.undefined)&&(n=""),"object"==typeof n&&(n=this.stringify(n)),l.push(m+"="+encodeURIComponent(n))}b=l.join("&")}b&&"GET"===d&&(a=a+(-1!=a.indexOf("?")?"&":"?")+b,b=null),g.open(d,a,!this.H);var o=this.Tw;o&&(g.responseType=o);for(var k in h)g.setRequestHeader(k,h[k]);var p=this;return this.master=this.master||e,g.onreadystatechange=function(){if(!g.readyState||4==g.readyState){if(webix.ajax.count++,c&&p&&!g.aborted){if(-1!=webix.ly.find(g))return webix.ly.remove(g);var a,b,d=p.master||p,f=g.status>=400||0===g.status;"blob"==g.responseType||"arraybuffer"==g.responseType?(a="",b=g.response):(a=g.responseText||"",b=p.J(g)),webix.ajax.$callback(d,c,a,b,g,f)}p&&(p.master=null),c=p=e=null}},this.qh&&(g.timeout=this.qh),this.H?g.send(b||null):setTimeout(function(){g.aborted||(-1!=webix.ly.find(g)?webix.ly.remove(g):g.send(b||null))},1),this.master&&this.master.Ve&&this.master.Ve.push(g),this.H?g:f}},J:function(a){return{xml:function(){try{return webix.DataDriver.xml.tagToObject(webix.DataDriver.xml.toObject(a.responseText,this))}catch(b){}},rawxml:function(){return window.XPathResult?a.responseXML:webix.DataDriver.xml.fromString(a.responseText)},text:function(){return a.responseText},json:function(){try{return JSON.parse(a.responseText)}catch(b){}}}},get:function(a,b,c){return this.G(a,b,c,"GET")},post:function(a,b,c){return this.G(a,b,c,"POST")},put:function(a,b,c){return this.G(a,b,c,"PUT")},del:function(a,b,c){return this.G(a,b,c,"DELETE")},patch:function(a,b,c){return this.G(a,b,c,"PATCH")},sync:function(){return this.H=!0,this},timeout:function(a){return this.qh=a,this},response:function(a){return this.Tw=a,this},header:function(a){return this.I=a,this},headers:function(a){return this.I=webix.extend(this.I||{},a),this},bind:function(a){return this.master=a,this}},webix.ajax.$callback=function(a,b,c,d,e,f){if(!a.$destructed){if(-1===e&&d&&"function"==typeof d.json&&(d=d.json()),f&&webix.callEvent("onAjaxError",[e]),webix.isArray(b)||(b=[b]),!f)for(var g=0;g<b.length;g++)if(b[g]){var h=b[g].before;h&&h.call(a,c,d,e)}for(var g=0;g<b.length;g++)if(b[g]){var i=b[g].success||b[g];f&&(i=b[g].error),i&&i.call&&i.call(a,c,d,e)}}},webix.send=function(a,b,c,d){var e=webix.html.create("FORM",{target:d||"_self",action:a,method:c||"POST"},"");for(var f in b){var g=webix.html.create("INPUT",{type:"hidden",name:f,value:b[f]},"");e.appendChild(g)}e.style.display="none",document.body.appendChild(e),e.submit(),document.body.removeChild(e)},webix.AtomDataLoader={$init:function(a){this.data={},this.waitData=webix.promise.defer(),a&&(this.s.datatype=a.datatype||"json"),this.$ready.push(this.K)},K:function(){this.L=!0,this.s.url&&this.url_setter(this.s.url),this.s.data&&this.data_setter(this.s.data)},url_setter:function(a){return a=webix.proxy.$parse(a),this.L?(this.load(a,this.s.datatype),a):a},data_setter:function(a){return this.L?(this.parse(a,this.s.datatype),!0):a},load:function(a,b){var c=arguments[2]||null;this.callEvent("onBeforeLoad",[]),"string"==typeof b?(this.data.driver=webix.DataDriver[b],b=arguments[2]):this.data.driver||(this.data.driver=webix.DataDriver.json);var d=[{success:this.M,error:this.N}];return b&&(webix.isArray(b)?d.push.apply(d,b):d.push(b)),a=webix.proxy.$parse(a),a.$proxy&&a.load?a.load(this,d,c):"function"==typeof a?a(c).then(webix.bind(function(a){webix.ajax.$callback(this,d,"",a,-1)},this),webix.bind(function(a){webix.ajax.$callback(this,d,"",null,a,!0)},this)):webix.ajax(a,d,this)},parse:function(a,b){return a&&a.then&&"function"==typeof a.then?a.then(webix.bind(function(a){a&&"function"==typeof a.json&&(a=a.json()),this.parse(a,b)},this)):a&&a.sync&&this.sync?this.sync(a):(this.callEvent("onBeforeLoad",[]),this.data.driver=webix.DataDriver[b||"json"],void this.M(a,null))},df:function(a){var b=this.data.driver,c=b.getDetails(b.getRecords(a)[0]);this.setValues?this.setValues(c):this.data=c},tB:function(a,b,c,d){a?this.$onLoad&&this.$onLoad(a,this.data.driver)||(this.data&&this.data.df?this.data.df(a):this.df(a)):this.N(b,c,d),this.ef&&this.ef(),this.callEvent("onAfterLoad",[]),this.waitData.resolve()},M:function(a,b,c){var d,e=this.data.driver;-1===c?d=e.toObject(b):(this.Ve&&this.Ve.remove(c),d=e.toObject(a,b)),d&&d.then?d.then&&"function"==typeof d.then&&d.then(webix.bind(this.tB,this)):this.tB(d)},N:function(a,b,c){this.callEvent("onAfterLoad",[]),this.callEvent("onLoadError",arguments),webix.callEvent("onLoadError",[a,b,c,this])},O:function(a){if(!this.s.dataFeed||this.P||!a)return!0;var b=this.s.dataFeed;return"function"==typeof b?b.call(this,a.id||a,a):(b=b+(-1==b.indexOf("?")?"?":"&")+"action=get&id="+encodeURIComponent(a.id||a),this.callEvent("onBeforeLoad",[]),webix.ajax(b,function(a,b,c){this.P=!0;var d=webix.DataDriver.json,e=d.toObject(a,b);e?this.setValues(d.getDetails(d.getRecords(e)[0])):this.N(a,b,c),this.P=!1,this.callEvent("onAfterLoad",[])},this),!1)}},webix.DataDriver={},webix.DataDriver.json={toObject:function(a){if(!a)return null;if("string"==typeof a)try{if(this.parseDates){var b=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(.\d{3})?Z/;a=JSON.parse(a,function(a,c){return"string"==typeof c&&b.test(c)?new Date(c):c})}else a=JSON.parse(a)}catch(c){return null}return a},getRecords:function(a){return a&&a.data&&(a=a.data),a&&!webix.isArray(a)?[a]:a},getDetails:function(a){return"string"==typeof a?{id:a||webix.uid(),value:a}:a},getOptions:function(a){return a.collections},getInfo:function(a){return{Q:a.total_count||0,R:a.pos||0,S:a.parent||0,T:a.config,U:a.webix_security}},child:"data",parseDates:!1},webix.DataDriver.html={toObject:function(a){if("string"==typeof a){var b=null;return-1==a.indexOf("<")&&(b=webix.toNode(a)),b||(b=document.createElement("DIV"),b.innerHTML=a),b.firstChild}return a},getRecords:function(a){return a.getElementsByTagName(this.tag)},getDetails:function(a){return webix.DataDriver.xml.tagToObject(a)},getOptions:function(){return!1},getInfo:function(a){return{Q:0,R:0}},tag:"LI"},webix.DataDriver.jsarray={toObject:function(a){return"string"==typeof a?JSON.parse(a):a},getRecords:function(a){return a&&a.data&&(a=a.data),a},getDetails:function(a){for(var b={},c=0;c<a.length;c++)b["data"+c]=a[c];return null!==this.idColumn&&(b.id=a[this.idColumn]),b},getOptions:function(){return!1},getInfo:function(a){return{Q:0,R:0}},idColumn:null},webix.DataDriver.csv={toObject:function(a){return a},getRecords:function(a){return a.split(this.row)},getDetails:function(a){a=this.stringToArray(a);for(var b={},c=0;c<a.length;c++)b["data"+c]=a[c];return null!==this.idColumn&&(b.id=a[this.idColumn]),b},getOptions:function(){return!1},getInfo:function(a){return{Q:0,R:0}},stringToArray:function(a){a=a.split(this.cell);for(var b=0;b<a.length;b++)a[b]=a[b].replace(/^[ \t\n\r]*(\"|)/g,"").replace(/(\"|)[ \t\n\r]*$/g,"");return a},idColumn:null,row:"\n",cell:","},webix.DataDriver.xml={V:function(a){return a&&a.documentElement?a.getElementsByTagName("parsererror").length?null:a:null},toObject:function(a,b){var c=b?b.rawxml?b.rawxml():b:null;return this.V(c)?c:(c="string"==typeof a?this.fromString(a.replace(/^[\s]+/,"")):a,this.V(c)?c:null)},getRecords:function(a){return this.xpath(a,this.records)},records:"/*/item",child:"item",config:"/*/config",getDetails:function(a){return this.tagToObject(a,{})},getOptions:function(){return!1},getInfo:function(a){var b=this.xpath(a,this.config);return b=b.length?this.assignTypes(this.tagToObject(b[0],{})):null,{Q:a.documentElement.getAttribute("total_count")||0,R:a.documentElement.getAttribute("pos")||0,S:a.documentElement.getAttribute("parent")||0,T:b,U:a.documentElement.getAttribute("webix_security")||null}},xpath:function(a,b){if(window.XPathResult){var c=a;-1==a.nodeName.indexOf("document")&&(a=a.ownerDocument);for(var d=[],e=a.evaluate(b,c,null,XPathResult.ANY_TYPE,null),f=e.iterateNext();f;)d.push(f),f=e.iterateNext();return d}var g=!0;try{"undefined"==typeof a.selectNodes&&(g=!1)}catch(h){}if(g)return a.selectNodes(b);var i=b.split("/").pop();return a.getElementsByTagName(i)},assignTypes:function(a){for(var b in a){var c=a[b];if("object"==typeof c)this.assignTypes(c);else if("string"==typeof c){if(""===c)continue;"true"==c?a[b]=!0:"false"==c?a[b]=!1:c==1*c&&(a[b]=1*a[b])}}return a},tagToObject:function(a,b){
var c=1==a.nodeType&&a.getAttribute("stack"),d=0;if(c){b=[];for(var e=a.childNodes,f=0;f<e.length;f++)1==e[f].nodeType&&b.push(this.tagToObject(e[f],{}))}else{b=b||{};var g=a.attributes;if(g&&g.length)for(var f=0;f<g.length;f++)b[g[f].name]=g[f].value,d=1;for(var e=a.childNodes,f=0;f<e.length;f++)if(1==e[f].nodeType){var h=e[f].tagName;b[h]?("function"!=typeof b[h].push&&(b[h]=[b[h]]),b[h].push(this.tagToObject(e[f],{}))):b[h]=this.tagToObject(e[f],{}),d=2}if(!d)return this.nodeValue(a);2>d&&(b.value=b.value||this.nodeValue(a))}return b},nodeValue:function(a){return a.firstChild?a.firstChild.wholeText||a.firstChild.data:""},fromString:function(a){try{if(window.DOMParser)return(new DOMParser).parseFromString(a,"text/xml");if(window.ActiveXObject){var b=new ActiveXObject("Microsoft.xmlDOM");return b.loadXML(a),b}}catch(c){return null}}},webix.BaseBind={bind:function(a,b,c){this.attachEvent||webix.extend(this,webix.EventSystem),"string"==typeof a&&(a=webix.$$(a)),a.W&&a.W(),this.W&&this.W(),a.getBindData||webix.extend(a,webix.BindSource),this.X(),a.addBind(this.s.id,b,c),this.Os=a.s.id;var d=this.s.id;this.Ps=this.attachEvent(this.touchable?"onAfterRender":"onBindRequest",function(){return a.getBindData(d)}),this.refresh&&this.isVisible(this.s.id)&&this.refresh()},unbind:function(){if(this.Os){var a=webix.$$(this.Os);a&&a.removeBind(this.s.id),this.detachEvent(this.Ps),this.Os=null}},X:function(){var a=this.s;if(this.filter){var b=a.id;this.data.Y=webix.bind(function(){webix.$$(this.Os).Z[b]=!1},this)}var c=this.render;this.render=function(){if(!this.$){this.$=!0;var a=this.callEvent("onBindRequest");return this.$=!1,c.apply(this,a===!1?arguments:[])}},(this.getValue||this.getValues)&&(this.save=function(){return!(this.validate&&!this.validate())&&(webix.$$(this.Os).setBindData(this.getValue?this.getValue:this.getValues(),this.s.id),void(this.setDirty&&this.setDirty(!1)))}),!a.dataFeed&&this.loadNext&&this.data.attachEvent("onStoreLoad",webix.bind(function(){this.Os&&(webix.$$(this.Os).Z[this.s.id]=!1)},this)),this.X=function(){}}},webix.BindSource={$init:function(){this.bb={},this.Z={},this.cb={},this.db(this)},saveBatch:function(a){this.eb=!0,a.call(this),this.eb=!1,this.fb()},setBindData:function(a,b){if(b&&(this.cb[b]=!0),this.setValue)this.setValue(a);else if(this.setValues)this.setValues(a);else{var c=this.getCursor();c?this.updateItem(c,a):this.add(a)}this.callEvent("onBindUpdate",[a,b]),this.save&&this.save(),b&&(this.cb[b]=!1)},getBindData:function(a,b){if(this.Z[a])return!1;var c=webix.$$(a);c.isVisible(c.s.id)&&(this.Z[a]=!0,this.gb(c,this.bb[a][0],this.bb[a][1]),b&&c.filter&&c.refresh())},addBind:function(a,b,c){this.bb[a]=[b,c]},removeBind:function(a){delete this.bb[a],delete this.Z[a],delete this.cb[a]},db:function(a){a.filter?webix.extend(this,webix.CollectionBind):a.setValue?webix.extend(this,webix.ValueBind):webix.extend(this,webix.RecordBind)},fb:function(){if(!this.eb)for(var a in this.bb)this.cb[a]||(this.Z[a]=!1,this.getBindData(a,!0))},hb:function(a,b,c){a.setValue?a.setValue(c&&b?c[b]:c):a.filter?a.data.silent(function(){this.filter(b,c)}):!c&&a.clear?a.clear():a.O(c)&&a.setValues(webix.clone(c)),a.callEvent("onBindApply",[c,b,this])}},webix.DataValue=webix.proto({name:"DataValue",isVisible:function(){return!0},$init:function(a){(!a||webix.isUndefined(a.value))&&(this.data=a||"");var b=a&&a.id?a.id:webix.uid();this.s={id:b},webix.ui.views[b]=this},setValue:function(a){this.data=a,this.callEvent("onChange",[a])},getValue:function(){return this.data},refresh:function(){this.callEvent("onBindRequest")}},webix.EventSystem,webix.BaseBind),webix.DataRecord=webix.proto({name:"DataRecord",isVisible:function(){return!0},$init:function(a){this.data=a||{};var b=a&&a.id?a.id:webix.uid();this.s={id:b},webix.ui.views[b]=this},getValues:function(){return this.data},setValues:function(a,b){this.data=b?webix.extend(this.data,a,!0):a,this.callEvent("onChange",[a])},refresh:function(){this.callEvent("onBindRequest")}},webix.EventSystem,webix.BaseBind,webix.AtomDataLoader,webix.Settings),webix.ValueBind={$init:function(){this.attachEvent("onChange",this.fb)},gb:function(a,b,c){b=b||"value";var d=this.getValue()||"";if(c&&(d=c(d)),a.setValue)a.setValue(d);else if(a.filter)a.data.silent(function(){this.filter(b,d)});else{var e={};e[b]=d,a.O(d)&&a.setValues(e)}a.callEvent("onBindApply",[d,b,this])}},webix.RecordBind={$init:function(){this.attachEvent("onChange",this.fb)},gb:function(a,b,c){var d=this.getValues()||null;c&&(d=c(d)),this.hb(a,b,d)}},webix.CollectionBind={$init:function(){this.ib=null,this.attachEvent("onSelectChange",function(a){var b=this.getSelectedId();this.setCursor(b?b.id||b:null)}),this.attachEvent("onAfterCursorChange",this.fb),this.attachEvent("onAfterDelete",function(a){a==this.getCursor()&&this.setCursor(null)}),this.data.attachEvent("onStoreUpdated",webix.bind(function(a,b,c){a&&a==this.getCursor()&&"paint"!=c&&"delete"!=c&&this.fb()},this)),this.data.attachEvent("onClearAll",webix.bind(function(){this.ib=null},this)),this.data.attachEvent("onIdChange",webix.bind(function(a,b){this.ib==a&&(this.ib=b,this.fb())},this))},refreshCursor:function(){this.ib&&this.callEvent("onAfterCursorChange",[this.ib])},setCursor:function(a){a==this.ib||null!==a&&!this.getItem(a)||(this.callEvent("onBeforeCursorChange",[this.ib]),this.ib=a,this.callEvent("onAfterCursorChange",[a]))},getCursor:function(){return this.ib},gb:function(a,b,c){if("$level"==b&&this.data.getBranch)return(a.data||a).importData(this.data.getBranch(this.getCursor()));var d=this.getItem(this.getCursor())||this.s.defaultData||null;return"$data"==b?"function"==typeof c?c.call(a,d,this):a.data.importData(d?d[c]:[]):(c&&(d=c(d)),void this.hb(a,b,d))}},webix.AtomRender={jb:function(a){return a.$empty?"":this.s.template(a,this)},render:function(){var a=this.s;return!!this.isVisible(a.id)&&((!this.callEvent||this.callEvent("onBeforeRender",[this.data]))&&(this.data&&!a.content&&(this.y.innerHTML="",this.y.innerHTML=this.jb(this.data)),this.callEvent&&this.callEvent("onAfterRender",[])),!0)},sync:function(a){this.kb=!1,"DataStore"!=a.name&&(a.data&&"DataStore"==a.name?a=a.data:this.kb=!0),this.kb?a.bind("change",webix.bind(function(a){a.id==this.data.id&&(this.data=a.attributes,this.refresh())},this)):a.attachEvent("onStoreUpdated",webix.bind(function(b){b&&b!=this.data.id||(this.data=a.pull[b],this.refresh())},this))},template_setter:webix.template},webix.SingleRender=webix.proto({template_setter:function(a){this.type.template=webix.template(a)},jb:function(a){var b=this.type;return(b.templateStart?b.templateStart(a,b):"")+b.template(a,b)+(b.templateEnd?b.templateEnd(a,b):"")},customize:function(a){webix.type(this,a)}},webix.AtomRender),webix.UIManager={A:null,lb:{},mb:0,nb:{enter:13,tab:9,esc:27,escape:27,up:38,down:40,left:37,right:39,pgdown:34,pagedown:34,pgup:33,pageup:33,end:35,home:36,insert:45,"delete":46,backspace:8,space:32,meta:91,win:91,mac:91,multiply:106,add:107,subtract:109,decimal:110,divide:111},ob:function(){webix.event(document.body,"click",webix.bind(this.pb,this)),webix.event(document,"keydown",webix.bind(this.qb,this)),document.body.addEventListener&&document.body.addEventListener("focus",webix.bind(this.rb,this),!0),webix.destructors.push(this)},destructor:function(){webix.UIManager.A=null},getFocus:function(){return this.A},sb:function(a){this.tb=this.tb||a.s.id},setFocus:function(a,b){return a=webix.$$(a),a&&!a.$view&&(a=null),this.mb=webix.mb=new Date,this.A===a||(this.A&&this.A.callEvent&&this.A.callEvent("onBlur",[this.A]),a&&a.callEvent&&a.callEvent("onFocus",[a,this.A]),webix.callEvent("onFocusChange",[a,this.A]),this.A&&this.A.blur&&!b&&this.A.blur(),this.A=a,a&&a.focus&&!b&&a.focus(),!0)},applyChanges:function(a){var b=this.getFocus();b&&b!=a&&b.Xy&&b.Xy(a)},hasFocus:function(a){return a===this.A},ub:function(a,b){var c=webix.html.locate(a,"view_id")||this.tb;return c=webix.$$(c),this.tb=null,c!=this.A?(b||(this.tb=null),c?(c=webix.$$(c),this.canFocus(c)&&this.setFocus(c)):b||this.setFocus(null),!0):void 0},pb:function(a){return new Date-this.mb<100?(this.tb=null,!1):this.ub(a)},rb:function(a){return this.ub(a,!0)},canFocus:function(a){return a.isVisible()&&a.isEnabled()},vb:function(a){var b=this.getFocus();return!(a&&!this.wb(a,b))&&void(this.xb("getPrev",a)?this.A=null:this.setFocus(this.getPrev(a)))},Xz:{190:46},wb:function(a,b){if(!a)return!1;if(!b)return!1;for(;b;){if(b===a)return!0;b=b.getParentView()}return!1},yb:function(){this&&this.callEvent&&this.callEvent("onTimedKeyPress",[])},BA:function(a){return 112>a&&a>105},qb:function(a){var b=a.which||a.keyCode;b>95&&106>b&&(b-=48),b=this.Xz[b]||b;var c=a.ctrlKey,d=a.shiftKey,e=a.altKey,f=a.metaKey,g=this.zb(b,c,d,e,f),h=this.getFocus();h&&h.callEvent&&(h.callEvent("onKeyPress",[b,a])===!1&&webix.html.preventEvent(a),h.hasEvent("onTimedKeyPress")&&(clearTimeout(h.Ab),h.Ab=webix.delay(this.yb,h,[],h.s.keyPressTimeout||250))),this.tabControl&&(9!==b||c||e||f||(this.xb(d?"getPrev":"getNext"),webix.html.preventEvent(a))),this.BA(b)||(g=this.zb(String.fromCharCode(b),c,d,e,f));var i=!c&&!e&&!f&&9!=b&&27!=b&&13!=b;return this.Bb(g,i,a)===!1?(webix.html.preventEvent(a),!1):void 0},xb:function(a){if(!this.getFocus())return null;a=a||"getNext";for(var b=this.getFocus(),c=b,d=webix.uid();;){if(b=this[a](b),b&&b.s.tabFocus&&this.canFocus(b))return this.setFocus(b);if(b===c||b.$fmarker==d)return null;b.$fmarker=d}},getTop:function(a){for(var b,c=webix.$$(a);c&&(b=c.getParentView());)c=b;return c},getNext:function(a,b){var c=a.getChildViews();if(c.length&&!b)return c[0];var d=a.getParentView();if(!d)return a;var e=d.getChildViews();if(e.length)for(var f=webix.PowerArray.find.call(e,a)+1;f<e.length;){if(this.canFocus(e[f]))return e[f];f++}return this.getNext(d,!0)},getPrev:function(a,b){var c=a.getChildViews();if(c.length&&b)return this.getPrev(c[c.length-1],!0);if(b)return a;var d=a.getParentView();if(!d)return this.getPrev(a,!0);var e=d.getChildViews();if(e)for(var f=webix.PowerArray.find.call(e,a)-1;f>=0;){if(this.canFocus(e[f]))return this.getPrev(e[f],!0);f--}return d},addHotKey:function(a,b,c){var d=this.Cb(a);c||(c=null),d.handler=b,d.view=c;var e=this.zb(d.letter,d.ctrl,d.shift,d.alt,d.meta);return this.lb[e]||(this.lb[e]=[]),this.lb[e].push(d),a},removeHotKey:function(a,b,c){var d=this.Cb(a),e=this.zb(d.letter,d.ctrl,d.shift,d.alt,d.meta);if(b||c){var f=this.lb[e];if(f){for(var g=f.length-1;g>=0;g--)c&&f[g].view!==c||b&&f[g].handler!==b||f.splice(g,1);f.length||delete this.lb[e]}}else delete this.lb[e]},zb:function(a,b,c,d,e){return a+"_"+["",b?"1":"0",c?"1":"0",d?"1":"0",e?"1":"0"].join("")},Bb:function(a,b,c){var d=this.getFocus();return this.lb[a]?this.Db(this.lb[a],d,c):!b||!this.lb.ANY_0000||this.Db(this.lb.ANY_0000,d,c)},Db:function(a,b,c){for(var d=0;d<a.length;d++){var e=a[d];if(null===e.view||b===e.view||"string"==typeof e.view&&b&&b.name===e.view){var f=e.handler(b,c);if(!!f===f)return f}}return!0},Cb:function(a){var b,c,d,e,f=this.nb,g=a.toLowerCase().split(/[\+\-_]/);b=c=d=e=0;for(var h="",i=0;i<g.length;i++)if("ctrl"===g[i])b=1;else if("shift"===g[i])c=1;else if("alt"===g[i])d=1;else if("command"===g[i])e=1;else if(f[g[i]]){var j=f[g[i]];h=this.BA(j)?j.toString():String.fromCharCode(j)}else h=g[i];return{letter:h.toUpperCase(),ctrl:b,shift:c,alt:d,meta:e}}},webix.ready(function(){webix.UIManager.ob(),webix.UIManager.addHotKey("enter",function(a,b){if(a&&a.editStop&&a.Eb)return a.editStop(),!0;if(a&&a.touchable){var c=a.getFormView();c&&!a.Dt&&c.callEvent("onSubmit",[a,b])}}),webix.UIManager.addHotKey("esc",function(a){if(a){if(a.editCancel&&a.Eb)return a.editCancel(),!0;var b=a.getTopParentView();b&&b.setPosition&&b.Fb()}}),webix.UIManager.addHotKey("shift+tab",function(a,b){if(a&&a.Gb&&!a.Gb(!1,b))return!1;if(a&&a.Eb){if(a.editNext)return a.editNext(!1);if(a.editStop)return a.editStop(),!0}}),webix.UIManager.addHotKey("tab",function(a,b){if(a&&a.Gb&&!a.Gb(!0,b))return!1;if(a&&a.Eb){if(a.editNext)return a.editNext(!0);if(a.editStop)return a.editStop(),!0}else webix.delay(function(){webix.UIManager.tabControl||webix.UIManager.setFocus(webix.$$(document.activeElement),!0)},1)})}),webix.IdSpace={$init:function(){this.Hb={},this.Ib={},this.getTopParentView=webix.bind(function(){return this},this),this.Jb(),this.$ready.push(this.Kb)},$$:function(a){return this.Hb[a]},innerId:function(a){return this.Ib[a]},Jb:function(a){this.Lb=webix.Mb,webix.Mb=this},Kb:function(a){for(var b in this.Hb){var c=this.Hb[b];this.callEvent&&c.mapEvent&&!c.k.onitemclick&&c.mapEvent({onitemclick:this}),c.getTopParentView=this.getTopParentView}webix.Mb=this.Lb,this.Lb=0},oC:function(a){delete this.Hb[a]},ui:function(){this.Jb();var a=webix.ui.apply(webix,arguments);return this.Kb(),a}},function(){var a=[],b=webix.ui;if(!webix.ui){b=webix.ui=function(a,e,f){webix.Nb=!0;var g=webix.isArray(a),h=webix.toNode(a.container||e||document.body);h.s&&(f=d(h,g,f));var i,j=h==document.body;if(a.s||h&&g?i=a:(h&&j&&(a.$topView=!0),a.Ob||(a.Ob={}),i=b.A(a)),!j||i.setPosition||i.$apiOnly||webix.ui.Pb(),i.s&&i.s.ft&&!h.$view)i.s.gt=h;else if(!i.$apiOnly)if(h.appendChild)c(h,i,a);else if(h.destructor){var k=h;if(f||0===f||webix.isArray(i)||(f=h,h=h.getParentView()),h&&h.Qb)i.getParentView&&i.getParentView()&&i.getParentView().Rb(i),h.Qb(i,f);else{var e=k.$view.parentNode;k.destructor(),c(e,i,a)}}return webix.Nb=!1,i};var c=function(b,c,d){b.appendChild(c.x),((!c.setPosition||c.s.fullscreen)&&b==document.body||c.s.position)&&a.push(c),d.skipResize||c.adjust()},d=function(a,b,c){var d=[a];if(b)d=a.getChildViews();else if(a.gd)d=[a.gd];else{if("number"==typeof c)return c;if(c)return d=[webix.$$(c)],e(d),d[0].config.id}return e(d),c},e=function(a){for(var b=a.length-1;b>=0;b--)delete webix.ui.views[a[b].config.id],a[b].config.id="x"+webix.uid(),webix.ui.views[a[b].config.id]=a[b],e(a[b].getChildViews())}}webix.ui.animate=function(a,b,c){var d=webix.$$(b);if(d){var e=c||{type:"slide",direction:"left"},f=d.x.cloneNode(!0),g=webix.ui(a,b);g.x.parentNode.appendChild(f);var h=webix.animate.formLine(g.x,f,e);return e.callback=function(){webix.animate.breakLine(h)},webix.animate(h,e),g}},webix.ui.animateView=function(a,b,c){if(a=webix.$$(a)){c=c||{type:"slide",direction:"left"};for(var d=function(a){var b=a.x,c=b.className,d=b.innerHTML;return"<div class='"+c+"' style='width:"+b.offsetWidth+"px;height:"+b.offsetHeight+"px;'>"+d+"</div>"},e=[],f=0;f<a.x.childNodes.length;f++){var g=a.x.childNodes[f],h=g.currentStyle?g.currentStyle.display:getComputedStyle(g,null).display;e.push(h||"")}var i=d(a);"function"==typeof b&&b.call(this);for(var j=d(a),k=a.x.insertBefore(webix.html.create("DIV",{"class":"webix_view_animate",style:"width:"+a.x.offsetWidth+"px;height:"+a.x.offsetHeight+"px;"},j+i),a.x.firstChild),f=1;f<a.x.childNodes.length;f++)a.x.childNodes[f].style.display="none";var l=webix.animate.formLine(k.childNodes[0],k.childNodes[1],c);return c.callback=function(){if(k){a.x.removeChild(k),k=null;for(var b=0;b<a.x.childNodes.length;b++)a.x.childNodes[b].style.display=e[b]}},webix.animate(l,c),a}},webix.ui.Sb=function(){var a=webix.html.create("div");a.className="webix_skin_mark",a.style.cssText="position:absolute;left:-1000px;width:100px;padding:0px;margin:0px;min-height:100px;overflow-y:scroll;",document.body.appendChild(a);var b=a.offsetWidth-a.clientWidth,c={110:"air",120:"aircompact",130:"clouds",140:"web",150:"terrace",160:"metro",170:"light",180:"glamour",190:"touch",200:"flat",210:"compact",220:"material"}[10*Math.floor(a.offsetHeight/10)];if(document.body.removeChild(a),c){var d=webix.skin[c];d&&d!=webix.skin.$active&&webix.skin.set(c)}return webix.env.$customScroll?0:b},webix.ui.scrollSize=webix.env.touch||webix.env.$customScroll?0:17,webix.ready(function(){var a=webix.ui.Sb();webix.ui.scrollSize=webix.env.touch?0:a}),webix.ui.Tb=function(a){return"$"+a+(this.Ub[a]=(this.Ub[a]||0)+1)},webix.ui.Ub={},webix.ui.Pb=function(){webix.html.addStyle("html, body{ height:100%; }"),document.body.className+=" webix_full_screen",webix.ui.Pb=function(){},webix.Touch.limit(!1)},webix.ui.resize=function(){if(!(webix.env.touch&&(webix.edit_open_time&&new Date-webix.edit_open_time<500||webix.mb&&new Date-webix.mb<500)||(webix.UIManager.applyChanges(),webix.callEvent("onClick",[]),webix.ui.$freeze)))for(var b=a.length-1;b>=0;b--)a[b].$destructed?a.splice(b,1):a[b].adjust()},webix.ui.each=function(a,b,c,d){if(a)for(var e=d?[a]:a.getChildViews(),f=0;f<e.length;f++)b.call(c||webix,e[f])!==!1&&webix.ui.each(e[f],b,c)},webix.event(window,"resize",webix.ui.resize),b.Wb={},b.delay=function(a){webix.ui.Wb[a.id]=a},b.hasMethod=function(a,b){var c=webix.ui[a];return!!c&&(c.$protoWait&&(c=c.call(webix)),!!webix.ui[a].prototype[b])},webix.ui.zIndex=function(){return webix.ui.zIndexBase++},webix.ui.zIndexBase=100,b.A=function(a){if(a.view){var c=a.view;return new b[c](a)}if(a.rows||a.cols){for(var d=a.rows||a.cols,e=!1,f=0;f<d.length;f++)d[f].body&&!d[f].view&&(e=!0);return e?new b.headerlayout(a):new b.layout(a)}return a.cells?new b.multiview(a):a.template||a.content?new b.template(a):new b.spacer(a)},b.views={},webix.$$=function(a){if(!a)return null;if(b.views[a])return b.views[a];if(b.Wb[a])return webix.ui(b.Wb[a]);var c=a;if("object"==typeof a){if(a.s)return a;c=a.target||a.srcElement||a}return b.views[webix.html.locate({target:webix.toNode(c)},"view_id")]},webix.isUndefined(window.$$)&&(window.$$=webix.$$),webix.UIExtension=window.webix_view||{},webix.protoUI({name:"baseview",$init:function(a){a.id||(a.id=webix.ui.Tb(this.name)),this.Xb=webix.Xb,webix.Xb=null,this.$scope=a.$scope||(this.Xb?this.Xb.$scope:null),this.x||(this.w=this.x=webix.html.create("DIV",{"class":"webix_view"}),this.$view=this.x)},$skin:!1,defaults:{width:0,height:0,gravity:1},getNode:function(){return this.x},getParentView:function(){return this.Xb||null},getTopParentView:function(){var a=this.getParentView();return a?a.getTopParentView():this},getFormView:function(){var a=this.getParentView();return!a||a.setValues?a:a.getFormView()},getChildViews:function(){return[]},isVisible:function(a,b){if(this.s.hidden)return a&&(this.Yb||(this.Yb=[],this.Zb={}),this.Zb[a]||(this.Zb[a]=!0,this.Yb.push(a))),!1;var c=this.getParentView();return!c||c.isVisible(a,this.s.id)},isEnabled:function(){if(this.$b)return!1;var a=this.getParentView();return!a||a.isEnabled()},disable:function(){webix.html.remove(this.$b),this.s.disabled=!0,this.$b=webix.html.create("div",{"class":"webix_disabled"}),window.getComputedStyle&&(this._b=window.getComputedStyle(this.x,null).getPropertyValue("position")),"absolute"!=this._b&&(this.x.style.position="relative"),this.x.appendChild(this.$b),webix.html.addCss(this.x,"webix_disabled_view",!0),webix.UIManager.vb(this)},enable:function(){this.s.disabled=!1,this.$b&&(webix.html.remove(this.$b),webix.html.removeCss(this.x,"webix_disabled_view"),this.$b=null,this._b&&(this.x.style.position=this._b))},disabled_setter:function(a){return a?this.disable():this.enable(),a},container_setter:function(a){return!0},css_setter:function(a){return"object"==typeof a&&(a=webix.html.createCss(a)),this.x.className+=" "+a,a},id_setter:function(a){if(webix.Mb&&(webix.Mb!=this||this.Lb)){var b=this.config.$id=a;(this.Lb||webix.Mb).Hb[a]=this,a=webix.ui.Tb(this.name),(this.Lb||webix.Mb).Ib[a]=b}return webix.ui.views[a]=this,this.x.setAttribute("view_id",a),a},$setSize:function(a,b){var c=this.ac;return(!c||c[0]!=a||c[1]!=b)&&(this.ac=[a,b],this.$width=this.bc=a-(this.cc?webix.ui.scrollSize:0),this.$height=this.dc=b-(this.ec?webix.ui.scrollSize:0),this.x.style.width=a+"px",this.x.style.height=b+"px",webix.env.isWebKit&&(this.x.offsetWidth,this.x.offsetHeight),!0)},$getSize:function(a,b){var c=this.s,d=[c.width||c.minWidth||0,c.width||c.maxWidth||1e5,c.height||c.minHeight||0,c.height||c.maxHeight||1e5,c.gravity];return d[0]+=a,d[1]+=a,d[2]+=b,d[3]+=b,d},show:function(a,b){var c=this.getParentView(),d=!arguments[2];if(c)!b&&b!==!1&&this.s.animate&&c.s.animate&&(b=webix.extend(c.s.animate?webix.extend({},c.s.animate):{},this.s.animate,!0)),(d?c.fc:c.Fb)&&(d?c.fc:c.Fb).call(c,this,b),d&&this.Qd(),a&&d&&c.show(a);else if(this.s.hidden){if(d){var e=webix.toNode(this.s.gt||document.body);e.appendChild(this.x),this.s.hidden=!1,this.adjust(),this.Qd()}}else d||(this.s.hidden=this.s.ft=!0,this.x&&(this.s.gt=this.x.parentNode,webix.html.remove(this.x)))},Qd:function(){if(this.Yb){for(var a=0;a<this.Yb.length;a++){var b=webix.$$(this.Yb[a]);b&&b.render()}this.Yb=[],this.Zb={}}},hidden_setter:function(a){return a&&this.hide(),this.s.hidden},hide:function(){this.show(null,null,!0),webix.UIManager.vb(this)},adjust:function(){if(!this.x.parentNode)return!1;var a=this.x.parentNode.offsetWidth||0,b=this.x.parentNode.offsetHeight||0,c=this.$getSize(0,0);c[0]>a&&(a=c[0]),c[2]>b&&(b=c[2]),a>c[1]&&(a=c[1]),b>c[3]&&(b=c[3]),this.$setSize(a,b)},resize:function(a){if(!webix.gc&&!webix.ui.$freeze){var b=this.getParentView();b?b.resizeChildren?b.resizeChildren():b.resize():(this.adjust(),webix.callEvent("onResize",[]))}}},webix.Settings,webix.Destruction,webix.BaseBind,webix.UIExtension),webix.protoUI({name:"view",$init:function(a){this.hc(a)},hc:function(a){var b=webix.isUndefined(a.borderless);b&&!this.setPosition&&a.$topView&&(a.borderless=!0,b=!1),b&&this.defaults.borderless||a.borderless?a.Ob={top:!0,left:!0,bottom:!0,right:!0}:(a.Ob||(a.Ob={}),this.w.style.borderWidth="1px")},$getSize:function(a,b){var c=this.s.Ob;c&&(a+=(c.left?0:1)+(c.right?0:1),b+=(c.top?0:1)+(c.bottom?0:1));var d=webix.ui.baseview.prototype.$getSize.call(this,a,b);return d},$setSize:function(a,b){var c=this.s.Ob;return c&&(a-=(c.left?0:1)+(c.right?0:1),b-=(c.top?0:1)+(c.bottom?0:1)),webix.ui.baseview.prototype.$setSize.call(this,a,b)}},webix.ui.baseview)}(),webix.ui.view.call(webix),webix.protoUI({name:"spacer",defaults:{borderless:!0},$init:function(){this.x.className+=" webix_spacer"}},webix.ui.view),webix.protoUI({name:"baselayout",$init:function(a){this.$ready.push(this.kc),this.y=this.w,this.lc=[],this.ht=[],a.$topView&&(a.borderless=!0,a.Ob={top:!0,left:!0,bottom:!0,right:!0}),a.isolate&&webix.extend(this,webix.IdSpace)},rows_setter:function(a){this.mc=1,this.nc=a},cols_setter:function(a){this.mc=0,this.$view.style.whiteSpace="nowrap",this.nc=a},Rb:function(a){webix.PowerArray.removeAt.call(this.q,webix.PowerArray.find.call(this.q,a)),this.resizeChildren(!0)},Qb:function(a,b){if(webix.isUndefined(b)){for(var c=0;c<this.q.length;c++)this.q[c].destructor();this.nc=a,this.kc()}else{var d;if("number"==typeof b){(0>b||b>this.q.length)&&(b=this.q.length);var e=(this.q[b]||{}).x;webix.PowerArray.insertAt.call(this.q,a,b),a.s.hidden||webix.html.insertBefore(a.x,e,this.y)}else{d=webix.$$(b),b=webix.PowerArray.find.call(this.q,d);var f=d.x.parentNode;f&&!a.s.hidden&&f.insertBefore(a.x,d.x),d.destructor(),this.q[b]=a}this.mc||this.oc(a),this.q[b].Xb=this}this.resizeChildren(!0);var g=this.elements?this:this.getFormView();g&&g.Qs(),webix.callEvent("onReconstruct",[this])},oc:function(a){a.x.style.display="inline-block",a.x.style.verticalAlign="top"},addView:function(a,b){webix.isUndefined(b)&&(b=this.q.length);var c=this.getTopParentView();return c=c&&c.ui?c:webix,c.ui(a,this,b).s.id},removeView:function(a){var b;b="object"!=typeof a?webix.$$(a):a;var c=webix.PowerArray.find.call(this.q,b);if(c>=0){this.Vx&&this.Vx(c,b);var d=this.elements?this:this.getFormView();this.q.splice(c,1),d&&webix.ui.each(b,function(a){a.name&&delete d.getCleanValues()[a.config.name]},d,!0),b.destructor(),this.resizeChildren(!0),d&&d.Qs()}webix.callEvent("onReconstruct",[this])},reconstruct:function(){this.qc=0,this.Qb(this.nc)},Fb:function(a,b,c){a.s.hidden||(a.s.hidden=!0,webix.html.remove(a.x),this.qc++,c||webix.Nb||this.resizeChildren(!0))},Lw:function(a){a.callEvent&&a.callEvent("onViewShow",[])},resizeChildren:function(){if(!webix.ui.$freeze&&this.lc){var a=this.getParentView();if(a)return a.resizeChildren?a.resizeChildren():a.resize();var b,c,d,e,f=this.$getSize(0,0);d=b=this.lc[0]||0,e=c=this.lc[1]||0,a?this.rc(b,c):(f[0]>b&&(d=f[0]),f[2]>c&&(e=f[2]),b>f[1]&&(d=f[1]),c>f[3]&&(e=f[3]),this.$setSize(d,e)),webix.callEvent("onResize",[])}},getChildViews:function(){return this.q},index:function(a){a.s&&(a=a.s.id);for(var b=0;b<this.q.length;b++)if(this.q[b].s.id==a)return b;return-1},fc:function(a,b,c){if(a.s.hidden){a.s.hidden=!1;for(var d=this.index(a)+1;this.q[d]&&this.q[d].s.hidden;)d++;var e=this.q[d]?this.q[d].x:null;webix.html.insertBefore(a.x,e,this.y||this.x),this.qc--,c||(this.resizeChildren(!0),a.refresh&&a.refresh()),a.callEvent&&(a.callEvent("onViewShow",[]),webix.ui.each(a,this.Lw))}},showBatch:function(a,b){var c="undefined"!=typeof b;if(b=b!==!1,c)this.s.visibleBatch="";else{if(this.s.visibleBatch==a)return;this.s.visibleBatch=a}for(var d=[],e=0;e<this.q.length;e++)this.q[e].s.batch?this.q[e].s.batch==a?b?d.push(this.q[e]):this.Fb(this.q[e],null,!0):c||this.Fb(this.q[e],null,!0):d.push(this.q[e]);for(var e=0;e<d.length;e++)this.fc(d[e],null,!0),d[e].Qd();this.resizeChildren(!0)},kc:function(a){this.q=[];for(var b=0;b<a.length;b++)webix.Xb=this,a[b].Ob||(a[b].borderless=!0),this.q[b]=webix.ui.A(a[b],this),this.mc||this.oc(this.q[b]),this.s.visibleBatch&&this.s.visibleBatch!=this.q[b].s.batch&&this.q[b].s.batch&&(this.q[b].s.hidden=!0,this.qc++),this.q[b].s.hidden||((this.y||this.w).appendChild(this.q[b].x),this.q[b].$nospace&&this.qc++);this.sc&&this.sc(a)},tc:function(a,b,c){if(this.mc!=c)for(var d=0;d<this.q.length;d++)this.q[d].s[a]=b,this.q[d].tc&&this.q[d].tc(a,b,c)},$getSize:function(a,b){var c=0,d=1e5,e=1e5,f=0;this.mc?e=0:d=0;var g=0,h=0,i=0;this.uc=[];for(var j=0;j<this.q.length;j++)if(!this.q[j].s.hidden){var k=this.uc[j]=this.q[j].$getSize(0,0);this.q[j].$nospace?h++:this.mc?(k[0]>c&&(c=k[0]),k[1]<d&&(d=k[1]),f+=k[2],e+=k[3],k[2]==k[3]&&-1!=k[2]?(g+=k[2],h++):i+=k[4]):(k[2]>f&&(f=k[2]),k[3]<e&&(e=k[3]),c+=k[0],d+=k[1],k[0]==k[1]&&-1!=k[0]?(g+=k[0],h++):i+=k[4])}f>e&&(e=f),c>d&&(d=c),this.vc=[g,this.q.length-h,i],this.ng=[c+a,f+b];var l=webix.ui.baseview.prototype.$getSize.call(this,0,0);return l[1]>=1e5&&(l[1]=0),l[3]>=1e5&&(l[3]=0),l[0]=(l[0]||c)+a,l[1]=Math.max(l[0],(l[1]||d)+a),l[2]=(l[2]||f)+b,l[3]=Math.max(l[2],(l[3]||e)+b),this.s.responsive&&(l[0]=0),l},$setSize:function(a,b){this.lc=[a,b],webix.ui.baseview.prototype.$setSize.call(this,a,b),this.rc(a,b)},wc:function(a,b,c){b=a[b],c=a[c];var d=b;if(b!=c){var e=this.xc*a[4]/this.yc;if(b>e)d=b,this.yc-=a[4],this.xc-=d;else{if(!(e>c))return-1;d=c,this.yc-=a[4],this.xc-=d}}return d},it:function(a,b){var c=webix.$$(b);"hide"!==c&&c?(c||(c=webix.ui({view:"popup",body:[{}]})),a.jt=a.s.width,a.kt=a.s.height,a.lt=c.s.id,a.s.width=0,a.s.height||(a.s.autoheight=!0),webix.ui(a,c,this.ht.length)):(a.hide(),webix.delay(this.resize,this),a.lt="hide"),this.ht.push(a)},mt:function(a){var b=a.lt;a.lt=0,"hide"!==b&&b?(a.s.width=a.jt,a.s.height=a.kt,delete a.s.autoheight,webix.ui(a,this,0)):(a.show(),webix.delay(this.resize,this)),this.ht.pop()},nt:function(a,b){if(!this.ot){if(this.ot=!0,a<this.ng[0])for(var c=0;c<this.q.length-1;c++){var d=this.q[c];if(!d.lt){this.it(d,this.s.responsive);break}}else if(this.ht.length){var d=this.ht[this.ht.length-1],e="hide"==d.lt?0:d.jt,f=d.$getSize(e,0);f[0]+this.ng[0]+this.Dc+20<=a&&this.mt(d)}this.ot=!1}},rc:function(a,b){webix.gc=(webix.gc||0)+1,this.s.responsive&&this.nt(a,b),this.xc=(this.mc?b:a)-this.vc[0],this.yc=this.vc[2];for(var c=a,d=b,e=[],f=0;f<this.q.length;f++)if(!this.q[f].s.hidden){var g=this.uc[f];if(this.mc){var d=this.wc(g,2,3);if(0>d){e.push(f);continue}}else{var c=this.wc(g,0,1);if(0>c){e.push(f);continue}}this.q[f].$setSize(c,d)}for(var f=0;f<e.length;f++){var h=e[f],g=this.uc[h],i=Math.round(this.xc*g[4]/this.yc);this.xc-=i,this.yc-=g[4],this.mc?d=i:c=i,this.q[h].$setSize(c,d)}webix.gc-=1},zc:function(a,b){var c=this.index(a);return-1==c?null:this.q[c+b]},Ac:function(){return this.q[0]}},webix.EventSystem,webix.ui.baseview),webix.protoUI({name:"layout",$init:function(a){this.qc=0},defaults:{type:"line"},kc:function(){this.Bc&&(a=this.Bc(a)),this.Uw||(this.x.className+=" webix_layout_"+(this.s.type||""),this.Uw=1),this.s.margin!==webix.undefined&&(this.Cc=this.s.margin),this.s.padding!=webix.undefined&&(this.Dc=this.Ec=this.s.padding),this.s.paddingX!==webix.undefined&&(this.Dc=this.s.paddingX),this.s.paddingY!==webix.undefined&&(this.Ec=this.s.paddingY),(this.Ec||this.Dc)&&(this.Fc=!0),this.Wx()&&!this.s.borderless&&(this.w.style.borderWidth="1px",this.Gc=!0);var a=this.nc;this.s.borderless&&(this.s.Ob={top:!0,left:!0,right:!0,bottom:!0}),this.Hc(a),webix.ui.baselayout.prototype.kc.call(this,a),this.Ic(a)},$getSize:function(a,b){a=a||0,b=b||0;var c=this.Cc*(this.q.length-this.qc-1);if(this.Gc||this.Wx()){var d=this.s.Ob;d&&(a+=(d.left?0:1)+(d.right?0:1),b+=(d.top?0:1)+(d.bottom?0:1))}return this.s.height||(b+=2*(this.Ec||0)+(this.mc?c:0)),this.s.width||(a+=2*(this.Dc||0)+(this.mc?0:c)),webix.ui.baselayout.prototype.$getSize.call(this,a,b)},$setSize:function(a,b){this.lc=[a,b];var c;c=this.Wx()||this.Gc?webix.ui.view.prototype.$setSize.call(this,a,b):webix.ui.baseview.prototype.$setSize.call(this,a,b),b=this.dc,a=this.bc;var d=this.s;d.scroll&&(b=Math.max(b,this.ng[1]),a=Math.max(a,this.ng[0])),this.rc(a,b)},rc:function(a,b){var c=this.Cc*(this.q.length-this.qc-1);return this.mc?(b-=c+2*this.Ec,a-=2*this.Dc):(a-=c+2*this.Dc,b-=2*this.Ec),webix.ui.baselayout.prototype.rc.call(this,a,b)},resizeChildren:function(a){if(a){this.ac=null;for(var b=[],c=0;c<this.q.length;c++){var d=this.q[c];b[c]=d.s;var e=d.lc&&!d.Gc||d.s.borderless?"0px":"1px";d.x.style.borderTopWidth=d.x.style.borderBottomWidth=d.x.style.borderLeftWidth=d.x.style.borderRightWidth=e}this.Hc(b);for(var c=0;c<b.length;c++)b[c].borderless&&this.q[c].hc&&this.q[c].hc(b[c]);this.Ic(this.q)}webix.ui.baselayout.prototype.resizeChildren.call(this)},Wx:function(){return this.Fc&&this.Cc>0&&!this.Xx},Hc:function(a){if(!this.Wx()||this.s.borderless&&"space"!=this.s.type){for(var b=0;b<a.length;b++)a[b].Ob=webix.clone(this.s.Ob);var c=!1;this.Xx&&(c=!0);var d=a.length;if(this.mc){for(var b=1;d-1>b;b++)a[b].Ob.top=a[b].Ob.bottom=c;if(d>1){for("head"!=this.s.type&&(a[0].Ob.bottom=c);a[d-1].hidden&&d>1;)d--;d>0&&(a[d-1].Ob.top=c)}}else{for(var b=1;d-1>b;b++)a[b].Ob.left=a[b].Ob.right=c;if(d>1){for("head"!=this.s.type&&(a[0].Ob.right=c),a[d-1].Ob.left=c;d>1&&a[d-1].hidden;)d--;d>0&&(a[d-1].Ob.left=c)}}}else for(var b=0;b<a.length;b++)a[b].Ob&&a[b].borderless||(a[b].Ob={top:!1,left:!1,right:!1,bottom:!1})},Jc:function(a,b){b.top&&(a.borderTopWidth="0px"),b.left&&(a.borderLeftWidth="0px"),b.right&&(a.borderRightWidth="0px"),b.bottom&&(a.borderBottomWidth="0px")},Ic:function(a){for(var b=0,c=0;c<a.length;c++){var d=this.q[c],e=d.s.Ob;if(d.s.hidden&&this.q[c+1]){var f=this.q[c+1].s.Ob;e.top||(f.top=!1),e.left||(f.left=!1),c==b&&b++}this.Jc(d.x.style,d.s.Ob)}for(var g=this.mc?"marginLeft":"marginTop",h=this.mc?"marginTop":"marginLeft",i=this.mc?this.Dc:this.Ec,j=this.mc?this.Ec:this.Dc,c=0;c<a.length;c++)this.q[c].x.style[g]=(i||0)+"px";this.q.length&&(this.q[b].x.style[h]=(j||0)+"px");for(var k=b+1;k<a.length;k++)this.q[k].x.style[h]=this.Cc+"px"},type_setter:function(a){return this.Cc="undefined"!=typeof this.Kc[a]?this.Kc[a]:this.Kc.line,this.Dc=this.Ec="undefined"!=typeof this.Kc[a]?this.Lc[a]:this.Lc.line,this.Xx="material"==a||"clean"==a,"material"==a&&(this.s.borderless=!0),a},$skin:function(){var a=webix.skin.$active;this.Kc=a.layoutMargin,this.Lc=a.layoutPadding}},webix.ui.baselayout),webix.ui.layout.call(webix),webix.animate=function(a,b){var c=b;if(webix.isArray(a))for(var d=0;d<a.length;d++){if(webix.isArray(b)&&(c=b[d]),"slide"==c.type){if("out"==c.subtype&&0===d)continue;if("in"==c.subtype&&1==d)continue}if("flip"!=c.type)webix.animate(a[d],c);else{var e=webix.clone(c);0===d&&(e.type="flipback"),1==d&&(e.callback=null),webix.animate(a[d],e)}}else{var f=webix.toNode(a);f.Mc?webix.animate.end(f,c):webix.animate.start(f,c)}},webix.animate.end=function(a,b){
a.style[webix.env.transitionDuration]="1ms",a.Mc=null,webix.Nc&&window.clearTimeout(webix.Nc),webix.Nc=webix.delay(webix.animate,webix,[a,b],10)},webix.animate.isSupported=function(){return!webix.$testmode&&!webix.noanimate&&webix.env.transform&&webix.env.transition&&!webix.env.isOpera},webix.animate.formLine=function(a,b,c){var d=c.direction;b.parentNode.style.position="relative",b.style.position="absolute",a.style.position="absolute";var e=webix.env.isFF?"top"==d||"left"==d?-1:1:0;return"top"==d||"bottom"==d?(a.style.left="0px",a.style.top=(c.top||e)+("top"==d?1:-1)*b.offsetHeight+"px"):(a.style.top=(c.top||0)+"px",a.style.left=e+("left"==d?1:-1)*b.offsetWidth+"px"),b.parentNode==a.parentNode&&c.keepViews?a.style.display="":webix.html.insertBefore(a,b.nextSibling,b.parentNode),"slide"==c.type&&"out"==c.subtype&&(a.style.left="0px",a.style.top=(c.top||0)+"px",b.parentNode.removeChild(b),webix.html.insertBefore(b,a.nextSibling,a.parentNode)),[a,b]},webix.animate.breakLine=function(a){arguments[1]?a[1].style.display="none":webix.html.remove(a[1]),webix.animate.clear(a[0]),webix.animate.clear(a[1]),a[0].style.position=""},webix.animate.clear=function(a){a.style[webix.env.transform]="none",a.style[webix.env.transition]="none",a.style.top=a.style.left=""},webix.animate.defaults={type:"slide",delay:"0",duration:"500",timing:"ease-in-out",x:0,y:0},webix.animate.start=function(a,b){"string"==typeof b&&(b={type:b}),b=webix.Settings.E(b,webix.animate.defaults);var c,d,e=webix.env.cssPrefix,f=a.Mc=b;switch("slide"==f.type&&f.direction){case"right":f.x=a.offsetWidth;break;case"left":f.x=-a.offsetWidth;break;case"top":f.y=-a.offsetHeight;break;case"bottom":default:f.y=f.y||a.offsetHeight}("flip"==f.type||"flipback"==f.type)&&(c=[0,0],d="scaleX","vertical"==f.subtype?(c[0]=20,d="scaleY"):c[1]=20,("right"==f.direction||"bottom"==f.direction)&&(c[0]*=-1,c[1]*=-1));var g=f.duration+"ms "+f.timing+" "+f.delay+"ms",h=e+"TransformStyle: preserve-3d;",i="",j="";switch(f.type){case"fade":i="opacity "+g,h="opacity: 0;";break;case"show":i="opacity "+g,h="opacity: 1;";break;case"flip":g=f.duration/2+"ms "+f.timing+" "+f.delay+"ms",j="skew("+c[0]+"deg, "+c[1]+"deg) "+d+"(0.00001)",i="all "+g;break;case"flipback":f.delay+=f.duration/2,g=f.duration/2+"ms "+f.timing+" "+f.delay+"ms",a.style[webix.env.transform]="skew("+-1*c[0]+"deg, "+-1*c[1]+"deg) "+d+"(0.00001)",a.style.left="0",j="skew(0deg, 0deg) "+d+"(1)",i="all "+g;break;case"slide":var k=f.x+"px",l=f.y+"px";j=webix.env.translate+"("+k+", "+l+("translate3d"==webix.env.translate?", 0":"")+")",i=e+"transform "+g}webix.delay(function(){a.style[webix.env.transition]=i,webix.delay(function(){h&&(a.style.cssText+=h),j&&(a.style[webix.env.transform]=j);var b=!1,c=webix.event(a,webix.env.transitionEnd,function(d){a.Mc=null,f.callback&&f.callback.call(f.master||window,a,f,d),b=!0,webix.eventRemove(c)});window.setTimeout(function(){b||(a.Mc=null,f.callback&&f.callback.call(f.master||window,a,f),b=!0,webix.eventRemove(c))},1.3*(1*f.duration+1*f.delay))})})},webix.MouseEvents={$init:function(a){a=a||{},this.Oc=0,this.Pc=300,this.Qc=null,this.Rc(a.onClick,"on_click"),this.Rc(a.onContext,"on_context"),this.Rc(a.onDblClick,"on_dblclick"),this.Rc(a.onMouseMove,"on_mouse_move"),this.on_click&&(webix.event(this.w,"click",this.Sc,{bind:this}),webix.env.isIE8&&this.on_dblclick&&webix.event(this.w,"dblclick",this.Tc,{bind:this})),this.on_context&&webix.event(this.w,"contextmenu",this.Uc,{bind:this}),this.on_mouse_move&&this.Vc()},Vc:function(){this.Wc||(this.on_mouse_move=this.on_mouse_move||{},webix.event(this.w,"mousemove",this.Xc,{bind:this}),webix.event(this.w,webix.env.isIE?"mouseleave":"mouseout",this.Xc,{bind:this}),this.Wc=1)},Rc:function(a,b){if(a){var c=this[b],d=c?webix.extend({},c):{};this[b]=webix.extend(d,a)}},Sc:function(a){if(!this.isEnabled())return!1;if(webix.UIManager.sb(this),this.on_dblclick){var b=(new Date).valueOf();if(b-this.Oc<=this.Pc&&this.locate){var c=this.locate(a);if(""+c==""+this.Qc)return this.Oc=0,this.Tc(a)}this.Oc=b}var d=this.Yc(a,this.on_click,"ItemClick");return d},Tc:function(a){return this.Yc(a,this.on_dblclick,"ItemDblClick")},Uc:function(a){this.Yc(a,this.on_context,"BeforeContextMenu","AfterContextMenu")},Xc:function(a){if(document.createEventObject)a=document.createEventObject(event);else if(!(webix.$testmode||webix.isUndefined(a.movementY)||a.movementY||a.movementX))return;this.Zc&&window.clearTimeout(this.Zc),this.callEvent("onMouseMoving",[a]),this.Zc=window.setTimeout(webix.bind(function(){"mousemove"==a.type?this.$c(a):this._c(a)},this),this.s.mouseEventDelay||500)},$c:function(a){this.Yc(a,this.on_mouse_move,"MouseMove")||this.callEvent("onMouseOut",[a||event])},_c:function(a){this.callEvent("onMouseOut",[a||event])},Yc:function(a,b,c,d){if(a=a||event,!a.processed&&this.x){a.processed=!0;var e=a.target||a.srcElement;if(webix.env.isIE8){var f=this.s.id,g=e.w_view;if(g){if(g!==f)return}else e.w_view=f}for(var h="",i=null,j=!1;e&&e.parentNode&&e!=this.x.parentNode;){if(!j&&e.getAttribute&&(i=e.getAttribute(this.ad))){if(this.Qc=i,this.callEvent){if(!this.callEvent("on"+c,[i,a,e]))return;d&&this.callEvent("on"+d,[i,a,e])}j=!0}if(h=webix.html.TC(e)){h=h.toString().split(" ");for(var k=0;k<h.length;k++)if(b[h[k]]){var l=webix.toFunctor(b[h[k]],this.$scope),m=l.call(this,a,i||webix.html.locate(a,this.ad),e);if(m===!1)return j}}e=e.parentNode}return j}}},webix.protoUI({name:"accordionitem",$init:function(a){this.x.innerHTML="<div webix_ai_id='"+a.id+"'  class='webix_accordionitem_header'><div class='webix_accordionitem_button' ></div><div class='webix_accordionitem_label' ></div></div><div class='webix_accordionitem_body'></div>",this.w=this.x,this.bd=this.w.childNodes[0],a.header||(this.bd.style.display="none"),this.cd=this.w.childNodes[0].childNodes[1],this.dd=this.w.childNodes[0].childNodes[0],this.ed=this.w.childNodes[1],this.x.className+=" webix_accordionitem",this.fd=this.gd=null,this.q=!0},Rb:function(){this.gd={destructor:function(){}}},Qb:function(a){this.gd.destructor(),this.gd=a,this.gd.Xb=this,this.ed.appendChild(this.gd.x),this.resize()},ad:"webix_ai_id",getChildViews:function(){return[this.gd]},body_setter:function(a){return"object"!=typeof a&&(a={template:a}),a.Ob={top:!0,left:!0,right:!0,bottom:!0},this.gd=webix.ui.A(a),this.gd.$view.style.border="0px solid red",this.gd.Xb=this,this.ed.appendChild(this.gd.x),a},header_setter:function(a){return a&&(a=webix.template(a)),a},headerAlt_setter:function(a){return a&&(a=webix.template(a)),a},$getSize:function(a,b){var c=this.gd.$getSize(0,0),d=this.s.Ob;d&&(a+=(d.left?0:1)+(d.right?0:1),b+=(d.top?0:1)+(d.bottom?0:1));var e=0,f=webix.ui.baseview.prototype.$getSize.call(this,0,0);f[0]=(f[0]||c[0])+a,f[1]>=1e5&&(f[1]=c[1]),f[1]+=a,f[2]=(f[2]||c[2])+b;var g=f[3]<1e5;return g||(f[3]=c[3]),f[3]+=b,this.getParentView().mc?this.s.collapsed?f[2]=f[3]=this.hd():this.s.header&&(e=this.s.headerHeight):(this.s.collapsed&&(f[0]=f[1]=this.hd()),this.s.header&&(e=this.s.headerHeight)),g||(f[2]+=e,f[3]+=e),f},on_click:{webix_accordionitem_header:function(a,b){return this.id(a),!1},webix_accordionitem_header_v:function(a,b){return this.id(a),!1}},id:function(a){this.define("collapsed",!this.s.collapsed)},collapsed_setter:function(a){if(this.s.header!==!1){var b=this.getParentView();if(b){if(a)if(b.jd(this))this.kd();else{var c=0;if(b.q.length>1)for(var d=0;d<b.q.length;d++){var e=b.q[d];if(this!=e&&e.isVisible()){e.expand(),this.kd(),c=1;break}}if(!c)return}else this.ld();this.s.collapsed=a,a||b.md(this),this.refresh(),webix.Nb||this.resize(),b.callEvent("onAfter"+(a?"Collapse":"Expand"),[this.s.id]),this.s.$noresize=a}return a}},collapse:function(){this.define("collapsed",!0),webix.UIManager.vb(this)},expand:function(){this.define("collapsed",!1)},fc:function(){this.show()},Fb:function(){this.hide()},ld:function(){this.ed.style.display="",webix.html.removeCss(this.$view,"collapsed"),webix.html.removeCss(this.bd,"collapsed")},kd:function(){this.getParentView().mc,this.s.headerAlt&&(this.cd.innerHTML=this.s.headerAlt()),this.ed.style.display="none",webix.html.addCss(this.$view,"collapsed"),webix.html.addCss(this.bd,"collapsed")},refresh:function(){var a=this.s[this.s.collapsed?"headerAlt":"header"]||this.s.header;a&&(this.cd.innerHTML=a());var b=this.getParentView().mc?"vertical":"horizontal";this.x.className.indexOf(" "+b)<0&&webix.html.addCss(this.x,b),webix.env.transform||webix.html.addCss(this.x,"webix_ie",!0)},hd:function(){return this.s.collapsed?this.s.headerAltHeight:this.s.headerHeight},$setSize:function(a,b){if(webix.ui.view.prototype.$setSize.call(this,a,b)||this.hd()!=this.CA){a=this.bc,b=this.dc;var c=this.CA=this.hd();if(this.s.header)if(this.bd.style.height=c+"px",this.bd.style.width="auto",this.bd.style[webix.env.transform]="",this.bd.style.borderBottomWidth=(this.s.collapsed?0:1)+"px",this.getParentView().mc||!this.s.collapsed)b-=this.hd();else if(this.s.collapsed)if(webix.animate.isSupported()){this.bd.style.width=b+"px",this.bd.style.height=a+3+"px";var d=Math.floor(b/2-a/2)+(a-this.s.headerAltHeight)/2;this.bd.style[webix.env.transform]="rotate(90deg) translate("+d+"px, "+(d+1)+"px)"}else this.bd.style.width=a+"px",this.bd.style.height=b+3+"px";this.s.collapsed||(this.gd.$setSize(a,b),this.ct=b)}else if(!this.s.collapsed){var e=this.gd;this.ct&&e.$setSize(this.bc,this.ct)}},$skin:function(){var a=this.defaults;a.headerAltHeight=a.headerHeight=webix.skin.$active.barHeight,webix.skin.$active.borderlessAccordion&&(a.borderless=!0)},defaults:{header:!1,headerAlt:!1,body:""}},webix.MouseEvents,webix.EventSystem,webix.ui.view),webix.protoUI({name:"accordion",defaults:{panelClass:"accordionitem",multi:!1,collapsed:!1},addView:function(a){var b=webix.ui.layout.prototype.addView.apply(this,arguments),c=webix.$$(b);return c.collapsed_setter&&c.refresh&&c.refresh(),b},kc:function(){for(var a=this.s.panelClass,b=this.nc,c=0;c<b.length;c++)!b[c].body&&!b[c].header||b[c].view||(b[c].view=a),webix.isUndefined(b[c].collapsed)&&(b[c].collapsed=this.s.collapsed);this.nd=!0,webix.ui.layout.prototype.kc.call(this),this.nd=!1;for(var c=0;c<this.q.length;c++)this.q[c].name==a&&this.q[c].refresh(),this.q[c].od=!1;for(var d=!1,c=this.q.length-1;c>=0&&!d;c--)this.q[c].s.hidden||(this.q[c].od=!0,d=!0)},md:function(a){if(this.s.multi===!1&&this.nd!==!0)for(var b=0;b<this.q.length;b++)a!=this.q[b]&&!this.q[b].s.collapsed&&this.q[b].collapse&&this.q[b].collapse()},jd:function(a){if(this.s.multi===!0||this.nd)return!0;for(var b=0;b<this.q.length;b++)if(a!=this.q[b]&&!this.q[b].s.collapsed&&this.q[b].isVisible())return!0;return!1},$skin:function(){var a=this.defaults;webix.skin.$active.accordionType&&(a.type=webix.skin.$active.accordionType)}},webix.ui.layout),webix.protoUI({name:"headerlayout",defaults:{type:"accordion",multi:"mixed",collapsed:!1}},webix.ui.accordion),webix.DragControl={pd:webix.toArray(["dummy"]),addDrop:function(a,b,c){a=webix.toNode(a),a.webix_drop=this.qd(b),c&&(a.webix_master=!0)},qd:function(a){a=a||webix.DragControl;var b=this.pd.find(a);return 0>b&&(b=this.pd.length,this.pd.push(a)),b},UB:function(a){var b=webix.DragControl,c=this.VB();if(c&&c.WB){b.v||b.createDrag(a);var d=b.Gd;b.v.style.left=a.x+b.left+(d.x_offset||0)+"px",b.v.style.top=a.y+b.top+(d.y_offset||0)+"px"}},addDrag:function(a,b){a=webix.toNode(a),a.webix_drag=this.qd(b),webix.event(a,webix.env.mouse.down,this.rd,{bind:a}),webix.event(a,"dragstart",webix.html.preventEvent)},rd:function(a){if(webix.DragControl.sd){if(webix.DragControl.td==a)return;webix.DragControl.ud(),webix.DragControl.destroyDrag(a)}webix.DragControl.sd=this;var b=webix.env.mouse.context(a);webix.DragControl.vd=b,webix.DragControl.td=a,webix.DragControl.wd=webix.event(document.body,webix.env.mouse.move,webix.DragControl.xd),webix.DragControl.yd=webix.event(document.body,webix.env.mouse.up,webix.DragControl.ud),webix.html.addCss(document.body,"webix_noselect",1)},ud:function(){webix.DragControl.zd()},xd:function(a){var b=webix.env.mouse.context(a),c=webix.DragControl.VB(),d=c&&webix.env.touch&&c.WB&&!webix.Touch.qm;return d||Math.abs(b.x-webix.DragControl.vd.x)<5&&Math.abs(b.y-webix.DragControl.vd.y)<5||(webix.DragControl.zd(!0),!webix.DragControl.v&&!webix.DragControl.createDrag(webix.DragControl.td))?void 0:(webix.DragControl.sendSignal("start"),webix.DragControl.wd=webix.event(document.body,webix.env.mouse.move,webix.DragControl.Ad),webix.DragControl.yd=webix.event(document.body,webix.env.mouse.up,webix.DragControl.Bd),webix.DragControl.Ad(a),webix.env.touch?webix.html.preventEvent(a):void 0)},Bd:function(a){webix.DragControl.zd(),webix.DragControl.td=null,webix.DragControl.Cd&&(webix.DragControl.$drop(webix.DragControl.sd,webix.DragControl.Cd,a),webix.DragControl.$dragOut(webix.DragControl.sd,webix.DragControl.Cd,null,a)),webix.DragControl.destroyDrag(a),webix.DragControl.sendSignal("stop")},zd:function(a){this.wd=webix.eventRemove(this.wd),this.yd=webix.eventRemove(this.yd),a||webix.html.removeCss(document.body,"webix_noselect")},Ad:function(a){var b=webix.DragControl,c=webix.html.pos(a),d=webix.env.mouse.context(a),e=b.$dragPos(c,a),f=b.Gd;if(b.v.style.top=c.y+b.top+(e||!f.y_offset?0:f.y_offset)+"px",b.v.style.left=c.x+b.left+(e||!f.x_offset?0:f.x_offset)+"px",b.Ed)b.Ed=!1;else{var g=d.target=webix.env.touch?document.elementFromPoint(d.x,d.y):d.target,h=webix.env.touch?d:a;b.Fd(g,h)}return webix.html.preventEvent(a)},Fd:function(a,b){for(;a&&"BODY"!=a.tagName;){if(a.webix_drop){if(this.Cd&&(this.Cd!=a||a.webix_master)&&this.$dragOut(this.sd,this.Cd,a,b),!this.Cd||this.Cd!=a||a.webix_master)return this.Cd=null,this.Dd=this.$dragIn(webix.DragControl.sd,a,b),void(this.Dd&&(this.Cd=a));return}a=a.parentNode}this.Cd&&(this.Cd=this.Dd=this.$dragOut(this.sd,this.Cd,null,b))},sendSignal:function(a){webix.DragControl.active="start"==a},getMaster:function(a){return this.pd[a.webix_drag||a.webix_drop]},getContext:function(){return this.Gd},getNode:function(){return this.v},createDrag:function(a){var b=webix.DragControl,c=b.sd;b.Gd={};var d,e=this.pd[c.webix_drag];if(e.$dragCreate){if(d=e.$dragCreate(c,a),!d)return!1;this.ZB(a),d.style.position="absolute"}else{var f=b.$drag(c,a);if(b.ZB(a),!f)return!1;d=document.createElement("DIV"),d.innerHTML=f,d.className="webix_drag_zone",document.body.appendChild(d);var g=b.Gd;g.html&&webix.env.pointerevents&&(g.x_offset=-Math.round(.5*d.offsetWidth),g.y_offset=-Math.round(.75*d.offsetHeight))}return d.style.zIndex=Math.max(d.style.zIndex,webix.ui.zIndex()),webix.DragControl.Hd=webix.event(d,webix.env.mouse.move,webix.DragControl.Id),webix.DragControl.Gd.from||(webix.DragControl.Gd={source:c,from:c}),webix.DragControl.v=d,!0},Id:function(){webix.DragControl.Ed=!0},destroyDrag:function(a){var b=webix.DragControl.sd,c=this.pd[b.webix_drag];c&&c.$dragDestroy?(webix.DragControl.Hd=webix.eventRemove(webix.DragControl.Hd),webix.DragControl.v&&c.$dragDestroy(b,webix.DragControl.v,a)):webix.html.remove(webix.DragControl.v),webix.DragControl.Dd=webix.DragControl.sd=webix.DragControl.Cd=webix.DragControl.v=null},VB:function(){return webix.DragControl.pd[webix.DragControl.sd.webix_drag]},top:5,left:5,ZB:function(a){var b=webix.DragControl,c=b.vd,d=b.Gd;if("undefined"!=typeof d.x_offset&&"undefined"!=typeof d.y_offset)return null;if(d.x_offset=d.y_offset=0,webix.env.pointerevents){var e=webix.DragControl.VB();if(e.WB&&e!==this){var f=e.WB(c,a);f&&(d.x_offset=f.x-c.x,d.y_offset=f.y-c.y)}}},$dragPos:function(a,b){var c=this.pd[webix.DragControl.sd.webix_drag];return c.$dragPos&&c!=this?(c.$dragPos(a,b,webix.DragControl.v),!0):void 0},$dragIn:function(a,b,c){var d=this.pd[b.webix_drop];return d.$dragIn&&d!=this?d.$dragIn(a,b,c):(b.className=b.className+" webix_drop_zone",b)},$dragOut:function(a,b,c,d){var e=this.pd[b.webix_drop];return e.$dragOut&&e!=this?e.$dragOut(a,b,c,d):(b.className=b.className.replace("webix_drop_zone",""),null)},$drop:function(a,b,c){var d=this.pd[b.webix_drop];return webix.DragControl.Gd.from=webix.DragControl.getMaster(a),d.$drop&&d!=this?d.$drop(a,b,c):void b.appendChild(a)},$drag:function(a,b){var c=this.pd[a.webix_drag];return c.$drag&&c!=this?c.$drag(a,b):"<div style='"+a.style.cssText+"'>"+a.innerHTML+"</div>"}},webix.attachEvent("onLongTouch",function(a){webix.DragControl.sd&&webix.DragControl.UB(a)}),webix.DataMove={copy:function(a,b,c,d){d=d||{};var e=d.newId||a;c=c||this;var f=this.getItem(a);return c&&(f=c.Jd(f)),c.data.add(c.Jd(f,e),b,d.parent||0)},Kd:function(a,b,c){if(b&&a){var d=this.getIndexById(a);return d+(c==this&&c.getIndexById(b)<d?0:1)}},move:function(a,b,c,d){d=d||{};var e=d.newId||a;if(c=c||this,c.data){if(webix.isArray(a)){a.length>3&&(this.$blockRender=c.$blockRender=!0);for(var f=0;f<a.length;f++){var g=this.move(a[f],b,c,d);b=c.Kd(g,a[f+1],this)}return this.$blockRender=c.$blockRender=!1,void(a.length>3&&(this.refresh(),c!=this&&c.refresh()))}var g=a,h=this.getItem(a);return c&&c!=this?(g=c.data.add(c.Jd(h,e),b,d.parent||0),this.data.remove(a)):(0>b&&(b=this.data.order.length-1),this.data.move(this.getIndexById(a),b),this.data.callEvent("onDataMove",[a,b,null,this.data.order[b+1]])),g}},moveUp:function(a,b){return this.move(a,this.getIndexById(a)-(b||1))},moveDown:function(a,b){return this.moveUp(a,-1*(b||1))},moveTop:function(a){return this.move(a,0)},moveBottom:function(a){return this.move(a,this.data.count()-1)},Jd:function(a,b){var c=webix.extend({},a);return c.id=!b||this.data.pull[b]?webix.uid():b,c.$template=null,this.s.externalData&&(c=this.s.externalData.call(this,c,b)),c}},webix.Movable={move_setter:function(a){return a&&(this.Ld=webix.clone(this.Ld),this.Ld.master=this,webix.DragControl.addDrag(this.bd,this.Ld)),a},Ld:{$dragCreate:function(a,b){if(this.master.config.move){var c=webix.html.offset(a),d=webix.html.pos(b);return webix.DragControl.top=c.y-d.y,webix.DragControl.left=c.x-d.x,webix.toNode(this.master.x)}},$dragDestroy:function(a,b){var c=this.master;c.s&&(c.s.top=parseInt(b.style.top,10),c.s.left=parseInt(b.style.left,10)),webix.DragControl.top=webix.DragControl.left=5,this.master.callEvent("onViewMoveEnd",[])},$dragPos:function(a,b){this.master.callEvent("onViewMove",[a,b])}}},webix.Modality={Md:function(a){if(a){if(!this.Nd){this.Nd=webix.html.create("div",{"class":"webix_modal"});var b=this.s.zIndex||webix.ui.zIndex();this.Od=webix.Pd,webix.Pd=b,this.Nd.style.zIndex=b-1,this.x.style.zIndex=b,document.body.appendChild(this.Nd),webix.event(this.Nd,"click",webix.bind(this.Vw,this))}}else if(this.Nd){webix.html.remove(this.Nd);var c=this.Od;setTimeout(function(){webix.Pd=c},1),this.Nd=null}return a}},webix.protoUI({name:"window",$init:function(a){this.x.innerHTML="<div class='webix_win_content'><div class='webix_win_head'></div><div class='webix_win_body'></div></div>",this.w=this.x.firstChild,this.bd=this.w.childNodes[0],this.y=this.ed=this.w.childNodes[1],this.x.className+=" webix_window",this.fd=this.gd=null,this.s.Ob={top:!1,left:!1,right:!1,bottom:!1},a.id||(a.id=webix.uid()),webix.event(this.w,"click",webix.bind(this.Vw,this)),this.w.addEventListener&&webix.event(this.w,"click",function(){!this.s.zIndex&&this.s.toFront&&(this.x.style.zIndex=webix.ui.zIndex())},{bind:this,capture:!0}),a.modal&&(this.my=!0)},Vw:function(a){var b=webix.ui.et,c=b.find(this);-1==c&&(c=b.length-1),a.click_view=c,webix.env.isIE8&&(a.srcElement.click_view=c)},getChildViews:function(){return this.fd?[this.fd,this.gd]:[this.gd]},zIndex_setter:function(a){return this.x.style.zIndex=a,a},Rb:function(){this.gd={destructor:function(){}}},Qb:function(a){this.gd.destructor(),this.gd=a,this.gd.Xb=this,this.ed.appendChild(this.gd.x);var b=this.gd.x.style;b.borderTopWidth=b.borderBottomWidth=b.borderLeftWidth=b.borderRightWidth="1px",this.gd.s.Ob=webix.clone(this.s.Ob),this.resize(!0)},show:function(a,b,c){if(!this.callEvent("onBeforeShow",arguments))return!1;this.s.hidden=!1,this.x.style.zIndex=this.s.zIndex||webix.ui.zIndex(),(this.s.modal||this.my)&&(this.Md(!0),this.my=null);var d,e,f;if(b=b||{},b.pos||(b.pos=this.s.relative),a){"object"!=typeof a||a.tagName?(a=webix.toNode(a),d=webix.html.offset(a)):a.target||a.srcElement?(d=webix.html.pos(a),e=20,f=5):d=a;var g=Math.max(window.innerWidth||0,document.body.offsetWidth),h=Math.max(window.innerHeight||0,document.body.offsetHeight);e=e||a.offsetWidth||0,f=f||a.offsetHeight||0;var i=this.ac,j=d.x,k=d.y,l=0,m=0;if(this.s.autofit){var n=6,o=6,p=6;c="top",k=0,j=0,g-d.x-e<i[0]&&"right"==b.pos&&(b.pos="left"),"right"==b.pos?(j=d.x+n+e,o=-f,c="left",l=Math.round(d.y+f/2),m=j-p):"left"==b.pos?(j=d.x-n-i[0]-1,o=-f,c="right",l=Math.round(d.y+f/2),m=j+i[0]+1):(j=d.x<0?0:g-d.x>i[0]?d.x:g-n-i[0],m=Math.round(d.x+e/2),m>j+i[0]&&(m=j+i[0]/2));var q=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;(!i[1]||h+q-f-d.y-o>i[1])&&"top"!=b.pos?(k=f+d.y+o-4,l||(c="top",l=k-p)):(k=d.y-o-i[1],0>k?(k=0,"top"==c&&(c=!1)):l||(c="bottom",k--,l=k+i[1]+1))}var r=b.x||0,s=b.y||0;this.setPosition(j+r,k+s),this.Rd&&(c?this.Rd(c,m+r,l+s):this.Sd())}else this.s.position&&this.Td();this.x.style.display="block",this.Ww=1,webix.delay(function(){this.Ww=0},this,[],webix.env.touch?400:100),this.Qd(),this.config.autofocus&&(this.Vd=webix.UIManager.getFocus(),webix.UIManager.setFocus(this)),-1==webix.ui.et.find(this)&&webix.ui.et.push(this),this.callEvent("onShow",[])},Fb:function(a){if(!(this.s.hidden||this.s.modal||this.Ww||a&&a.showpopup||webix.Pd&&this.s.zIndex<=webix.Pd)){if(a){var b=webix.env.isIE8?a.srcElement.click_view:a.click_view;b||0===b||(b=-1);var c=webix.ui.et.find(this);if(b>=c)return}this.hide()}},hidden_setter:function(a){return a?this.hide():this.show(),!!a},hide:function(a){if(!this.$destructed&&(a||!this.s.hidden)){if(this.s.modal&&this.Md(!1),"top"==this.s.position?webix.animate(this.x,{type:"slide",x:0,y:-(this.dc+20),duration:300,callback:this.Wd,bind:this}):this.Wd(),this.s.autofocus){var b=document.activeElement;b&&this.x&&(this.x.contains(b)||b===document.body)&&(webix.UIManager.setFocus(this.Vd),this.Vd=null)}this.ny()}},ny:function(){var a=webix.ui.et,b=a.find(this),c=a.length-1;if(b>-1)for(var d=c;d>b;d--)a[d].Sd&&a[d].hide();a.removeAt(b)},destructor:function(){this.Md(!1),webix.html.remove(this.x),this.s.autofocus&&(webix.B||webix.UIManager.setFocus(this.Vd),this.Vd=null),this.ny(),this.Sd&&this.Sd(),webix.Destruction.destructor.apply(this,[])},Wd:function(){this.$destructed||(this.x.style.display="none",this.s.hidden=!0,this.callEvent("onHide",[]))},close:function(){this.destructor()},Xd:function(a){a.borderless=!0},body_setter:function(a){return"object"!=typeof a&&(a={template:a}),this.Xd(a),webix.Xb=this,this.gd=webix.ui.A(a),this.gd.Xb=this,this.ed.appendChild(this.gd.x),a},head_setter:function(a){return a===!1?a:("object"!=typeof a&&(a={template:a,padding:0}),a.borderless=!0,webix.Xb=this,this.fd=webix.ui.A(a),this.fd.Xb=this,this.bd.appendChild(this.fd.x),a)},getBody:function(){return this.gd},getHead:function(){return this.fd},adjust:function(){return this.resize()},resizeChildren:function(){this.gd&&this.resize()},resize:function(){webix.ui.baseview.prototype.adjust.call(this),this.Td(this.s.left,this.s.top)},Td:function(a,b){if(this.s.position){this.$view.style.position="fixed";var c=this.bc,d=this.dc,e=window.innerWidth||document.documentElement.offsetWidth,f=window.innerHeight||document.documentElement.offsetHeight,g=Math.round((e-c)/2),h=Math.round((f-d)/2);if("function"==typeof this.s.position){var i={left:g,top:h,width:c,height:d,maxWidth:e,maxHeight:f};this.s.position.call(this,i),(i.width!=c||i.height!=d)&&this.$setSize(i.width,i.height),this.setPosition(i.left,i.top)}else"top"==this.s.position&&(h=webix.animate.isSupported()?-1*d:10),this.setPosition(g,h);"top"==this.s.position&&webix.animate(this.x,{type:"slide",x:0,y:d-2*(this.s.padding||0),duration:300,callback:this.Yd,bind:this})}else this.setPosition(a,b)},Yd:function(a){webix.animate.clear(a),this.s.top=-(2*(this.s.padding||0)),this.setPosition(this.s.left,this.s.top)},setPosition:function(a,b){this.x.style.top=b+"px",this.x.style.left=a+"px",this.s.left=a,this.s.top=b},$getSize:function(a,b){var c=this.s.Ob;c&&(a+=(c.left?0:1)+(c.right?0:1),b+=(c.top?0:1)+(c.bottom?0:1)),this.s.head&&(b+=1);var d=this.gd.$getSize(0,0);if(this.fd){var e=this.fd.$getSize(0,0);e[3]==e[2]&&(this.s.headHeight=e[3]),b+=this.s.headHeight}if(this.s.fullscreen){var f=window.innerWidth||document.body.clientWidth,g=window.innerHeight||document.body.clientHeight;return[f,f,g,g]}var h=webix.ui.view.prototype.$getSize.call(this,0,0);return h[1]=Math.min(h[1],(d[1]>=1e5&&h[1]>=1e5?Math.max(d[0],300):d[1])+a),h[3]=Math.min(h[3],(d[3]>=1e5&&h[3]>=1e5?Math.max(d[2],200):d[3])+b),h[0]=Math.min(Math.max(h[0],d[0]+a),h[1]),h[2]=Math.min(Math.max(h[2],d[2]+b),h[3]),h},$setSize:function(a,b){webix.ui.view.prototype.$setSize.call(this,a,b),a=this.bc,b=this.dc,this.s.head===!1?(this.bd.style.display="none",this.gd.$setSize(a,b)):(this.fd.$setSize(a,this.s.headHeight),this.gd.$setSize(a,b-this.s.headHeight))},$skin:function(){this.defaults.headHeight=webix.skin.$active.barHeight},defaults:{top:0,left:0,autofit:!0,relative:"bottom",body:"",head:"",hidden:!0,autofocus:!0}},webix.ui.view,webix.Movable,webix.Modality,webix.EventSystem),webix.protoUI({name:"popup",$init:function(){this.s.head=!1,this.$view.className+=" webix_popup",webix.attachEvent("onClick",webix.bind(this.Fb,this)),this.attachEvent("onHide",this.Sd)},close:function(){webix.html.remove(this.$d),webix.ui.window.prototype.close.call(this)},$getSize:function(a,b){return webix.ui.window.prototype.$getSize.call(this,a+2*this.s.padding,b+2*this.s.padding)},$setSize:function(a,b){webix.ui.view.prototype.$setSize.call(this,a,b),a=this.bc-2*this.s.padding,b=this.dc-2*this.s.padding,this.w.style.padding=this.s.padding+"px",this.bd.style.display="none",this.gd.$setSize(a,b)},Xd:function(){},defaults:{padding:8},head_setter:function(){},Rd:function(a,b,c){this.Sd(),document.body.appendChild(this.$d=webix.html.create("DIV",{"class":"webix_point_"+a},"")),this.$d.style.zIndex=webix.ui.zIndex(),this.$d.style.top=c+"px",this.$d.style.left=b+"px"},Sd:function(){this.$d=webix.html.remove(this.$d)}},webix.ui.window),webix.ui.et=webix.toArray(),webix.extend(webix.ui.window,{resize_setter:function(a){return a&&!this.Yz&&this.Zz(),a},Zz:function(){this.$z||(this.x.firstChild.style.position="relative",this.$z=webix.html.create("DIV",{"class":"webix_resize_handle"}),this.x.firstChild.appendChild(this.$z),webix.event(this.$z,webix.env.mouse.down,this._z,{bind:this}))},aA:function(a,b){if(!this.bA){this.bA=webix.html.create("div",{"class":"webix_resize_frame"},""),document.body.appendChild(this.bA);var c=webix.html.offset(this.x);this.bA.style.left=c.x+"px",this.bA.style.top=c.y+"px",this.bA.style.zIndex=webix.ui.zIndex()}this.bA.style.width=a+"px",this.bA.style.height=b+"px"},_z:function(a){this.config.resize&&(webix.html.addCss(document.body,"webix_noselect webix_resize_cursor"),this.cA=webix.html.offset(this.x),this.dA=webix.event(document.body,webix.env.mouse.move,this.eA,{bind:this}),this.fA=webix.event(document.body,webix.env.mouse.up,this.gA,{bind:this}))},eA:function(a){if(this.cA!==!1){var b=webix.html.pos(a),c={x:b.x-this.cA.x+10,y:b.y-this.cA.y+10};if(Math.abs(this.cA.x-b.x)<(this.config.minWidth||100)||Math.abs(this.cA.y-b.y)<(this.config.maxHeight||100))return;this.hA=c,this.aA(c.x,c.y)}},gA:function(){this.bA&&(this.bA=webix.html.remove(this.bA)),webix.html.removeCss(document.body,"webix_resize_cursor"),webix.html.removeCss(document.body,"webix_noselect"),webix.eventRemove(this.dA),webix.eventRemove(this.fA),this.hA&&(this.config.width=this.hA.x,this.config.height=this.hA.y,this.resize()),this.cA=this.hA=!1,this.callEvent("onViewResize",[])}}),webix.protoUI({name:"suggest",defaults:{autofocus:!1,type:"list",keyPressTimeout:1,body:{yCount:10,autoheight:!0,body:!0,select:!0,borderless:!0,navigation:!0},filter:function(a,b){return 0===a.value.toString().toLowerCase().indexOf(b.toLowerCase())}},template_setter:webix.template,filter_setter:function(a){return webix.toFunctor(a,this.$scope)},$init:function(a){var b={};webix.extend(b,webix.copy(this.defaults.body)),b.view=a.type||this.defaults.type;var c=this.Jt(b);a.body&&webix.extend(c,a.body,!0),a.data&&(c.data=a.data),a.url&&(c.url=a.url),a.datatype&&(c.datatype=a.datatype),a.id&&(b.id=b.id||a.id+"_"+b.view),a.body=b,this.$ready.push(this._d),this.attachEvent("onShow",this.ke),this.oy={}},Jt:function(a){return a},Rs:function(a){if(a){var b,c,d;this.s.master&&(b=webix.$$(this.s.master),b.options_setter&&(c=b.getInputNode())&&(d=this.getItemText(a.id),webix.isUndefined(c.value)?c.innerHTML=d:c.value=d.replace(/<[^>]*>/g,"")))}},setMasterValue:function(a,b){var c=a.id?this.getItemText(a.id):a.text||a.value;if(this.s.master){var d=webix.$$(this.s.master);b&&a.id?d.refresh():d.options_setter?d.setValue(a.$empty?"":a.id):d.setValueHere?d.setValueHere(c):d.setValue(c)}else this.ae&&(this.ae.value=c);b||(this.hide(!0),this.ae&&this.ae.focus()),this.callEvent("onValueSuggest",[a,c]),webix.delay(function(){webix.callEvent("onEditEnd",[])})},getMasterValue:function(){return this.s.master?webix.$$(this.s.master).getValue():null},getItemText:function(a){var b=this.getList().getItem(a);if(!b)return this.oy[a]||"";if(this.s.template)return this.s.template.call(this,b,this.type);if(this.s.textValue)return b[this.s.textValue];var c=this.getList().type,d=c.template.call(c,b,c);return this.oy[a]=d},getSuggestion:function(){var a,b=this.getList(),c=b.data.order;return b.getSelectedId&&(a=b.getSelectedId()),c.length&&(!a||c.find(a)<0)&&(a=c[0]),a&&"object"==typeof a&&(a+=""),a},getList:function(){return this.gd},_d:function(){var a=this.getList(),b=this.s.type;a.count?(a.attachEvent("onItemClick",webix.bind(function(b){this.setMasterValue(a.getItem(b))},this)),a.data.attachEvent("onstoreupdated",webix.bind(function(a,b,c){"delete"==c&&a==this.getMasterValue()?this.setMasterValue({id:"",text:""},1):"update"==c&&a==this.getMasterValue()&&this.setMasterValue(b,1)},this)),a.data.attachEvent("onAfterFilter",webix.bind(this.be,this)),a.data.attachEvent("onStoreLoad",webix.bind(this.be,this)),webix.isUndefined(this.s.fitMaster)&&(this.s.fitMaster=!0)):"calendar"==b?(a.attachEvent("onDateSelect",function(a){this.getParentView().setMasterValue({value:a})}),a.attachEvent("onTodaySet",function(a){this.getParentView().setMasterValue({value:a})}),a.attachEvent("onDateClear",function(a){this.getParentView().setMasterValue({value:a})})):"colorboard"==b&&a.attachEvent("onSelect",function(a){this.getParentView().setMasterValue({value:a})})},input_setter:function(a){return this.linkInput(a),0},linkInput:function(a){var b;a.getInputNode?(b=a.getInputNode(),b.webix_master_id=a.s.id):b=webix.toNode(a),webix.event(b,"keydown",function(a){(b!=document.body||this.isVisible())&&this.ce(a)},{bind:this,id:"webix_suggest_keydown_"+b.webix_master_id}),this.pt=!0},ce:function(a){a=a||event;var b=this.getList(),c=a.target||a.srcElement;this.ae=c,this.s.master=c.webix_master_id,window.clearTimeout(this.de);var d=a.keyCode;return 16!=d&&17!=d?9==d?this.ee(this,b):27==d?this.fe(this,b):13==d?this.ge(this,b):this.he(a)?(webix.html.preventEvent(a),!1):void(webix.isUndefined(c.value)||(clearTimeout(this.dt),this.dt=webix.delay(function(){if(this.pt||webix.UIManager.getFocus()==webix.$$(this.s.master)){this.ie=!0;var a=c.value;b.config.dataFeed?b.filter("value",a):b.filter&&b.filter(webix.bind(function(b){return this.s.filter.call(this,b,a)},this))}},this,[],this.s.keyPressTimeout))):void 0},be:function(){if(!this.ie)return!0;this.ie=!1;var a=this.getList();a.count()>0?(this.adjust(),this.isVisible()||(this.je=!0),this.show(this.ae,null,!0),this.je=!1):(this.hide(!0),this.ae=null)},show:function(a){if(!this.isVisible()){var b=this.getList();b.filter&&!this.je&&(b.filter(""),this.ke(b)),this.$customWidth&&this.$customWidth(a),a.tagName&&this.s.fitMaster&&(this.s.width=a.offsetWidth-2),b.Np&&b.render(),this.adjust(),"INPUT"==a.tagName&&(this.ae=a);
}webix.ui.popup.prototype.show.apply(this,arguments)},ke:function(a){if(a=a||this.getList(),a.select&&a.showItem){var b=this.getMasterValue();b&&a.exists&&a.exists(b)?(a.select(b),a.showItem(b)):(a.unselect(),a.showItem(a.getFirstId()))}},ge:function(a,b){if(b.count&&b.count())if(a.isVisible()){var c=b.getSelectedId(!1,!0);1==b.count()&&b.getFirstId()!=c&&(c=b.getFirstId()),c&&this.setMasterValue(b.getItem(c)),a.hide(!0)}else a.show(this.ae);else a.isVisible()&&a.hide(!0)},fe:function(a,b){return a.hide(!0)},ee:function(a,b){return a.hide(!0)},he:function(a){var b=this.getList(),c=a.keyCode;if(b.count&&b.moveSelection){if(!(38!==c||a.ctrlKey||a.metaKey||a.shiftKey||a.altKey))return b.moveSelection("up"),this.Rs(b.getSelectedItem()),!0;if(!(40!==c||a.ctrlKey||a.metaKey||a.shiftKey||a.altKey)){var d=this.isVisible();if(!d){if(!b.count())return!1;this.show(this.ae)}var e=b.getSelectedId();return!e&&b.count?b.select(b.getFirstId()):d&&b.moveSelection("down"),this.Rs(b.getSelectedItem()),!0}}return!1},getValue:function(){var a=this.getList().getSelectedId()||"";return a.id||a},setValue:function(a){var b=this.getList();a?b.exists(a)&&(b.select(a),b.showItem(a)):(b.unselect(),b.showItem(b.getFirstId()))}},webix.ui.popup),webix.attachEvent("onClick",function(a){var b=webix.$$(a);if(b&&b.touchable){webix.UIManager.applyChanges(b),b.getNode(a);var c=a.target||a.srcElement;if("webix_disabled"==c.className)return;var d="";if(c.className&&0===c.className.toString().indexOf("webix_view"))return;for(b&&webix.UIManager.sb(b);c&&c.parentNode;){if(c.getAttribute){if(c.getAttribute("view_id"))break;if(d=c.className){d=d.toString().split(" ");for(var e=0;e<d.length;e++)if(b.on_click[d[e]]){var f=b.on_click[d[e]].call(b,a,b.s.id,c);if(f===!1)return}}}c=c.parentNode}if(b.s.click){var g=webix.toFunctor(b.s.click,b.$scope);g&&g.call&&g.call(b,b.s.id,a)}var h=b.s.popup;if(b.s.popup&&!b.s.readonly){"object"!=typeof h||h.name||(h=b.s.popup=webix.ui(h).s.id);var h=webix.$$(h);h.isVisible()||(h.s.master=b.s.id,h.show(b.getInputNode()||b.getNode(),null,!0))}b.callEvent("onItemClick",[b.s.id,a])}}),webix.protoUI({name:"button",touchable:!0,$skin:function(){this.defaults.height=webix.skin.$active.buttonHeight||webix.skin.$active.inputHeight,this.le=webix.skin.$active.labelTopHeight||15},defaults:{template:function(a,b){var c=b.$renderInput(a,b);return a.badge&&(c=c.replace("</button>","<span class='webix_badge'>"+a.badge+"</span></button>")),"<div class='webix_el_box' style='width:"+a.awidth+"px; height:"+a.aheight+"px'>"+c+"</div>"},label:"",tabFocus:!0,borderless:!0},$renderInput:function(a){var b="class='webixtype_"+(a.type||"base")+"' ";return"<button type='button' "+b+">"+webix.template.escape(a.label||a.value)+"</button>"},$init:function(a){this.x.className+=" webix_control webix_el_"+(this.$cssName||this.name),this.data=this.s,this.y=this.x,this.$B(a)},hotkey_setter:function(a){var b=this;this.Bt(a,function(a,c){var d=b.$view.firstChild;if(d.dispatchEvent){var e=document.createEvent("MouseEvents");e.initEvent("click",!0,!0),c.preventDefault(),d.dispatchEvent(e)}})},Bt:function(a,b,c){var d=webix.UIManager.addHotKey(a,b,c);this.attachEvent("onDestruct",function(){webix.UIManager.removeHotKey(d,b,c)})},tooltip_setter:function(a){var b=this.re()||this.$view.firstChild;return b&&(b.title=a),a},type_setter:function(a){return this.ne[a]&&(this.$renderInput=webix.template(this.ne[a])),"prev"==a||"next"==a?this.oe=this.pe:this.oe=!1,a},ne:{htmlbutton:"<button type='button' class='webix_el_htmlbutton webixtype_base'>#label#</button>",prev:"<input type='button' class='webixtype_prev' value='#label#' /><div class='webix_el_arrow webixtype_prev_arrow'></div>",next:"<input type='button' class='webixtype_next' value='#label#' /><div class='webix_el_arrow webixtype_next_arrow'></div>",imageButton:"<button type='button' class='webix_img_btn_abs webixtype_base' style='width:100%; line-height:#cheight#px'><div class='webix_image' style='width:#dheight#px;height:#dheight#px;background-image:url(#image#);'> </div> #label#</button>",imageButtonTop:"<button type='button' class='webix_img_btn_abs webix_img_btn_abs_top webixtype_base'><div class='webix_image' style='width:100%;height:100%;background-image:url(#image#);'> </div> <div class='webix_img_btn_text'>#label#</div></button>",image:"<button type='button' class='webix_img_btn' style='line-height:#cheight#px;'><div class='webix_image' style='width:#cheight#px;height:#cheight#px;background-image:url(#image#);'> </div> #label#</button>",imageTop:"<button type='button' class='webix_img_btn_top' style='background-image:url(#image#);'><div class='webix_img_btn_text'>#label#</div></button>",icon:"<button type='button' class='webix_img_btn' style='line-height:#cheight#px;'><span class='webix_icon_btn fa-#icon#' style='max-width:#cheight#px;'></span>#label#</button>",iconButton:"<button type='button' class='webix_img_btn_abs webixtype_base' style='width:100%;'><span class='webix_icon fa-#icon#'></span> #label#</button>",iconTop:"<button type='button' class='webix_img_btn_top' style='width:100%;top:4px;text-align:center;'><span class='webix_icon fa-#icon#'></span><div class='webix_img_btn_text'>#label#</div></button>",iconButtonTop:"<button type='button' class='webix_img_btn_abs webix_img_btn_abs_top webixtype_base' style='width:100%;top:0px;text-align:center;'><span class='webix_icon fa-#icon#'></span><div class='webix_img_btn_text'>#label#</div></button>"},qe:function(){for(var a=[],b=["input","select","textarea","button"],c=0;c<b.length;c++)for(var d=this.$view.getElementsByTagName(b[c]),e=0;e<d.length;e++)a.push(d[e]);return a},disable:function(){var a,b=this.re();if(webix.ui.baseview.prototype.disable.apply(this,arguments),b&&-1==b.className.indexOf(" webix_disabled_box")){b.className+=" webix_disabled_box";var c=this.qe();for(a=0;a<c.length;a++)c[a].setAttribute("disabled",!0);if("top"==this.s.labelPosition){var d=this.y.firstChild;d&&(d.className+=" webix_disabled_top_label")}}},enable:function(){webix.ui.baseview.prototype.enable.apply(this,arguments);var a=this.re();if(a){a.className=a.className.replace(" webix_disabled_box","");for(var b=this.qe(),c=0;c<b.length;c++)b[c].removeAttribute("disabled");if("top"==this.s.labelPosition){var d=this.y.firstChild;d&&(d.className=d.className.replace(" webix_disabled_top_label",""))}}},$setSize:function(a,b){webix.ui.view.prototype.$setSize.call(this,a,b)&&this.render()},setValue:function(a){var b=this.s.value;return b!=a&&(this.s.value=a,this.se&&this.$setValue(a),void this.callEvent("onChange",[a,b]))},$setValue:function(a){(this.getInputNode()||{}).value=a},getValue:function(){var a=this.se?this.$getValue():this.s.value;return"undefined"==typeof a?"":a},$getValue:function(){return this.s.value||""},focus:function(){var a=this.getInputNode();a&&a.focus&&a.focus()},blur:function(){var a=this.getInputNode();a&&a.blur&&a.blur()},getInputNode:function(){return this.y.getElementsByTagName("input")[0]||this.y.getElementsByTagName("button")[0]},re:function(){for(var a=0;a<this.y.childNodes.length;a++)if(this.y.childNodes[a].className.indexOf("webix_el_box")>=0)return this.y.childNodes[a];return null},ue:Math.sqrt(2),pe:function(){var a=this.s,b=this.re().childNodes[1],c=b.previousSibling,d="next"==a.type?"right":"left",e=a.aheight-2*webix.skin.$active.inputPadding-2,f=e*this.ue/2;b.style.width=f+"px",b.style.height=f+"px",b.style.top=(e-f)/2+webix.skin.$active.inputPadding+"px",b.style[d]=(e-f)/2+this.ue/2+"px",c.style.width=a.awidth-e/2-2+"px",c.style.height=e+2+"px",c.style[d]=e/2+2+"px",c.style.top=webix.skin.$active.inputPadding+"px"},$B:function(a){a=a||this.s,a.autowidth&&(a.width=webix.html.getTextSize(a.value||a.label,"webixbutton").width+(a.badge?15:0)+("iconButton"===a.type?30:0)+("icon"===a.type?20:0))},ve:function(){this.we=this.s.inputWidth||(this.bc-this.s.width>2?this.s.width:0)||this.bc,this.xe=this.s.inputHeight||this.zy||0},resize:function(){return this.$B(),webix.ui.view.prototype.resize.apply(this,arguments)},render:function(){if(this.ve(),this.s.awidth=this.we||this.bc,this.s.aheight=this.xe||this.dc,this.s.bheight=this.s.aheight+2,this.s.cheight=this.s.aheight-2*webix.skin.$active.inputPadding,this.s.dheight=this.s.cheight-2,webix.AtomRender.render.call(this)){if(this.se=!0,this.oe&&this.oe(),this.s.align){var a=this.y.firstChild;switch("top"==this.s.labelPosition&&a.nextSibling&&(a=a.nextSibling),this.s.align){case"right":a.style.cssFloat="right";break;case"center":a.style.display="inline-block",a.parentNode.style.textAlign="center";break;case"middle":a.style.marginTop=Math.round((this.dc-this.xe)/2)+"px";break;case"bottom":a.style.marginTop=this.dc-this.xe+"px";break;case"left":a.style.cssFloat="left"}}this.$render&&this.$render(this.data),this.s.disabled&&this.disable(),this.s.tooltip&&this.define("tooltip",this.s.tooltip),this.ze&&(this.ze(this.data),this.ze=0)}},refresh:function(){this.render()},on_click:{Ae:function(a,b){var c=webix.html.locate(a,"button_id");c&&this.callEvent("onBeforeTabClick",[c,a])&&(this.setValue(c),this.callEvent("onAfterTabClick",[c,a]))},webix_all_segments:function(a,b){this.on_click.Ae.call(this,a,b)},webix_all_tabs:function(a,b){this.on_click.Ae.call(this,a,b)},webix_inp_counter_next:function(a,b,c){this.next()},webix_inp_counter_prev:function(a,b,c){this.prev()},webix_inp_combo:function(a,b,c){c.focus()},webix_inp_checkbox_border:function(a,b,c){this.s.disabled||"DIV"==(a.target||a.srcElement).tagName||this.s.readonly||this.toggle()},webix_inp_checkbox_label:function(a,b,c){this.s.readonly||this.toggle()},webix_inp_radio_border:function(a,b,c){var d=webix.html.locate(a,"radio_id");this.setValue(d)},webix_inp_radio_label:function(a,b,c){return c=c.parentNode.getElementsByTagName("input")[0],this.on_click.webix_inp_radio_border.call(this,c,b,c)},webix_tab_more_icon:function(a,b,c){this.getPopup().resize(),this.getPopup().show(c,null,!0)},webix_tab_close:function(a,b,c){var d=webix.html.locate(a,"button_id");d&&this.callEvent("onBeforeTabClose",[d,a])&&this.removeOption(d)}},Be:function(a){for(var b=0;b<a.length;b++)"string"==typeof a[b]?a[b]={id:a[b],value:a[b]}:(webix.isUndefined(a[b].id)&&(a[b].id=a[b].value),webix.isUndefined(a[b].value)&&(a[b].value=a[b].id));return a},Yx:function(a){var b=a?a.placeholder:this.s.placeholder;return b?"<span class='webix_placeholder'>"+b+"</span>":""},eC:function(a){return"webix_"+a+"_"+this.s.id}},webix.ui.view,webix.AtomRender,webix.Settings,webix.EventSystem),webix.protoUI({name:"label",defaults:{template:"<div style='height:100%;line-height:#cheight#px'>#label#</div>"},$skin:function(){this.defaults.height=webix.skin.$active.inputHeight},focus:function(){return!1},re:function(){return this.y.firstChild},setHTML:function(a){this.s.template=function(){return a},this.refresh()},setValue:function(a){this.s.label=a,webix.ui.button.prototype.setValue.apply(this,arguments)},$setValue:function(a){this.y.firstChild.innerHTML=a},oe:function(){}},webix.ui.button),webix.protoUI({name:"icon",$skin:function(){this.defaults.height=webix.skin.$active.inputHeight},defaults:{template:function(a){return"<button type='button' "+(a.tabFocus?"":"tabindex='-1'")+" style='height:100%;width:100%;' class='webix_icon_button'><span class='webix_icon fa-"+a.icon+" '></span>"+(a.badge?"<span class='webix_badge'>"+a.badge+"</span>":"")+"</button>"},width:33},oe:function(){}},webix.ui.button),webix.protoUI({name:"text",Ce:!0,De:function(){this.Ce&&(webix.event(this.getInputNode(),"change",this.Xy,{bind:this}),this.s.suggest&&webix.$$(this.s.suggest).linkInput(this))},Xy:function(){var a=this.getValue();a!=this.s.value&&this.setValue(a,!0)},$skin:function(){this.defaults.height=webix.skin.$active.inputHeight,this.defaults.inputPadding=webix.skin.$active.inputPadding},$init:function(a){"top"==a.labelPosition&&webix.isUndefined(a.height)&&this.defaults.height&&(a.height=this.defaults.height+this.le),this.Ns=[],this.attachEvent("onAfterRender",this.De)},$renderIcon:function(){var a=this.s;if(a.icon){var b=a.aheight-2*a.inputPadding,c=(b-18)/2-1;return"<span style='height:"+(b-c)+"px;padding-top:"+c+"px;' class='webix_input_icon fa-"+a.icon+"'></span>"}return""},relatedView_setter:function(a){return this.attachEvent("onChange",function(){var a=this.getValue(),b=this.s.relatedAction,c=this.s.relatedView,d=webix.$$(c);if(!d){var e=this.getTopParentView();e&&e.$$&&(d=e.$$(c))}"enable"==b?a?d.enable():d.disable():a?d.show():d.hide()}),a},validateEvent_setter:function(a){return"blur"==a&&this.attachEvent("onBlur",this.validate),"key"==a&&this.attachEvent("onTimedKeyPress",this.validate),a},validate:function(){var a=this.s.validate;!a&&this.s.required&&(a=webix.rules.isNotEmpty);var b=(this.getFormView(),this.s.name),c=this.getValue(),d={};return d[b]=c,!(a&&!this.getFormView().Se(a,c,d,b))},bottomLabel_setter:function(a){return this.s.bottomPadding||(this.s.bottomPadding=18),a},py:function(){var a=this.s.invalidMessage;return"function"==typeof a&&a.call(this),a},setBottomText:function(a,b){var c=this.s;if("undefined"!=typeof a){if(c.bottomLabel==a)return;c.bottomLabel=a}var d=(c.invalid?c.invalidMessage:"")||c.bottomLabel;d||c.bottomPadding||(c.inputHeight=0),d&&!c.bottomPadding?(this.ry=1,c.bottomPadding=c.bottomPadding||b||18,c.height||this.render(),this.resize()):!d&&this.ry?(c.bottomPadding=this.ry=0,c.height||this.render(),this.resize()):this.render()},$getSize:function(){var a=webix.ui.view.prototype.$getSize.apply(this,arguments),b=this.config.bottomPadding;return b&&(a[2]+=b,a[3]+=b),a},$setSize:function(a,b){var c=this.s;if(webix.ui.view.prototype.$setSize.call(this,a,b)){if(!a||!b)return;"top"==c.labelPosition?(c.inputHeight||(this.zy=this.dc-this.le-(this.config.bottomPadding||0)),c.labelWidth=0):c.bottomPadding&&(c.inputHeight=this.dc-this.config.bottomPadding),this.render()}},Ee:function(a){var b=(this.we||0)-(a.label?this.s.labelWidth:0)-4-(a.iconWidth||0);return 0>b?0:b},Fe:function(a,b){var c="x"+webix.uid(),d=b.Ee(a),e=a.inputAlign||"left",f=(this.$renderIcon?this.$renderIcon(a):"",this.s.aheight-2*webix.skin.$active.inputPadding-2),g=a.text||a.value||this.Yx(a),h="<div class='webix_inp_static' tabindex='0' onclick='' style='line-height:"+f+"px;width: "+d+"px; text-align: "+e+";' >"+g+"</div>";return b.$renderInput(a,h,c)},qt:function(a){var b="<"+a+(this.s.placeholder?" placeholder='"+this.s.placeholder+"' ":" ");this.s.readonly&&(b+="readonly='true' ");var c=this.s.attributes;if(c)for(var d in c)b+=d+"='"+c[d]+"' ";return b},$renderLabel:function(a,b){var c=a.labelAlign||"left",d="top"==this.s.labelPosition,e=d?"display:block;":"width: "+this.s.labelWidth+"px;",f="",g=d?this.le-2:this.s.aheight-2*this.s.inputPadding;return a.label&&(f="<label style='"+e+"text-align: "+c+";line-height:"+g+"px;' onclick='' for='"+b+"' class='webix_inp_"+(d?"top_":"")+"label "+(a.required?"webix_required":"")+"'>"+(a.label||"")+"</label>"),f},$renderInput:function(a,b,c){var d=a.inputAlign||"left",e="top"==a.labelPosition,f=this.Ee(a);c=c||webix.uid();var g=this.$renderLabel(a,c),h="";if(b)h+=b;else{h+=this.qt("input")+"id='"+c+"' type='"+(a.type||this.name)+"' value='"+webix.template.escape(a.value||"")+"' style='width: "+f+"px; text-align: "+d+";'";var i=a.attributes;if(i)for(var j in i)h+=" "+j+"='"+i[j]+"'";h+=" />"}var k=this.$renderIcon?this.$renderIcon(a):"";h+=k;var l="";l=e?g+"<div class='webix_el_box' style='width:"+a.awidth+"px; height:"+a.aheight+"px'>"+h+"</div>":"<div class='webix_el_box' style='width:"+a.awidth+"px; height:"+a.aheight+"px'>"+g+h+"</div>";var m=a.awidth-f-2*webix.skin.$active.inputPadding,n=(a.invalid?a.invalidMessage:"")||a.bottomLabel;return n&&(l+="<div class='webix_inp_bottom_label' style='width:"+(f||a.awidth)+"px;margin-left:"+Math.max(m,webix.skin.$active.inputPadding)+"px;'>"+n+"</div>"),l},defaults:{template:function(a,b){return b.$renderInput(a)},label:"",labelWidth:80},type_setter:function(a){return a},oe:!1,$setValue:function(a){this.getInputNode().value=a},$getValue:function(){return this.getInputNode().value},suggest_setter:function(a){if(a){if("string"==typeof a){var b=webix.$$(a);if(b)return webix.$$(a).s.id;a={body:{url:a,dataFeed:a}}}else webix.isArray(a)?a={body:{data:this.Be(a)}}:a.body||(a.body={});webix.extend(a,{view:"suggest"});var c=webix.ui(a);return this.Ns.push(c),c.s.id}return!1}},webix.ui.button),webix.protoUI({name:"segmented",Ce:!1,$init:function(){this.attachEvent("onChange",function(a){if(this.s.multiview){var b=this.getTopParentView(),c=null;b&&b.$$&&(c=b.$$(a)),c||(c=webix.$$(a)),c&&c.show&&c.show()}})},defaults:{template:function(a,b){!a.options;var c=a.options;b.Be(c),c=b.yC(c);var d=b.Ee(a),e=webix.uid(),f="<div style='width:"+d+"px' class='webix_all_segments'>",g=a.optionWidth||Math.floor(d/c.length);a.value||(a.value=c[0].id);for(var h=0;h<c.length;h++)f+="<button type='button' style='width:"+(c[h].width||g)+"px' ",f+="class='"+(a.value==c[h].id?"webix_selected ":"")+"webix_segment_"+(h==c.length-1?"N":h>0?1:0)+"' button_id='"+c[h].id+"' >",f+=c[h].value+"</button>";return b.$renderInput(a,f+"</div>",e)}},$setValue:function(a){this.refresh()},getValue:function(){return this.s.value},getInputNode:function(){return null},optionIndex:function(a){for(var b=this.s.options,c=0;c<b.length;c++)if(b[c].id==a)return c;return-1},addOption:function(a,b,c,d){var e=a;"object"!=typeof a?(b=b||a,e={id:a,value:b}):(a=e.id,d=c,c=b),this.optionIndex(a)<0&&webix.PowerArray.insertAt.call(this.s.options,e,d),c&&this.setValue(a)},removeOption:function(a,b){var c=this.optionIndex(a),d=this.s.options;c>=0&&webix.PowerArray.removeAt.call(d,c),this.s.value==a&&this.zC(d,c),this.callEvent("onOptionRemove",[a,this.s.value]),this.refresh()},zC:function(a,b){var c=a.length;if(c){b=Math.min(b,c-1);for(var d=b;c>d;d++)if(!a[d].hidden)return this.setValue(a[d].id);for(var d=b;d>=0;d--)if(!a[d].hidden)return this.setValue(a[d].id)}this.setValue("")},yC:function(a){for(var b=[],c=0;c<a.length;c++)a[c].hidden||b.push(a[c]);return b},AC:function(a,b){var c=this.s.options,d=this.optionIndex(a),e=c[d];e&&b==!!e.hidden&&(e.hidden=!b,b||this.s.value!=a?this.refresh():this.zC(c,d))},hideOption:function(a){this.AC(a,!1)},showOption:function(a){this.AC(a,!0)},oe:!1},webix.ui.text),webix.protoUI({name:"search",$skin:function(){this.defaults.inputPadding=webix.skin.$active.inputPadding},on_click:{webix_input_icon:function(a){return this.callEvent("onSearchIconClick",[a])}},defaults:{type:"text",icon:"search"}},webix.ui.text),webix.protoUI({name:"toggle",Ce:!0,$init:function(){this.attachEvent("onItemClick",function(){this.toggle()})},$setValue:function(a){this.render()},toggle:function(){this.setValue(!this.getValue())},getValue:function(){var a=this.s.value;return a&&"0"!=a?1:0},defaults:{template:function(a,b){var c=a.value?" webix_pressed":"";return a.label=(a.value?a.onLabel:a.offLabel)||a.label,a.icon=(a.value?a.onIcon:a.offIcon)||a.icon,"<div class='webix_el_box"+c+"' style='width:"+a.awidth+"px; height:"+a.aheight+"px'>"+b.$renderInput(a,b)+"</div>"}},oe:!1},webix.ui.button),webix.protoUI({name:"select",defaults:{template:function(a,b){var c=b.Be(a.options),d="x"+webix.uid(),e=b.qt("select")+"id='"+d+"' style='width:"+b.Ee(a)+"px;'>",f=webix.$$(c);if(f&&f.data&&f.data.each)f.data.each(function(b){e+="<option"+(b.id==a.value?" selected='true'":"")+" value='"+b.id+"'>"+b.value+"</option>"});else for(var g=0;g<c.length;g++)e+="<option"+(c[g].id==a.value?" selected='true'":"")+" value='"+c[g].id+"'>"+c[g].value+"</option>";return e+="</select>",b.$renderInput(a,e,d)}},options_setter:function(a){if(a){if("string"==typeof a){var b=new webix.DataCollection({url:a});return b.data.attachEvent("onStoreLoad",webix.bind(this.refresh,this)),b}return a}},getInputNode:function(){return this.y.getElementsByTagName("select")[0]}},webix.ui.text),webix.protoUI({name:"textarea",$skin:function(){},defaults:{template:function(a,b){var c=a.name||a.id,d="x"+webix.uid(),e=b.qt("textarea")+"style='width:"+b.Ee(a)+"px;'";return e+=" id='"+d+"' name='"+c+"' class='webix_inp_textarea'>"+(a.value||"")+"</textarea>",b.$renderInput(a,e,d)},height:0,minHeight:60},Dt:!0,$renderLabel:function(a,b){var c=a.labelAlign||"left",d="top"==this.s.labelPosition,e=d?"display:block;":"width: "+this.s.labelWidth+"px;",f="";return d?this.le-2:(webix.skin.$active.inputHeight||this.s.aheight)-2*this.s.inputPadding,a.label&&(f="<label style='"+e+"text-align: "+c+";' onclick='' for='"+b+"' class='webix_inp_"+(d?"top_":"")+"label "+(a.required?"webix_required":"")+"'>"+(a.label||"")+"</label>"),f},getInputNode:function(){return this.y.getElementsByTagName("textarea")[0]}},webix.ui.text),webix.protoUI({name:"counter",defaults:{template:function(a,b){var c=a.value||0,d="x"+webix.uid(),e="<div class='webix_el_group' style='width:"+b.Ee(a)+"px'>";return e+="<button type='button' class='webix_inp_counter_prev'>-</button>",e+=b.qt("input")+" id='"+d+"' type='text' class='webix_inp_counter_value' value='"+c+"'></input>",e+="<button type='button' class='webix_inp_counter_next'>+</button></div>",b.$renderInput(a,e,d)},min:0,max:1/0,step:1},$setValue:function(a){this.getInputNode().value=a},getInputNode:function(){return this.y.getElementsByTagName("input")[0]},getValue:function(a){return 1*webix.ui.button.prototype.getValue.apply(this,arguments)},next:function(a){a=this.s.step,this.shift(a)},prev:function(a){a=-1*this.s.step,this.shift(a)},shift:function(a){var b=this.s.min,c=this.s.max,d=this.getValue()+a;d>=b&&c>=d&&this.setValue(d)}},webix.ui.text),webix.protoUI({name:"checkbox",defaults:{checkValue:1,uncheckValue:0,template:function(a,b){var c="x"+webix.uid(),d="";a.labelRight&&(d="<label class='webix_label_right'>"+a.labelRight+"</label>",a.labelWidth&&(a.label=a.label||"&nbsp;"));var e=a.checkValue==a.value,f=Math.floor((b.s.aheight-16)/2),g=b.qt("input")+"style='margin-top:"+f+"px;"+(a.customCheckbox?"display:none":"")+"' id='"+c+"' type='checkbox' "+(e?"checked='1'":"")+"/>",h="webix_inp_checkbox_border webix_el_group webix_checkbox_"+(e?"1":"0"),i="<div style='line-height:"+b.s.cheight+"px' class='"+h+"'>"+g+(a.customCheckbox||"")+d+"</div>";return b.$renderInput(a,i,c)}},customCheckbox_setter:function(a){return a===!0&&webix.skin.$active.customCheckbox&&(a="<a onclick='javascript:void(0)'><button type='button' class='webix_custom_checkbox'></button></a>"),a},focus:function(){var a=this.$view.getElementsByTagName(this.s.customCheckbox?"button":"input")[0];a&&a.focus()},blur:function(){var a=this.$view.getElementsByTagName(this.s.customCheckbox?"button":"input")[0];a&&a.blur()},De:function(){},$setValue:function(a){var b=a==this.s.checkValue,c=this.getInputNode()?this.getInputNode().parentNode:null;c&&(c.className=c.className.replace(/(webix_checkbox_)\d/,"$1"+(b?1:0))),this.getInputNode().checked=b},toggle:function(){var a=this.getValue()!=this.s.checkValue?this.s.checkValue:this.s.uncheckValue;this.setValue(a)},getValue:function(){var a=this.s.value;return a==this.s.checkValue?this.s.checkValue:this.s.uncheckValue},$skin:function(){webix.skin.$active.customCheckbox&&(this.defaults.customCheckbox=!0)}},webix.ui.text),webix.protoUI({name:"radio",defaults:{template:function(a,b){for(var c,d=b.Be(a.options),e=[],f=0;f<d.length;f++){var g="x"+webix.uid();c=c||g,f&&(d[f].newline||a.vertical)&&e.push("<div class='webix_line_break'></div>");var h=d[f].id==a.value,i=b.qt("input")+" name='"+a.name+"' type='radio' "+(h?"checked='1'":"")+" value='"+d[f].id+"' id='"+g+"' style='"+(a.customRadio?"display:none":"")+"' />",j="<div radio_id='"+d[f].id+"' class='webix_inp_radio_border webix_radio_"+(h?"1":"0")+"'>"+i+(a.customRadio||"")+"</div>",k=d[f].value||"";k&&(k="<label for='"+g+"' class='webix_label_right'>"+k+"</label>"),e.push("<div class='webix_radio_option'>"+j+k+"</div>")}return e="<div class='webix_el_group' style='margin-left:"+(a.label?a.labelWidth:0)+"px;'>"+e.join("")+"</div>",b.$renderInput(a,e,c)}},refresh:function(){this.render(),this.ac&&this.$getSize(0,0)[2]!=this.ac[1]&&this.resize()},$getSize:function(a,b){var c=webix.ui.button.prototype.$getSize.call(this,a,b);if(this.s.options){for(var d=0,e=0;e<this.s.options.length;e++)(this.s.vertical||this.s.options[e].newline)&&d++;c[3]=c[2]=Math.max(c[2],(this.s.optionHeight||25)*d+2*this.s.inputPadding)}var f=this.config.bottomPadding;return f&&(c[2]+=f,c[3]+=f),c},Ie:function(){return this.y.getElementsByTagName("input")},$setValue:function(a){for(var b=this.Ie(),c=0;c<b.length;c++){b[c].parentNode.getAttribute("radio_id")==a?(b[c].className="webix_inp_radio_on",b[c].checked=!0):(b[c].className="webix_inp_radio_on webix_hidden",b[c].checked=!1);var d=b[c]?b[c].parentNode:null;d&&(d.className=d.className.replace(/(webix_radio_)\d/,"$1"+(b[c].checked?1:0)))}},getValue:function(a){return this.s.value},focus:function(){var a=this.$view.getElementsByTagName(this.s.customRadio?"button":"input")[0];a&&a.focus()},blur:function(){var a=this.$view.getElementsByTagName(this.s.customRadio?"button":"input")[0];a&&a.blur()},customRadio_setter:function(a){return a===!0&&webix.skin.$active.customRadio&&(a="<a onclick='javascript:void(0)'><button type='button'  class='webix_custom_radio'></button></a>"),a},$skin:function(){webix.skin.$active.customRadio&&(this.defaults.customRadio=!0),webix.skin.$active.optionHeight&&(this.defaults.optionHeight=webix.skin.$active.optionHeight)}},webix.ui.text),webix.protoUI({name:"richselect",defaults:{template:function(a,b){return b.Fe(a,b)},popupWidth:200,icon:"angle-down"},suggest_setter:function(a){return this.options_setter(a)},options_setter:function(a){a=this.Kt?this.Kt(a):a;var b=this.s.popup=this.s.suggest=webix.ui.text.prototype.suggest_setter.call(this,a),c=webix.$$(b).getList();return c&&c.attachEvent("onAfterLoad",webix.bind(this.Ss,this)),b},getList:function(){var a=webix.$$(this.s.suggest);return a.getList()},Ss:function(){var a=this.s.value;webix.isUndefined(a)||this.getPopup().isVisible()||this.s.text||this.$setValue(a)},$skin:function(){this.defaults.inputPadding=webix.skin.$active.inputPadding},$render:function(a){webix.isUndefined(a.value)||this.$setValue(a.value)},getInputNode:function(){return this.y.getElementsByTagName("DIV")[1]},getPopup:function(){return webix.$$(this.s.popup)},getText:function(){var a=this.getInputNode();return"undefined"==typeof a.value?a.innerHTML:a.value},$setValue:function(a){if(this.se){var b=a,c=this.getPopup();if(c)var b=this.getPopup().getItemText(a);!b&&a&&a.id&&(this.getPopup().getList().add(a),b=this.getPopup().getItemText(a.id),this.s.value=a.id),this.s.text=b;var d=this.getInputNode();webix.isUndefined(d.value)?d.innerHTML=b||this.Yx():d.value=b.replace(/<[^>]*>/g,"")}},getValue:function(){return this.s.value||""}},webix.ui.text),webix.protoUI({name:"combo",$init:function(){this.attachEvent("onBlur",webix.bind(function(a){if(this.s.text!=this.getText()){var b=this.getPopup().getSuggestion();if(!b||""===this.getInputNode().value&&""!==webix.$$(this.s.suggest).getItemText(b)){if(!this.s.editable){var c=this.getValue();this.$setValue(webix.isUndefined(c)?"":c)}}else this.setValue(b)}},this))},getInputNode:function(){return this.y.getElementsByTagName("input")[0]},$render:function(a){webix.isUndefined(a.value)||this.$setValue(a.value)},Xy:function(){var a=this.getInputNode(),b="";a.value&&(b=webix.$$(this.s.suggest).getSuggestion()||this.s.value),b!=this.s.value?this.setValue(b,!0):this.$setValue(b)},defaults:{template:function(a,b){return b.$renderInput(a)},icon:"angle-down"}},webix.ui.richselect),webix.protoUI({name:"datepicker",$init:function(){this.$ready.push(this.Je)},defaults:{template:function(a,b){"time"==b.s.type&&(b.s.icon=b.s.timeIcon);var c=a.type;a.type="";var d=a.editable?b.$renderInput(a):b.Fe(a,b);return a.type=c,d},stringResult:!1,timepicker:!1,icon:"calendar",icons:!0,timeIcon:"clock-o"},$skin:function(){this.defaults.inputPadding=webix.skin.$active.inputPadding},getPopup:function(){return webix.$$(this.s.popup)},Je:function(){var a=this.s;if(a.suggest)a.popup=a.suggest;else if(!a.popup){var b=this.s.timepicker;a.popup=a.suggest=this.suggest_setter({type:"calendar",height:240+(b?30:0),width:250,padding:0,body:{timepicker:b,type:this.s.type,icons:this.s.icons}})}this.ze=function(){}},$render:function(a){webix.isUndefined(a.value)||this.$setValue(a.value)},Tx:function(a){var b=this.s.type,c="time"==b;if(isNaN(parseFloat(a))||(a=""+a),"string"==typeof a&&a){var d=null;d="month"!=b&&"year"!=b||!this.Gx?c?webix.i18n.parseTimeFormatDate:webix.i18n.parseFormatDate:this.Gx,a=d(a)}if(a){if(c&&webix.isArray(a)){var e=new Date;e.setHours(a[0]),e.setMinutes(a[1]),a=e}isNaN(a.getTime())&&(a="")}return a},$setValue:function(a){var b=webix.$$(this.s.popup.toString()),c=b.gd;a=this.Tx(a),c.selectDate(a,!0),this.s.value=a?c.config.date:"";var d="time"==this.s.type,e=this.config.timepicker,f=this.Hx||(d?webix.i18n.timeFormatStr:e?webix.i18n.fullDateFormatStr:webix.i18n.dateFormatStr);this.s.text=a?f(this.s.value):"";var g=this.getInputNode();g.value==webix.undefined?g.innerHTML=this.s.text||this.Yx():g.value=this.s.text||""},format_setter:function(a){return a?"function"==typeof a?this.Hx=a:(this.Hx=webix.Date.dateToStr(a),this.Gx=webix.Date.strToDate(a)):this.Hx=this.Gx=null,a},getInputNode:function(){return this.s.editable?this.y.getElementsByTagName("input")[0]:this.y.getElementsByTagName("DIV")[1]},getValue:function(){var a=this.s.type,b="time"==a,c=this.config.timepicker,d=this.s.value;if(this.se){if(this.s.editable){var e=this.Gx||(b?webix.i18n.timeFormatDate:c?webix.i18n.fullDateFormatDate:webix.i18n.dateFormatDate);d=e(this.getInputNode().value)}}else d=this.Tx(d)||null;if(this.s.stringResult){var f=webix.i18n.parseFormatStr;return b&&(f=webix.i18n.parseTimeFormatStr),!this.Hx||"month"!=a&&"year"!=a||(f=this.Hx),d?f(d):""}return d||null},getText:function(){var a=this.getInputNode();return a?"undefined"==typeof a.value?a.innerHTML:a.value:""}},webix.ui.text),webix.protoUI({name:"colorpicker",$init:function(){this.$ready.push(this.Je)},defaults:{icon:!0},Je:function(){var a=this.s;a.suggest?a.popup=a.suggest:a.popup||(a.popup=a.suggest=this.suggest_setter({type:"colorboard",height:200})),this.ze=function(){}},$render:function(a){webix.isUndefined(a.value)||this.$setValue(a.value)},getValue:function(){return this.se&&this.s.editable?this.getInputNode().value:this.s.value},pz:function(){return this.$view.getElementsByTagName("DIV")[this.s.editable?1:2]},$setValue:function(a){var b=webix.$$(this.config.popup.toString()),c=b.getBody();c.setValue(a),this.config.value=a,this.pz().style.backgroundColor=a;var d=this.getInputNode();d.value==webix.undefined?d.innerHTML=a:d.value=a},$renderIcon:function(){var a=this.config;return'<div class="webix_input_icon" style="background-color:'+a.value+';"> </div>'}},webix.ui.datepicker),webix.RenderStack={$init:function(){this.v=document.createElement("DIV"),this.data.attachEvent("onIdChange",webix.bind(this.Ke,this)),this.attachEvent("onItemClick",this.Le),this.types||(this.types={"default":this.type},this.type.name="default"),this.type=webix.clone(this.type)},customize:function(a){webix.type(this,a)},type_setter:function(a){return this.types[a]?(this.type=webix.clone(this.types[a]),this.type.css&&(this.w.className+=" "+this.type.css)):this.customize(a),this.type.on_click&&webix.extend(this.on_click,this.type.on_click),a},template_setter:function(a){this.type.template=webix.template(a)},jb:function(a){var b=this.data.Me[a.id];return this.callEvent("onItemRender",[a]),this.type.templateStart(a,this.type,b)+(a.$template?this.type["template"+a.$template]:this.type.template)(a,this.type,b)+this.type.templateEnd(a,this.type,b)},Ne:function(a){return this.v.innerHTML=this.jb(a),this.v.firstChild},Ke:function(a,b){var c=this.getItemNode(a);c&&(c.setAttribute(this.ad,b),this.t[b]=this.t[a],delete this.t[a])},Le:function(){if(this.s.click){var a=webix.toFunctor(this.s.click,this.$scope);a&&a.call&&a.apply(this,arguments)}},getItemNode:function(a){if(this.t)return this.t[a];
this.t={};for(var b=this.y.childNodes,c=0;c<b.length;c++){var d=b[c].getAttribute(this.ad);d&&(this.t[d]=b[c])}return this.getItemNode(a)},locate:function(a){return webix.html.locate(a,this.ad)},showItem:function(a){var b=this.getItemNode(a);if(b&&this.scrollTo){var c=Math.abs(this.w.offsetLeft-b.offsetLeft),d=c+b.offsetWidth,e=Math.abs(this.w.offsetTop-b.offsetTop),f=e+b.offsetHeight,g=this.getScrollState(),h=g.x;(h>c||h+this.bc<d)&&(h=c);var i=g.y;(i>e||i+this.dc<f)&&(i=e-5),this.scrollTo(h,i),this.Oe&&this.Oe(a)}},render:function(a,b,c){if(this.isVisible(this.s.id)&&!this.$blockRender)if(a){var d=this.getItemNode(a);switch(c){case"paint":case"update":if(!d)return;var e=this.t[a]=this.Ne(b);webix.html.insertBefore(e,d),webix.html.remove(d);break;case"delete":if(!d)return;webix.html.remove(d),delete this.t[a];break;case"add":var e=this.t[a]=this.Ne(b);webix.html.insertBefore(e,this.getItemNode(this.data.getNextId(a)),this.y);break;case"move":webix.html.insertBefore(this.getItemNode(a),this.getItemNode(this.data.getNextId(a)),this.y)}}else if(this.callEvent("onBeforeRender",[this.data])){(this.Pe||this.y).innerHTML=this.data.getRange().map(this.jb,this).join(""),this.t=null,this.callEvent("onAfterRender",[]);var e=this.y.offsetHeight}}},webix.ValidateData={$init:function(){this.h&&this.attachEvent("onChange",this.clearValidation)},clearValidation:function(){if(this.elements)for(var a in this.elements)this.Qe(a)},validate:function(a,b){this.callEvent("onBeforeValidate",[]);var c=this.Re={},d=!0,e=this.s.rules,f=this.isVisible&&!this.isVisible(),g=a&&a.hidden,h=a&&a.disabled,i={},j={};for(var k in this.elements){var l=this.elements[k].config.name;(f||this.elements[k].isVisible()||g)&&(this.elements[k].isEnabled()||h)?i[l]=this.elements[k]:j[l]=!0}if((e||i)&&!b&&this.getValues&&(b=this.getValues()),e){e.$obj&&(d=this.Se(e.$obj,b,b,"")&&d);var m=e.$all;if(m)for(var n in b)if(!j[n]){var o=this.Se(m,b[n],b,n);o||(c[n]=!0),d=o&&d}for(var n in e)if(!j[n]&&0!==n.indexOf("$")&&!c[n]){var o=this.Se(e[n],b[n],b,n);o||(c[n]=!0),d=o&&d}}if(i)for(var n in i)if(!c[n]){var p=i[n];if(p.validate){var o=p.validate();d=o&&d,o||(c[n]=!0)}else{var q=p.s;if(q){var r=q.validate;if(!r&&q.required&&(r=webix.rules.isNotEmpty),r){var o=this.Se(r,b[n],b,n);o||(c[n]=!0),d=o&&d}}}}return this.callEvent("onAfterValidation",[d,this.Re]),d},Se:function(a,b,c,d){return"string"==typeof a&&(a=webix.rules[a]),a.call(this,b,c,d)?(this.callEvent("onValidationSuccess",[d,c])&&this.Qe&&this.Qe(d),!0):(this.callEvent("onValidationError",[d,c])&&this.Te&&this.Te(d),!1)}},webix.ValidateCollection={Ue:function(){this.data.attachEvent("onStoreUpdated",webix.bind(function(a,b,c){!a||"add"!=c&&"update"!=c||this.validate(a)},this)),this.data.attachEvent("onClearAll",webix.bind(this.clearValidation,this)),this.Ue=function(){}},rules_setter:function(a){return a&&this.Ue(),a},clearValidation:function(){this.data.clearMark("webix_invalid",!0)},validate:function(a){var b=!0;if(a){this.Re={};var c=this.getItem(a);b=webix.ValidateData.validate.call(this,null,c),b?this.callEvent("onValidationSuccess",[a,c])&&this.Qe(a):this.callEvent("onValidationError",[a,c,this.Re])&&this.Te(a,this.Re)}else for(var d in this.data.pull)var b=this.validate(d)&&b;return b},Se:function(a,b,c,d){"string"==typeof a&&(a=webix.rules[a]);var e=a.call(this,b,c,d);return e||(this.Re[d]=!0),e},Qe:function(a){this.data.removeMark(a,"webix_invalid",!0)},Te:function(a,b){this.data.addMark(a,"webix_invalid",!0)}},webix.rules={isEmail:function(a){return/^[^@]+@[^@]+\.[^@]+$/.test((a||"").toString())},isNumber:function(a){return parseFloat(a)==a},isChecked:function(a){return!!a||"0"===a},isNotEmpty:function(a){return 0===a||a}},webix.MapCollection={$init:function(){this.$ready.push(this.cz),this.attachEvent("onStructureUpdate",this.cz)},cz:function(a){var a=this.dz=[],b=this.s;if(b.columns&&this.zj(b.columns),this.s.map&&this.ez(b.map),this.dz.length)try{this.data.qf=Function("obj",a.join("\n"))}catch(c){}},ez:function(a){for(var b in a)this.dz.push(this.fz(b,a[b]))},fz:function(a,b,c){var d="",e="";return 0===b.indexOf("(date)")?(d="webix.i18n.parseFormatDate(",e=")",c&&!c.format&&(c.format=webix.i18n.dateFormatStr),b=b.replace("(date)","")):0===b.indexOf("(number)")&&(d="(",e=")*1",b=b.replace("(number)","")),""!==b?(b=b.replace(/\{obj\.([^}]*)\}/g,"\"+(obj.$1||'')+\""),b=b.replace(/#([^#'";, ]+)#/gi,"\"+(obj.$1||'')+\"")):b='"+(obj.'+a+"||'')+\"","obj."+a+" = "+d+'"'+b+'"'+e+";"},zj:function(a){for(var b=0;b<a.length;b++){var c=a[b].map,d=a[b].id;d||(d=a[b].id="i"+webix.uid(),a[b].header||(a[b].header="")),c&&this.dz.push(this.fz(d,c,a[b])),this.Et(a[b])}},Et:function(a){var b=a.options||a.collection;if(b)if("string"==typeof b){var c=webix.$$(b);c||(c=new webix.DataCollection({url:b}),this.Ns.push(c)),c.getBody&&(c=c.getBody()),this.Bj(c,a)}else if(b.loadNext)this.Bj(b,a);else if(b[0]&&"object"==typeof b[0])b=new webix.DataCollection({data:b}),this.Bj(b,a),this.Ns.push(b);else{if(webix.isArray(b)){for(var d={},e=0;e<b.length;e++)d[b[e]]=b[e];a.options=b=d}a.template=a.template||this.Ej(b,a.id,a.optionslist)}},Bj:function(a,b){if(b){delete b.options,b.collection=a,b.template=b.template||this.Dj(a,b.id,b.optionslist);var c=a.data.attachEvent("onStoreUpdated",webix.bind(function(){this.refresh(),this.refreshFilter(b.id)},this));this.attachEvent("onDestruct",function(){a.$destructed||a.data.detachEvent(c)})}},Ej:function(a,b,c){if(c){var d="string"==typeof c?c:",";return function(c,e){var f=c[b]||c.value;if(!f)return"";for(var g=f.split(d),h=0;h<g.length;h++)g[h]=a[g[h]]||"";return g.join(", ")}}return function(c,d){return a[c[b]]||c.value||""}},Dj:function(a,b,c){if(c){var d="string"==typeof c?c:",";return function(c,e){var f=c[b]||c.value;if(!f)return"";for(var g=f.split(d),h=0;h<g.length;h++){var i=a.data.pull[g[h]];g[h]=i?i.value||"":""}return g.join(", ")}}return function(c,d){var e=c[b]||c.value,f=a.data.pull[e];return f&&(f.value||0===f.value)?f.value:""}}},webix.DataLoader=webix.proto({$init:function(a){a=a||"",this.Ve=webix.toArray(),this.data=new webix.DataStore,this.data.attachEvent("onClearAll",webix.bind(this.We,this)),this.data.attachEvent("onServerConfig",webix.bind(this.Xe,this)),this.data.feed=this.Ye,this.data.owner=a.id},Ye:function(a,b,c){return this.Ze?this.Ze=[a,b,c]:(this.Ze=!0,this.$e=[a,b],void this._e.call(this,a,b,c))},_e:function(a,b,c,d,e){var f=null,d=d||this.data.url,g=[{success:this.af,error:this.af},c];if(0>a&&(a=0),e||(e={start:a,count:b}),this.count()&&(e["continue"]="true"),this.getState&&(f=this.getState()),d&&"string"!=typeof d)f&&(f.sort&&(e.sort=f.sort),f.filter&&(e.filter=f.filter)),this.load(d,g,e);else{d+=-1==d.indexOf("?")?"?":"&";var h=[];for(var i in e)h.push(i+"="+e[i]);if(f&&(f.sort&&h.push("sort["+f.sort.id+"]="+encodeURIComponent(f.sort.dir)),f.filter))for(var j in f.filter)h.push("filter["+j+"]="+encodeURIComponent(f.filter[j]));d+=h.join("&"),this.load(d,g)}},af:function(){var a=this.Ze,b=this.$e;this.Ze=!1,"object"!=typeof a||a[0]==b[0]&&a[1]==b[1]||this.data.feed.apply(this,a)},load:function(a,b){var a=webix.proxy.$parse(a),c=webix.AtomDataLoader.load.apply(this,arguments);return this.data.url||(this.data.url=a),c},loadNext:function(a,b,c,d,e){var f=this.s;return f.datathrottle&&!e?(this.bf&&window.clearTimeout(this.bf),void(this.bf=webix.delay(function(){this.loadNext(a,b,c,d,!0)},this,0,f.datathrottle))):(b||0===b||(b=this.count()),a||(a=f.datafetch||this.count()),this.data.url=this.data.url||d,void(this.callEvent("onDataRequest",[b,a,c,d])&&this.data.url&&this.data.feed.call(this,b,a,c)))},cf:function(a,b){var c=this.$e;return!!(this.Ze&&c&&c[0]<=b&&c[1]+c[0]>=a+b)},removeMissed_setter:function(a){return this.data.ff=a},gf:function(){var a=this.s.save;a===!0&&(a=this.s.save=this.s.url);var b={master:this};a&&a.url?webix.extend(b,a):b.url=a,webix.dp(b)},save_setter:function(a){return a&&this.$ready.push(this.gf),a},scheme_setter:function(a){this.data.scheme(a)},dataFeed_setter:function(a){return a=webix.proxy.$parse(a),this.data.attachEvent("onBeforeFilter",webix.bind(function(a,b){if("function"==typeof a)return!0;if(this.s.dataFeed&&(a||b)){a=a||"id",b&&"object"==typeof b&&(b=b.id),this.clearAll();var c=this.s.dataFeed;if("function"==typeof c){var d={};d[a]=b,c.call(this,b,d)}else if(c.$proxy){if(c.load){var e={};e[a]=b,c.load(this,{success:this.M,error:this.N},{filter:e})}}else{var f="filter["+a+"]="+encodeURIComponent(b);this.load(c+(c.indexOf("?")<0?"?":"&")+f,this.s.datatype)}return!1}},this)),a},ef:function(){if(this.s.ready&&!this.hf){var a=webix.toFunctor(this.s.ready,this.$scope);a&&webix.delay(a,this,arguments),this.hf=!0}},We:function(){for(var a=0;a<this.Ve.length;a++){var b=this.Ve[a];try{b.aborted=!0}catch(c){webix.ly.push(b)}b.abort()}this.Ve=webix.toArray(),this.waitData=webix.promise.defer()},Xe:function(a){this.C(a)}},webix.AtomDataLoader),webix.ly=webix.toArray(),webix.DataMarks={addCss:function(a,b,c){if(!this.addRowCss&&!c&&!this.hasCss(a,b)){var d=this.getItemNode(a);d&&(d.className+=" "+b,c=!0)}return this.data.addMark(a,b,1,1,c)},removeCss:function(a,b,c){if(!this.addRowCss&&!c&&this.hasCss(a,b)){var d=this.getItemNode(a);d&&(d.className=d.className.replace(b,"").replace("  "," "),c=!0)}return this.data.removeMark(a,b,1,c)},hasCss:function(a,b){return this.data.getMark(a,b)},clearCss:function(a,b){return this.data.clearMark(a,1,b)}},webix.DataStore=function(){this.name="DataStore",webix.extend(this,webix.EventSystem),this.setDriver("json"),this.pull={},this.order=webix.toArray(),this.Me={}},webix.DataStore.prototype={setDriver:function(a){this.driver=webix.DataDriver[a]},df:function(a,b){this.callEvent("onParse",[this.driver,a]),this.jf&&this.filter();var c=this.driver.getInfo(a);c.U&&(webix.securityKey=c.U),c.T&&this.callEvent("onServerConfig",[c.T]);var d=this.driver.getOptions(a);d&&this.callEvent("onServerOptions",[d]);var e=this.driver.getRecords(a);this.kf(c,e),this.lf&&this.mf&&!this.nf&&this.mf(this.lf),this.of&&(this.blockEvent(),this.sort(this.of),this.unblockEvent()),this.callEvent("onStoreLoad",[this.driver,a]),this.refresh()},kf:function(a,b){var c=1*(a.R||0),d=!0,e=!1;if(0===c&&this.order[0]&&this.order[this.order.length-1]){if(this.ff){e={};for(var f=0;f<this.order.length;f++)e[this.order[f]]=!0}d=!1,c=this.order.length}for(var g=0,f=0;f<b.length;f++){var h=this.driver.getDetails(b[f]),i=this.id(h);this.pull[i]?d&&this.order[g+c]&&g++:(this.order[g+c]=i,g++),this.pull[i]?(webix.extend(this.pull[i],h,!0),this.pf&&this.pf(this.pull[i]),e&&delete e[i]):(this.pull[i]=h,this.qf&&this.qf(h))}if(e){this.blockEvent();for(var j in e)this.remove(j);this.unblockEvent()}this.order[a.Q-1]||(this.order[a.Q-1]=webix.undefined)},id:function(a){return a.id||(a.id=webix.uid())},changeId:function(a,b){this.pull[a]&&(this.pull[b]=this.pull[a]),this.pull[b].id=b,this.order[this.order.find(a)]=b,this.jf&&(this.jf[this.jf.find(a)]=b),this.Me[a]&&(this.Me[b]=this.Me[a],delete this.Me[a]),this.callEvent("onIdChange",[a,b]),this.Ke&&this.Ke(a,b),delete this.pull[a]},getItem:function(a){return this.pull[a]},updateItem:function(a,b){var c=this.getItem(a);webix.isUndefined(b)||c===b||(webix.extend(c,b,!0),c.id=a),this.pf&&this.pf(c),this.callEvent("onStoreUpdated",[a,c,"update"]),this.callEvent("onDataUpdate",[a,c])},refresh:function(a){this.rf||(a?this.exists(a)&&this.callEvent("onStoreUpdated",[a,this.pull[a],"paint"]):this.callEvent("onStoreUpdated",[null,null,null]))},silent:function(a,b){this.rf=!0,a.call(b||this),this.rf=!1},getRange:function(a,b){if(a=a?this.getIndexById(a):this.$min||this.startOffset||0,b?b=this.getIndexById(b):(b=0===this.$max?0:Math.min(this.$max?this.$max-1:this.endOffset||1/0,this.count()-1),0>b&&(b=0)),a>b){var c=b;b=a,a=c}return this.getIndexRange(a,b)},getIndexRange:function(a,b){b=Math.min(0===b?0:b||1/0,this.count()-1);for(var c=webix.toArray(),d=a||0;b>=d;d++)c.push(this.getItem(this.order[d]));return c},count:function(){return this.order.length},exists:function(a){return!!this.pull[a]},move:function(a,b){if(a!=b){var c=this.getIdByIndex(a),d=this.getItem(c);this.jf&&this.sf(this.jf,0,0,this.getIdByIndex(a),this.getIdByIndex(b)),this.sf(this.order,a,b),this.callEvent("onStoreUpdated",[c,d,"move"])}},sf:function(a,b,c,d,e){if(d||e){b=c=-1;for(var f=0;f<a.length;f++)a[f]==d&&0>b&&(b=f),a[f]==e&&0>c&&(c=f)}var g=a[b];a.removeAt(b),a.insertAt(g,Math.min(a.length,c))},scheme:function(a){this.tf={},this.uf=a.$save,this.qf=a.$init||a.$change,this.pf=a.$update||a.$change,this.vf=a.$serialize,this.lf=a.$group,this.of=a.$sort;for(var b in a)"$"!=b.substr(0,1)&&(this.tf[b]=a[b])},importData:function(a,b){var c=a?a.data||a:[];if(this.jf=null,"function"==typeof c.serialize)this.order=webix.toArray([].concat(c.order)),this.pull=c.pull,c.branch&&this.branch&&(this.branch=webix.copy(c.branch),this.Mg=null);else{this.order=webix.toArray(),this.pull={};var d,e;if(webix.isArray(a))for(var f=0;f<a.length;f++)e=d=a[f],"object"==typeof e?d=e.id||webix.uid():e={id:d,value:d},this.order.push(e.id),this.qf&&this.qf(e),this.pull[e.id]=e;else for(var f in c)this.order.push(f),this.pull[f]={id:f,value:c[f]}}if(this.Pg&&!c.branch){this.branch={0:[]},this.Og||this.Lg("data");for(var g=0;g<this.order.length;g++){var f=this.order[g];this.Pg(this.pull[f],0,0,!1)}}this.callEvent("onStoreLoad",[]),b||this.callEvent("onStoreUpdated",[])},sync:function(a,b,c){var d=typeof a;if("string"==d&&(a=webix.$$("source")),"function"!=d&&"object"!=d&&(c=b,b=null),"DataStore"!=a.name){if(!a.data||"DataStore"!==a.data.name&&"TreeStore"!==a.data.name)return this.Ts=a,webix.callEvent("onSyncUnknown",[this,a,b]);a=a.data}var e=webix.bind(function(d,e,f){this.wf||(this.importData(a,!0),b&&this.silent(b),this.Y&&this.Y(),this.callEvent("onSyncApply",[]),c?c=!1:this.refresh())},this);this.ab=[a.attachEvent("onStoreUpdated",e),a.attachEvent("onIdChange",webix.bind(function(a,b){this.changeId(a,b),this.refresh(b)},this))],this.Ts=a,this.Us=this.attachEvent("onStoreUpdated",function(b,c,d){("update"==d||"save"==d)&&(this.wf=1,a.updateItem(b,c),this.wf=0)}),e()},unsync:function(){if(this.Ts){var a=this.Ts;if("DataStore"==a.name||a.data&&"DataStore"==a.data.name){for(var b=0;b<this.ab.length;b++)a.detachEvent(this.ab[b]);this.detachEvent(this.Us)}else webix.callEvent("onUnSyncUnknown",[this,a]);this.Ts=null}},destructor:function(){this.unsync(),this.pull=this.order=this.Me=null,this.i=this.j={}},add:function(a,b){if(this.tf)for(var c in this.tf)webix.isUndefined(a[c])&&(a[c]=this.tf[c]);this.qf&&this.qf(a);var d=this.id(a),e=arguments[2]||this.order,f=e.length;if((webix.isUndefined(b)||0>b)&&(b=f),b>f&&(b=Math.min(e.length,b)),this.callEvent("onBeforeAdd",[d,a,b])===!1)return!1;if(this.pull[d]=a,e.insertAt(d,b),this.jf){var g=this.jf.length;this.order.length&&(g=Math.min(b||0,g)),this.jf.insertAt(d,g)}return this.callEvent("onStoreUpdated",[d,a,"add"]),this.callEvent("onAfterAdd",[d,b]),a.id},remove:function(a){if(webix.isArray(a))for(var b=0;b<a.length;b++)this.remove(a[b]);else{if(this.callEvent("onBeforeDelete",[a])===!1)return!1;var c=this.getItem(a);this.order.remove(a),this.jf&&this.jf.remove(a),delete this.pull[a],this.Me[a]&&delete this.Me[a],this.callEvent("onStoreUpdated",[a,c,"delete"]),this.callEvent("onAfterDelete",[a])}},clearAll:function(){this.pull={},this.Me={},this.order=webix.toArray(),this.jf=this.url=null,this.callEvent("onClearAll",[]),this.refresh()},getIdByIndex:function(a){return this.order[a]},getIndexById:function(a){var b=this.order.find(a);return this.pull[a]?b:-1},getNextId:function(a,b){return this.order[this.getIndexById(a)+(b||1)]},getFirstId:function(){return this.order[0]},getLastId:function(){return this.order[this.order.length-1]},getPrevId:function(a,b){return this.order[this.getIndexById(a)-(b||1)]},sort:function(a,b,c){var d=a;"function"==typeof a?d={as:a,dir:b}:"string"==typeof a&&(d={by:a.replace(/#/g,""),dir:b,as:c});var e=[d.by,d.dir,d.as,d];this.callEvent("onBeforeSort",e)&&(this.order=this.xf(d,this.order),this.jf&&this.jf.length!=this.order.length&&(this.jf=this.xf(d,this.jf)),this.refresh(),this.callEvent("onAfterSort",e))},xf:function(a,b){var c=this.sorting.create(a);if(this.order.length){for(var d=webix.toArray(),e=b.length-1;e>=0;e--)d[e]=this.pull[b[e]];return d.sort(c),webix.toArray(d.map(function(a){return this.id(a)},this))}return b},Af:function(a){this.jf&&!a&&(this.order=this.jf,delete this.jf)},Bf:function(a,b,c){for(var d=webix.toArray(),e=0;e<this.order.length;e++){var f=this.order[e];a(this.getItem(f),b)&&d.push(f)}c&&this.jf||(this.jf=this.order),this.order=d},find:function(a,b){var c=[];for(var d in this.pull){var e=this.pull[d],f=!0;if("object"==typeof a){for(var g in a)if(e[g]!=a[g]){f=!1;break}}else a(e)||(f=!1);if(f&&c.push(e),b&&c.length)return c[0]}return c},filter:function(a,b,c){if((a||this.jf||this.Mg)&&this.callEvent("onBeforeFilter",[a,b])&&(this.Af(c),this.order.length)){if(a){var d=a;b=b||"","string"==typeof a&&(a=a.replace(/#/g,""),"function"==typeof b?d=function(c){return b(c[a])}:(b=b.toString().toLowerCase(),d=function(b,c){return-1!=(b[a]||"").toString().toLowerCase().indexOf(c)})),this.Bf(d,b,c,this.Cf)}this.refresh(),this.callEvent("onAfterFilter",[])}},Df:function(){for(var a=[],b=this.order.length-1;b>=0;b--)a[b]=this.pull[this.order[b]];return a},each:function(a,b,c){var d=this.order;c&&(d=this.jf||d);for(var e=0;e<d.length;e++)a.call(b||this,this.getItem(d[e]),e)},Ef:function(a,b){return function(){return a[b].apply(a,arguments)}},provideApi:function(a,b){b&&this.mapEvent({onbeforesort:a,onaftersort:a,onbeforeadd:a,onafteradd:a,onbeforedelete:a,onafterdelete:a,ondataupdate:a});for(var c=["sort","add","remove","exists","getIdByIndex","getIndexById","getItem","updateItem","refresh","count","filter","find","getNextId","getPrevId","clearAll","getFirstId","getLastId","serialize","sync"],d=0;d<c.length;d++)a[c[d]]=this.Ef(this,c[d])},addMark:function(a,b,c,d,e){var f=this.Me[a]||{};if(this.Me[a]=f,!f[b]){if(f[b]=d||!0,c){var g=f.$css||"";f.$css=g+" "+b}e||this.refresh(a)}return f[b]},removeMark:function(a,b,c,d){var e=this.Me[a];if(e){if(e[b]&&delete e[b],c){var f=e.$css;f&&(e.$css=f.replace(b,"").replace("  "," "))}d||this.refresh(a)}},getMark:function(a,b){var c=this.Me[a];return!!c&&c[b]},clearMark:function(a,b,c){for(var d in this.Me){var e=this.Me[d];e[a]&&(delete e[a],b&&e.$css&&(e.$css=e.$css.replace(a,"").replace("  "," ")),c||this.refresh(d))}},serialize:function(a){var b=this.order;a&&this.jf&&(b=this.jf);for(var c=[],d=0;d<b.length;d++){var e=this.pull[b[d]];this.vf&&(e=this.vf(e),e===!1)||c.push(e)}return c},sorting:{create:function(a){return this.Ff(a.dir,this.Gf(a.by,a.as))},as:{server:function(){return!1},date:function(a,b){return a-=0,b-=0,a>b?1:b>a?-1:0},"int":function(a,b){return a=1*a,b=1*b,a>b?1:b>a?-1:0},string_strict:function(a,b){return a=a.toString(),b=b.toString(),a>b?1:b>a?-1:0},string:function(a,b){return b?a?(a=a.toString().toLowerCase(),b=b.toString().toLowerCase(),a>b?1:b>a?-1:0):-1:1}},Gf:function(a,b){return a?("function"!=typeof b&&(b=this.as[b||"string"]),function(c,d){return b(c[a],d[a])}):b},Ff:function(a,b){return"asc"!=a&&a?function(a,c){return-1*b(a,c)}:b}}},webix.DataCollection=webix.proto({name:"DataCollection",isVisible:function(){return!!(this.data.order.length||this.data.jf||this.s.dataFeed)},$init:function(a){this.data.provideApi(this,!0);var b=a&&a.id?a.id:webix.uid();this.s.id=b,webix.ui.views[b]=this,this.data.attachEvent("onStoreLoad",webix.bind(function(){this.callEvent("onBindRequest",[])},this))},refresh:function(){this.callEvent("onBindRequest",[])}},webix.DataMove,webix.CollectionBind,webix.BindSource,webix.ValidateCollection,webix.DataLoader,webix.MapCollection,webix.EventSystem,webix.BaseBind,webix.Destruction,webix.Settings),webix.Scrollable={$init:function(a){return a&&!a.scroll&&this.If?this.y=this.y||this.w:((this.y||this.w).appendChild(webix.html.create("DIV",{"class":"webix_scroll_cont"},"")),this.y=(this.y||this.w).firstChild,void(webix.env.touch||webix.event(this.x,"scroll",webix.bind(function(a){this.callEvent&&webix.delay(function(){this.callEvent("onAfterScroll",[])},this)},this))))},scroll_setter:function(a){if(!a)return!1;var b="x"==a?"x":"xy"==a?"xy":"a"==a?"xy":"y";if(webix.Touch&&webix.Touch.$active)this.y.setAttribute("touch_scroll",b),this.attachEvent&&this.attachEvent("onAfterRender",webix.bind(this.Jf,this)),this.Kf=!0;else if(webix.env.$customScroll)webix.CustomScroll.enable(this,b);else{var c=this.y.parentNode.style;-1!=a.toString().indexOf("a")?c.overflowX=c.overflowY="auto":(-1!=b.indexOf("x")&&(this.ec=!0,c.overflowX="scroll"),-1!=b.indexOf("y")&&(this.cc=!0,c.overflowY="scroll"))}return b},Lf:function(a){if(!!this.s.scroll!=!!a){if(!webix.env.$customScroll){var b=this.y.parentNode.style;b.overflowX=b.overflowY=a?"auto":"hidden"}this.ec=this.cc=!!a,this.s.scroll=!!a}},getScrollState:function(){if(webix.Touch&&webix.Touch.$active){var a=webix.Touch.Mf(this.y);return{x:-a.e,y:-a.f}}return{x:this.y.parentNode.scrollLeft,y:this.y.parentNode.scrollTop}},scrollTo:function(a,b){webix.Touch&&webix.Touch.$active?(b=Math.max(0,Math.min(b,this.y.offsetHeight-this.dc)),a=Math.max(0,Math.min(a,this.y.offsetWidth-this.bc)),webix.Touch.Nf(this.y,-a,-b,this.s.scrollSpeed||"100ms")):(this.y.parentNode.scrollLeft=a,this.y.parentNode.scrollTop=b)},Jf:function(){if(-1!=this.s.scroll.toString().indexOf("x")){var a=this.y.scrollWidth;a&&(this.y.style.width="100%",this.y.style.width=a+"px")}if(webix.Touch&&webix.Touch.$active&&this.Kf){webix.Touch.Of(),webix.Touch.Pf();var b=this.getScrollState(),c=this.y.offsetWidth-this.$width-b.x,d=this.y.offsetHeight-this.$height-b.y;if(0>c||0>d){var a=0>c?Math.min(-c-b.x,0):-b.x,e=0>d?Math.min(-d-b.y,0):-b.y;webix.Touch.Nf(this.y,a,e,0)}}}},webix.protoUI({defaults:{size:10,page:0,group:5,template:"{common.pages()}",maxWidth:1e5,height:30,borderless:!0},name:"pager",on_click:{webix_pager_item:function(a,b){this.select(b)}},$init:function(a){this.data=this.s,this.y=this.x,this.x.className+=" webix_pager",(a.master===!1||0===a.master)&&this.$ready.push(this.wt)},wt:function(){this.refresh(),this.$master={refresh:function(){},select:function(){}}},select:function(a){if(this.$master&&"pager"==this.$master.name)return this.$master.select(a);switch(a){case"next":a=this.s.page+1;break;case"prev":a=this.s.page-1;break;case"first":a=0;break;case"last":a=this.s.limit-1}0>a&&(a=0),a>=this.data.limit&&(a=this.data.limit-1);var b=this.data.page;this.data.page=1*a,this.refresh()&&(this.s.animate&&this.Qf(b,1*a,this.s.animate)||this.$master.refresh())},ad:"webix_p_id",template_setter:webix.template,type:{template:function(a,b){return a.template.call(this,a,b)},pages:function(a){var b="";if(-1==a.page)return"";a.$min=a.page-Math.round((a.group-1)/2),a.$max=a.$min+1*a.group-1,a.$min<0&&(a.$max+=-1*a.$min,a.$min=0),a.$max>=a.limit&&(a.$min-=Math.min(a.$min,a.$max-a.limit+1),a.$max=a.limit-1);for(var c=a.$min||0;c<=a.$max;c++)b+=this.button({id:c,index:c+1,selected:c==a.page?"_selected":""});return b},page:function(a){return a.page+1},first:function(){return this.button({id:"first",index:webix.locale.pager.first,selected:""})},last:function(){return this.button({id:"last",index:webix.locale.pager.last,selected:""})},prev:function(){return this.button({id:"prev",index:webix.locale.pager.prev,selected:""})},next:function(){return this.button({id:"next",index:webix.locale.pager.next,selected:""})},button:webix.template("<button type='button' webix_p_id='{obj.id}' class='webix_pager_item{obj.selected}'>{obj.index}</button>")},clone:function(a){a.$view||(a.view="pager",a=webix.ui(a)),this.Rf=a,a.$master=this,this.Sf()},refresh:function(){var a=this.s;if(a.count){a.limit=Math.ceil(a.count/a.size);var b=Math.min(a.limit-1,a.page);return b!=a.page?this.$master.setPage(b):(a.page=b,b>=0&&b!=a.old_page||a.limit!=a.old_limit||a.old_count!=a.count?(this.render(),this.Sf(),a.old_limit=a.limit,a.old_page=a.page,a.old_count=a.count,!0):void 0)}},apiOnly_setter:function(a){return this.$apiOnly=a},Sf:function(){this.Rf&&(this.Rf.s.count=this.s.count,this.Rf.s.page=this.s.page,this.Rf.refresh())},Qf:function(a,b,c){if(a==b)return!1;if(this.Tf)return this.Uf&&window.clearTimeout(this.Uf),this.Uf=webix.delay(this.Qf,this,[a,b,c],100);var d=b>a?"left":"right";("top"==c.direction||"bottom"==c.direction)&&(d=b>a?"top":"bottom"),c.flip&&(d="");var e=0,f=this.$master.y;this.$master.Vf&&(f=this.$master.Vf,e=f.offsetTop,webix.html.addCss(this.$master.$view,"webix_animation"));var g=f.cloneNode(!0);g.style.width=f.style.width="100%",g.style.backgroundColor=f.style.backgroundColor="white",this.$master.refresh(),webix.html.insertBefore(g,f.nextSibling,f.parentNode);var h,i=c!==!0?c:{},j=webix.extend({direction:d,callback:webix.bind(function(){j.callback=null,webix.animate.breakLine(h),this.Tf=!1,this.$master.Vf&&webix.html.removeCss(this.$master.$view,"webix_animation")},this),top:e},i);h=webix.animate.formLine(f,g,j),webix.animate([f,g],j),this.Tf=!0}},webix.MouseEvents,webix.SingleRender,webix.ui.view,webix.EventSystem),webix.locale.pager={first:" &lt;&lt; ",last:" &gt;&gt; ",next:" &gt; ",prev:" &lt; "},webix.PagingAbility={pager_setter:function(a){function b(c){if(a.config.autosize&&this.getVisibleCount){var d=this.getVisibleCount();isNaN(d)?(a.config.size=1,webix.delay(b,this,[!0])):d!=a.config.size&&(a.config.size=d,a.refresh(),c===!0&&this.refresh())}var e=this.s.pager;return-1!=e.page&&(this.data.$min=this.sy(0,e.page*e.size),this.data.$max=this.sy(this.data.$min,e.size),this.data.$pagesize=this.data.$max-this.data.$min,!0)}if("string"==typeof a){var c=webix.$$(a);if(!c)return this.$blockRender=!0,webix.delay(function(){var b=webix.$$(a);this.s.pager=this.pager_setter(b);var c=b.s;c.count=this.data.ty(c.level),b.refresh(),this.$blockRender=!1,this.render()},this),null;a=c}return this.attachEvent("onBeforeRender",b),a.$view||(a.view="pager",a=webix.ui(a)),this.Wf=a,a.$master=this,this.data.attachEvent("onStoreUpdated",function(){var b=a.s;b.count=this.ty(b.level),a.refresh()}),this.data.ty=this.ty,a.s},ty:function(a){if(a&&0!==a){var b=0;return this.each(function(c){c.$level==a&&b++}),b}return this.count()},sy:function(a,b){var c=this.s.pager;if(c.level&&0!==c.level){var d=a,e=this.data.order.length;if(b)for(;e>d;){if(this.data.getItem(this.data.order[d]).$level==c.level){if(0===b)break;b--}d++}return d}return a+b},setPage:function(a){this.Wf&&this.Wf.select(a)},getPage:function(){return this.Wf.s.page},getPager:function(){return this.Wf}},webix.protoUI({name:"tooltip",defaults:{dy:0,dx:20},$init:function(a){"string"==typeof a&&(a={template:a}),this.type=webix.extend({},this.type),this.x=this.w=this.y=document.createElement("DIV"),this.w.className="webix_tooltip",webix.html.insertBefore(this.w,document.body.firstChild,document.body),webix.attachEvent("onClick",webix.bind(function(a){this.gz&&webix.$$(a)!=this&&this.hide()},this))},adjust:function(){},isVisible:function(){return!0},show:function(a,b){this.Xf||(this.data!=a&&(this.data=webix.extend({},a),this.render(a)),this.y.firstChild&&(this.w.style.top=b.y+this.s.dy+"px",this.w.style.left=b.x+this.s.dx+"px",this.w.style.display="block"),this.gz=!0)},hide:function(){this.data=null,this.w.style.display="none",this.gz=!1},disable:function(){this.Xf=!0},enable:function(){this.Xf=!1},type:{template:webix.template("{obj.id}"),templateStart:webix.template.empty,templateEnd:webix.template.empty}},webix.SingleRender,webix.Settings,webix.EventSystem,webix.ui.view),webix.AutoTooltip={tooltip_setter:function(a){if(a){"function"==typeof a&&(a={template:a});var b=!a.template,c=new webix.ui.tooltip(a);this.Vc();var d=this.attachEvent("onMouseMove",function(a,d){if(this.DA=d.clientX,this.EA=d.clientY,this.getColumnConfig){var e=c.type.column=this.getColumnConfig(a.column);if(b){if(!e.tooltip&&e.tooltip!=webix.undefined)return;var f=d.target||d.srcElements;if(f.getAttribute("webix_area")&&e.tooltip){var g=f.getAttribute("webix_area");c.type.template=function(a,b){var c=a[b.column.id];return webix.template(e.tooltip).call(this,a,b,c[g],g)}}else if(e.tooltip)c.type.template=e.tooltip=webix.template(e.tooltip);else{var h=this.getText(a.row,a.column);c.type.template=function(){return h}}}}webix.DragControl.active||c.show(this.getItem(a),webix.html.pos(d))}),e=webix.event(document.body,"mousemove",webix.bind(function(a){a=a||event,(this.DA!=a.clientX||this.EA!=a.clientY)&&c.hide()},this));return this.attachEvent("onDestruct",function(){this.config.tooltip&&this.config.tooltip.destructor()}),this.attachEvent("onAfterScroll",function(){c.hide()}),c.attachEvent("onDestruct",webix.bind(function(){this.detachEvent(d),webix.eventRemove(e)},this)),c}}},webix.protoUI({name:"proto",$init:function(){this.data.provideApi(this,!0),this.y=this.y||this.w,this.data.attachEvent("onStoreUpdated",webix.bind(function(){this.render.apply(this,arguments)},this))},$setSize:function(){webix.ui.view.prototype.$setSize.apply(this,arguments)&&this.render()},ad:"webix_item",on_mouse_move:{},type:{}},webix.PagingAbility,webix.DataMarks,webix.AutoTooltip,webix.ValidateCollection,webix.RenderStack,webix.DataLoader,webix.ui.view,webix.EventSystem,webix.Settings),webix.CodeParser={collapseNames:function(a,b,c){if(c=c||{},b=b||"",!a||"object"!=typeof a)return null;for(var d in a)!a[d]||"object"!=typeof a[d]||webix.isDate(a[d])||webix.isArray(a[d])?c[b+d]=a[d]:webix.CodeParser.collapseNames(a[d],b+d+".",c);return c},expandNames:function(a){var b,c,d,e,f,g={};for(f in a){for(d=f.split("."),c=d.length-1,e=g,b=0;c>b;b++)e[d[b]]||(e[d[b]]={}),e=e[d[b]];e[d[c]]=a[f]}return g}},webix.Values={$init:function(){this.elements={}},focus:function(a){if(a)this.ub(this.elements[a]);else for(var b in this.elements)if(this.ub(this.elements[b]))return!0},ub:function(a){return a&&a.focus?(a.focus(),!0):void 0},setValues:function(a,b){this.s.complexData&&(a=webix.CodeParser.collapseNames(a)),this.Zf(a,b)},Zf:function(a,b){this.Yf=b,this.blockEvent(),b&&this.$f||(this.$f={});for(var c in a)this.elements[c]||(this.$f[c]=a[c]);for(var c in this.elements){var d=this.elements[c];d&&(webix.isUndefined(a[c])?!b&&d.Ce&&d.setValue(""):d.setValue(a[c]),this.$f[c]=d.getValue())}this.unblockEvent(),this.callEvent("onValues",[])},isDirty:function(){return!!this.Yf||1===this.getDirtyValues(1)},setDirty:function(a){this.Yf=a,a||(this.$f=this.hz())},getDirtyValues:function(){var a={};if(this.$f)for(var b in this.elements){var c=this.elements[b].getValue();if(this.$f[b]!=c&&(a[b]=c,arguments[0]))return 1}return a},getCleanValues:function(){return this.$f},getValues:function(a){var b=this.hz(a);return this.s.complexData&&(b=webix.CodeParser.expandNames(b)),b},hz:function(a){var b,c=null,d=this.$f?webix.copy(this.$f):{};for(var e in this.elements)c=this.elements[e],b=!0,a&&("object"==typeof a?(a.hidden===!1&&(b=c.isVisible()),b&&a.disabled===!1&&(b=c.isEnabled())):b=a.call(this,c)),b?d[e]=c.getValue():delete d[e];return d},clear:function(){this.Yf=!1;var a={};for(var b in this.elements)this.elements[b].Ce&&(a[b]=this.elements[b].s.defaultValue||"");this.Zf(a)},markInvalid:function(a,b){if(b===!1)this.Qe(a);else{if("string"==typeof b){var c=this.elements[a];c&&(c.s.invalidMessage=b)}this.Te(a)}},Te:function(a){var b=this.elements[a];if(a&&b){this.Qe(a,!0),webix.html.addCss(b.x,"webix_invalid"),b.s.invalid=!0;var c=b.s.invalidMessage;"string"==typeof c&&b.setBottomText&&b.setBottomText()}},Qe:function(a,b){var c=this.elements[a];if(a&&c&&c.$view&&c.s.invalid){webix.html.removeCss(c.x,"webix_invalid"),c.s.invalid=!1;var d=c.s.invalidMessage;"string"==typeof d&&!b&&c.setBottomText&&c.setBottomText()}}},webix.protoUI({name:"toolbar",defaults:{type:"toolbar"},Gc:!0,_f:"webix_toolbar",ag:!1,$init:function(a){a.borderless||(this.w.style.borderWidth="1px"),this.w.className+=" "+this._f},Qs:function(){var a=this;a.elements={},webix.ui.each(this,function(b){return b.s.name&&b.getValue&&b.setValue&&(a.elements[b.s.name]=b,b.mapEvent&&b.mapEvent({onbeforetabclick:a,
onaftertabclick:a,onitemclick:a,onchange:a})),!b.setValues&&void 0}),this.setDirty(!1)},sc:function(){this.Qs()},Bc:function(a){var b=this.s;return b.elements&&!a&&(this.nc=a=b.elements,this.mc=this.ag,delete b.elements),this.s.elementsConfig&&this.eg(this.nc,b.elementsConfig),a},eg:function(a,b){for(var c=0;c<a.length;c++){var d=a[c];webix.extend(d,b);var e=b;d.elementsConfig&&(e=webix.extend(webix.extend({},d.elementsConfig),b));var f;f=d.body?[d.body]:d.rows||d.cols||d.cells||d.body,f&&this.eg(f,e)}},$getSize:function(a,b){var c=webix.ui.layout.prototype.$getSize.call(this,a,b),d=this.getParentView(),e=this.mc?3:1;return d&&this.mc!=d.mc&&(c[e]+=1e5),c},render:function(){},refresh:function(){this.render()}},webix.Scrollable,webix.AtomDataLoader,webix.Values,webix.ui.layout,webix.ValidateData),webix.protoUI({name:"template",$init:function(a){var b=this.fg[a.type];b&&(webix.extend(a,b),a.borderless&&(delete a.Ob,this.hc(a))),this.y==this.x?(this.y=webix.html.create("DIV"),this.y.className=" webix_template",this.x.appendChild(this.y)):this.y.className+=" webix_template",this.attachEvent("onAfterRender",this.hg)},setValues:function(a,b){this.data=b?webix.extend(this.data,a,!0):a,this.render()},getValues:function(){return this.data},$skin:function(){this.fg.header.height=this.fg.section.height=webix.skin.$active.barHeight},fg:{header:{css:"webix_header"},section:{css:"webix_section",borderless:!0},clean:{css:"webix_clean",borderless:!0}},onClick_setter:function(a){return this.on_click=webix.extend(this.on_click||{},a,!0),this.Sc||webix.extend(this,webix.MouseEvents),a},defaults:{template:webix.template.empty},gg:function(){this.ig=!1,this.jg(),this.resize()},jg:function(){this.ig||(this.ig=!0,this.render())},src_setter:function(a){return this.ig=!0,this.callEvent("onBeforeLoad",[]),webix.ajax(a,webix.bind(function(a){this.s.template=webix.template(a),this.gg(),this.callEvent("onAfterLoad",[])},this)),a},hg:function(){this.s.autoheight&&(this.ac=null,this.resize()),this.s.scroll&&-1!=this.s.scroll.indexOf("x")&&(this.y.style.width=this.y.scrollWidth+"px")},content_setter:function(a){a&&(this.ig=!0,this.render=function(){},this.y.appendChild(webix.toNode(a)))},refresh:function(){this.render()},setHTML:function(a){this.s.template=function(){return a},this.refresh()},setContent:function(a){this.y.innerHTML="",this.content_setter(a)},$setSize:function(a,b){if(webix.ui.view.prototype.$setSize.call(this,a,b)){if(this.jg(),this.s.autoheight){var c=this.getTopParentView();clearTimeout(c.kg),c.kg=webix.delay(this.resize,this)}return!0}},$getSize:function(a,b){return this.s.autoheight&&!this.s.type&&(this.s.height=this.lg()),webix.ui.view.prototype.$getSize.call(this,a,b)},lg:function(){var a;return this.jg(),webix.skin.$active.layoutPadding.space,this.y.style.height="auto",a=this.y.scrollHeight,this.y.style.height="",a},If:!0},webix.Scrollable,webix.AtomDataLoader,webix.AtomRender,webix.EventSystem,webix.ui.view),webix.protoUI({name:"iframe",$init:function(a){this.y=this.w,this.w.innerHTML="<iframe style='width:100%; height:100%' frameborder='0' onload='var t= $$(\""+a.id+"\"); if (t) t.callEvent(\"onAfterLoad\",[]);' src='about:blank'></iframe>"},load:function(a){this.src_setter(a)},src_setter:function(a){return this.getIframe().src=a,this.callEvent("onBeforeLoad",[]),a},getIframe:function(){return this.w.getElementsByTagName("iframe")[0]},getWindow:function(){return this.getIframe().contentWindow}},webix.ui.view,webix.EventSystem),webix.OverlayBox={showOverlay:function(a){this.mg?this.mg.innerHTML=a:(this.mg=webix.html.create("DIV",{"class":"webix_overlay"},a||""),webix.html.insertBefore(this.mg,this.x.firstChild,this.x),this.x.style.position="relative")},hideOverlay:function(){this.mg&&(webix.html.remove(this.mg),this.mg=null)}},webix.protoUI({name:"scrollview",defaults:{scroll:"y",scrollSpeed:"0ms"},$init:function(){this.x.className+=" webix_scrollview"},body_setter:function(a){a.borderless=!0,this.gd=webix.ui.A(a),this.gd.Xb=this,this.y.appendChild(this.gd.x)},getChildViews:function(){return[this.gd]},getBody:function(){return this.gd},resizeChildren:function(){this.ng=this.gd.$getSize(0,0),this.og(),webix.callEvent("onResize",[])},og:function(){var a=(this.Mw||webix.ui.scrollSize,Math.max(this.bc,this.ng[0])),b=Math.max(this.dc,this.ng[2]);if(this.gd.$setSize(a,b),this.y.style.width=this.gd.bc+"px",this.y.style.height=this.gd.dc+"px",webix.env.touch){var c=this.getScrollState(),d=this.gd.dc-this.dc;d<c.y&&this.scrollTo(null,d)}},$getSize:function(a,b){var c=this.ng=this.gd.$getSize(0,0),d=webix.ui.view.prototype.$getSize.call(this,a,b),e=this.Mw||webix.ui.scrollSize;return"x"==this.s.scroll?(d[2]=Math.max(d[2],c[2])+e,d[3]=Math.min(d[3],c[3])+e):"y"==this.s.scroll&&(d[0]=Math.max(d[0],c[0])+e,d[1]=Math.min(d[1],c[1])+e),d},$setSize:function(a,b){var c=webix.ui.scrollSize;webix.ui.scrollSize=this.Mw||c,webix.ui.view.prototype.$setSize.call(this,a,b)&&this.og(),webix.ui.scrollSize=c},scroll_setter:function(a){var b=webix.env.$customScroll;return"string"==typeof a&&0===a.indexOf("native-")&&(this.Mw=17,a=a.replace("native-"),webix.env.$customScroll=!1),a=webix.Scrollable.scroll_setter.call(this,a),webix.env.$customScroll=b,a},Qb:function(a){this.gd.destructor(),this.gd=a,this.gd.Xb=this,this.ed.appendChild(this.gd.x),this.resize()},showView:function(a){var b=webix.$$(a).$view.offsetTop-webix.$$(a).$view.parentNode.offsetTop;this.scrollTo(0,b)}},webix.Scrollable,webix.EventSystem,webix.ui.view),webix.TreeRenderStack={$init:function(){},pg:function(a){var b=this.data.Me[a.id];return this.callEvent("onItemRender",[a]),this.type.templateStart(a,this.type,b)+(a.$template?this.type["template"+a.$template](a,this.type,b):this.type.template(a,this.type,b))+this.type.templateEnd()},qg:function(a){return this.v.innerHTML=this.pg(a),this.v.firstChild},jb:function(a){var b="<div class='webix_tree_branch_"+a.$level+"'>"+this.pg(a);return a.open&&(b+=this.rg(a.id)),b+="</div>"},rg:function(a){var b="",c=this.data.branch[a];if(c){b+="<div class='webix_tree_leaves'>";for(var d=c.length-1,e=0;d>=e;e++){var f=this.getItem(c[e]);this.type.sg[f.$level]=e==d,b+=this.jb(f)}b+="</div>"}return b},render:function(a,b,c){if(webix.TreeRenderStack.tg=this,this.isVisible(this.s.id)&&!this.$blockRender){if(a){var d,e=this.getItem(a);if("add"!=c&&(d=this.getItemNode(a),!d))return;switch(c){case"branch":var f=d.parentNode,g=this.Ne(e);webix.html.insertBefore(g,f),webix.html.remove(f),this.t=null;break;case"paint":case"update":var g=this.t[a]=this.qg(e);webix.html.insertBefore(g,d),webix.html.remove(d);break;case"delete":webix.html.remove(d.parentNode);break;case"add":var h;if(0==e.$parent)h=this.y.firstChild;else if(h=this.getItemNode(e.$parent)){if(!h.nextSibling){var i=webix.html.create("DIV",{"class":"webix_tree_leaves"},"");h.parentNode.appendChild(i)}h=h.nextSibling}if(h){var j=this.data.getNextSiblingId(a);j=this.getItemNode(j),j&&(j=j.parentNode);var g=this.Ne(e);this.t[a]=g.firstChild,webix.html.insertBefore(g,j,h)}break;default:return!1}this.callEvent("onPartialRender",[a,b,c])}else this.callEvent("onBeforeRender",[this.data])&&(this.type.sg=[],this.y.innerHTML=this.rg(0),this.t=null,this.callEvent("onAfterRender",[]));return this.type.sg=0,webix.TreeRenderStack.tg=null,!0}},getItemNode:function(a){if(this.t)return this.t[a];this.t={};for(var b=this.y.getElementsByTagName("DIV"),c=0;c<b.length;c++){var d=b[c].getAttribute(this.ad);d&&(this.t[d]=b[c])}return this.getItemNode(a)},vg:1},webix.SelectionModel={$init:function(){this.wg=webix.toArray(),this.data.attachEvent("onStoreUpdated",webix.bind(this.xg,this)),this.data.attachEvent("onStoreLoad",webix.bind(this.yg,this)),this.data.attachEvent("onAfterFilter",webix.bind(this.zg,this)),this.data.attachEvent("onIdChange",webix.bind(this.Ag,this)),this.$ready.push(this.uy)},uy:function(){("multiselect"==this.s.select||this.s.multiselect)&&webix.event(this.$view,"mousedown",function(a){var b=(a||event).shiftKey;b&&(webix.vy=this,webix.html.addCss(this,"webix_noselect",1))})},Ag:function(a,b){for(var c=this.wg.length-1;c>=0;c--)this.wg[c]==a&&(this.wg[c]=b)},zg:function(){for(var a=this.wg.length-1;a>=0;a--)if(this.data.getIndexById(this.wg[a])<0){var b=this.wg[a];this.removeCss(b,"webix_selected",!0),this.wg.splice(a,1),this.callEvent("onSelectChange",[b])}},xg:function(a,b,c){if("delete"==c)if(this.loadBranch)for(var d=this.wg.length-1;d>=0;d--)this.exists(this.wg[d])||this.wg.splice(d,1);else this.wg.remove(a);else a||this.data.count()||this.data.jf||(this.wg=webix.toArray())},yg:function(){this.s.select&&this.data.each(function(a){a&&a.$selected&&this.select(a.id)},this)},Bg:function(a,b,c,d){var e=b?"onBeforeSelect":"onBeforeUnSelect";if(!this.callEvent(e,[a,b]))return!1;d&&(this.Dg=!0,this.unselectAll(),this.Dg=!1),b?this.addCss(a,"webix_selected",!0):this.removeCss(a,"webix_selected",!0),c?c.push(a):(b?this.wg.push(a):this.wg.remove(a),this.Cg(a));var e=b?"onAfterSelect":"onAfterUnSelect";return this.callEvent(e,[a]),!0},select:function(a,b){var c=arguments[2],d=arguments[3];if(!a)return this.selectAll();if(!webix.isArray(a)){if(d&&this.wg.length)return this.selectAll(this.wg[this.wg.length-1],a);var e=!1;return c||b||1==this.wg.length&&this.wg[0]==a||(e=!0),!e&&this.isSelected(a)?void(c&&this.unselect(a)):void this.Bg(a,!0,null,e)}for(var f=0;f<a.length;f++)this.select(a[f],f?1:b,c,d)},unselect:function(a){return a?void(this.isSelected(a)&&this.Bg(a,!1)):this.unselectAll()},selectAll:function(a,b){var c,d=[];c=a||b?this.data.getRange(a||null,b||null):this.data.getRange(),c.each(function(a){this.data.getMark(a.id,"webix_selected")||(this.wg.push(a.id),this.Bg(a.id,!0,d))},this),this.Cg(d)},unselectAll:function(){var a=[];this.wg.each(function(b){this.Bg(b,!1,a)},this),this.wg=webix.toArray(),this.Cg(a)},isSelected:function(a){return-1!=this.wg.find(a)},getSelectedId:function(a){switch(this.wg.length){case 0:return a?[]:"";case 1:return a?[this.wg[0]]:this.wg[0];default:return[].concat(this.wg)}},getSelectedItem:function(a){var b=this.getSelectedId(!0);if(b.length>1||a){for(var c=b.length-1;c>=0;c--)b[c]=this.getItem(b[c]);return b}return b.length?this.getItem(b[0]):void 0},Eg:function(a){return a.length>100||a.length>this.data.count/2},Cg:function(a){if("object"!=typeof a&&(a=[a]),a.length){if(this.Eg(a))this.data.refresh();else for(var b=0;b<a.length;b++)this.render(a[b],this.data.getItem(a[b]),"update");this.Dg||this.callEvent("onSelectChange",[a])}}},webix.ready(function(){webix.event(document.body,"mouseup",function(a){webix.vy&&(webix.html.removeCss(webix.vy,"webix_noselect"),webix.vy=null)})}),webix.TreeDataMove={$init:function(){},copy:function(a,b,c,d){return d=d||{},d.copy=!0,this.move(a,b,c,d)},Kd:function(a,b,c){if(b&&a){var d=this.getBranchIndex(a);return d+(c==this&&c.getBranchIndex(b)<d?0:1)}},Lt:function(a,b){var c=this.data.branch[a];if(c&&c.length)for(var d=0;d<c.length;d++){if(c[d]==b)return!0;if(this.Lt(c[d],b))return!0}return!1},move:function(a,b,c,d){d=d||{},b=b||0;var e=d.newId||a,f=d.parent||0;if(c=c||this,c.data){if(!webix.isArray(a)){if(this!=c||d.copy){if(e=c.data.add(c.Jd(this.getItem(a),e),b,f||0),this.data.branch[a]&&c.getBranchIndex){var g=this.data.vf;this.data.vf=function(a){var b=webix.copy(a);return delete b.$parent,delete b.$level,delete b.$child,c.data.pull[b.id]&&(b.id=webix.uid()),b};var h={data:this.serialize(a,!0),parent:e};this.data.vf=g,c.parse(h)}d.copy||this.data.remove(a)}else{if(a==f||this.Lt(a,f))return;var i=this.getItem(a),j=this.data.branch[f];j||(j=this.data.branch[f]=[]);var k=this.data.branch[i.$parent],l=webix.PowerArray.find.call(k,a);if(0>b&&(b=Math.max(j.length-1,0)),k===j&&b===l)return;if(webix.PowerArray.removeAt.call(k,l),webix.PowerArray.insertAt.call(j,a,Math.min(j.length,b)),k.length||delete this.data.branch[i.$parent],i.$parent&&"0"!=i.$parent&&this.getItem(i.$parent).$count--,f&&"0"!=f){var m=c.getItem(f);m.$count++,this.Fg(i,m.$level+1)}else this.Fg(i,1);i.$parent=f,c.data.callEvent("onDataMove",[a,b,f,j[b+1]])}return this.refresh(),e}for(var n=0;n<a.length;n++){var o=this.move(a[n],b,c,d);b=c.Kd(o,a[n+1],this)}}},Fg:function(a,b){a.$level=b;var c=this.data.branch[a.id];if(c)for(var d=0;d<c.length;d++)this.Fg(this.getItem(c[d]),b+1)},Gg:function(a){a&&!a.header&&this.open(a)},$dropAllow:function(a){if(a.from!=a.to)return!0;for(var b=0;b<a.source.length;b++)if(a.source==a.target||this.Lt(a.source,a.target))return!1;return!0},Jd:function(a,b){var c=webix.DataMove.Jd.call(this,a,b);return delete c.open,c}},webix.TreeDataLoader={$init:function(){this.data.attachEvent("onStoreUpdated",webix.bind(this.Hg,this),null,!0),this._e=this.Ig},Ig:function(a,b,c,d){var e=0===b?{parent:encodeURIComponent(a)}:null;webix.DataLoader.prototype._e.call(this,a,b,c,d,e)},loadBranch:function(a,b,c){a=a||0,this.data.url=this.data.url||c,this.callEvent("onDataRequest",[a,b,this.data.url])&&this.data.url&&this.data.feed.call(this,a,0,b,c)},Hg:function(a,b,c){c&&"add"!=c&&"delete"!=c&&"branch"!=c||this.data.Kg(this)}},webix.TreeStore={name:"TreeStore",$init:function(){this.Cf={showSubItems:!0},this.branch={0:[]},this.attachEvent("onParse",function(a,b){this.Lg(a.child),a.getInfo(b).S}),this.attachEvent("onClearAll",webix.bind(function(){this.Mg=null},this))},filterMode_setter:function(a){return webix.extend(this.Cf,a,!0)},Af:function(a){if(this.Mg&&!a){this.branch=this.Mg,this.order=webix.toArray(webix.copy(this.branch[0]));for(var b in this.branch)"0"!=b&&(this.getItem(b).$count=this.branch[b].length);delete this.Mg}},Bf:function(a,b,c,d){c&&this.Mg||(this.Mg=this.branch,this.branch=webix.clone(this.branch)),this.branch[0]=this.Ng(a,b,this.branch[0],1,d||{})},Ng:function(a,b,c,d,e){for(var f=[],g=e.level&&e.level!=d,h=0;h<c.length;h++){var i=c[h],j=this.getItem(i),k=!1,l=this.branch[i];if(g)k=!0;else if(a(this.getItem(i),b)){if(f.push(i),e.openParents!==!1)for(var m=this.getParentId(i);m&&"0"!=m;)this.getItem(m).open=1,m=this.getParentId(m);if(e.level||e.showSubItems)continue}else k=!0;if((g||!e.level)&&l){var n=this.branch[i]=this.Ng(a,b,l,d+1,e);j.$count=n.length,k&&n.length&&f.push(i)}}return f},count:function(){if(this.order.length)return this.order.length;var a=0;return this.eachOpen(function(){a++}),a},changeId:function(a,b){if(this.branch[a]){for(var c=this.branch[b]=this.branch[a],d=0;d<c.length;d++)this.getItem(c[d]).$parent=b;delete this.branch[a]}var e=this.getItem(a).$parent;if("0"!==e){var f=webix.PowerArray.find.call(this.branch[e],a);this.branch[e][f]=b}return webix.DataStore.prototype.changeId.call(this,a,b)},clearAll:function(){this.branch={0:[]},webix.DataStore.prototype.clearAll.call(this)},getPrevSiblingId:function(a){var b=this.branch[this.getItem(a).$parent],c=webix.PowerArray.find.call(b,a)-1;return c>=0?b[c]:null},getNextSiblingId:function(a){var b=this.branch[this.getItem(a).$parent],c=webix.PowerArray.find.call(b,a)+1;return c<b.length?b[c]:null},getParentId:function(a){return this.getItem(a).$parent},getFirstChildId:function(a){var b=this.branch[a];return b&&b.length?b[0]:null},isBranch:function(a){return!!this.branch[a]},getBranchIndex:function(a){var b=this.branch[this.pull[a].$parent];return webix.PowerArray.find.call(b,a)},Lg:function(a){"string"==typeof a?this.Og=function(b){var c=b[a];return c&&delete b[a],c}:this.Og=a},kf:function(a,b){for(var c=a.S||0,d=0;d<b.length;d++){var e=this.driver.getDetails(b[d]),f=this.id(e),g=!!this.pull[f];g?(e=webix.extend(this.pull[f],e,!0),this.pf&&this.pf(e)):(this.qf&&this.qf(e),this.pull[f]=e),this.Pg(e,c,0,g,1*a.R+d)}var h=this.pull[c]||{},i=this.branch[c]||[];h.$count=i.length,delete h.webix_kids,a.Q&&a.Q!=i.length&&(i[a.Q]=null)},Pg:function(a,b,c,d,e){a.$count=0,a.$parent=b||0,a.$level=c||("0"!=b?this.pull[b].$level+1:1);var f=this.branch[a.$parent];if(f||(f=this.branch[a.$parent]=[]),this.Mg&&(this.Mg[a.$parent]=f),!d){var g=e||f.length;f[g]=a.id}var h=this.Og(a);if(a.webix_kids)return a.$count=-1;if(!h)return a.$count=0;webix.isArray(h)||(h=[h]);for(var i=0;i<h.length;i++){var j=webix.DataDriver.json.getDetails(h[i]),k=this.id(j);d=!!this.pull[k],d?(j=webix.extend(this.pull[k],j,!0),this.pf&&this.pf(j)):(this.qf&&this.qf(j),this.pull[k]=j),this.Pg(j,a.id,a.$level+1,d)}var l=this.branch[a.id];l&&(a.$count=l.length)},Kg:function(a){this.order=webix.toArray(),this.Qg(0,a)},Qg:function(a,b){for(var c=this.branch[a],d=0;d<c.length;d++){var e=c[d];this.order.push(e);var f=this.pull[e];f&&f.open&&(-1==f.$count?b.loadBranch(e):f.$count&&this.Qg(e,b))}},provideApi:function(a,b){for(var c=["getPrevSiblingId","getNextSiblingId","getParentId","getFirstChildId","isBranch","getBranchIndex","filterMode_setter"],d=0;d<c.length;d++)a[c[d]]=this.Ef(this,c[d]);a.getIndexById||webix.DataStore.prototype.provideApi.call(this,a,b)},getTopRange:function(){return webix.toArray([].concat(this.branch[0])).map(function(a){return this.getItem(a)},this)},eachChild:function(a,b,c,d){var e=this.branch;d&&this.Mg&&(e=this.Mg);var f=e[a];if(f)for(var g=0;g<f.length;g++)b.call(c||this,this.getItem(f[g]))},each:function(a,b,c,d){this.eachChild(d||0,function(d){var e=this.branch;a.call(b||this,d),c&&this.Mg&&(e=this.Mg),e[d.id]&&this.each(a,b,c,d.id)},this,c)},eachOpen:function(a,b,c){this.eachChild(c||0,function(c){a.call(b||this,c),this.branch[c.id]&&c.open&&this.eachOpen(a,b,c.id)})},eachSubItem:function(a,b){var c=this.branch[a||0];if(c)for(var d=0;d<c.length;d++){var e=c[d];this.branch[e]?(b.call(this,this.getItem(e),!0),this.eachSubItem(e,b)):b.call(this,this.getItem(e),!1)}},eachLeaf:function(a,b){var c=this.branch[a||0];if(c)for(var d=0;d<c.length;d++){var e=c[d];this.branch[e]?this.eachLeaf(e,b):b.call(this,this.getItem(e),!1)}},xf:function(a,b){var c=this.sorting.create(a);for(var d in this.branch){for(var e=this.branch[d],f=[],g=0;g<e.length;g++)f.push(this.pull[e[g]]);f.sort(c);for(var g=0;g<e.length;g++)f[g]=f[g].id;this.branch[d]=f}return b},add:function(a,b,c){var d=!1,e=this.getItem(c||0);if(e&&(this.branch[e.id]||(d=!0),e.$count++),this.branch[c||0]=this.order=webix.toArray(this.branch[c||0]),a.$count=0,a.$level=e?e.$level+1:1,a.$parent=e?e.id:0,this.Mg){var f=this.Mg[c||0];if(f||(f=this.Mg[c]=this.order),this.order!==f){var g=f.length;!b&&this.branch[c||0].length&&(g=0),f=webix.toArray(f),f.insertAt(a.id,g)}}var h=webix.DataStore.prototype.add.call(this,a,b);return d&&this.refresh(c),h},Rg:function(a,b){var c=this.pull[a];if(this.branch[c.id]&&this.branch[c.id].length>0)for(var d=this.branch[a],e=0;e<d.length;e++)this.Rg(d[e],!0);delete this.branch[a],this.Mg&&delete this.Mg[a],delete this.pull[a],this.Me[a]&&delete this.Me[a]},Wy:function(a,b,c){var d=a[b];1==d.length&&d[0]==c&&b?delete a[b]:webix.toArray(d).remove(c)},remove:function(a){var b=this.pull[a],c=b.$parent||0;if(this.callEvent("onBeforeDelete",[a])===!1)return!1;this.Rg(a),this.callEvent("onAfterDelete",[a]);var d=this.pull[c];this.Wy(this.branch,c,a),this.Mg&&this.Wy(this.Mg,c,a);var e=0;d&&(d.$count--,d.$count<=0&&(d.$count=0,d.open=0,e=1)),this.callEvent("onStoreUpdated",[a,b,"delete"]),e&&this.refresh(d.id)},getBranch:function(a){var b=[],c=(this.Mg||this.branch)[a];if(c)for(var d=0;d<c.length;d++)b[d]=this.pull[c[d]];return b},serialize:function(a,b){var c=this.branch;b&&this.Mg&&(c=this.Mg);for(var d=this.branch[a||0],e=[],f=0;f<d.length;f++){var g,h=this.pull[d[f]];if(this.vf){if(g=this.vf(h),g===!1)continue}else g=webix.copy(h);this.branch[h.id]&&(g.data=this.serialize(h.id,b)),e.push(g)}return e}},webix.TreeType={space:function(a,b){for(var c="",d=1;d<a.$level;d++)c+="<div class='webix_tree_none'></div>";return c},icon:function(a,b){return a.$count?a.open?"<div class='webix_tree_open'></div>":"<div class='webix_tree_close'></div>":"<div class='webix_tree_none'></div>"},checkbox:function(a,b){return a.nocheckbox?"":"<input type='checkbox' class='webix_tree_checkbox' "+(a.checked?"checked":"")+(a.disabled?" disabled":"")+">"},folder:function(a,b){return a.icon?"<div class='webix_tree_file webix_tree_"+a.icon+"'></div>":a.$count?a.open?"<div class='webix_tree_folder_open'></div>":"<div class='webix_tree_folder'></div>":"<div class='webix_tree_file'></div>"}},webix.TreeAPI={open:function(a,b){if(a){var c=this.getItem(a);c.$count&&!c.open&&(this.callEvent("onBeforeOpen",[a])&&(c.open=!0,this.data.callEvent("onStoreUpdated",[a,0,"branch"]),this.callEvent("onAfterOpen",[a])),b&&"0"!=a&&this.open(this.getParentId(a),b))}},close:function(a){if(a){var b=this.getItem(a);b.open&&this.callEvent("onBeforeClose",[a])&&(b.open=!1,this.data.callEvent("onStoreUpdated",[a,0,"branch"]),this.callEvent("onAfterClose",[a]))}},openAll:function(a){this.data.eachSubItem(a||0,function(a,b){b&&(a.open=!0)}),this.data.refresh()},closeAll:function(a){this.data.eachSubItem(a||0,function(a,b){b&&(a.open=!1)}),this.data.refresh()},Sg:function(a,b,c){if(this.s.threeState)return this.Tg(a,null!==b?b:"");var d,e=this.getItem(a),f=c?c.target||c.srcElement:null;d=f&&"checkbox"==f.type?!!f.checked:null!==b?b:!e.checked,e.checked=d,this.callEvent("onItemCheck",[a,e.checked,c])},isBranchOpen:function(a){if("0"==a)return!0;var b=this.getItem(a);return!!b.open&&this.isBranchOpen(b.$parent)},getOpenItems:function(){var a=[];for(var b in this.data.branch)this.exists(b)&&this.getItem(b).open&&a.push(b);return a},getState:function(){return{open:this.getOpenItems(),select:this.getSelectedId(!0)}},Ug:function(a,b){var c=this.data.attachEvent("onStoreLoad",function(){a.setState.call(a,b),a.data.detachEvent(c),a=null})},setState:function(a){if(a.open){this.closeAll();for(var b=a.open,c=0;c<b.length;c++){var d=this.getItem(b[c]);if(d&&d.$count&&(d.open=!0,-1==d.$count))return this.Ug(this,a),this.refresh(),0}this.refresh()}if(a.select&&this.select){var e=a.select;this.unselect();for(var c=0;c<e.length;c++)this.exists(e[c])&&this.select(e[c],!0)}return 1}},webix.TreeClick={webix_tree_open:function(a,b){return this.close(b),!1},webix_tree_close:function(a,b){return this.open(b),!1},webix_tree_checkbox:function(a,b){return this.Sg(b,null,a),!1}},webix.TreeCollection=webix.proto({name:"TreeCollection",$init:function(){webix.extend(this.data,webix.TreeStore,!0),this.data.provideApi(this,!0),webix.extend(this,webix.TreeDataMove,!0)}},webix.TreeDataLoader,webix.DataCollection),webix.DragOrder={Vg:!0,$drag:function(a,b){var c=webix.DragItem.$drag.call(this,a,b);if(c){var d=webix.DragControl.getContext();this.getBranchIndex&&(this.Wg=this.Xg?16*this.getItem(d.start).$level:0),d.fragile||this.addCss(d.start,"webix_transparent")}return c},WB:function(a,b){return webix.DragItem.WB(a,b)},$dragPos:function(a,b,c){var d=webix.html.offset(this.$view),e=d.x+(this.Xg?+d.width-webix.ui.scrollSize-1:1),f=a.y,g="x"==this.s.layout;g&&(f=d.y+(this.Xg?+d.height-webix.ui.scrollSize-1:1),e=a.x),c.style.display="none";var h=document.elementFromPoint(e,f);if(h!=this.Yg){var i=webix.$$(h);if(i&&i==this){var j=this.locate(h,!0),k=webix.DragControl.getContext().start;if(j){if(j!=this.Yg){if(j!=k){var l,m;this.getBranchIndex?(l={parent:this.getParentId(j)},m=this.getBranchIndex(j)):(l={},m=this.getIndexById(j)),this.callEvent("onBeforeDropOrder",[k,m,b,l])&&(this.move(k,m,this,l),this.Yg=j)}webix.DragControl.Cd=this.w}}else if(j="$webix-last",this.Yg!=j){if(!this.callEvent("onBeforeDropOrder",[k,-1,b,{parent:0}]))return;this.Yg=j}}}if(c.style.display="block",g)if(a.y=d.y,a.x=a.x-18,a.x<d.x)a.x=d.x;else{var n=d.x+this.$view.offsetWidth-60;a.x>n&&(a.x=n)}else if(d.y+=this.$g,a.x=this.Wg||d.x,a.y=a.y-18,a.y<d.y)a.y=d.y;else{var n=d.y+this.$view.offsetHeight-60;a.y>n&&(a.y=n)}webix.DragControl.Ed=!0},$dragIn:function(){return!1},$drop:function(a,b,c){var d=webix.DragControl.getContext(),e=d.start;this.removeCss(e,"webix_transparent");var f=this.getIndexById(e);this.callEvent("onAfterDropOrder",[e,f,c]),d.fragile&&this.refresh()}},webix.DragItem={_g:function(a,b,c){b||webix.DragControl.addDrop(a.w,a,!0),c||webix.DragControl.addDrag(a.w,a),this.attachEvent("onDragOut",function(a,b){this.$dragMark(a,b)})},drag_setter:function(a){return a&&("order"==a&&webix.extend(this,webix.DragOrder,!0),"inner"==a&&(this.ah=!0),this._g(this,"source"==a,"target"==a),delete this.drag_setter),a},$dragIn:function(a,b,c){var d=this.locate(c)||null,e=webix.DragControl.Gd;if((this.ah||e.from.ah)&&e.from!==this)return!1;var f=webix.DragControl.getMaster(b),g=this.getItemNode(d,c)||this.y;return g==webix.DragControl.Dd?g:(e.target=d,e.to=f,this.bh&&(this.bh=window.clearTimeout(this.bh)),this.bh=webix.delay(this.ch,this,[webix.html.pos(c),d],250),this.$dropAllow(e,c)&&this.callEvent("onBeforeDragIn",[e,c])?(this.$dragMark(e,c),g):(e.to=e.target=null,null))},$dropAllow:function(){return!0},Gg:function(a){},ch:function(a,b){var c=1,d=0,e=this.s.dragscroll;"string"==typeof e&&(d=-1!=e.indexOf("x"),c=-1!=e.indexOf("y"));var f=this.Vf||this.$view,g=webix.html.offset(f),h=g.y,i=h+f.offsetHeight,j=g.x,k=j+f.offsetWidth,e=this.getScrollState(),l=!1,m=40,n=webix.DragControl.getContext();this.Gg(b),c&&(a.y<h+m?(this.scrollTo(e.x,e.y-2*m),l=!0):a.y>i-m&&(this.scrollTo(e.x,e.y+2*m),l=!0)),d&&(a.x<j+m?(this.scrollTo(e.x-2*m,e.y),l=!0):a.x>k-m&&(this.scrollTo(e.x+2*m,e.y),l=!0)),l&&webix.DragControl.sd&&n&&n.to===this&&(this.bh=webix.delay(this.ch,this,[a],100))},_B:function(a){return a&&"object"==typeof a?a.toString():a},$dragOut:function(a,b,c,d){var e=(this.x.contains(c)?this.locate(d):null)||null,f=webix.DragControl.Gd;return(f.target||"").toString()==(e||"").toString()?null:(this.bh&&(this.bh=window.clearTimeout(this.bh)),f.target=f.to=null,this.callEvent("onDragOut",[f,d]),null)},$drop:function(a,b,c){this.bh&&(this.bh=window.clearTimeout(this.bh));var d=webix.DragControl.Gd;d.to=this;var e=this._B(d.target);this.getBranchIndex?e&&(d.parent=this.getParentId(e),d.index=this.getBranchIndex(e)):d.index=e?this.getIndexById(e):this.count(),this.$dragMark({},c),d.from&&d.from!=d.to&&d.from.callEvent&&d.from.callEvent("onBeforeDropOut",[d,c]),this.callEvent("onBeforeDrop",[d,c])&&(this.dh(d,c),this.callEvent("onAfterDrop",[d,c]))},dh:function(a,b){if(a.from){var c={parent:a.parent,mode:a.pos};a.from.move(a.source,a.index,a.to,c)}},WB:function(a,b){if(this.getItemNode){var c=this.locate(b,!0);return c?webix.html.offset(this.getItemNode(c)):null}},$drag:function(a,b){var c=this.locate(b,!0);if(c){var d=[c];if(this.getSelectedId&&!this.Vg){var e=this.getSelectedId(!0,!0);if(e&&e.length>1&&-1!=webix.PowerArray.find.call(e,c)){for(var f={},d=[],g=0;g<e.length;g++)f[e[g]]=!0;for(var g=0;g<this.data.order.length;g++){var h=this.data.order[g];f[h]&&d.push(h)}}}var i=webix.DragControl.Gd={source:d,start:c};if(i.fragile=this.addRowCss&&webix.env.touch&&(webix.env.isWebKit||webix.env.isFF),i.from=this,this.callEvent("onBeforeDrag",[i,b]))return webix.Touch&&(webix.Touch.km=null),i.html||this.$dragHTML(this.getItem(c),b)}return null},$dragHTML:function(a,b){return this.jb(a)},$dragMark:function(a,b){var c=null;return a.target&&(c=this._B(a.target)),this.eh&&this.eh!=c&&(a.fragile||this.removeCss(this.eh,"webix_drag_over"),this.eh=null),!this.eh&&c?(this.eh=c,a.fragile||this.addCss(c,"webix_drag_over"),c):!!a.to}},webix.Group={$init:function(){webix.extend(this.data,webix.GroupStore),this.data.attachEvent("onClearAll",webix.bind(function(){this.data.nf=this.data.fh=null,this.gh=0},this))},group:function(a){this.data.ungroup(!0),this.data.group(a)},ungroup:function(a){this.data.ungroup(a)}},webix.GroupMethods={sum:function(a,b){b=b||this;for(var c=0,d=0;d<b.length;d++)c+=1*a(b[d]);return c},min:function(a,b){b=b||this;for(var c=1/0,d=0;d<b.length;d++)1*a(b[d])<c&&(c=1*a(b[d]));return 1*c},max:function(a,b){b=b||this;for(var c=-(1/0),d=0;d<b.length;d++)1*a(b[d])>c&&(c=1*a(b[d]));return 1*c},count:function(a,b){return b.length},any:function(a,b){return a(b[0])},string:function(a,b){return a.$name}},webix.GroupStore={$init:function(){this.attachEvent("onClearAll",this.oz)},oz:function(){this.nf=this.fh=null,this.gh=0},ungroup:function(a){return this.getBranchIndex?this.hh.apply(this,arguments):void(this.nf&&(this.order=this.nf,this.pull=this.fh,this.fh=this.nf=null,a||this.callEvent("onStoreUpdated",[])))},mf:function(a){this.blockEvent(),this.group(a),this.unblockEvent()},ih:function(a){if("function"==typeof a)return a;var b=function(b){return b[a]};return b.$name=a,b},group:function(a){if(this.getBranchIndex)return this.jh.apply(this,arguments);var b=this.ih(a.by);a.map[b]||(a.map[b]=[b,this.kh]);var c={},d=[];this.each(function(e){var f=b(e);c[f]||(d.push({id:f,$group:!0,$row:a.row}),c[f]=webix.toArray()),c[f].push(e)});for(var e in a.map){var f=a.map[e][1]||"any",g=this.ih(a.map[e][0]);"function"!=typeof f&&(f=webix.GroupMethods[f]);for(var h=0;h<d.length;h++)d[h][e]=f.call(this,g,c[d[h].id])}this.nf=this.order,this.fh=this.pull,this.order=webix.toArray(),this.pull={};for(var h=0;h<d.length;h++){var i=this.id(d[h]);this.pull[i]=d[h],this.order.push(i)}this.callEvent("onStoreUpdated",[])},jh:function(a,b){this.gh=(this.gh||0)+1;var c;"string"==typeof a?(c={by:this.ih(a),map:{}},c.map[a]=[a]):c="function"==typeof a?{by:a,map:{}}:a;var d;b?d=this.getItem(b).$level:(b=0,d=0);for(var e=this.branch[b],f=this.ih(c.by),g=[],h=[],i=0;i<e.length;i++){var j=this.getItem(e[i]),k=f(j),l=d+"$"+k,m=this.branch[l];if(!m){var n=this.pull[l]={id:l,value:k,$group:!0,$row:c.row};h.push(n),m=this.branch[l]=[],m.lh=[],g.push(l)}m.push(j.id),m.lh.push(j)}this.branch[b]=g;for(var o in c.map){var p=c.map[o][1]||"any",q=this.ih(c.map[o][0]);"function"!=typeof p&&(p=webix.GroupMethods[p]);for(var i=0;i<h.length;i++)h[i][o]=p.call(this,q,this.branch[h[i].id].lh)}for(var i=0;i<h.length;i++){var r=h[i];if(this.hasEvent("onGroupCreated")&&this.callEvent("onGroupCreated",[r.id,r.value,this.branch[r.id].lh]),c.footer){var s="footer$"+r.id,t=this.pull[s]={id:s,$footer:!0,value:r.value,$level:d,$count:0,$parent:r.id,$row:c.footer.row};for(var o in c.footer){var p=c.footer[o][1]||"any",q=this.ih(c.footer[o][0]);"function"!=typeof p&&(p=webix.GroupMethods[p]),t[o]=p.call(this,q,this.branch[h[i].id].lh)}this.branch[r.id].push(t.id),this.callEvent("onGroupFooter",[t.id,t.value,this.branch[r.id].lh])}delete this.branch[r.id].lh}this.mh(g,b,d+1),this.callEvent("onStoreUpdated",[])},hh:function(a,b,c){if(c||this.gh){this.gh=Math.max(0,this.gh-1),b=b||0;for(var d=[],e=this.branch[b],f=0;f<e.length;f++){var g=e[f],h=this.branch[g];h&&(d=d.concat(h)),delete this.pull[g],delete this.branch[g]}this.branch[b]=d;for(var f=d.length-1;f>=0;f--)this.pull[d[f]].$footer&&d.splice(f,1);this.mh(d,0,1),a||this.callEvent("onStoreUpdated",[])}},mh:function(a,b,c){b&&(this.getItem(b).$count=a.length);for(var d=0;d<a.length;d++){var e=this.pull[a[d]];e.$level=c,e.$parent=b;var f=this.branch[e.id];f&&this.mh(f,e.id,c+1)}}},webix.clipbuffer={nh:null,oh:null,ph:0,init:function(){return null!==this.nh?this.nh:(webix.destructors.push(this),this.nh=document.createElement("textarea"),this.nh.className="webix_clipbuffer",this.nh.setAttribute("webixignore",1),document.body.appendChild(this.nh),webix.event(document.body,"keydown",webix.bind(function(a){var b=a.keyCode,c=!(!a.ctrlKey&&!a.metaKey);86===b&&c&&webix.delay(this.rh,this,[a],100)},this)),this.nh)},destructor:function(){this.nh=null},set:function(a){this.init(),this.nh.value=a,this.focus()},focus:function(){this.UA()||(this.init(),this.nh.focus(),this.nh.select())},UA:function(){var a="";return"undefined"!=typeof window.getSelection?a=window.getSelection().toString():"undefined"!=typeof document.selection&&"Text"==document.selection.type&&(a=document.selection.createRange().text),!!a},rh:function(a){var b=a.target||a.srcElement;if(b===this.nh){var c=this.nh.value,d=webix.UIManager.getFocus();!d||d.getEditor&&d.getEditor()||(d.callEvent("onPaste",[c]),this.nh.select())}}},webix.CopyPaste={clipboard_setter:function(a){return(a===!0||1===a)&&(a="modify"),this.attachEvent("onAfterSelect",function(a){if(!this.getEditor||!this.getEditor()){var b=this.getItem(a),c=this.type.templateCopy(b);webix.clipbuffer.set(c,this),webix.clipbuffer.focus()}}),this.attachEvent("onPaste",function(a){
webix.isUndefined(this.rh[this.s.clipboard])||this.rh[this.s.clipboard].call(this,a)}),this.attachEvent("onFocus",function(){webix.clipbuffer.focus()}),this.attachEvent("onItemClick",function(){document.activeElement&&this.$view.contains(document.activeElement)||(webix.clipbuffer.focus(),webix.UIManager.setFocus(this))}),a},rh:{insert:function(a){this.add({value:a})},modify:function(a){for(var b=this.getSelectedId(!0),c=0;c<b.length;c++)this.getItem(b[c]).value=a,this.refresh(b[c])},custom:function(a){}},templateCopy_setter:function(a){this.type.templateCopy=webix.template(a)},type:{templateCopy:function(a){return this.template(a)}}},webix.KeysNavigation={sh:function(a){return function(b,c){var d=c.srcElement||c.target;if(!d.getAttribute("webixignore")){var e=d.tagName;if("INPUT"==e||"TEXTAREA"==e||"SELECT"==e)return!0}return!(b&&b.moveSelection&&b.config.navigation&&!b.Eb)||b.moveSelection(a,c.shiftKey)}},moveSelection:function(a,b){var c=this.getSelectedId(!0);if(!c.length){if("down"==a)a="top";else{if("up"!=a)return;a="bottom"}c=[1]}if(1==c.length){if(c=c[0],"left"==a&&this.close)return this.close(c);if("right"==a&&this.open)return this.open(c);if("top"==a)c=this.getFirstId();else if("bottom"==a)c=this.getLastId();else if("up"==a||"left"==a||"pgup"==a){var d=this.getIndexById(c),e="pgup"==a?10:1;c=this.getIdByIndex(Math.max(0,d-e))}else{if("down"!=a&&"right"!=a&&"pgdown"!=a)return;var d=this.getIndexById(c),e="pgdown"==a?10:1;c=this.getIdByIndex(Math.min(this.count()-1,d+e))}this.showItem(c),this.select(c)}return!1},navigation_setter:function(a){return a&&!webix.UIManager.th&&(webix.UIManager.th=!0,webix.UIManager.addHotKey("up",this.sh("up")),webix.UIManager.addHotKey("down",this.sh("down")),webix.UIManager.addHotKey("shift+up",this.sh("up")),webix.UIManager.addHotKey("shift+down",this.sh("down")),webix.UIManager.addHotKey("shift+right",this.sh("right")),webix.UIManager.addHotKey("shift+left",this.sh("left")),webix.UIManager.addHotKey("pageup",this.sh("pgup")),webix.UIManager.addHotKey("pagedown",this.sh("pgdown")),webix.UIManager.addHotKey("home",this.sh("top")),webix.UIManager.addHotKey("end",this.sh("bottom")),webix.UIManager.addHotKey("right",this.sh("right")),webix.UIManager.addHotKey("left",this.sh("left"))),a}},webix.protoUI({name:"tree",defaults:{scroll:"a"},$init:function(){this.x.className+=" webix_tree",webix.extend(this.data,webix.TreeStore,!0),webix.extend(this.on_click,webix.TreeClick),this.attachEvent("onAfterRender",this.Jf),this.attachEvent("onPartialRender",this.Jf),this.data.provideApi(this,!0)},ad:"webix_tm_id",on_context:{},on_dblclick:{webix_tree_checkbox:function(){return this.on_click.webix_tree_checkbox?this.on_click.webix_tree_checkbox.apply(this,arguments):void 0}},on_click:{webix_tree_item:function(a,b){if(this.s.activeTitle){var c=this.getItem(b);c.open?this.close(b):this.open(b)}if(this.s.select)if("multiselect"==this.s.select||this.s.multiselect){if("level"==this.s.multiselect){var d=this.getSelectedId(!0)[0];if(d&&this.getParentId(b)!=this.getParentId(d))return}this.select(b,!1,a.ctrlKey||a.metaKey||"touch"==this.s.multiselect,a.shiftKey)}else this.select(b)}},rh:{insert:function(a){var b=this.getSelectedId()||"0";this.add({value:a},null,b)},modify:function(a){for(var b=this.getSelectedId(!0),c=0;c<b.length;c++)this.getItem(b[c]).value=a,this.refresh(b[c])},custom:function(a){}},Xg:!0,$dragHTML:function(a){return"<div class='borderless'>"+this.type.template(a,this.type)+"</div>"},type:webix.extend({template:function(a,b){var c=b["template"+a.level]||b.templateCommon;return c.apply(this,arguments)},classname:function(a,b,c){var d="webix_tree_item";return a.$css&&("object"==typeof a.$css&&(a.$css=webix.html.createCss(a.$css)),d+=" "+a.$css),c&&c.$css&&(d+=" "+c.$css),d},templateCommon:webix.template("{common.icon()} {common.folder()} <span>#value#</span>"),templateStart:webix.template('<div webix_tm_id="#id#" class="{common.classname()}">'),templateEnd:webix.template("</div>"),templateCopy:webix.template("#value#")},webix.TreeType)},webix.AutoTooltip,webix.Group,webix.TreeAPI,webix.DragItem,webix.TreeDataMove,webix.SelectionModel,webix.KeysNavigation,webix.MouseEvents,webix.Scrollable,webix.TreeDataLoader,webix.ui.proto,webix.TreeRenderStack,webix.CopyPaste,webix.EventSystem),webix.TreeStateCheckbox={uh:function(){if(this.vg){var a=this.render;this.render=function(b,c,d){var e=a.apply(this,arguments);this.s.threeState&&e&&"checkbox"!=c&&this.vh.apply(this,arguments)},this.uh=function(){}}},threeState_setter:function(a){return a&&this.uh(),a},vh:function(a){var b,c,d,e,f;if(d=[],f=this,a&&!f.data.pull[a]&&(a=0),!a||f.data.pull[a].$count)for(c=this.wh(a),c.sort(function(a,b){return f.data.pull[b].$level-f.data.pull[a].$level}),b=0;b<c.length;b++)b&&f.data.pull[c[b]].$parent==f.data.pull[c[b-1]].$parent||(d=d.concat(f.xh(c[b])));else d=d.concat(f.xh(a));for(e={},b=0;b<d.length;b++)e[d[b]]||(e[d[b]]=1,this.yh(d[b]));f=null},yh:function(a){var b,c;c=this.getItemNode(a),c&&(this.render(a,"checkbox","update"),this.getItem(a).indeterminate&&(c=this.getItemNode(a),b=c.getElementsByTagName("input")[0],b&&(b.indeterminate=this.getItem(a).indeterminate)))},xh:function(a){var b,c,d,e,f,g,h,i;for(e=this.getParentId(a),g=this,f=[];e&&"0"!=e;){h=0,c=0,this.data.eachChild(e,function(a){a.indeterminate?h++:a.checked&&c++}),b=d=i=!1;var j=this.getItem(e);c==j.$count?b=!0:(c>0||h>0)&&(d=!0),(d||d!=j.indeterminate)&&(i=!0),j.indeterminate=d,j.checked!=b&&(i=!0),j.checked=b,i?(f.push(e),e=this.getParentId(e)):e=0}return f},getChecked:function(){var a=[],b=this;return this.data.eachSubItem(0,function(c){b.isChecked(c.id)&&a.push(c.id)}),a},Tg:function(a,b){var c=this.getItem(a);if(c&&(""===b&&(b=!c.checked),c.checked!=b||c.indeterminate)){c.checked=b,this.zh(a);var d=this.xh(a);if(this.vg&&d.length<5)for(var e=0;e<d.length;e++)this.yh(d[e]);else this.refresh();this.callEvent("onItemCheck",[a,b])}},checkItem:function(a){this.Sg(a,!0),this.updateItem(a)},uncheckItem:function(a){this.Sg(a,!1),this.updateItem(a)},Ah:function(a,b,c){var d=b?"checkItem":"uncheckItem";a?this[d](a):a=0,this.s.threeState?a||this.data.eachChild(0,function(a){this[d](a.id)},this,c):this.data.each(function(a){this[d](a.id)},this,c,a)},checkAll:function(a,b){this.Ah(a,!0,b)},uncheckAll:function(a,b){this.Ah(a,!1,b)},zh:function(a){var b,c=this.getItem(a);c.indeterminate=!1,b=c.checked,this.data.eachSubItem(a,function(a){a.indeterminate=!1,a.checked=b}),this.vg&&this.isBranchOpen(c.$parent)&&this.render(a,0,"branch")},isChecked:function(a){return this.getItem(a).checked},wh:function(a){var b=[];return this.data.eachSubItem(a,function(a,c){c||b.push(a.id)}),b}},webix.ui.tree&&webix.extend(webix.ui.tree,webix.TreeStateCheckbox,!0),webix.type(webix.ui.tree,{name:"lineTree",css:"webixLineTree",icon:function(a,b){for(var c="",d="",e=1;e<=a.$level;e++){if(e==a.$level)var d=a.$count?a.open?"webix_tree_open ":"webix_tree_close ":"webix_tree_none ";var f=this.Bh(a,b,e);f&&(c+="<div class='"+d+" webix_tree_img webix_tree_"+f+"'></div>")}return c},Bh:function(a,b,c){var d=b.sg,e=webix.TreeRenderStack.tg;if(0===d&&e){var f=a.$level,g=a.id;for(d=[];f;){var h=e.getParentId(g),i=e.data.branch[h];i[i.length-1]==g&&(d[f]=!0),g=h,f--}b.sg=d}if(!d)return 0;if(c==a.$level){var j=3;return a.$parent||0===a.$index&&(j=4),d[a.$level]&&(j=2),a.$count?a.open?"minus"+j:"plus"+j:"line"+j}return d[c]?"blank":"line1"}}),webix.NavigationButtons={Ch:function(){webix.html.remove(this.Dh),this.Dh=webix.html.create("DIV",{"class":"webix_nav_panel webix_nav_panel_"+this.s.navigation.type},""),this.x.appendChild(this.Dh),this.Eh(),this.Fh(),this.Gh()},Gh:function(){var a=[];this.Dh&&(a[0]=webix.event(this.Dh,"click",webix.bind(function(a){for(var b=a.srcElement||a.target,c=!1;b!=this.Dh&&!c;){var d=b.getAttribute(this.Hh);d&&(c=!0,this.Ih(d)),b=b.parentNode}},this))),this.Jh&&(a[1]=webix.event(this.Jh,"click",webix.bind(function(a){this.Kh(-1)},this))),this.Lh&&(a[1]=webix.event(this.Lh,"click",webix.bind(function(a){this.Kh(1)},this))),this.attachEvent("onDestruct",function(){for(var b=0;b<a.length;b++)this.detachEvent(a[b]);a=null})},Kh:function(a){if(this.q){var b=this.Mh+a;(b>=this.q.length||0>b)&&(b=0>b?this.q.length-1:0),this.setActiveIndex(b)}},Ih:function(a){this.q&&webix.$$(a).show()},Eh:function(){var a,b;if(b=this.s.navigation,b.items){this.Hh=b.linkAttr||"bind_id",this.Dh?this.Nh():this.Ch();var c=this.q?this.q:this.data.order;if(c.length>1)for(var d=0;d<c.length;d++){a=webix.html.create("DIV",{"class":"webix_nav_item webix_nav_"+(d==this.Mh?"active":"inactive")},"<div></div>");var e=this.q?this.q[d].s.id:c[d];e&&a.setAttribute(this.Hh,e),this.Dh.appendChild(a)}}},Nh:function(){if(this.Dh)for(var a=this.Dh.childNodes,b=a.length-1;b>=0;b--)webix.html.remove(a[b])},Fh:function(){var a;a=this.s.navigation,a.buttons&&(this.Jh&&webix.html.remove(this.Jh),this.Jh&&webix.html.remove(this.Lh),this.Jh=webix.html.create("DIV",{"class":"webix_nav_button_"+a.type+" webix_nav_button_prev "},'<div class="webix_nav_button_inner"></div>'),this.x.appendChild(this.Jh),this.Lh=webix.html.create("DIV",{"class":"webix_nav_button_"+a.type+" webix_nav_button_next "},'<div class="webix_nav_button_inner"></div>'),this.x.appendChild(this.Lh))}},webix.protoUI({name:"list",Oh:"webix_list",$init:function(a){webix.html.addCss(this.x,this.Oh+("x"==(a.layout||this.defaults.layout)?"-x":"")),this.data.provideApi(this,!0),this.Ph=webix.bind(this.Ph,this),this.data.attachEvent("onStoreUpdated",this.Ph),this.data.attachEvent("onSyncApply",this.Ph),this.attachEvent("onAfterRender",this.hg)},$dragHTML:function(a,b){if("y"==this.s.layout&&"auto"==this.type.width){this.type.width=this.bc;var c=this.jb(a);return this.type.width="auto",c}return this.jb(a)},defaults:{select:!1,scroll:!0,layout:"y"},ad:"webix_l_id",on_click:{webix_list_item:function(a,b){this.s.select&&(this.Qh=!0,"multiselect"==this.s.select||this.s.multiselect?this.select(b,!1,a.ctrlKey||a.metaKey||"touch"==this.s.multiselect,a.shiftKey):this.select(b),this.Qh=!1)}},on_dblclick:{},getVisibleCount:function(){return Math.floor(this.dc/this.type.height)},Ph:function(){(this.s.autoheight||this.s.autowidth)&&this.resize()},Rh:function(a){var b=this.data.$pagesize||this.count();return this.Lf(a&&b>a),this.s.autoheight&&(a||1/0)>b&&(a=b),Math.max(this.type.height*a,this.s.minHeight||0)},Sh:function(a){var b=this.data.$pagesize||this.count();return this.Lf(a&&b>a),this.s.autowidth&&(a||1/0)>b&&(a=b),this.type.width*a},hg:function(){"x"==this.s.layout&&(this.y.style.width="auto"!=this.type.width?this.type.width*this.count()+"px":"auto")},$getSize:function(a,b){return"y"==this.s.layout?("auto"!=this.type.width&&(this.s.width=this.type.width+(this.cc?webix.ui.scrollSize:0)),(this.s.yCount||this.s.autoheight)&&(this.s.height=this.Rh(this.s.yCount)||1)):("auto"!=this.type.height&&(this.s.height=this.type.height+(this.ec?webix.ui.scrollSize:0)),(this.s.xCount||this.s.autowidth)&&(this.s.width=this.Sh(this.s.xCount)||1)),webix.ui.view.prototype.$getSize.call(this,a,b)},$setSize:function(){webix.ui.view.prototype.$setSize.apply(this,arguments)},type:{css:"",widthSize:function(a,b){return b.width+(b.width>-1?"px":"")},heightSize:function(a,b){return b.height+(b.height>-1?"px":"")},classname:function(a,b,c){var d="webix_list_item";return a.$css&&("object"==typeof a.$css&&(a.$css=webix.html.createCss(a.$css)),d+=" "+a.$css),c&&c.$css&&(d+=" "+c.$css),d},template:function(a){return(a.icon?"<span class='webix_icon fa-"+a.icon+"'></span> ":"")+a.value+(a.badge?"<div class='webix_badge'>"+a.badge+"</div>":"")},width:"auto",templateStart:webix.template('<div webix_l_id="#id#" class="{common.classname()}" style="width:{common.widthSize()}; height:{common.heightSize()}; overflow:hidden;">'),templateEnd:webix.template("</div>")},$skin:function(){this.type.height=webix.skin.$active.listItemHeight}},webix.KeysNavigation,webix.DataMove,webix.DragItem,webix.MouseEvents,webix.SelectionModel,webix.Scrollable,webix.ui.proto,webix.CopyPaste),webix.protoUI({name:"grouplist",defaults:{animate:{}},Oh:"webix_grouplist",$init:function(){webix.extend(this.data,webix.TreeStore,!0),this.data.count=function(){return this.order.length},this.data.provideApi(this,!0),this.data.attachEvent("onClearAll",webix.bind(this.Th,this)),this.Th()},Th:function(){this.Uh=[],this.Vh=[]},$setSize:function(){webix.ui.view.prototype.$setSize.apply(this,arguments)&&(this.y.style.width=this.bc)},on_click:{webix_list_item:function(a,b){if(this.Wh)return!1;for(var c=0;c<this.Vh.length;c++)if(this.Vh[c]==b){for(var d=c;d<this.Vh.length;d++)this.data.getItem(this.Vh[d]).$template="";return c?(this.Uh=this.data.branch[this.Vh[c-1]],this.Vh.splice(c)):(this.Uh=this.data.branch[0],this.Vh=[]),this.Xh=!1,this.render()}var e=this.getItem(b);return e.$count?(this.Xh=!0,this.Vh.push(b),e.$template="Back",this.Uh=this.data.branch[e.id],this.render()):void(this.s.select&&(this.Qh=!0,"multiselect"==this.s.select||this.s.multiselect?this.select(b,!1,"touch"==this.s.multiselect||a.ctrlKey||a.metaKey,a.shiftKey):this.select(b),this.Qh=!1))}},getOpenState:function(){return{parents:this.Vh,branch:this.Uh}},render:function(a,b,c,d){var e,f;if(this.Vh=webix.copy(this.Vh),this.Uh=webix.copy(this.Uh),this.Vh.length)for(e=0;e<this.Vh.length;e++)this.data.branch[this.Vh[e]]||(this.Vh.splice(e,1),e--);if(f=this.Vh.length?this.Vh[this.Vh.length-1]:0,this.Uh=webix.copy(this.data.branch[f]),!this.Uh.length&&this.Vh.length&&(this.Uh=[f],this.Vh.pop()),this.Wh)return webix.delay(this.render,this,arguments,100);for(e=0;e<this.Uh.length;e++)this.data.getItem(this.Uh[e]).$template="";if(this.Uh.length||(this.Uh=this.data.branch[0]),this.data.order=webix.toArray([].concat(this.Vh).concat(this.Uh)),this.callEvent("onBeforeRender",[this.data])){if(!this.Qh&&this.y.innerHTML&&webix.animate.isSupported()&&this.s.animate&&this.Yh!=this.Vh.length){if(this.callEvent("onBeforeRender",[this.data])){this.Zh||(this.Zh=[]);var g=this.y.cloneNode(!1);g.innerHTML=this.data.getRange().map(this.jb,this).join("");var h=webix.extend({},this.s.animate);h.direction=this.Xh?"left":"right";var i=[webix.clone(h),webix.clone(h)];if(this.Xh)this.Zh.push(this.getScrollState()),webix.Touch&&webix.Touch.$active&&(i[0].y=0,i[1].y=-this.getScrollState().y);else{var j=this.Zh.pop();webix.Touch&&webix.Touch.$active&&(i[0].y=-j.y,i[1].y=-this.getScrollState().y)}var k=webix.animate.formLine(g,this.y,h);webix.Touch&&webix.Touch.$active&&webix.Touch.Nf(g,0,this.Xh?0:i[0].y,"0ms"),h.master=this,h.callback=function(){this.y=g,this.Xh?webix.Touch&&webix.Touch.$active||this.scrollTo(0,0):webix.Touch&&webix.Touch.$active?webix.delay(function(){webix.Touch.Nf(g,0,i[0].y,"0ms")},this):j&&this.scrollTo(0,j.y),webix.animate.breakLine(k),h.master=h.callback=null,this.t=null,this.Wh=!1,this.callEvent("onAfterRender",[])},this.Wh=!0,webix.animate(k,i)}}else webix.RenderStack.render.apply(this,arguments);this.Yh=this.Vh.length}},templateBack_setter:function(a){this.type.templateBack=webix.template(a)},templateItem_setter:function(a){this.type.templateItem=webix.template(a)},templateGroup_setter:function(a){this.type.templateGroup=webix.template(a)},type:{template:function(a,b){return a.$count?b.templateGroup(a,b):b.templateItem(a,b)},css:"group",classname:function(a,b,c){return"webix_list_item webix_"+(a.$count?"group":"item")+(a.$template?"_back":"")+(c&&c.webix_selected?" webix_selected ":"")+(a.$css?a.$css:"")},templateStart:webix.template('<div webix_l_id="#id#" class="{common.classname()}" style="width:{common.widthSize()}; height:{common.heightSize()};  overflow:hidden;">'),templateBack:webix.template("#value#"),templateItem:webix.template("#value#"),templateGroup:webix.template("#value#"),templateEnd:function(a,b){var c="";return a.$count&&(c+="<div class='webix_arrow_icon'></div>"),c+="</div>"}},showItem:function(a){var b,c;for(a&&(b=this.getItem(a),c=b.$parent,b.$count&&(c=b.id)),this.Uh=this.data.branch[c||0],this.Vh=[];c;)this.getItem(c).$template="Back",this.Vh.unshift(c),c=this.getItem(c).$parent;this.Qh=!0,this.render(),this.Qh=!1,webix.RenderStack.showItem.call(this,a)}},webix.Group,webix.ui.list),webix.type(webix.ui.grouplist,{}),webix.protoUI({name:"unitlist",ad:"webix_item_id",uniteBy_setter:webix.template,sort_setter:function(a){return"object"!=typeof a&&(a={}),this.E(a,{dir:"asc",as:"string"}),a},render:function(a,b,c,d){var e=this.s;if(this.isVisible(e.id)){if(!e.uniteBy)return!1;if(a){var f=this.getItemNode(a);if(f&&"update"==c&&this.s.uniteBy.call(this,b)==this.getItem(a).$unitValue){var g=this.t[a]=this.Ne(b);return webix.html.insertBefore(g,f),void webix.html.remove(f)}}this.callEvent("onBeforeRender",[this.data])&&(this.units=null,this.$h(),this.units&&(this.y.innerHTML=this._h().map(this.jb,this).join(""),this.t=null),this.callEvent("onAfterRender",[]))}},getUnits:function(){var a=[];if(this.units)for(var b in this.units)a.push(b);return a},getUnitList:function(a){return this.units?this.units[a]:null},jb:function(a){var b=this.data.Me[a.id];return this.callEvent("onItemRender",[a]),a.$unit?this.type.templateStartHeader(a,this.type)+this.type.templateHeader.call(this,a.$unit)+this.type.templateEnd(a,this.type):this.type.templateStart(a,this.type,b)+(a.$template?this.type["template"+a.$template]:this.type.template)(a,this.type)+this.type.templateEnd(a,this.type)},_h:function(){var a,b,c,d;a=[];var e=this.data.$min||0,f=this.data.$max||1/0,g=0;for(c in this.units)for(a.push({$unit:c}),d=this.units[c],b=0;b<d.length;b++){if(g==e&&(a=[{$unit:c}]),a.push(this.getItem(d[b])),g==f)return webix.toArray(a);g++}return webix.toArray(a)},$h:function(){var a=this;this.units={},this.data.each(function(b){var c=a.s.uniteBy.call(this,b);b.$unitValue=c,a.units[c]||(a.units[c]=[]),a.units[c].push(b.id)})},type:{headerHeight:20,templateHeader:function(a){return"<span class='webix_unit_header_inner'>"+a+"</span>"},templateStart:function(a,b,c){if(a.$unit)return b.templateStartHeader.apply(this,arguments);var d="webix_list_item webix_list_"+b.css+"_item"+(c&&c.webix_selected?" webix_selected":"")+b.classname(a,b,c),e="width:"+b.widthSize(a,b,c)+"; height:"+b.heightSize(a,b,c)+"; overflow:hidden;"+(b.layout&&"x"==b.layout?"float:left;":"");return'<div webix_item_id="'+a.id+'" class="'+d+'" style="'+e+'">'},templateStartHeader:function(a,b,c){var d="webix_unit_header webix_unit_"+b.css+"_header"+(a.$selected?"_selected":""),e="width:"+b.widthSize(a,b,c)+"; height:"+b.headerHeight+"px; overflow:hidden;";return'<div webix_unit_id="'+a.$unit+'" class="'+d+'" style="'+e+'">'}},$skin:function(){this.type.headerHeight=webix.skin.$active.unitHeaderHeight||20}},webix.ui.list),webix.EditAbility={defaults:{editaction:"click"},$init:function(a){this.ai={},this.Eb=0,this.bi=0,this.w.style.position="relative",a&&(a.onDblClick=a.onDblClick||{}),this.attachEvent("onAfterRender",this.$s),this.s.editable&&this.ci(),webix.extend(this,webix.Undo)},Ux:function(a){try{if("number"==typeof a.selectionStart)a.selectionStart=a.selectionEnd=a.value.length;else if("undefined"!=typeof a.createTextRange){var b=a.createTextRange();b.collapse(!1),b.select()}}catch(c){}},$s:function(){var a=this.getEditor();if(a&&a.$inline&&!a.getPopup){var b=this.mi(a);if(b&&b!=a.node){var c=a.node.value;a.node=b,b.value=c,b.focus(),this.Ux(b)}else this.editStop()}},editable_setter:function(a){return a&&this.ci(),a},ci:function(){webix.attachEvent("onEditEnd",webix.bind(function(){this.Eb&&this.editStop()},this)),webix.attachEvent("onClick",webix.bind(function(a){this.Eb&&new Date-this.bi>200&&(this.di&&!this.di.popupType&&a&&this.di.node&&this.di.node.contains(a.target||a.srcElement)||this.editStop())},this)),this.data.attachEvent&&this.data.attachEvent("onIdChange",webix.bind(function(a,b){this.ei(a,b)},this)),this.attachEvent("onItemClick",function(a){this.s.editable&&"click"==this.s.editaction&&this.edit(a)}),this.attachEvent("onItemDblClick",function(a){this.s.editable&&"dblclick"==this.s.editaction&&this.edit(a)}),this.fi=webix.bind(function(){this.bi=new Date},this),this.ci=function(){},this.gi&&this.gi()},Vs:function(){webix.delay(function(){var a=this.getEditor();if(a&&a.config.liveEdit){var b={value:a.getValue(),old:a.value};if(b.value==b.old)return;a.value=b.value,this.ti(a,b.value),this.callEvent("onLiveEdit",[b,a])}},this)},hi:function(a){var b=this.s.form;"string"!=typeof b&&(this.s.form=b=webix.ui(b).config.id);var b=webix.$$(b),c=b.setValues?b:b.getChildViews()[0];c.setValues(this.getItem(a.row||a)),b.config.master=this.config.id,b.show(this.getItemNode(a));var d=c.getChildViews()[0];d.focus&&d.focus()},edit:function(a,b,c){if(this.callEvent("onBeforeEditStart",[a])){if(this.s.form)return this.hi(a);var d=this.ii(a);if(d){if(this.getEditor(a))return;b||this.editStop();var e=webix.extend({},webix.editors[d]),f=this.ji(a,e,c);e.config.liveEdit&&(this.Ws=this.attachEvent("onKeyPress",this.Vs));var g=e.getPopup?e.getPopup(f).x:f;return g&&webix.event(g,"click",this.fi),f&&webix.event(f,"change",this.ki,{bind:{view:this,id:a}}),c!==!1&&e.focus(),this.bi=webix.edit_open_time=new Date,webix.UIManager.setFocus(this,!0),this.callEvent("onAfterEditStart",[a]),e}return null}},getEditor:function(a){return a?this.ai[a]:this.di},ei:function(a,b){var c=this.ai[a];c&&(this.ai[b]=c,c.id=b,delete this.ai[a])},ki:function(a){this.view.hasEvent("onEditorChange")&&this.view.callEvent("onEditorChange",[this.id,this.view.getEditorValue(this.id)])},li:function(a){return this.s},ji:function(a,b,c){var d=(b.config=this.li(a),b.render());b.$inline&&(d=this.mi(a)),b.node=d;var e=this.getItem(a),f=e[this.s.editValue||"value"];return webix.isUndefined(f)&&(f=""),b.setValue(f,e),b.value=f,this.ni(a,b),c!==!1&&this.showItem(a),b.$inline||this.oi(a,d,!0),b.afterRender&&b.afterRender(),d},pi:function(a){return this.getItemNode(a)},mi:function(a){var b=this.pi(a);return b&&(b=b.getElementsByTagName("input")[0]||b),b},ii:function(a){return this.s.editor},ni:function(a,b){b.id=a,this.ai[a]=this.di=b,this.Eb++},qi:function(a){this.di==a&&(this.di=0),a.destroy&&a.destroy(),delete a.popup,delete a.node,delete this.ai[a.id],this.Eb--},focusEditor:function(a){var b=this.getEditor.apply(this,arguments);b&&b.focus&&b.focus()},editCancel:function(){this.editStop(null,null,!0)},Xy:function(a){if(a){var b=this.getEditor();if(b&&b.getPopup&&b.getPopup()==a.getTopParentView())return}this.editStop()},editStop:function(a){if(!this.Zx){this.Zx=1;var b=arguments[2],c=1;return a?c=this.ri(this.ai[a],b):this.si(function(a){c*=this.ri(a,b)}),this.Zx=0,c}},ug:function(a){var b=this.getItemNode(a);return{left:b.offsetLeft,top:b.offsetTop,height:b.offsetHeight,width:b.offsetWidth,parent:this.w}},oi:function(a,b,c){if(b.style){var d=this.ug(a);b.style.top=d.top+"px",b.style.left=d.left+"px",b.style.width=d.width-1+"px",b.style.height=d.height-1+"px",b.top=d.top,c&&d.parent.appendChild(b)}},si:function(a){for(var b in this.ai)a.call(this,this.ai[b])},ri:function(a,b){if(a){var c={value:a.getValue(),old:a.value};if(this.callEvent("onBeforeEditStop",[c,a,b])){if(!b){var d=c.old;"string"==typeof c.value&&(d+=""),(d!=c.value||a.config.liveEdit)&&this.updateItem(this.ti(a,c.value))}a.$inline?a.node=null:webix.html.remove(a.node);var e=a.config.suggest;return e&&"string"==typeof e&&webix.$$(e).hide(),this.qi(a),this.Ws&&this.detachEvent(this.Ws),this.callEvent("onAfterEditStop",[c,a,b]),1}return 0}},validateEditor:function(a){var b=!0;if(this.s.rules){var c=this.getEditor(a),d=c.column||this.s.editValue||"value",e=this.s.rules[d],f=this.s.rules.$all;if(e||f){var g=this.data.getItem(c.row||c.id),h=c.getValue(),i=c.getInputNode();e&&(b=e.call(this,h,g,d)),f&&(b=f.call(this,h,g,d)&&b),b?webix.html.removeCss(i,"webix_invalid"):webix.html.addCss(i,"webix_invalid"),webix.callEvent("onLiveValidation",[c,b,g,h])}}return b},getEditorValue:function(a){var b;return b=0===arguments.length?this.di:this.getEditor(a),b?b.getValue():void 0},getEditState:function(){return this.di||!1},editNext:function(a,b){if(a=a!==!1,1==this.Eb||b){var c=this.ui(this.di||b,function(a){return!!this.ii(a)},a);if(this.editStop())return c&&(this.edit(c),this.vi(c)),!1}},vi:function(){},ui:function(a,b,c){var d=this.getIndexById(a.id),e=this.data.order;if(c){for(var f=d+1;f<e.length;f++)if(b.call(this,e[f]))return e[f]}else for(var f=d-1;f>=0;f--)if(b.call(this,e[f]))return e[f];return null},ti:function(a,b){return this.getItem(a.id)[this.s.editValue||"value"]=b,a.id}},function(){function a(a,c){var d=a.config.suggest;if(d){var e=a.config.suggest=b(d),f=webix.$$(e);f&&c&&f.linkInput(c)}}function b(a){if("string"==typeof a)return a;if(a.linkInput)return a.s.id;"object"==typeof a?(webix.isArray(a)&&(a={data:a}),a.view=a.view||"suggest"):a===!0&&(a={view:"suggest"});var b=webix.ui(a);return b.config.id}webix.editors={text:{focus:function(){this.getInputNode(this.node).focus(),this.getInputNode(this.node).select()},getValue:function(){return this.getInputNode(this.node).value},setValue:function(b){var c=this.getInputNode(this.node);c.value=b,a(this,c)},getInputNode:function(){return this.node.firstChild},render:function(){return webix.html.create("div",{"class":"webix_dt_editor"},"<input type='text'>")}},"inline-checkbox":{render:function(){return{}},getValue:function(){return this.node.checked},setValue:function(){},focus:function(){this.node.focus()},getInputNode:function(){},$inline:!0},"inline-text":{render:function(){return{}},getValue:function(){return this.node.value},setValue:function(){},focus:function(){try{this.node.select(),this.node.focus()}catch(a){}},getInputNode:function(){},$inline:!0},checkbox:{focus:function(){this.getInputNode().focus()},getValue:function(){return this.getInputNode().checked},setValue:function(a){this.getInputNode().checked=!!a},getInputNode:function(){return this.node.firstChild.firstChild},render:function(){return webix.html.create("div",{"class":"webix_dt_editor"},"<div><input type='checkbox'></div>")}},select:{focus:function(){this.getInputNode().focus()},getValue:function(){return this.getInputNode().value},setValue:function(a){this.getInputNode().value=a},getInputNode:function(){return this.node.firstChild},render:function(){var a="",b=this.config.options||this.config.collection;if(b.data&&b.data.each)b.data.each(function(b){a+="<option value='"+b.id+"'>"+b.value+"</option>"});else if(webix.isArray(b))for(var c=0;c<b.length;c++){var d=b[c],e=webix.isUndefined(d.id),f=e?d:d.id,g=e?d:d.value;a+="<option value='"+f+"'>"+g+"</option>"}else for(var h in b)a+="<option value='"+h+"'>"+b[h]+"</option>";return webix.html.create("div",{"class":"webix_dt_editor"},"<select>"+a+"</select>")}},popup:{focus:function(){this.getInputNode().focus()},destroy:function(){this.getPopup().hide()},getValue:function(){return this.getInputNode().getValue()||""},setValue:function(a){this.getPopup().show(this.node),this.getInputNode().setValue(a)},getInputNode:function(){return this.getPopup().getChildViews()[0]},getPopup:function(){return this.config.popup||(this.config.popup=this.createPopup()),webix.$$(this.config.popup)},createPopup:function(){var a=this.config.popup||this.config.suggest;if(a){var b;return"object"!=typeof a||a.name?b=webix.$$(a):(a.view=a.view||"suggest",b=webix.ui(a)),b.linkInput&&b.linkInput(document.body),b}var c=webix.editors.$popup[this.popupType];return"string"!=typeof c&&(c=webix.editors.$popup[this.popupType]=webix.ui(c),this.popupInit(c)),c.s.id},popupInit:function(a){},popupType:"text",render:function(){return{}},$inline:!0}},webix.editors.color=webix.extend({focus:function(){},popupType:"color",popupInit:function(a){a.getChildViews()[0].attachEvent("onSelect",function(a){webix.callEvent("onEditEnd",[a])})}},webix.editors.popup),webix.editors.date=webix.extend({focus:function(){},popupType:"date",setValue:function(a){this.wi=this.config.stringResult||a&&"string"==typeof a,webix.editors.popup.setValue.call(this,a)},getValue:function(){return this.getInputNode().getValue(this.wi?webix.i18n.parseFormatStr:"")||""},popupInit:function(a){a.getChildViews()[0].attachEvent("onDateSelect",function(a){webix.callEvent("onEditEnd",[a])})}},webix.editors.popup),webix.editors.combo=webix.extend({xi:function(a){return this.config.popup?this.config.popup.config.id:a?b(a):this.rt(a)},rt:function(){var a=webix.editors.combo;return a.st=a.st||this.xi(!0)},render:function(){var a=webix.html.create("div",{"class":"webix_dt_editor"},"<input type='text'>"),b=this.config.suggest=this.xi(this.config.suggest);return b&&(webix.$$(b).linkInput(a.firstChild,!0),webix.event(a.firstChild,"click",webix.bind(this.showPopup,this))),a},getPopup:function(){return webix.$$(this.config.suggest)},showPopup:function(){var a=this.getPopup(),b=a.getList(),c=this.getInputNode(),d=this.getValue();a.show(c),d?b.exists(d)&&(b.select(d),b.showItem(d)):(b.unselect(),b.showItem(b.getFirstId())),a.ae=c},afterRender:function(){this.showPopup()},setValue:function(a){if(this.yi=a,this.config.suggest){var b=webix.$$(this.config.suggest),c=this.config.collection||this.config.options;c&&b.getList().data.importData(c),this.zi=this.getInputNode(this.node).value=b.getItemText(a)}},getValue:function(){var a=this.getInputNode().value;return this.config.suggest?a==this.zi?this.yi:webix.$$(this.config.suggest).getSuggestion():a}},webix.editors.text),webix.editors.richselect=webix.extend({focus:function(){},getValue:function(){return this.getPopup().getValue()},setValue:function(a){var b=this.config.collection||this.config.options;this.getInputNode(),b&&this.getPopup().getList().data.importData(b),this.getPopup().show(this.node),this.getPopup().setValue(a)},getInputNode:function(){return this.getPopup().getList()},popupInit:function(a){a.linkInput(document.body)},popupType:"richselect"},webix.editors.popup),webix.editors.password=webix.extend({render:function(){return webix.html.create("div",{"class":"webix_dt_editor"},"<input type='password'>")}},webix.editors.text),webix.editors.$popup={text:{view:"popup",width:250,height:150,body:{view:"textarea"}},color:{view:"popup",body:{view:"colorboard"}},date:{view:"popup",width:250,height:250,padding:0,body:{view:"calendar",icons:!0,borderless:!0}},richselect:{view:"suggest",body:{view:"list",select:!0}}}}(),webix.VirtualRenderStack={$init:function(){this.t={},webix.event(this.x,"scroll",webix.bind(this.Ai,this)),webix.env.touch&&this.attachEvent("onAfterScroll",webix.bind(this.Ai,this)),this.Bi=[]},getItemNode:function(a){return this.t[a]},showItem:function(a){var b=this.Ci(),c=this.data.getIndexById(a),d=Math.floor(c/b.Di)*b.Ei,e=this.getScrollState();(d<e.y||d+this.s.height>=e.y+this.dc)&&this.scrollTo(0,d)},render:function(a,b,c){if(this.isVisible(this.s.id)&&!this.$blockRender)if(a){var d=this.getItemNode(a);switch(c){case"update":if(!d)return;var e=this.t[a]=this.Ne(b);webix.html.insertBefore(e,d),webix.html.remove(d);break;default:this.Fi()}}else this.callEvent("onBeforeRender",[this.data])&&(this.t={},this.Ai(null,!0),this.Gi=!1,this.callEvent("onAfterRender",[]))},Fi:function(){this.Gi||(this.Gi=!0,window.setTimeout(webix.bind(function(){this.render()},this),1))},Hi:function(a){var b=document.createElement("DIV");return b.style.cssText="height:"+a+"px; width:100%; overflow:hidden;",b},Ai:function(a,b){this.Bi=[];var c=this.Ci();(!this.y.firstChild||b)&&(this.y.innerHTML="",this.y.appendChild(this.Hi(c.Ii)),this.u=[this.y.firstChild]);for(var d=c.R;d<=c.Ji;){for(;this.u[d]&&this.u[d].Ki&&d<=c.Ji;)d++;if(d>c.Ji)break;for(var e=d;!this.u[e];)e--;var f=this.u[e],g=d*c.Di+(this.data.$min||0);if(g>(this.data.$max||1/0))break;var h=Math.min(g+c.Di-1,this.data.$max?this.data.$max-1:1/0),i=this.Hi(c.Ei),j=this.data.getIndexRange(g,h);if(!j.length)break;for(var k={$template:"Loading"},l=0;l<j.length;l++)j[l]||this.Bi.push(g+l),j[l]=this.jb(j[l]||k);i.innerHTML=j.join("");for(var l=0;l<j.length;l++)this.t[this.data.getIdByIndex(g+l)]=i.childNodes[l];var m=parseInt(f.style.height,10),n=(d-e)*c.Ei,o=m-n-c.Ei;if(webix.html.insertBefore(i,n?f.nextSibling:f,this.y),
this.u[d]=i,i.Ki=!0,0>=n&&o>0)f.style.height=o+"px",this.u[d+1]=f;else if(0>n?webix.html.remove(f):f.style.height=n+"px",o>0){var p=this.u[d+1]=this.Hi(o);webix.html.insertBefore(p,i.nextSibling,this.y)}d++}if(this.Bi.length){var q=this.Bi[0],r=this.Bi.pop()+1;if(r>q){var s=r-q;if(this.cf(s,q))return;s=Math.max(s,this.s.datafetch||this.s.loadahead||0),this.loadNext(s,q)}}},Ci:function(){var a=this.getScrollState(),b=a.y,c=this.bc,d=this.dc,e=this.type,f=Math.floor(c/e.width)||1,g=Math.floor(b/e.height),h=Math.ceil((d+b)/e.height)-1,i=this.data.$max?this.data.$max-this.data.$min:this.data.count(),j=Math.ceil(i/f)*e.height;return{R:g,Ji:h,Li:b,Ii:j,Ei:e.height,Di:f}},ug:function(a){var b=this.getItemNode(a);return b||(this.showItem(a),this.Ai(),b=this.getItemNode(a)),{left:b.offsetLeft,top:b.offsetTop,height:b.offsetHeight,width:b.offsetWidth,parent:this.w}}},webix.protoUI({name:"dataview",$init:function(a){a.sizeToContent&&this.$ready.unshift(this.Mi);var b=a.prerender||this.defaults.prerender;(b===!1||b!==!0&&"auto"!==a.height&&!a.autoheight)&&webix.extend(this,webix.VirtualRenderStack,!0),a.autoheight&&(a.scroll=!1),this.attachEvent("onBeforeRender",function(){this.iz()}),this.w.className+=" webix_dataview"},Mi:function(){var a=webix.html.create("DIV",0,this.type.template({}));a.style.position="absolute",document.body.appendChild(a),this.type.width=a.offsetWidth,this.type.height=a.offsetHeight,webix.html.remove(a)},defaults:{scroll:!0,datafetch:50},ad:"webix_f_id",on_click:{webix_dataview_item:function(a,b){this.s.select&&("multiselect"==this.s.select||this.s.multiselect?this.select(b,!1,"touch"==this.s.multiselect||a.ctrlKey||a.metaKey,a.shiftKey):this.select(b))}},on_dblclick:{},on_mouse_move:{},type:{template:webix.template("#value#"),templateLoading:webix.template("Loading..."),width:160,height:50,classname:function(a,b,c){var d="webix_dataview_item ";return b.css&&(d+=b.css+" "),a.$css&&("object"==typeof a.$css&&(a.$css=webix.html.createCss(a.$css)),d+=a.$css+" "),c&&c.$css&&(d+=c.$css+" "),d},templateStart:webix.template('<div webix_f_id="#id#" class="{common.classname()}" style="width:{common.width}px; height:{common.height}px; float:left; overflow:hidden;">'),templateEnd:webix.template("</div>")},Ni:function(a){return this.s.height=this.type.height*Math.ceil(this.data.count()/Math.floor(a/this.type.width))},autoheight_setter:function(a){return a&&(this.data.attachEvent("onStoreLoad",webix.bind(this.resize,this)),this.w.style.overflowY="hidden"),a},$getSize:function(a,b){this.s.xCount>0&&"auto"!=this.type.width&&!this.Nw&&(this.s.width=this.type.width*this.s.xCount+(this.cc?webix.ui.scrollSize:0)),this.s.yCount&&"auto"!=this.type.height&&(this.s.height=this.type.height*this.s.yCount);var c=this.s.width||this.bc;return this.s.autoheight&&c&&(this.Ni(c),this.scroll_setter(!1)),webix.ui.view.prototype.$getSize.call(this,a,b)},iz:function(){var a=!1;return this.s.yCount&&"auto"==this.type.height&&(this.type.height=Math.floor(this.dc/this.s.yCount),a=!0),this.s.xCount&&("auto"==this.type.width||this.Nw)?(this.Nw=!0,this.type.width=Math.floor(this.bc/this.s.xCount),a=!0):this.Nw=!1,a},$setSize:function(a,b){if(webix.ui.view.prototype.$setSize.call(this,a,b)){if(this.s.autoheight&&this.Ni()!=this.dc)return webix.delay(this.resize,this);(this.iz()||this.Ai)&&this.render()}}},webix.DataMove,webix.DragItem,webix.MouseEvents,webix.KeysNavigation,webix.SelectionModel,webix.Scrollable,webix.ui.proto),webix.DataDriver.htmltable={toObject:function(a){a=webix.toNode(a);var b=a.rows;return webix.html.remove(a),b},getRecords:function(a){for(var b=[],c=a[0]&&a[0].Oi?1:0;c<a.length;c++)b.push(a[c]);return b},getDetails:function(a){var b=a.getElementsByTagName("td");a={};for(var c=0;c<b.length;c++)a["data"+c]=b[c].innerHTML;return a},getInfo:function(a){return{Q:0,R:0}},getOptions:function(){},getConfig:function(a){var b=[],c=a[0].getElementsByTagName("th");c.length&&(a[0].Oi=!0);for(var d=0;d<c.length;d++){var e={id:"data"+d,header:this.Pi(c[d].innerHTML)},f=this.Qi(c[d]);e=webix.extend(e,f),b.push(e)}return b},Pi:function(a){var b=a.indexOf("json://");return-1!=b&&(a=JSON.parse(a.substr(b+7))),a},Qi:function(a){for(var b=a.attributes,c={},d=0;d<b.length;d++)c[b[d].nodeName]=this.Pi(b[d].nodeValue);return c.width=parseInt(c.width,10),c}},webix.protoUI({name:"vscroll",defaults:{scroll:"x",scrollStep:40,scrollPos:0,scrollSize:18,scrollVisible:1,zoom:1},$init:function(a){var b=a.scroll||"x",c=this.x=webix.toNode(a.container);c.className+=" webix_vscroll_"+b,c.innerHTML="<div class='webix_vscroll_body'></div>",webix.event(c,"scroll",this.Ri,{bind:this}),this.Si=0,this.Wi=0},Ti:function(a){return a>15e5?(this.s.zoom=Math.floor(a/15e5)+1,this.Ui=a-this.Si,a=Math.floor(a/this.s.zoom)+this.Si):(this.s.zoom=1,this.Ui=1/0),a},scrollWidth_setter:function(a){return a=this.Ti(a),this.x.firstChild.style.width=a+"px",a},scrollHeight_setter:function(a){return a=this.Ti(a),this.x.firstChild.style.height=a+"px",a},sizeTo:function(a,b,c){a=a-(b||0)-(c||0);var d=this.s.scrollSize;webix.env.isIE&&d&&(d+=1),d||!this.s.scrollVisible||webix.env.$customScroll||(this.x.style.pointerEvents="none",d=14),d?(this.x.style.display="block",b&&(this.x.style.marginTop=b+"px"),this.x.style["x"==this.s.scroll?"width":"height"]=Math.max(0,a)+"px",this.x.style["x"==this.s.scroll?"height":"width"]=d+"px"):this.x.style.display="none",this.Si=a},getScroll:function(){return this.s.scrollPos*this.s.zoom},getSize:function(){return(this.s.scrollWidth||this.s.scrollHeight)*this.s.zoom},scrollTo:function(a){0>a&&(a=0);var b=this.s;a=Math.min(((b.scrollWidth||b.scrollHeight)-this.Si)*b.zoom,a),0>a&&(a=0);var c=a/b.zoom;return this.Wi!=c?(this.x["x"==b.scroll?"scrollLeft":"scrollTop"]=c,this.Vi(c),!0):void 0},Ri:function(){var a=this.x["x"==this.s.scroll?"scrollLeft":"scrollTop"];a!=this.Wi&&this.Vi(a)},Vi:function(a){this.Wi=a,this.s.scrollPos=Math.min(this.Ui,a*this.s.zoom)||0,this.callEvent("onScroll",[this.s.scrollPos])},activeArea:function(a,b){this.Xi=b,webix.event(a,"mousewheel",this.Yi,{bind:this}),webix.event(a,"DOMMouseScroll",this.Yi,{bind:this}),this.uB(a)},uB:function(a){!webix.env.touch&&window.navigator.pointerEnabled&&(webix.html.addCss(a,"webix_scroll_touch_ie",!0),webix.event(a,"pointerdown",function(a){("touch"==a.pointerType||"pen"==a.pointerType)&&(this.km=webix.Touch.hm(a),this.vB=this.s.scrollPos)},{bind:this}),webix.event(document.body,"pointermove",function(a){var b;this.km&&(this.lm=webix.Touch.hm(a),"x"==this.s.scroll?b=this.lm.x-this.km.x:"y"==this.s.scroll&&(b=this.lm.y-this.km.y),b&&Math.abs(b)>5&&this.scrollTo(this.vB-b))},{bind:this}),webix.event(window,"pointerup",function(a){this.km&&(this.km=this.lm=null)},{bind:this}))},Yi:function(a){var b=0;return a.wheelDeltaX&&Math.abs(a.wheelDeltaX)>Math.abs(a.wheelDeltaY)?this.Xi&&this.s.scrollVisible&&(b=a.wheelDeltaX/-40):!this.Xi&&this.s.scrollVisible&&(b=webix.isUndefined(a.wheelDelta)?a.detail:a.wheelDelta/-40),webix.env.isSafari&&(this.Yy=a.target||a.srcElement),b&&this.scrollTo(this.s.scrollPos+b*this.s.scrollStep)?webix.html.preventEvent(a):void 0}},webix.EventSystem,webix.Settings),webix.Number={format:function(a,b){if(""===a||"undefined"==typeof a)return a;b=b||webix.i18n,a=parseFloat(a);var c=0>a?"-":"";a=Math.abs(a);var d=a.toFixed(b.decimalSize).toString();d=d.split(".");var e="";if(b.groupSize){var f=b.groupSize,g=d[0].length;do{g-=f;var h=g>0?d[0].substr(g,f):d[0].substr(0,f+g);e=h+(e?b.groupDelimiter+e:"")}while(g>0)}else e=d[0];return b.decimalSize?c+e+b.decimalDelimiter+d[1]:c+e},numToStr:function(a){return function(b){return webix.Number.format(b,a)}}},webix.Date={startOnMonday:!1,toFixed:function(a){return 10>a?"0"+a:a},weekStart:function(a){a=this.copy(a);var b=a.getDay();return this.startOnMonday&&(0===b?b=6:b--),this.datePart(this.add(a,-1*b,"day"))},monthStart:function(a){return a=this.copy(a),a.setDate(1),this.datePart(a)},yearStart:function(a){return a=this.copy(a),a.setMonth(0),this.monthStart(a)},dayStart:function(a){return this.datePart(a,!0)},dateToStr:function(a,b){return"function"==typeof a?a:webix.env.strict?function(b){var c="",d=0;return a.replace(/%[a-zA-Z]/g,function(e,f){c+=a.slice(d,f);var g=function(a){if("%d"==e)return webix.Date.toFixed(a.getDate());if("%m"==e)return webix.Date.toFixed(a.getMonth()+1);if("%j"==e)return a.getDate();if("%n"==e)return a.getMonth()+1;if("%y"==e)return webix.Date.toFixed(a.getFullYear()%100);if("%Y"==e)return a.getFullYear();if("%D"==e)return webix.i18n.calendar.dayShort[a.getDay()];if("%l"==e)return webix.i18n.calendar.dayFull[a.getDay()];if("%M"==e)return webix.i18n.calendar.monthShort[a.getMonth()];if("%F"==e)return webix.i18n.calendar.monthFull[a.getMonth()];if("%h"==e)return webix.Date.toFixed((a.getHours()+11)%12+1);if("%g"==e)return(a.getHours()+11)%12+1;if("%G"==e)return a.getHours();if("%H"==e)return webix.Date.toFixed(a.getHours());if("%i"==e)return webix.Date.toFixed(a.getMinutes());if("%a"==e)return a.getHours()>11?"pm":"am";if("%A"==e)return a.getHours()>11?"PM":"AM";if("%s"==e)return webix.Date.toFixed(a.getSeconds());if("%W"==e)return webix.Date.toFixed(webix.Date.getISOWeek(a));if("%c"==e){var b=a.getFullYear();return b+="-"+webix.Date.toFixed(a.getMonth()+1),b+="-"+webix.Date.toFixed(a.getDate()),b+="T",b+=webix.Date.toFixed(a.getHours()),b+=":"+webix.Date.toFixed(a.getMinutes()),b+=":"+webix.Date.toFixed(a.getSeconds())}return e};c+=g(b),d=f+2}),c+=a.slice(d,a.length)}:(a=a.replace(/%[a-zA-Z]/g,function(a){switch(a){case"%d":return'"+webix.Date.toFixed(date.getDate())+"';case"%m":return'"+webix.Date.toFixed((date.getMonth()+1))+"';case"%j":return'"+date.getDate()+"';case"%n":return'"+(date.getMonth()+1)+"';case"%y":return'"+webix.Date.toFixed(date.getFullYear()%100)+"';case"%Y":return'"+date.getFullYear()+"';case"%D":return'"+webix.i18n.calendar.dayShort[date.getDay()]+"';case"%l":return'"+webix.i18n.calendar.dayFull[date.getDay()]+"';case"%M":return'"+webix.i18n.calendar.monthShort[date.getMonth()]+"';case"%F":return'"+webix.i18n.calendar.monthFull[date.getMonth()]+"';case"%h":return'"+webix.Date.toFixed((date.getHours()+11)%12+1)+"';case"%g":return'"+((date.getHours()+11)%12+1)+"';case"%G":return'"+date.getHours()+"';case"%H":return'"+webix.Date.toFixed(date.getHours())+"';case"%i":return'"+webix.Date.toFixed(date.getMinutes())+"';case"%a":return'"+(date.getHours()>11?"pm":"am")+"';case"%A":return'"+(date.getHours()>11?"PM":"AM")+"';case"%s":return'"+webix.Date.toFixed(date.getSeconds())+"';case"%W":return'"+webix.Date.toFixed(webix.Date.getISOWeek(date))+"';case"%c":var c='"+date.getFullYear()+"';return c+='-"+webix.Date.toFixed((date.getMonth()+1))+"',c+='-"+webix.Date.toFixed(date.getDate())+"',c+="T",c+='"+webix.Date.toFixed(date.getHours())+"',c+=':"+webix.Date.toFixed(date.getMinutes())+"',c+=':"+webix.Date.toFixed(date.getSeconds())+"',b===!0&&(c+="Z"),c;default:return a}}),b===!0&&(a=a.replace(/date\.get/g,"date.getUTC")),new Function("date","if (!date) return ''; if (!date.getMonth) date=webix.i18n.parseFormatDate(date);  return \""+a+'";'))},strToDate:function(a,b){if("function"==typeof a)return a;var c,d,e,f=a.match(/%[a-zA-Z]/g),g="var temp=date.split(/[^0-9a-zA-Z]+/g);";if(!webix.i18n.calendar.monthShort_hash){for(e=webix.i18n.calendar.monthShort,d=webix.i18n.calendar.monthShort_hash={},c=0;c<e.length;c++)d[e[c]]=c;for(e=webix.i18n.calendar.monthFull,d=webix.i18n.calendar.monthFull_hash={},c=0;c<e.length;c++)d[e[c]]=c}if(webix.env.strict)return function(a){if(!a)return"";if("object"==typeof a)return a;var d=a.split(/[^0-9a-zA-Z]+/g),e=[0,0,1,0,0,0];for(c=0;c<f.length;c++){var g=f[c];if("%y"==g)e[0]=1*d[c]+(d[c]>30?1900:2e3);else if("%Y"==g)e[0]=1*(d[c]||0),e[0]<30&&(e[0]+=2e3);else if("%n"==g||"%m"==g)e[1]=(d[c]||1)-1;else if("%M"==g)e[1]=webix.i18n.calendar.monthShort_hash[d[c]]||0;else if("%F"==g)e[1]=webix.i18n.calendar.monthFull_hash[d[c]]||0;else if("%j"==g||"%d"==g)e[2]=d[c]||1;else if("%g"==g||"%G"==g||"%h"==g||"%H"==g)e[3]=d[c]||0;else if("%a"==g||"%A"==g)e[3]=e[3]%12+("am"==(d[c]||"").toLowerCase()?0:12);else if("%i"==g)e[4]=d[c]||0;else if("%s"==g)e[5]=d[c]||0;else if("%c"==g){var h=/(\d+)-(\d+)-(\d+)T(\d+):(\d+):(\d+)/g,i=h.exec(a);e[0]=1*(i[1]||0),e[0]<30&&(e[0]+=2e3),e[1]=(i[2]||1)-1,e[2]=i[3]||1,e[3]=i[4]||0,e[4]=i[5]||0,e[5]=i[6]||0}}return b?new Date(Date.UTC(e[0],e[1],e[2],e[3],e[4],e[5])):new Date(e[0],e[1],e[2],e[3],e[4],e[5])};for(c=0;c<f.length;c++)switch(f[c]){case"%j":case"%d":g+="set[2]=temp["+c+"]||1;";break;case"%n":case"%m":g+="set[1]=(temp["+c+"]||1)-1;";break;case"%y":g+="set[0]=temp["+c+"]*1+(temp["+c+"]>30?1900:2000);";break;case"%g":case"%G":case"%h":case"%H":g+="set[3]=temp["+c+"]||0;";break;case"%i":g+="set[4]=temp["+c+"]||0;";break;case"%Y":g+="set[0]=(temp["+c+"]||0)*1; if (set[0]<30) set[0]+=2000;";break;case"%a":case"%A":g+="set[3]=set[3]%12+((temp["+c+"]||'').toLowerCase()=='am'?0:12);";break;case"%s":g+="set[5]=temp["+c+"]||0;";break;case"%M":g+="set[1]=webix.i18n.calendar.monthShort_hash[temp["+c+"]]||0;";break;case"%F":g+="set[1]=webix.i18n.calendar.monthFull_hash[temp["+c+"]]||0;";break;case"%c":g+="var res = date.split('T');",g+="if(res[0]){ var d = res[0].split('-');",g+="set[0]= (d[0]||0)*1; if (set[0]<30) set[0]+=2000;",g+="set[1]= (d[1]||1)-1;",g+="set[2]= d[2]||1;}",g+="if(res[1]){ var t = res[1].split(':');",g+="set[3]= t[0]||0;",g+="set[4]= t[1]||0;",g+="set[5]= t[2]||0;}"}var h="set[0],set[1],set[2],set[3],set[4],set[5]";return b&&(h=" Date.UTC("+h+")"),new Function("date","if (!date) return ''; if (typeof date == 'object') return date; var set=[0,0,1,0,0,0]; "+g+" return new Date("+h+");")},getISOWeek:function(a){if(!a)return!1;var b=a.getDay();0===b&&(b=7);var c=new Date(a.valueOf());c.setDate(a.getDate()+(4-b));var d=c.getFullYear(),e=Math.floor((c.getTime()-new Date(d,0,1).getTime())/864e5),f=1+Math.floor(e/7);return f},getUTCISOWeek:function(a){return this.getISOWeek(a)},Jv:function(a,b,c,d){if(c){var e=d(a,b);if(e)for(var f=c>0?1:-1;e;)a.setHours(a.getHours()+f),e=d(a,b),f+=c>0?1:-1}},add:function(a,b,c,d){d&&(a=this.copy(a));var e=webix.Date.copy(a);switch(c){case"day":a.setDate(a.getDate()+b),this.Jv(a,e,b,function(a,b){return webix.Date.datePart(b,!0).valueOf()==webix.Date.datePart(a,!0).valueOf()});break;case"week":a.setDate(a.getDate()+7*b),this.Jv(a,e,7*b,function(a,b){return webix.Date.datePart(b,!0).valueOf()==webix.Date.datePart(a,!0).valueOf()});break;case"month":a.setMonth(a.getMonth()+b),this.Jv(a,e,b,function(a,b){return b.getMonth()==a.getMonth()&&b.getYear()==a.getYear()});break;case"year":a.setYear(a.getFullYear()+b),this.Jv(a,e,b,function(a,b){return b.getFullYear()==a.getFullYear()});break;case"hour":a.setHours(a.getHours()+b),this.Jv(a,e,b,function(a,b){return b.getHours()==a.getHours()&&webix.Date.datePart(b,!0)==webix.Date.datePart(a,!0)});break;case"minute":a.setMinutes(a.getMinutes()+b);break;default:webix.Date.add[c](a,b,c)}return a},datePart:function(a,b){b&&(a=this.copy(a));var c=this.copy(a);return c.setHours(0),c.getDate()!=a.getDate()?a.setHours(1):a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a},timePart:function(a,b){return b&&(a=this.copy(a)),(a.valueOf()/1e3-60*a.getTimezoneOffset())%86400},copy:function(a){return new Date(a.valueOf())},equal:function(a,b){return!(!a||!b)&&a.valueOf()===b.valueOf()},isHoliday:function(a){return a=a.getDay(),0===a||6==a?"webix_cal_event":void 0}},webix.i18n={Zi:["fullDateFormat","timeFormat","dateFormat","longDateFormat","parseFormat","parseTimeFormat"],parseFormat:"%Y-%m-%d %H:%i",parseTimeFormat:"%H:%i",numberFormat:webix.Number.format,priceFormat:function(a){return webix.i18n.$i(webix.i18n.numberFormat(a,webix.i18n._i))},setLocale:function(a){var b=function(a,c){for(var d in c)"object"!=typeof c[d]||webix.isArray(c[d])?a[d]=c[d]:(a[d]||(a[d]={}),b(a[d],c[d]))};"string"==typeof a&&(a=this.locales[a]),a&&b(this,a);for(var c=webix.i18n.Zi,d=0;d<c.length;d++){var e=c[d],f=webix.i18n[e+"UTC"];webix.i18n[e+"Str"]=webix.Date.dateToStr(webix.i18n[e],f),webix.i18n[e+"Date"]=webix.Date.strToDate(webix.i18n[e],f)}this.$i=webix.template(this.price),this._i=this.priceSettings||this,this.intFormat=webix.Number.numToStr({groupSize:this.groupSize,groupDelimiter:this.groupDelimiter,decimalSize:0})}},webix.i18n.locales={},webix.i18n.locales["en-US"]={groupDelimiter:",",groupSize:3,decimalDelimiter:".",decimalSize:2,dateFormat:"%m/%d/%Y",timeFormat:"%h:%i %A",longDateFormat:"%d %F %Y",fullDateFormat:"%m/%d/%Y %h:%i %A",price:"${obj}",priceSettings:{groupDelimiter:",",groupSize:3,decimalDelimiter:".",decimalSize:2},fileSize:["b","Kb","Mb","Gb","Tb","Pb","Eb"],calendar:{monthFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],hours:"Hours",minutes:"Minutes",done:"Done",clear:"Clear",today:"Today"},controls:{select:"Select"},dataExport:{page:"Page",of:"of"}},webix.i18n.setLocale("en-US"),webix.Undo={$init:function(){this.VA=webix.extend([],webix.PowerArray,!0),this.WA=-1},undo_setter:function(a){return a&&(this.XA(),this.XA=function(){}),a},XA:function(){var a=this;this.attachEvent("onBeforeDrop",function(b){if(b.from==b.to){var c=a.YA=webix.copy(this.getItem(b.start));this.data.branch?c.$index=this.getBranchIndex(c.id):c.$index=this.getIndexById(c.id)}}),this.data.attachEvent("onDataMove",function(b){if(a.YA&&a.YA.id==b){var c=a.YA;a.YA=null,a.ZA(b,c,"move")}}),this.attachEvent("onBeforeEditStop",function(a,b){this.$A=webix.copy(this.getItem(b.id||b.row))}),this.data.attachEvent("onBeforeDelete",function(b){if(this.getItem(b)){var c=a._A=webix.copy(this.getItem(b));this.branch?(c.$index=this.getBranchIndex(b),this.branch[b]&&(c.$branch=webix.copy(this.serialize(b)))):c.$index=this.getIndexById(b)}}),this.data.attachEvent("onStoreUpdated",function(b,c,d){var e=null;b&&("add"==d?e=webix.copy(c):"delete"==d?e=a._A:"update"==d&&a.$A&&a.$A.id==b&&(e=a.$A,a.$A=null),e&&a.ZA(b,e,d))}),this.data.attachEvent("onIdChange",function(b,c){"object"==typeof b&&(b=b.row);for(var d=0;d<a.VA.length;d++)a.VA[d].id==b&&(a.VA[d].id=c)})},ZA:function(a,b,c){!this.aB&&this.s.undo&&(this.VA.push({id:a,action:c,data:b}),20==this.VA.length&&this.VA.splice(0,1),this.bB||(this.WA=this.VA.length-1))},ignoreUndo:function(a,b){this.aB=!0,a.call(b||this),this.aB=!1},removeUndo:function(a){for(var b=this.VA.length-1;b>=0;b--)this.VA[b].id==a&&("id"==this.VA[b].action&&(a=this.VA[b].data),this.VA.removeAt(b));this.WA=this.VA.length-1},undo:function(a){if(a)this.ignoreUndo(function(){var b,c;for(c=this.VA.length-1;!b&&c>=0;c--)this.VA[c].id==a&&(b=this.VA[c]);b&&(this.cB(b),this.VA.removeAt(c+1),this.WA=this.VA.length-1)});else{var b=this.VA[this.WA];b&&(this.ignoreUndo(function(){this.cB(b),this.VA.removeAt(this.WA)}),this.WA--)}},cB:function(a){if("delete"==a.action){var b=null,c=a.data.$parent;a.data.$branch&&(b={parent:a.id,data:webix.copy(a.data.$branch)},delete a.data.$branch,c&&!this.data.branch[c]&&(c=0)),this.add(a.data,a.data.$index,c),b&&this.parse(b)}else"add"==a.action?this.remove(a.id):"update"==a.action?this.updateItem(a.id,a.data):"move"==a.action&&(a.data.$parent?this.getItem(a.data.$parent)&&this.move(a.id,a.data.$index,null,{parent:a.data.$parent}):this.move(a.id,a.data.$index))}},webix.protoUI({name:"datatable",defaults:{leftSplit:0,rightSplit:0,columnWidth:100,minColumnWidth:20,minColumnHeight:26,prerender:!1,autoheight:!1,autowidth:!1,header:!0,fixedRowHeight:!0,scrollAlignY:!0,scrollX:!0,scrollY:!0,datafetch:50},$skin:function(){var a=webix.skin.$active.rowHeight,b=this.defaults;b.rowHeight=a,b.headerRowHeight=webix.skin.$active.barHeight},on_click:{webix_richfilter:function(){return!1},webix_table_checkbox:function(a,b){b=this.locate(a);var c=this.getItem(b.row),d=this.getColumnConfig(b.column),e=a.target||a.srcElement,f="checkbox"==e.type?e.checked:c[b.column]!=d.checkValue,g=f?d.checkValue:d.uncheckValue;return c[b.column]=g,this.callEvent("onCheck",[b.row,b.column,g]),this.data.callEvent("onDataUpdate",[b,c]),this.data.callEvent("onStoreUpdated",[b.row,c,this.s.checkboxRefresh?"update":"save"]),!1},webix_table_radio:function(a){var b=this.locate(a),c=this.getItem(b.row),d=this.getColumnConfig(b.column);return this.eachRow(function(a){var c=this.data.pull[a];c&&c[b.column]==d.checkValue&&(c[b.column]=d.uncheckValue)}),c[b.column]=d.checkValue,this.callEvent("onCheck",[b.row,b.column,!0]),this.refresh(),!1}},on_dblclick:{webix_table_checkbox:function(){return this.on_click.webix_table_checkbox.apply(this,arguments)}},on_context:{},$init:function(a){this.on_click=webix.extend({},this.on_click);var b="<div class='webix_ss_header'><div class='webix_hs_left'></div><div class='webix_hs_center'></div><div class='webix_hs_right'></div></div><div class='webix_ss_body'><div class='webix_ss_left'><div class='webix_ss_center_scroll'></div></div>";b+="<div class='webix_ss_center'><div class='webix_ss_center_scroll'></div></div>",b+="<div class='webix_ss_right' ><div class='webix_ss_center_scroll'></div></div></div>",b+="<div class='webix_ss_hscroll'></div><div class='webix_ss_footer'><div class='webix_hs_left'></div><div class='webix_hs_center'></div><div class='webix_hs_right'></div></div><div class='webix_ss_vscroll_header'></div><div class='webix_ss_vscroll'></div><div class='webix_ss_vscroll_footer'></div>",this.w.innerHTML=b,this.bj=this.w.id=this.name+webix.uid(),this.w.className+=" webix_dtable",this.y=this.w,this.I=this.w.firstChild,this.Vf=this.I.nextSibling,this.cj=this.Vf.nextSibling.nextSibling,this.data.provideApi(this,!0),this.data.attachEvent("onParse",webix.bind(this.dj,this)),this.$ready.push(this.ej),this.fj=[],this.Mt=[],this.Nt=[],this.gj=[],this.hj={},this.ij={},this.$g=this.jj=0,this.Ns=[],this.data.attachEvent("onServerConfig",webix.bind(this.kj,this)),this.data.attachEvent("onServerOptions",webix.bind(this.lj,this)),this.attachEvent("onViewShow",this.Ow),webix.callEvent("onDataTable",[this,a])},mj:function(){this.nj=this.oj=webix.ui.scrollSize,webix.html.addStyle("#"+this.bj+" .webix_cell { height:"+this.s.rowHeight+"px; line-height:"+(this.s.rowLineHeight||this.s.rowHeight)+"px;"+(this.s.fixedRowHeight?"":"white-space:normal;")+" }"),webix.html.addStyle("#"+this.bj+" .webix_hcell { height:"+this.s.headerRowHeight+"px; line-height:"+this.s.headerRowHeight+"px;}"),this.mj=function(){}},ej:function(){this.data.attachEvent("onStoreLoad",webix.bind(this.nz,this)),this.data.attachEvent("onSyncApply",webix.bind(this.nz,this)),this.data.attachEvent("onStoreUpdated",webix.bind(function(){return this.render.apply(this,arguments)},this)),this.data.attachEvent("onStoreUpdated",webix.bind(this.pj,this)),this.render()},refresh:function(){this.render()},render:function(a,b,c){if("save"!=c){if("move"==c){var d=webix.DragControl.getContext();if(d&&d.fragile)return}if(!this.fj.length){var e=this.s.columns;if(!e||!e.length){if(!this.s.autoConfig||!this.data.order.length)return;this.tj=0,this.qj()}this.rj()}return!this.isVisible(this.s.id)||this.$blockRender?this.mj():!a||-1==b||"paint"!=c&&"update"!=c?(this.sj&&(clearTimeout(this.sj),this.sj=0),this.callEvent("onBeforeRender",[this.data])?(this.mj(),this.tj||this.uj(),this.bc&&(this.s.experimental&&("paint"==c||"update"==c)&&a?this.Kv(a):this.vj(!0,!0)),a&&"update"==c||(this.wj=this.xj(),this.yj()),this.callEvent("onAfterRender",[this.data]),!0):void 0):(this.sj&&clearTimeout(this.sj),void(this.sj&&this.Lv!=a?(this.Lv=null,this.sj=webix.delay(function(){this.render()},this)):(this.Lv=a,this.sj=webix.delay(function(){this.render(a,-1,c)},this))))}},getColumnConfig:function(a){return this.Aj[a]||this.am[a]},lj:function(a){for(var b in a){var c=this.getColumnConfig(b),d=new webix.DataCollection({data:a[b]});this.Ns.push(d),this.Bj(d,c)}},kj:function(a){a.columns&&this.tj&&this.refreshColumns(null,!0)},rj:function(){if(this.s.columns){this.fj=this.s.columns,this.Aj={};for(var a=0;a<this.fj.length;a++){var b=this.fj[a];this.Aj[b.id]=b;var c=b.cssFormat;c&&(b.cssFormat=webix.toFunctor(c,this.$scope)),b.width=b.width||this.s.columnWidth,"string"==typeof b.format&&(b.format=webix.i18n[b.format]||window[b.format]),webix.isUndefined(b.checkValue)&&(b.checkValue=1),webix.isUndefined(b.uncheckValue)&&(b.uncheckValue=0),b.css&&"object"==typeof b.css&&(b.css=webix.html.createCss(b.css));var d=b.template;d&&("string"==typeof d&&(d=d.replace(/#\$value#/g,"#"+b.id+"#")),b.template=webix.template(d))}this.Mj("header",this.Mt),this.Mj("footer",this.Nt),this.callEvent("onStructureLoad",[])}},Cj:function(){this.uj()},uj:function(){this.Fj=this.fj.length-this.s.rightSplit,this.Gj=0;for(var a=0;a<this.fj.length;a++){if(!this.fj[a].node){var b=webix.html.create("DIV");b.style.width=this.fj[a].width+"px",this.fj[a].node=b}a>=this.s.leftSplit&&a<this.Fj&&(this.Gj+=this.fj[a].width)}var c=[];if(this.s.rightSplit){var d=this.fj.length-this.s.rightSplit;c[d]=" webix_first",c[d-1]=" webix_last"}if(this.s.leftSplit){var e=this.s.leftSplit;c[e]=" webix_first",c[e-1]=" webix_last"}c[0]=(c[0]||"")+" webix_first";var f=this.fj.length-1;c[f]=(c[f]||"")+" webix_last";for(var a=0;a<this.fj.length;a++){var g=this.fj[a].node;g.setAttribute("column",a),g.className="webix_column "+(this.fj[a].css||"")+(c[a]||"")}this.Hj(),this.Ij(),this.Jj(),this.Kj(),this.tj=!0},Ij:function(){for(var a=0,b=0;b<this.fj.length;b++){var c=this.fj[b];(b==this.s.leftSplit||b==this.Fj)&&(a=0),c.node&&(c.node.style.left=a+"px",(this.s.leftSplit||this.s.rightSplit)&&(webix.html.remove(c.node),c.attached=!1)),a+=c.width}},Kj:function(){this.Lj||(this.Lj=0),this.$g=this.jj=0,this.s.header&&(this.fk(this.I,0,1),this.Mj("header",this.Mt),this.$g=this.Mt.Ot,this.Nj(this.I,"header",this.Mt)),this.s.footer&&(this.fk(this.cj,0,1),this.Mj("footer",this.Nt),this.jj=this.Nt.Ot,this.Nj(this.cj,"footer",this.Nt)),this.refreshHeaderContent(!1,!1),this.Oj(),this.Nk&&this.markSorting(this.Nk,this.Ok)},Mj:function(a,b){for(var c=0,d=0;d<this.fj.length;d++){var e=this.fj[d][a];e&&"object"==typeof e&&e.length||(webix.isUndefined(e)&&(e="header"==a?this.fj[d].id:""),e=[e]);for(var f=0;f<e.length;f++)"object"!=typeof e[f]&&(e[f]={text:e[f]}),e[f]&&e[f].height&&(b[f]=e[f].height);c=Math.max(c,e.length),this.fj[d][a]=e}b.Ot=c;for(var d=c-1;d>=0;d--)b[d]=b[d]||this.s.headerRowHeight,b.Ot+=1*b[d];for(var d=0;d<this.fj.length;d++)for(var g=this.fj[d][a],f=0;f<g.length;f++){if(g[f]&&g[f].rowspan)for(var h=1;h<g[f].rowspan;h++)g[f+h]=null;if(g[f]&&g[f].colspan)for(var h=1;h<g[f].colspan;h++)this.fj[d+h][a][f]=null}for(var d=0;d<this.fj.length;d++){var e=this.fj[d][a];if(e.length<c){var i=e.length-1;e[i].rowspan=c-e.length+1;for(var f=i+1;c>f;f++)e[f]=null}}return c},Pj:function(a,b){for(var c=a.getElementsByTagName("TD"),d=0;d<c.length;d++)if(c[d].getAttribute("active_id")==b)return c[d]},getHeaderContent:function(a){var b=this.Pj(this.I,a);if(b||(b=this.Pj(this.cj,a)),b){var c=this.hj[a],d=webix.ui.datafilter[c.content];return d.getHelper?d.getHelper(b,c):{type:d,getValue:function(){return d.getValue(b)},setValue:function(a){return d.setValue(b,a)}}}},Pt:function(a,b,c){var d=c?-1:0;for(c+=b,b;c>b;b++)d+=a[b]+1;return d},Qj:function(a,b,c,d,e){if(a==b)return"";for(var f="<table style='width:"+c+"px' cellspacing='0' cellpadding='0'>",g=a;b>g;g++){f+="<tr>";for(var g=a;b>g;g++)f+="<th  style='width:"+this.fj[g].width+"px'></th>";f+="</tr>"}for(var h=this.fj[0][d].length,i=0;h>i;i++){f+="<tr section='"+d+"'>";for(var g=a;b>g;g++){var j=this.fj[g][d][i];if(null!==j){j.content&&(j.contentId=j.contentId||webix.uid(),j.columnId=this.fj[g].id,j.format=this.fj[g].format,j.text=webix.ui.datafilter[j.content].render(this,j),this.hj[j.contentId]=j,this.Rj=!0),f+="<td column='"+(j.colspan?j.colspan-1+g:g)+"'";var k="";g==a&&(k+="webix_first");var l=g+(j.colspan?j.colspan-1:0);l>=b-1&&(k+=" webix_last"),k&&(f+=' class="'+k+'"');var m=e[i],n="";j.contentId&&(f+=" active_id='"+j.contentId+"'"),j.colspan&&(f+=" colspan='"+j.colspan+"'"),j.rowspan&&(f+=" rowspan='"+j.rowspan+"'",m=this.Pt(this.Mt,i,j.rowspan)),m!=this.s.headerRowHeight&&(n=" style='line-height:"+m+"px; height:"+m+"px;'");var o="webix_hcell",p=j.css;p&&("object"==typeof p&&(j.css=p=webix.html.createCss(p)),o+=" "+p),this.fj[g].$selected&&(o+=" webix_sel_hcell"),f+="><div class='"+o+"'"+n+">";var q=""===j.text?"&nbsp;":j.text;j.rotate&&(q="<div class='webix_rotate' style='width:"+(m-10)+"px; transform-origin:center "+(m-15)/2+"px;-webkit-transform-origin:center "+(m-15)/2+"px;'>"+q+"</div>"),f+=q+"</div></td>"}}f+="</tr>"}return f+="</tr></table>"},showItemByIndex:function(a,b){var c=this.s.pager;if(c){var d=Math.floor(a/c.size);d!=c.page&&webix.$$(c.id).select(d)}if(-1!=a){var e=this.Sj();if(a<e[0]+1||a>=e[1]-1){var f=this.Tj(c?this.data.$min:0,a);a<e[0]+1?f=Math.max(0,f-1):(f+=this.Uj(a)-this.Vj,a>0&&(f+=this.Uj(a-1)-1)),this.Wj.scrollTo(f)}}if(-1!=b){if(b<this.s.leftSplit)return;if(b>=this.Fj)return;var e=this.Xj();if(b<e[0]+1||b>=e[1]-1){for(var f=0,g=this.s.leftSplit;b>g;g++)f+=this.fj[g].width;b<e[0]+1||(f+=this.fj[b].width-this.Yj),this.Zj.scrollTo(f)}}},showCell:function(a,b){if(!b||!a){var c=this.getSelectedId(!0);1==c.length&&(b=b||c[0].column,a=a||c[0].row)}b=b?this.getColumnIndex(b):-1,a=a?this.getIndexById(a):-1,this.showItemByIndex(a,b)},scrollTo:function(a,b){if(this.Zj){if(this.$j)return this.$j(a,b);null!==a&&this.Zj.scrollTo(a),null!==b&&this.Wj.scrollTo(b)}},getScrollState:function(){if(this._j)return this._j();var a=this.ck?0:this.aC||0;return{x:this.bk||0,y:this.jk+a}},showItem:function(a){this.showItemByIndex(this.getIndexById(a),-1)},Nj:function(a,b,c){a.childNodes[0].innerHTML=this.Qj(0,this.s.leftSplit,this.dk,b,c),a.childNodes[1].innerHTML=this.Qj(this.s.leftSplit,this.Fj,this.Gj,b,c),a.childNodes[1].onscroll=webix.bind(this._s,this),a.childNodes[2].innerHTML=this.Qj(this.Fj,this.fj.length,this.ek,b,c)},_s:function(){var a=this.getScrollState().x,b=this.I.childNodes[1].scrollLeft;b!=a&&this.scrollTo(b,null)},pj:function(){this.refreshHeaderContent(!0,!0)},nz:function(){this.refreshHeaderContent(!1,!0)},refreshHeaderContent:function(a,b,c){this.s.header&&(b&&this.fk(this.I,a,1,c),this.fk(this.I,a,0,c)),this.s.footer&&(b&&this.fk(this.cj,a,1,c),this.fk(this.cj,a,0,c))},refreshFilter:function(a){(!a||this.hj[a])&&this.refreshHeaderContent(!1,!0,a)},fk:function(a,b,c,d){if(this.Rj&&a)for(var e=a.getElementsByTagName("TD"),f=0;f<e.length;f++)if(e[f].getAttribute("active_id")){var g=this.hj[e[f].getAttribute("active_id")];if(d&&d!=g.columnId)continue;var h=webix.ui.datafilter[g.content];c?h.getValue&&(g.value=h.getValue(e[f])):(!b||h.trackCells)&&h.refresh(this,e[f],g)}},headerContent:[],gk:function(a,b,c){this.oj?(a.style.height=Math.max(b,1)-1+"px",a.style.width=(this.Fj?0:c)+this.oj-1+"px",webix.env.isWebKit&&a.offsetWidth):a.style.display="none"},Oj:function(){this.s.header&&this.gk(this.hk,this.$g,this.Lj),this.s.footer&&this.gk(this.ik,this.jj,this.Lj)},sk:function(a,b){var c=!(this.s.autowidth||this.s.scrollX===!1);this.nj=c?webix.ui.scrollSize:0;var d=!(this.s.autoheight||this.s.scrollY===!1);this.oj=d?webix.ui.scrollSize:0,this.Zj&&(this.Zj.s.scrollSize=this.nj,this.Zj.s.scrollVisible=c),this.Wj&&(this.Wj.s.scrollSize=this.oj,this.Wj.s.scrollVisible=d)},Hj:function(){this.jk=0,this.bk=0;var a,b;if(a=b=1,(this.s.autoheight||this.s.scrollY===!1)&&(b=this.oj=0),(this.s.autowidth||this.s.scrollX===!1)&&(a=this.nj=0),webix.env.touch&&(a=b=0),this.Zj||(this.Zj=new webix.ui.vscroll({container:this.cj.previousSibling,scrollWidth:this.Gj,scrollSize:this.nj,scrollVisible:a}),!a||this.nj||webix.env.$customScroll||(this.Zj.x.style.position="absolute"),this.Zj.attachEvent("onScroll",webix.bind(this.kk,this))),!this.Wj){this.hk=this.cj.nextSibling;var c=this.hk.nextSibling;this.ik=c.nextSibling,this.Wj=new webix.ui.vscroll({container:c,scrollHeight:100,scroll:"y",
scrollSize:this.oj,scrollVisible:b}),this.Wj.activeArea(this.Vf),this.Zj.activeArea(this.Vf,!0),this.Wj.attachEvent("onScroll",webix.bind(this.lk,this))}this.bc&&this.callEvent("onResize",[this.bc,this.dc]),webix.env.$customScroll&&webix.CustomScroll.enable(this),this.Hj=function(){}},columnId:function(a){return this.fj[a].id},getColumnIndex:function(a){for(var b=0;b<this.fj.length;b++)if(this.fj[b].id==a)return b;return-1},nk:function(a,b){var c,d=0,e=0,f=0,g=0,h=0;for(c=0;c<this.fj.length&&((this.Fj==c||this.s.leftSplit==c)&&(d=0,h++),this.fj[c].id!=b);c++)d+=this.fj[c].width;for(e+=this.fj[c].width,c=0;c<this.data.order.length&&this.data.order[c]!=a;c++)g+=this.Uj(c);return f+=this.Uj(c),[d,e,g-this.jk,f,this.Vf.childNodes[h]]},ok:function(){return this.row},locate:function(a,b){if(this.s.subview&&this!=webix.$$(a))return null;for(a=a.target||a.srcElement||a;a&&a.getAttribute&&!a.getAttribute("view_id");){var c=webix.html.TC(a).toString(),d=null;if(-1!=c.indexOf("webix_cell")&&(d=this.pk(a),d&&(d.row=this.data.order[d.rind])),-1!=c.indexOf("webix_hcell")&&(d=this.pk(a),d&&(d.header=!0)),d)return b?d.header?null:d.row:(d.column=this.fj[d.cind].id,d.toString=this.ok,d);a=a.parentNode}return null},pk:function(a){var b=a.parentNode;if(!b)return null;var c=1*(a.getAttribute("column")||b.getAttribute("column")),d=a.getAttribute("row")||0;if(!d)for(var e=0;e<b.childNodes.length;e++)b.childNodes[e]==a&&(d=e+this.fj[c].qk);return{rind:d,cind:c}},rk:function(a){this.tj&&(this.Ij(),this.Jj(),this.Kj(),a||this.vj(!1,!1))},setColumnWidth:function(a,b,c){return this.Xs(this.getColumnIndex(a),b,c)},Xs:function(a,b,c,d){if(!isNaN(b)){var e=this.fj[a];e.minWidth&&b<e.minWidth?b=e.minWidth:b<this.s.minColumnWidth&&(b=this.s.minColumnWidth);var f=e.width;return f!=b&&(a>=this.s.leftSplit&&a<this.Fj&&(this.Gj+=b-f),e.width=b,!!e.node&&(e.node.style.width=b+"px",c||this.rk(),this.callEvent("onColumnResize",[e.id,b,f,!!d]),!0))}},FA:function(a){return(a.$height||this.s.rowHeight)+(a.$subopen?a.$subHeight:0)},Uj:function(a){var b=this.data.order[a];return b?this.FA(this.data.pull[b]):this.s.rowHeight},Tj:function(a,b){if(this.s.fixedRowHeight)return(b-a)*this.s.rowHeight;for(var c=0;b>a;a++)c+=this.Uj(a);return c},ug:function(a,b){1==arguments.length&&(b=a.column,a=a.row);for(var c=this.getItem(a),d=this.getColumnConfig(b),e=0,f=0,g=0;g<this.fj.length;g++){(g==this.s.leftSplit||g==this.Fj)&&(e=0);var h=this.fj[g];if(h.id==b){var i=g<this.s.leftSplit?0:g>=this.Fj?2:1;f=this.Vf.childNodes[i].firstChild;break}e+=h.width}var j=(this.data.order.length,this.Tj(this.ak||0,this.getIndexById(a)));return{parent:f,top:j+(this.ck||0),left:e,width:d.width,height:c.$height||this.s.rowHeight}},xj:function(){var a=this.s.pager,b=0,c=this.data.order.length;return a&&(b=a.size*a.page,c=Math.min(c,b+a.size),a.level&&(b=this.data.$min,c=this.data.$max)),this.Tj(b,c)},setRowHeight:function(a,b){if(!isNaN(b)){b<this.s.minColumnHeight&&(b=this.s.minColumnHeight);var c=this.getItem(a),d=c.$height||this.s.rowHeight;d!=b&&(c.$height=b,this.config.fixedRowHeight=!1,this.render(),this.callEvent("onRowResize",[a,b,d]))}},lk:function(a){if(this.jk=a,this.s.prerender)for(var b=this.Vf.childNodes,c=0;c<b.length;c++)b[c].scrollTop=a;else this.vj();webix.env.$customScroll&&webix.CustomScroll.sk(this.Vf),this.callEvent("onScrollY",[]),this.callEvent("onAfterScroll",[])},kk:function(a){this.Vf.childNodes[1].scrollLeft=this.bk=a,this.s.header&&(this.I.childNodes[1].scrollLeft=a),this.s.footer&&(this.cj.childNodes[1].scrollLeft=a),this.s.prerender===!1&&this.vj(!this.tk),webix.env.$customScroll&&webix.CustomScroll.sk(this.Vf),this.callEvent("onScrollX",[]),this.callEvent("onAfterScroll",[])},Xj:function(a){if(a)return[0,this.fj.length];for(var b=this.bk,c=this.s.leftSplit;b>0;)b-=this.fj[c].width,c++;var d=c;for(b&&c--,b+=this.Yj;b>0&&d<this.Fj;)b-=this.fj[d].width,d++;return[c,d]},getVisibleCount:function(){return Math.floor(this.Vj/this.config.rowHeight)},Sj:function(a){var b=this.jk,c=0,d=this.count(),e=this.s.pager;if(e){var c=e.page*e.size,d=Math.min(d,c+e.size);e.level&&(c=this.data.$min,d=this.data.$max)}if(this.s.autoheight)return[c,d,0];if(a)return[c,d,0];var f=c,g=this.s.fixedRowHeight?this.s.rowHeight:0;if(g){var h=Math.ceil(b/g);b-=h*g,f+=h}else for(;b>0;)b-=this.Uj(f),f++;var i=f>0&&b?-(this.Uj(f-1)+b):0,j=f;if(b&&f--,b+=this.Vj||this.dc,g){var h=Math.ceil(b/g);b-=h*g,j+=h,j>d&&(j=d)}else for(;b>0&&d>j;)b-=this.Uj(j),j++;return[f,j,i]},Kv:function(a){var b=this.getItem(a),c=this.getIndexById(a),d=this.Sj();if(!(c<d[0]||c>=d[1]))for(var e=this.Xj(),f=0;f<this.fj.length;f++){var g=this.fj[f];if(f<this.Fj&&f>=this.s.leftSplit&&(f<e[0]||f>e[1])&&(g.qk=-999),g.attached&&g.node){var h=g.node.childNodes[c-d[0]],i=this.Ek(b,this.fj[f],0);h.innerHTML=i,h.className=this.Mv(this.fj[f],i,b,a)}}},vj:function(a,b){if(this.fj.length){b&&this.uk();var c=this.Xj(this.s.prerender),d=this.Sj(this.s.prerender===!0);if(a){for(var e=this.s.leftSplit;e<c[0];e++)this.vk(e,b);for(var e=c[1];e<this.Fj;e++)this.vk(e,b)}this.wk=[];for(var f=0,e=0;e<this.s.leftSplit;e++)f+=this.xk(e,d,b);for(var e=c[0];e<c[1];e++)f+=this.xk(e,d,b,e==c[0]);for(var e=this.Fj;e<this.fj.length;e++)f+=this.xk(e,d,b);this.yk(d[0],d[1],b),this.zk(d)}},Ak:function(a,b){this.Bk=a,this.Ck=b,webix.html.remove(this.gj),this.gj=[]},yk:function(a,b,c){if(this.GA&&(this.GA.style.top=this.ck+"px"),(c||a!=this.Bk||b!=this.Ck)&&(this.Ak(a,b),this.Dk)){this.Dk=!1;for(var d=0;d<this.wk.length;d++){var e,f=this.wk[d],g=this.getItem(f.id);e="function"==typeof g.$row?g.$row.call(this,g,this.type):this.Ek(g,this.getColumnConfig(g.$row),d);var h=this.gj[d]=webix.html.create("DIV",null,e);h.className="webix_cell "+(g.$sub?"webix_dtable_sub"+(this.s.subview?"view":"row"):"webix_dtable_colrow"),h.setAttribute("column",0),h.setAttribute("row",f.index);var i=g.$height||this.s.rowHeight;g.$subopen?h.style.height=g.$subHeight+"px":h.style.height=i+"px",h.style.paddingRight=webix.ui.scrollSize+"px",h.style.top=f.top+(g.$subopen?i-1:-1)+"px",this.GA||(this.GA=webix.html.create("DIV"),this.GA.style.position="relative",this.GA.style.top=this.ck+"px",this.Vf.appendChild(this.GA)),this.GA.appendChild(h),this.attachEvent("onSyncScroll",function(a,b,c){webix.Touch.Nf(this.GA,0,b,c)}),this.s.subview&&this.callEvent("onSubViewRender",[g,h])}}},zk:function(a){var b=this.s.pager,c=this.s.datafetch,d=!this.Fk||a[0]>=this.Fk;if(this.Fk=a[0],this.Gk){if(b&&(!c||c>=b.size)&&this.Hk([0,b.size*b.page],Math.max(c,b.size),!0))return this.Gk=null;this.Ik(this.Gk,d),this.Gk=null}else this.s.loadahead&&this.Hk(a,this.s.loadahead,d)},Hk:function(a,b,c){var d=a[1],e=d+b;c||(d=a[0]-b,e=a[0]),0>d&&(d=0),e=Math.min(e,this.data.order.length-1);for(var f=!1,g=d;e>g;g++)this.data.order[g]||(f?(f.last=g,f.count=g-d):f={start:g,count:e-d});return f?(this.Ik(f,c),!0):void 0},Ik:function(a,b){var c=Math.max(a.count,this.s.datafetch||this.s.loadahead||0),d=b?a.start:a.last-c+1;this.cf(a.count,a.start)||this.loadNext(c,d)},Zy:function(a){if(webix.env.isSafari){var b,c,d,e,f=["x","y"];for(b=0;2>b;b++)e=this["_"+f[b]+"_scroll"],e&&e.Yy&&e.Yy.parentNode==a&&(c=e.Yy);c&&(this.$y&&webix.html.remove(this.$y),this.$y=c,d=c.cloneNode(!0),c.parentNode.insertBefore(d,c),this.$y.style.display="none",this.Vf.appendChild(this.$y))}},vk:function(a){var b=this.fj[a];this.Zy(b.node),webix.html.remove(b.node),b.attached=!1},uk:function(){for(var a=0;a<this.fj.length;a++)this.fj[a].qk=-1;this.gj.length&&(webix.html.remove(this.gj),this.gj=[])},getText:function(a,b){return this.Ek(this.getItem(a),this.getColumnConfig(b),0)},Mv:function(a,b,c,d){var e="webix_cell";if(a.cssFormat){var f=a.cssFormat(b,c,d,a.id);f&&(e+="object"==typeof f?" "+webix.html.createCss(f):" "+f)}var g=c.$css;g&&("object"==typeof g&&(c.$css=g=webix.html.createCss(g)),e+=" "+g);var h=this.data.Me[d];if(h&&(h.$css&&(e+=" "+h.$css),h.$cellCss)){var i=h.$cellCss[a.id];i&&(e+=" "+i)}if(c.$cellCss){var j=c.$cellCss[a.id];j&&("object"==typeof j&&(j=webix.html.createCss(j)),e+=" "+j)}var k=this.data.getMark(c.id,"webix_selected");return(k&&(k.$row||k[a.id])||a.$selected)&&(e+=this.Lk),e},Ek:function(a,b,c){if(!a)return"";var d;return d=a[b.id],d===webix.undefined||null===d?d="":b.format&&(d=b.format(d)),b.template&&(d=b.template(a,this.type,d,b,c)),d},type:{checkbox:function(a,b,c,d){var e=c==d.checkValue?'checked="true"':"";return"<input class='webix_table_checkbox' type='checkbox' "+e+">"},radio:function(a,b,c,d){var e=c==d.checkValue?'checked="true"':"";return"<input class='webix_table_radio' type='radio' "+e+">"},editIcon:function(){return"<span class='webix_icon fa-pencil'></span>"},trashIcon:function(){return"<span class='webix_icon fa-trash'></span>"}},type_setter:function(a){return this.types&&this.types[a]?(this.type=webix.clone(this.types[a]),this.type.css&&(this.w.className+=" "+this.type.css)):webix.type(this,a),this.type.on_click&&webix.extend(this.on_click,this.type.on_click),a},xk:function(a,b,c,d){var e=this.fj[a];if(!e.attached){var f=a<this.s.leftSplit?0:a>=this.Fj?2:1;this.Vf.childNodes[f].firstChild.appendChild(e.node),e.attached=!0,e.split=f}this.ak=b[0],this.ck=0,this.aC=b[2];var g=0;if(this.s.scrollAlignY?b[1]==this.data.order.length||this.data.$pagesize&&b[1]%this.data.$pagesize===0?e.node.style.top=(this.ck=b[2])+"px":e.Jk&&(e.node.style.top="0px"):(this.ck=b[2],b[2]!=e.Jk&&(e.node.style.top=b[2]+"px")),!c&&e.qk==b[0]&&e.Kk==b[1])return 0;for(var h="",i=this.s.columns[a],j=this.s.rowHeight,k=b[0];k<b[1];k++){var l,m=this.data.order[k],n=this.data.getItem(m);if(n){if(d&&n.$row&&(this.Dk=!0,this.wk.push({top:g,id:n.id,index:k}),!n.$sub)){h+="<div class='webix_cell'></div>",g+=j;continue}var l=this.Ek(n,i,k),o=this.Mv(i,l,n,m),p=n.$subopen?"margin-bottom:"+n.$subHeight+"px;":"";n.$height?(h+="<div class='"+o+"' style='height:"+n.$height+"px;"+p+"'>"+l+"</div>",g+=n.$height-j):h+="<div class='"+o+"'"+(p?" style='"+p+"'":"")+">"+l+"</div>",p&&(g+=n.$subHeight)}else h+="<div class='webix_cell'></div>",this.Gk?this.Gk.last=k:this.Gk={start:k,count:b[1]-k};g+=j}return this.Zy(e.node),e.node.innerHTML=h,e.qk=b[0],e.Kk=b[1],e.Jk=b[2],1},yj:function(){if(this.fj.length&&!isNaN(1*this.dc)){var a=this.wj+(this.nj?this.nj:0);if(!this.s.autoheight&&!this.s.yCount||!this.resize()){this.Wj.sizeTo(this.dc,this.$g,this.jj),this.Wj.define("scrollHeight",a),this.Vj=Math.max(0,this.dc-this.nj-this.$g-this.jj);for(var b=0;3>b;b++)this.Vf.childNodes[b].style.height=this.Vj+"px",this.s.prerender?this.Vf.childNodes[b].firstChild.style.height=this.wj+"px":this.Vf.childNodes[b].firstChild.style.height=this.Vj+"px";this.I.style.height=this.$g+"px"}}},Jj:function(){if(this.fj.length){var a=0;for(this.dk=0,this.ek=0,this.Yj=0;a<this.s.leftSplit;)this.dk+=this.fj[a].width,a++;for(a=this.fj.length-1;a>=this.Fj;)this.ek+=this.fj[a].width,a--;if(this.bc&&(!this.s.autowidth||!this.resize())){this.Yj=this.bc-this.ek-this.dk-this.oj,this.Vf.childNodes[1].firstChild.style.width=this.Gj+"px",this.Vf.childNodes[0].style.width=this.dk+"px",this.Vf.childNodes[1].style.width=this.Yj+"px",this.Vf.childNodes[2].style.width=this.ek+"px",this.I.childNodes[0].style.width=this.dk+"px",this.I.childNodes[1].style.width=this.Yj+"px",this.I.childNodes[2].style.width=this.ek+"px",this.cj.childNodes[0].style.width=this.dk+"px",this.cj.childNodes[1].style.width=this.Yj+"px",this.cj.childNodes[2].style.width=this.ek+"px";var b=this.Yj-this.Gj;if(0>b&&(b=0),b!=this.Lj&&(this.Lj=b,this.Oj()),webix.env.isWebKit){var c=this.Vf.childNodes[0].offsetWidth;c=this.Vf.childNodes[1].offsetWidth,c=this.Vf.childNodes[1].firstChild.offsetWidth,c=this.Vf.childNodes[2].offsetWidth}this.Zj.sizeTo(this.bc-this.oj),this.Zj.define("scrollWidth",this.Gj+this.dk+this.ek)}}},$getSize:function(a,b){if((this.s.autoheight||this.s.yCount)&&this.s.columns){var c=(this.s.yCount||0)*this.s.rowHeight;c||(c=this.isVisible()?this.wj:this.count()*this.s.rowHeight),this.s.height=Math.max(c+(this.nj?this.nj:0)-1,this.s.minHeight||0)+this.$g+this.jj}this.s.autowidth&&this.s.columns&&(this.s.width=Math.max(this.Gj+this.dk+this.ek+this.oj,this.s.minWidth||0));var d=this.dk+this.ek+this.oj,e=webix.ui.view.prototype.$getSize.call(this,a,b);return e[0]=Math.max(e[0]||d),e},Ow:function(){if(this.Zj){var a=this.getScrollState();this.Zj.Wi=this.Wj.Wi=-1,this.scrollTo(a.x,a.y)}},$setSize:function(a,b){var c=this.bc,d=this.dc;webix.ui.view.prototype.$setSize.apply(this,arguments)&&(this.tj&&(this.callEvent("onResize",[this.bc,this.dc,c,d]),this.Jj(),this.yj()),this.render())},Mk:function(a){var b=this.getColumnConfig(a);if(b.sort){var c="asc";b.id==this.Nk&&(c="asc"==this.Ok?"desc":"asc"),this.zf(b.id,c,b.sort)}},markSorting:function(a,b){if(this.Pk||(this.Pk=webix.html.create("DIV")),webix.html.remove(this.Pk),b){var c=this.Qk(this.getColumnIndex(a));c&&(this.Pk.className="webix_ss_sort_"+b,c.style.position="relative",c.appendChild(this.Pk)),this.Nk=a,this.Ok=b}else this.Nk=this.Ok=null},scroll_setter:function(a){return"string"==typeof a?(this.s.scrollX=-1!=a.indexOf("x"),this.s.scrollY=-1!=a.indexOf("y"),a):this.s.scrollX=this.s.scrollY=a},Qk:function(a){for(var b=this.I.getElementsByTagName("TD"),c=null,d=0;d<b.length;d++)if(b[d].getAttribute("column")==a&&!b[d].getAttribute("active_id")&&(c=b[d].firstChild,(b[d].colSpan||0)<2))return c;return c},zf:function(a,b,c){b=b||"asc",this.markSorting(a,b),"server"==c?this.loadNext(0,0,{before:function(){var a=this.data.url;this.clearAll(),this.data.url=a}},0,1):("text"==c&&(this.data.each(function(b){b.$text=this.getText(b.id,a)},this),c="string",a="$text"),"function"==typeof c?this.data.sort(c,b):this.data.sort(a,b,c||"string"))},iA:function(a,b,c,d){var e,f,g;if(a.length)for(f=0;f<a.length;f++)if(e=webix.toFunctor(a[f],this.$scope),g=e.call(this,b,c,d),g===!1)return!1},Yc:function(a,b,c,d){a=a||event;var e=a.target||a.srcElement;if(!this.s.subview||this==webix.$$(e)){for(var f,g="",h=[],i=!1,j=null,e=a.target||a.srcElement;e&&e.parentNode&&e!=this.x.parentNode;){var k=webix.html.TC(e);if(g=k){g=g.toString().split(" ");for(var l=g.length-1;l>=0;l--)b[g[l]]&&h.push(b[g[l]])}if(e.parentNode.getAttribute&&!j){var m=e.parentNode.getAttribute("column")||e.getAttribute("column");if(m){var n="DIV"==e.parentNode.tagName;if(!this.fj[m])return;if(i=!0,n){var o=e.parentNode.getAttribute("row")||e.getAttribute("row")||webix.html.index(e)+this.fj[m].qk;this.Qc=j={row:this.data.order[o],column:this.fj[m].id},j.toString=this.ok}else this.Qc=j={column:this.fj[m].id};if(f=this.iA(h,a,j,e),f===!1)return;if(n)this.callEvent("on"+c,[j,a,e])&&d&&this.callEvent("on"+d,[j,a,e]);else if("ItemClick"==c){var p="header"==e.parentNode.parentNode.getAttribute("section");p&&this.callEvent("onHeaderClick",[j,a,e])&&this.Mk(j.column)}h=[]}}e=e.parentNode}return this.iA(h,a,j,this.$view),i}},showOverlay:function(a){if(!this.Rk){var b=webix.html.create("DIV",{"class":"webix_overlay"},"");this.Vf.appendChild(b),this.Rk=b}this.Rk.innerHTML=a},hideOverlay:function(){this.Rk&&(webix.html.remove(this.Rk),this.Rk=null)},mapCells:function(a,b,c,d,e,f){if(null===a&&this.data.order.length>0&&(a=this.data.order[0]),null===b&&(b=this.columnId(0)),null===c&&(c=this.data.order.length),null===d&&(d=this.s.columns.length),this.exists(a)&&(a=this.getIndexById(a),b=this.getColumnIndex(b),null!==b))for(var g=0;c>g&&a+g<this.data.order.length;g++)for(var h=a+g,i=this.data.order[h],j=this.getItem(i),k=0;d>k&&b+k<this.s.columns.length;k++){var l=b+k,m=this.columnId(l),n=e(j[m],i,m,g,k);f||(j[m]=n)}},dj:function(a,b){!this.s.columns&&a.getConfig&&this.define("columns",a.getConfig(b))},qj:function(){var a=this.getItem(this.getFirstId()),b=this.s.columns=[];for(var c in a)"id"!=c&&b.push({id:c,header:c[0].toUpperCase()+c.substr(1),sort:"string",editor:"text"});b.length&&(b[0].fillspace=!0),"undefined"==typeof this.s.select&&this.define("select","row")}},webix.AutoTooltip,webix.Group,webix.DataMarks,webix.DataLoader,webix.MouseEvents,webix.MapCollection,webix.ui.view,webix.EventSystem,webix.Settings),webix.ui.datafilter={textWaitDelay:500,summColumn:{getValue:function(a){return a.firstChild.innerHTML},setValue:function(){},refresh:function(a,b,c){var d=0;a.mapCells(null,c.columnId,null,1,function(a){a=1*a,isNaN(a)||(d+=a)},!0),c.format&&(d=c.format(d)),c.template&&(d=c.template({value:d})),b.firstChild.innerHTML=d},trackCells:!0,render:function(a,b){return b.template&&(b.template=webix.template(b.template)),""}},masterCheckbox:{getValue:function(){},setValue:function(){},getHelper:function(a,b){return{check:function(){b.checked=!1,a.onclick()},uncheck:function(){b.checked=!0,a.onclick()},isChecked:function(){return b.checked}}},refresh:function(a,b,c){b.onclick=function(){this.getElementsByTagName("input")[0].checked=c.checked=!c.checked;var b=a.getColumnConfig(c.columnId),d=c.checked?b.checkValue:b.uncheckValue;a.data.each(function(b){b&&(b[c.columnId]=d,a.callEvent("onCheck",[b.id,c.columnId,d]),this.callEvent("onStoreUpdated",[b.id,b,"save"]))}),a.refresh()}},render:function(a,b){return"<input type='checkbox' "+(b.checked?"checked='1'":"")+">"}},textFilter:{getInputNode:function(a){return a.firstChild.firstChild},getValue:function(a){return this.getInputNode(a).value},setValue:function(a,b){this.getInputNode(a).value=b},refresh:function(a,b,c){b.component=a.s.id,a.registerFilter(b,c,this),b.Sk=a.s.id,c.value&&this.getValue(b)!=c.value&&this.setValue(b,c.value),b.onclick=webix.html.preventEvent;var d="webix_keydown_filter_"+a.s.id+"_"+c.columnId;webix.event(b,"keydown",this.Tk,{id:d})},render:function(a,b){return this.init&&this.init(b),b.css="webix_ss_filter","<input "+(b.placeholder?'placeholder="'+b.placeholder+'" ':"")+"type='text'>"},Tk:function(a,b,c){var d=this.Sk;9!=(a.which||a.keyCode)&&(this.Uk&&window.clearTimeout(this.Uk),this.Uk=window.setTimeout(function(){webix.$$(d).filterByAll()},webix.ui.datafilter.textWaitDelay))}},selectFilter:{getInputNode:function(a){return a.firstChild.firstChild},getValue:function(a){return this.getInputNode(a).value},setValue:function(a,b){this.getInputNode(a).value=b},refresh:function(a,b,c){c.compare=c.compare||function(a,b){return a==b},b.component=a.s.id,a.registerFilter(b,c,this);var d,e=c.options;e?"string"==typeof e?(d=c.options=[],webix.ajax(e).then(webix.bind(function(d){c.options=d.json(),this.refresh(a,b,c)},this))):d=e:(d=a.collectValues(c.columnId),d.unshift({id:"",value:""}));var f=webix.$$(e);f&&f.data&&f.data.getRange&&(d=f.data.getRange());for(var g=document.createElement("select"),h=0;h<d.length;h++){var i=document.createElement("option");i.value=d[h].id,i.text=d[h].value,g.add(i)}b.firstChild.innerHTML="",b.firstChild.appendChild(g),c.value&&this.setValue(b,c.value),b.onclick=webix.html.preventEvent,g.Sk=a.s.id;var j="webix_change_filter_"+a.s.id+"_"+c.columnId;webix.event(g,"change",this.Vk,{id:j})},render:function(a,b){return this.init&&this.$init(b),b.css="webix_ss_filter",""},Vk:function(a,b,c){webix.$$(this.Sk).filterByAll()}}},webix.ui.datafilter.serverFilter=webix.extend({$server:!0,Tk:function(a,b,c){var d=this.Sk,e=a.which||a.keyCode;b=a.target||a.srcElement,9==e||e>=33&&40>=e||(this.Uk&&window.clearTimeout(this.Uk),this.Uk=window.setTimeout(function(){webix.$$(d).filterByAll()},webix.ui.datafilter.textWaitDelay))}},webix.ui.datafilter.textFilter),webix.ui.datafilter.serverSelectFilter=webix.extend({$server:!0,Vk:function(a,b,c){var d=this.Sk;webix.$$(d).filterByAll()}},webix.ui.datafilter.selectFilter),webix.ui.datafilter.numberFilter=webix.extend({init:function(a){a.prepare=function(b,c){var d=-1!=b.indexOf("=")?1:0,e=this.format(b);return""===e?"":(-1!=b.indexOf(">")?a.compare=this.Wk:-1!=b.indexOf("<")?(a.compare=this.Xk,d*=-1):(a.compare=this.Yk,d=0),e-d)}},format:function(a){return a.replace(/[^\-\.0-9]/g,"")},Wk:function(a,b){return 1*a>b},Xk:function(a,b){return""!==a&&b>1*a},Yk:function(a,b){return 1*a==b}},webix.ui.datafilter.textFilter),webix.ui.datafilter.dateFilter=webix.extend({format:function(a){if(""===a)return"";var b=new Date;if(-1!=a.indexOf("today"))b=webix.Date.dayStart(b);else if(-1==a.indexOf("now")){var c=a.match(/[0-9]+/g);if(!c||!c.length)return"";c.length<3?(c.reverse(),b=new Date(c[0],(c[1]||1)-1,1)):b=webix.i18n.dateFormatDate(a.replace(/^[>< =]+/,""))}return b.valueOf()}},webix.ui.datafilter.numberFilter),webix.extend(webix.ui.datatable,{filterByAll:function(){var a=!1;this.data.silent(function(){this.filter();var b=!1;for(var c in this.ij){var d=this.ij[c],e=d[2].getValue(d[0]),f=e;d[1].prepare&&(f=d[1].prepare.call(d[2],f,d[1],this)),d[1].value=e;var g=d[1].compare;if(this.callEvent("onBeforeFilter",[c,f,d[1]])){if(d[2].$server)return a=!0,this.jA();""!==f&&(g?(g=this.fC(c,g),this.filter(webix.bind(function(a,b){return!!a&&g(a[c],b,a)},this),f,b)):this.filter(c,f,b),b=!0)}}},this),a||(this.refresh(),this.callEvent("onAfterFilter",[]))},fC:function(a,b){var c=this.getColumnConfig(a).optionslist;return c?("string"!=typeof c&&(c=","),function(a,d,e){if(!a)return!0;for(var f=a.split(c),g=0;g<f.length;g++)if(b(f[g],d,e))return!0}):b},filterMode_setter:function(a){return webix.extend(this.data.Cf,a,!0)},getFilter:function(a){var b=this.ij[a];return b&&b[2].getInputNode?b[2].getInputNode(b[0]):null},registerFilter:function(a,b,c){this.ij[b.columnId]=[a,b,c]},collectValues:function(a){var b=[],c={"":!0},d=this.getColumnConfig(a),e=d.options||d.collection;if(e){if("object"==typeof e&&!e.loadNext){if(webix.isArray(e))for(var f=0;f<e.length;f++)b.push({id:e[f],value:e[f]});else for(var g in e)b.push({id:g,value:e[g]});return b}"string"==typeof e&&(e=webix.$$(e)),e.getBody&&(e=e.getBody()),this.Zk.call(e,"id","value",b,c)}else this.Zk(d.id,d.id,b,c);var d={values:b};return this.callEvent("onCollectValues",[a,d]),d.values},Zk:function(a,b,c,d){this.data.each(function(e){var f=e?e[b]:"";f===webix.undefined||d[f]||(d[f]=!0,c.push({id:e[a],value:f}))},this,!0),c.sort(function(a,b){return a.value>b.value?1:-1})},jA:function(a){this.loadNext(0,0,{before:function(){var a=this.data.url;this.editStop&&this.editStop(),this.clearAll(),this.data.url=a},success:function(){this.callEvent("onAfterFilter",[])}},0,1)}}),webix.extend(webix.ui.datatable,{hover_setter:function(a){return a&&!this.Yw&&(this.Vc(),this.config.experimental=!0,this.attachEvent("onMouseMoving",function(a){var b=this.locate(arguments[0]);b=b?b.row:null,this.Zw!=b&&(this.Zw&&this.removeRowCss(this.Zw,this.s.hover),this.$w(),this.Zw=b)}),this.attachEvent("onMouseOut",function(){this.Zw&&(this.removeRowCss(this.Zw,this.s.hover),this.Zw=null)}),this.Yw=1),a},$w:function(){webix.delay(function(){this.Zw&&this.addRowCss(this.Zw,this.s.hover)},this,[],5)},select_setter:function(a){return!this.select&&a&&(webix.extend(this,this._k.$k,!0),a===!0?a="row":"multiselect"==a&&(a="row",this.s.multiselect=!0),webix.extend(this,this._k[a],!0)),a},getSelectedId:function(a){return a?[]:""},getSelectedItem:function(a){return webix.SelectionModel.getSelectedItem.call(this,a)},_k:{$k:{Lk:" webix_cell_select",$init:function(){this.al(),this.on_click.webix_cell=webix.bind(this.bl,this),this.cl=this.zg=function(){this.unselect()},this.data.attachEvent("onStoreUpdated",webix.bind(this.xg,this)),this.data.attachEvent("onClearAll",webix.bind(this.cl,this)),this.data.attachEvent("onAfterFilter",webix.bind(this.zg,this)),this.data.attachEvent("onIdChange",webix.bind(this.Ag,this)),this.$ready.push(webix.SelectionModel.uy)},Ag:function(a,b){for(var c=0;c<this.dl.length;c++)this.dl[c]==a&&(this.dl[c]=b);for(var c=0;c<this.el.length;c++){var d=this.el[c];d.row==a&&(a=this.fl(d),d.row=b,b=this.fl(d),d.id=b,delete this.gl[a],this.gl[b]=!0)}},xg:function(a,b,c){"delete"==c&&this.unselect(a)},al:function(){this.el=[],this.gl={},this.dl=[]},isSelected:function(a,b){var c;return c=webix.isUndefined(b)?"object"==typeof a?this.fl(a):a:this.fl({row:a,column:b}),this.gl[c]},getSelectedId:function(a,b){var c;if(this.el.length>1||a){if(c=[].concat(this.el),b)for(var d=0;d<c.length;d++)c[d]=c[d].id}else if(c=this.el[0],b&&c)return c.id;return c},ok:function(){return this.row},hl:function(a,b){var c=this.fl(a);if(null!==c){if(-1===b)return this.ll(a);if(a.id=c,a.toString=this.ok,!this.callEvent("onBeforeSelect",[a,b]))return!1;if(!this.gl[c]||!b&&1!=this.el.length)return b||this.il(),this.el.push(a),this.gl[c]=!0,this.callEvent("onAfterSelect",[a,b]),this.jl(this.kl(a)),!0}},il:function(){if(!this.el.length)return!1;for(var a=0;a<this.dl.length;a++){var b=this.getItem(this.dl[a]);b&&this.data.removeMark(b.id,"webix_selected",0,1)}var c=this.s.columns;if(c)for(var a=0;a<c.length;a++)c[a].$selected=null;return this.al(),!0},unselectAll:function(){this.clearSelection()},selectAll:function(){this.selectRange()},clearSelection:function(){this.il()&&(this.callEvent("onSelectChange",[]),this.render())},ll:function(a){var b=this.fl(a);if(!b&&this.el.length&&(this.clearSelection(),this.callEvent("onSelectChange",[])),this.gl[b]){if(!this.callEvent("onBeforeUnSelect",[a]))return!1;for(var c=0;c<this.el.length;c++)if(this.el[c].id==b){this.el.splice(c,1);break}delete this.gl[b],this.callEvent("onAfterUnSelect",[a]),this.jl(0,this.ml(a))}},nl:function(a){var b=this.getItem(a);return this.data.addMark(b.id,"webix_selected",0,{$count:0},!0)},jl:function(a){a&&this.dl.push(a),this.Dg||(this.render(),this.callEvent("onSelectChange",[]))},bl:function(a,b){var c=a.ctrlKey||a.metaKey||"touch"==this.s.multiselect,d=a.shiftKey;if(this.s.multiselect||"multiselect"==this.s.select||(c=d=!1),d&&this.el.length){var e=this.el[this.el.length-1];this.ol(b,e)}else c&&this.gl[this.fl(b)]?this.ll(b):this.hl({row:b.row,column:b.column},c)},pl:function(a,b,c){var d=this.s.columns;if(b){for(var e=[],f=0;f<d.length;f++)d[f].$selected&&e.push(d[f]);d=e}for(var g=this.data.order,h=0,f=0;f<g.length;f++){var i=this.getItem(g[f]);if(i){var j=this.data.getMark(i.id,"webix_selected");if(j||b){for(var k=0,l=0;l<d.length;l++){var m=d[l].id;if(c||b||j[m]){if(!a)return{row:g[f],column:m};i[m]=a(i[m],g[f],m,h,k),k++}}h++}}}}},row:{Lk:" webix_row_select",fl:function(a){return a.row},select:function(a,b){a&&(a=a.toString()),this.hl({row:a},b)},kl:function(a){return this.nl(a.row).$row=!0,a.row},unselect:function(a){this.ll({row:a})},ml:function(a){return this.data.removeMark(a.row,"webix_selected",0,1),a.row},mapSelection:function(a){return this.pl(a,!1,!0)},ol:function(a,b){return this.selectRange(a.row,b.row)},selectRange:function(a,b,c){webix.isUndefined(c)&&(c=!0);var d=a?this.getIndexById(a):0,e=b?this.getIndexById(b):this.data.order.length-1;if(d>e){var f=d;d=e,e=f}this.Dg=!0;for(var g=d;e>=g;g++)this.select(this.getIdByIndex(g),c);this.Dg=!1,this.jl()}},cell:{fl:function(a){return a.column?a.row+"_"+a.column:null},select:function(a,b,c){this.hl({row:a,column:b},c)},kl:function(a){var b=this.nl(a.row);return b.$count++,b[a.column]=!0,a.row},unselect:function(a,b){this.ll({row:a,column:b})},ml:function(a){var b=this.nl(a.row);return b.$count--,b[a.column]=!1,b.$count<=0&&this.data.removeMark(a.row,"webix_selected"),a.row},mapSelection:function(a){return this.pl(a,!1,!1)},ol:function(a,b){return this.selectRange(a.row,a.column,b.row,b.column)},selectRange:function(a,b,c,d,e){webix.isUndefined(e)&&(e=!0);var f=a?this.getIndexById(a):0,g=c?this.getIndexById(c):this.data.order.length-1,h=b?this.getColumnIndex(b):0,i=d?this.getColumnIndex(d):this.fj.length-1;if(f>g){var j=f;f=g,g=j}if(h>i){var j=h;h=i,i=j}this.Dg=!0;for(var k=f;g>=k;k++)for(var l=h;i>=l;l++)this.select(this.getIdByIndex(k),this.columnId(l),e);this.Dg=!1,this.jl()}},column:{Lk:" webix_column_select",fl:function(a){return a.column},ok:function(){return this.column},select:function(a,b){this.hl({column:a},b)},kl:function(a){this.s.columns[this.getColumnIndex(a.column)].$selected=!0,this.Dg||this.Kj()},unselect:function(a){this.ll({column:a})},ml:function(a){this.s.columns[this.getColumnIndex(a.column)].$selected=null,this.Kj()},mapSelection:function(a){return this.pl(a,!0,!1)},ol:function(a,b){return this.selectRange(a.column,b.column)},selectRange:function(a,b,c){webix.isUndefined(c)&&(c=!0);var d=a?this.getColumnIndex(a):0,e=b?this.getColumnIndex(b):this.fj.length-1;if(d>e){var f=d;d=e,e=f}this.Dg=!0;for(var g=d;e>=g;g++)this.select(this.columnId(g),c);this.Dg=!1,this.Kj(),this.jl()}},area:{fl:function(a){return a.row+"_"+a.column},getSelectedId:function(a){var b=this.getSelectArea(),c=[];if(b)if(!a||b.start.row==b.end.row&&b.start.column==b.end.column)c.push(b.end);else for(var d=this.getIndexById(b.start.row),e=this.getIndexById(b.end.row),f=this.getColumnIndex(b.start.column),g=this.getColumnIndex(b.end.column),h=d;e>=h;h++)for(var i=f;g>=i;i++)c.push({row:this.getIdByIndex(h),column:this.columnId(i)});return a?c:c[0]},unselect:function(a){this.removeSelectArea()},ll:function(){this.removeSelectArea()},mapSelection:function(a){var b=this.getSelectArea();if(b)for(var c=this.getColumnIndex(b.start.column),d=this.getColumnIndex(b.end.column),e=this.getIndexById(b.start.row),f=this.getIndexById(b.end.row),g=e;f>=g;g++)for(var h=this.data.order[g],i=this.getItem(h),j=c;d>=j;j++){var k=this.fj[j].id;if(!a)return{row:h,column:k};a(i[k]||"",h,k,g-e,j-c)}},ol:function(a,b){this.gC(a,b)},hl:function(a,b){return this.addSelectArea(a,a,!1),!0}}}}),webix.extend(webix.ui.datatable,{blockselect_setter:function(a){return a&&this.ql&&(webix.event(this.x,webix.env.mouse.move,this.rl,{bind:this}),webix.event(this.x,webix.env.mouse.down,this.sl,{bind:this}),webix.event(document.body,webix.env.mouse.up,this.tl,{bind:this}),this.ql=this.ul=this.vl=!1),a},ql:!0,wl:function(a,b){for(var c=a.target||a.srcElement;c;){if(c.getAttribute&&c.getAttribute("webixignore"))return!1;if(c==b)return!0;c=c.parentNode}return!1},sl:function(a){if(this.wl(a,this.Vf)){if(a.target&&"INPUT"==a.target.tagName||this.Pl)return;webix.html.addCss(document.body,"webix_noselect"),this.xl=webix.html.offset(this.Vf);var b=webix.html.pos(a);this.ul=[b.x-this.xl.x,b.y-this.xl.y]}},tl:function(a){this.yl&&(this.jz("select",!0,a),this.yl=webix.html.remove(this.yl)),webix.html.removeCss(document.body,"webix_noselect"),this.ul=this.vl=!1},jz:function(a,b,c){var d=this.zl.apply(this,this.ul),e=this.zl.apply(this,this.vl);if(this.callEvent("onBeforeBlockSelect",[d,e,b,c])){if((!this.wB||this.wB(d,e,b,c)!==!1)&&d.row&&e.row)if("select"===a)this.il(),this.ol(d,e);else{var f,g,h,i;if(this.ul,"box"===a)f=Math.min(this.ul[0],this.vl[0]),h=Math.max(this.ul[0],this.vl[0]),g=Math.min(this.ul[1],this.vl[1]),i=Math.max(this.ul[1],this.vl[1]);else{var j=this.ug(d.row,d.column),k=this.ug(e.row,e.column),l=this.getScrollState(),m=j.width,n=k.width;this.ek&&this.ul[0]>this.dk+this.Yj?j.left+=this.dk+this.Yj:this.dk?this.ul[0]>this.dk&&(j.left<l.x?(m-=l.x-j.left,j.left=this.dk):j.left+=this.dk-l.x):j.left-=l.x,this.ek&&this.vl[0]>this.dk+this.Yj?k.left+=this.dk+this.Yj:this.dk?this.vl[0]>this.dk&&(k.left<l.x?(n-=l.x-k.left,k.left=this.dk):k.left+=this.dk-l.x):k.left-=l.x,this.s.prerender&&(j.top-=this.jk,k.top-=this.jk),f=Math.min(j.left,k.left),h=Math.max(j.left+m,k.left+n),g=Math.min(j.top,k.top),i=Math.max(j.top+j.height,k.top+k.height)}var o=this.yl.style;o.left=f+"px",o.top=g+"px",o.width=h-f+"px",o.height=i-g+"px"}b&&this.callEvent("onAfterBlockSelect",[d,e])}},Al:function(a){this.yl=webix.html.create("div",{"class":"webix_block_selection"},""),this.Vf.appendChild(this.yl)},rl:function(a){if(this.ul!==!1){var b=webix.html.pos(a),c=[b.x-this.xl.x,b.y-this.xl.y];if(Math.abs(this.ul[0]-c[0])<5&&Math.abs(this.ul[1]-c[1])<5)return;this.vl===!1&&this.Al(a),this.vl=c,this.jz(this.config.blockselect,!1,a)}},zl:function(a,b){this.ek&&a>this.dk+this.Yj?a+=this.Zj.getSize()-this.Yj-this.dk-this.ek:(!this.dk||a>this.dk)&&(a+=this.Zj.getScroll()),b+=this.getScrollState().y;var c=null,d=null;0>a&&(a=0),0>b&&(b=0);for(var e=this.s.columns,f=this.data.order,g=0,h=0;h<e.length;h++)if(g+=e[h].width,g>=a){d=e[h].id;break}if(d||(d=e[e.length-1].id),g=0,this.s.fixedRowHeight)c=f[Math.floor(b/this.s.rowHeight)];else for(var h=0;h<f.length;h++)if(g+=this.Uj(h),
g>=b){c=f[h];break}return c||(c=f[f.length-1]),{row:c,column:d}}}),webix.protoUI({name:"resizearea",defaults:{dir:"x"},$init:function(a){var b=a.dir||"x",c=webix.toNode(a.container),d="x"==b?"width":"height",e=a.margin?a.margin+"px":0;this.Cl="x"==b?"left":"top",this.x=webix.html.create("DIV",{"class":"webix_resize_area webix_dir_"+b}),webix.event(this.x,webix.env.mouse.down,webix.html.stopEvent),e&&(e="x"==b?e+" 0 "+e:"0 "+e+" 0 "+e),this.Dl=webix.html.create("DIV",{"class":"webix_resize_handle_"+b,style:e?"padding:"+e:""},"<div class='webix_handle_content'></div>"),this.El=webix.html.create("DIV",{"class":"webix_resize_origin_"+b}),a[d]&&(this.El.style[d]=a[d]+(a.border?1:0)+"px",this.Dl.style[d]=a[d]+"px"),a.cursor&&(this.Dl.style.cursor=this.El.style.cursor=this.x.style.cursor=a.cursor),this.Fl=webix.event(c,webix.env.mouse.move,this.Gl,{bind:this}),this.Hl=webix.event(document.body,webix.env.mouse.up,this.Il,{bind:this}),this.Dl.style[this.Cl]=this.El.style[this.Cl]=a.start+"px",c.appendChild(this.x),c.appendChild(this.Dl),c.appendChild(this.El)},Il:function(){this.callEvent("onResizeEnd",[this.Jl]),webix.eventRemove(this.Fl),webix.eventRemove(this.Hl),webix.html.remove(this.x),webix.html.remove(this.Dl),webix.html.remove(this.El),this.x=this.Dl=this.El=null},Gl:function(a){var b=webix.html.pos(a);this.Jl=("x"==this.s.dir?b.x:b.y)+this.s.start-this.s.eventPos,this.Dl.style[this.Cl]=this.Jl+"px",this.callEvent("onResize",[this.Jl])}},webix.EventSystem,webix.Settings),webix.extend(webix.ui.datatable,{resizeRow_setter:function(a){return this.s.scrollAlignY=!1,this.s.fixedRowHeight=!1,this.resizeColumn_setter(a)},resizeColumn_setter:function(a){return a&&this.Kl&&(webix.event(this.x,"mousemove",this.Ll,{bind:this}),webix.event(this.x,"mousedown",this.Ml,{bind:this}),webix.event(this.x,"mouseup",this.Nl,{bind:this}),this.Kl=!1),a},Kl:!0,Ml:function(a){this.Ol&&(this.Pl=[webix.html.pos(a),this.Ol[2]],webix.html.addCss(document.body,"webix_noselect"),webix.html.denySelect())},Nl:function(){this.Pl=!1,webix.html.removeCss(document.body,"webix_noselect"),webix.html.allowSelect()},Ql:function(a){if(a=a||event,!this.Rl){var b=this.Ol[0],c=this.Pl[1],d=this.pk(c);if(d){var e,f=this.Pl[0];if("x"==b?(e=webix.html.offset(c).x+this.Ol[1]-webix.html.offset(this.Vf).x,f=f.x,this.Ol[1]||(d.cind-=c.parentNode.colSpan||1)):(e=webix.html.offset(c).y+this.Ol[1]-webix.html.offset(this.Vf).y+this.$g,f=f.y,this.Ol[1]||d.rind--),d.cind>=0&&d.rind>=0){this.Rl=[b,d,e];var g=new webix.ui.resizearea({container:this.x,dir:b,eventPos:f,start:e,cursor:("x"==b?"e":"n")+"-resize"});g.attachEvent("onResizeEnd",webix.bind(this.Sl,this))}this.Ml=this.Ol=!1}}},Sl:function(a){if(this.Rl){var b=this.Rl[0],c=this.Rl[1],d=a-this.Rl[2];if("x"==b){this.s.rightSplit&&c.cind+1>=this.Fj&&c.cind!==this.fj.length-1&&(c.cind++,d*=-1);var e=this.fj[c.cind],f=e.width;delete e.fillspace,this.Xs(c.cind,f+d,!0,!0),this.rk()}else{var g=this.getIdByIndex(c.rind),h=this.FA(this.getItem(g));this.setRowHeight(g,h+d)}this.Nl()}this.Rl=null},Ll:function(a){var b=this.s;if(this.Ol&&this.Pl)return this.Ql(a);a=a||event;var c=a.target||a.srcElement,d=!1;if("TD"!=c.tagName&&"TABLE"!=c.tagName){var e=c.className||"",f=-1!=e.indexOf("webix_cell");if(!f||!b.drag){var g=-1!=e.indexOf("webix_hcell");if(this.Ol=!1,f||g){var h=c.offsetWidth,i=c.offsetHeight,j=webix.html.posRelative(a),k=b.resizeRow;f&&k&&(k===!0&&(k=3),j.y<k?(this.Ol=["y",0,c],d="n-resize"):i-j.y<k+1&&(this.Ol=["y",i,c],d="n-resize"));var l=b.resizeColumn;l&&(l===!0&&(l=3),j.x<l?(this.Ol=["x",0,c],d="e-resize"):h-j.x<l+1&&(this.Ol=["x",h,c],d="e-resize"))}this.Tl&&window.clearTimeout(this.Tl),this.Tl=webix.delay(this.Ul,this,[d],d?100:0)}}},Ul:function(a){this.Vl!=a&&(this.Vl=a,this.x.style.cursor=a||"default")}}),webix.extend(webix.ui.datatable,webix.PagingAbility),webix.csv={escape:!0,delimiter:{rows:"\n",cols:"\t"},parse:function(a,b){if(b=b||this.delimiter,!this.escape)return this.Wl(a,b);for(var c=a.replace(/\n$/,"").split(b.rows),d=0;d<c.length-1;)this.Xl(c[d],'"')%2===1&&(c[d]+=b.rows+c[d+1],delete c[d+1],d++),d++;var e=[];for(d=0;d<c.length;d++)if("undefined"!=typeof c[d]){for(var f=c[d].split(b.cols),g=0;g<f.length;g++)0===f[g].indexOf('"')&&(f[g]=f[g].substr(1,f[g].length-2)),f[g]=f[g].replace('""','"');e.push(f)}return e},Wl:function(a,b){for(var c=a.split(b.rows),d=0;d<c.length;d++)c[d]=c[d].split(b.cols);return c},Xl:function(a,b){var c=a.split(b);return c.length-1},stringify:function(a,b){if(b=b||this.delimiter,!this.escape){for(var c=0;c<a.length;c++)a[c]=a[c].join(b.cols);return a.join(b.rows)}for(var d=/\n|\"|;|,/,c=0;c<a.length;c++){for(var e=0;e<a[c].length;e++)d.test(a[c][e])&&(a[c][e]=a[c][e].replace(/"/g,'""'),a[c][e]='"'+a[c][e]+'"');a[c]=a[c].join(b.cols)}return a=a.join(b.rows)}},webix.TablePaste={clipboard_setter:function(a){return(a===!0||1===a)&&(this.s.clipboard="block"),webix.clipbuffer.init(),this.attachEvent("onSelectChange",this.Yl),this.attachEvent("onItemClick",function(a,b,c){document.activeElement&&this.$view.contains(document.activeElement)||(webix.clipbuffer.focus(),webix.UIManager.setFocus(this))}),this.attachEvent("onPaste",this.Zl),a},Yl:function(){if(!this.getEditor||!this.getEditor()){var a=this.$l();webix.clipbuffer.set(a),webix.UIManager.setFocus(this)}},$l:function(){var a=[];return this.mapSelection(function(b,c,d,e,f){return a[e]||(a[e]=[]),a[e].push(b),b}),webix.csv.stringify(a,this.s.delimiter)},Zl:function(a){if(!webix.isUndefined(this.rh[this.s.clipboard])){var b=webix.csv.parse(a,this.s.delimiter);this.rh[this.s.clipboard].call(this,b)}},rh:{block:function(a){var b=this.mapSelection(null);b&&(this.mapCells(b.row,b.column,a.length,null,function(b,c,d,e,f){return a[e]&&a[e].length>f?a[e][f]:b}),this.render())},selection:function(a){this.mapSelection(function(b,c,d,e,f){return a[e]&&a[e].length>f?a[e][f]:b}),this.render()},repeat:function(a){this.mapSelection(function(b,c,d,e,f){return c=a[e%a.length],b=c[f%c.length]}),this.render()},custom:function(a){}}},webix.extend(webix.ui.datatable,webix.TablePaste),webix.storage||(webix.storage={}),webix.storage.local={put:function(a,b){a&&window.JSON&&window.localStorage&&window.localStorage.setItem(a,window.JSON.stringify(b))},get:function(a){if(a&&window.JSON&&window.localStorage){var b=window.localStorage.getItem(a);return b?webix.DataDriver.json.toObject(b):null}return null},remove:function(a){a&&window.JSON&&window.localStorage&&window.localStorage.removeItem(a)},clear:function(){window.localStorage.clear()}},webix.storage.session={put:function(a,b){a&&window.JSON&&window.sessionStorage&&window.sessionStorage.setItem(a,window.JSON.stringify(b))},get:function(a){if(a&&window.JSON&&window.sessionStorage){var b=window.sessionStorage.getItem(a);return b?webix.DataDriver.json.toObject(b):null}return null},remove:function(a){a&&window.JSON&&window.sessionStorage&&window.sessionStorage.removeItem(a)},clear:function(){window.sessionStorage.clear()}},webix.storage.cookie={put:function(a,b,c,d){a&&window.JSON&&(document.cookie=a+"="+escape(window.JSON.stringify(b))+(d&&d instanceof Date?";expires="+d.toUTCString():"")+(c?";domain="+c:"")+(webix.env.https?";secure":""))},_l:function(a){for(var b=document.cookie.split(";"),c="",d="",e="",f=!1,g=0;g<b.length;g++){if(c=b[g].split("="),d=c[0].replace(/^\s+|\s+$/g,""),d==a)return f=!0,c.length>1&&(e=unescape(c[1].replace(/^\s+|\s+$/g,""))),e;c=null,d=""}return null},get:function(a){if(a&&window.JSON){var b=this._l(a);return b?webix.DataDriver.json.toObject(unescape(b)):null}return null},remove:function(a,b){a&&this._l(a)&&(document.cookie=a+"="+(b?";domain="+b:"")+";expires=Thu, 01-Jan-1970 00:00:01 GMT")},clear:function(a){for(var b=document.cookie.split(";"),c=0;c<b.length;c++)document.cookie=/^[^=]+/.exec(b[c])[0]+"="+(a?";domain="+a:"")+";expires=Thu, 01-Jan-1970 00:00:01 GMT"}},webix.DataState={getState:function(){for(var a=this.config.columns.length,b=this.config.columns,c={ids:[],size:[],select:this.getSelectedId(!0),scroll:this.getScrollState()},d=0;a>d;d++)c.ids.push(b[d].id),c.size.push(b[d].width);if(this.Nk&&(c.sort={id:this.Nk,dir:this.Ok}),this.ij){var e={},f=0;for(var g in this.ij)if(!this.am[g]){var h=this.ij[g];h[1].value=e[g]=h[2].getValue(h[0]),f=1}f&&(c.filter=e)}c.hidden=[];for(var g in this.am)c.hidden.push(g);return c},setState:function(a){var b=this.config.columns;if(a){if(this.Nk=null,this.blockEvent(),a.hidden){for(var c={},d=0;d<a.hidden.length;d++)c[a.hidden[d]]=!0,this.bm.length||this.hideColumn(a.hidden[d]);if(this.bm.length)for(var d=0;d<this.bm.length;d++){var e=this.bm[d];!!c[e]==!this.am[e]&&this.hideColumn(e,!!c[e])}}if(a.ids){for(var f=!1,g=this.config.columns,d=0;d<g.length;d++)g[d].id!=a.ids[d]&&(f=!0);if(f){for(var d=0;d<a.ids.length;d++)g[d]=this.getColumnConfig(a.ids[d])||g[d];this.refreshColumns()}}if(a.size)for(var h=Math.min(a.size.length,b.length),d=0;h>d;d++)b[d]&&b[d].width!=a.size[d]&&this.Xs(d,a.size[d],!0);if(a.filter)for(var i in this.ij){var j=this.ij[i];j[2].setValue(j[0],"")}if(this.unblockEvent(),this.rk(!0),this.callEvent("onStructureUpdate",[]),a.sort){var k=b[this.getColumnIndex(a.sort.id)];k&&this.zf(a.sort.id,a.sort.dir,k.sort)}if(a.filter){for(var i in a.filter){var l=a.filter[i];if(l&&this.ij[i]){var j=this.ij[i];j[2].setValue(j[0],l);var m=j[1].contentId;m&&(this.hj[m].value=l)}}this.filterByAll()}if(a.select&&this.select){var n=a.select;this.unselect();for(var d=0;d<n.length;d++)(!n[d].row||this.exists(n[d].row))&&this.hl(n[d],!0)}a.scroll&&this.scrollTo(a.scroll.x,a.scroll.y)}}},webix.extend(webix.ui.datatable,webix.DataState),function(){var a=webix.Touch={config:{longTouchDelay:1e3,scrollDelay:150,gravity:500,deltaStep:30,speed:"0ms",finish:1500,ellastic:!0},limit:function(b){a.cm=b!==!1},disable:function(){a.Xf=!0},enable:function(){a.Xf=!1},$init:function(){a.$init=function(){},webix.event(document.body,b.down,a.dm),webix.event(document.body,b.move,a.em),webix.event(document.body,b.up,a.fm),webix.event(document.body,"dragstart",function(a){return webix.html.preventEvent(a)}),webix.event(document.body,"touchstart",function(b){if(!a.Xf&&!a.cm&&webix.env.isSafari){var c=b.srcElement.tagName.toLowerCase();return"input"==c||"textarea"==c||"select"==c||"label"==c||(a.im=!0,webix.html.preventEvent(b))}}),a.Of(),a.jm=[null,null],a.$active=!0},Of:function(){a.km=a.lm=a.mm=a.bC=null,a.nm=a.om=a.pm=this.qm=null,a.rm={sm:0,tm:0,um:0},a.vm&&(webix.html.removeCss(a.vm,"webix_touch"),a.vm=null),window.clearTimeout(a.wm),a.xm=!0,a.ym=!0,a.zm=!0,a.Am||a.Pf()},fm:function(b){if(a.km){if(a.nm){var c=a.Mf(a.om),d=c.e,e=c.f,f=a.config.finish,g=a.Bm(b,!0),h=webix.$$(a.om),i=h&&h.$scroll?h.$scroll.gravity:a.config.gravity;if(g.um){var j=d+i*g.sm/g.um,k=e+i*g.tm/g.um,l=a.jm[0]?a.Cm(j,!1,!1,a.pm.dx,a.pm.px):d,m=a.jm[1]?a.Cm(k,!1,!1,a.pm.dy,a.pm.py):e,n=Math.max(Math.abs(l-d),Math.abs(m-e));150>n&&(f=f*n/150),(l!=d||m!=e)&&(f=Math.round(f*Math.max((l-d)/(j-d),(m-e)/(k-e))));var o={e:l,f:m},h=webix.$$(a.om);h&&h.adjustScroll&&h.adjustScroll(o),f=Math.max(100,f),d!=o.e||e!=o.f?(a.Nf(a.om,o.e,o.f,f+"ms"),a.Dm&&a.Dm.Em(o.e,o.f,f+"ms"),a.Fm(o.e,o.f,f+"ms")):a.Pf()}else a.Pf()}else if(!this.qm)if(a.zm&&!a.ym)a.Gm("onSwipeX");else if(a.ym&&!a.zm)a.Gm("onSwipeY");else if(webix.env.isSafari&&a.im){a.im=!1;var p=a.km.target;webix.delay(function(){var a=document.createEvent("MouseEvents");a.initEvent("click",!0,!0),p.dispatchEvent(a)})}a.Gm("onTouchEnd"),a.Of()}},em:function(b){if(a.bC&&a.km){var c=a.Bm(b);if(a.Gm("onTouchMove"),a.nm)a.Hm(c);else if(a.ym=a.Im(c.Jm,"x",a.ym),a.zm=a.Im(c.Ei,"y",a.zm),a.nm){var d=a.Km("onBeforeScroll",!0);if(d){var e={};d.callEvent("onBeforeScroll",[e]),e.update&&(a.config.speed=e.speed,a.config.scale=e.scale)}a.Lm(c)}return webix.html.preventEvent(b)}},Hm:function(){if(a.om){var b=a.Mf(a.om),c=(b.e,b.f,a.mm||a.km),d=webix.$$(a.om),e=d&&d.$scroll?d.$scroll.ellastic:a.config.ellastic;a.jm[0]&&(b.e=a.Cm(b.e-c.x+a.lm.x,e,b.e,a.pm.dx,a.pm.px)),a.jm[1]&&(b.f=a.Cm(b.f-c.y+a.lm.y,e,b.f,a.pm.dy,a.pm.py)),a.Nf(a.om,b.e,b.f,"0ms"),a.Dm&&a.Dm.Em(b.e,b.f,"0ms"),a.Fm(b.e,b.f,"0ms")}},Fm:function(b,c,d){var e=a.pm.px/a.pm.dx*-b,f=a.pm.py/a.pm.dy*-c;a.jm[0]&&a.Nf(a.jm[0],e,0,d),a.jm[1]&&a.Nf(a.jm[1],0,f,d)},scrollTo:function(b,c,d,e){a.Nf(b,c,d,e)},Nf:function(b,c,d,e){if(!a.tt&&window.setAnimationFrame&&window.setAnimationFrame(function(){return a.tt=!0,a.Nf(b,c,d,e)}),a.tt=null,a.Am=!0,b){var f=a.config.translate||webix.env.translate;b.style[webix.env.transform]=f+"("+Math.round(c)+"px, "+Math.round(d)+"px"+("translate3d"==f?", 0":"")+")",b.style[webix.env.transitionDuration]=e}},Mf:function(b){var c,d=window.getComputedStyle(b)[webix.env.transform];if("none"==d)c={e:0,f:0};else if(window.WebKitCSSMatrix)c=new WebKitCSSMatrix(d);else if(window.MSCSSMatrix)c=new MSCSSMatrix(d);else{var e=d.replace(/(matrix\()(.*)(\))/gi,"$2");e=e.replace(/\s/gi,""),e=e.split(",");for(var c={},f=["a","b","c","d","e","f"],g=0;g<f.length;g++)c[f[g]]=parseInt(e[g],10)}return a.Dm&&a.Dm.Mm(c),c},Cm:function(a,b,c,d,e){if(a===c)return a;var f=Math.abs(a-c),g=f/(a-c);if(a>0)return b?c+g*Math.sqrt(f):0;var h=d-e;return 0>h+a?b?c-Math.sqrt(-(a-c)):-h:a},Nm:function(b){if(!b.scroll_enabled){b.scroll_enabled=!0,b.parentNode.style.position="relative";var c=webix.env.cssPrefix;b.style.cssText+=c+"transition: "+c+"transform; "+c+"user-select:none; "+c+"transform-style:flat;",b.addEventListener(webix.env.transitionEnd,a.Pf,!1)}},Lm:function(b){-1!=a.nm.indexOf("x")&&(a.jm[0]=a.Om("x",a.pm.dx,a.pm.px,"width")),-1!=a.nm.indexOf("y")&&(a.jm[1]=a.Om("y",a.pm.dy,a.pm.py,"height")),a.Nm(a.om),window.setTimeout(a.Hm,1)},Om:function(b,c,d,e){if(2>c-d){var f=a.Mf(a.om),g="y"==b?f.e:0,h="y"==b?0:f.f;return a.Dm||a.Nf(a.om,g,h,"0ms"),a.nm=a.nm.replace(b,""),""}var i=webix.html.create("DIV",{"class":"webix_scroll_"+b},"");return i.style[e]=Math.max(d*d/c-7,10)+"px",a.om.parentNode.appendChild(i),i},Im:function(b,c,d){return b>a.config.deltaStep?(a.xm&&(a.Pm(c),a.pk(c),-1==(a.nm||"").indexOf(c)&&(a.nm="")),!1):d},Pf:function(){var b,c,d;d=webix.$$(a.om||this),d&&(a.om?b=a.Mf(a.om):d.getScrollState&&(c=d.getScrollState(),b={e:c.x,f:c.y}),webix.callEvent("onAfterScroll",[b]),d.callEvent&&d.callEvent("onAfterScroll",[b])),a.nm||(webix.html.remove(a.jm),a.jm=[null,null]),a.Am=!1},Pm:function(b){window.clearTimeout(a.wm),a.xm=!1},Qm:function(b){return!a.jm[0]&&!a.jm[1]||void a.Rm(b,a.jm[0]?"x":"y")},dm:function(c){var d=c.target||event.srcElement;if(!(a.Xf||d.tagName&&"textarea"==d.tagName.toLowerCase()&&d.offsetHeight<d.scrollHeight)){a.qm=null,a.bC=a.km=b.context(c);var e=webix.$$(c);!a.cm||a.Sm()||e&&e.$touchCapture||(a.bC=null),a.Gm("onTouchStart"),a.Qm(c)&&(a.wm=window.setTimeout(a.Tm,a.config.longTouchDelay)),!e||!e.touchable||d.className&&0===d.className.indexOf("webix_view")||(a.vm=e.getNode(c),webix.html.addCss(a.vm,"webix_touch"))}},Tm:function(b){a.km&&(a.Gm("onLongTouch"),webix.callEvent("onClick",[a.km]),a.qm=!0)},Rm:function(c,d){a.pk(d);var e=a.jm[0]||a.jm[1];if(e){var f=a.Km("onBeforeScroll",!0);f&&f.callEvent("onBeforeScroll",[a.km,a.lm])}!e||a.om&&e.parentNode==a.om.parentNode||(a.Of(),a.Pf(),a.km=b.context(c)),a.em(c)},Bm:function(c,d){return a.mm=a.lm,a.lm=b.context(c),a.rm.Jm=Math.abs(a.km.x-a.lm.x),a.rm.Ei=Math.abs(a.km.y-a.lm.y),a.mm&&(a.lm.time-a.mm.time<a.config.scrollDelay?(a.rm.sm=a.rm.sm/1.3+a.lm.x-a.mm.x,a.rm.tm=a.rm.tm/1.3+a.lm.y-a.mm.y):a.rm.tm=a.rm.sm=0,a.rm.um=a.rm.um/1.3+(a.lm.time-a.mm.time)),a.rm},Um:function(b){a.pm={dx:b.offsetWidth,dy:b.offsetHeight,px:b.parentNode.offsetWidth,py:b.parentNode.offsetHeight}},Sm:function(b){var c=a.km.target;if(!webix.env.touch&&!webix.env.transition&&!webix.env.transform)return null;for(;c&&"BODY"!=c.tagName;){if(c.getAttribute){var d=c.getAttribute("touch_scroll");if(d&&(!b||-1!=d.indexOf(b)))return[c,d]}c=c.parentNode}return null},pk:function(b){var c=this.Sm(b);return c&&(a.nm=c[1],a.om=c[0],a.Um(c[0])),c},Gm:function(b){webix.callEvent(b,[a.km,a.lm]);var c=a.Km(b);c&&c.callEvent(b,[a.km,a.lm])},Km:function(b,c){var d=webix.$$(c?a.om:a.km);if(!d)return null;for(;d;){if(d.hasEvent&&d.hasEvent(b))return d;d=d.getParentView()}return null},gm:function(b){if(!b.touches[0]){var c=a.lm;return c.time=new Date,c}return{target:b.target,x:b.touches[0].pageX,y:b.touches[0].pageY,time:new Date}},hm:function(a){return{target:a.target||a.srcElement,x:a.pageX,y:a.pageY,time:new Date}}};webix.ready(function(){webix.env.touch&&(a.$init(),-1==document.body.className.indexOf("webix_full_screen")&&a.limit(!0),window.MSCSSMatrix&&webix.html.addStyle(".webix_view{ -ms-touch-action: none; }"))});var b=webix.env.mouse={down:"mousedown",up:"mouseup",move:"mousemove",context:a.hm};window.navigator.pointerEnabled?(b.down="pointerdown",b.move="pointermove",b.up="pointerup"):window.navigator.msPointerEnabled?(b.down="MSPointerDown",b.move="MSPointerMove",b.up="MSPointerUp"):webix.env.touch&&(b.down="touchstart",b.move="touchmove",b.up="touchend",b.context=a.gm)}(),webix.attachEvent("onDataTable",function(a,b){webix.env.touch&&(webix.Touch.$init(),b.scrollSize=0,webix.extend(a,b.prerender===!0?a.Vm:a.Wm),webix.Touch.Xf&&webix.Touch.limit(),a.defaults.scrollAlignY=!1,a.Vf.setAttribute("touch_scroll","xy"),a.$ready.push(function(){var a="",b=this.s;b.autowidth||b.scrollX===!1||(a+="x"),b.autoheight||b.scrollY===!1||(a+="y"),this.Vf.setAttribute("touch_scroll",a)}),webix.Touch.Nm(a.Vf.childNodes[1].firstChild),webix.Touch.Nf(a.Vf.childNodes[1].firstChild,0,0,"0ms"),a.Em(0,0,"0ms"))}),webix.extend(webix.ui.datatable,{Vm:{$j:function(a,b){webix.Touch.Nf(this.Vf.childNodes[1].firstChild,0,0,"0ms"),this.Em(a,b,"0ms")},_j:function(){var a=webix.Touch.Mf(this.Vf.childNodes[1].firstChild);return{x:-a.e,y:-a.f}},$init:function(){this.attachEvent("onBeforeScroll",function(){webix.Touch.om=this.Vf.childNodes[1].firstChild,webix.Touch.Um(webix.Touch.om),webix.Touch.Dm=this}),this.attachEvent("onTouchEnd",function(){webix.Touch.Dm=null})},Em:function(a,b,c){this.s.leftSplit&&webix.Touch.Nf(this.Vf.childNodes[0].firstChild,0,b,c),this.s.rightSplit&&webix.Touch.Nf(this.Vf.childNodes[2].firstChild,0,b,c),this.s.header&&webix.Touch.Nf(this.I.childNodes[1].firstChild,a,0,c),this.s.footer&&webix.Touch.Nf(this.cj.childNodes[1].firstChild,a,0,c),this.callEvent("onSyncScroll",[a,b,c])},Mm:function(){}},Wm:{$j:function(a,b){webix.delay(function(){this.callEvent("onAfterScroll",[{e:-a,f:-b}])},this)},$scroll:{gravity:0,elastic:!1},$init:function(){this.attachEvent("onBeforeScroll",function(){var a=webix.Touch;a.om=this.Vf.childNodes[1].firstChild,a.Um(a.om),a.pm.dy=this.wj,a.Dm=this}),this.attachEvent("onAfterScroll",function(a){if(a){var b=this.bk!=-a.e,c=this.jk!=-a.f;webix.Touch.Dm=null,webix.Touch.$m=null,this.jk=0;var d=webix.Touch.config.translate;return webix.Touch.config.translate="translate",this.Em(a.e,0,"0ms"),webix.Touch.config.translate=d,this.bk=-a.e,this.jk=-a.f,this.render(),b&&this.callEvent("onScrollX",[]),c&&this.callEvent("onScrollY",[]),!1}})},Em:function(a,b,c){b+=this.jk,webix.Touch.Nf(this.Vf.childNodes[1].firstChild,a,b,c),this.s.leftSplit&&webix.Touch.Nf(this.Vf.childNodes[0].firstChild,0,b,c),this.s.rightSplit&&webix.Touch.Nf(this.Vf.childNodes[2].firstChild,0,b,c),this.s.header&&webix.Touch.Nf(this.I.childNodes[1].firstChild,a,0,c),this.s.footer&&webix.Touch.Nf(this.cj.childNodes[1].firstChild,a,0,c),this.callEvent("onSyncScroll",[a,b,c])},Mm:function(a){a.f-=this.jk}}}),webix.extend(webix.ui.datatable,{$init:function(){this.data.attachEvent("onStoreUpdated",webix.bind(function(a){a||this._m()},this)),this.attachEvent("onStructureLoad",this._m),this.attachEvent("onStructureUpdate",this.an),this.attachEvent("onColumnResize",function(a,b,c,d){d&&this.an()}),this.attachEvent("onResize",this.an)},_m:function(){if(this.count()){for(var a=!1,b=this.fj,c=0;c<b.length;c++)b[c].adjust&&(a=this.bn(c,b[c].adjust,!0)||a);a&&this.rk(!0)}},an:function(){var a=this.s.columns,b=[],c=0;if(a&&!this.s.autowidth)for(var d=0;d<a.length;d++){var e=a[d].fillspace;e&&(b[d]=e,c+=1*e||1)}c&&this.cn(b,c)},cn:function(a,b){var c=this.s.columns;if(c){var d=this.bc-this.oj,e=!1;if(d>0){for(var f=0;f<c.length;f++)a[f]||(d-=c[f].width||this.config.columnWidth);for(var f=0;f<a.length;f++)if(a[f]){var g=Math.min(d,Math.round(d*a[f]/b));e=this.Xs(f,g,!0)||e,d-=c[f].width,b-=a[f]}e&&this.rk(!0)}}},dn:function(a,b){var c=webix.html.create("DIV",{"class":"webix_view webix_table_cell webix_measure_size webix_cell"},"");c.style.cssText="width:1px; visibility:hidden; position:absolute; top:0px; left:0px; overflow:hidden;",document.body.appendChild(c);var d=this.s.columns[a],e=-(1/0);if("header"!=b&&this.data.each(function(a){if(a){var b=this.Ek(a,d,0);c.innerHTML=b,e=Math.max(c.scrollWidth,e)}},this),b&&"data"!=b)for(var f=0;f<d.header.length;f++){var g=d.header[f];g&&(c.innerHTML=g.text,e=Math.max(c.scrollWidth,e))}return c=webix.html.remove(c),e+1+(webix.env.isIE?webix.skin.$active.layoutPadding.space:0)},bn:function(a,b,c){if(a>=0){var d=this.dn(a,b);return this.Xs(a,d,c)}},adjustColumn:function(a,b){this.bn(this.getColumnIndex(a),b)},adjustRowHeight:function(a,b){var c,d=this.getColumnConfig(a),e=(this.data.count(),webix.html.create("DIV",{"class":"webix_table_cell webix_measure_size webix_cell"},""));e.style.cssText="width:"+d.width+"px; height:1px; visibility:hidden; position:absolute; top:0px; left:0px; overflow:hidden;",this.$view.appendChild(e),e.offsetHeight<1&&(c=this.$view.cloneNode(!0),document.body.appendChild(c),c.appendChild(e)),this.data.each(function(a){a&&(e.innerHTML=this.Ek(a,d,0),a.$height=Math.max(e.scrollHeight,this.s.rowHeight))},this),e=webix.html.remove(e),c&&webix.html.remove(c),b||this.refresh()}}),webix.extend(webix.ui.datatable,{math_setter:function(a){return a&&this.en(),a},fn:"$",en:function(){webix.env.strict||(this.data.attachEvent("onStoreUpdated",webix.bind(this.gn,this)),this.data.attachEvent("onStoreLoad",webix.bind(this.hn,this)),this.attachEvent("onStructureLoad",this.hn))},gn:function(a,b,c){if(a&&"delete"!=c&&"paint"!=c){"add"==c&&this.pn(b);for(var d=0;d<this.fj.length;d++)this.jn(a,this.fj[d].id,"add"!==c);this.kn={}}},jn:function(a,b,c){var d,e=this.getItem(a);if(c===!0?d=e[this.fn+b]||e[b]:(d=e[b],this.kn={}),"undefined"!=typeof d&&null!==d&&(d.length>0&&"="===d.substr(0,1)?(("undefined"==typeof e[this.fn+b]||c!==!0)&&(e[this.fn+b]=e[b]),e[b]=this.ln(d,a,b)):("undefined"!=typeof e[this.fn+b]&&delete e[this.fn+b],this.mn(a,b)),"undefined"!=typeof e.depends&&"undefined"!=typeof e.depends[b]))for(var f in e.depends[b]){var g=e.depends[b][f][0]+"__"+e.depends[b][f][1];"undefined"==typeof this.kn[g]&&(this.kn[g]=!0,this.jn(e.depends[b][f][0],e.depends[b][f][1],!0))}},nn:function(a,b){var c=this.getItem(a);"undefined"!=typeof c[this.fn+b]&&(c[b]=c[this.fn+b])},hn:function(){if(this.fj&&this.count()){this.pn();for(var a=0;a<this.fj.length;a++){var b=this.columnId(a);this.data.each(function(a){this.jn(a.id,b)},this)}this.kn={}}},pn:function(a){for(var b=0;b<this.fj.length;b++)if(this.fj[b].math){var c=this.columnId(b),d="="+this.fj[b].math;d=d.replace(/\$r/g,"#$r#"),d=d.replace(/\$c/g,"#$c#"),a?a[c]=this.qn(d,a.id,c):this.data.each(function(a){a[c]=this.qn(d,a.id,c)},this)}},qn:function(a,b,c){return webix.template(a)({$r:b,$c:c})},rn:function(a,b){var c;if(!this.exists(a))return"#out_of_range";c=this.getItem(a);var d=c[this.fn+b]||c[b]||0;return d=d.toString(),"="!==d.substring(0,1)?d:("undefined"==typeof c[this.fn+b]&&(c[this.fn+b]=c[b]),c[b]=this.ln(d,a,b,!0),c[b])},ln:function(a,b,c,d){if(d===!0){if(this.sn(b,c))return"#selfreference"}else this.tn();this.un(b,c),this.getItem(b),a=a.substring(1);var e=this.vn(a),f=this.wn(a);e?(a=this.xn(a,f),a=this.yn(a,e)):a=this.xn(a,f,!0);var g=this.zn(a);if(g!==!1)return g;this.An(b,c),this.mn(b,c);for(var h=0;h<f.length;h++)this.Bn([b,c],f[h]);var g=this.zn(a);if(g!==!1)return g;if(!a)return a;a=this.Cn(a);var g=this.zn(a);return g!==!1?g:a},vn:function(a){var b=/(\+|\-|\*|\/)/g,c=a.replace(/\[[^)]*?\]/g,"").match(b);return c},wn:function(a){var b=/\[([^\]]+),([^\]]+)\]/g,c=a.match(b);null===c&&(c=[]);for(var d=0;d<c.length;d++){var e=c[d],f=e;e=e.substr(1,e.length-2),e=e.split(","),e[0]=this.Dn(e[0]),e[1]=this.Dn(e[1]),":"===e[0].substr(0,1)&&(e[0]=this.getIdByIndex(e[0].substr(1))),":"===e[1].substr(0,1)&&(e[1]=this.columnId(e[1].substr(1))),e[2]=f,c[d]=e}return c},xn:function(a,b,c){var d="(",e=")";c&&(d=e="");for(var f=0;f<b.length;f++){var g=b[f],h=this.rn(g[0],g[1]);isNaN(h)&&(h='"'+h+'"'),a=a.replace(g[2],d+h+e)}return a},yn:function(a,b){for(var c=[],d=0;d<b.length;d++){var e=b[d],f=this.En(a,e);c.push(f[0]),a=f[1]}c.push(a);for(var d=0;d<c.length;d++){var g=this.Dn(c[d]);c[d]=g}for(var h="",d=0;d<c.length-1;d++)h+=c[d]+b[d];return h+=c[c.length-1]},Cn:function(expr){try{webix.temp_value="",expr="webix.temp_value = "+expr,eval(expr)}catch(ex){webix.temp_value=""}var result=webix.temp_value;return webix.temp_value=null,result.toString()},En:function(a,b){var c=a.indexOf(b),d=a.substr(0,c),e=a.substr(c+1);return[d,e]},Dn:function(a){return a=a.replace(/^ */g,""),a=a.replace(/ *$/g,"")},tn:function(){this.Fn=[]},un:function(a,b){this.Fn[a+"__"+b]=!0},An:function(a,b){"undefined"!=typeof this.Fn[a+"__"+b]&&delete this.Fn[a+"__"+b]},sn:function(a,b){return"undefined"!=typeof this.Fn[a+"__"+b]},Bn:function(a,b){var c=this.getItem(b[0]);"undefined"==typeof c.depends&&(c.depends={}),"undefined"==typeof c.depends[b[1]]&&(c.depends[b[1]]={}),c.depends[b[1]][a[0]+"__"+a[1]]=a,c=this.getItem(a[0]),"undefined"==typeof c.triggers&&(c.triggers={}),"undefined"==typeof c.triggers[a[1]]&&(c.triggers[a[1]]={}),c.triggers[a[1]][b[0]+"__"+b[1]]=b},mn:function(a,b){if(this.exists(a,b)){var c=this.getItem(a,b);if("undefined"!=typeof c.triggers)for(var d in c.triggers[b]){var e=c.triggers[b][d];delete this.getItem(e[0]).depends[e[1]][a+"__"+b]}}},zn:function(a){var b=/#\w+/,c=a.match(b);return null!==c&&c.length>0&&c[0]}}),webix.extend(webix.ui.datatable,{ii:function(a){return this.getColumnConfig(a.column).editor},getEditor:function(a,b){return a?(1==arguments.length&&(b=a.column,a=a.row),(this.ai[a]||{})[b]):this.di},si:function(a){for(var b in this.ai){var c=this.ai[b];for(var d in c)"$count"!=d&&a.call(this,c[d])}},ji:function(a,b,c){var d=a.row,e=a.column,f=b.config=this.getColumnConfig(e);c!==!1&&this.showCell(d,e);var g=b.render();b.$inline&&(g=this.mi(a)),b.node=g;var h,i=this.getItem(d),j=f.editFormat;if(this.s.editMath&&(h=i["$"+e]),h=h||i[e],webix.isUndefined(h)&&(h=""),b.setValue(j?j(h):h,i),b.value=i[e],this.ni(a,b),b.$inline||this.oi(a,g,!0),b.afterRender&&b.afterRender(),this.s.liveValidation){var k="webix_keyup_edit_"+this.s.id+"_"+d+"_"+e;webix.event(b.node,"keyup",this.Gn(a,this),{id:k}),this.validateEditor(a)}return g},Gn:function(a,b){return function(){b.validateEditor(a)}},ti:function(a,b){var c=this.getColumnConfig(a.column).editParse,d=this.getItem(a.row);return d[a.column]=c?c(b):b,this.s.editMath&&delete d["$"+a.column],a.row},ni:function(a,b,c){var d=this.ai[a.row]=this.ai[a.row]||{};d.$count=(d.$count||0)+1,b.row=a.row,b.column=a.column,this.di=d[a.column]=b,this.Eb++,this.Hn=this.getScrollState()},qi:function(a){this.di==a&&(this.di=0),a.destroy&&a.destroy();var b=this.ai[a.row];delete b[a.column],b.$count--,b.$count||delete this.ai[a.row],this.Eb--},ei:function(a,b){var c=this.ai[a];if(c){this.ai[b]=c,delete this.ai[a];for(var d in c)c[d].row=b}},pi:function(a){var b=this.getColumnConfig(a.column);if(b&&b.node&&b.attached){var c=this.getIndexById(a.row);if(c>=b.qk&&c<b.Kk)return b.node.childNodes[c-b.qk]}return 0},editCell:function(a,b,c,d){return b=b||this.s.columns[0].id,webix.EditAbility.edit.call(this,{row:a,column:b},c,d)},editRow:function(a,b){a&&a.row&&(a=a.row);var c=!1;this.eachColumn(function(b){this.edit({row:a,column:b},c,!c),c=!0})},editColumn:function(a,b){a&&a.column&&(a=a.column);var c=!1;this.eachRow(function(b){this.edit({row:b,column:a},c,!c),c=!0})},eachRow:function(a,b){var c=this.data.order;b&&(c=this.data.jf||c);for(var d=0;d<c.length;d++)a.call(this,c[d])},eachColumn:function(a,b){for(var c in this.Aj){var d=this.Aj[c];a.call(this,d.id,d)}if(b)for(var c in this.am){var d=this.am[c];a.call(this,d.id,d)}},vi:function(a){if(this.getSelectedId){var b=this.getSelectedId(!0);if(1==b.length)return this.hl(a),!1}},Gb:function(a,b){if(this.s.editable&&!this.Eb){if(b.target&&"INPUT"==b.target.tagName)return!0;var c=this.getSelectedId(!0);if(1==c.length)return this.editNext(a,c[0]),!1}return!0},ui:function(a,b,c){var d=this.getIndexById(a.row),e=this.getColumnIndex(a.column),f=this.data.order,g=this.fj;if(c)for(var h=d;h<f.length;h++){for(var i=e+1;i<g.length;i++){var j={row:f[h],column:g[i].id};if(b.call(this,j))return j}e=-1}else for(var h=d;h>=0;h--){for(var i=e-1;i>=0;i--){var j={row:f[h],column:g[i].id};if(b.call(this,j))return j}e=g.length}return null},In:function(){this.Eb&&(this.Jn?this.Jn=!1:(this.Wj.scrollTo(this.getScrollState().y+this.Vf.childNodes[1].firstChild.scrollTop),this.Vf.childNodes[1].firstChild.scrollTop=0,this.Jn=!0))},Kn:function(){this.Eb&&this.Zj.scrollTo(this.Vf.childNodes[1].scrollLeft)},gi:function(){this.attachEvent("onScrollY",this.Ln),this.attachEvent("onScrollX",this.Ln),this.attachEvent("onScrollY",this.$s),this.attachEvent("onColumnResize",function(){this.editStop()}),this.attachEvent("onAfterFilter",function(){this.editStop()}),this.attachEvent("onRowResize",function(){this.editStop()}),this.Vf.childNodes[1].firstChild.onscroll=webix.bind(this.In,this),this.Vf.childNodes[1].onscroll=webix.bind(this.Kn,this)},Ln:function(){if(this.Eb){var a=this.Hn;this.Hn=this.getScrollState();var b=this.Hn.y-a.y;this.si(function(a){if(a.getPopup){var c=this.getItemNode(a);c?a.getPopup().show(c):a.getPopup().show({x:-1e4,y:-1e4})}else a.$inline||(a.node.top-=b,a.node.style.top=a.node.top+"px")})}}}),webix.extend(webix.ui.datatable,webix.EditAbility),webix.extend(webix.ui.datatable,{$init:function(){this.kz(),this.attachEvent("onStructureLoad",this.Nn)},kz:function(){this.am={},this.bm=webix.toArray(),this.Mn=[0,0]},Nn:function(){var a=this.fj;this.xB(a);for(var b=a.length-1;b>=0;b--)a[b].hidden?this.hideColumn(a[b].id,!0,!0):a[b].batch&&this.config.visibleBatch&&a[b].batch!=this.config.visibleBatch&&this.hideColumn(a[b].id,!0,!0)},xB:function(a){for(var b=0;b<a.length;b++)for(var c=0;c<a[b].header.length;c++){var d=a[b].header[c];d&&d.colspan&&(d.$colspan=d.colspan)}},moveColumn:function(a,b){var c=this.getColumnIndex(a);if(c!=b){var d=this.s.columns,e=d.splice(c,1),f=b-(b>c?1:0);webix.PowerArray.insertAt.call(d,e[0],f),this.On()}},rz:function(){var a=this.bm,b=this.s.columns;if(!a.length){for(var c=0;c<b.length;c++)a[c]=b[c].id;this.Mn=[this.s.leftSplit,this.Fj]}},isColumnVisible:function(a){return!this.am[a]},hideColumn:function(a,b,c){var d,e=this.s.columns,f=this.bm,g=this.am;if(b!==!1){var h=this.getColumnIndex(a);if(-1===h||!this.callEvent("onBeforeColumnHide",[a]))return;if(-1==h)return;this.rz(),h<this.s.leftSplit&&this.s.leftSplit--,h>=this.Fj?this.s.rightSplit--:this.Fj--,this.vk(h),d=g[a]=e.splice(h,1)[0],d.qk=-1,delete this.Aj[a],this.callEvent("onAfterColumnHide",[a])}else{if(d=g[a],!d||!this.callEvent("onBeforeColumnShow",[a]))return;for(var i=null,j=0;j<f.length&&f[j]!=a;j++)g[f[j]]||(i=f[j]);var h=i?this.getColumnIndex(i)+1:0;webix.PowerArray.insertAt.call(e,d,h),delete d.hidden,j<this.Mn[0]&&this.s.leftSplit++,j>=this.Mn[1]?this.s.rightSplit++:this.Fj++,delete g[a],this.Aj[a]=d,this.callEvent("onAfterColumnShow",[a])}this.xt(d,b!==!1?0:1),c||this.On()},xt:function(a,b){for(var c=a.header.length-1;c>=0;c--)for(var d,e=this.bm,f=!1,g=0,h=0;h<e.length;h++){var a=this.getColumnConfig(e[h]),i=a.header[c];this.isColumnVisible(e[h])?(f&&g>0&&d&&d.colspan>0?(i=a.header[c]=d,d=i):i&&i.$colspan&&0>=g&&(g=i.colspan=i.$colspan,d=i),f=null):(i&&i.$colspan&&0>=g&&(g=i.colspan=i.$colspan,f=d=i),d&&g>0&&d.colspan--),g--}},refreshColumns:function(a,b){(a&&a!=this.config.columns||b)&&(this.kz(),this.ij=[],a&&(this.Fj=a.length-(this.config.rightSplit||0))),
this.Aj={};for(var c=0;c<this.fj.length;c++){var d=this.fj[c];this.Aj[d.id]=d,d.attached=d.node=null}for(var c=0;3>c;c++)this.I.childNodes[c].innerHTML="",this.Vf.childNodes[c].firstChild.innerHTML="";this.fj=this.config.columns=a||this.config.columns,this.Fj=this.fj.length-this.s.rightSplit,this.tj=0,this.rj(),this.callEvent("onStructureUpdate"),this.sk(),this.render()},On:function(){this.tj=0,this.callEvent("onStructureUpdate"),this.uj(),this.render()},showColumn:function(a){return this.hideColumn(a,!1)},showColumnBatch:function(a,b){var c="undefined"!=typeof b;b=b!==!1,this.eachColumn(function(d,e){if(e.batch){var f=this.am[e.id];b||(f=!f),e.batch==a&&f?this.hideColumn(e.id,!b,!0):c||e.batch==a||f||this.hideColumn(e.id,b,!0)}},!0),this.On()}}),webix.extend(webix.ui.datatable,{moveSelection:function(a,b){var c=this.getSelectedId(!0),d=c.length-1;if(0>d){if("down"==a||"right"==a)a="top";else{if("up"!=a&&"left"!=a)return;a="bottom"}d=0,c=[{row:1,column:1}]}if(d>=0){var e=c[d].row,f=c[d].column,g=!!this.s.multiselect&&b;if("top"==a||"bottom"==a){if(e&&("top"==a?e=this.data.getFirstId():"bottom"==a&&(e=this.data.getLastId())),f){var d=0;"bottom"==a&&(d=this.config.columns.length-1),f=this.columnId(d)}}else if("up"==a||"down"==a||"pgup"==a||"pgdown"==a){if(e){var d=this.getIndexById(e),h="pgup"==a||"pgdown"==a?Math.round(this.Vj/this.s.rowHeight):1;"up"==a||"pgup"==a?d-=h:("down"==a||"pgdown"==a)&&(d+=h),0>d&&(d=0),d>=this.data.order.length&&(d=this.data.order.length-1),e=this.getIdByIndex(d),!e&&this.s.pager&&this.showItemByIndex(d)}}else{if("right"!=a&&"left"!=a)return;if(f&&"row"!=this.config.select){var d=this.getColumnIndex(f);if("right"==a?d++:"left"==a&&d--,0>d||d>=this.config.columns.length)return;f=this.columnId(d)}else{if(this.open&&"right"==a)return this.open(e);if(this.close&&"left"==a)return this.close(e)}}e&&(this.showCell(e,f),this.hl({row:e,column:f},g))}return!1}}),webix.extend(webix.ui.datatable,webix.KeysNavigation),webix.extend(webix.ui.datatable,webix.DataMove),webix.extend(webix.ui.datatable,{$dragHTML:function(a,b){for(var c=this.bc-this.oj,d="<div class='webix_dd_drag' style='width:"+(c-2)+"px;'>",e=this.s.columns,f=0;f<e.length;f++){var g=this.Ek(a,e[f]);d+="<div style='width:"+e[f].width+"px;'>"+g+"</div>"}return d+"</div>"},getHeaderNode:function(a,b){var c=this.getColumnIndex(a);b=b||0;for(var d=this.I.childNodes[1].getElementsByTagName("TR")[b+1].childNodes,e=0;e<d.length;e++)if(d[e].getAttribute("column")==c)return d[e].firstChild;return null},getItemNode:function(a,b){if(a&&!a.header){var c=a.row||a,d=this.getIndexById(c),e=this.Sj();if(d<e[0]&&d>e[1])return;var f=this.Xj(),g=this.s.leftSplit?0:f[0];if(a.column&&(g=this.getColumnIndex(a.column),g<this.Fj&&g>=this.s.leftSplit&&(g<f[0]||g>f[1])))return;var h=this.s.columns[g];if(h.attached&&h.node)return h.node.childNodes[d-e[0]]}},dragColumn_setter:function(a){var b;"order"==a?b={$drag:webix.bind(function(a,c){var d=this.locate(c);if(this.Pl||!d||!this.callEvent("onBeforeColumnDrag",[d.column,c]))return!1;webix.DragControl.Gd={from:b,start:d,custom:"column_dnd"};var e=this.getColumnConfig(d.column);return this.Qn=webix.html.posRelative(c),this.Rn=e.width,"<div class='webix_dd_drag_column' style='width:"+e.width+"px'>"+(e.header[0].text||"&nbsp;")+"</div>"},this),$dragPos:webix.bind(function(a,b,c){var d=webix.DragControl.getContext(),e=webix.html.offset(this.$view);c.style.display="none";var f=document.elementFromPoint(a.x,e.y+1),g=f?this.locate(f):null,h=webix.DragControl.getContext().start.column;if(g&&g.column!=h&&(!this.Sn||g.column!=this.Yg)&&"column_dnd"==d.custom&&webix.$$(f)==this){if(!this.callEvent("onBeforeColumnDropOrder",[h,g.column,b]))return;var i=this.getColumnIndex(h),j=this.getColumnIndex(g.column);b.touches&&(this.wy=b.target,this.wy.style.display="none",this.$view.parentNode.appendChild(this.wy)),this.moveColumn(h,j+(j>i?1:0)),this.Yg=g.column,this.Sn=!0}if(g&&g.column==h&&(this.Sn=!1),c.style.display="block",a.x=a.x-this.Qn.x,a.y=e.y,a.x<e.x)a.x=e.x;else{var k=e.x+this.$view.offsetWidth-this.oj-this.Rn;a.x>k&&(a.x=k)}webix.DragControl.Ed=!0},this),$dragDestroy:webix.bind(function(a,b){webix.html.remove(b),this.wy&&webix.html.remove(this.wy);var c=webix.DragControl.getContext().start;this.callEvent("onAfterColumnDropOrder",[c.column,this.Yg,a])},this)}:a&&(b={ah:!0,$drag:webix.bind(function(a,c){var d=this.locate(c);if(this.Pl||!d||!this.callEvent("onBeforeColumnDrag",[d.column,c]))return!1;webix.DragControl.Gd={from:b,start:d,custom:"column_dnd"};for(var e=this.getColumnConfig(d.column).header,f="&nbsp;",g=0;g<e.length;g++)if(e[g]){f=e[g].text;break}return"<div class='webix_dd_drag_column'>"+f+"</div>"},this),$drop:webix.bind(function(a,b,c){var d=c;c.touches&&this.Tn&&(d=this.Tn);var e=this.locate(d);if(!e)return!1;var f=webix.DragControl.getContext().start.column;if(f!=e.column){if(!this.callEvent("onBeforeColumnDrop",[f,e.column,c]))return;var g=this.getColumnIndex(f),h=this.getColumnIndex(e.column);this.moveColumn(f,h+(h>g?1:0)),this.callEvent("onAfterColumnDrop",[f,e.column,c])}},this),$dragIn:webix.bind(function(a,c,d){var e=webix.DragControl.getContext();if("column_dnd"!=e.custom||e.from!=b)return!1;for(var f=d.target||d.srcElement;-1==(f.className||"").indexOf("webix_hcell");)if(f=f.parentNode,!f)return;return f!=this.Tn&&(this.Tn&&webix.html.removeCss(this.Tn,"webix_dd_over_column"),webix.html.addCss(f,"webix_dd_over_column")),this.Tn=f},this),$dragDestroy:webix.bind(function(a,b){this.Tn&&webix.html.removeCss(this.Tn,"webix_dd_over_column"),webix.html.remove(b)},this)}),a&&(webix.DragControl.addDrag(this.I,b),webix.DragControl.addDrop(this.I,b,!0))}}),webix.extend(webix.ui.datatable,webix.DragItem),webix.extend(webix.ui.datatable,{Te:function(a,b){this.Un(a);for(var c in b)this.addCellCss(a,c,"webix_invalid_cell");this.addCss(a,"webix_invalid")},Qe:function(a){this.Un(a),this.removeCss(a,"webix_invalid")},Un:function(a){var b=(this.getItem(a),this.data.getMark(a,"$cellCss"));if(b)for(var c in b)b[c]=b[c].replace("webix_invalid_cell","").replace("  "," ")},addRowCss:function(a,b,c){this.addCss(a,b,c)},removeRowCss:function(a,b,c){this.removeCss(a,b,c)},addCellCss:function(a,b,c,d){var e=this.data.getMark(a,"$cellCss"),f=e||{},g=f[b]||"";f[b]=g.replace(c,"").replace("  "," ")+" "+c,e||this.data.addMark(a,"$cellCss",!1,f,!0),d||this.refresh(a)},removeCellCss:function(a,b,c,d){var e=this.data.getMark(a,"$cellCss");if(e){var f=e[b]||"";f&&(e[b]=f.replace(c,"").replace("  "," ")),d||this.refresh(a)}}}),webix.extend(webix.ui.datatable,webix.ValidateCollection),function(){function a(a){for(var b=[],c=a.length-1;c>=0;c--){var d=a[c];b[c]="object"==typeof d?d.value:d}return b}var b=webix.Sparklines=function(){};b.types={},b.getTemplate=function(a){var b=a||{};"string"==typeof a&&(b={type:a}),webix.extend(b,{type:"line"});var c=this.types[b.type];return webix.bind(this.BC,new c(b))},b.BC=function(b,c,d,e){return e?this.draw(a(d),e.width,33):this.draw(b.data||b,c.width,c.height)}}(),webix.attachEvent("onDataTable",function(a){a.type.sparklines=webix.Sparklines.getTemplate()}),function(){function a(a){var b=" ";if(a)for(var c in a)b+=c+'="'+a[c]+'" ';return b}var b={};b.draw=function(b,c,d,e){var f={xmlns:"http://www.w3.org/2000/svg",version:"1.1",height:"100%",width:"100%",viewBox:"0 0 "+c+" "+d,"class":e||""};return"<svg "+a(f)+">"+b+"</svg>"},b.styleMap={lineColor:"stroke",color:"fill"},b.group=function(a){return"<g>"+a+"</g>"},b.z={M:function(a){return" M "+a.x+" "+a.y},L:function(a){return" L "+a.x+" "+a.y},C:function(a,b,c){return" C "+a.x+" "+a.y+" "+b.x+" "+b.y+" "+c.x+" "+c.y},A:function(a,b,c,d){var e=a.x+Math.cos(d)*b,f=a.y+Math.sin(d)*b;return" A "+b+" "+b+" 0 0 1 "+e+" "+f}},b.definePath=function(a,b){for(var c="",d=0;d<a.length;d++){var e=a[d][0].toUpperCase();c+=this.z[e].apply(this,a[d].slice(1))}return b&&(c+=" Z"),c},b.CC=function(a){for(var b=[],c=0;c<a.length;c++)b.push([c?"L":"M",a[c]]);return b},b.setOpacity=function(a,b){return a=webix.color.toRgb(a),a.push(b),"rgba("+a.join(",")+")"},b.DC=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];c||b.push(["M",d[0]]),b.push(["C",d[1],d[2],d[3]])}return b},b.getPath=function(b,c,d){return d=a(d),'<path class="'+c+'" vector-effect="non-scaling-stroke" d="'+b+'" '+d+"/>"},b.getSector=function(c,d,e,f,g,h){h=a(h);var i=c.x+Math.cos(e)*d,j=c.y+Math.sin(e)*d,k=[["M",c],["L",{x:i,y:j}],["A",c,d,e,f],["L",c]];return'<path class="'+g+'" vector-effect="non-scaling-stroke" d="'+b.definePath(k,!0)+'" '+h+"/>"},b.getCurve=function(b,c,d){d=a(d);var e=this.definePath(this.DC(b));return'<path fill="none" class="'+c+'" vector-effect="non-scaling-stroke" d="'+e+'" '+d+"/>"},b.getLine=function(a,b,c,d){return this.getPath(this.definePath(this.CC([a,b]),!0),c,d)},b.getCircle=function(b,c,d,e){return e=a(e),'<circle class="'+d+'" cx="'+b.x+'" cy="'+b.y+'" r="'+c+'" '+e+"/>"},b.getRect=function(b,c,d,e,f,g){return g=a(g),'<rect class="'+f+'" rx="0" ry="0" x="'+b+'" y="'+c+'" width="'+d+'" height="'+e+'" '+g+"/>"},webix.EC=b}(),function(){function a(a){this.config=webix.extend(webix.copy(b),a||{},!0)}var b={paddingX:3,paddingY:4,radius:1,minHeight:4,eventRadius:8};a.prototype.draw=function(a,b,c){var d,e,f,g,h,i=this.config,j=webix.Sparklines.types.line.prototype,k=webix.EC;return g=this.getPoints(a,b,c),f=k.definePath(j.FC(g),!0),i.color&&(h=this.GC(k,i.color)),e=k.group(k.getPath(f,"webix_sparklines_area"+(h?" "+h.area:""))),g.splice(g.length-3,3),f=k.definePath(j.FC(g)),e+=k.group(k.getPath(f,"webix_sparklines_line"+(h?" "+h.line:""))),e+=j.HC(k,g,i.radius,"webix_sparklines_item"+(h?" "+h.item:"")),d=Math.min(a.length?(b-2*(i.paddingX||0))/a.length:0,i.eventRadius),e+=j.IC(k,g,d),k.draw(e,b,c,"webix_sparklines_area_chart"+(i.css?" "+i.css:""))},a.prototype.GC=function(a,b){var c={area:{},line:{},item:{}},d=a.styleMap;if(b){c.area[d.color]=a.setOpacity(b,.2),c.line[d.lineColor]=b,c.item[d.color]=b;for(var e in c)c[e]=webix.html.createCss(c[e])}return c},a.prototype.getPoints=function(a,b,c){var d=webix.Sparklines.types.line.prototype,e=d.getPoints.call(this,a,b,c),f=this.config.paddingX||0,g=this.config.paddingY||0;return e.push({x:b-f,y:c-g},{x:f,y:c-g},{x:f,y:e[0].y}),e},webix.Sparklines.types.area=a}(),function(){function a(a){this.config=webix.extend(webix.copy(b),a||{},!0)}var b={paddingX:3,paddingY:4,width:20,margin:4,minHeight:4,eventRadius:8,origin:0,itemCss:function(a){return a<(this.config.origin||0)?" webix_sparklines_bar_negative":""}};a.prototype.draw=function(a,b,c){var d,e,f,g,h,i=this.config,j="",k=[],l=this.getPoints(a,b,c),m=webix.EC;for(d=0;d<l.length;d++)e="function"==typeof i.itemCss?i.itemCss.call(this,a[d]):i.itemCss||"",i.negativeColor&&a[d]<i.origin?e+=" "+this.GC(m,i.negativeColor):i.color&&(e+=" "+this.GC(m,i.color)),f=l[d],k.push(m.getRect(f.x,f.y,f.width,f.height,"webix_sparklines_bar "+e));j+=m.group(k.join("")),g=parseInt(this.JC(a,b,c),10)+.5,h=i.paddingX||0,j+=m.group(m.getLine({x:h,y:g},{x:b-h,y:g},"webix_sparklines_origin"));var n=this.KC(a,b,c),o=[];for(d=0;d<n.length;d++)f=n[d],o.push(m.getRect(f.x,f.y,f.width,f.height,"webix_sparklines_event_area ",{webix_area:d}));return j+=m.group(o.join("")),m.draw(j,b,c,"webix_sparklines_bar_chart"+(i.css?" "+i.css:""))},a.prototype.GC=function(a,b){var c={},d=a.styleMap;return b&&(c[d.color]=b),webix.html.createCss(c)},a.prototype.JC=function(a,b,c){var d=this.config,e=d.paddingY||0;c=(c||100)-2*e;var f=e+c;if(d.origin!==!1){var g=Math.min.apply(null,a),h=Math.max.apply(null,a),i=d.origin||0;if(i>=h)f=e;else if(i>g){var j=c/(h-g);f-=j*(i-g)}}return f},a.prototype.KC=function(a,b,c){var d=[],e=this.config.paddingX||0,f=this.config.paddingY||0;if(b=(b||100)-2*e,c=(c||100)-2*f,a.length)for(var g=b/a.length,h=0;h<a.length;h++)d.push({x:Math.ceil(g*h)+e,y:f,height:c,width:g});return d},a.prototype.getPoints=function(a,b,c){var d=this.config,e=Math.min.apply(null,a),f=Math.max.apply(null,a),g=[],h=d.paddingX,i=d.paddingY,j=d.margin,k=d.width||20,l=this.JC(a,b,c);if(b=(b||100)-2*h,c=(c||100)-2*i,a.length){var m=b/a.length,n=f-e;k=Math.min(m-j,k),j=m-k;var o=0,p=e;d.origin!==!1&&d.origin>e?p=d.origin||0:o=d.minHeight;for(var q=(c-o)/(n?n:1),r=0;r<a.length;r++){var s=Math.ceil(q*(a[r]-p));g.push({x:Math.ceil(m*r)+h+j/2,y:l-(a[r]>=p?s:0)-o,height:Math.abs(s)+o,width:k})}}return g},webix.Sparklines.types.bar=a}(),function(){function a(a){this.config=webix.extend(webix.copy(b),a||{},!0)}var b={paddingX:6,paddingY:6,radius:2,minHeight:4,eventRadius:8};a.prototype.draw=function(a,b,c){var d=this.getPoints(a,b,c),e=this.config,f=webix.EC,g=e.color?this.GC(f,e.color):null,h=f.definePath(this.FC(d)),i=f.group(f.getPath(h,"webix_sparklines_line"+(g?" "+g.line:"")));i+=this.HC(f,d,e.radius,"webix_sparklines_item"+(g?" "+g.item:""));var j=Math.min(a.length?(b-2*(e.paddingX||0))/a.length:0,e.eventRadius);return i+=this.IC(f,d,j),f.draw(i,b,c,"webix_sparklines_line_chart"+(e.css?" "+e.css:""))},a.prototype.GC=function(a,b){var c={line:{},item:{}},d=a.styleMap;if(b){c.line[d.lineColor]=b,c.item[d.color]=b;for(var e in c)c[e]=webix.html.createCss(c[e])}return c},a.prototype.HC=function(a,b,c,d,e){for(var f=[],g=0;g<b.length;g++)f.push(a.getCircle(b[g],c,d,e));return a.group(f.join(""))},a.prototype.IC=function(a,b,c){for(var d=[],e=0;e<b.length;e++)d.push(a.getCircle(b[e],c,"webix_sparklines_event_area",{webix_area:e}));return a.group(d.join(""))},a.prototype.FC=function(a){var b,c,d=[];for(b=0;b<a.length;b++)c=b?"L":"M",d.push([c,a[b]]);return d},a.prototype.getPoints=function(a,b,c){var d=this.config,e=Math.min.apply(null,a),f=Math.max.apply(null,a),g=[],h=d.paddingX||0,i=d.paddingY||0;b=(b||100)-2*h;var j=d.minHeight||0;if(c=(c||100)-2*i,a.length)if(1==a.length)g.push({x:b/2+h,y:c/2+h});else{var k=b/(a.length-1),l=f-e,m=(c-j)/(l?l:1);l||(c/=2);for(var n=0;n<a.length;n++)g.push({x:Math.ceil(k*n)+h,y:c-Math.ceil(m*(a[n]-e))+i-j})}return g},webix.Sparklines.types.line=a}(),function(){function a(a){this.config=webix.extend(b,a||{},!0)}var b={paddingY:2};a.prototype.rC=0,a.prototype.qC=["#f55b50","#ff6d3f","#ffa521","#ffc927","#ffee54","#d3e153","#9acb61","#63b967","#21a497","#21c5da","#3ea4f5","#5868bf","#7b53c0","#a943ba","#ec3b77","#9eb0b8"],a.prototype.xv=function(a,b){var c=b.length,d=this.qC.length;return d>c?(a&&(a=d-c>a?this.rC+2:this.rC+1),this.rC=a):a%=d,this.qC[a]},a.prototype.draw=function(a,b,c){var d,e,f,g,h=this.config,i=h.color||this.xv,j=this.getAngles(a),k=webix.EC,l=h.paddingY||0,m=c/2-l,n=b/2,o=c/2;for("function"!=typeof i&&(i=function(){return i}),g="",f=0;f<j.length;f++)d={},d[k.styleMap.color]=i.call(this,f,a,this.LC),g+=k.getSector({x:n,y:o},m,j[f][0],j[f][1],"webix_sparklines_sector",d);for(e=k.group(g),g="",f=0;f<j.length;f++)g+=k.getSector({x:n,y:o},m,j[f][0],j[f][1],"webix_sparklines_event_area",{webix_area:f});return e+=k.group(g),k.draw(e,b,c,"webix_sparklines_pie_chart"+(h.css?" "+h.css:""))},a.prototype.getAngles=function(a){var b,c,d=-Math.PI/2,e=[],f=this.Wo(a);for(c=0;c<a.length;c++)b=-Math.PI/2+f[c]-1e-4,e.push([d,b]),d=b;return e},a.prototype.Vo=function(a){for(var b=0,c=0;c<a.length;c++)b+=a[c];return b},a.prototype.Wo=function(a){var b,c,d=[],e=0,f=this.Vo(a);for(b=0;b<a.length;b++)c=a[b],d[b]=2*Math.PI*(f?(c+e)/f:1/a.length),e+=c;return d},webix.Sparklines.types.pie=a}(),function(){function a(a){this.config=webix.extend(webix.copy(c),a||{},!0)}function b(a){this.config=webix.extend(webix.copy(d),a||{},!0)}var c={paddingX:3,paddingY:6,radius:2,minHeight:4,eventRadius:8};a.prototype.draw=function(a,b,c){var d=this.config,e="",f=webix.Sparklines.types.line.prototype,g=this.getPoints(a,b,c),h=webix.EC,i=d.color?this.GC(h,d.color):null;e+=h.group(h.getCurve(g,"webix_sparklines_line"+(i?" "+i.line:"")));var j=f.getPoints.call(this,a,b,c);e+=f.HC(h,j,d.radius,"webix_sparklines_item"+(i?" "+i.item:""));var k=Math.min(a.length?(b-2*(d.paddingX||0))/a.length:0,d.eventRadius);return e+=f.IC(h,j,k),h.draw(e,b,c,"webix_sparklines_line_chart"+(d.css?" "+d.css:""))},a.prototype.GC=function(a,b){var c={line:{},item:{}},d=a.styleMap;if(b){c.line[d.lineColor]=b,c.item[d.color]=b;for(var e in c)c[e]=webix.html.createCss(c[e])}return c},a.prototype.getPoints=function(a,b,c){var d,e,f,g,h=[],i=[],j=[],k=webix.Sparklines.types.line.prototype;for(e=k.getPoints.call(this,a,b,c),d=0;d<e.length;d++)i.push(e[d].x),j.push(e[d].y);for(f=this.MC(i),g=this.MC(j),d=0;d<e.length-1;d++)h.push([e[d],{x:f[0][d],y:g[0][d]},{x:f[1][d],y:g[1][d]},e[d+1]]);return h},a.prototype.MC=function(a){var b,c,d=[],e=[],f=[],g=[],h=[],i=[],j=a.length-1;for(d[0]=0,e[0]=2,f[0]=1,g[0]=a[0]+2*a[1],b=1;j-1>b;b++)d[b]=1,e[b]=4,f[b]=1,g[b]=4*a[b]+2*a[b+1];for(d[j-1]=2,e[j-1]=7,f[j-1]=0,g[j-1]=8*a[j-1]+a[j],b=1;j>b;b++)c=d[b]/e[b-1],e[b]=e[b]-c*f[b-1],g[b]=g[b]-c*g[b-1];for(h[j-1]=g[j-1]/e[j-1],b=j-2;b>=0;--b)h[b]=(g[b]-f[b]*h[b+1])/e[b];for(b=0;j-1>b;b++)i[b]=2*a[b+1]-h[b+1];return i[j-1]=.5*(a[j]+h[j-1]),[h,i]},webix.Sparklines.types.spline=a;var d={paddingX:3,paddingY:6,radius:1,minHeight:4,eventRadius:8};b.prototype=webix.copy(a.prototype),b.prototype.draw=function(a,b,c){var d=this.config,e=webix.Sparklines.types.line.prototype,f=webix.EC,g=d.color?this.GC(f,d.color):null,h=this.getPoints(a,b,c),i=h.splice(h.length-3,3),j=f.CC(i);j[0][0]="L";var k=f.DC(h).concat(j),l=f.group(f.getPath(f.definePath(k),"webix_sparklines_area"+(g?" "+g.area:""),!0));l+=f.group(f.getPath(f.definePath(f.DC(h)),"webix_sparklines_line"+(g?" "+g.line:"")));var m=e.getPoints.call(this,a,b,c);l+=e.HC(f,m,d.radius,"webix_sparklines_item"+(g?" "+g.item:""));var n=Math.min(a.length?(b-2*(d.paddingX||0))/a.length:0,d.eventRadius);return l+=e.IC(f,m,n),f.draw(l,b,c,"webix_sparklines_splinearea_chart"+(d.css?" "+d.css:""))},b.prototype.GC=function(a,b){var c={area:{},line:{},item:{}},d=a.styleMap;if(b){c.area[d.color]=a.setOpacity(b,.2),c.line[d.lineColor]=b,c.item[d.color]=b;for(var e in c)c[e]=webix.html.createCss(c[e])}return c},b.prototype.getPoints=function(b,c,d){var e=a.prototype.getPoints.call(this,b,c,d),f=this.config.paddingX||0,g=this.config.paddingY||0;return e.push({x:c-f,y:d-g},{x:f,y:d-g},{x:f,y:e[0][0].y}),e},webix.Sparklines.types.splineArea=b}(),webix.TreeTableClick={},webix.TreeTablePaste={insert:function(a){for(var b=this.getSelectedId(!0,!0),c=0;c<a.length;c++){for(var d={},e=0;e<this.s.columns.length;e++)d[this.s.columns[e].id]=a[c][e]||"";!webix.isUndefined(d.id)&&this.exists(d.id)&&(d.id=webix.uid()),this.add(d,null,b[0])}}},webix.protoUI({name:"treetable",$init:function(){webix.extend(this.data,webix.TreeStore,!0),webix.extend(this.type,webix.TreeType),webix.extend(this,webix.TreeDataMove,!0);for(var a in webix.TreeClick)this.on_click[a]||(this.on_click[a]=this.Vn(webix.TreeClick[a]));this.type.treetable=webix.template("{common.space()}{common.icon()} {common.folder()}"),this.type.treecheckbox=function(a,b){return a.indeterminate&&!a.nocheckbox?"<div class='webix_tree_checkbox webix_indeterminate'></div>":webix.TreeType.checkbox.apply(this,arguments)},this.data.provideApi(this,!0)},$exportView:function(a){return webix.extend(a,{filterHTML:!0}),this},Xg:!1,Vn:function(a){return function(b,c){return c=c.row,a.call(this,b,c)}},getState:function(){var a=webix.DataState.getState.call(this);return webix.extend(a,webix.TreeAPI.getState.call(this)),a},setState:function(a){webix.TreeAPI.setState.call(this,a)&&webix.DataState.setState.call(this,a)},clipboard_setter:function(a){return webix.extend(this.rh,webix.TreeTablePaste),webix.TablePaste.clipboard_setter.call(this,a)},Ik:function(a,b){for(var c=0;c<a.start;c++){var d=this.data.order[c];d&&1!=this.getItem(d).$level&&a.start--}return webix.ui.datatable.prototype.Ik.call(this,a,b)}},webix.TreeAPI,webix.TreeStateCheckbox,webix.TreeDataLoader,webix.ui.datatable),webix.Canvas=webix.proto({$init:function(a){this.Wn=[],this.Xn=a.name,this.tg=webix.toNode(a.container||a);var b=a.width*(window.devicePixelRatio||1),c=a.height*(window.devicePixelRatio||1),d=a.style||"";d+=";width:"+a.width+"px;height:"+a.height+"px;",this.Yn(a.name,d,b,c)},Yn:function(a,b,c,d){return this.Zn=webix.html.create("canvas",{width:c,height:d,canvas_id:a,style:b||""}),this.tg.appendChild(this.Zn),this.Zn.getContext||webix.env.isIE&&(webix.require("legacy/excanvas/excanvas.js",!0),G_vmlCanvasManager.init_(document),G_vmlCanvasManager.initElement(this.Zn)),this.Zn},getCanvas:function(a){var b=(this.Zn||this.Yn(this.w)).getContext(a||"2d");return this.$n||(this.$n=!0,b.scale(window.devicePixelRatio||1,window.devicePixelRatio||1)),b},_n:function(a,b){this.Zn&&(this.Zn.setAttribute("width",a*(window.devicePixelRatio||1)),this.Zn.setAttribute("height",b*(window.devicePixelRatio||1)),this.Zn.style.width=a+"px",this.Zn.style.height=b+"px",this.$n=!1)},renderText:function(a,b,c,d,e){if(c){e&&(e=Math.max(e,0)),b&&(b=Math.max(b,0));var f=webix.html.create("DIV",{"class":"webix_canvas_text"+(d?" "+d:""),style:"left:"+a+"px; top:"+b+"px;"},c);return this.tg.appendChild(f),this.Wn.push(f),e&&(f.style.width=e+"px"),f}},renderTextAt:function(a,b,c,d,e,f,g){var h=this.renderText.call(this,c,d,e,f,g);return h&&(a&&("middle"==a?h.style.top=parseInt(d-h.offsetHeight/2,10)+"px":h.style.top=d-h.offsetHeight+"px"),b&&("left"==b?h.style.left=c-h.offsetWidth+"px":h.style.left=parseInt(c-h.offsetWidth/2,10)+"px")),h},clearCanvas:function(a){var b,c=[];for(b=0;b<this.Wn.length;b++)this.tg.removeChild(this.Wn[b]);if(this.Wn=[],!a&&this.tg.t){for(c=this.ao();c.length;)c[0].parentNode.removeChild(c[0]),c.splice(0,1);c=null,this.tg.t.getElementsByTagName("AREA").length||(this.tg.t.parentNode.removeChild(this.tg.t),this.tg.t=null)}this.getCanvas().clearRect(0,0,this.Zn.offsetWidth,this.Zn.offsetHeight)},toggleCanvas:function(){this.bo("none"==this.Zn.style.display)},showCanvas:function(){this.bo(!0)},hideCanvas:function(){this.bo(!1)},bo:function(a){var b,c;for(c=0;c<this.Wn.length;c++)this.Wn[c].style.display=a?"":"none";if(this.tg.t)for(b=this.ao(),c=0;c<b.length;c++)a?b[c].removeAttribute("disabled"):b[c].setAttribute("disabled","true");this.Zn.style.display=a?"":"none"},ao:function(){var a,b,c=[];for(a=this.tg.t.getElementsByTagName("AREA"),b=0;b<a.length;b++)a[b].getAttribute("userdata")==this.Xn&&c.push(a[b]);return c}}),webix.color={co:["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],toHex:function(a,b){a=parseInt(a,10);for(var c="";a>0;)c=this.co[a%16]+c,a=Math.floor(a/16);for(;c.length<b;)c="0"+c;return c},hexToDec:function(a){return parseInt(a,16)},toRgb:function(a){var b,c,d,e;return"string"!=typeof a?(b=a[0],c=a[1],d=a[2]):-1!=a.indexOf("rgb")?(e=a.substr(a.indexOf("(")+1,a.lastIndexOf(")")-a.indexOf("(")-1).split(","),b=e[0],c=e[1],d=e[2]):("#"==a.substr(0,1)&&(a=a.substr(1)),b=this.hexToDec(a.substr(0,2)),c=this.hexToDec(a.substr(2,2)),d=this.hexToDec(a.substr(4,2))),b=parseInt(b,10)||0,c=parseInt(c,10)||0,d=parseInt(d,10)||0,(0>b||b>255)&&(b=0),(0>c||c>255)&&(c=0),(0>d||d>255)&&(d=0),[b,c,d]},hsvToRgb:function(a,b,c){var d,e,f,g,h,i,j,k;switch(d=Math.floor(a/60)%6,e=a/60-d,f=c*(1-b),g=c*(1-e*b),h=c*(1-(1-e)*b),i=0,j=0,k=0,d){case 0:i=c,j=h,k=f;break;case 1:i=g,j=c,k=f;break;case 2:i=f,j=c,k=h;break;case 3:i=f,j=g,k=c;break;case 4:i=h,j=f,k=c;break;case 5:i=c,j=f,k=g}return i=Math.floor(255*i),j=Math.floor(255*j),k=Math.floor(255*k),[i,j,k]},rgbToHsv:function(a,b,c){var d,e,f,g,h,i,j,k;return d=a/255,e=b/255,f=c/255,g=Math.min(d,e,f),h=Math.max(d,e,f),j=0,i=0===h?0:1-g/h,k=h,h==g?j=0:h==d&&e>=f?j=60*(e-f)/(h-g)+0:h==d&&f>e?j=60*(e-f)/(h-g)+360:h==e?j=60*(f-d)/(h-g)+120:h==f&&(j=60*(d-e)/(h-g)+240),[j,i,k]}},webix.HtmlMap=webix.proto({$init:function(a){this.ad="map_"+webix.uid(),this.U=a,this.eo=[],this.sA=[]},addRect:function(a,b,c){this.fo(a,"RECT",b,c)},addPoly:function(a,b,c){this.fo(a,"POLY",b,c)},fo:function(a,b,c,d){var e="";4==arguments.length&&(e="userdata='"+d+"'"),this.eo.push("<area "+this.U+"='"+a+"' shape='"+b+"' coords='"+c.join()+"' "+e+"></area>"),this.sA.push({index:d,points:c})},addSector:function(a,b,c,d,e,f,g,h){var i=[];i.push(d),i.push(Math.floor(e*g));for(var j=b;c>j;j+=Math.PI/18)i.push(Math.floor(d+f*Math.cos(j))),i.push(Math.floor((e+f*Math.sin(j))*g));return i.push(Math.floor(d+f*Math.cos(c))),i.push(Math.floor((e+f*Math.sin(c))*g)),i.push(d),i.push(Math.floor(e*g)),this.addPoly(a,i,h)},render:function(a){var b=webix.html.create("DIV");b.style.cssText="position:absolute; width:100%; height:100%; top:0px; left:0px;",a.appendChild(b);var c=webix.env.isIE?"":"src='data:image/gif;base64,R0lGODlhEgASAIAAAP///////yH5BAUUAAEALAAAAAASABIAAAIPjI+py+0Po5y02ouz3pwXADs='";b.innerHTML="<map id='"+this.ad+"' name='"+this.ad+"'>"+this.eo.join("\n")+"</map><img "+c+" class='webix_map_img' usemap='#"+this.ad+"'>",a.t=b,this.eo=[]}}),webix.protoUI({name:"chart",$init:function(a){if(this.go=[this.s],this.ho=[],this.w.className+=" webix_chart",this.$ready.push(this.Mi),a.preset&&this.io(a),a.series){var b=a.series;delete a.series,a.series=b}this.attachEvent("onMouseMove",this.tA),this.data.provideApi(this,!0)},Mi:function(){this.data.attachEvent("onStoreUpdated",webix.bind(function(){this.render()},this))},defaults:{color:"default",alpha:"1",label:!1,value:"{obj.value}",padding:{},type:"pie",lineColor:"#ffffff",cant:.5,barWidth:30,line:{width:2,color:"#1293f8"},item:{radius:3,borderColor:"#636363",borderWidth:1,color:"#ffffff",alpha:1,type:"r",shadow:!1},shadow:!0,gradient:!1,border:!0,labelOffset:20,origin:"auto",scale:"linear"},ad:"webix_area_id",on_click:{webix_chart_legend_item:function(a,b,c){var d=c.getAttribute("series_id");if(this.callEvent("onLegendClick",[a,d,c])){var e=this.s,f=e.legend.values,g=f&&f[d].toggle||e.legend.toggle;"undefined"!=typeof d&&this.go.length>1&&g&&(-1!=c.className.indexOf("hidden")?this.showSeries(d):this.hideSeries(d))}}},on_dblclick:{},on_mouse_move:{},locate:function(a){return webix.html.locate(a,this.ad)},$setSize:function(a,b){if(webix.ui.view.prototype.$setSize.call(this,a,b)){for(var c in this.canvases)this.canvases[c]._n(this.bc,this.dc);this.render()}},type_setter:function(a){return"undefined"==typeof this.s.offset&&(this.s.offset=!("area"==a||"stackedArea"==a)),"radar"!=a||this.s.yAxis||this.define("yAxis",{}),"scatter"==a&&(this.s.yAxis||this.define("yAxis",{}),this.s.xAxis||this.define("xAxis",{})),a},destructor:function(){this.removeAllSeries(),webix.Destruction.destructor.apply(this,arguments)},removeAllSeries:function(){this.clearCanvas(),this.ko&&(this.ko.innerHTML="",this.ko.parentNode.removeChild(this.ko),this.ko=null),this.canvases&&(this.canvases={}),this.w.innerHTML="";for(var a=0;a<this.go.length;a++)this.go[a].tooltip&&this.go[a].tooltip.destructor();this.go=[]},clearCanvas:function(){if(this.canvases&&"object"==typeof this.canvases)for(var a in this.canvases)this.canvases[a].clearCanvas()},render:function(){var a,b,c,d,e;if(this.isVisible(this.s.id)&&this.callEvent("onBeforeRender",[this.data])){if(this.canvases&&"object"==typeof this.canvases)for(b in this.canvases)this.canvases[b].clearCanvas();else this.canvases={};if(this.s.legend&&(this.canvases.legend||(this.canvases.legend=this.lo("legend")),this.mo(this.data.getRange(),this.bc,this.dc)),a=this.no(this.bc,this.dc),this.eo=d=new webix.HtmlMap(this.ad),e=this.s,this.go)for(c=this.oo(),b=0;b<this.go.length;b++)this.s=this.go[b],this.canvases[b]||(this.canvases[b]=this.lo(b,"z-index:"+(2+b))),this["$render_"+this.s.type](this.canvases[b].getCanvas(),c,a.start,a.end,b,d);d.render(this.w),this.w.lastChild.style.zIndex=100,this.po(this.w.lastChild,a),this.callEvent("onAfterRender",[]),this.s=e}},po:function(a,b){var c={};c.left=b.start.x,c.top=b.start.y,c.width=b.end.x-b.start.x,c.height=b.end.y-b.start.y;for(var d in c)a.style[d]=c[d]+"px"},oo:function(){var a,b,c,d,e,f,g,h,i,j;if(d=this.data.getRange(),a=-1!=this.s.type.toLowerCase().indexOf("barh")?"yAxis":"xAxis",b=this.s[a],b&&b.units&&"object"==typeof b.units){if(c=b.units,h=[],"undefined"!=typeof c.start&&"undefined"!=typeof c.end&&"undefined"!=typeof c.next)for(g=c.start;g<=c.end;)h.push(g),g=c.next.call(this,g);else"[object Array]"===Object.prototype.toString.call(c)&&(h=c);if(f=[],h.length){for(i=b.value,j={},e=0;e<d.length;e++)j[i(d[e])]=e;for(e=0;e<h.length;e++)"undefined"!=typeof j[h[e]]?(d[j[h[e]]].$unit=h[e],f.push(d[j[h[e]]])):f.push({$unit:h[e]})}return f}return d},series_setter:function(a){if("object"!=typeof a);else{this.e(a.length?a[0]:a),this.go=[this.s];for(var b=1;b<a.length;b++)this.addSeries(a[b])}return a},value_setter:webix.template,xValue_setter:webix.template,yValue_setter:function(a){this.define("value",a)},alpha_setter:webix.template,label_setter:webix.template,lineColor_setter:webix.template,borderColor_setter:webix.template,pieInnerText_setter:webix.template,gradient_setter:function(a){return"function"!=typeof a&&a&&a===!0&&(a="light"),a},colormap:{RAINBOW:function(a){var b=Math.floor(this.getIndexById(a.id)/this.count()*1536);return 1536==b&&(b-=1),this.qo[Math.floor(b/256)](b%256)},"default":function(a){var b=this.count(),c=this.qC.length,d=this.getIndexById(a.id);return c>b?(d&&(d=c-b>d?this.rC+2:this.rC+1),this.rC=d):d%=c,this.qC[d]}},color_setter:function(a){return this.colormap[a]||webix.template(a)},fill_setter:function(a){return!(!a||"0"==a)&&webix.template(a)},io:function(a){this.define("preset",a.preset),delete a.preset},preset_setter:function(a){var b,c,d;if(this.defaults=webix.extend({},this.defaults),d=this.presets[a],"object"==typeof d){for(b in d)if("object"==typeof d[b])if(this.defaults[b]&&"object"==typeof this.defaults[b]){this.defaults[b]=webix.extend({},this.defaults[b]);for(c in d[b])this.defaults[b][c]=d[b][c]}else this.defaults[b]=webix.extend({},d[b]);else this.defaults[b]=d[b];return a}return!1},legend_setter:function(a){return a?("object"!=typeof a&&(a={template:a}),this.E(a,{width:150,height:18,layout:"y",align:"left",valign:"bottom",template:"",toggle:-1!=this.s.type.toLowerCase().indexOf("stacked")?"":"hide",marker:{type:"square",width:15,height:15,radius:3},margin:4,padding:3}),a.template=webix.template(a.template),a):(this.ko&&(this.ko.innerHTML="",this.ko=null),!1)},item_setter:function(a){"object"!=typeof a&&(a={color:a,borderColor:a}),this.E(a,webix.extend({},this.defaults.item));var b=["alpha","borderColor","color","radius"];return this.ro(b,a),a},line_setter:function(a){return"object"!=typeof a&&(a={color:a}),a=webix.extend(a,this.defaults.line),a.color=webix.template(a.color),a},padding_setter:function(a){return"object"!=typeof a&&(a={left:a,right:a,top:a,bottom:a}),this.E(a,{left:50,right:20,top:35,bottom:40}),a},xAxis_setter:function(a){if(!a)return!1;"object"!=typeof a&&(a={template:a}),this.E(a,{title:"",color:"#000000",lineColor:"#cfcfcf",template:"{obj}",lines:!0});var b=["lineColor","template","lines"];return this.ro(b,a),this.so=webix.extend({},a),a},yAxis_setter:function(a){this.E(a,{title:"",color:"#000000",lineColor:"#cfcfcf",template:"{obj}",lines:!0,bg:"#ffffff"});var b=["lineColor","template","lines","bg"];return this.ro(b,a),this.to=webix.extend({},a),a},ro:function(a,b){for(var c=0;c<a.length;c++)b[a[c]]=webix.template(b[a[c]])},lo:function(a,b,c){return new webix.Canvas({container:c||this.w,name:a,style:b||"",width:this.bc,height:this.dc})},uo:function(a,b,c,d,e,f){var g=0;return this.s.yAxis&&(this.canvases.y||(this.canvases.y=this.lo("axis_y")),g=this.vo(this.canvases.y.getCanvas(),a,b,c,d,e)),this.s.xAxis&&(this.canvases.x||(this.canvases.x=this.lo("axis_x")),this.wo(this.canvases.x.getCanvas(),a,b,c,f,g)),g},wo:function(a,b,c,d,e,f){for(var g,h=c.x-.5,i=parseInt(f?f:d.y,10)+.5,j=d.x,k=!0,l="stackedBar"==this.s.type?d.y+.5:i,m=0;m<b.length;m++){this.s.offset===!0?g=h+e/2+m*e:(g=m==b.length-1?d.x:h+m*e,k=!!m),g=Math.ceil(g)-.5;var n="auto"!=this.s.origin&&"bar"==this.s.type&&parseFloat(this.s.value(b[m]))<this.s.origin;this.xo(g,l,b[m],k,n),(this.s.offset||m)&&this.s.xAxis.lines.call(this,b[m])&&this.yo(a,g,d.y,c.y,b[m])}this.canvases.x.renderTextAt(!0,!1,h,d.y+this.s.padding.bottom-3,this.s.xAxis.title,"webix_axis_title_x",d.x-c.x),this.zo(a,h,i,j,i,this.s.xAxis.color,1),
this.s.xAxis.lines.call(this,{})&&this.s.offset&&this.zo(a,j+.5,d.y,j+.5,c.y+.5,this.s.xAxis.color,.2)},vo:function(a,b,c,d,e,f){var g,h={};if(this.s.yAxis){var i=c.x-.5,j=d.y,k=c.y,l=d.y+.5;if(this.s.yAxis.step&&(g=parseFloat(this.s.yAxis.step)),"undefined"==typeof this.to.step||"undefined"==typeof this.to.start||"undefined"==typeof this.to.end?(h=this.Ao(e,f),e=h.start,f=h.end,g=h.step,this.s.yAxis.end=f,this.s.yAxis.start=e):"logarithmic"==this.config.scale&&(this.Bo=!0),this.Co(c,d),0!==g){if(f==e)return j;for(var m=(j-k)*g/(f-e),n=0,o=e;f>=o;o+=g){var p=this.Bo?Math.pow(10,o):o;h.fixNum&&(p=parseFloat(p).toFixed(h.fixNum));var q=Math.floor(j-n*m)+.5;if(o==e&&"auto"==this.s.origin||!this.s.yAxis.lines.call(this,o)||this.zo(a,i,q,d.x,q,this.s.yAxis.lineColor.call(this,o),1),o==this.s.origin&&(l=q),1>g&&!this.Bo){var r=Math.min(Math.floor(this.Do(g)),0>=e?0:Math.floor(this.Do(e))),s=Math.pow(10,-r);p=Math.round(p*s)/s,o=p}this.canvases.y.renderText(0,q-5,this.s.yAxis.template(p.toString()),"webix_axis_item_y",c.x-5),n++}return this.zo(a,i,j+1,i,k,this.s.yAxis.color,1),l}}},Co:function(a,b){var c="webix_axis_title_y"+(webix.Eo&&9!=webix.Eo?" webix_ie_filter":""),d=this.canvases.y.renderTextAt("middle",!1,0,parseInt((b.y-a.y)/2+a.y,10),this.s.yAxis.title,c);d&&(d.style.left=(webix.env.transform?(d.offsetHeight-d.offsetWidth)/2:0)+"px")},Fo:function(a,b){var c=Math.floor(this.Do(a)),d=Math.ceil(this.Do(b));return{start:c,step:1,end:d}},Ao:function(a,b){if(this.Bo=!1,"logarithmic"==this.s.scale){var c=Math.floor(this.Do(a)),d=Math.ceil(this.Do(b));if(a>0&&b>0&&d-c>1)return this.Bo=!0,this.Fo(a,b)}"auto"!=this.s.origin&&this.s.origin<a&&(a=this.s.origin);var e,f,g;e=(b-a)/8||1;var h=Math.floor(this.Do(e)),i=Math.pow(10,h),j=e/i;if(j=j>5?10:5,e=parseInt(j,10)*i,e>Math.abs(a))f=0>a?-e:0;else{var k=Math.abs(a),l=Math.floor(this.Do(k)),m=k/Math.pow(10,l);for(f=Math.ceil(10*m)/10*Math.pow(10,l)-e,k>1&&e>.1&&(f=Math.ceil(f));0>a?a>=f:f>=a;)f-=e;0>a&&(f=-f-2*e)}for(g=f;b>g;)g+=e,g=parseFloat((1*g).toFixed(Math.abs(h)));return{start:f,end:g,step:e,fixNum:0>h?Math.abs(h):0}},Go:function(a,b){var c,d,e=this.data.Df(),f=arguments.length&&"h"==a?this.so:this.to;if(b=b||"value",f&&"undefined"!=typeof f.end&&"undefined"!=typeof f.start&&f.step)c=parseFloat(f.end),d=parseFloat(f.start);else if(c=webix.GroupMethods.max(this.go[0][b],e),d=f&&"undefined"!=typeof f.start?parseFloat(f.start):webix.GroupMethods.min(this.go[0][b],e),this.go.length>1)for(var g=1;g<this.go.length;g++){var h=webix.GroupMethods.max(this.go[g][b],e),i=webix.GroupMethods.min(this.go[g][b],e);h>c&&(c=h),d>i&&(d=i)}return{max:c,min:d}},Do:function(a){var b="log";return Math[b](a)/Math.LN10},xo:function(a,b,c,d,e){if(this.s.xAxis){var f=this.canvases.x.renderTextAt(e,d,a,b-(e?2:0),this.s.xAxis.template(c));f&&(f.className+=" webix_axis_item_x")}},yo:function(a,b,c,d,e){this.s.xAxis&&this.s.xAxis.lines&&this.zo(a,b,c,b,d,this.s.xAxis.lineColor.call(this,e),1)},zo:function(a,b,c,d,e,f,g){a.strokeStyle=f,a.lineWidth=g,a.beginPath(),a.moveTo(b,c),a.lineTo(d,e),a.stroke(),a.lineWidth=1},Ho:function(a,b){var c,d=1;return c=b!=a?b-a:a,[c,d]},qo:[function(a){return"#FF"+webix.color.toHex(a/2,2)+"00"},function(a){return"#FF"+webix.color.toHex(a/2+128,2)+"00"},function(a){return"#"+webix.color.toHex(255-a,2)+"FF00"},function(a){return"#00FF"+webix.color.toHex(a,2)},function(a){return"#00"+webix.color.toHex(255-a,2)+"FF"},function(a){return"#"+webix.color.toHex(a,2)+"00FF"}],qC:["#f55b50","#ff6d3f","#ffa521","#ffc927","#ffee54","#d3e153","#9acb61","#63b967","#21a497","#21c5da","#3ea4f5","#5868bf","#7b53c0","#a943ba","#ec3b77","#9eb0b8"],rC:0,addSeries:function(a){var b=webix.extend({},this.s);this.s=webix.extend({},b),this.e(a,{}),this.go.push(this.s),this.s=b},tA:function(a,b,c){var d;if(c.getAttribute("userdata")&&(this.Io=1==this.go.length?c.getAttribute("userdata"):this.uA(b),this.go[this.Io])){for(var e=0;e<this.go.length;e++)d=this.go[e].tooltip,d&&d.disable();c.getAttribute("disabled")||(d=this.go[this.Io].tooltip,d&&d.enable())}},uA:function(a){var b,c,d,e,f,g,h,i;for(c=this.eo.sA,e=webix.html.offset(this.w.t),f=webix.html.pos(a),h=f.x-e.x,i=f.y-e.y,d=0;d<c.length;d++)b=c[d].points,h<=b[2]&&h>=b[0]&&i<=b[3]&&i>=b[1]&&(g?c[d].index>g.index&&(g=c[d]):g=c[d]);return g?g.index:0},hideSeries:function(a){this.canvases[a].hideCanvas();var b=this.s.legend;b&&b.values&&b.values[a]&&(b.values[a].$hidden=!0,this.mo())},showSeries:function(a){this.canvases[a].showCanvas();var b=this.s.legend;b&&b.values&&b.values[a]&&(delete b.values[a].$hidden,this.mo())},mo:function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n=0,o=0;if(a=a||[],b=b||this.bc,j=this.canvases.legend.getCanvas(),d=this.s.legend,i="x"!=this.s.legend.layout?"width:"+d.width+"px":"",this.ko&&(this.ko.innerHTML="",this.ko.parentNode.removeChild(this.ko)),this.canvases.legend.clearCanvas(!0),e=webix.html.create("DIV",{"class":"webix_chart_legend",style:"left:"+n+"px; top:"+o+"px;"+i},""),d.padding&&(e.style.padding=d.padding+"px"),this.ko=e,this.w.appendChild(e),g=[],d.values)for(c=0;c<d.values.length;c++)g.push(this.Jo(e,d.values[c].text,"undefined"!=typeof d.values[c].id?typeof d.values[c].id:c,d.values[c].$hidden));else for(c=0;c<a.length;c++)g.push(this.Jo(e,d.template(a[c])));for(0===e.offsetWidth&&(e.style.width="auto"),h=e.offsetWidth,f=e.offsetHeight,b>h&&("x"==d.layout&&"center"==d.align&&(n=(b-h)/2),"right"==d.align&&(n=b-h),d.margin&&"center"!=d.align&&(n+=("left"==d.align?1:-1)*d.margin)),f<this.dc&&("middle"==d.valign&&"center"!=d.align&&"x"!=d.layout?o=(this.dc-f)/2:"bottom"==d.valign&&(o=this.dc-f),d.margin&&"middle"!=d.valign&&(o+=("top"==d.valign?1:-1)*d.margin)),e.style.left=n+"px",e.style.top=o+"px",j.save(),c=0;c<g.length;c++)m=g[c],d.values&&d.values[c].$hidden?(l=!0,k=d.values[c].disableColor?d.values[c].disableColor:"#d9d9d9"):(l=!1,k=d.values?d.values[c].color:this.s.color.call(this,a[c])),this.Ko(j,m.offsetLeft+n,m.offsetTop+o,k,m.offsetHeight,l,c);j.restore(),g=null},Jo:function(a,b,c,d){var e="";"x"==this.s.legend.layout&&(e="float:left;");var f=webix.html.create("DIV",{style:e+"padding-left:"+(10+this.s.legend.marker.width)+"px","class":"webix_chart_legend_item"+(d?" hidden":"")},b);return arguments.length>2&&f.setAttribute("series_id",c),a.appendChild(f),f},Ko:function(a,b,c,d,e,f,g){var h=[],i=this.s.legend.marker,j=this.s.legend.values,k=j&&j[g].markerType?j[g].markerType:i.type;if(d&&(a.strokeStyle=a.fillStyle=d),"round"!=k&&i.radius)if("item"==k){if(this.s.line&&"scatter"!=this.s.type&&!this.s.disableLines){a.beginPath(),a.lineWidth=this.go[g].line.width,a.strokeStyle=f?d:this.go[g].line.color.call(this,{});var l=b+5,m=c+e/2;a.moveTo(l,m);var n=l+i.width;a.lineTo(n,m),a.stroke()}var o=this.go[g].item,p=parseInt(o.radius.call(this,{}),10)||0;p&&(a.beginPath(),f?(a.lineWidth=o.borderWidth,a.strokeStyle=d,a.fillStyle=d):(a.lineWidth=o.borderWidth,a.fillStyle=o.color.call(this,{}),a.strokeStyle=o.borderColor.call(this,{}),a.globalAlpha=o.alpha.call(this,{})),a.beginPath(),b+=i.width/2+5,c+=e/2,this.Lo(a,b,c,p+1,o.type),a.fill(),a.stroke()),a.globalAlpha=1}else a.beginPath(),a.lineWidth=1,b+=5,c+=e/2-i.height/2,h=[[b+i.radius,c+i.radius,i.radius,Math.PI,3*Math.PI/2,!1],[b+i.width-i.radius,c],[b+i.width-i.radius,c+i.radius,i.radius,-Math.PI/2,0,!1],[b+i.width,c+i.height-i.radius],[b+i.width-i.radius,c+i.height-i.radius,i.radius,0,Math.PI/2,!1],[b+i.radius,c+i.height],[b+i.radius,c+i.height-i.radius,i.radius,Math.PI/2,Math.PI,!1],[b,c+i.radius]],this.Mo(a,h),a.stroke(),a.fill();else{a.beginPath(),a.lineWidth=i.height,a.lineCap=i.type,b+=a.lineWidth/2+5,c+=e/2,a.moveTo(b,c);var n=b+i.width-i.height+1;a.lineTo(n,c),a.stroke(),a.fill()}},no:function(a,b){var c,d,e,f;if(c=this.s.padding.left,d=this.s.padding.top,e=a-this.s.padding.right,f=b-this.s.padding.bottom,this.s.legend){var g=this.s.legend,h=this.s.legend.width,i=this.s.legend.height;"x"==g.layout?"center"==g.valign?"right"==g.align?e-=h:"left"==g.align&&(c+=h):"bottom"==g.valign?f-=i:d+=i:"right"==g.align?e-=h:"left"==g.align&&(c+=h)}return{start:{x:c,y:d},end:{x:e,y:f}}},No:function(a){var b,c,d,e,f;if(this.s.yAxis&&"undefined"!=typeof this.s.yAxis.end&&"undefined"!=typeof this.s.yAxis.start&&this.s.yAxis.step)d=parseFloat(this.s.yAxis.end),e=parseFloat(this.s.yAxis.start);else{for(b=0;b<a.length;b++)for(a[b].$sum=0,a[b].$min=1/0,c=0;c<this.go.length;c++)f=parseFloat(this.go[c].value(a[b])||0),isNaN(f)||(-1!=this.go[c].type.toLowerCase().indexOf("stacked")&&(a[b].$sum+=f),f<a[b].$min&&(a[b].$min=f));for(d=-(1/0),e=1/0,b=0;b<a.length;b++)a[b].$sum>d&&(d=a[b].$sum),a[b].$min<e&&(e=a[b].$min);e>0&&(e=0)}return{max:d,min:e}},Oo:function(a,b,c,d,e,f,g,h){var i,j,k,l,m,n;return"light"==f?(i="x"==h?a.createLinearGradient(b,c,d,c):a.createLinearGradient(b,c,b,e),n=[[0,"#FFFFFF"],[.9,g],[1,g]],j=2):"falling"==f||"rising"==f?(i="x"==h?a.createLinearGradient(b,c,d,c):a.createLinearGradient(b,c,b,e),k=webix.color.toRgb(g),l=webix.color.rgbToHsv(k[0],k[1],k[2]),l[1]*=.5,m="rgb("+webix.color.hsvToRgb(l[0],l[1],l[2])+")","falling"==f?n=[[0,m],[.7,g],[1,g]]:"rising"==f&&(n=[[0,g],[.3,g],[1,m]]),j=0):(a.globalAlpha=.37,j=0,i="x"==h?a.createLinearGradient(b,e,b,c):a.createLinearGradient(b,c,d,c),n=[[0,"#9d9d9d"],[.3,"#e8e8e8"],[.45,"#ffffff"],[.55,"#ffffff"],[.7,"#e8e8e8"],[1,"#9d9d9d"]]),this.Po(i,n),{gradient:i,offset:j}},Qo:function(a,b,c,d){return a*=-1,b+=Math.cos(a)*d,c-=Math.sin(a)*d,{x:b,y:c}},Po:function(a,b){for(var c=0;c<b.length;c++)a.addColorStop(b[c][0],b[c][1])},Mo:function(a,b){var c,d;for(c=0;c<b.length;c++)d=c?"lineTo":"moveTo",b[c].length>2&&(d="arc"),a[d].apply(a,b[c])},Ro:function(a,b,c,d,e){a.addRect(b,[c[0].x-d.x,c[0].y-d.y,c[1].x-d.x,c[1].y-d.y],e)}},webix.Group,webix.AutoTooltip,webix.DataLoader,webix.MouseEvents,webix.EventSystem,webix.ui.view),webix.extend(webix.ui.chart,{$render_pie:function(a,b,c,d,e,f){this.So(a,b,c,d,1,f,e)},So:function(a,b,c,d,e,f,g){if(b.length){var h=this.To(c,d),i=this.s.radius?this.s.radius:h.radius;if(!(0>i)){var j=this.Uo(b),k=this.Vo(j),l=this.Wo(j,k),m=this.s.x?this.s.x:h.x,n=this.s.y?this.s.y:h.y;1==e&&this.s.shadow&&this.Xo(a,m,n,i),n/=e;var o=-Math.PI/2,p=[];if(a.scale(1,e),this.s.gradient){var q=1!=e?m+i/3:m,r=1!=e?n+i/3:n;this.Yo(a,m,n,i,q,r)}for(var s=0;s<b.length;s++)if(j[s]){a.strokeStyle=this.s.lineColor.call(this,b[s]),a.beginPath(),a.moveTo(m,n),p.push(o);var t=-Math.PI/2+l[s]-1e-4;a.arc(m,n,i,o,t,!1),a.lineTo(m,n);var u=this.s.color.call(this,b[s]);a.fillStyle=u,a.fill(),this.s.pieInnerText&&this.Zo(m,n,5*i/6,o,t,e,this.s.pieInnerText(b[s],k),!0),this.s.label&&this.Zo(m,n,i+this.s.labelOffset,o,t,e,this.s.label(b[s])),1!=e&&(this.$o(a,m,n,o,t,i,!0),a.fillStyle="#000000",a.globalAlpha=.2,this.$o(a,m,n,o,t,i,!1),a.globalAlpha=1,a.fillStyle=u),f.addSector(b[s].id,o,t,m-c.x,n-c.y/e,i,e,g),o=t}a.globalAlpha=.8;var v;for(s=0;s<p.length;s++)v=this.Qo(p[s],m,n,i),this.zo(a,m,n,v.x,v.y,this.s.lineColor.call(this,b[s]),2);1==e&&(a.lineWidth=2,a.strokeStyle="#ffffff",a.beginPath(),a.arc(m,n,i+1,0,2*Math.PI,!1),a.stroke()),a.globalAlpha=1,a.scale(1,1/e)}}},Uo:function(a){for(var b=[],c=0;c<a.length;c++)b.push(parseFloat(this.s.value(a[c])||0));return b},Vo:function(a){for(var b=0,c=0;c<a.length;c++)b+=a[c];return b},Wo:function(a,b){var c,d=[],e=0;b=b||this.Vo(a);for(var f=0;f<a.length;f++)c=a[f],d[f]=2*Math.PI*(b?(c+e)/b:1/a.length),e+=c;return d},To:function(a,b){var c=b.x-a.x,d=b.y-a.y,e=a.x+c/2,f=a.y+d/2,g=Math.min(c/2,d/2);return{x:e,y:f,radius:g}},$o:function(a,b,c,d,e,f,g){if(a.lineWidth=1,0>=d&&e>=0||d>=0&&e<=Math.PI||Math.abs(d-Math.PI)>.003&&d<=Math.PI&&e>=Math.PI){0>=d&&e>=0&&(d=0,g=!1,this._o(a,b,c,f,d,e)),d<=Math.PI&&e>=Math.PI&&(e=Math.PI,g=!1,this._o(a,b,c,f,d,e));var h=(this.s.pieHeight||Math.floor(f/4))/this.s.cant;a.beginPath(),a.arc(b,c,f,d,e,!1),a.lineTo(b+f*Math.cos(e),c+f*Math.sin(e)+h),a.arc(b,c+h,f,e,d,!0),a.lineTo(b+f*Math.cos(d),c+f*Math.sin(d)),a.fill(),g&&a.stroke()}},_o:function(a,b,c,d,e,f){a.beginPath(),a.arc(b,c,d,e,f,!1),a.stroke()},Xo:function(a,b,c,d){a.globalAlpha=.5;for(var e=["#c4c4c4","#c6c6c6","#cacaca","#dcdcdc","#dddddd","#e0e0e0","#eeeeee","#f5f5f5","#f8f8f8"],f=e.length-1;f>-1;f--)a.beginPath(),a.fillStyle=e[f],a.arc(b+1,c+1,d+f,0,2*Math.PI,!0),a.fill();a.globalAlpha=1},ap:function(a){return a.addColorStop(0,"#ffffff"),a.addColorStop(.7,"#7a7a7a"),a.addColorStop(1,"#000000"),a},Yo:function(a,b,c,d,e,f){a.beginPath();var g;"function"!=typeof this.s.gradient?(g=a.createRadialGradient(e,f,d/4,b,c,d),g=this.ap(g)):g=this.s.gradient(g),a.fillStyle=g,a.arc(b,c,d,0,2*Math.PI,!0),a.fill(),a.globalAlpha=.7},Zo:function(a,b,c,d,e,f,g,h){var i=this.canvases[0].renderText(0,0,g,0,1);if(i){var j=i.scrollWidth;i.style.width=j+"px",j>a&&(j=a);var k=.2>e-d?4:8;h&&(k=j/1.8);var l=d+(e-d)/2;c-=(k-8)/2;var m=-k,n=-8,o="right";(l>=Math.PI/2&&l<Math.PI||l<=3*Math.PI/2&&l>=Math.PI)&&(m=-j-m+1,o="left");var p=0;!h&&1>f&&l>0&&l<Math.PI&&(p=(this.s.height||Math.floor(c/4))/f);var q=(b+Math.floor((c+p)*Math.sin(l)))*f+n,r=a+Math.floor((c+k/2)*Math.cos(l))+m,s=e<Math.PI/2+.01,t=d<Math.PI/2;t&&s?r=Math.max(r,a+3):t||s?!h&&(l>=Math.PI/2&&l<Math.PI||l<=3*Math.PI/2&&l>=Math.PI)&&(r+=j/3):r=Math.min(r,a-j),i.style.top=q+"px",i.style.left=r+"px",i.style.width=j+"px",i.style.textAlign=o,i.style.whiteSpace="nowrap"}},$render_pie3D:function(a,b,c,d,e,f){this.So(a,b,c,d,this.s.cant,f)},$render_donut:function(a,b,c,d,e,f){if(b.length){this.So(a,b,c,d,1,f,e);var g=this.s,h=this.To(c,d),i=g.radius?g.radius:h.radius,j=g.innerRadius&&g.innerRadius<i?g.innerRadius:i/3,k=g.x?g.x:h.x,l=g.y?g.y:h.y;a.fillStyle="#ffffff",a.beginPath(),a.arc(k,l,j,0,2*Math.PI,!0),a.fill()}}}),webix.extend(webix.ui.chart,{$render_bar:function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s,t=d.y-c.y;s=!!this.s.yAxis,r=!!this.s.xAxis,j=this.Go(),k=j.max,l=j.min,h=(d.x-c.x)/b.length,e||"auto"!=this.s.origin&&!s||this.uo(b,c,d,l,k,h),s&&(k=parseFloat(this.s.yAxis.end),l=parseFloat(this.s.yAxis.start)),o=this.Ho(l,k),m=o[0],n=o[1],q=m?t/m:m,s||"auto"!=this.s.origin&&r||(p=10,q=m?(t-p)/m:p),!e&&"auto"!=this.s.origin&&!s&&this.s.origin>l&&this.wo(a,b,c,d,h,d.y-q*(this.s.origin-l)),g=parseInt(this.s.barWidth,10);var u=0,v=0;for(i=0;i<this.go.length;i++)i==e&&(v=u),"bar"==this.go[i].type&&u++;this.go&&g*u+4>h&&(g=parseInt(h/u-4,10));var w=(h-g*u)/2,x="undefined"!=typeof this.s.radius?parseInt(this.s.radius,10):Math.round(g/5),y=!1,z=this.s.gradient;for(z&&"function"!=typeof z?(y=z,z=!1):z&&(z=a.createLinearGradient(0,d.y,0,c.y),this.s.gradient(z)),r||this.zo(a,c.x,d.y+.5,d.x,d.y+.5,"#000000",1),i=0;i<b.length;i++){var A=parseFloat(this.s.value(b[i])||0);if(this.Bo&&(A=this.Do(A)),!isNaN(A)){A>k&&(A=k),A-=l,A*=n;var B=c.x+w+i*h+(g+1)*v,C=d.y;if(0>A||this.s.yAxis&&0===A&&!("auto"!=this.s.origin&&this.s.origin>l))this.canvases[e].renderTextAt(!0,!0,B+Math.floor(g/2),C,this.s.label(b[i]));else{s||"auto"!=this.s.origin&&r||(A+=p/q);var D=z||this.s.color.call(this,b[i]);a.globalAlpha=this.s.alpha.call(this,b[i]);var E=this.bp(a,c,B,C,g,l,x,q,A,D,z,y);y&&this.cp(a,B,C,g,l,x,q,A,D,y),this.s.border&&this.dp(a,B,C,g,l,x,q,A,D),a.globalAlpha=1,E[0]!=B?this.canvases[e].renderTextAt(!1,!0,B+Math.floor(g/2),E[1],this.s.label(b[i])):this.canvases[e].renderTextAt(!0,!0,B+Math.floor(g/2),E[3],this.s.label(b[i])),f.addRect(b[i].id,[B-c.x,E[3]-c.y,E[2]-c.x,E[1]-c.y],e)}}}},ep:function(a,b,c,d,e,f,g){var h=this.s.xAxis,i=c;return h&&"auto"!=this.s.origin&&this.s.origin>g&&(c-=(this.s.origin-g)*e,i=c,d-=this.s.origin-g,0>d&&(d*=-1,a.translate(b+f,c),a.rotate(Math.PI),b=0,c=0),c-=.5),{value:d,x0:b,y0:c,start:i}},bp:function(a,b,c,d,e,f,g,h,i,j,k,l){a.save(),a.fillStyle=j;var m=this.ep(a,c,d,i,h,e,f),n=this.fp(a,m.x0,m.y0,e,g,h,m.value,this.s.border?1:0);k&&!l&&a.lineTo(m.x0+(this.s.border?1:0),b.y),a.fill(),a.restore();var o=m.x0,p=m.x0!=c?c+n[0]:n[0],q=m.x0!=c?m.start-n[1]-m.y0:m.y0,r=m.x0!=c?m.start-m.y0:n[1];return[o,q,p,r]},gp:function(a,b){var c,d;d=webix.color.toRgb(b),c=webix.color.rgbToHsv(d[0],d[1],d[2]),c[2]/=1.4,b="rgb("+webix.color.hsvToRgb(c[0],c[1],c[2])+")",a.strokeStyle=b,1==a.globalAlpha&&(a.globalAlpha=.9)},dp:function(a,b,c,d,e,f,g,h,i){var j;a.save(),j=this.ep(a,b,c,h,g,d,e),this.gp(a,i),this.fp(a,j.x0,j.y0,d,f,g,j.value,a.lineWidth/2,1),a.stroke(),a.restore()},cp:function(a,b,c,d,e,f,g,h,i,j){a.save();var k=this.ep(a,b,c,h,g,d,e),l=this.Oo(a,k.x0,k.y0,k.x0+d,k.y0-g*k.value+2,j,i,"y"),m=this.s.border?1:0;a.fillStyle=l.gradient,this.fp(a,k.x0+l.offset,k.y0,d-2*l.offset,f,g,k.value,l.offset+m),a.fill(),a.restore()},fp:function(a,b,c,d,e,f,g,h,i){a.beginPath();var j=0;if(e>f*g){var k=(e-f*g)/e;1>=k&&k>=-1&&(j=-Math.acos(k)+Math.PI/2)}a.moveTo(b+h,c);var l=c-Math.floor(f*g)+e+(e?0:h);f*g>e&&a.lineTo(b+h,l);var m=b+e;e&&e>0&&a.arc(m,l,Math.max(e-h,0),-Math.PI+j,-Math.PI/2,!1);var n=b+d-e-h,o=l-e+(e?h:0);a.lineTo(n,o),e&&e>0&&a.arc(n+h,l,Math.max(e-h,0),-Math.PI/2,0-j,!1);var p=b+d-h;return a.lineTo(p,c),i||a.lineTo(b+h,c),[p,o]}}),webix.extend(webix.ui.chart,{$render_line:function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r;if(j=this.hp(a,b,c,d,e),g=this.s,b.length){for(k=g.offset?c.x+.5*j.cellWidth:c.x,i=[],h=0;h<b.length;h++)if(r=this.ip(b[h],c,d,j)){if(m=h?j.cellWidth*h-.5+k:k,o="object"==typeof r?r.y0:r,h&&this.s.fixOverflow){if(q=this.ip(b[h-1],c,d,j),q.out&&q.out==r.out)continue;l=j.cellWidth*(h-1)-.5+k,n="object"==typeof q?q.y0:q,q.out&&(p="min"==q.out?d.y:c.y,i.push({x:this.jp(l,m,n,o,p),y:p})),r.out&&(p="min"==r.out?d.y:c.y,i.push({x:this.jp(l,m,n,o,p),y:p}))}r.out||i.push({x:m,y:r,index:h})}for(this.kp=c,h=1;h<=i.length;h++)l=i[h-1].x,n=i[h-1].y,h<i.length&&(m=i[h].x,o=i[h].y,this.zo(a,l,n,m,o,g.line.color.call(this,b[h-1]),g.line.width),g.line&&g.line.shadow&&(a.globalAlpha=.3,this.zo(a,l+2,n+g.line.width+8,m+2,o+g.line.width+8,"#eeeeee",g.line.width+3),a.globalAlpha=1)),"undefined"!=typeof i[h-1].index&&this.lp(a,l,n,b[i[h-1].index],g.label(b[i[h-1].index]),e,f,c)}},jp:function(a,b,c,d,e){return a+(e-c)*(b-a)/(d-c)},lp:function(a,b,c,d,e,f,g){var h=this.s.item,i=parseInt(h.radius.call(this,d),10)||0,j=this.kp;if(i){if(a.save(),h.shadow){a.lineWidth=1,a.strokeStyle="#bdbdbd",a.fillStyle="#bdbdbd";for(var k=[.1,.2,.3],l=k.length-1;l>=0;l--)a.globalAlpha=k[l],a.strokeStyle="#d0d0d0",a.beginPath(),this.Lo(a,b,c+2*i/3,i+l+1,h.type),a.stroke();a.beginPath(),a.globalAlpha=.3,a.fillStyle="#bdbdbd",this.Lo(a,b,c+2*i/3,i+1,h.type),a.fill()}a.restore(),a.lineWidth=h.borderWidth,a.fillStyle=h.color.call(this,d),a.strokeStyle=h.borderColor.call(this,d),a.globalAlpha=h.alpha.call(this,d),a.beginPath(),this.Lo(a,b,c,i+1,h.type),a.fill(),a.stroke(),a.globalAlpha=1}if(e&&this.canvases[f].renderTextAt(!1,!0,b,c-i-this.s.labelOffset,this.s.label.call(this,d)),g){var m=this.s.eventRadius||i+1;g.addRect(d.id,[b-m-j.x,c-m-j.y,b+m-j.x,c+m-j.y],f)}},Lo:function(a,b,c,d,e){var f=[];if(!e||"square"!=e&&"s"!=e)if(!e||"diamond"!=e&&"d"!=e)f=!e||"triangle"!=e&&"t"!=e?[[b,c,d,0,2*Math.PI,!0]]:[[b,c-d],[b+Math.sqrt(3)*d/2,c+d/2],[b-Math.sqrt(3)*d/2,c+d/2],[b,c-d]];else{var g=a.lineWidth>1?a.lineWidth*Math.sqrt(2)/4:0;f=[[b,c-d],[b+d,c],[b,c+d],[b-d,c],[b+g,c-d-g]]}else d*=Math.sqrt(2)/2,f=[[b-d-a.lineWidth/2,c-d],[b+d,c-d],[b+d,c+d],[b-d,c+d],[b-d,c-d]];this.Mo(a,f)},ip:function(a,b,c,d){var e=d.minValue,f=d.maxValue,g=d.unit,h=d.valueFactor,i=this.s.value(a);this.Bo&&(i=this.Do(i));var j=(parseFloat(i||0)-e)*h;this.s.yAxis||(j+=d.startValue/g);var k=c.y-g*j;return!this.s.fixOverflow||"line"!=this.s.type&&"area"!=this.s.type?(i>f&&(k=b.y),(0>j||e>i)&&(k=c.y)):i>f?k={y:b.y,y0:k,out:"max"}:(0>j||e>i)&&(k={y:c.y,y0:k,out:"min"}),k},hp:function(a,b,c,d,e){var f,g={};g.totalHeight=d.y-c.y,g.cellWidth=(d.x-c.x)/(this.s.offset?b.length:b.length-1);var h=!!this.s.yAxis,i=-1!=this.s.type.indexOf("stacked")?this.No(b):this.Go();g.maxValue=i.max,g.minValue=i.min,e||this.uo(b,c,d,g.minValue,g.maxValue,g.cellWidth),h&&(g.maxValue=parseFloat(this.s.yAxis.end),g.minValue=parseFloat(this.s.yAxis.start));var j=this.Ho(g.minValue,g.maxValue);return f=j[0],g.valueFactor=j[1],g.unit=f?g.totalHeight/f:10,g.startValue=0,h||(g.startValue=10,g.unit!=g.totalHeight&&(g.unit=f?(g.totalHeight-g.startValue)/f:10)),g}}),webix.extend(webix.ui.chart,{$render_barH:function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A;for(i=(d.y-c.y)/b.length,m=this.Go("h"),n=m.max,o=m.min,v=d.x-c.x,A=!!this.s.xAxis,e||this.mp(a,b,c,d,o,n,i),A&&(n=parseFloat(this.s.xAxis.end),o=parseFloat(this.s.xAxis.start)),t=this.Ho(o,n),r=t[0],q=t[1],x=r?v/r:10,A||(u=10,x=r?(v-u)/r:10),h=parseInt(this.s.barWidth,10),h*this.go.length+4>i&&(h=i/this.go.length-4),g=Math.floor((i-h*this.go.length)/2),s="undefined"!=typeof this.s.radius?parseInt(this.s.radius,10):Math.round(h/5),p=!1,k=this.s.gradient,k&&"function"!=typeof k?(p=k,k=!1):k&&(k=a.createLinearGradient(c.x,c.y,d.x,c.y),this.s.gradient(k)),A||this.zo(a,c.x-.5,c.y,c.x-.5,d.y,"#000000",1),l=0;l<b.length;l++)if(w=parseFloat(this.s.value(b[l]||0)),this.Bo&&(w=this.Do(w)),w>n&&(w=n),w-=o,w*=q,y=c.x,z=c.y+g+l*i+(h+1)*e,0>w&&"auto"==this.s.origin||this.s.xAxis&&0===w&&!("auto"!=this.s.origin&&this.s.origin>o))this.canvases[e].renderTextAt("middle","right",y+10,z+h/2+g,this.s.label(b[l]));else{0>w&&"auto"!=this.s.origin&&this.s.origin>o&&(w=0),A||(w+=u/x),j=k||this.s.color.call(this,b[l]),this.s.border&&this.np(a,y,z,h,o,s,x,w,j),a.globalAlpha=this.s.alpha.call(this,b[l]);var B=this.op(a,d,y,z,h,o,s,x,w,j,k,p);p&&this.pp(a,y,z,h,o,s,x,w,j,p),a.globalAlpha=1,B[3]==z?(this.canvases[e].renderTextAt("middle","left",B[0]-5,B[3]+Math.floor(h/2),this.s.label(b[l])),f.addRect(b[l].id,[B[0]-c.x,B[3]-c.y,B[2]-c.x,B[3]+h-c.y],e)):(this.canvases[e].renderTextAt("middle",!1,B[2]+5,B[1]+Math.floor(h/2),this.s.label(b[l])),f.addRect(b[l].id,[B[0]-c.x,z-c.y,B[2]-c.x,B[3]-c.y],e))}},qp:function(a,b,c,d,e,f,g,h,i){var j=0;if(e>f*g){var k=(e-f*g)/e;j=-Math.asin(k)+Math.PI/2}a.moveTo(b,c+h);var l=b+f*g-e-(e?0:h);l=Math.max(b,l),f*g>e&&a.lineTo(l,c+h);var m=c+e;e&&e>0&&a.arc(l,m,e-h,-Math.PI/2+j,0,!1);var n=c+d-e-(e?0:h),o=l+e-(e?h:0);a.lineTo(o,n),e&&e>0&&a.arc(l,n,e-h,0,Math.PI/2-j,!1);var p=c+d-h;return a.lineTo(b,p),i||a.lineTo(b,c+h),[o,p]},mp:function(a,b,c,d,e,f,g){var h=0;this.s.xAxis&&(this.canvases.x||(this.canvases.x=this.lo("axis_x")),h=this.rp(this.canvases.x.getCanvas(),b,c,d,e,f)),this.s.yAxis&&(this.canvases.y||(this.canvases.y=this.lo("axis_y")),this.sp(this.canvases.y.getCanvas(),b,c,d,g,h))},sp:function(a,b,c,d,e,f){if(this.s.yAxis){var g,h=parseInt(f?f:c.x,10)-.5,i=d.y+.5,j=c.y;this.zo(a,h,i,h,j,this.s.yAxis.color,1);for(var k=0;k<b.length;k++){var l="auto"!=this.s.origin&&"barH"==this.s.type&&parseFloat(this.s.value(b[k]))<this.s.origin;g=j+e/2+k*e,this.canvases.y.renderTextAt("middle",!l&&"left",l?h+5:h-5,g,this.s.yAxis.template(b[k]),"webix_axis_item_y",l?0:h-10),this.s.yAxis.lines.call(this,b[k])&&this.zo(a,c.x,g,d.x,g,this.s.yAxis.lineColor.call(this,b[k]),1)}this.s.yAxis.lines.call(this,{})&&this.zo(a,c.x+.5,j+.5,d.x,j+.5,this.s.yAxis.lineColor.call(this,{}),1),this.Co(c,d)}},rp:function(a,b,c,d,e,f){var g,h={},i=this.s.xAxis;if(i){var j=d.y+.5,k=c.x-.5,l=d.x-.5,m=c.x;if(this.zo(a,k,j,l,j,i.color,1),i.step&&(g=parseFloat(i.step)),("undefined"==typeof this.so.step||"undefined"==typeof this.so.start||"undefined"==typeof this.so.end)&&(h=this.Ao(e,f),e=h.start,f=h.end,g=h.step,this.s.xAxis.end=f,this.s.xAxis.start=e,this.s.xAxis.step=g),0!==g){for(var n=(l-k)*g/(f-e),o=0,p=e;f>=p;p+=g){var q=this.Bo?Math.pow(10,p):p;h.fixNum&&(q=parseFloat(q).toFixed(h.fixNum));var r=Math.floor(k+o*n)+.5;if(p==e&&"auto"==this.s.origin||!i.lines.call(this,p)||this.zo(a,r,j,r,c.y,this.s.xAxis.lineColor.call(this,p),1),p==this.s.origin&&(m=r+1),1>g&&!this.Bo){var s=Math.min(Math.floor(this.Do(g)),0>=e?0:Math.floor(this.Do(e))),t=Math.pow(10,-s);q=Math.round(q*t)/t,p=q}this.canvases.x.renderTextAt(!1,!0,r,j+2,i.template(q.toString()),"webix_axis_item_x"),o++}return this.canvases.x.renderTextAt(!0,!1,k,d.y+this.s.padding.bottom-3,this.s.xAxis.title,"webix_axis_title_x",d.x-c.x),i.lines.call(this,{})||this.zo(a,k,c.y-.5,l,c.y-.5,this.s.xAxis.color,.2),m}}},tp:function(a,b,c,d,e,f,g){var h=this.s.yAxis,i=b;return h&&"auto"!=this.s.origin&&this.s.origin>g&&(b+=(this.s.origin-g)*e,i=b,d-=this.s.origin-g,0>d&&(d*=-1,a.translate(b,c+f),a.rotate(Math.PI),b=.5,c=0),b+=.5),{value:d,x0:b,y0:c,start:i}},op:function(a,b,c,d,e,f,g,h,i,j,k,l){a.save();var m=this.tp(a,c,d,i,h,e,f);a.fillStyle=j,a.beginPath();var n=this.qp(a,m.x0,m.y0,e,g,h,m.value,this.s.border?1:0);k&&!l&&a.lineTo(b.x,m.y0+(this.s.border?1:0)),a.fill(),a.restore();var o=m.y0,p=m.y0!=d?d:n[1],q=m.y0!=d?m.start-n[0]:m.start,r=m.y0!=d?m.start:n[0];return[q,o,r,p]},np:function(a,b,c,d,e,f,g,h,i){a.save();var j=this.tp(a,b,c,h,g,d,e);a.beginPath(),this.gp(a,i),a.globalAlpha=.9,this.qp(a,j.x0,j.y0,d,f,g,j.value,a.lineWidth/2,1),a.stroke(),a.restore()},pp:function(a,b,c,d,e,f,g,h,i,j){a.save();var k=this.tp(a,b,c,h,g,d,e),l=this.Oo(a,k.x0,k.y0+d,k.x0+g*k.value,k.y0,j,i,"x");a.fillStyle=l.gradient,a.beginPath(),this.qp(a,k.x0,k.y0+l.offset,d-2*l.offset,f,g,k.value,l.offset),a.fill(),a.globalAlpha=1,a.restore()}}),webix.extend(webix.ui.chart,{$render_stackedBar:function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n=this.s,o=d.y-c.y,p=!!n.yAxis,q=!!n.xAxis,r=this.No(b),s=0===n.origin;g=r.max,h=r.min;var t=Math.floor((d.x-c.x)/b.length);e||(i=this.uo(b,c,d,h,g,t)),p&&(g=parseFloat(n.yAxis.end),h=parseFloat(n.yAxis.start));var u=this.Ho(h,g);m=u[0],l=u[1];var v=m?o/m:10,w=parseInt(n.barWidth,10);w+4>t&&(w=t-4);var x=Math.floor((t-w)/2),y=!!n.gradient&&n.gradient;q||this.zo(a,c.x,d.y+.5,d.x,d.y+.5,"#000000",1);for(var z=0;z<b.length;z++){var A=parseFloat(n.value(b[z]||0));this.Bo&&(A=this.Do(A)),j=c.x+x+z*t;var B=s&&0>A;if(e?k=B?b[z].$startYN:b[z].$startY:(k=i-1,b[z].$startY=k,s&&(B&&(k=i+1),b[z].$startYN=i+1)),A&&(e||s||(A-=h),A*=l,!(k<c.y+1)))if(n.yAxis&&0===A)this.canvases.y.renderTextAt(!0,!0,j+Math.floor(w/2),k,this.s.label(b[z]));else{var C=this.s.color.call(this,b[z]),D=Math.abs(k-(s?d.y+h*v:d.y))<3;a.globalAlpha=n.alpha.call(this,b[z]),a.fillStyle=a.strokeStyle=n.color.call(this,b[z]),a.beginPath();var E=k-v*A+(D?B?-1:1:0),F=this.up(a,j-(n.border?.5:0),k,w+(n.border?.5:0),E,0,c.y);if(a.fill(),a.stroke(),y){a.save();var G=this.Oo(a,j,k,j+w,F[1],y,C,"y");a.fillStyle=G.gradient,a.beginPath(),F=this.up(a,j+G.offset,k,w-2*G.offset,E,n.border?1:0,c.y),a.fill(),a.restore()}n.border&&(a.save(),"string"==typeof n.border?a.strokeStyle=n.border:this.gp(a,C),a.beginPath(),this.up(a,j-.5,parseInt(k,10)+.5,w+1,parseInt(E,10)+.5,0,c.y,D),a.stroke(),a.restore()),a.globalAlpha=1,this.canvases[e].renderTextAt(!1,!0,j+Math.floor(w/2),F[1]+(k-F[1])/2-7,this.s.label(b[z])),f.addRect(b[z].id,[j-c.x,F[1]-c.y,F[0]-c.x,b[z][B?"$startYN":"$startY"]-c.y],e),b[z][B?"$startYN":"$startY"]=F[1]}}},up:function(a,b,c,d,e,f,g,h){a.moveTo(b,c),g>e&&(e=g),a.lineTo(b,e);var i=b+d,j=e;a.lineTo(i,j);var k=b+d;return a.lineTo(k,c),h||a.lineTo(b,c),[k,j]}}),webix.extend(webix.ui.chart,{$render_stackedBarH:function(a,b,c,d,e,f){var g,h,i,j,k=d.x-c.x,l=!!this.s.yAxis,m=this.No(b);g=m.max,h=m.min;var n=Math.floor((d.y-c.y)/b.length);e||this.mp(a,b,c,d,h,g,n),l&&(g=parseFloat(this.s.xAxis.end),h=parseFloat(this.s.xAxis.start));var o=this.Ho(h,g);j=o[0],i=o[1];var p=j?k/j:10,q=0;l||(q=10,p=j?(k-q)/j:10);var r=parseInt(this.s.barWidth,10);r+4>n&&(r=n-4);var s=(n-r)/2,t=0,u=!1,v=this.s.gradient;v&&(u=!0),l||this.zo(a,c.x-.5,c.y,c.x-.5,d.y,"#000000",1);var w=0,x=0;for(y=0;y<this.go.length;y++)y==e&&(x=w),"stackedBarH"==this.go[y].type&&w++;for(var y=0;y<b.length;y++){x||(b[y].$startX=c.x);var z=parseFloat(this.s.value(b[y]||0));z>g&&(z=g),z-=h,z*=i;var A=c.x,B=c.y+s+y*n;if(x?A=b[y].$startX:b[y].$startX=A,0>z||this.s.yAxis&&0===z)this.canvases.y.renderTextAt("middle",!0,A+10,B+r/2,this.s.label(b[y]));else{l||(z+=q/p);var C=this.s.color.call(this,b[y]);a.globalAlpha=this.s.alpha.call(this,b[y]),a.fillStyle=this.s.color.call(this,b[y]),a.beginPath();var D=this.qp(a,A,B,r,t,p,z,0);if(v&&!u&&a.lineTo(c.x+k,B+(this.s.border?1:0)),a.fill(),u){var E=this.Oo(a,A,B+r,A,B,u,C,"x");a.fillStyle=E.gradient,a.beginPath(),D=this.qp(a,A,B,r,t,p,z,0),a.fill()}this.s.border&&this.np(a,A,B,r,h,t,p,z,C),a.globalAlpha=1,this.canvases[e].renderTextAt("middle",!0,b[y].$startX+(D[0]-b[y].$startX)/2-1,B+(D[1]-B)/2,this.s.label(b[y])),f.addRect(b[y].id,[b[y].$startX-c.x,B-c.y,D[0]-c.x,D[1]-c.y],e),b[y].$startX=D[0]}}}}),webix.extend(webix.ui.chart,{$render_spline:function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s;if(k=this.hp(a,b,c,d,e),g=this.s,this.kp=c,i=[],b.length){for(n=g.offset?c.x+.5*k.cellWidth:c.x,h=0;h<b.length;h++)q=this.ip(b[h],c,d,k),q&&(m=h?k.cellWidth*h-.5+n:n,i.push({x:m,y:q,index:h}));for(l=this.vp(i),h=0;h<i.length;h++){if(o=i[h].x,r=i[h].y,h<i.length-1){for(p=i[h+1].x,s=i[h+1].y,j=o;p>j;j++){var t=this.wp(j,o,h,l.a,l.b,l.c,l.d);t<c.y&&(t=c.y),t>d.y&&(t=d.y);var u=this.wp(j+1,o,h,l.a,l.b,l.c,l.d);u<c.y&&(u=c.y),u>d.y&&(u=d.y),this.zo(a,j,t,j+1,u,g.line.color(b[h]),g.line.width)}this.zo(a,p-1,this.wp(j,o,h,l.a,l.b,l.c,l.d),p,s,g.line.color(b[h]),g.line.width)}this.lp(a,o,r,b[i[h].index],g.label(b[i[h].index]),e,f)}}},vp:function(a){var b,c,d,e,f,g,h,i,j=[],k=[],l=a.length;for(f=0;l-1>f;f++)j[f]=a[f+1].x-a[f].x,k[f]=(a[f+1].y-a[f].y)/j[f];for(h=[],i=[],h[0]=0,h[1]=2*(j[0]+j[1]),i[0]=0,i[1]=6*(k[1]-k[0]),f=2;l-1>f;f++)h[f]=2*(j[f-1]+j[f])-j[f-1]*j[f-1]/h[f-1],i[f]=6*(k[f]-k[f-1])-j[f-1]*i[f-1]/h[f-1];for(g=[],g[l-1]=g[0]=0,f=l-2;f>=1;f--)g[f]=(i[f]-j[f]*g[f+1])/h[f];for(b=[],c=[],d=[],e=[],f=0;l-1>f;f++)b[f]=a[f].y,c[f]=-j[f]*g[f+1]/6-j[f]*g[f]/3+(a[f+1].y-a[f].y)/j[f],d[f]=g[f]/2,e[f]=(g[f+1]-g[f])/(6*j[f]);return{a:b,b:c,c:d,d:e}},wp:function(a,b,c,d,e,f,g){return d[c]+(a-b)*(e[c]+(a-b)*(f[c]+(a-b)*g[c]))}}),webix.extend(webix.ui.chart,{$render_area:function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;if(l=this.hp(a,b,c,d,e),h=this.s,j=h.eventRadius||Math.floor(l.cellWidth/2),b.length){for(m=[],p=h.offset?c.x+.5*l.cellWidth:c.x,i=0;i<b.length;i++)if(k=b[i],o=this.ip(k,c,d,l),s=p+l.cellWidth*i,o){if(t="object"==typeof o?o.y0:o,i&&this.s.fixOverflow){if(n=this.ip(b[i-1],c,d,l),n.out&&n.out==o.out)continue;q=l.cellWidth*(i-1)-.5+p,r="object"==typeof n?n.y0:n,n.out&&(u="min"==n.out?d.y:c.y,m.push([this.jp(q,s,r,t,u),u])),o.out&&(u="min"==o.out?d.y:c.y,m.push([this.jp(q,s,r,t,u),u]),i==b.length-1&&u==c.y&&m.push([s,c.y]))}o.out||(m.push([s,t]),f.addRect(k.id,[s-j-c.x,t-j-c.y,s+j-c.x,t+j-c.y],e)),h.yAxis||(g=h.offset||i!=b.length-1?"center":"left",this.canvases[e].renderTextAt(!1,g,s,t-h.labelOffset,h.label(k)))}m.length&&(m.push([s,d.y]),m.push([m[0][0],d.y])),a.globalAlpha=this.s.alpha.call(this,b[0]),a.fillStyle=this.s.color.call(this,b[0]),a.beginPath(),this.Mo(a,m),a.fill(),h.border&&(a.lineWidth=h.borderWidth||1,h.borderColor?a.strokeStyle=h.borderColor.call(this,b[0]):this.gp(a,a.fillStyle),a.beginPath(),this.Mo(a,m),a.stroke()),a.lineWidth=1,a.globalAlpha=1}},$render_stackedArea:function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s,t;if(p=this.hp(a,b,c,d,e),j=this.s,n=j.eventRadius||Math.floor(p.cellWidth/2),b.length){q=[],t=[],r=j.offset?c.x+.5*p.cellWidth:c.x;var u=function(a,c){return e?b[a].$startY?c-d.y+b[a].$startY:0:c},v=function(a,b,c){var d=(c.y-b.y)/(c.x-b.x);return d*a+b.y-d*b.x};for(k=0;k<b.length;k++)o=b[k],k?r+=p.cellWidth:(s=u(k,d.y),q.push([r,s])),s=u(k,this.ip(o,c,d,p)),t.push(isNaN(s)&&!k?b[k].$startY||d.y:s),s&&(q.push([r,s]),f.addRect(o.id,[r-n-c.x,s-n-c.y,r+n-c.x,s+n-c.y],e),j.yAxis||(i=!j.offset&&m?"left":"center",this.canvases[e].renderTextAt(!1,i,r,s-j.labelOffset,j.label(o))));if(q.push([r,u(k-1,d.y)]),e)for(k=b.length-2;k>0;k--)r-=p.cellWidth,s=b[k].$startY,s&&q.push([r,s]);for(q.push([q[0][0],q[0][1]]),a.globalAlpha=this.s.alpha.call(this,b[0]),a.fillStyle=this.s.color.call(this,b[0]),a.beginPath(),this.Mo(a,q),a.fill(),k=0;k<b.length;k++){if(s=t[k],!s)for(k==b.length-1&&(s=b[k].$startY),l=k+1;l<b.length;l++)if(t[l]){g={x:c.x,y:t[0]},h={x:c.x+p.cellWidth*l,y:t[l]},s=v(c.x+p.cellWidth*k,g,h);break}b[k].$startY=s}}}}),webix.extend(webix.ui.chart,{$render_radar:function(a,b,c,d,e,f){
this.xp(a,b,c,d,e,f)},xp:function(a,b,c,d,e,f){if(b.length){for(var g=this.To(c,d),h=this.s.radius?this.s.radius:g.radius,i=this.s.x?this.s.x:g.x,j=this.s.y?this.s.y:g.y,k=[],l=0;l<b.length;l++)k.push(1);var m=this.Wo(k,b.length);this.kp=c,e||this.yp(m,i,j,h,b),this.zp(a,m,i,j,h,b,e,f)}},zp:function(a,b,c,d,e,f,g,h){var i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A;for(k=this.s,m=k.yAxis.start,n=k.yAxis.end,A=this.Ho(m,n),t=A[0],z=t?e/t:e/2,y=A[1],u=-Math.PI/2,i=j=u,q=[],p=0,l=0;l<f.length;l++)x?w=x:(v=k.value(f[l]),this.Bo&&(v=this.Do(v)),w=(parseFloat(v||0)-m)*y),r=Math.floor(z*w),v=k.value(l!=f.length-1?f[l+1]:f[0]),this.Bo&&(v=this.Do(v)),x=(parseFloat(v||0)-m)*y,s=Math.floor(z*x),i=j,j=l!=f.length-1?u+b[l]-1e-4:u,o=p||this.Qo(i,c,d,r),p=this.Qo(j,c,d,s),q.push(o);k.fill&&this.Ap(a,q,f),!k.disableLines&&f.length>2&&this.Bp(a,q,f),(!k.disableItems||f.length<3)&&this.Cp(a,q,f,g,h),q=null},Cp:function(a,b,c,d,e){for(var f=0;f<b.length;f++)this.lp(a,b[f].x,b[f].y,c[f],this.s.label.call(this,c),d,e)},Ap:function(a,b,c){var d,e;a.globalAlpha=this.s.alpha.call(this,{}),a.beginPath();for(var f=0;f<b.length;f++)a.fillStyle=this.s.fill.call(this,c[f]),d=b[f],e=b[f+1]||b[0],f||a.moveTo(d.x,d.y),a.lineTo(e.x,e.y);a.fill(),a.globalAlpha=1},Bp:function(a,b,c){for(var d,e,f=0;f<b.length;f++)d=b[f],e=b[f+1]||b[0],this.zo(a,d.x,d.y,e.x,e.y,this.s.line.color.call(this,c[f]),this.s.line.width)},yp:function(a,b,c,d,e){var f=this.s.yAxis,g=this.s.xAxis,h=f.start,i=f.end,j=f.step,k={},l=this.to;if("undefined"==typeof l.step||"undefined"==typeof l.start||"undefined"==typeof l.end){var m=this.Go();k=this.Ao(m.min,m.max),h=k.start,i=k.end,j=k.step,f.end=i,f.start=h}var n,o,p,q,r,s=[],t=0,u=d*j/(i-h);1>j&&(q=Math.min(this.Do(j),0>=h?0:this.Do(h)),r=Math.pow(10,-q));var v=[];this.canvases.scale||(this.canvases.scale=this.lo("radar_scale"));var w=this.canvases.scale.getCanvas();for(n=i;n>=h;n-=j){var x=this.Bo?Math.pow(10,n):n;k.fixNum&&(x=parseFloat(n).toFixed(k.fixNum)),s.push(Math.floor(t*u)+.5),r&&!this.Bo&&(x=Math.round(x*r)/r,n=x);var y=c-d+s[s.length-1];if(this.canvases.scale.renderTextAt("middle","left",b,y,f.template(x.toString()),"webix_axis_item_y webix_radar"),a.length<2)return void this.Dp(w,"arc",b,c,d-s[s.length-1],-Math.PI/2,3*Math.PI/2,n);var z,A=-Math.PI/2,B=A;for(o=0;o<a.length;o++)t||v.push(B),z=A+a[o]-1e-4,this.Dp(w,a.length>2?l.lineShape||"line":"arc",b,c,d-s[s.length-1],B,z,n,o,e[n]),B=z;t++}for(n=0;n<v.length;n++)p=this.Qo(v[n],b,c,d),g.lines.call(this,e[n],n)&&this.zo(w,b,c,p.x,p.y,g?g.lineColor.call(this,e[n]):"#cfcfcf",1),this.Ep(w,b,c,d,v[n],g?g.template.call(this,e[n]):"&nbsp;")},Dp:function(a,b,c,d,e,f,g,h,i){var j,k;if(0>e)return!1;j=this.Qo(f,c,d,e),k=this.Qo(g,c,d,e);var l=this.s.yAxis;l.bg&&(a.beginPath(),a.moveTo(c,d),"arc"==b?a.arc(c,d,e,f,g,!1):(a.lineTo(j.x,j.y),a.lineTo(k.x,k.y)),a.fillStyle=l.bg(h,i),a.moveTo(c,d),a.fill(),a.closePath()),l.lines.call(this,h)&&(a.lineWidth=1,a.beginPath(),"arc"==b?a.arc(c,d,e,f,g,!1):(a.moveTo(j.x,j.y),a.lineTo(k.x,k.y)),a.strokeStyle=l.lineColor.call(this,h),a.stroke())},Ep:function(a,b,c,d,e,f){var g=this.canvases.scale.renderText(0,0,f,"webix_axis_radar_title",1),h=g.scrollWidth,i=g.offsetHeight,j=.001,k=this.Qo(e,b,c,d+5),l=0,m=0;(0>e||e>Math.PI)&&(m=-i),e>Math.PI/2&&(l=-h),Math.abs(e+Math.PI/2)<j||Math.abs(e-Math.PI/2)<j?l=-h/2:(Math.abs(e)<j||Math.abs(e-Math.PI)<j)&&(m=-i/2),g.style.top=k.y+m+"px",g.style.left=k.x+l+"px",g.style.width=h+"px",g.style.whiteSpace="nowrap"}}),webix.extend(webix.ui.chart,{$render_scatter:function(a,b,c,d,e,f){if(!this.s.xValue)return!1;var g=this.Go(),h=this.Go("h","xValue");e||(this.canvases.x||(this.canvases.x=this.lo("axis_x")),this.canvases.y||(this.canvases.y=this.lo("axis_y")),this.vo(this.canvases.y.getCanvas(),b,c,d,g.min,g.max),this.rp(this.canvases.x.getCanvas(),b,c,d,h.min,h.max)),g={min:this.s.yAxis.start,max:this.s.yAxis.end},h={min:this.s.xAxis.start,max:this.s.xAxis.end};var i=this.Fp(a,b,c,d,h,g);this.kp=c;for(var j=0;j<b.length;j++)this.Gp(a,f,c,d,i,h,g,b[j],e)},Fp:function(a,b,c,d,e,f){var g={};return g.totalHeight=d.y-c.y,g.totalWidth=d.x-c.x,this.Hp(g,e.min,e.max,g.totalWidth,"X"),this.Hp(g,f.min,f.max,g.totalHeight,"Y"),g},Gp:function(a,b,c,d,e,f,g,h,i){var j=this.Ip(e,d,c,f,h,"X"),k=this.Ip(e,c,d,g,h,"Y");this.lp(a,j,k,h,this.s.label.call(this,h),i,b)},Ip:function(a,b,c,d,e,f){var g=this.s["X"==f?"xValue":"value"].call(this,e),h=a["valueFactor"+f],i=(parseFloat(g||0)-d.min)*h,j=a["unit"+f],k=c[f.toLowerCase()]-("X"==f?-1:1)*Math.floor(j*i);return 0>i&&(k=c[f.toLowerCase()]),g>d.max&&(k=b[f.toLowerCase()]),g<d.min&&(k=c[f.toLowerCase()]),k},Hp:function(a,b,c,d,e){var f=this.Ho(b,c);e=e||"",a["relValue"+e]=f[0],a["valueFactor"+e]=f[1],a["unit"+e]=a["relValue"+e]?d/a["relValue"+e]:10}}),webix.extend(webix.ui.chart,{presets:{simple:{item:{borderColor:"#ffffff",color:"#2b7100",shadow:!1,borderWidth:2},line:{color:"#8ecf03",width:2}},plot:{color:"#1293f8",item:{borderColor:"#636363",borderWidth:1,color:"#ffffff",type:"r",shadow:!1},line:{color:"#1293f8",width:2}},diamond:{color:"#b64040",item:{borderColor:"#b64040",color:"#b64040",type:"d",radius:3,shadow:!0},line:{color:"#ff9000",width:2}},point:{color:"#fe5916",disableLines:!0,fill:!1,disableItems:!1,item:{color:"#feb916",borderColor:"#fe5916",radius:2,borderWidth:1,type:"r"},alpha:1},line:{line:{color:"#3399ff",width:2},item:{color:"#ffffff",borderColor:"#3399ff",radius:2,borderWidth:2,type:"d"},fill:!1,disableItems:!1,disableLines:!1,alpha:1},area:{fill:"#3399ff",line:{color:"#3399ff",width:1},disableItems:!0,alpha:.2,disableLines:!1},round:{item:{radius:3,borderColor:"#3f83ff",borderWidth:1,color:"#3f83ff",type:"r",shadow:!1,alpha:.6}},square:{item:{radius:3,borderColor:"#447900",borderWidth:2,color:"#69ba00",type:"s",shadow:!1,alpha:1}},column:{color:"RAINBOW",gradient:!1,barWidth:45,radius:0,alpha:1,border:!0},stick:{barWidth:5,gradient:!1,color:"#67b5c9",radius:2,alpha:1,border:!1},alpha:{color:"#b9a8f9",barWidth:70,gradient:"falling",radius:0,alpha:.5,border:!0}}}),webix.protoUI({name:"calendar",defaults:{date:new Date,select:!1,navigation:!0,monthSelect:!0,weekHeader:!0,weekNumber:!1,skipEmptyWeeks:!1,calendarHeader:"%F %Y",calendarWeekHeader:"W#",events:webix.Date.isHoliday,minuteStep:5,icons:!1,timepickerHeight:30,headerHeight:70,dayTemplate:function(a){return a.getDate()},width:260,height:250},dayTemplate_setter:webix.template,calendarHeader_setter:webix.Date.dateToStr,calendarWeekHeader_setter:webix.Date.dateToStr,calendarTime_setter:function(a){return this._w=a,webix.Date.dateToStr(a)},date_setter:function(a){return this.Jp(a)},maxDate_setter:function(a){return this.Jp(a)},minDate_setter:function(a){return this.Jp(a)},minTime_setter:function(a){return"string"==typeof a&&(a=webix.i18n.parseTimeFormatDate(a),a=[a.getHours(),a.getMinutes()]),a},maxTime_setter:function(a){return"string"==typeof a&&(a=webix.i18n.parseTimeFormatDate(a),a=[a.getHours(),a.getMinutes()]),a},$init:function(){this.x.className+=" webix_calendar",this.Kp={},this.Lp=this.Mp=null,this.Np=0},type_setter:function(a){return"time"==a?(this.jq=!0,this.Np=-1):"year"==a&&(this.NC=!0),a},$setSize:function(a,b){webix.ui.view.prototype.$setSize.call(this,a,b)&&this.render()},$getSize:function(a,b){if(this.s.cellHeight){var c=this.Op(this.s.date);this.s.height=this.s.cellHeight*c.Sp+(webix.skin.$active.calendarHeight||70)}return webix.ui.view.prototype.$getSize.call(this,a,b)},Op:function(a,b){if(!this.Pp||b){var c=a.getMonth(),d=a.getFullYear(),e=new Date(d,c+1,1),f=webix.Date.weekStart(new Date(d,c,1)),g=Math.round((e.valueOf()-f.valueOf())/864e5),h=this.s.skipEmptyWeeks?Math.ceil(g/7):6;this.Pp={Qp:c,Rp:f,zc:e,Sp:h}}return this.Pp},$skin:function(){webix.skin.$active.calendar&&(webix.skin.$active.calendar.width&&(this.defaults.width=webix.skin.$active.calendar.width),webix.skin.$active.calendar.height&&(this.defaults.height=webix.skin.$active.calendar.height),webix.skin.$active.calendar.headerHeight&&(this.defaults.headerHeight=webix.skin.$active.calendar.headerHeight),webix.skin.$active.calendar.timepickerHeight&&(this.defaults.timepickerHeight=webix.skin.$active.calendar.timepickerHeight))},Tp:function(a){for(var b=this.Op(a),c=this.s,d=[],e=[],f=this.bc-36,g=this.dc-this.s.headerHeight-10-(this.s.timepicker||this.ax?this.s.timepickerHeight:0),h=c.weekNumber?8:7,i=0;h>i;i++)e[i]=Math.ceil(f/(h-i)),f-=e[i];for(var j=b.Sp,k=0;j>k;k++)d[k]=Math.ceil(g/(j-k)),g-=d[k];return[e,d]},icons_setter:function(a){a?"object"==typeof a?this.ax=a:this.ax=this.Sx:this.ax=null},ax:[],Sx:[{template:function(){return"<span class='webix_cal_icon_today webix_cal_icon'>"+webix.i18n.calendar.today+"</span>"},on_click:{webix_cal_icon_today:function(){this.setValue(new Date),this.callEvent("onTodaySet",[this.getSelectedDate()])}}},{template:function(){return"<span class='webix_cal_icon_clear webix_cal_icon'>"+webix.i18n.calendar.clear+"</span>"},on_click:{webix_cal_icon_clear:function(){this.setValue(""),this.callEvent("onDateClear",[this.getSelectedDate()])}}}],refresh:function(){this.render()},render:function(){this.Np=0,this.Up=!1;var a=this.s;if(this.isVisible(a.id)){this.Vp=webix.Date.datePart(new Date),this.callEvent("onBeforeRender",[]);var b=this.s.date,c=this.Op(b,!0),d=this.Tp(b),e=d[0],f=d[1],g="<div class='webix_cal_month'><span class='webix_cal_month_name"+(this.s.monthSelect?"":" webix_readonly")+"'>"+a.calendarHeader(b)+"</span>";if(a.navigation&&(g+="<div class='webix_cal_prev_button'></div><div class='webix_cal_next_button'></div>"),g+="</div>",a.weekHeader&&(g+="<div class='webix_cal_header'>"+this.Wp(e)+"</div>"),g+="<div class='webix_cal_body'>"+this.Xp(e,f,c)+"</div>",(this.s.timepicker||this.ax)&&(g+="<div class='webix_cal_footer'>",this.s.timepicker&&(g+=this.Yp(b)),this.ax&&(g+=this.bx()),g+="</div>"),this.w.innerHTML=g,"time"==this.s.type){var h=this.s.date;h&&("string"==typeof h?b=webix.i18n.parseTimeFormatDate(h):webix.isArray(h)&&(b.setHours(h[0]),b.setMinutes(h[1]))),this.yt(-1,b)}else"month"==this.s.type?this.yt(1,b):"year"==this.s.type&&this.yt(2,b);this.callEvent("onAfterRender",[])}},bx:function(a){for(var b="<div class='webix_cal_icons'>",c=this.ax,d=0;d<c.length;d++){if(c[d].template){var e="function"==typeof c[d].template?c[d].template:webix.template(c[d].template);b+=e.call(this,a)}c[d].on_click&&webix.extend(this.on_click,c[d].on_click)}return b+="</div>"},Yp:function(a){var b=this.s.calendarTime||webix.i18n.timeFormatStr;return"<div class='webix_cal_time"+(this.ax?" webix_cal_time_icons":"")+"'><span class='webix_icon fa-clock-o'></span> "+b(a)+"</div>"},Wp:function(a){var b=this.s,c="",d=0;b.weekNumber&&(d=1,c+="<div class='webix_cal_week_header' style='width: "+a[0]+"px;' >"+b.calendarWeekHeader()+"</div>");for(var e=webix.Date.startOnMonday?1:0,f=0;7>f;f++){var g=(e+f)%7,h=webix.i18n.calendar.dayShort[g];c+="<div day='"+g+"' style='width: "+a[f+d]+"px;' >"+h+"</div>"}return c},blockDates_setter:function(a){return webix.toFunctor(a,this.$scope)},Zp:function(a,b){var c="";return webix.Date.equal(a,this.Vp)&&(c+=" webix_cal_today"),this.sz(a)||(c+=" webix_cal_day_disabled"),webix.Date.equal(a,this.Lp)&&(c+=" webix_cal_select"),a.getMonth()!=b.Qp&&(c+=" webix_cal_outside"),this.s.events&&(c+=" "+this.s.events(a)),c+=" webix_cal_day"},Xp:function(a,b,c){for(var d=this.s,e="",f=webix.Date.datePart(webix.Date.copy(c.Rp)),g=d.weekNumber?1:0,h=webix.Date.getISOWeek(webix.Date.add(f,2,"day",!0)),i=(this.s.minDate||new Date(1,1,1),this.s.maxDate||new Date(9999,1,1),0);i<b.length;i++){e+="<div class='webix_cal_row' style='height:"+b[i]+"px;line-height:"+b[i]+"px'>",g&&(!f.getMonth()&&f.getDate()<7&&(h=webix.Date.getISOWeek(webix.Date.add(f,2,"day",!0))),e+="<div class='webix_cal_week_num' style='width:"+a[0]+"px'>"+h+"</div>");for(var j=g;j<a.length;j++){var k=this.Zp(f,c),l=this.s.dayTemplate.call(this,f);e+="<div day='"+j+"' class='"+k+"' style='width:"+a[j]+"px'><span class='webix_cal_day_inner'>"+l+"</span></div>",f=webix.Date.add(f,1,"day"),f.getHours()&&(f=webix.Date.datePart(f))}e+="</div>",h++}return e},$p:function(a,b,c){var d=this.s.date;b||(b=this.aq[this.Np]._p),this.Np||(d=webix.Date.copy(d),d.setDate(1));var e=webix.Date.add(d,a*b,"month",!0);this.bq(d,e)},bq:function(a,b){this.callEvent("onBeforeMonthChange",[a,b])&&(this.Np?this.cq(b):this.showCalendar(b),this.callEvent("onAfterMonthChange",[b,a]))},aq:{"-2":{lz:function(a){var b=this.s,c=b.date,d=!1,e=b.minTime?b.minTime[0]:0,f=b.maxTime?b.maxTime[0]+(b.maxTime[1]?1:0):24,g=b.minTime&&c.getHours()==e?b.minTime[1]:0,h=b.maxTime&&b.maxTime[1]&&c.getHours()==f-1?b.maxTime[1]:60;if(this.s.blockTime){var i=webix.Date.copy(c);i.setMinutes(a),d=this.s.blockTime(i)}return g>a||a>=h||d},dq:function(a,b){a.setMinutes(b)}},"-1":{lz:function(a){var b=this.s,c=b.date,d=b.minTime?b.minTime[0]:0,e=b.maxTime?b.maxTime[0]+(b.maxTime[1]?1:0):24;if(d>a||a>=e)return!0;if(b.blockTime){var f=webix.Date.copy(c);f.setHours(a);for(var g=b.minTime&&a==d?b.minTime[1]:0,h=b.maxTime&&b.maxTime[1]&&a==e-1?b.maxTime[1]:60,i=g;h>i;i+=b.minuteStep)if(f.setMinutes(i),!b.blockTime(f))return!1;return!0}},dq:function(a,b){a.setHours(b)}},0:{_p:1},1:{lz:function(a,b){var c,d,e=!1,f=b.s.minDate||null,g=b.s.maxDate||null,h=b.s.date.getFullYear();return f&&g&&(c=f.getFullYear(),d=g.getFullYear(),(c>h||h==c&&f.getMonth()>a||h>d||h==d&&g.getMonth()<a)&&(e=!0)),e},Jv:function(a,b){return a<b.s.minDate?a=webix.Date.copy(b.s.minDate):a>b.s.maxDate&&(a=webix.Date.copy(b.s.maxDate)),a},eq:function(a){return a.getFullYear()},fq:function(a){return webix.i18n.calendar.monthShort[a]},dq:function(a,b){b!=a.getMonth()&&a.setDate(1),a.setMonth(b)},_p:12},2:{lz:function(a,b){a+=this.gq;var c=!1,d=b.s.minDate,e=b.s.maxDate;return d&&e&&(d.getFullYear()>a||e.getFullYear()<a)&&(c=!0),c},Jv:function(a,b){return a<b.s.minDate?a=webix.Date.copy(b.s.minDate):a>b.s.maxDate&&(a=webix.Date.copy(b.s.maxDate)),a},eq:function(a){var b=a.getFullYear();return this.gq=b=b-b%10-1,b+" - "+(b+10)},fq:function(a){return this.gq+a},dq:function(a,b){a.setFullYear(this.gq+b)},_p:120}},mz:function(){var a,b,c;if(b=this.aq[-1].lz.call(this,this.s.date.getHours()))for(a=0;24>a;a++)if(!this.aq[-1].lz.call(this,a)){this.s.date.setHours(a);break}if(c=this.aq[-2].lz.call(this,this.s.date.getMinutes()))for(a=0;60>a;a+=this.s.minuteStep)if(!this.aq[-2].lz.call(this,a)){this.s.date.setMinutes(a);break}},cq:function(a){var b,c,d,e,f,g,h,i,j,k,l="";if(b=this.s,f=b.weekHeader?2:1,k=this.aq[this.Np],g=this.w.childNodes,a&&(b.date=a),i=b.type,this.Up||(this.hq=this.w.offsetHeight-b.headerHeight,"year"!=i&&"month"!=i?this.hq-=b.timepickerHeight:this.ax&&(this.hq-=10),this.iq=g[f].offsetWidth,this.Up=1),this.jq){d=this.hq/6;var m=6,n=this._w||webix.i18n.timeFormat,o=n.match(/%([a,A])/);for(o&&m++,j=parseInt((this.iq-3)/m,10),l+="<div class='webix_time_header'>"+this.kq(j,o)+"</div>",l+="<div  class='webix_cal_body' style='height:"+this.hq+"px'>",this.mz(),l+="<div class='webix_hours'>",h=b.date.getHours(),e=0;24>e;e++){if(c="",o&&e%4===0){var p=e?12==e?"pm":"":"am";l+="<div class='webix_cal_block_empty"+c+"' style='"+this.lq(j,d)+"clear:both;'>"+p+"</div>"}this.aq[-1].lz.call(this,e)?c+=" webix_cal_day_disabled":h==e&&(c+=" webix_selected");var q=webix.Date.toFixed(o&&e>12?e-12:e);l+="<div class='webix_cal_block"+c+"' data-value='"+e+"' style='"+this.lq(j,d)+(e%4!==0||o?"":"clear:both;")+"'>"+q+"</div>"}for(l+="</div>",l+="<div class='webix_minutes'>",h=b.date.getMinutes(),e=0;60>e;e+=b.minuteStep)c="",this.aq[-2].lz.call(this,e)?c=" webix_cal_day_disabled":h==e&&(c=" webix_selected"),l+="<div class='webix_cal_block webix_cal_block_min"+c+"' data-value='"+e+"' style='"+this.lq(j,d)+(e%2===0?"clear:both;":"")+"'>"+webix.Date.toFixed(e)+"</div>";l+="</div>",l+="</div>",l+="<div  class='webix_time_footer'>"+this.mq()+"</div>",this.w.innerHTML=l}else{for(g[0].firstChild.innerHTML=k.eq(b.date),d=this.hq/3,j=this.iq/4,this.sz(b.date)&&(h=1==this.Np?b.date.getMonth():b.date.getFullYear()),e=0;12>e;e++)c=h==(1==this.Np?e:k.fq(e))?" webix_selected":"",k.lz(e,this)&&(c+=" webix_cal_day_disabled"),l+="<div class='webix_cal_block"+c+"' data-value='"+e+"' style='"+this.lq(j,d)+"'>"+k.fq(e)+"</div>";f-1&&(g[f-1].style.display="none"),g[f].innerHTML=l,"year"!=i&&"month"!=i&&(g[f+1]?g[f+1].innerHTML=this.mq():this.w.innerHTML+="<div  class='webix_time_footer'>"+this.mq()+"</div>"),g[f].style.height=this.hq+"px"}},lq:function(a,b){return"width:"+a+"px; height:"+b+"px; line-height:"+b+"px;"},mq:function(){return"<input type='button' style='width:100%' class='webix_cal_done' value='"+webix.i18n.calendar.done+"'>"},kq:function(a,b){var c=a*(b?5:4),d=2*a;return"<div class='webix_cal_hours' style='width:"+c+"px'>"+webix.i18n.calendar.hours+"</div><div class='webix_cal_minutes' style='width:"+d+"px'>"+webix.i18n.calendar.minutes+"</div>"},yt:function(a,b){this.callEvent("onBeforeZoom",[a])&&(this.Np=a,a?this.cq(b):this.showCalendar(b),this.callEvent("onAfterZoom",[a]))},Jv:function(a){return!this.sz(a)&&this.aq[this.Np].Jv&&(a=this.aq[this.Np].Jv(a,this)),a},nq:function(a){var b=this.s.date,c=webix.Date.copy(b);this.aq[this.Np].dq(c,a);var d=this.Np-(this.NC?0:1),e=this.Np;if(c=this.Jv(c),this.sz(c)){this.yt(d,c);var f=this.s.type;("month"==f&&2!=e||"year"==f)&&this.zt(c)}},zt:function(a){this.callEvent("onBeforeDateSelect",[a])&&(this.selectDate(a,!0),this.callEvent("onDateSelect",[a]),this.callEvent("onAfterDateSelect",[a]))},on_click:{webix_cal_prev_button:function(a,b,c){this.$p(-1)},webix_cal_next_button:function(a,b,c){this.$p(1)},webix_cal_day_disabled:function(){return!1},webix_cal_outside:function(){return!!this.s.navigation&&void 0},webix_cal_day:function(a,b,c){var d=webix.html.index(c)-(this.s.weekNumber?1:0),e=webix.html.index(c.parentNode),f=webix.Date.add(this.Op().Rp,d+7*e,"day",!0);this.s.timepicker&&(f.setHours(this.s.date.getHours()),f.setMinutes(this.s.date.getMinutes())),this.zt(f)},webix_cal_time:function(a){if(this.aq[this.Np-1]){this.jq=!0;var b=this.Np-1;this.yt(b)}},webix_cal_done:function(a){var b=webix.Date.copy(this.s.date);b=this.Jv(b),this.zt(b)},webix_cal_month_name:function(a){if(this.jq=!1,2!=this.Np&&this.s.monthSelect){var b=Math.max(this.Np,0)+1;this.yt(b)}},webix_cal_block:function(a,b,c){if(this.jq){if(-1!==c.className.indexOf("webix_cal_day_disabled"))return!1;var d=-1!=c.className.indexOf("webix_cal_block_min")?this.Np-1:this.Np,e=this.s.date,f=webix.Date.copy(e);this.aq[d].dq(f,1*c.getAttribute("data-value")),this.cq(f)}else-1==c.className.indexOf("webix_cal_day_disabled")&&this.nq(1*c.getAttribute("data-value"))}},Jp:function(a,b){return a?("string"==typeof a&&(a=b?webix.Date.strToDate(b)(a):webix.i18n.parseFormatDate(a)),a):webix.Date.datePart(new Date)},sz:function(a){var b=this.s.blockDates&&this.s.blockDates.call(this,a),c=this.s.minDate,d=this.s.maxDate,e=c>a||a>d;return!b&&!e},showCalendar:function(a){a=this.Jp(a),this.s.date=a,this.render(),this.resize()},getSelectedDate:function(){return this.Mp?webix.Date.copy(this.Mp):this.Mp},getVisibleDate:function(){return webix.Date.copy(this.s.date)},setValue:function(a,b){this.selectDate(a,!0)},getValue:function(a){var b=this.getSelectedDate();return a&&(b=webix.Date.dateToStr(a)(b)),b},selectDate:function(a,b){a?(a=this.Jp(a),this.Mp=a,this.Lp=webix.Date.datePart(webix.Date.copy(a))):(this.Mp=null,this.Lp=null,this.s.date&&webix.Date.datePart(this.s.date)),b?this.showCalendar(a):this.render(),this.callEvent("onChange",[a])},locate:function(){return null}},webix.MouseEvents,webix.ui.view,webix.EventSystem),webix.protoUI({name:"property",$init:function(){this.w.className+=" webix_property",this.Ns=[]},defaults:{nameWidth:100,editable:!0},on_render:{checkbox:function(a,b){return"<input type='checkbox' class='webix_property_check' "+(a?"checked":"")+">"},color:function(a,b){return'<div class="webix_property_col_val"><div class=\'webix_property_col_ind\' style="background-color:'+(a||"#FFFFFF")+';"></div><span>'+a+"</span></div>"}},on_edit:{label:!1},ad:"webix_f_id",on_click:{webix_property_check:function(a){var b=this.locate(a);return this.getItem(b).value=!this.getItem(b).value,this.callEvent("onCheck",[b,this.getItem(b).value]),!1}},on_dblclick:{},registerType:function(a,b){if(b.template&&(this.on_render[a]=b.template),b.editor&&(this.on_edit[a]=b.editor),b.click)for(var c in b.click)this.on_click[c]=b.click[c]},elements_setter:function(a){this.oq={};for(var b=0;b<a.length;b++){var c=a[b];"multiselect"==c.type&&(c.optionslist=!0),c.id=c.id||webix.uid(),c.label=c.label||"",c.value=c.value||"",this.oq[c.id]=b,this.template=this.Et(a[b])}return a},showItem:function(a){webix.RenderStack.showItem.call(this,a)},locate:function(a){return webix.html.locate(arguments[0],this.ad)},getItemNode:function(a){return this.y.childNodes[this.oq[a]]},getItem:function(a){return this.s.elements[this.oq[a]]},ii:function(a){var b=this.getItem(a).type;if("checkbox"==b)return"inline-checkbox";var c=this.on_edit[b];return c!==!1&&(c||b)},li:function(a){return this.getItem(a)},ui:function(a,b,c){var d=this.oq[a.id],e=this.s.elements;if(c){for(var f=d+1;f<e.length;f++)if(b.call(this,e[f].id))return e[f].id}else for(var f=d-1;f>=0;f--)if(b.call(this,e[f].id))return e[f].id;return null},updateItem:function(){this.refresh()},ug:function(a){var b=this.getItemNode(a);return{left:b.offsetLeft+this.s.nameWidth,top:b.offsetTop,height:b.firstChild.offsetHeight,width:this.pq,parent:this.w}},setValues:function(a,b){this.s.complexData&&(a=webix.CodeParser.collapseNames(a)),b||this.qq();for(var c in a){var d=this.getItem(c);d&&(d.value=a[c])}this.rq=a,this.refresh()},qq:function(){for(var a=this.s.elements,b=0;b<a.length;b++)a[b].value=""},getValues:function(){for(var a=webix.clone(this.rq||{}),b=0;b<this.s.elements.length;b++){var c=this.s.elements[b];"label"!=c.type&&(a[c.id]=c.value)}return this.s.complexData&&(a=webix.CodeParser.expandNames(a)),a},refresh:function(){this.render()},$setSize:function(a,b){webix.ui.view.prototype.$setSize.call(this,a,b)&&(this.pq=this.bc-this.s.nameWidth,this.render())},$getSize:function(a,b){if(this.s.autoheight){var c=this.s.elements.length;this.s.height=Math.max(this.type.height*c,this.s.minHeight||0)}return webix.ui.view.prototype.$getSize.call(this,a,b)},jb:function(){var a=[],b=this.s.elements;if(b)for(var c=0;c<b.length;c++){var d=b[c];d.css&&"object"==typeof d.css&&(d.css=webix.html.createCss(d.css));var e='<div webix_f_id="'+d.id+'" class="webix_property_line '+(d.css||"")+'">';if("label"==d.type)a[c]=e+"<div class='webix_property_label_line'>"+d.label+"</div></div>";else{var f,g=this.on_render[d.type],h="<div class='webix_property_label' style='width:"+this.s.nameWidth+"px'>"+d.label+"</div><div class='webix_property_value' style='width:"+this.pq+"px'>";f=d.collection||d.options?d.template(d,d.value):d.format?d.format(d.value):d.value,g&&(f=g.call(this,d.value,d)),a[c]=e+h+f+"</div></div>"}}return a.join("")},type:{height:24,templateStart:webix.template(""),templateEnd:webix.template("</div>")},$skin:function(){this.type.height=webix.skin.$active.propertyItemHeight||24}},webix.AutoTooltip,webix.EditAbility,webix.MapCollection,webix.MouseEvents,webix.Scrollable,webix.SingleRender,webix.AtomDataLoader,webix.EventSystem,webix.ui.view),webix.protoUI({name:"colorboard",defaults:{template:'<div style="width:100%;height:100%;background-color:{obj.val}"></div>',palette:null,height:220,width:220,cols:12,rows:10,minLightness:.15,maxLightness:1},$init:function(a){webix.event(this.x,"click",webix.bind(function(a){var b=webix.html.locate(a,"webix_val");this.setValue(b),this.callEvent("onSelect",[this.s.value,a])},this))},sq:function(a){var b=this.s.palette;a=a.toUpperCase();for(var c=0,d=b.length;d>c;c++)for(var e=0,f=b[c].length;f>e;e++)if(b[c][e].toUpperCase()==a)return{row:c,col:e};return null},$setSize:function(a,b){webix.ui.view.prototype.$setSize.call(this,a,b)&&this.render()},getValue:function(){return this.s.value},re:function(){return this.x.firstChild},setValue:function(a){return a?("#"!=a.charAt(0)&&(a="#"+a),this.s.value=a,this.$setValue(a),a):void 0},uq:null,vq:function(){if(this.uq&&this.uq.parentNode)return this.uq;var a=this.uq=document.createElement("div");return a.className="webix_color_selector",this.x.lastChild.appendChild(a),a},$setValue:function(a){if(this.isVisible(this.s.id)){var b,c,d,e,f,g=0,h=0;if(d=this.sq(a),d&&(b=this.x.lastChild.childNodes[d.row].childNodes[d.col]),!(b&&b.parentNode&&b.parentNode.parentNode))return void(this.uq&&(this.uq.style.left="-100px"));e=b.parentNode,g=b.offsetLeft-e.offsetLeft,h=-(this.$height-(b.offsetTop-e.parentNode.offsetTop)),c=this.vq(),f=["left:"+g+"px","top:"+h+"px","width:"+b.style.width,"height:"+b.style.height].join(";"),"undefined"!=typeof c.style.cssText?c.style.cssText=f:c.setAttribute("style",f)}},wq:function(a){function b(a){return webix.color.toHex(a,2)}function c(a,c,d){return"#"+b(Math.floor(a))+b(Math.floor(c))+b(Math.floor(d))}function d(a,b,c){var d,f,g;if(b){var h=.5>c?c*(1+b):c+b-c*b,i=2*c-h;d=e(i,h,a+1/3),f=e(i,h,a),g=e(i,h,a-1/3)}else d=f=g=c;return{r:255*d,g:255*f,b:255*g}}function e(a,b,c){return 0>c&&(c+=1),c>1&&(c-=1),1/6>c?a+6*(b-a)*c:.5>=c?b:2/3>c?a+(b-a)*(2/3-c)*6:a}function f(a){for(var b=[],d=255,e=d/a,f=0;a>f;f++)d=Math.round(d>0?d:0),b.push(c(d,d,d)),d-=e;return b[b.length-1]="#000000",b}var g=[],h=a.rows-1,i=1/a.cols,j=(a.maxLightness-a.minLightness)/h,k=null;g.push(f(a.cols));for(var l=0,m=a.minLightness;h>l;l++){k=[];for(var n=0,o=0;n<a.cols;n++){var p=d(o,1,m);k.push(c(p.r,p.g,p.b)),o+=i}g.push(k),m+=j}this.s.palette=g},render:function(){function a(a,b,c){for(var f='<div class="webix_color_row">',g=0;g<a.length;g++)e.width=b[g],e.height=c,e.val=a[g],f+=d(e);return f+="</div>"}if(this.isVisible(this.s.id)){this.s.palette||this.wq(this.s);var b=this.s.palette;this.callEvent("onBeforeRender",[]);for(var c=this.s,d=webix.template('<div style="width:{obj.width}px;height:{obj.height}px;" webix_val="{obj.val}">'+(c.template||"")+"</div>"),e={width:0,height:0,val:0},f=this.$width,g=this.$height,h=[],i='<div class="webix_color_palette">',j="object"==typeof b[0]?b[0]:b,k=0;k<j.length;k++)h[k]=Math.floor(f/(j.length-k)),f-=h[k];if("object"==typeof b[0])for(var l=0;l<b.length;l++){var m=Math.floor(g/(b.length-l));g-=m;var n=b[l];i+=a(n,h,m)}else i+=a(b,h,g);i+="</div>",this.x.innerHTML=i,this.uq=null,this.s.value&&this.$setValue(this.s.value),this.callEvent("onAfterRender",[])}},refresh:function(){this.render()}},webix.ui.view,webix.EventSystem),webix.protoUI({name:"resizer",defaults:{width:7,height:7},$init:function(a){this.x.className+=" webix_resizer";var b=this.getParentView().Cc;webix.event(this.x,webix.env.mouse.down,this.xq,{bind:this}),webix.event(document.body,webix.env.mouse.up,this.yq,{bind:this});var c=this.zq();this.Aq=!1,this.Bq=c,this.Cq="x"==c?"width":"height","x"==c?a.height=0:a.width=0,b>0?(this.x.className+=" webix_resizer_v"+c,this.x.style.marginRight="-"+b+"px","x"==c?a.width=b:a.height=b,this.$nospace=!0):this.x.className+=" webix_resizer_"+c,this.x.innerHTML="<div class='webix_resizer_content'></div>","y"==c&&b>0&&(this.x.style.marginBottom="-"+(a.height||this.defaults.height)+"px")},xq:function(a){var b=this.Dq();b&&!this.s.disabled&&(a=a||event,this.Aq=!0,this.Pl=webix.html.pos(a),this.Eq=[],this.Fq(a,b[0]))},yq:function(){this.Aq=!1,this.Pl=!1},Fq:function(a,b){var c,d,e,f,g;a=a||event,c=this.Bq,this.getParentView().x.style.position="relative",e=webix.html.offset(this.x),f=webix.html.offset(this.getParentView().x),g=e[c]-f[c],d=webix.html.offset(b.$view)[c]-webix.html.offset(this.getParentView().$view)[c],this.Rl=[c,b,g,d],this.Gq=new webix.ui.resizearea({container:this.getParentView().x,dir:c,eventPos:this.Pl[c],start:g-1,height:this.$height,width:this.$width,border:1,margin:this.getParentView()["_padding"+c.toUpperCase()]}),this.Gq.attachEvent("onResizeEnd",webix.bind(this.Hq,this)),this.Gq.attachEvent("onResize",webix.bind(this.Iq,this)),webix.html.addCss(document.body,"webix_noselect",1)},zq:function(){return this.getParentView().mc?"y":"x"},Iq:function(){var a,b,c,d,e,f,g,h,i,j;if(this.Rl)for(a=this.Dq(),e=this.Rl[0],d=this.Gq.Jl-this.Rl[2],i=this.Jq(a,e,d),j=a[0]["$"+this.Cq]+a[1]["$"+this.Cq],g="y"==e?["minHeight","maxHeight"]:["minWidth","maxWidth"],f=0;2>f;f++){b=a[f].s,c=f?-d:d;var k=b[g[0]],l=b[g[1]];if(c>0&&l&&l<=i[f]||0>c&&(k||3)>=i[f])return this.Eq[f]=c>0?l:k||3,h=this.Kq(a,e),void(this.Gq.Dl.style["y"==e?"top":"left"]=this.Rl[3]+h[0]+"px");i[f]<3?this.Gq.Dl.style["y"==e?"top":"left"]=this.Rl[3]+f*j+1+"px":this.Eq[f]=null}},Dq:function(){var a,b;for(a=this.getParentView().q,b=0;b<a.length;b++)if(a[b]==this)return!a[b-1]||a[b-1].s.$noresize?null:!a[b+1]||a[b+1].s.$noresize?null:[a[b-1],a[b+1]]},Hq:function(a){if("undefined"!=typeof a){var b,c,d,e,f,g=this.getParentView().mc;if(this.Lq=null,this.Rl){if(c=this.Rl[0],d=a-this.Rl[2],b=this.Dq(),b[0]&&b[1]){f=this.Mq(b,c,d);for(var e=0;2>e;e++){var h=b[e].$getSize(0,0);if(g?h[2]==h[3]:Math.abs(h[1]-h[0])<3)b[e].s[this.Cq]=f[e],b[e].tc&&b[e].tc(this.Cq,f[e],g);else{var i=b[e].$view[g?"offsetHeight":"offsetWidth"];b[e].s.gravity=f[e]/i*b[e].s.gravity}}b[0].resize();for(var e=0;2>e;e++)b[e].callEvent&&b[e].callEvent("onViewResize",[]);webix.callEvent("onLayoutResize",[b])}this.Rl=!1}this.Rl=!1,this.Aq=!1,this.Eq=null,webix.html.removeCss(document.body,"webix_noselect")}},Kq:function(a){var b,c,d;return d=a[0]["$"+this.Cq]+a[1]["$"+this.Cq],this.Eq[0]?(b=this.Eq[0],c=d-b):this.Eq[1]&&(c=this.Eq[1],b=d-c),[b,c]},Jq:function(a,b,c){for(var d=[],e="height"==this.Cq?"offsetHeight":"offsetWidth",f=0;2>f;f++)d[f]=a[f].$view[e]+(f?-1:1)*c;return d},Mq:function(a,b,c){var d,e,f;if(this.Eq[0]||this.Eq[1])e=this.Kq(a,b);else for(e=this.Jq(a,b,c),d=0;2>d;d++)e[d]<0&&(f=e[0]+e[1],e[d]=1,e[1-d]=f-1);return e}},webix.MouseEvents,webix.ui.view),webix.protoUI({name:"multiview",defaults:{animate:{}},setValue:function(a){webix.$$(a).show()},getValue:function(){return this.getActiveId()},$init:function(){this.Mh=0,this.mc=1,this.x.style.position="relative",this.x.className+=" webix_multiview",this.Nq=[]},Oq:function(a,b){var c=webix.$$(a);c.Pq||(c.Qq=[],c.Pq={}),c.Pq[b]||(c.Pq[b]=!0,c.Qq.push(b))},Rq:function(a){var b=webix.$$(a);if(this.s.keepViews&&(b.x.style.display=""),this.Nq[this.Nq.length-2]!=a?(10==this.Nq.length&&this.Nq.splice(0,1),this.Nq.push(a)):this.Nq.splice(this.Nq.length-1,1),b.Pq){for(var c=0;c<b.Qq.length;c++)webix.$$(b.Qq[c]).render();b.Qq=[],b.Pq={}}},addView:function(){var a=webix.ui.baselayout.prototype.addView.apply(this,arguments);return this.s.keepViews?webix.$$(a).x.style.display="none":webix.html.remove(webix.$$(a).x),a},Vx:function(a,b){if(a==this.Mh){var c=Math.max(a-1,1);this.q[c]&&this.fc(this.q[c],!1)}a<this.Mh&&this.Mh--},Fb:function(){},kc:function(a){a=a||this.nc;for(var b=0;b<a.length;b++)a[b].Ob=this.s.borderless?{top:1,left:1,right:1,bottom:1}:this.s.Ob||{};webix.ui.baselayout.prototype.kc.call(this,a);for(var b=1;b<this.q.length;b++)this.s.keepViews?this.q[b].x.style.display="none":webix.html.remove(this.q[b].x);for(var b=0;b<a.length;b++){var c=this.q[b];if(!c.q||c.Gc){var d=c.s.Ob;d.top&&(c.x.style.borderTopWidth="0px"),d.left&&(c.x.style.borderLeftWidth="0px"),d.right&&(c.x.style.borderRightWidth="0px"),d.bottom&&(c.x.style.borderBottomWidth="0px")}}this.Rq(this.getActiveId())},cells_setter:function(a){this.nc=a},Sq:function(a,b){var c=(this.s.animate||{}).direction,d="top"==c||"bottom"==c;return b>a?d?"bottom":"right":d?"top":"left"},fc:function(a,b){var c=this.getParentView();if(c&&c.getTabbar&&c.getTabbar().setValue(a.s.$id||a.s.id),this.Wh)return webix.delay(this.fc,this,[a,b],100);for(var d=-1,e=0;e<this.q.length;e++)if(this.q[e]==a){d=e;break}if(!(0>d||d==this.Mh)){var f=this.q[this.Mh],g=this.q[d];if(f.$getSize(0,0),(b||"undefined"==typeof b)&&webix.animate.isSupported()&&this.s.animate){var h=webix.extend({},this.s.animate);this.s.keepViews&&(h.keepViews=!0),h.direction=this.Sq(d,this.Mh),h=webix.Settings.E(b||{},h);var i=webix.animate.formLine(g.x,f.x,h);
g.$getSize(0,0),g.$setSize(this.bc,this.dc);var j=h.callback;h.callback=function(){webix.animate.breakLine(i,this.s.keepViews),this.Wh=!1,j&&j.call(this),j=h.master=h.callback=null,this.resize()},h.master=this,this.Mh=d,this.Rq(this.getActiveId()),webix.animate(i,h),this.Wh=!0}else this.s.keepViews?f.x.style.display="none":(webix.html.remove(f.x),this.x.appendChild(this.q[e].x)),this.Mh=d,f.resize(),this.Rq(this.getActiveId());g.callEvent&&(g.callEvent("onViewShow",[]),webix.ui.each(g,this.Lw)),this.callEvent("onViewChange",[f.s.id,g.s.id])}},$getSize:function(a,b){var c=this.q[this.Mh].$getSize(0,0);if(this.s.fitBiggest)for(var d=0;d<this.q.length;d++)if(d!=this.Mh)for(var e=this.q[d].$getSize(0,0),f=0;4>f;f++)c[f]=Math.max(c[f],e[f]);var g=webix.ui.baseview.prototype.$getSize.call(this,0,0);return g[1]>=1e5&&(g[1]=0),g[3]>=1e5&&(g[3]=0),g[0]=(g[0]||c[0])+a,g[1]=(g[1]||c[1])+a,g[2]=(g[2]||c[2])+b,g[3]=(g[3]||c[3])+b,g},$setSize:function(a,b){this.lc=[a,b],webix.ui.baseview.prototype.$setSize.call(this,a,b),this.q[this.Mh].$setSize(a,b)},isVisible:function(a,b){return b&&b!=this.getActiveId()?(a&&this.Oq(b,a),!1):webix.ui.view.prototype.isVisible.call(this,a,this.s.id)},getActiveId:function(){return this.q.length?this.q[this.Mh].s.id:null},back:function(a){if(a=a||1,this.callEvent("onBeforeBack",[this.getActiveId(),a])){if(this.Nq.length>a){var b=this.Nq[this.Nq.length-a-1];return webix.$$(b).show(),b}return null}return null}},webix.ui.baselayout),webix.protoUI({name:"form",defaults:{type:"form",autoheight:!0},Tq:-1,_f:"webix_form",ag:!0,$getSize:function(a,b){this.cc&&!this.s.width&&(a+=webix.ui.scrollSize);var c=webix.ui.layout.prototype.$getSize.call(this,a,b);return(this.s.scroll||!this.s.autoheight)&&(c[2]=this.s.height||this.s.minHeight||0,c[3]+=1e5),c}},webix.ui.toolbar),webix.protoUI({name:"menu",Oh:"webix_menu",$init:function(a){a.autowidth&&(this.KA=!0,delete a.autowidth),this.data.attachEvent("onStoreUpdated",webix.bind(function(){this.Uq()},this)),this.attachEvent("onMouseMove",this.Vq),this.attachEvent("onMouseOut",function(){this.Wq()&&"click"==this.s.openAction||this.Xq||this.Uq()}),this.attachEvent("onItemClick",function(a,b,c){var d=this.getItem(a);if(d){if(d.$template)return;var e=this.getTopMenu();if(!this.data.getMark(a,"webix_disabled")){if(!e.callEvent("onMenuItemClick",[a,b,c]))return void(b.showpopup=!0);this!=e&&e.Le(a,b,c),d.submenu?(this!==e&&!webix.env.touch||"click"!=e.s.openAction||this.Yq(a,c),b.showpopup=!0):(e.Uq(!0),e.$q&&e.hide())}}}),this.data.attachEvent("onClearAll",function(){this._q=[]}),this.data._q=[]},sizeToContent:function(){if("y"==this.s.layout){var a=[];this.data.each(function(b){a.push(this.jb(b))},this),this.config.width=webix.html.getTextSize(a,this.$view.className).width+20,this.resize()}},getTopMenu:function(){for(var a=this;a.ar;)a=webix.$$(a.ar);return a},Rh:function(a){this.s.autoheight&&(a=this.count());for(var b=0,c=0;a>c;c++){var d=this.data.pull[this.data.order[c]];b+=d&&"Separator"==d.$template?4:this.type.height}return b},on_mouse_move:{},type:{css:"menu",width:"auto",templateStart:function(a,b,c){if("Separator"===a.$template||"Spacer"===a.$template)return'<div webix_l_id="#id#" class="webix_context_'+a.$template.toLowerCase()+'">';var d=(a.href?" href='"+a.href+"' ":"")+(a.target?" target='"+a.target+"' ":"");return webix.ui.list.prototype.type.templateStart(a,b,c).replace(/^<div/,"<a "+d)+(a.submenu&&b.subsign?"<div class='webix_submenu_icon'></div>":"")},templateEnd:function(a,b,c){return"Separator"===a.$template||"Spacer"===a.$template?"</div>":"</a>"},templateSeparator:webix.template("<div class='sep_line'></div>"),templateSpacer:webix.template("<div></div>")},getMenu:function(a){if(this.data.pull[a])return this;for(var b in this.data.pull){var c=this.getItem(b);if(c.submenu){var d=this.br(c).getMenu(a);if(d)return d}}},getSubMenu:function(a){var b=this.getMenu(a),c=b.getItem(a);return c.submenu?b.br(c):null},getMenuItem:function(a){return this.getMenu(a).getItem(a)},br:function(a){var b=webix.$$(a.submenu);return b||(a.submenu=this.cr(a),b=webix.$$(a.submenu)),b},Vq:function(a,b,c){this.Wq()&&this.Yq(a,c)},Wq:function(){var a=this.getTopMenu();if("click"==a.s.openAction){if(webix.env.touch)return!1;var b=a.dr;return!(!b||!webix.$$(b).isVisible())}return!0},Yq:function(a,b){var c=this.getItem(a);if(c&&(this.Xq=null,this.dr&&c.submenu!=this.dr&&this.Uq(!0),c.submenu&&!this.config.hidden)){var d=this.br(c);if(this.data.getMark(a,"webix_disabled"))return;this.getTopMenu().KA&&d.sizeToContent&&!d.isVisible()&&d.sizeToContent(),d.show(b,{pos:this.s.subMenuPos}),d.ar=this.s.id,this.dr=c.submenu}},disableItem:function(a){this.getMenu(a).addCss(a,"webix_disabled")},enableItem:function(a){this.getMenu(a).removeCss(a,"webix_disabled")},er:function(a,b){var c=this.data;c._q[a]!=b&&(c._q[a]=b,c.filter(function(a){return!c._q[a.id]}),this.resize())},hideItem:function(a){var b=this.getMenu(a);b&&b.er(a,!0)},showItem:function(a){var b=this.getMenu(a);return b?(b.er(a,!1),webix.ui.list.prototype.showItem.call(b,a)):void 0},Uq:function(a){if(this.dr){var b=webix.$$(this.dr);b.Uq&&b.Uq(a),(a||!b.gr)&&(b.hide(),this.dr=null)}},cr:function(a){var b={view:"submenu",data:a.submenu},c=this.getTopMenu().s.submenuConfig;c&&webix.extend(b,c,!0);var d=this.getMenuItem(a.id);d&&d.config&&webix.extend(b,d.config,!0);var e=webix.ui(b);return e.ar=this,e.s.id},$skin:function(){webix.ui.list.prototype.$skin.call(this),this.type.height=webix.skin.$active.menuHeight},defaults:{scroll:"",layout:"x",mouseEventDelay:100,subMenuPos:"bottom"}},webix.ui.list),webix.protoUI({name:"submenu",$init:function(){this.gd=webix.clone(this.hr),this.gd.A=this,this.attachEvent("onMouseOut",function(){"click"!=this.getTopMenu().s.openAction&&(this.Xq||this.gr||this.hide())}),this.attachEvent("onMouseMoving",function(){this.ar&&(webix.$$(this.ar).Xq=!0)})},$skin:function(){webix.ui.menu.prototype.$skin.call(this),webix.ui.popup.prototype.$skin.call(this),this.type.height=webix.skin.$active.menuHeight},hr:{$getSize:function(a,b){var c=1*this.A.s.height,d=1*this.A.s.width,e=webix.ui.menu.prototype.$getSize.call(this.A,a,b);return this.A.s.height=c,this.A.s.width=d,e},$setSize:function(a,b){this.A.s.scroll&&(this.A.ed.style.height=b+"px")},destructor:function(){this.A=null}},body_setter:function(){},getChildViews:function(){return[]},defaults:{width:150,subMenuPos:"right",layout:"y",autoheight:!0},type:{height:webix.skin.menuHeight,subsign:!0}},webix.ui.menu,webix.ui.popup),webix.ContextHelper={defaults:{padding:"4",hidden:!0},body_setter:function(a){return a=webix.ui.window.prototype.body_setter.call(this,a),this.gd.x.style.borderWidth="0px",a},attachTo:function(a){var b;b=a.on_context?a.attachEvent("onAfterContextMenu",webix.bind(this.ir,this)):webix.event(a,"contextmenu",this.jr,{bind:this}),this.attachEvent("onDestruct",function(){a.detachEvent?a.detachEvent(b):webix.eventRemove(b),a=null})},getContext:function(){return this.nh},setContext:function(a){this.nh=a},jr:function(a){return this.nh=webix.toNode(a||event),this.kr(a)},ir:function(a,b,c){return this.nh={obj:webix.$$(b),id:a},this.kr(b)},kr:function(a){var b=this.show(a,null,!0);return b===!1?b:(webix.callEvent("onClick",[]),webix.html.preventEvent(a))},gr:!0,master_setter:function(a){return this.attachTo(a),null}},webix.protoUI({name:"context"},webix.ContextHelper,webix.ui.popup),webix.protoUI({name:"contextmenu",$q:!0,$init:function(a){a.submenuConfig&&webix.extend(a,a.submenuConfig)}},webix.ContextHelper,webix.ui.submenu),webix.protoUI({name:"tabbar",$skin:function(){var a=webix.skin.$active,b=this.defaults;b.topOffset=a.tabTopOffset||0,b.tabOffset="undefined"!=typeof a.tabOffset?a.tabOffset:10,b.bottomOffset=a.tabBottomOffset||0,b.height=a.tabbarHeight,b.tabMargin=a.tabMargin,b.inputPadding=a.inputPadding,b.tabMinWidth=a.tabMinWidth||100,b.tabMoreWidth=a.tabMoreWidth||40},ut:function(){var a,b,c=this.s,d=this.OC||c.options,e=this.we-2*c.tabOffset,f=c.optionWidth||c.tabMinWidth;if(b=d.length,c.tabMinWidth&&f>e/b)return{max:parseInt(e/f,10)||1};if(!c.optionWidth)for(a=0;b>a;a++)d[a].width&&(e-=d[a].width+(a||c.type?0:c.tabMargin),b--);return{width:b?e/b:c.tabMinWidth}},Je:function(){var a=this.s;if(!a.tabbarPopup){var b={view:"popup",width:a.popupWidth||200,body:{view:"list",borderless:!0,select:!0,css:"webix_tab_list",autoheight:!0,yCount:a.yCount,type:{template:a.popupTemplate}}},c=webix.ui(b);c.getBody().attachEvent("onBeforeSelect",webix.bind(function(a){return a&&this.callEvent("onBeforeTabClick",[a])?(this.setValue(a),webix.$$(this.s.tabbarPopup).hide(),this.callEvent("onAfterTabClick",[a]),!0):void 0},this)),a.tabbarPopup=c.s.id,this.Ns.push(c)}this.Je=function(){}},getPopup:function(){return this.Je(),webix.$$(this.s.tabbarPopup)},moreTemplate_setter:webix.template,popupTemplate_setter:webix.template,defaults:{popupWidth:200,popupTemplate:"#value#",yCount:7,moreTemplate:'<span class="webix_icon fa-ellipsis-h"></span>',template:function(a,b){var c,d,e,f,g,h,i,j,k,l;if(b.OC=j=b.yC(a.options),j.length){b.Be(j),!a.value&&j.length&&(a.value=j[0].id),d="",a.tabOffset&&(d+="<div class='webix_tab_filler' style='width:"+a.tabOffset+"px;'>&nbsp;</div>"),c=b.we-2*a.tabOffset-(a.type?0:a.tabMargin*(j.length-1)),k=a.topOffset+a.bottomOffset;var m=b.ut();if(m.max&&m.max<j.length){var n=b.getPopup();n.hide();var o=n.getBody()||null;if(o)if(m.max){var p=!1;for(e=0;e<j.length&&!p;e++)if(j[e].id==a.value&&(p=!0,e+1>m.max)){var q=j.splice(e,1),r=j.splice(0,m.max-1).concat(q);j=r.concat(j)}o.clearAll(),o.parse(j.slice(m.max))}else o.clearAll()}else b.s.tabbarPopup&&webix.$$(b.s.tabbarPopup).hide();i=a.tabOffset;var s=!1;for(e=0;e<j.length&&!s;e++)m&&m.max?(m.max==e+1&&(s=!0),c=b.we-2*a.tabOffset-(!a.type&&m.max>1?a.tabMargin*(m.max-1):0),l=(c-a.tabMoreWidth)/m.max):l=m.width,l=j[e].width||a.optionWidth||l,i+=l+(e&&!a.type?a.tabMargin:0),a.tabMargin>0&&e&&!a.type&&(d+="<div class='webix_tab_filler' style='width:"+a.tabMargin+"px;'></div>"),d+=b.vt(j[e],l),s&&(d+='<div class="webix_tab_more_icon" style="width:'+a.tabMoreWidth+'px;">'+a.moreTemplate(a,b)+"</div>",i+=a.tabMoreWidth);f=b.bc-i,f>0&&!a.type&&(d+="<div class='webix_tab_filler' style='width:"+f+"px;'>&nbsp;</div>")}else d="<div class='webix_tab_filler' style='width:"+b.we+"px; border-right:0px;'></div>";return g="",h=k&&!a.type?"height:"+(b.dc-k)+"px":"",a.topOffset&&!a.type&&(g+="<div class='webix_before_all_tabs' style='width:100%;height:"+a.topOffset+"px'></div>"),g+="<div style='"+h+"' class='webix_all_tabs "+(a.type?"webixtype_"+a.type:"")+"'>"+d+"</div>",a.bottomOffset&&!a.type&&(g+="<div class='webix_after_all_tabs' style='width:100%;height:"+a.bottomOffset+"px'></div>"),g}},vt:function(a,b){var c,d="",e=this.config;if(a.id==e.value&&(d=" webix_selected"),a.css&&(d+=" "+a.css),b=a.width||b,c='<div class="webix_item_tab'+d+'" button_id="'+a.id+'" style="width:'+b+'px;">',this.lr){var f=this.dc-2*e.inputPadding-2,g=this.dc-2,h=webix.extend({cheight:f,aheight:g},a);c+=this.lr(h)}else{var i=a.icon?"<span class='webix_icon fa-"+a.icon+"'></span> ":"";c+=i+a.value}return(a.close||e.close)&&(c+="<span class='webix_tab_close webix_icon fa-times'></span>"),c+="</div>"},ne:{image:"<div class='webix_img_btn_top' style='height:#cheight#px;background-image:url(#image#);'><div class='webix_img_btn_text'>#value#</div></div>",icon:"<div class='webix_img_btn' style='line-height:#cheight#px;height:#cheight#px;'><span class='webix_icon_btn fa-#icon#' style='max-width:#cheight#px;max-height:#cheight#px;'></span>#value#</div>",iconTop:"<div class='webix_img_btn_top' style='height:#cheight#px;width:100%;top:0px;text-align:center;'><span class='webix_icon fa-#icon#'></span><div class='webix_img_btn_text'>#value#</div></div>"},type_setter:function(a){return this.s.tabOffset=0,this.ne[a]&&(this.lr=webix.template(this.ne[a])),a}},webix.ui.segmented),webix.protoUI({name:"tabview",defaults:{type:"clean"},setValue:function(a){this.q[0].setValue(a)},getValue:function(){return this.q[0].getValue()},getTabbar:function(){return this.q[0]},getMultiview:function(){return this.q[1]},addView:function(a){var b=a.body.id=a.body.id||webix.uid();this.getMultiview().addView(a.body),a.id=a.body.id,a.value=a.header,delete a.body,delete a.header;var c=this.getTabbar();return c.addOption(a),c.refresh(),b},removeView:function(a){var b=this.getTabbar();b.removeOption(a),b.refresh()},$init:function(a){this.$ready.push(this.Nv);for(var b=a.cells,c=[],d=b.length-1;d>=0;d--){var e=b[d].body||b[d];e.id||(e.id="view"+webix.uid()),c[d]={value:b[d].header,id:e.id,close:b[d].close,width:b[d].width,hidden:!!b[d].hidden},b[d]=e}var f={view:"tabbar",multiview:!0},g={view:"multiview",cells:b,animate:!!a.animate};a.value&&(f.value=a.value),a.tabbar&&webix.extend(f,a.tabbar,!0),a.multiview&&webix.extend(g,a.multiview,!0),f.options=f.options||c,a.rows=[f,g],delete a.cells,delete a.tabs},Nv:function(){this.getTabbar().attachEvent("onOptionRemove",function(a){var b=webix.$$(a);b&&b.destructor()})}},webix.ui.layout),function(){function a(a){return a.tagName?a.tagName.toLowerCase():null}function b(a,b){if(!a.getAttribute)return null;var c=a.getAttribute(b);return c?c.toLowerCase():null}function c(){var b=a(this);return e[b]?e[b](this):e.other(this)}function d(b){var c=a(this);return f[c]?f[c](this,b):f.other(this,b)}var e={radio:function(a){for(var b=0;b<a.length;b++)if(a[b].checked)return a[b].value;return""},input:function(a){var c=b(a,"type");return"checkbox"===c?a.checked:a.value},textarea:function(a){return a.value},select:function(a){var b=a.selectedIndex;return a.options[b].value},other:function(a){return a.innerHTML}},f={radio:function(a,b){for(var c=0;c<a.length;c++)a[c].checked=a[c].value==b},input:function(a,c){var d=b(a,"type");"checkbox"===d?a.checked=!!c:a.value=c},textarea:function(a,b){a.value=b},select:function(a,b){a.value=b?b:a.firstElementChild.value||b},other:function(a,b){a.innerHTML=b}};webix.protoUI({name:"htmlform",$init:function(a){this.elements={},this.mr=!1,a.content&&(a.container==a.content||!a.container&&a.content==document.body)&&(this.nr=!0)},content_setter:function(a){if(a=webix.toNode(a),this.nr)for(;a.childNodes.length>1;)this.x.childNodes[0].appendChild(a.childNodes[0]);else this.x.childNodes[0].appendChild(a);return this.pc(),!0},render:function(){webix.ui.template.prototype.render.apply(this,arguments),this.pc()},pc:function(){var e=this.x.querySelectorAll("[name]");this.elements={};for(var f=0;f<e.length;f++){var g=e[f],h=b(g,"name");if(h){var i="button"===a(g),j=b(g,"type"),k=i||"button"===j||"submit"===j;if("radio"===j){var l=this.elements[h]||[];l.tagName="radio",l.push(g),g=l}this.elements[h]=g,g.getValue=c,g.setValue=d,g.Ce=!k,g.s={defaultValue:g.getValue()}}}return this.elements},Te:function(a,b){this.Qe(a,b);var c=this.x.querySelector('[name="'+a+'"]');c&&webix.html.addCss(c,"invalid")},Qe:function(a,b){var c=this.x.querySelector('[name="'+a+'"]');c&&webix.html.removeCss(c,"invalid")}},webix.ui.template,webix.Values)}(),webix.dp=function(a,b){if("object"==typeof a&&a.s&&(a=a.s.id),webix.dp.ur[a]||b)return webix.dp.ur[a];("string"==typeof a||"number"==typeof a)&&(a={master:webix.$$(a)});var c=new webix.DataProcessor(a),d=c.s.master.s.id;return webix.dp.ur[d]=c,webix.$$(d).attachEvent("onDestruct",function(){webix.dp.ur[this.s.id]=null,delete webix.dp.ur[this.s.id]}),c},webix.dp.ur={},webix.dp.$$=function(a){return webix.dp.ur[a]},webix.DataProcessor=webix.proto({defaults:{autoupdate:!0,updateFromResponse:!1,mode:"post",operationName:"webix_operation",trackMove:!1},$init:function(){this.reset(),this.vr=!1,this.name="DataProcessor",this.$ready.push(this.Mi)},reset:function(){this.zr=[]},url_setter:function(a){var b="";if("string"==typeof a){var c=a.split("->");c.length>1&&(a=c[1],b=c[0])}else a&&a.mode&&(b=a.mode,a=a.url);return b?webix.proxy(b,a):a},master_setter:function(a){var b=a;return"DataStore"!=a.name&&(b=a.data),this.s.store=b,a},Mi:function(){this.s.store.attachEvent("onStoreUpdated",webix.bind(this.Ar,this)),this.s.store.attachEvent("onDataMove",webix.bind(this.Br,this))},ignore:function(a,b){var c=this.vr;this.vr=!0,a.call(b||this),this.vr=c},off:function(){this.vr=!0},on:function(){this.vr=!1},Cr:function(a){var b={};for(var c in a)0!==c.indexOf("$")&&(b[c]=a[c]);return b},save:function(a,b,c){b=b||"update",this.Dr(a,c||this.s.store.getItem(a),b)},Dr:function(a,b,c){if("object"==typeof a&&(a=a.toString()),!a||this.vr===!0||!c||"paint"==c)return!0;var d=this.s.store;d&&d.vf&&(b=d.vf(b));var e={id:a,data:this.Cr(b),operation:c};if(webix.isUndefined(b.$parent)||(e.data.parent=b.$parent),"delete"!=e.operation){var f=this.s.master;f&&f.data&&f.data.getMark&&f.data.getMark(a,"webix_invalid")&&(e.Er=!0),this.validate(null,e.data)||(e.Er=!0)}return this.Fr(e)&&this.zr.push(e),this.s.autoupdate&&this.send(),!0},Br:function(a,b,c,d){if(this.s.trackMove){var e=webix.copy(this.s.store.getItem(a));this.s.store.order,e.webix_move_index=b,e.webix_move_id=d,e.webix_move_parent=c,this.Dr(a,e,"order")}},Ar:function(a,b,c){switch(c){case"save":c="update";break;case"update":c="update";break;case"add":c="insert";break;case"delete":c="delete";break;default:return!0}return this.Dr(a,b,c)},Fr:function(a){for(var b=0;b<this.zr.length;b++){var c=this.zr[b];if(c.id==a.id)return"delete"==a.operation&&("insert"==c.operation?this.zr.splice(b,1):c.operation="delete"),c.data=a.data,c.Er=a.Er,!1}return!0},send:function(){this.Gr()},Gr:function(){if(this.s.url){for(var a=this.zr,b=[],c=this.s.url,d=0;d<a.length;d++){var e=a[d];if(!e.Hr&&!e.Er){var f=e.id,g=e.operation,h="object"!=typeof c||c.$proxy?c:c[g],i=h&&(h.$proxy||"function"==typeof h);if(h&&(this.s.store.uf&&this.s.store.uf(e.data),this.callEvent("onBefore"+g,[f,e]))){if(e.Hr=!0,!this.callEvent("onBeforeDataSend",[e]))return;e.data=this.Ir(e.data);var j=this.at({id:e.id,status:e.operation});h.$proxy?h.save?h.save(this.config.master,e,this,j):b.push(e):("insert"==g&&delete e.data.id,i?h(e.id,e.operation,e.data).then(function(a){a&&"function"==typeof a.json&&(a=a.json()),j.success("",a,-1)},function(a){j.error("",null,a)}):(e.data[this.s.operationName]=g,this.G(h,e.data,this.s.mode,g,j))),this.callEvent("onAfterDataSend",[e])}}}c.$proxy&&c.saveAll&&b.length&&c.saveAll(this.config.master,b,this,this.at({}))}},Ir:function(a){var b={};for(var c in a)0!==c.indexOf("$")&&(b[c]=a[c]);return b},G:function(a,b,c,d,e){return"function"==typeof a?a(b,d,e):void webix.ajax()[c](a,b,e)},at:function(a){var b=this;return{success:function(c,d,e){return b.xr(a,c,d,e)},error:function(c,d,e){return b.yr(a,c,d,e)}}},attachProgress:function(a,b,c){this.attachEvent("onBeforeDataSend",a),this.attachEvent("onAfterSync",b),this.attachEvent("onAfterSaveError",c),this.attachEvent("onLoadError",c)},yr:function(a,b,c,d){a?this.Jr(!0,a.id,!1,a.status,!1,{text:b,data:c,loader:d}):(this.callEvent("onLoadError",arguments),webix.callEvent("onLoadError",[b,c,d,this]))},Jr:function(a,b,c,d,e,f){var g=this.s.master,h=this.getItemState(b);if(h.Hr=!1,a){if(this.callEvent("onBeforeSaveError",[b,d,e,f]))return h.Er=!0,this.s.undoOnError&&g.s.undo&&g.undo(b),void this.callEvent("onAfterSaveError",[b,d,e,f])}else this.setItemState(b,!1);c&&b!=c&&this.s.store.changeId(b,c),e&&"delete"!=d&&this.s.updateFromResponse&&this.ignore(function(){this.s.store.updateItem(c||b,e)}),this.s.undoOnError&&g.s.undo&&g.removeUndo(c||b),this.callEvent("onAfterSave",[e,b,f]),this.callEvent("onAfter"+d,[e,b,f])},processResult:function(a,b,c){var d=b&&("error"==b.status||"invalid"==b.status),e=!!b&&(b.newid||b.id);this.Jr(d,a.id,e,a.status,b,c)},xr:function(a,b,c,d){if(this.callEvent("onBeforeSync",[a,b,c,d]),-1===d)this.processResult(a,c,{});else{var e=this.s.url;if(e.$proxy&&e.result)e.result(a,this.s.master,this,b,c,d);else{var f;b&&(f=c.json(),b&&"undefined"==typeof f&&(f={status:"error"})),this.processResult(a,f,{text:b,data:c,loader:d})}}this.callEvent("onAfterSync",[a,b,c,d])},escape:function(a){return this.s.escape?this.s.escape(a):encodeURIComponent(a)},getState:function(){if(!this.zr.length)return!1;for(var a=this.zr.length-1;a>=0;a--)if(this.zr[a].Hr)return"saving";return!0},getItemState:function(a){var b=this.bt(a);return this.zr[b]||null},setItemState:function(a,b){if(b)this.save(a,b);else{var c=this.bt(a);c>-1&&this.zr.splice(c,1)}},bt:function(a){for(var b=-1,c=0;c<this.zr.length;c++)if(this.zr[c].id==a){b=c;break}return b}},webix.Settings,webix.EventSystem,webix.ValidateData),webix.jsonp=function(a,b,c,d){var e="webix_jsonp_"+webix.uid(),f=document.createElement("script");f.id=e,f.type="text/javascript";var g=document.getElementsByTagName("head")[0];"function"==typeof b&&(d=c,c=b,b={}),b||(b={}),b.jsonp="webix.jsonp."+e,webix.jsonp[e]=function(){c.apply(d||window,arguments),f.parentNode.removeChild(f),c=g=d=f=null,delete webix.jsonp[e]};var h=[];for(var i in b)h.push(i+"="+encodeURIComponent(b[i]));a+=(-1==a.indexOf("?")?"?":"&")+h.join("&"),f.src=a,g.appendChild(f)},webix.markup={namespace:"x",attribute:"data-",dataTag:"li",Ys:/-([a-z])/g,Zs:function(a){return a[1].toUpperCase()},Lr:{width:!0,height:!0,gravity:!0,margin:!0,padding:!0,paddingX:!0,paddingY:!0,minWidth:!0,maxWidth:!0,minHeight:!0,maxHeight:!0,headerRowHeight:!0},AA:{disabled:!0,hidden:!0},Mr:function(a,b){return webix.ui.hasMethod(a,b)},init:function(a,b,c){a=a||document.body;for(var d=[],e=this.Nr(a),f=e.html,g=null,h=e.length-1;h>=0;h--)d[h]=e[h];for(var h=0;h<d.length;h++){var i;i=this.Or(d[h],f),i.$scope=c,g=this.Pr(i,d[h],f,b)}return g},parse:function(a,b){"string"==typeof a&&(a=webix.DataDriver[b||"xml"].toObject(a,a));var c=this.Nr(a,b);return this.Or(c[0],c.html)},Pr:function(a,b,c,d){return d?a.container=d:(a.container=b.parentNode,webix.html.remove(b)),this.Mr(a.view,"setPosition")&&delete a.container,webix.ui(a)},Nr:function(a){this.Qr=this.namespace?this.namespace+":":"",this.Rr=this.Qr+"ui";var b=a.getElementsByTagName(this.Rr);return!b.length&&a.documentElement&&a.documentElement.tagName==this.Rr&&(b=[a.documentElement]),!b.length&&this.namespace&&(b=a.getElementsByTagName("ui"),!b.length&&a.documentElement&&"ui"==a.documentElement.tagName&&(b=[a.documentElement])),b.length||(b=this.Sr(a),b.html=!0),b},Sr:function(a){if(a.getAttribute&&a.getAttribute(this.attribute+"view"))return[a];for(var b=a.querySelectorAll("["+this.attribute+"view]"),c=[],d=0;d<b.length;d++)b[d].parentNode.getAttribute(this.attribute+"view")||c.push(b[d]);return c},Or:function(a,b,c){var d=!1;if(!c){var e=this.Tr(a,b);if("ui"==e)for(var f=a.childNodes,g=0;g<f.length;g++)if(1==f[g].nodeType)return this.Or(f[g],b);c={view:e},b&&"table"==a.tagName.toLowerCase()&&(c.data=a,c.datatype="htmltable",d=!0)}for(var h="cols"==c.view||"rows"==c.view||this.Mr(c.view,"addView"),i=[],j=0,k=!(b||a.style),l=a.firstChild;l;){if(1==l.nodeType){var e=this.Tr(l,b);if("data"==e){j=1;var m=l;l=l.nextSibling,c.data=this.Ur(m,b);continue}if("config"==e){this.Vr(l,c,b);var n=l;l=l.nextSibling,webix.html.remove(n);continue}if("column"==e){j=1;var o=this.Wr(l,b);o.header=o.header||o.value,o.width=1*o.width||"",c.columns=c.columns||[],c.columns.push(o)}else if(e||h&&b){var p=this.Or(l,b,{view:e});"head"==p.view?c.head=p.rows?p.rows[0]:p.template:"body"==p.view?this.Mr(c.view,"addView")?i.push({body:p.rows?p.rows[0]:p.value,header:p.header||""}):c.body=p.rows?1==p.rows.length?p.rows[0]:{rows:p.rows}:p.value:i.push(p)}else if(k){j=1;var q=l.tagName;b&&(q=q.toLowerCase().replace(this.Ys,this.Zs)),c[q]=webix.DataDriver.xml.tagToObject(l)}}l=l.nextSibling}if(this.Xr(a,c,b),i.length)c.stack?c[c.stack]=i:this.Mr(c.view,"setValues")?c.elements=i:"rows"==c.view?(c.view="layout",c.rows=i):"cols"==c.view?(c.view="layout",c.cols=i):this.Mr(c.view,"setValue")?c.cells=i:this.Mr(c.view,"getBody")?c.body=1==i.length?i[0]:{rows:i}:c.rows=i;else if(!d&&!j)if(!b||c.template||c.view&&"template"!=c.view){var r=this.Yr(a,b);if(r){var s="template";this.Mr(c.view,"setValue")&&(s="value"),c[s]=c[s]||r}}else c.view="template",c.content=a;return c},Zr:function(a){var b=a.replace(/\s+/gm,"");return!(b.length>0)},$r:{body:1,head:1,data:1,rows:1,cols:1,cells:1,elements:1,ui:1,column:1,config:1},Vr:function(a,b,c){var d=this.Xr(a,{});d.name?(b[d.name]=d,delete d.name):d.stack?b[d.stack]=[]:b=d;for(var e=a.childNodes,f=0;f<e.length;f++){var g=null;g=1==e[f].nodeType&&"config"==e[f].tagName.toLowerCase()&&e[f].attributes.length?this.Vr(e[f],d,c):e[f].innerHTML,d.stack&&g&&b[d.stack].push(g)}return b},Tr:function(a,b){if(b)return a.getAttribute(this.attribute+"view")||("config"==a.tagName.toLowerCase()?"config":null);var c=a.tagName.toLowerCase();if(this.namespace){if(0===c.indexOf(this.Qr)||a.scopeName==this.namespace)return c.replace(this.Qr,"")}else if(webix.ui[c]||this.$r[c])return c;return 0},Ur:function(a,b){for(var c=[],d=a.getElementsByTagName(webix.markup.dataTag),e=0;e<d.length;e++){var f=d[e];if(f.parentNode.parentNode.tagName!=webix.markup.dataTag){var g=this.Wr(f,b);f.className&&(g.$css=f.className),c.push(g)}}return webix.html.remove(a),c},Yr:function(a,b){return a.style?a.innerHTML:a.firstChild?a.firstChild.wholeText||a.firstChild.data||"":""},Wr:function(a,b){if(!b)return webix.DataDriver.xml.tagToObject(a);var c=this.Xr(a,{},b);return!c.value&&a.childNodes.length&&(c.value=this.Yr(a,b)),c},Xr:function(a,b,c){for(var d=a.attributes,e=0;e<d.length;e++){var f=d[e].name;if(c){if(0!==f.indexOf(this.attribute))continue;f=f.replace(this.attribute,"").replace(this.Ys,this.Zs)}var g=d[e].value;-1!=g.indexOf("json://")&&(g=JSON.parse(g.replace("json://",""))),this.Lr[f]?g=parseInt(g,10):this.AA[f]&&(g=g&&"false"!==g&&"0"!=g),b[f]=g}return b}},function(){function a(a,b){var d=a.callback;c(!1),a.box.parentNode.removeChild(a.box),m=a.box=null,d&&d(b,a.details)}function b(b){if(m){b=b||event;var c=b.which||event.keyCode;if(webix.message.keyboard)return(13==c||32==c)&&a(m,!0),27==c&&a(m,!1),b.preventDefault&&b.preventDefault(),!(b.cancelBubble=!0)}}function c(a){c.cover&&c.cover.parentNode||(c.cover=document.createElement("DIV"),c.cover.onkeydown=b,c.cover.className="webix_modal_cover",document.body.appendChild(c.cover)),c.cover.style.display=a?"inline-block":"none"}function d(a,b,c){return"<div class='webix_popup_button"+(c?" "+c:"")+"' result='"+b+"' ><div>"+a+"</div></div>"}function e(a){n.area||(n.area=document.createElement("DIV"),n.area.className="webix_message_area",n.area.style[n.position]="5px",document.body.appendChild(n.area)),n.hide(a.id);var b=document.createElement("DIV");return b.innerHTML="<div>"+a.text+"</div>",b.className="webix_info webix_"+a.type,b.onclick=function(){n.hide(a.id),a=null},webix.$testmode&&(b.className+=" webix_no_transition"),"bottom"==n.position&&n.area.firstChild?n.area.insertBefore(b,n.area.firstChild):n.area.appendChild(b),a.expire>0&&(n.timers[a.id]=window.setTimeout(function(){n.hide(a.id)},a.expire)),b.style.height=b.offsetHeight-2+"px",n.pull[a.id]=b,b=null,a.id}function f(b,c,e){var f=document.createElement("DIV");f.className=" webix_modal_box webix_"+b.type,f.setAttribute("webixbox",1);var g="";if(b.width&&(f.style.width=b.width+(webix.rules.isNumber(b.width)?"px":"")),b.height&&(f.style.height=b.height+(webix.rules.isNumber(b.height)?"px":"")),b.title&&(g+='<div class="webix_popup_title">'+b.title+"</div>"),g+='<div class="webix_popup_text"><span>'+(b.content?"":b.text)+'</span></div><div  class="webix_popup_controls">',(c||b.ok)&&(g+=d(b.ok||"OK",!0,"confirm")),(e||b.cancel)&&(g+=d(b.cancel||"Cancel",!1)),b.buttons)for(var h=0;h<b.buttons.length;h++)g+=d(b.buttons[h],h);if(g+="</div>",f.innerHTML=g,b.content){var i=b.content;"string"==typeof i&&(i=document.getElementById(i)),"none"==i.style.display&&(i.style.display=""),f.childNodes[b.title?1:0].appendChild(i)}return f.onclick=function(c){c=c||event;var d=c.target||c.srcElement;if(d.className||(d=d.parentNode),-1!=d.className.indexOf("webix_popup_button")){var e=d.getAttribute("result");e="true"==e||"false"!=e&&e,a(b,e)}c.cancelBubble=!0},b.box=f,(c||e||b.buttons)&&(m=b),f}function g(a,d,e){var g=a.tagName?a:f(a,d,e);a.hidden||c(!0),document.body.appendChild(g);var h=a.left||Math.abs(Math.floor(((window.innerWidth||document.documentElement.offsetWidth)-g.offsetWidth)/2)),i=a.top||Math.abs(Math.floor(((window.innerHeight||document.documentElement.offsetHeight)-g.offsetHeight)/2));return"top"==a.position?g.style.top="-3px":g.style.top=i+"px",g.style.left=h+"px",g.onkeydown=b,g.focus(),a.hidden&&webix.modalbox.hide(g),g}function h(a){return g(a,!0,!1)}function i(a){return g(a,!0,!0)}function j(a){return g(a)}function k(a,b,c){return"object"!=typeof a&&("function"==typeof b&&(c=b,b=""),a={text:a,type:b,callback:c}),a}function l(a,b,c,d){return"object"!=typeof a&&(a={text:a,type:b,expire:c,id:d}),a.id=a.id||n.uid(),a.expire=a.expire||n.expire,a}var m=null;document.attachEvent?document.attachEvent("onkeydown",b):document.addEventListener("keydown",b,!0),webix.alert=function(){var a=k.apply(this,arguments);return a.type=a.type||"confirm",h(a)},webix.confirm=function(){var a=k.apply(this,arguments);return a.type=a.type||"alert",i(a)},webix.modalbox=function(){var a=k.apply(this,arguments);return a.type=a.type||"alert",j(a)},webix.modalbox.hide=function(a){if(a){for(;a&&a.getAttribute&&!a.getAttribute("webixbox");)a=a.parentNode;a&&a.parentNode.removeChild(a)}c(!1),m=null};var n=webix.message=function(a,b,c,d){a=l.apply(this,arguments),a.type=a.type||"info";var f=a.type.split("-")[0];switch(f){case"alert":return h(a);case"confirm":return i(a);case"modalbox":return j(a);default:return e(a)}};n.seed=(new Date).valueOf(),n.uid=function(){return n.seed++},n.expire=4e3,n.keyboard=!0,n.position="top",n.pull={},n.timers={},n.hideAll=function(){for(var a in n.pull)n.hide(a)},n.hide=function(a){var b=n.pull[a];b&&b.parentNode&&(window.setTimeout(function(){b.parentNode.removeChild(b),b=null},2e3),b.style.height=0,b.className+=" hidden",n.timers[a]&&window.clearTimeout(n.timers[a]),delete n.pull[a])}}(),webix.protoUI({name:"carousel",defaults:{scrollSpeed:"300ms",type:"clean",navigation:{}},$init:function(a){this.x.className+=" webix_carousel",this.Ft=null,this.y=null,this.Mh=0,this.$ready.unshift(this.Gt),this.$ready.push(this.Mi)},Gt:function(){this.Ft&&this.Ft.destructor&&this.Ft.destructor();var a="";this.config.cols?(a="cols",this.mc=0):(a="rows",this.mc=1);var b={borderless:!0,type:"clean"};b[a]=webix.copy(this.s[a]);for(var c=["type","margin","marginX","marginY","padding","paddingX","paddingY"],d={},e=0;e<c.length;e++)this.s[c[e]]&&(d[c[e]]=this.s[c[e]]);webix.extend(b,d,!0),this.Ft=webix.ui.A(b),this.Ft.Xb=this,this.x.appendChild(this.Ft.x),this.q=this.Ft.q,this.Ft.fc=webix.bind(webix.ui.carousel.prototype.fc,this),this.Ft.adjustScroll=webix.bind(webix.ui.carousel.prototype.adjustScroll,this),webix.attachEvent("onReconstruct",webix.bind(function(a){a==this.Ft&&this.Ht()},this)),this.w=this.x.firstChild},getChildViews:function(){return[this.Ft]},getLayout:function(){return this.Ft},Mi:function(){this.w.setAttribute("touch_scroll",this.mc?"y":"x"),this.Ft.attachEvent("onAfterScroll",webix.bind(function(){this.callEvent("onShow",[this.getActiveId()])},this))},adjustScroll:function(a){var b,c=this.mc?this.dc:this.bc;return this.mc?(b=Math.round(a.f/c),a.f=b*c):(b=Math.round(a.e/c),a.e=b*c),this.Mh=-b,this.s.navigation&&this.Eh(),!0},fc:function(a){var b,c,d,e,f,g;for(d=-1,c=this.Ft,b=0;b<c.q.length;b++)if(c.q[b]==a){d=b;break}0>d||d==this.Mh||(this.Mh=d,e=c.mc?this.dc:this.bc,f=-(c.mc?0:d*e),g=-(c.mc?d*e:0),this.scrollTo(f,g),this.callEvent("onShow",[c.q[this.Mh].s.id]),this.s.navigation&&this.Ch())},scrollTo:function(a,b){webix.Touch&&webix.animate.isSupported()?webix.Touch.Nf(this.w,a,b,this.s.scrollSpeed||"100ms"):(this.w.style.marginLeft=a+"px",this.w.style.marginTop=b+"px")},navigation_setter:function(a){return this.E(a,{type:"corner",buttons:!0,items:!0}),a},showNext:function(){this.Mh<this.Ft.q.length-1&&this.setActiveIndex(this.Mh+1)},showPrev:function(){this.Mh>0&&this.setActiveIndex(this.Mh-1)},setActiveIndex:function(a){
var b=this.Ft.q[a].s.id;webix.$$(b).show()},getActiveIndex:function(){return this.Mh},$getSize:function(a,b){var c=this.Ft.$getSize(0,0),d=webix.ui.view.prototype.$getSize.call(this,a,b);return this.Ft.mc?(d[0]=Math.max(d[0],c[0]),d[1]=Math.min(d[1],c[1])):(d[2]=Math.max(d[2],c[2]),d[3]=Math.min(d[3],c[3])),d},$setSize:function(a,b){var c=this.Ft,d=c.q.length,e=webix.ui.view.prototype.$setSize.call(this,a,b),f=this.dc*(c.mc?d:1),g=this.bc*(c.mc?1:d);e?(this.w.style.height=f+"px",this.w.style.width=g+"px",c.$setSize(g,f),this.Ht()):c.$setSize(g,f)},Ht:function(){var a=this.Ft,b=this.Mh||0,c=a.mc?this.dc:this.bc,d=-(a.mc?0:b*c),e=-(a.mc?b*c:0);this.scrollTo(d,e),this.s.navigation&&this.Ch()},getActiveId:function(){var a=this.Ft.q[this.Mh];return a?a.s.id:null},setActive:function(a){webix.$$(a).show()}},webix.EventSystem,webix.NavigationButtons,webix.ui.view),webix.type(webix.ui.list,{name:"uploader",template:"#name#  {common.removeIcon()}{common.percent()}<div style='float:right'>#sizetext#</div>",percent:function(a){return"transfer"==a.status?"<div style='width:60px; text-align:center; float:right'>"+a.percent+"%</div>":"<div class='webix_upload_"+a.status+"'><span class='"+("error"==a.status?"error_icon":"fa-ok webix_icon")+"'></span></div>"},removeIcon:function(a){return"<div class='webix_remove_upload'><span class='cancel_icon'></span></div>"},on_click:{webix_remove_upload:function(a,b){webix.$$(this.config.uploader).files.remove(b)}}}),webix.UploadDriver={flash:{$render:function(a){window.swfobject||webix.require("legacy/swfobject.js",!0);var b=this.s;b.swfId=b.swfId||"webix_swf_"+webix.uid(),this.re().innerHTML+="<div class='webix_upload_flash'><div id='"+b.swfId+"'></div></div>",this._r=this.re().lastChild,swfobject.embedSWF(webix.codebase+"/legacy/uploader.swf",b.swfId,"100%","100%","9",null,{uploaderId:b.id,ID:b.swfId,enableLogs:b.enableLogs?"1":"",paramName:b.inputName,multiple:b.multiple?"Y":""},{wmode:"transparent"}),swfobject.getFlashPlayerVersion(),webix.event(this.x,"click",webix.bind(function(){var a=new Date;a-(this.ds||0)>250&&this.fileDialog()},this)),this.files.attachEvent("onBeforeDelete",webix.bind(this.as,this))},$applyFlash:function(a,b){return this[a].apply(this,b)},getSwfObject:function(){return swfobject.getObjectById(this.s.swfId)},fileDialog:function(){this.getSwfObject()&&this.getSwfObject().showDialog()},send:function(a){if("function"==typeof a&&(this.fs=a,a=0),!a){var b=this.files.data.order,c=!0;if(b.length)for(var d=0;d<b.length;d++)c=this.send(b[d])&&c;return void(c&&this.gs())}var e=this.files.getItem(a);return"client"===e.status&&(e.status="transfer",this.getSwfObject()&&this.getSwfObject().upload(a,this.s.upload,this.s.formData||{}),!0)},$beforeAddFileToQueue:function(a,b,c){var d=b.split(".").pop(),e=this.ks(c);return this.callEvent("onBeforeFileAdd",[{id:a,name:b,size:c,sizetext:e,type:d}])},$addFileToQueue:function(a,b,c){if(this.files.exists(a))return!1;this.s.multiple||this.files.clearAll();var d=b.split(".").pop(),e=this.ks(c),f={name:b,id:a,size:c,sizetext:e,type:d,status:"client"};this.files.add(f),this.callEvent("onAfterFileAdd",[f]),a&&this.s.autosend&&this.send(a)},stopUpload:function(a){this.as(a)},as:function(a){var b=this.files.getItem(a);this.getSwfObject().uploadStop(a),b.status="client"},$onUploadComplete:function(){this.s.autosend&&this.gs()},$onUploadSuccess:function(a,b,c){var d=this.files.getItem(a);d&&(d.status="server",d.progress=100,c.text&&"string"==typeof c.text&&(webix.DataDriver.json.toObject(c.text),webix.extend(d,c,!0)),this.callEvent("onFileUpload",[d,c]),this.callEvent("onChange",[]),this.files.updateItem(a))},$onUploadFail:function(a){var b=this.files.getItem(a);b.status="error",delete b.percent,this.files.updateItem(a),this.callEvent("onFileUploadError",[b,""])}},html5:{$render:function(a){if(this._r)return void this.w.appendChild(this._r);this.files.attachEvent("onBeforeDelete",this.as);var b={type:"file","class":"webix_hidden_upload",tabindex:-1};this.s.accept&&(b.accept=this.s.accept),this.s.multiple&&(b.multiple="true");var c=webix.html.create("input",b);this._r=this.w.appendChild(c),webix.event(this.x,"drop",webix.bind(function(a){this.bs(a),webix.html.preventEvent(a)},this)),webix.event(c,"change",webix.bind(function(){if(this.cs(c.files),webix.env.isIE){var a=document.createElement("form");a.appendChild(this._r),a.reset(),this.w.appendChild(c)}else c.value=""},this)),webix.event(this.x,"click",webix.bind(function(){var a=new Date;a-(this.ds||0)>250&&this.fileDialog()},this)),webix.event(this.x,"dragenter",webix.html.preventEvent),webix.event(this.x,"dragexit",webix.html.preventEvent),webix.event(this.x,"dragover",webix.html.preventEvent)},bs:function(a){var b=a.dataTransfer.files;this.callEvent("onBeforeFileDrop",[b,a])&&this.cs(b),this.callEvent("onAfterFileDrop",[b,a])},fileDialog:function(a){this.ds=new Date,this.es=a;var b=this.x.getElementsByTagName("INPUT");b[b.length-1].click()},send:function(a,b){if("function"==typeof a&&(this.fs=a,a=0),!a){var c=this.files.data.order,d=!0;if(c.length)for(var e=0;e<c.length;e++)d=!this.send(c[e],b)&&d;return void(d&&this.gs())}var f=this.files.getItem(a);if("client"!==f.status)return!1;f.status="transfer";var g=new FormData;g.append(this.config.inputName,f.file);var h={};b=b||{};var i=new XMLHttpRequest;if(webix.callEvent("onBeforeAjax",["POST",this.s.upload,b,i,h,g])){for(var j in b)g.append(j,b[j]);f.xhr=i,i.upload.addEventListener("progress",webix.bind(function(b){this.$updateProgress(a,b.loaded/b.total*100)},this),!1),i.onload=webix.bind(function(b){i.aborted||this.is(a)},this),i.open("POST",this.s.upload,!0);for(var j in h)i.setRequestHeader(j,h[j]);i.send(g)}return this.$updateProgress(a,0),!0},is:function(a){var b=this.files.getItem(a);if(b){var c=null;200==b.xhr.status&&(c=webix.DataDriver[this.s.datatype||"json"].toObject(b.xhr.responseText)),c&&"error"!=c.status?this.js(a,c):(b.status="error",delete b.percent,this.files.updateItem(a),this.callEvent("onFileUploadError",[b,c])),delete b.xhr}},stopUpload:function(a){webix.bind(this.as,this.files)(a)},as:function(a){var b=this.getItem(a);"undefined"!=typeof b.xhr&&(b.xhr.aborted=!0,b.xhr.abort()),delete b.xhr,b.status="client"}}},webix.protoUI({name:"uploader",defaults:{autosend:!0,multiple:!0,inputName:"upload"},$cssName:"button",Ce:!0,send:function(){},fileDialog:function(){},stopUpload:function(){},$init:function(a){var b=webix.UploadDriver.html5;this.files=new webix.DataCollection,(webix.isUndefined(XMLHttpRequest)||webix.isUndefined((new XMLHttpRequest).upload))&&(b=webix.UploadDriver.flash),webix.extend(this,b,!0)},$setSize:function(a,b){webix.ui.view.prototype.$setSize.call(this,a,b)&&this.render()},apiOnly_setter:function(a){return webix.delay(this.render,this),this.$apiOnly=a},cs:function(a){for(var b=0;b<a.length;b++)this.addFile(a[b])},link_setter:function(a){return a&&webix.delay(function(){var a=webix.$$(this.s.link);a.sync&&a.filter?a.sync(this.files):a.setValues&&this.files.data.attachEvent("onStoreUpdated",function(){a.setValues(this)}),a.s.uploader=this.s.id},this),a},addFile:function(a,b,c){var d=null;"object"==typeof a&&(d=a,a=d.name,b=d.size);var e=this.ks(b);c=c||a.split(".").pop();var f={file:d,name:a,id:webix.uid(),size:b,sizetext:e,type:c,context:this.es,status:"client"};if(this.callEvent("onBeforeFileAdd",[f])){this.s.multiple||this.files.clearAll();var g=this.files.add(f);this.callEvent("onAfterFileAdd",[f]),g&&this.s.autosend&&this.send(g,this.s.formData)}},addDropZone:function(a,b){var c=webix.toNode(a),d="";b&&(d=" "+webix.html.createCss({content:'"'+b+'"'},":before"));var e="webix_drop_file"+d;webix.event(c,"dragover",webix.html.preventEvent),webix.event(c,"dragover",function(a){webix.html.addCss(c,e,!0)}),webix.event(c,"dragleave",function(a){webix.html.removeCss(c,e)}),webix.event(c,"drop",webix.bind(function(a){webix.html.removeCss(c,e);var b=a.dataTransfer;if(b&&b.files.length)for(var d=0;d<b.files.length;d++)this.addFile(b.files[d]);return webix.html.preventEvent(a)},this))},ks:function(a){for(var b=0;a>1024;)b++,a/=1024;return Math.round(100*a)/100+" "+webix.i18n.fileSize[b]},js:function(a,b){if("error"!=b.status){var c=this.files.getItem(a);c.status="server",c.progress=100,webix.extend(c,b,!0),this.callEvent("onFileUpload",[c,b]),this.callEvent("onChange",[]),this.files.updateItem(a)}this.isUploaded()&&this.gs(b)},gs:function(a){this.callEvent("onUploadComplete",[a]),this.fs&&(this.fs.call(this,a),this.fs=0)},isUploaded:function(){for(var a=this.files.data.order,b=0;b<a.length;b++)if("server"!=this.files.getItem(a[b]).status)return!1;return!0},$onUploadComplete:function(){},$updateProgress:function(a,b){var c=this.files.getItem(a);c.percent=Math.round(b),this.files.updateItem(a)},setValue:function(a){"string"==typeof a&&(a={value:a,status:"server"}),this.files.clearAll(),a&&this.files.parse(a),this.callEvent("onChange",[])},getValue:function(){var a=[];return this.files.data.each(function(b){"server"==b.status&&a.push(b.value||b.name)}),a.join(",")}},webix.ui.button),webix.html.addMeta=function(a,b){document.getElementsByTagName("head").item(0).appendChild(webix.html.create("meta",{name:a,content:b}))},function(){var a=function(){var a=!!(window.orientation%180);webix.ui.orientation!==a&&(webix.ui.orientation=a,webix.callEvent("onRotate",[a]))};webix.env.touch&&(webix.ui.orientation=!!((webix.isUndefined(window.orientation)?90:window.orientation)%180),webix.event(window,"onorientationchange"in window?"orientationchange":"resize",a)),webix.env.isFF&&window.matchMedia&&(window.matchMedia("(orientation: portrait)").addListener(function(){webix.ui.orientation=!1}),window.matchMedia("(orientation: landscape)").addListener(function(){webix.ui.orientation=!0})),webix.ui.fullScreen=function(){if(webix.env.touch){webix.html.addMeta("apple-mobile-web-app-capable","yes"),webix.html.addMeta("viewport","initial-scale=1, maximum-scale=1, user-scalable=no");var b=document.body.offsetHeight||document.body.scrollHeight,c=-1!=navigator.userAgent.indexOf("iPhone"),d=(-1!=navigator.userAgent.indexOf("iPad"),navigator.userAgent.match(/iPhone OS (\d+)/)),e=d&&d[1]>=7,f=c&&(356==b||208==b||306==b||158==b||444==b),g=568==window.screen.height,h=function(){var a=0,b=0;if(c&&!e)webix.ui.orientation?(a=g?568:480,b=f?268:300):(a=320,b=g?f?504:548:f?416:460);else if(webix.env.isAndroid){if(!webix.env.isFF){document.body.style.width=document.body.style.height="1px",document.body.style.overflow="hidden";var d=window.outerWidth/window.innerWidth;a=window.outerWidth/d,b=window.outerHeight/d}}else webix.env.isIEMobile||(a=window.innerWidth,b=window.innerHeight);b&&(document.body.style.height=b+"px",document.body.style.width=a+"px"),webix.ui.$freeze=!1,webix.ui.resize()},i=function(){webix.ui.$freeze=!0,webix.env.isSafari?h():webix.delay(h,null,[],500)};webix.attachEvent("onRotate",i),a(),webix.delay(i)}}}(),function(){if(window.jQuery){var a=jQuery,b=[],c=function(a){return a&&a.getAttribute?a.getAttribute("view_id"):void 0},d=function(d){return function(e){if("string"!=typeof e){var f=[];return this.each(function(){var a,b,b=c(this)||c(this.firstChild);if(b&&(a=webix.$$(b)),!a){var g=e?e.data:0;g&&(e.data=null);var h=webix.copy(e||{autoheight:!0,autowidth:!0});if(h.view=d,g&&(e.data=h.data=g),"table"===this.tagName.toLowerCase()){var i=webix.html.create("div",{id:this.getAttribute("id")||"","class":this.getAttribute("class")||""},"");this.parentNode.insertBefore(i,this),h.container=i,a=webix.ui(h),a.parse(this,"htmltable")}else h.container=this,a=webix.ui(h)}f.push(a)}),1===f.length?f[0]:f}return b[e]?b[e].apply(this,[]):void a.error("Method "+e+" does not exist on jQuery.".name)}},e=function(){for(var b in webix.ui){var c="webix_"+b;a.fn[c]||(a.fn[c]=d(b))}};e(),a(e)}}(),webix.history={track:function(a,b){this.ls(a,b);var c=webix.$$(a),d=function(){webix.history.ms||c.getValue&&webix.history.push(a,c.getValue())};c.getActiveId?c.attachEvent("onViewChange",d):c.attachEvent("onChange",d)},ns:function(a,b){webix.history.ms=1,a=webix.$$(a),a.callEvent("onBeforeHistoryNav",[b])&&a.setValue&&a.setValue(b),webix.history.ms=0},push:function(a,b,c){a=webix.$$(a);var d="";b&&(d="#!/"+b),webix.isUndefined(c)&&(c=a.getValue?a.getValue():b),window.history.pushState({webix:!0,id:a.s.id,value:c},"",d)},ls:function(a,b){webix.event(window,"popstate",function(a){a.state&&a.state.webix&&webix.history.ns(a.state.id,a.state.value)});var c=window.location.hash;webix.noanimate=!0,c&&0===c.indexOf("#!/")?webix.history.ns(a,c.replace("#!/","")):b&&(webix.history.push(a,b),webix.history.ns(a,b)),webix.noanimate=!1,this.ls=function(){}}},webix.protoUI({name:"fieldset",defaults:{borderless:!0},$init:function(a){this.x.className+=" webix_fieldset",this.x.innerHTML="<fieldset><legend></legend><div></div></fieldset>"},label_setter:function(a){return this.x.firstChild.childNodes[0].innerHTML=a,a},getChildViews:function(){return[this.os]},body_setter:function(a){return this.os=webix.ui(a,this.x.firstChild.childNodes[1]),this.os.Xb=this,a},getBody:function(){return this.os},$getSize:function(a,b){a+=18,b+=30;var c=this.ps=this.os.$getSize(a,b);return c},$setSize:function(a,b){webix.ui.view.prototype.$setSize.call(this,a,b)&&(b=Math.min(this.ps[3],b),a=Math.min(this.ps[1],a),this.os.$setSize(a-18,b-30))}},webix.ui.view),webix.protoUI({name:"slider",$touchCapture:!0,defaults:{min:0,max:100,value:50,step:1,title:!1,template:function(a,b){var c=b.qs="x"+webix.uid(),d="<div class='webix_slider_title'></div><div class='webix_slider_box'><div class='webix_slider_left'>&nbsp;</div><div class='webix_slider_right'></div><div class='webix_slider_handle' id='"+c+"'>&nbsp;</div></div>";return b.$renderInput(a,d,c)}},type_setter:function(a){this.x.className+=" webix_slider_"+a},title_setter:function(a){return"string"==typeof a?webix.template(a):a},rs:function(){return this.$view.querySelector(".webix_slider_handle")},oe:function(){var a=this.rs(),b=this.s;if(a){var c=this.Ee(b),d=b.value%b.step?Math.round(b.value/b.step)*b.step:b.value;d=Math.max(Math.min(d,b.max),b.min);var e=b.max-b.min,f=Math.ceil((c-20)*(d-b.min)/e),g=c-20-f;a.style.left=10+f-8+"px",a.parentNode.style.width=c+"px",g=Math.min(Math.max(g,2),c-22),f=Math.min(Math.max(f,2),c-22);var h=a.previousSibling;h.style.width=g+"px";var i=h.previousSibling;i.style.width=f+"px",this.s.title&&(a.parentNode.previousSibling.innerHTML=this.s.title(this.s,this))}},refresh:function(){this.oe()},$setValue:function(){this.refresh()},$getValue:function(){return this.s.value},$init:function(){webix.env.touch?this.attachEvent("onTouchStart",webix.bind(this.ss,this)):webix.event(this.x,"mousedown",webix.bind(this.ss,this))},ss:function(a){var b=a.target||a.srcElement;this.Ky&&this.Ky(a);var c=this.s.value;return webix.isArray(c)&&(c=webix.copy(c)),-1!=b.className.indexOf("webix_slider_handle")?(this.$x=c,this.ts.apply(this,arguments)):void(-1!=b.className.indexOf("webix_slider")&&(this.$x=c,this.s.value=this.us.apply(this,arguments),this.ts(a)))},ts:function(a){webix.env.touch?this.vs=[this.attachEvent("onTouchMove",webix.bind(this.ws,this)),this.attachEvent("onTouchEnd",webix.bind(this.xs,this))]:this.vs=[webix.event(document.body,"mousemove",webix.bind(this.ws,this)),webix.event(window,"mouseup",webix.bind(this.xs,this))],webix.html.addCss(document.body,"webix_noselect")},xs:function(a){this.vs&&(webix.env.touch?(webix.detachEvent(this.vs[0]),webix.detachEvent(this.vs[1])):(webix.eventRemove(this.vs[0]),webix.eventRemove(this.vs[1])),this.vs=[]),webix.html.removeCss(document.body,"webix_noselect");var b=this.s.value;webix.isArray(b)&&(b=webix.copy(b)),this.s.value=this.$x,this.setValue(b)},ws:function(a){this.s.value=this.us.apply(this,arguments),this.refresh(),this.callEvent("onSliderDrag",[])},us:function(a,b){var c=0;return c=webix.env.touch?b?b.x:a.x:webix.html.pos(a).x,this.ys(c)},ys:function(a){var b=this.s,c=b.max-b.min,d=webix.html.offset(this.rs().parentNode).x+10,e=this.Ee(b)-20,f=e?(a-d)*c/e:0;return f=Math.round((f+b.min)/b.step)*b.step,Math.max(Math.min(f,b.max),b.min)},De:function(){}},webix.ui.text),webix.proxy.offline={$proxy:!0,storage:webix.storage.local,cache:!1,data:"",zs:function(){this.cache||webix.env.offline||(webix.call("onOfflineMode",[]),webix.env.offline=!0)},As:function(){!this.cache&&webix.env.offline&&(webix.env.offline=!1,webix.call("onOnlineMode",[]))},load:function(a,b){var c={error:function(){var c=this.getCache()||this.data,d={responseText:c},e=webix.ajax.prototype.J(d);this.zs(),webix.ajax.$callback(a,b,c,e,d)},success:function(c,d,e){this.As(),webix.ajax.$callback(a,b,c,d,e),this.setCache(c)}};this.cache&&this.getCache()?c.error.call(this):this.source.$proxy?this.source.load(this,c):webix.ajax(this.source,c,this)},getCache:function(){return this.storage.get(this.Bs())},clearCache:function(){this.storage.remove(this.Bs())},setCache:function(a){this.storage.put(this.Bs(),a)},Bs:function(){return this.source.$proxy?this.source.source+"_$proxy$_data":this.source+"_$proxy$_data"},saveAll:function(a,b,c,d){this.setCache(a.serialize()),webix.ajax.$callback(a,d,"",b)},result:function(a,b,c,d,e){for(var f=0;f<e.length;f++)c.processResult({id:e[f].id,status:e[f].operation},{},{})}},webix.proxy.cache={init:function(){webix.extend(this,webix.proxy.offline)},cache:!0},webix.proxy.local={init:function(){webix.extend(this,webix.proxy.offline)},cache:!0,data:[]},window.angular&&function(){function a(a){var b=a.attr("id");return b||(b=webix.uid(),a.attr("id",b)),b}function b(a,c,d,e){if(!(e>10)){var f=a[0].firstChild;f&&1==f.nodeType&&(c=f.getAttribute("view_id")||c);var g=webix.$$(c);g?g.options_setter?(g.define("options",d),g.refresh()):(g.clearAll&&g.clearAll(),g.parse(d)):webix.delay(b,this,[a,c,d],100,e+1)}}angular.module("webix",[]).directive("webixUi",["$parse",function(b){return{restrict:"A",scope:!1,link:function(c,d,e,f){var g=e.webixUi,h=e.webixReady,i=e.webixWatch,j=null;a(d),d.ready(function(){if(!j){if(h&&(h=b(h)),d.bind("$destroy",function(){j&&j.destructor()}),g){var a=function(a){if(j&&j.destructor(),c[g]){var b=webix.copy(c[g]);b.$scope=c,d[0].innerHTML="",j=webix.ui(b,d[0]),h&&h(c,{root:j})}};"false"!==i&&c.$watch(g,a),a()}else{e.view||d.attr("view","rows");var f=webix.markup,k=f.attribute;f.attribute="",j="undefined"!=typeof e.webixRefresh?f.init(d[0],d[0],c):f.init(d[0],null,c),f.attribute=k,h&&h(c,{root:j})}c.$watch(function(){return d[0].offsetWidth+"."+d[0].offsetHeight},function(){j&&j.adjust()})}})}}}]).directive("webixShow",["$parse",function(b){return{restrict:"A",scope:!1,link:function(c,d,e,f){var g=b(e.webixShow),h=a(d);g(c)||d.attr("hidden","true"),c.$watch(e.webixShow,function(){var a=webix.$$(h);a&&(g(c)?(webix.$$(h).show(),d[0].removeAttribute("hidden")):webix.$$(h).hide())})}}}]).directive("webixEvent",["$parse",function(b){var c=function(a,c,d){var e=d.split("="),f=b(e[1]),g=e[0].trim();c.attachEvent(g,function(){return f(a,{id:arguments[0],details:arguments})})};return{restrict:"A",scope:!1,link:function(b,d,e,f){var g=e.webixEvent.split(";"),h=a(d);setTimeout(function(){var a=d[0].firstChild;a&&1==a.nodeType&&(h=a.getAttribute("view_id")||h);for(var e=webix.$$(h),f=0;f<g.length;f++)c(b,e,g[f])})}}}]).directive("webixElements",["$parse",function(b){return{restrict:"A",scope:!1,link:function(b,c,d,e){var f=d.webixElements,g=a(c);b.$watchCollection&&b.$watchCollection(f,function(a){setTimeout(function(){var b=webix.$$(g);b&&(b.define("elements",a),b.refresh())},1)})}}}]).directive("webixData",["$parse",function(c){return{restrict:"A",scope:!1,link:function(c,d,e,f){var g=e.webixData,h=a(d);c.$watchCollection&&c.$watchCollection(g,function(a){a&&setTimeout(function(){b(d,h,a,0)},1)})}}}])}(),window.Backbone&&function(){function a(a){a.Cs=!0,a.callEvent("onBeforeLoad",[]),a.blockEvent()}function b(a){a.unblockEvent(),a.Cs=!1,a.refresh()}var c={use_id:!1};webix.attachEvent("onUnSyncUnknown",function(a,b){for(var c=a.ab,d=a.It,e=0;e<c.length;e++)a.detachEvent(c[e]);for(var e=0;e<d.length;e++)b.off.apply(b,d[e])}),webix.attachEvent("onSyncUnknown",function(d,e,f){function g(a){if(c.use_id)return a;var b={};for(var d in a)"id"!=d&&(b[d]=a[d]);return b}function h(a){return c.use_id?a.id:a.cid}function i(a,b){for(var c=[],d=0;d<b.models.length;d++){var e=b.models[d],f=h(e),g=j(e);g.id=f,c.push(g)}a.clearAll(),a.df(c)}function j(a){if(c.get){for(var b={},d=0;d<c.get.length;d++){var e=c.get[d];b[e]=a.get(e)}return b}return a.toJSON()}f&&(c=f),c.get&&"string"==typeof c.get&&(c.get=c.get.split(","));for(var k=[["change",function(a,b){var c=h(a),e=d.pull[c]=j(a);e.id=c,d.pf&&d.pf(e),d.refresh(e.id)}],["remove",function(a,b){var c=h(a);d.pull[c]&&d.remove(c)}],["add",function(a,b){var c=h(a);if(!d.pull[c]){var e=j(a);e.id=c,d.qf&&d.qf(e),d.add(e)}}],["reset",function(a,b){i(d,e)}],["request",function(b){b instanceof Backbone.Collection&&a(d)}],["sync",function(a){a instanceof Backbone.Collection&&b(d)}],["error",function(a){a instanceof Backbone.Collection&&b(d)}]],l=0;l<k.length;l++)e.bind.apply(e,k[l]);var m=[d.attachEvent("onAfterAdd",function(a){if(!e.get(a)){var b=g(d.getItem(a)),c=new e.model(b),f=h(c);f!=a&&this.changeId(a,f),e.add(c),e.trigger("webix:add",c)}return!0}),d.attachEvent("onDataUpdate",function(a){var b=e.get(a),c=g(d.getItem(a));return b.set(c),e.trigger("webix:change",b),!0}),d.attachEvent("onAfterDelete",function(a){var b=e.get(a);return b&&(e.trigger("webix:remove",b),e.remove(a)),!0})];d.Ts=e,d.ab=m,d.It=k,(e.length||d.count())&&i(d,e)}),window.WebixView=Backbone.View.extend({initialize:function(a){this.options=a||{}},render:function(){this.beforeRender&&this.beforeRender.apply(this,arguments);var a,b=this.config||this.options.config;b.view&&webix.ui.hasMethod(b.view,"setPosition")||(a=window.$?$(this.el)[0]:this.el,a&&!a.config&&(a.innerHTML=""));var c=webix.copy(b);return c.$scope=this,this.root=webix.ui(c,a),this.afterRender&&this.afterRender.apply(this,arguments),this},destroy:function(){this.root&&this.root.destructor()},getRoot:function(){return this.root},getChild:function(a){return this.root.$$(a)}})}(),webix.ActiveContent={$init:function(a){if(a.activeContent){this.$ready.push(this.Ds),this.Es={},this.Fs={},this.Gs={},this.Hs={};for(var b in a.activeContent)if(this[b]=this.Is(b),a.activeContent[b].earlyInit){var c=webix.Xb;webix.Xb=null,this[b].call(this,{},this,a.activeContent),webix.Xb=c}}},Ds:function(){if(webix.event(this.$view,"blur",function(a){var b=a.target||a.srcElement;if("BUTTON"!=b.tagName){var c=webix.$$(a);if(c!==this&&c.getValue&&c.setValue){c.getNode(a);var d=c.getValue();d!=c.s.value&&c.setValue(d)}}},{bind:this,capture:!0}),this.filter){for(var a in this.s.activeContent)this.type[a]=this[a],this[a]=this.Js(a);this.attachEvent("onBeforeRender",function(){this.type.masterUI=this}),this.type.masterUI=this}},Js:function(a){return function(b){for(var c=this.Hs[a],d=c.s.id,e=this.getItemNode(b).getElementsByTagName("DIV"),f=0;f<e.length;f++)if(e[f].getAttribute("view_id")==d){c.x=c.y=e[f];break}return c}},Ks:function(a,b,c){return function(d){if(d)for(var e=d.target||d.srcElement;e;){if(e.getAttribute&&e.getAttribute("view_id")){if(a.y=a.x=a.$view=e,c.locate){var f=c.locate(e.parentNode),g=c.Gs[b][f];a.s.value=g,a.s.$masterId=f}return e}e=e.parentNode}return a.x}},Ls:function(a,b){return function(c){var d=b.data;if(b.filter){var e=b.locate(this.x.parentNode);d=b.getItem(e),this.refresh(),b.Fs[a][e]=this.x.outerHTML||(new XMLSerializer).serializeToString(this.x),b.Gs[a][e]=c}d[a]=c}},Is:function(a){return function(b,c,d){var e=c.Es?c:c.masterUI;if(!e.Es[a]){var f=document.createElement("DIV");d=d||e.s.activeContent;var g=webix.ui(d[a],f);f.firstChild.setAttribute("onclick","event.processed = true; if (webix.env.isIE8) event.srcElement.w_view = '"+g.s.id+"';"),g.getNode=e.Ks(g,a,e),g.attachEvent("onChange",e.Ls(a,e)),e.Hs[a]=g,e.Es[a]=f.innerHTML,e.Fs[a]={},e.Gs[a]={}}if(e.filter&&b[a]!=e.Gs[a]&&!webix.isUndefined(b[a])){var g=e.Hs[a];g.blockEvent(),g.$view.firstChild||g.refresh(),g.setValue(b[a]),g.refresh(),g.unblockEvent(),e.Gs[a][b.id]=b[a],e.Fs[a][b.id]=g.x.outerHTML||(new XMLSerializer).serializeToString(g.x)}return e.Fs[a][b.id]||e.Es[a]}}},webix.ProgressBar={$init:function(){webix.isUndefined(this.cu)&&this.attachEvent&&(this.attachEvent("onBeforeLoad",this.showProgress),this.attachEvent("onAfterLoad",this.hideProgress),this.cu=null)},showProgress:function(a){if(!this.cu){a=webix.extend({position:0,delay:2e3,type:"icon",icon:"refresh",hide:!1},a||{},!0);var b="icon"==a.type?"fa-"+a.icon+" fa-spin":"";if(this.cu=webix.html.create("DIV",{"class":"webix_progress_"+a.type},"<div class='webix_progress_state "+b+"'></div>"),this.setPosition||(this.x.style.position="relative"),webix.html.insertBefore(this.cu,this.x.firstChild,this.x),!webix.Touch.$active&&this.getScrollState){var c=this.getScrollState();this.x.scrollWidth!=this.$width&&(this.cu.style.left=c.x+"px"),this.x.scrollHeight!=this.$height&&("bottom"!=a.type?this.cu.style.top=c.y+"px":this.cu.style.top=c.y+this.$height-this.cu.offsetHeight+"px")}this.du=1}a&&"icon"!=a.type&&webix.delay(function(){if(this.cu){var b=a.position||1;if(this.cu.style[webix.env.transitionDuration]===webix.undefined&&a.delay){var c=0,d=0,e=b/a.delay*30,f=this;this.Oy&&(window.clearInterval(this.Oy),d=this.cu.firstChild.offsetWidth/this.cu.offsetWidth*100),this.Oy=window.setInterval(function(){30*c==a.delay?window.clearInterval(f.Oy):(f.cu&&f.cu.firstChild&&(f.cu.firstChild.style.width=d+c*e*b*100+"%"),c++)},30)}else this.cu.firstChild.style.width=100*b+"%",a.delay&&(this.cu.firstChild.style[webix.env.transitionDuration]=a.delay+"ms");a.hide&&webix.delay(this.hideProgress,this,[1],a.delay)}this.du=0},this)},hideProgress:function(a){this.du&&(a=!0),this.cu&&(a?(this.Oy&&window.clearInterval(this.Oy),webix.html.remove(this.cu),this.cu=null):this.showProgress({position:1.1,delay:300,hide:!0}))}},webix.protoUI({name:"video",$init:function(a){a.id||(a.id=webix.uid()),this.$ready.push(this.Ms)},Ms:function(){var a=this.s;if(this.w=webix.html.create("video",{"class":"webix_view_video",style:"width:100%;height:100%;",autobuffer:"autobuffer"},""),a.poster&&(this.w.poster=a.poster),a.src){"object"!=typeof a.src&&(a.src=[a.src]);for(var b=0;b<a.src.length;b++)this.w.innerHTML+=' <source src="'+a.src[b]+'">'}a.controls&&(this.w.controls=!0),a.autoplay&&(this.w.autoplay=!0),this.x.appendChild(this.w)},getVideo:function(){return this.w},defaults:{src:"",controls:!0}},webix.ui.view),webix.protoUI({name:"NonGPL",$init:function(){webix.message("GPL version does not support '"+this.name+"'","error",-1)}},webix.ui.view),webix.protoUI({name:"organogram"},webix.ui.NonGPL),webix.protoUI({name:"barcode"},webix.ui.NonGPL),webix.protoUI({name:"portlet"},webix.ui.NonGPL),webix.protoUI({name:"pdfviewer"},webix.ui.NonGPL),webix.protoUI({name:"pdfbar"},webix.ui.NonGPL),webix.protoUI({name:"excelviewer"},webix.ui.NonGPL),webix.protoUI({name:"excelbar"},webix.ui.NonGPL),webix.protoUI({name:"datasuggest"},webix.ui.NonGPL),webix.protoUI({name:"gridsuggest"},webix.ui.NonGPL),webix.protoUI({name:"multitext"},webix.ui.NonGPL),webix.protoUI({name:"multiselect"},webix.ui.NonGPL),webix.protoUI({name:"multicombo"},webix.ui.NonGPL),webix.protoUI({name:"multisuggest"},webix.ui.NonGPL),webix.protoUI({name:"checksuggest"},webix.ui.NonGPL),webix.protoUI({name:"treemap"},webix.ui.NonGPL),webix.protoUI({name:"rangeslider"},webix.ui.NonGPL),webix.protoUI({name:"rangechart"},webix.ui.NonGPL),webix.protoUI({name:"datalayout"},webix.ui.NonGPL),webix.protoUI({name:"abslayout"},webix.ui.NonGPL),webix.protoUI({name:"sidemenu",defaults:{padding:0,animate:!0,position:"left",width:200,borderless:!0},$init:function(){this.$view.className+=" webix_sidemenu"},position_setter:function(a){var b=this.s.position;return b&&webix.html.removeCss(this.$view," webix_sidemenu_"+b),webix.html.addCss(this.$view," webix_sidemenu_"+a),a},$getSize:function(){var a=webix.ui.window.prototype.$getSize.apply(this,arguments);return this.MA=a,a},$setSize:function(a,b){webix.ui.view.prototype.$setSize.call(this,a,b),a=this.bc-2*this.s.padding,b=this.dc-2*this.s.padding,this.w.style.padding=this.s.padding+"px",this.bd.style.display="none",this.ed.style.height=b+"px",this.gd.$setSize(a,b)},show:function(){return!!this.callEvent("onBeforeShow",arguments)&&(this.s.hidden=!1,this.x.style.zIndex=this.s.zIndex||webix.ui.zIndex(),(this.s.modal||this.my)&&(this.Md(!0),this.my=null),this.x.style.display="block",this.Qd(),this.s.position&&this.Td(),this.Ww=1,webix.delay(function(){this.Ww=0},this,[],webix.env.touch?400:100),this.config.autofocus&&(this.Vd=webix.UIManager.getFocus(),webix.UIManager.setFocus(this)),-1==webix.ui.et.find(this)&&webix.ui.et.push(this),void this.callEvent("onShow",[]))},Td:function(a){var b,c,d,e,f,g=0,h=0,i={};this.$view.style.position="fixed",d=window.innerWidth||document.documentElement.offsetWidth,e=window.innerHeight||document.documentElement.offsetHeight,b=this.MA[0]||d,c=this.MA[2]||e,f=this.s.position,"top"==f?b=d:"right"==f?(c=e,g=d-b):"bottom"==f?(b=d,h=e-c):c=e,i={left:g,top:h,width:b,height:c,maxWidth:d,maxHeight:e},"function"==typeof this.s.state&&this.s.state.call(this,i),this.NA=i,this.$setSize(i.width,i.height),"undefined"==typeof a&&this.OA()?(webix.html.removeCss(this.$view,"webix_animate",!0),this.Qf[this.s.position].beforeShow.call(this,i),webix.delay(function(){webix.html.addCss(this.$view,"webix_animate",!0)},this,null,1),webix.delay(function(){this.Qf[this.s.position].show.call(this,i)},this,null,10)):this.setPosition(i.left,i.top)},OA:function(){return webix.animate.isSupported()&&this.s.animate&&!(webix.env.isIE&&-1!=navigator.appVersion.indexOf("MSIE 9"))},hidden_setter:function(a){return a?this.hide(!0):this.show(),!!a},Qf:{left:{beforeShow:function(a){this.$view.style.left=-a.width+"px",this.$view.style.top=a.top+"px"},show:function(){this.$view.style.left="0px"},hide:function(a){this.$view.style.left=-a.width+"px"}},right:{beforeShow:function(a){this.$view.style.left="auto",this.$view.style.right=-a.width+"px",this.$view.style.top=a.top+"px"},show:function(){this.$view.style.right="0px"},hide:function(a){this.$view.style.right=-a.width+"px"}},top:{beforeShow:function(a){this.setPosition(a.left,a.top),this.$view.style.height="0px",this.ed.style.height="0px"},show:function(a){this.$view.style.height=a.height+"px",this.ed.style.height=a.height+"px"},hide:function(){this.$view.style.height="0px",this.ed.style.height="0px"}},bottom:{beforeShow:function(a){this.$view.style.left=a.left+"px",this.$view.style.top="auto";var b=a.bottom!=webix.undefined?a.bottom:a.maxHeight-a.top-a.height;this.$view.style.bottom=b+"px",this.$view.style.height="0px"},show:function(a){this.$view.style.height=a.height+"px"},hide:function(){this.$view.style.height="0px"}}},hide:function(a){if(!this.$destructed){this.s.modal&&this.Md(!1);var b=window.innerWidth||document.documentElement.offsetWidth,c=window.innerHeight||document.documentElement.offsetHeight;if(!a&&this.OA()&&b==this.NA.maxWidth&&c==this.NA.maxHeight){this.Qf[this.s.position].hide.call(this,this.NA);var d=webix.event(this.$view,webix.env.transitionEnd,webix.bind(function(a){this.Wd(),webix.eventRemove(d)},this))}else this.Wd();if(this.s.autofocus){var e=document.activeElement;e&&this.x&&this.x.contains(e)&&(webix.UIManager.setFocus(this.Vd),this.Vd=null)}this.ny()}}},webix.ui.popup),function(){function a(a,b){var c=[],d=0,e=0,f=a.getColumnConfig,g=b.columns,h=!!b.rawValues;if(!g)if(f)g=a.Aj;else{g=webix.copy(a.data.pull[a.data.order[0]]);for(var i in g)g[i]=!0;delete g.id}b.id&&c.push({id:"id",width:50,header:" ",template:function(a){return a.id}});for(var i in g){var j=g[i];if(!j.noExport){f&&a.Aj[i]&&(j=webix.extend(webix.extend({},j),a.Aj[i]));var k={id:j.id,template:(h?null:j.template)||function(a){return function(b){return b[a]}}(i),width:(j.width||200)*("excel"===b.gB?8.43/70:1),header:j.header!==!1?j.header||i:""};"string"==typeof k.header?k.header=[{text:k.header}]:k.header=webix.copy(k.header);
for(var l=0;l<k.header.length;l++)k.header[l]=k.header[l]?k.header[l].contentId?"":k.header[l].text:"";if(d=Math.max(d,k.header.length),a.s.footer){var m=j.footer||"";m="string"==typeof m?[{text:m}]:webix.copy(m);for(var l=0;l<m.length;l++)m[l]?m[l]=m[l].contentId?a.getHeaderContent(m[l].contentId).getValue():m[l].text:m[l]="";k.footer=m,e=Math.max(e,k.footer.length)}c.push(k)}}for(var l=0;l<c.length;l++){for(var n=d-c[l].header.length,o=0;n>o;o++)c[l].header.push("");if(a.s.footer){n=e-c[l].footer.length;for(var o=0;n>o;o++)c[l].footer.push("")}}return c}function b(a,b,c){var d,e,f=!!b.filterHTML,g=/<[^>]*>/gi,h=[];if(b.header!==!1&&c.length&&"excel"===b.gB)for(var i=0;i<c[0].header.length;i++){e=[];for(var j=0;j<c.length;j++)d="",c[j].header[i]&&(d=c[j].header[i]),f&&(d=d.replace(g,"")),e.push(d);h.push(e)}var k="TreeStore"==a.data.name;if(a.data.each(function(b){for(var d=[],e=0;e<c.length;e++){var i=c[e],j=i.template(b,a.type,b[i.id],i,e);j||0===j||(j=""),f&&"string"==typeof j&&(k&&(j=j.replace(/<div class=.webix_tree_none.><\/div>/," - ")),j=j.replace(g,"")),d.push(j)}h.push(d)},a),b.footer!==!1)for(var l=c[0].footer?c[0].footer.length:0,m=0;l>m;m++){for(var n=[],j=0;j<c.length;j++){var o=c[j].footer[m];f&&(o=o.replace(g,"")),n.push(o)}"excel"===b.gB&&h.push(n)}return h}function c(a){for(var b=[],c=0;c<a.length;c++)b.push({wch:a[c].width});return b}function d(a){return Math.round(25569+a/864e5)}function e(a,b){var c=a.Rt,d=[];if(c){var e=b.xCorrection||0,f=b.yCorrection||0;for(var g in c){var h=c[g];for(var i in h){var j=a.getColumnIndex(i)-e,k=a.getIndexById(g)-f,l=j+h[i][0]-1,m=k+(h[i][1]-1);d.push({s:{c:j,r:k+1},e:{c:l,r:m+1}})}}}return d}function f(a,b,e){for(var f={},g={s:{c:1e7,r:1e7},e:{c:0,r:0}},h=0;h!=a.length;++h)for(var i=0;i!=a[h].length;++i){g.s.r>h&&(g.s.r=h),g.s.c>i&&(g.s.c=i),g.e.r<h&&(g.e.r=h),g.e.c<i&&(g.e.c=i);var k={v:a[h][i]};if(null!==k.v){var l=XLSX.utils.encode_cell({c:i,r:h});"number"==typeof k.v?k.t="n":"boolean"==typeof k.v?k.t="b":k.v instanceof Date?(k.t="n",k.z=XLSX.SSF[j][14],k.v=d(k.v)):k.t="s",f[l]=k}}return g.s.c<1e7&&(f["!ref"]=XLSX.utils.encode_range(g)),f["!cols"]=c(b),e.length&&(f["!merges"]=e),f}function g(a){for(var b=new ArrayBuffer(a.length),c=new Uint8Array(b),d=0;d!=a.length;++d)c[d]=255&a.charCodeAt(d);return b}function h(a,b,c,d){c.header=webix.isUndefined(c.header)||c.header===!0?{}:c.header,c.footer=webix.isUndefined(c.footer)||c.footer===!0?{}:c.footer,c.table=c.table||{};var e=c.width||595.296,f=c.height||841.896;if(c.orientation&&"landscape"===c.orientation&&(f=[e,e=f][0]),c.autowidth){e=80;for(var g=0;g<a.length;g++)e+=a[g].width}for(var h=new pdfjs.Document({padding:40,font:c.hB,threshold:256,width:e,height:f}),i=c.header===!1?0:a[0].header.length,j=c.footer!==!1&&a[0].footer?a[0].footer.length:0,k=[],g=0;g<a.length;g++)k[g]=a[g].width;var l=webix.extend(c.table,{borderWidth:1,height:20,lineHeight:1.1,borderColor:15658734,backgroundColor:16777215,color:6710886,textAlign:"left",paddingRight:10,paddingLeft:10,headerRows:i,widths:k.length?k:["100%"]}),m=h.table(l);if(i)for(var n=webix.extend(c.header,{borderRightColor:11587299,borderBottomColor:11587299,color:4868682,backgroundColor:13820911,height:27,lineHeight:1.2}),g=0;i>g;g++)for(var o=m.tr(n),p=0;p<a.length;p++)o.td(a[p].header[g].toString());for(var q=0;q<b.length;q++)for(var r=m.tr({}),s=0;s<b[q].length;s++)r.td(b[q][s]);if(j)for(var t=webix.extend(c.footer,{borderRightColor:15658734,borderBottomColor:15658734,backgroundColor:16448250,color:6710886,height:27,lineHeight:1.2}),g=0;j>g;g++)for(var u=m.tr(t),p=0;p<a.length;p++)u.td(a[p].footer[g].toString());if(c.docFooter!==!1){var v=h.footer();v.text({color:6710886,textAlign:"center"}).append(webix.i18n.dataExport.page||"Page").pageNumber().append("  "+(webix.i18n.dataExport.of||"of")+"  ").pageCount()}if(c.docHeader){"string"==typeof c.docHeader&&(c.docHeader={text:c.docHeader});var w=webix.extend(c.docHeader,{color:6710886,textAlign:"right"}),x=h.header({paddingBottom:10});x.text(w.text,w)}if(c.docHeaderImage){"string"==typeof c.docHeaderImage&&(c.docHeaderImage={url:c.docHeaderImage});var x=h.header({paddingBottom:10}),y=webix.extend(c.docHeaderImage,{align:"right"});pdfjs.load(c.docHeaderImage.url,function(a,b){if(!a){var e=new pdfjs.Image(b);x.image(e,y)}var f=h.render();d(f,c)})}else{var z=h.render();d(z,c)}}webix.toPNG=function(a,b){var c=webix.promise.defer();return webix.require(webix.cdn+"/extras/html2canvas.min.js",function(){var d=webix.$$(a);d&&d.$exportView&&(d=d.$exportView({}));var e=d?d.$view:webix.toNode(a),f=(b||"data")+".png";window.html2canvas(e).then(function(a){var b=a.msToBlob?a.msToBlob():a.toDataURL("image/png");webix.html.download(b,f),a.remove(),c.resolve()})}),c},webix.toExcel=function(c,d){var h=webix.promise.defer(),i=webix.$$(c);return d=d||{},i.$exportView&&(i=i.$exportView(d)),webix.require(webix.cdn+"/extras/xlsx.core.min.js",function(){d.gB="excel";var c=a(i,d),j=b(i,d,c),k=d.spans?e(i,d):[],l=f(j,c,k),m={SheetNames:[],Sheets:[]},n=d.name||"Data";n=n.replace(/[\*\?\:\[\]\\\/]/g,"").substring(0,31),m.SheetNames.push(n),m.Sheets[n]=l;var o=XLSX.write(m,{bookType:"xlsx",bookSST:!1,type:"binary"}),p=(d.filename||n)+".xlsx",q=new Blob([g(o)],{type:"application/xlsx"});webix.html.download(q,p),h.resolve()}),h};var i;webix.toPDF=function(c,d){var e=webix.promise.defer();return webix.require(webix.cdn+"/extras/pdfjs.js",function(){var f=webix.$$(c);d=d||{},f.$exportView&&(f=f.$exportView(d)),d.gB="pdf",d.hB=i;var g=a(f,d),j=b(f,d,g),k=function(a,b){var c=(b.filename||"data")+".pdf",d=new Blob([a.toString()],{type:"application/pdf"});webix.html.download(d,c),e.resolve()};d.hB?h(g,j,d,k):pdfjs.load(webix.cdn+"/extras/pt-sans.regular.ttf",function(a,b){if(a)throw a;i=d.hB=new pdfjs.TTFFont(b),h(g,j,d,k)})}),e};var j="_table"}(),$(function(){dtable=new webix.ui({container:"browsetable",id:"dtable",view:"datatable",columns:[{id:"uniprot",map:"#data1#",header:["UniProt AC",{content:"textFilter"}],width:150},{id:"genename",map:"#data2#",header:["Gene name",{content:"textFilter"}],width:250},{id:"locus",map:"#data3#",header:["Locus",{content:"textFilter"}],width:250},{id:"numort",map:"#data4#",header:["Number of","Homologs"],width:150},{id:"numint",map:"#data5#",header:["Number of","Interactions"],width:150}],resizeColumn:!0,datatype:"csv",url:data_url_prefix+"data/nodes.csv",autoheight:!0,autowidth:!0,pager:{template:"{common.prev()}{common.next()}Page {common.page()} from #limit#",container:"paging_here",size:25,group:5},hover:"browse_row_hover",on:{onItemClick:function(a,b,c){window.location.href=data_url_prefix+"protein/"+dtable.getItem(a.row).uniprot+".html"}}}),webix.extend($$("dtable"),webix.ProgressBar);var a=[{view:"label",label:"Select a <i>Salmonella enterica</i> strain:"},{view:"select",name:"strain",options:data_url_prefix+"data/strain_select.json"}];strain_select_form=new webix.ui({container:"strain_select_div",id:"strain_select_form",view:"form",scroll:!1,width:300,elements:a}),$$("strain_select_form").elements.strain.attachEvent("onChange",function(a,b){$$("dtable").showProgress({type:"bottom",delay:3e3,hide:!0}),dtable.clearAll(),dtable.load(data_url_prefix+"data/nodes"+a+".csv"),$$("dtable").refresh()}),$(window).resize(function(){$(window).width()<1050&&(dtable.hideColumn("numort"),dtable.hideColumn("numint")),$(window).width()>=1050&&(dtable.showColumn("numort"),dtable.showColumn("numint")),$(window).width()<850&&(dtable.setColumnWidth("uniprot",80),dtable.setColumnWidth("genename",120),dtable.setColumnWidth("locus",120)),$(window).width()>=850&&(dtable.setColumnWidth("uniprot",150),dtable.setColumnWidth("genename",250),dtable.setColumnWidth("locus",250))}),$(window).width()<1050&&(dtable.hideColumn("numort"),dtable.hideColumn("numint")),$(window).width()<850&&(dtable.setColumnWidth("uniprot",80),dtable.setColumnWidth("genename",120),dtable.setColumnWidth("locus",120))});